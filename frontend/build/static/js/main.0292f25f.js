/*! For license information please see main.0292f25f.js.LICENSE.txt */
(()=>{var e={219:(e,t,n)=>{"use strict";var r=n(3763),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return r.isMemo(e)?i:o[e.$$typeof]||s}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(m){var s=h(n);s&&s!==m&&e(t,s,r)}var i=d(n);A&&(i=i.concat(A(n)));for(var o=l(t),p=l(n),f=0;f<i.length;++f){var g=i[f];if(!a[g]&&(!r||!r[g])&&(!p||!p[g])&&(!o||!o[g])){var x=u(n,g);try{c(t,g,x)}catch(b){}}}}return t}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2284);function s(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=(0,r.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},1153:(e,t,n)=>{"use strict";var r=n(5043),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1497:(e,t,n)=>{"use strict";var r=n(3218);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2730:(e,t,n)=>{"use strict";var r=n(5043),s=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function p(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!A.call(m,e)||!A.call(h,e)&&(u.test(e)?m[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,x);f[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,x);f[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,x);f[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var P,U=Object.assign;function O(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var Q=!1;function R(e,t){if(!e||Q)return"";Q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{Q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function H(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function M(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case B:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,Ae=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function fe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(he).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,je=null;function Ce(e){if(e=bs(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=vs(t),we(e.stateNode,e.type,t))}}function Be(e){Ne?je?je.push(e):je=[e]:Ne=e}function Se(){if(Ne){var e=Ne,t=je;if(je=Ne=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function ke(){}var Fe=!1;function Ie(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Ee(e,t,n)}finally{Fe=!1,(null!==Ne||null!==je)&&(ke(),Se())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=vs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){De=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){De=!1}function _e(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Pe=!1,Ue=null,Oe=!1,Qe=null,Re={onError:function(e){Pe=!0,Ue=e}};function He(e,t,n,r,s,a,i,o,l){Pe=!1,Ue=null,_e.apply(Re,arguments)}function Me(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Me(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Me(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ze(s),e;if(i===r)return ze(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,We=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=At(o):0!==(a&=i)&&(r=At(a))}else 0!==(i=n&~s)?r=At(i):0!==a&&(r=At(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,wt,Nt,jt,Ct,Bt=!1,St=[],Et=null,kt=null,Ft=null,It=new Map,Tt=new Map,Dt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Pt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ut(e){var t=xs(e.target);if(null!==t){var n=Me(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function Qt(e,t,n){Ot(e)&&n.delete(t)}function Rt(){Bt=!1,null!==Et&&Ot(Et)&&(Et=null),null!==kt&&Ot(kt)&&(kt=null),null!==Ft&&Ot(Ft)&&(Ft=null),It.forEach(Qt),Tt.forEach(Qt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Bt||(Bt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Rt)))}function Mt(e){function t(t){return Ht(t,e)}if(0<St.length){Ht(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ht(Et,e),null!==kt&&Ht(kt,e),null!==Ft&&Ht(Ft,e),It.forEach(t),Tt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Dt.shift()}var Vt=y.ReactCurrentBatchConfig,zt=!0;function Kt(e,t,n,r){var s=bt,a=Vt.transition;Vt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,Vt.transition=a}}function qt(e,t,n,r){var s=bt,a=Vt.transition;Vt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,Vt.transition=a}}function Gt(e,t,n,r){if(zt){var s=Yt(e,t,n,r);if(null===s)zr(e,t,r,Wt,n),_t(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Et=Pt(Et,e,t,n,r,s),!0;case"dragenter":return kt=Pt(kt,e,t,n,r,s),!0;case"mouseover":return Ft=Pt(Ft,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return It.set(a,Pt(It.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Tt.set(a,Pt(Tt.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(_t(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var a=bs(s);if(null!==a&&vt(a),null===(a=Yt(e,t,n,r))&&zr(e,t,r,Wt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Wt=null;function Yt(e,t,n,r){if(Wt=null,null!==(e=xs(e=ve(r))))if(null===(t=Me(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),An=U({},cn,{view:0,detail:0}),un=sn(An),hn=U({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(hn),pn=sn(U({},hn,{dataTransfer:0})),fn=sn(U({},An,{relatedTarget:0})),gn=sn(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(xn),yn=sn(U({},cn,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Cn(){return jn}var Bn=U({},An,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(Bn),En=sn(U({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=sn(U({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Fn=sn(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=U({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=sn(In),Dn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,_n=null;d&&"documentMode"in document&&(_n=document.documentMode);var Pn=d&&"TextEvent"in window&&!_n,Un=d&&(!Ln||_n&&8<_n&&11>=_n),On=String.fromCharCode(32),Qn=!1;function Rn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Mn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Kn(e,t,n,r){Be(r),0<(t=qr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Wn(e){Or(e,0)}function Yn(e){if(G(ys(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Zn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,ve(e)),Ie(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!A.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function Ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ar(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=dr(n,a);var i=dr(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,fr=null,gr=null,xr=null,br=!1;function yr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==fr||fr!==W(r)||("selectionStart"in(r=fr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=qr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Nr={},jr={};function Cr(e){if(Nr[e])return Nr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return Nr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Br=Cr("animationend"),Sr=Cr("animationiteration"),Er=Cr("animationstart"),kr=Cr("transitionend"),Fr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Fr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ir.length;Dr++){var Lr=Ir[Dr];Tr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Tr(Br,"onAnimationEnd"),Tr(Sr,"onAnimationIteration"),Tr(Er,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,o,l,c){if(He.apply(this,arguments),Pe){if(!Pe)throw Error(a(198));var d=Ue;Pe=!1,Ue=null,Oe||(Oe=!0,Qe=d)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Ur(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Ur(s,o,c),a=l}}}if(Oe)throw e=Qe,Oe=!1,Qe=null,e}function Qr(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Rr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){if(!e[Hr]){e[Hr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Pr.has(t)||Rr(t,!1,e),Rr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Rr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Xt(t)){case 1:var s=Kt;break;case 4:s=qt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=xs(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Ie(function(){var r=a,s=ve(n),i=[];e:{var o=Fr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=fn;break;case"focusout":c="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Br:case Sr:case Er:l=gn;break;case kr:l=Fn;break;case"scroll":l=un;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),A=!d&&"scroll"===e,u=d?null!==o?o+"Capture":null:o;d=[];for(var h,m=r;null!==m;){var p=(h=m).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==u&&(null!=(p=Te(m,u))&&d.push(Kr(m,p,h)))),A)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!xs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xs(c):null)&&(c!==(A=Me(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,p="onMouseLeave",u="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,p="onPointerLeave",u="onPointerEnter",m="pointer"),A=null==l?o:ys(l),h=null==c?o:ys(c),(o=new d(p,m+"leave",l,n,s)).target=A,o.relatedTarget=h,p=null,xs(s)===r&&((d=new d(u,m+"enter",c,n,s)).target=h,d.relatedTarget=A,p=d),A=p,l&&c)e:{for(u=c,m=0,h=d=l;h;h=Gr(h))m++;for(h=0,p=u;p;p=Gr(p))h++;for(;0<m-h;)d=Gr(d),m--;for(;0<h-m;)u=Gr(u),h--;for(;m--;){if(d===u||null!==u&&d===u.alternate)break e;d=Gr(d),u=Gr(u)}d=null}else d=null;null!==l&&Wr(i,o,l,d,!1),null!==c&&null!==A&&Wr(i,A,c,d,!0)}if("select"===(l=(o=r?ys(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var f=Xn;else if(zn(o))if(Jn)f=ir;else{f=sr;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(f=ar);switch(f&&(f=f(e,r))?Kn(i,f,n,s):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?ys(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(fr=g,gr=r,xr=null);break;case"focusout":xr=gr=fr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,yr(i,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":yr(i,n,s)}var x;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Mn?Rn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Mn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Mn&&(x=en()):(Zt="value"in(Jt=s)?Jt.value:Jt.textContent,Mn=!0)),0<(g=qr(r,b)).length&&(b=new yn(b,e,null,n,s),i.push({event:b,listeners:g}),x?b.data=x:null!==(x=Hn(n))&&(b.data=x))),(x=Pn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Qn=!0,On);case"textInput":return(e=t.data)===On&&Qn?null:e;default:return null}}(e,n):function(e,t){if(Mn)return"compositionend"===e||!Ln&&Rn(e,t)?(e=en(),$t=Zt=Jt=null,Mn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(s=new yn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=x))}Or(i,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Te(e,n))&&r.unshift(Kr(e,a,s)),null!=(a=Te(e,t))&&r.push(Kr(e,a,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Te(n,a))&&i.unshift(Kr(n,l,o)):s||null!=(l=Te(n,a))&&i.push(Kr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Mt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Mt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var As=Math.random().toString(36).slice(2),us="__reactFiber$"+As,hs="__reactProps$"+As,ms="__reactContainer$"+As,ps="__reactEvents$"+As,fs="__reactListeners$"+As,gs="__reactHandles$"+As;function xs(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[us]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[us])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[us]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function vs(e){return e[hs]||null}var ws=[],Ns=-1;function js(e){return{current:e}}function Cs(e){0>Ns||(e.current=ws[Ns],ws[Ns]=null,Ns--)}function Bs(e,t){Ns++,ws[Ns]=e.current,e.current=t}var Ss={},Es=js(Ss),ks=js(!1),Fs=Ss;function Is(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ts(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){Cs(ks),Cs(Es)}function Ls(e,t,n){if(Es.current!==Ss)throw Error(a(168));Bs(Es,t),Bs(ks,n)}function _s(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,V(e)||"Unknown",s));return U({},n,r)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,Fs=Es.current,Bs(Es,e),Bs(ks,ks.current),!0}function Us(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=_s(e,t,Fs),r.__reactInternalMemoizedMergedChildContext=e,Cs(ks),Cs(Es),Bs(Es,e)):Cs(ks),Bs(ks,n)}var Os=null,Qs=!1,Rs=!1;function Hs(e){null===Os?Os=[e]:Os.push(e)}function Ms(){if(!Rs&&null!==Os){Rs=!0;var e=0,t=bt;try{var n=Os;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Os=null,Qs=!1}catch(s){throw null!==Os&&(Os=Os.slice(e+1)),Ge($e,Ms),s}finally{bt=t,Rs=!1}}return null}var Vs=[],zs=0,Ks=null,qs=0,Gs=[],Ws=0,Ys=null,Xs=1,Js="";function Zs(e,t){Vs[zs++]=qs,Vs[zs++]=Ks,Ks=e,qs=t}function $s(e,t,n){Gs[Ws++]=Xs,Gs[Ws++]=Js,Gs[Ws++]=Ys,Ys=e;var r=Xs;e=Js;var s=32-it(r)-1;r&=~(1<<s),n+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Xs=1<<32-it(t)+s|n<<s|r,Js=a+e}else Xs=1<<a|n<<s|r,Js=e}function ea(e){null!==e.return&&(Zs(e,1),$s(e,1,0))}function ta(e){for(;e===Ks;)Ks=Vs[--zs],Vs[zs]=null,qs=Vs[--zs],Vs[zs]=null;for(;e===Ys;)Ys=Gs[--Ws],Gs[Ws]=null,Js=Gs[--Ws],Gs[Ws]=null,Xs=Gs[--Ws],Gs[Ws]=null}var na=null,ra=null,sa=!1,aa=null;function ia(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,sa=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function Aa(e){if(e!==na)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ua(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function ua(){for(var e=ra;e;)e=cs(e.nextSibling)}function ha(){ra=na=null,sa=!1}function ma(e){null===aa?aa=[e]:aa.push(e)}var pa=y.ReactCurrentBatchConfig;function fa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===N?A(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===T&&xa(a)===t.type)?((r=s(t,n.props)).ref=fa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=fa(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Oc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function A(e,t,n,r,a){return null===t||7!==t.tag?((t=_c(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=fa(e,null,t),n.return=e,n;case w:return(t=Oc(t,e.mode,n)).return=e,t;case T:return u(e,(0,t._init)(t._payload),n)}if(te(t)||_(t))return(t=_c(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function h(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===s?c(e,t,n,r):null;case w:return n.key===s?d(e,t,n,r):null;case T:return h(e,t,(s=n._init)(n._payload),r)}if(te(n)||_(n))return null!==s?null:A(e,t,n,r,null);ga(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case w:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case T:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||_(r))return A(t,e=e.get(n)||null,r,s,null);ga(t,r)}return null}function p(s,a,o,l){for(var c=null,d=null,A=a,p=a=0,f=null;null!==A&&p<o.length;p++){A.index>p?(f=A,A=null):f=A.sibling;var g=h(s,A,o[p],l);if(null===g){null===A&&(A=f);break}e&&A&&null===g.alternate&&t(s,A),a=i(g,a,p),null===d?c=g:d.sibling=g,d=g,A=f}if(p===o.length)return n(s,A),sa&&Zs(s,p),c;if(null===A){for(;p<o.length;p++)null!==(A=u(s,o[p],l))&&(a=i(A,a,p),null===d?c=A:d.sibling=A,d=A);return sa&&Zs(s,p),c}for(A=r(s,A);p<o.length;p++)null!==(f=m(A,s,p,o[p],l))&&(e&&null!==f.alternate&&A.delete(null===f.key?p:f.key),a=i(f,a,p),null===d?c=f:d.sibling=f,d=f);return e&&A.forEach(function(e){return t(s,e)}),sa&&Zs(s,p),c}function f(s,o,l,c){var d=_(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var A=d=null,p=o,f=o=0,g=null,x=l.next();null!==p&&!x.done;f++,x=l.next()){p.index>f?(g=p,p=null):g=p.sibling;var b=h(s,p,x.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),o=i(b,o,f),null===A?d=b:A.sibling=b,A=b,p=g}if(x.done)return n(s,p),sa&&Zs(s,f),d;if(null===p){for(;!x.done;f++,x=l.next())null!==(x=u(s,x.value,c))&&(o=i(x,o,f),null===A?d=x:A.sibling=x,A=x);return sa&&Zs(s,f),d}for(p=r(s,p);!x.done;f++,x=l.next())null!==(x=m(p,s,f,x.value,c))&&(e&&null!==x.alternate&&p.delete(null===x.key?f:x.key),o=i(x,o,f),null===A?d=x:A.sibling=x,A=x);return e&&p.forEach(function(e){return t(s,e)}),sa&&Zs(s,f),d}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case v:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(r,d.sibling),(a=s(d,i.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&xa(c)===d.type){n(r,d.sibling),(a=s(d,i.props)).ref=fa(r,d,i),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===N?((a=_c(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Lc(i.type,i.key,i.props,null,r.mode,l)).ref=fa(r,a,i),l.return=r,r=l)}return o(r);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=s(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Oc(i,r.mode,l)).return=r,r=a}return o(r);case T:return e(r,a,(d=i._init)(i._payload),l)}if(te(i))return p(r,a,i,l);if(_(i))return f(r,a,i,l);ga(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=s(a,i)).return=r,r=a):(n(r,a),(a=Uc(i,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var ya=ba(!0),va=ba(!1),wa=js(null),Na=null,ja=null,Ca=null;function Ba(){Ca=ja=Na=null}function Sa(e){var t=wa.current;Cs(wa),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ka(e,t){Na=e,Ca=ja=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Fa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===ja){if(null===Na)throw Error(a(308));ja=e,Na.dependencies={lanes:0,firstContext:e}}else ja=ja.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Da(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ta(t)):(n.next=s.next,s.next=n),t.interleaved=n,La(e,r)}function La(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _a=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,La(e,n)}return null===(s=r.interleaved)?(t.next=t,Ta(r)):(t.next=s.next,s.next=t),r.interleaved=t,La(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var s=e.updateQueue;_a=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var A=s.baseState;for(i=0,d=c=l=null,o=a;;){var u=o.lane,h=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(u=t,h=n,p.tag){case 1:if("function"===typeof(m=p.payload)){A=m.call(h,A,u);break e}A=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(u="function"===typeof(m=p.payload)?m.call(h,A,u):m)||void 0===u)break e;A=U({},A,u);break e;case 2:_a=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(u=s.effects)?s.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=A):d=d.next=h,i|=u;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(u=o).next,u.next=null,s.lastBaseUpdate=u,s.shared.pending=null}}if(null===d&&(l=A),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Pl|=i,e.lanes=i,e.memoizedState=A}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(a(191,s));s.call(r)}}}var za={},Ka=js(za),qa=js(za),Ga=js(za);function Wa(e){if(e===za)throw Error(a(174));return e}function Ya(e,t){switch(Bs(Ga,t),Bs(qa,e),Bs(Ka,za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Ka),Bs(Ka,t)}function Xa(){Cs(Ka),Cs(qa),Cs(Ga)}function Ja(e){Wa(Ga.current);var t=Wa(Ka.current),n=le(t,e.type);t!==n&&(Bs(qa,e),Bs(Ka,n))}function Za(e){qa.current===e&&(Cs(Ka),Cs(qa))}var $a=js(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=y.ReactCurrentDispatcher,si=y.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,Ai=0,ui=0;function hi(){throw Error(a(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pi(e,t,n,r,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Zi:$i,e=n(r,s),di){i=0;do{if(di=!1,Ai=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,s)}while(di)}if(ri.current=Ji,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function fi(){var e=0!==Ai;return Ai=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function xi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=oi,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var A=d.lane;if((ai&A)===A)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var u={lane:A,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=u,o=r):c=c.next=u,ii.lanes|=A,Pl|=A}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Pl|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vi(e){var t=xi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function wi(){}function Ni(e,t){var n=ii,r=xi(),s=t(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,bo=!0),r=r.queue,_i(Bi.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Fi(9,Ci.bind(null,n,r,s,t),void 0,null),null===kl)throw Error(a(349));0!==(30&ai)||ji(n,t,s)}return s}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ci(e,t,n,r){t.value=n,t.getSnapshot=r,Si(t)&&Ei(e)}function Bi(e,t,n){return n(function(){Si(t)&&Ei(e)})}function Si(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ei(e){var t=La(e,1);null!==t&&nc(t,e,1,-1)}function ki(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ii(){return xi().memoizedState}function Ti(e,t,n,r){var s=gi();ii.flags|=e,s.memoizedState=Fi(1|t,n,void 0,void 0===r?null:r)}function Di(e,t,n,r){var s=xi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&mi(r,i.deps))return void(s.memoizedState=Fi(t,n,a,r))}ii.flags|=e,s.memoizedState=Fi(1|t,n,a,r)}function Li(e,t){return Ti(8390656,8,e,t)}function _i(e,t){return Di(2048,8,e,t)}function Pi(e,t){return Di(4,2,e,t)}function Ui(e,t){return Di(4,4,e,t)}function Oi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4,4,Oi.bind(null,t,e),n)}function Ri(){}function Hi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),ii.lanes|=n,Pl|=n,e.baseState=!0),t)}function zi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{bt=n,si.transition=r}}function Ki(){return xi().memoizedState}function qi(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wi(e))Yi(t,n);else if(null!==(n=Da(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function Gi(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wi(e))Yi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(s.next=s,Ta(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Da(e,t,s,r))&&(nc(n,e,r,s=ec()),Xi(n,t,r))}}function Wi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Ji={readContext:Fa,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Zi={readContext:Fa,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Fa,useEffect:Li,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ti(4194308,4,Oi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ti(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ti(4,2,e,t)},useMemo:function(e,t){var n=gi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:ki,useDebugValue:Ri,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=ki(!1),t=e[0];return e=zi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=gi();if(sa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===kl)throw Error(a(349));0!==(30&ai)||ji(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Li(Bi.bind(null,r,i,e),[e]),r.flags|=2048,Fi(9,Ci.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=gi(),t=kl.identifierPrefix;if(sa){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-it(Xs)-1)).toString(32)+n),0<(n=Ai++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ui++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$i={readContext:Fa,useCallback:Hi,useContext:Fa,useEffect:_i,useImperativeHandle:Qi,useInsertionEffect:Pi,useLayoutEffect:Ui,useMemo:Mi,useReducer:yi,useRef:Ii,useState:function(){return yi(bi)},useDebugValue:Ri,useDeferredValue:function(e){return Vi(xi(),oi.memoizedState,e)},useTransition:function(){return[yi(bi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Ki,unstable_isNewReconciler:!1},eo={readContext:Fa,useCallback:Hi,useContext:Fa,useEffect:_i,useImperativeHandle:Qi,useInsertionEffect:Pi,useLayoutEffect:Ui,useMemo:Mi,useReducer:vi,useRef:Ii,useState:function(){return vi(bi)},useDebugValue:Ri,useDeferredValue:function(e){var t=xi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[vi(bi)[0],xi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Ki,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Me(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Oa(r,s);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Qa(e,a,s))&&(nc(t,e,s,r),Ra(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Oa(r,s);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Qa(e,a,s))&&(nc(t,e,s,r),Ra(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Oa(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Qa(e,s,r))&&(nc(t,e,r,n),Ra(t,e,r))}};function so(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,a))}function ao(e,t,n){var r=!1,s=Ss,a=t.contextType;return"object"===typeof a&&null!==a?a=Fa(a):(s=Ts(t)?Fs:Es.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Is(e,s):Ss),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Fa(a):(a=Ts(t)?Fs:Es.current,s.context=Is(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Ma(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Ao(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zl||(zl=!0,Kl=r),Ao(0,t)},n}function mo(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ao(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){Ao(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function fo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Qa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=y.ReactCurrentOwner,bo=!1;function yo(e,t,n,r){t.child=null===e?va(t,null,n,r):ya(t,e.child,n,r)}function vo(e,t,n,r,s){n=n.render;var a=t.ref;return ka(t,s),r=pi(e,t,n,r,a,s),n=fi(),null===e||bo?(sa&&n&&ea(t),t.flags|=1,yo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zo(e,t,s))}function wo(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Tc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,No(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return zo(e,t,s)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,zo(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return Bo(e,t,n,r,s)}function jo(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bs(Dl,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bs(Dl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Bs(Dl,Tl),Tl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Bs(Dl,Tl),Tl|=r;return yo(e,t,s,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bo(e,t,n,r,s){var a=Ts(n)?Fs:Es.current;return a=Is(t,a),ka(t,s),n=pi(e,t,n,r,a,s),r=fi(),null===e||bo?(sa&&r&&ea(t),t.flags|=1,yo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zo(e,t,s))}function So(e,t,n,r,s){if(Ts(n)){var a=!0;Ps(t)}else a=!1;if(ka(t,s),null===t.stateNode)Vo(e,t),ao(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Fa(c):c=Is(t,c=Ts(n)?Fs:Es.current);var d=n.getDerivedStateFromProps,A="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;A||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),_a=!1;var u=t.memoizedState;i.state=u,Ma(t,r,i,s),l=t.memoizedState,o!==r||u!==l||ks.current||_a?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=_a||so(t,n,o,r,u,l,c))?(A||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ua(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,A=t.pendingProps,u=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Fa(l):l=Is(t,l=Ts(n)?Fs:Es.current);var h=n.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==A||u!==l)&&io(t,i,r,l),_a=!1,u=t.memoizedState,i.state=u,Ma(t,r,i,s);var m=t.memoizedState;o!==A||u!==m||ks.current||_a?("function"===typeof h&&(no(t,n,h,r),m=t.memoizedState),(c=_a||so(t,n,c,r,u,m,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,n,r,a,s)}function Eo(e,t,n,r,s,a){Co(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Us(t,n,!1),zo(e,t,a);r=t.stateNode,xo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=ya(t,e.child,null,a),t.child=ya(t,null,o,a)):yo(e,t,o,a),t.memoizedState=r.state,s&&Us(t,n,!0),t.child}function ko(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Ya(e,t.containerInfo)}function Fo(e,t,n,r,s){return ha(),ma(s),t.flags|=256,yo(e,t,n,r),t.child}var Io,To,Do,Lo,_o={dehydrated:null,treeContext:null,retryLane:0};function Po(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,s=t.pendingProps,i=$a.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Bs($a,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Pc(l,s,0,null),e=_c(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Po(n),t.memoizedState=_o,e):Oo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,Qo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Pc({mode:"visible",children:r.children},s,0,null),(i=_c(i,s,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&ya(t,e.child,null,o),t.child.memoizedState=Po(o),t.memoizedState=_o,i);if(0===(1&t.mode))return Qo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Qo(e,t,o,r=co(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=kl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,La(e,s),nc(r,e,s,-1))}return pc(),Qo(e,t,o,r=co(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ra=cs(s.nextSibling),na=t,sa=!0,aa=null,null!==e&&(Gs[Ws++]=Xs,Gs[Ws++]=Js,Gs[Ws++]=Ys,Xs=e.id,Js=e.overflow,Ys=t),t=Oo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(o){o=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Dc(r,o):(o=_c(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Po(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=_o,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Oo(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Qo(e,t,n,r){return null!==r&&ma(r),ya(t,e.child,null,n),(e=Oo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ro(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Ho(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Mo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(yo(e,t,r.children,n),0!==(2&(r=$a.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ro(e,n,t);else if(19===e.tag)Ro(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bs($a,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ho(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ho(t,!0,n,null,a);break;case"together":Ho(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ts(t.type)&&Ds(),qo(t),null;case 3:return r=t.stateNode,Xa(),Cs(ks),Cs(Es),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Aa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),To(e,t),qo(t),null;case 5:Za(t);var s=Wa(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qo(t),null}if(e=Wa(Ka.current),Aa(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[us]=t,r[hs]=i,e=0!==(1&t.mode),n){case"dialog":Qr("cancel",r),Qr("close",r);break;case"iframe":case"object":case"embed":Qr("load",r);break;case"video":case"audio":for(s=0;s<_r.length;s++)Qr(_r[s],r);break;case"source":Qr("error",r);break;case"img":case"image":case"link":Qr("error",r),Qr("load",r);break;case"details":Qr("toggle",r);break;case"input":X(r,i),Qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qr("invalid",r);break;case"textarea":se(r,i),Qr("invalid",r)}for(var l in xe(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Qr("scroll",r)}switch(n){case"input":q(r),$(r,i,!0);break;case"textarea":q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[us]=t,e[hs]=r,Io(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Qr("cancel",e),Qr("close",e),s=r;break;case"iframe":case"object":case"embed":Qr("load",e),s=r;break;case"video":case"audio":for(s=0;s<_r.length;s++)Qr(_r[s],e);s=r;break;case"source":Qr("error",e),s=r;break;case"img":case"image":case"link":Qr("error",e),Qr("load",e),s=r;break;case"details":Qr("toggle",e),s=r;break;case"input":X(e,r),s=Y(e,r),Qr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=U({},r,{value:void 0}),Qr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Qr("invalid",e)}for(i in xe(n,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&Ae(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Qr("scroll",e):null!=d&&b(e,i,d,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Wa(Ga.current),Wa(Ka.current),Aa(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[us]=t,t.stateNode=r}return qo(t),null;case 13:if(Cs($a),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ua(),ha(),t.flags|=98560,i=!1;else if(i=Aa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[us]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$a.current)?0===Ll&&(Ll=3):pc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xa(),To(e,t),null===e&&Mr(t.stateNode.containerInfo),qo(t),null;case 10:return Sa(t.type._context),qo(t),null;case 19:if(Cs($a),null===(i=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ko(i,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ko(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bs($a,1&$a.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Ml&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return qo(t),null}else 2*Je()-i.renderingStartTime>Ml&&1073741824!==n&&(t.flags|=128,r=!0,Ko(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=$a.current,Bs($a,r?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return Ac(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Wo(e,t){switch(ta(t),t.tag){case 1:return Ts(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Cs(ks),Cs(Es),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(Cs($a),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs($a),null;case 4:return Xa(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return Ac(),null;default:return null}}Io=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Wa(Ka.current);var a,i=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),i=[];break;case"select":s=U({},s,{value:void 0}),r=U({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in xe(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Qr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,n,a)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[hs],delete t[ps],delete t[fs],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,Al=!1;function ul(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||$o(n,t);case 6:var r=dl,s=Al;dl=null,ul(e,t,n),Al=s,null!==(dl=r)&&(Al?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(Al?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Mt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=Al,dl=n.stateNode.containerInfo,Al=!0,ul(e,t,n),dl=r,Al=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),s=s.next}while(s!==r)}ul(e,t,n);break;case 1:if(!Xo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,ul(e,t,n),Xo=r):ul(e,t,n);break;default:ul(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,Al=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===dl)throw Error(a(160));hl(i,o,s),dl=null,Al=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){jc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(f){jc(e,e.return,f)}try{nl(5,e,e.return)}catch(f){jc(e,e.return,f)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var s=e.stateNode;try{ue(s,"")}catch(f){jc(e,e.return,f)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(s,i),be(l,o);var d=be(l,i);for(o=0;o<c.length;o+=2){var A=c[o],u=c[o+1];"style"===A?fe(s,u):"dangerouslySetInnerHTML"===A?Ae(s,u):"children"===A?ue(s,u):b(s,A,u,d)}switch(l){case"input":Z(s,i);break;case"textarea":ae(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?ne(s,!!i.multiple,m,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[hs]=i}catch(f){jc(e,e.return,f)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){jc(e,e.return,f)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Mt(t.containerInfo)}catch(f){jc(e,e.return,f)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Hl=Je())),4&r&&ml(e);break;case 22:if(A=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||A,pl(t,e),Xo=d):pl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!A&&0!==(1&e.mode))for(Zo=e,A=e.child;null!==A;){for(u=Zo=A;null!==Zo;){switch(m=(h=Zo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:$o(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(f){jc(r,n,f)}}break;case 5:$o(h,h.return);break;case 22:if(null!==h.memoizedState){vl(u);continue}}null!==m?(m.return=h,Zo=m):vl(u)}A=A.sibling}e:for(A=null,u=e;;){if(5===u.tag){if(null===A){A=u;try{s=u.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=u.stateNode,o=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(f){jc(e,e.return,f)}}}else if(6===u.tag){if(null===A)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(f){jc(e,e.return,f)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;A===u&&(A=null),u=u.return}A===u&&(A=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:pl(t,e),gl(e),4&r&&ml(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(ue(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Yo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var c=Xo;if(Yo=i,(Xo=l)&&!c)for(Zo=s;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?wl(s):null!==l?(l.return=i,Zo=l):wl(s);for(;null!==a;)Zo=a,bl(a,t,n),a=a.sibling;Zo=s,Yo=o,Xo=c}yl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Zo=a):yl(e)}}function yl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var A=d.memoizedState;if(null!==A){var u=A.dehydrated;null!==u&&Mt(u)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&sl(t)}catch(h){jc(t,t.return,h)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function vl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){jc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){jc(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){jc(t,i,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Nl,jl=Math.ceil,Cl=y.ReactCurrentDispatcher,Bl=y.ReactCurrentOwner,Sl=y.ReactCurrentBatchConfig,El=0,kl=null,Fl=null,Il=0,Tl=0,Dl=js(0),Ll=0,_l=null,Pl=0,Ul=0,Ol=0,Ql=null,Rl=null,Hl=0,Ml=1/0,Vl=null,zl=!1,Kl=null,ql=null,Gl=!1,Wl=null,Yl=0,Xl=0,Jl=null,Zl=-1,$l=0;function ec(){return 0!==(6&El)?Je():-1!==Zl?Zl:Zl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Il?Il&-Il:null!==pa.transition?(0===$l&&($l=pt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(a(185));gt(e,n,r),0!==(2&El)&&e===kl||(e===kl&&(0===(2&El)&&(Ul|=n),4===Ll&&oc(e,Il)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Ml=Je()+500,Qs&&Ms()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ut(e,e===kl?Il:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Qs=!0,Hs(e)}(lc.bind(null,e)):Hs(lc.bind(null,e)),is(function(){0===(6&El)&&Ms()}),n=null;else{switch(yt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,$l=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ut(e,e===kl?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=fc(e,r);else{t=r;var s=El;El|=2;var i=mc();for(kl===e&&Il===t||(Vl=null,Ml=Je()+500,uc(e,t));;)try{xc();break}catch(l){hc(e,l)}Ba(),Cl.current=i,El=s,null!==Fl?t=0:(kl=null,Il=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ac(e,s))),1===t)throw n=_l,uc(e,0),oc(e,r),rc(e,Je()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!or(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=fc(e,r))&&(0!==(i=mt(e))&&(r=i,t=ac(e,i))),1===t))throw n=_l,uc(e,0),oc(e,r),rc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:vc(e,Rl,Vl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Hl+500-Je())){if(0!==ut(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(vc.bind(null,e,Rl,Vl),t);break}vc(e,Rl,Vl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>s&&(s=o),r&=~i}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=rs(vc.bind(null,e,Rl,Vl),r);break}vc(e,Rl,Vl);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Rl,Rl=n,null!==t&&ic(t)),e}function ic(e){null===Rl?Rl=e:Rl.push.apply(Rl,e)}function oc(e,t){for(t&=~Ol,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));wc();var t=ut(e,0);if(0===(1&t))return rc(e,Je()),null;var n=fc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=_l,uc(e,0),oc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Rl,Vl),rc(e,Je()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Ml=Je()+500,Qs&&Ms())}}function dc(e){null!==Wl&&0===Wl.tag&&0===(6&El)&&wc();var t=El;El|=1;var n=Sl.transition,r=bt;try{if(Sl.transition=null,bt=1,e)return e()}finally{bt=r,Sl.transition=n,0===(6&(El=t))&&Ms()}}function Ac(){Tl=Dl.current,Cs(Dl)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Fl)for(n=Fl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Xa(),Cs(ks),Cs(Es),ni();break;case 5:Za(r);break;case 4:Xa();break;case 13:case 19:Cs($a);break;case 10:Sa(r.type._context);break;case 22:case 23:Ac()}n=n.return}if(kl=e,Fl=e=Dc(e.current,null),Il=Tl=t,Ll=0,_l=null,Ol=Ul=Pl=0,Rl=Ql=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Ia=null}return e}function hc(e,t){for(;;){var n=Fl;try{if(Ba(),ri.current=Ji,ci){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,Ai=0,Bl.current=null,null===n||null===n.return){Ll=1,_l=t,Fl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,A=l,u=A.tag;if(0===(1&A.mode)&&(0===u||11===u||15===u)){var h=A.alternate;h?(A.updateQueue=h.updateQueue,A.memoizedState=h.memoizedState,A.lanes=h.lanes):(A.updateQueue=null,A.memoizedState=null)}var m=fo(o);if(null!==m){m.flags&=-257,go(m,o,l,0,t),1&m.mode&&po(i,d,t),c=d;var p=(t=m).updateQueue;if(null===p){var f=new Set;f.add(c),t.updateQueue=f}else p.add(c);break e}if(0===(1&t)){po(i,d,t),pc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var g=fo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),ma(lo(c,l));break e}}i=c=lo(c,l),4!==Ll&&(Ll=2),null===Ql?Ql=[i]:Ql.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ho(0,c,t));break e;case 1:l=c;var x=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,mo(i,l,t));break e}}i=i.return}while(null!==i)}yc(n)}catch(y){t=y,Fl===n&&null!==n&&(Fl=n=n.return);continue}break}}function mc(){var e=Cl.current;return Cl.current=Ji,null===e?Ji:e}function pc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===kl||0===(268435455&Pl)&&0===(268435455&Ul)||oc(kl,Il)}function fc(e,t){var n=El;El|=2;var r=mc();for(kl===e&&Il===t||(Vl=null,uc(e,t));;)try{gc();break}catch(s){hc(e,s)}if(Ba(),El=n,Cl.current=r,null!==Fl)throw Error(a(261));return kl=null,Il=0,Ll}function gc(){for(;null!==Fl;)bc(Fl)}function xc(){for(;null!==Fl&&!Ye();)bc(Fl)}function bc(e){var t=Nl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?yc(e):Fl=t,Bl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Tl)))return void(Fl=n)}else{if(null!==(n=Wo(n,t)))return n.flags&=32767,void(Fl=n);if(null===e)return Ll=6,void(Fl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fl=t);Fl=t=e}while(null!==t);0===Ll&&(Ll=5)}function vc(e,t,n){var r=bt,s=Sl.transition;try{Sl.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Wl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===kl&&(Fl=kl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,kc(tt,function(){return wc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Sl.transition,Sl.transition=null;var o=bt;bt=1;var l=El;El|=4,Bl.current=null,function(e,t){if(es=zt,hr(e=ur())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(v){n=null;break e}var o=0,l=-1,c=-1,d=0,A=0,u=e,h=null;t:for(;;){for(var m;u!==n||0!==s&&3!==u.nodeType||(l=o+s),u!==i||0!==r&&3!==u.nodeType||(c=o+r),3===u.nodeType&&(o+=u.nodeValue.length),null!==(m=u.firstChild);)h=u,u=m;for(;;){if(u===e)break t;if(h===n&&++d===s&&(l=o),h===i&&++A===r&&(c=o),null!==(m=u.nextSibling))break;h=(u=h).parentNode}u=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},zt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var f=p.memoizedProps,g=p.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?f:to(t.type,f),g);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(a(163))}}catch(v){jc(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}p=tl,tl=!1}(e,n),fl(n,e),mr(ts),zt=!!es,ts=es=null,e.current=n,xl(n,e,s),Xe(),El=l,bt=o,Sl.transition=i}else e.current=n;if(Gl&&(Gl=!1,Wl=e,Yl=s),i=e.pendingLanes,0===i&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zl)throw zl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Ms()}(e,t,n,r)}finally{Sl.transition=s,bt=r}return null}function wc(){if(null!==Wl){var e=yt(Yl),t=Sl.transition,n=bt;try{if(Sl.transition=null,bt=16>e?16:e,null===Wl)var r=!1;else{if(e=Wl,Wl=null,Yl=0,0!==(6&El))throw Error(a(331));var s=El;for(El|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var A=Zo;switch(A.tag){case 0:case 11:case 15:nl(8,A,i)}var u=A.child;if(null!==u)u.return=A,Zo=u;else for(;null!==Zo;){var h=(A=Zo).sibling,m=A.return;if(al(A),A===d){Zo=null;break}if(null!==h){h.return=m,Zo=h;break}Zo=m}}}var p=i.alternate;if(null!==p){var f=p.child;if(null!==f){p.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var x=i.sibling;if(null!==x){x.return=i.return,Zo=x;break e}Zo=i.return}}var b=e.current;for(Zo=b;null!==Zo;){var y=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Zo=y;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){jc(l,l.return,w)}if(l===o){Zo=null;break e}var v=l.sibling;if(null!==v){v.return=l.return,Zo=v;break e}Zo=l.return}}if(El=s,Ms(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(w){}r=!0}return r}finally{bt=n,Sl.transition=t}}return!1}function Nc(e,t,n){e=Qa(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Qa(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Il&n)===n&&(4===Ll||3===Ll&&(130023424&Il)===Il&&500>Je()-Hl?uc(e,0):Ol|=n),rc(e,t)}function Bc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=La(e,t))&&(gt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Bc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Bc(e,n)}function kc(e,t){return Ge(e,t)}function Fc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Fc(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,s,i){var o=2;if(r=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return _c(n.children,s,i,t);case j:o=8,s|=8;break;case C:return(e=Ic(12,n,t,2|s)).elementType=C,e.lanes=i,e;case k:return(e=Ic(13,n,t,s)).elementType=k,e.lanes=i,e;case F:return(e=Ic(19,n,t,s)).elementType=F,e.lanes=i,e;case D:return Pc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case B:o=10;break e;case S:o=9;break e;case E:o=11;break e;case I:o=14;break e;case T:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ic(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function _c(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Pc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Oc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Rc(e,t,n,r,s,a,i,o,l){return e=new Qc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ic(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Hc(e){if(!e)return Ss;e:{if(Me(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ts(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ts(n))return _s(e,n,t)}return t}function Mc(e,t,n,r,s,a,i,o,l){return(e=Rc(n,r,!0,e,0,a,0,o,l)).context=Hc(null),n=e.current,(a=Oa(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Qa(n,a,s),e.current.lanes=s,gt(e,s,r),rc(e,r),e}function Vc(e,t,n,r){var s=t.current,a=ec(),i=tc(s);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Qa(s,t,i))&&(nc(e,s,i,a),Ra(e,s,i)),i}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ks.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:ko(t),ha();break;case 5:Ja(t);break;case 1:Ts(t.type)&&Ps(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Bs(wa,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Bs($a,1&$a.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Bs($a,1&$a.current),null!==(e=zo(e,t,n))?e.sibling:null);Bs($a,1&$a.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Mo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Bs($a,$a.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return zo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,sa&&0!==(1048576&t.flags)&&$s(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var s=Is(t,Es.current);ka(t,n),s=pi(null,t,r,e,s,n);var i=fi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ts(r)?(i=!0,Ps(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Pa(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Eo(null,t,r,!0,i,n)):(t.tag=0,sa&&i&&ea(t),yo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===I)return 14}return 2}(r),e=to(r,e),s){case 0:t=Bo(null,t,r,e,n);break e;case 1:t=So(null,t,r,e,n);break e;case 11:t=vo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Bo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,So(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(ko(t),null===e)throw Error(a(387));r=t.pendingProps,s=(i=t.memoizedState).element,Ua(e,t),Ma(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fo(e,t,r,n,s=lo(Error(a(423)),t));break e}if(r!==s){t=Fo(e,t,r,n,s=lo(Error(a(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,sa=!0,aa=null,n=va(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===s){t=zo(e,t,n);break e}yo(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==i&&ns(r,i)&&(t.flags|=32),Co(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uo(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ya(t,null,r,n):yo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,vo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Bs(wa,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===s.children&&!ks.current){t=zo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Oa(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var A=(d=d.shared).pending;null===A?c.next=c:(c.next=A.next,A.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ea(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ea(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ka(t,n),r=r(s=Fa(s)),t.flags|=1,yo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),wo(e,t,r,s=to(r.type,s),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Vo(e,t),t.tag=1,Ts(r)?(e=!0,Ps(t)):e=!1,ka(t,n),ao(t,r,s),oo(t,r,s,n),Eo(null,t,r,!0,e,n);case 19:return Mo(e,t,n);case 22:return jo(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Wc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=zc(i);o.call(e)}}Vc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var a=r;r=function(){var e=zc(i);a.call(e)}}var i=Mc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[ms]=i.current,Mr(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=zc(l);o.call(e)}}var l=Rc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ms]=l.current,Mr(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,n,r)}),l}(n,t,e,s,r);return zc(i)}Yc.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Yc.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[ms]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ut(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Je()),0===(6&El)&&(Ml=Je()+500,Ms()))}break;case 13:dc(function(){var t=La(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},wt=function(e){if(13===e.tag){var t=La(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=La(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},jt=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vs(r);if(!s)throw Error(a(90));G(r),Z(r,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,ke=dc;var ed={usingClientEntryPoint:!1,Events:[bs,ys,vs,Be,Se,cc]},td={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),at=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Rc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,Mr(8===e.nodeType?e.parentNode:e),new Wc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Mc(t,null,e,1,null!=n?n:null,s,0,i,o),e[ms]=t.current,Mr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2897:(e,t,n)=>{var r=n(3693);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,f={};function g(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||m}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=g.prototype;var y=b.prototype=new x;y.constructor=b,p(y,g.prototype),y.isPureReactComponent=!0;var v=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,s)&&!j.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:N.current}}function B(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,v(i)?(s="",null!=e&&(s=e.replace(S,"$&/")+"/"),k(i,t,s,"",function(e){return e})):null!=i&&(B(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",v(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=k(o,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=k(o=o.value,t,s,d=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function F(e,t,n){if(null==e)return e;var r=[],s=0;return k(e,r,"","",function(e){return t.call(n,e,s++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},D={transition:null},L={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function _(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:F,forEach:function(e,t,n){F(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return F(e,function(){t++}),t},toArray:function(e){return F(e,function(e){return e})||[]},only:function(e){if(!B(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=_,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!j.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=B,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:A,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=_,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(816);function s(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4788:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,o)}l((r=r.apply(e,t||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(5457));function i(e){let t,n,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"maxAge";const o=()=>r(this,void 0,void 0,function*(){if(void 0!==t)return;const o=o=>r(this,void 0,void 0,function*(){s=a.default();const r=o[1][i]-Date.now();return r<=0?(e.delete(o[0]),void s.resolve()):(t=o[0],n=setTimeout(()=>{e.delete(o[0]),s&&s.resolve()},r),"function"===typeof n.unref&&n.unref(),s.promise)});try{for(const t of e)yield o(t)}catch(l){}t=void 0}),l=e.set.bind(e);return e.set=(r,a)=>{e.has(r)&&e.delete(r);const i=l(r,a);return t&&t===r&&(t=void 0,void 0!==n&&(clearTimeout(n),n=void 0),void 0!==s&&(s.reject(void 0),s=void 0)),o(),i},o(),e}t.default=i,e.exports=i,e.exports.default=i},4926:(e,t,n)=>{!function(){"use strict";"object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g;function r(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}function s(e){return"number"==typeof e&&Math.abs(e)<=9007199254740991}var a=/(hundred|thousand|(m|b|tr|quadr)illion)$/,i=/teen$/,o=/y$/,l=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,c={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function d(e){return a.test(e)||i.test(e)?e+"th":o.test(e)?e.replace(o,"ieth"):l.test(e)?e.replace(l,A):e}function A(e,t){return c[t]}var u=1e3,h=1e6,m=1e9,p=1e12,f=1e15,g=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],x=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function b(e,t){var n,a=parseInt(e,10);if(!r(a))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!s(a))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");return n=function e(t){var n,r,s=arguments[1];return 0===t?s?s.join(" ").replace(/,$/,""):"zero":(s||(s=[]),t<0&&(s.push("minus"),t=Math.abs(t)),t<20?(n=0,r=g[t]):t<100?(n=t%10,r=x[Math.floor(t/10)],n&&(r+="-"+g[n],n=0)):t<u?(n=t%100,r=e(Math.floor(t/100))+" hundred"):t<h?(n=t%u,r=e(Math.floor(t/u))+" thousand,"):t<m?(n=t%h,r=e(Math.floor(t/h))+" million,"):t<p?(n=t%m,r=e(Math.floor(t/m))+" billion,"):t<f?(n=t%p,r=e(Math.floor(t/p))+" trillion,"):t<=9007199254740992&&(n=t%f,r=e(Math.floor(t/f))+" quadrillion,"),s.push(r),e(n,s))}(a),t?d(n):n}var y={toOrdinal:function(e){var t=parseInt(e,10);if(!r(t))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!s(t))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");var n=String(t),a=Math.abs(t%100),i=11<=a&&a<=13,o=n.charAt(n.length-1);return n+(i?"th":"1"===o?"st":"2"===o?"nd":"3"===o?"rd":"th")},toWords:b,toWordsOrdinal:function(e){return d(b(e))}};e.exports&&(t=e.exports=y),t.numberToWords=y}()},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,A=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,x=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,y=n?Symbol.for("react.scope"):60119;function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case A:case a:case o:case i:case h:return e;default:switch(e=e&&e.$$typeof){case c:case u:case f:case p:case l:return e;default:return t}}case s:return t}}}function w(e){return v(e)===A}t.AsyncMode=d,t.ConcurrentMode=A,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=u,t.Fragment=a,t.Lazy=f,t.Memo=p,t.Portal=s,t.Profiler=o,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||v(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===u},t.isFragment=function(e){return v(e)===a},t.isLazy=function(e){return v(e)===f},t.isMemo=function(e){return v(e)===p},t.isPortal=function(e){return v(e)===s},t.isProfiler=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===i},t.isSuspense=function(e){return v(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===A||e===o||e===i||e===h||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===u||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y||e.$$typeof===g)},t.typeOf=v},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},5239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function r(e,t,n,r){function s(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,a){function i(e){try{l(r.next(e))}catch(Ut){a(Ut)}}function o(e){try{l(r.throw(e))}catch(Ut){a(Ut)}}function l(e){e.done?n(e.value):s(e.value).then(i,o)}l((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return l([e,t])}}function l(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(Ut){a=[6,Ut],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function a(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||t)}for(var i=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return i.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new i(0,0,r,s)},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),n--)}else t.push(s)}return t},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<A.length;h++)u[A.charCodeAt(h)]=h;for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"===typeof Uint8Array?[]:new Uint8Array(256),f=0;f<m.length;f++)p[m.charCodeAt(f)]=f;for(var g=function(e){var t,n,r,s,a,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),d=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],s=p[e.charCodeAt(t+2)],a=p[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|s>>2,d[l++]=(3&s)<<6|63&a;return c},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},b=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},y=5,v=11,w=2,N=65536>>y,j=(1<<y)-1,C=N+(1024>>y)+32,B=65536>>v,S=(1<<v-y)-1,E=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},k=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},F=function(e,t){var n=g(e),r=Array.isArray(n)?b(n):new Uint32Array(n),s=Array.isArray(n)?x(n):new Uint16Array(n),a=24,i=E(s,a/2,r[4]/2),o=2===r[5]?E(s,(a+r[4])/2):k(r,Math.ceil((a+r[4])/4));return new I(r[0],r[1],r[2],r[3],i,o)},I=function(){function e(e,t,n,r,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>y])<<w)+(e&j),this.data[t];if(e<=65535)return t=((t=this.index[N+(e-55296>>y)])<<w)+(e&j),this.data[t];if(e<this.highStart)return t=C-B+(e>>v),t=this.index[t],t+=e>>y&S,t=((t=this.index[t])<<w)+(e&j),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="undefined"===typeof Uint8Array?[]:new Uint8Array(256),L=0;L<T.length;L++)D[T.charCodeAt(L)]=L;var _=50,P=1,U=2,O=3,Q=4,R=5,H=7,M=8,V=9,z=10,K=11,q=12,G=13,W=14,Y=15,X=16,J=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,se=24,ae=25,ie=26,oe=27,le=28,ce=29,de=30,Ae=31,ue=32,he=33,me=34,pe=35,fe=36,ge=37,xe=38,be=39,ye=40,ve=41,we=42,Ne=43,je=[9001,65288],Ce="!",Be="\xd7",Se="\xf7",Ee=F("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),ke=[de,fe],Fe=[P,U,O,R],Ie=[z,M],Te=[oe,ie],De=Fe.concat(Ie),Le=[xe,be,ye,me,pe],_e=[Y,G],Pe=function(e,t){void 0===t&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(e,a){var i=Ee.get(e);if(i>_?(s.push(!0),i-=_):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(a),n.push(X);if(i===Q||i===K){if(0===a)return r.push(a),n.push(de);var o=n[a-1];return-1===De.indexOf(o)?(r.push(r[a-1]),n.push(o)):(r.push(a),n.push(de))}return r.push(a),i===Ae?n.push("strict"===t?te:ge):i===we||i===ce?n.push(de):i===Ne?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(de):void n.push(i)}),[r,n,s]},Ue=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var a=n;a<=r.length;){if((l=r[++a])===t)return!0;if(l!==z)break}if(s===z)for(a=n;a>0;){var i=r[--a];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==z)break}if(i!==z)break}return!1},Oe=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==z)return r;n--}return 0},Qe=function(e,t,n,r,s){if(0===n[r])return Be;var a=r-1;if(Array.isArray(s)&&!0===s[a])return Be;var i=a-1,o=a+1,l=t[a],c=i>=0?t[i]:0,d=t[o];if(l===U&&d===O)return Be;if(-1!==Fe.indexOf(l))return Ce;if(-1!==Fe.indexOf(d))return Be;if(-1!==Ie.indexOf(d))return Be;if(Oe(a,t)===M)return Se;if(Ee.get(e[a])===K)return Be;if((l===ue||l===he)&&Ee.get(e[o])===K)return Be;if(l===H||d===H)return Be;if(l===V)return Be;if(-1===[z,G,Y].indexOf(l)&&d===V)return Be;if(-1!==[J,Z,$,se,le].indexOf(d))return Be;if(Oe(a,t)===ne)return Be;if(Ue(re,ne,a,t))return Be;if(Ue([J,Z],te,a,t))return Be;if(Ue(q,q,a,t))return Be;if(l===z)return Se;if(l===re||d===re)return Be;if(d===X||l===X)return Se;if(-1!==[G,Y,te].indexOf(d)||l===W)return Be;if(c===fe&&-1!==_e.indexOf(l))return Be;if(l===le&&d===fe)return Be;if(d===ee)return Be;if(-1!==ke.indexOf(d)&&l===ae||-1!==ke.indexOf(l)&&d===ae)return Be;if(l===oe&&-1!==[ge,ue,he].indexOf(d)||-1!==[ge,ue,he].indexOf(l)&&d===ie)return Be;if(-1!==ke.indexOf(l)&&-1!==Te.indexOf(d)||-1!==Te.indexOf(l)&&-1!==ke.indexOf(d))return Be;if(-1!==[oe,ie].indexOf(l)&&(d===ae||-1!==[ne,Y].indexOf(d)&&t[o+1]===ae)||-1!==[ne,Y].indexOf(l)&&d===ae||l===ae&&-1!==[ae,le,se].indexOf(d))return Be;if(-1!==[ae,le,se,J,Z].indexOf(d))for(var A=a;A>=0;){if((u=t[A])===ae)return Be;if(-1===[le,se].indexOf(u))break;A--}if(-1!==[oe,ie].indexOf(d))for(A=-1!==[J,Z].indexOf(l)?i:a;A>=0;){var u;if((u=t[A])===ae)return Be;if(-1===[le,se].indexOf(u))break;A--}if(xe===l&&-1!==[xe,be,me,pe].indexOf(d)||-1!==[be,me].indexOf(l)&&-1!==[be,ye].indexOf(d)||-1!==[ye,pe].indexOf(l)&&d===ye)return Be;if(-1!==Le.indexOf(l)&&-1!==[ee,ie].indexOf(d)||-1!==Le.indexOf(d)&&l===oe)return Be;if(-1!==ke.indexOf(l)&&-1!==ke.indexOf(d))return Be;if(l===se&&-1!==ke.indexOf(d))return Be;if(-1!==ke.concat(ae).indexOf(l)&&d===ne&&-1===je.indexOf(e[o])||-1!==ke.concat(ae).indexOf(d)&&l===Z)return Be;if(l===ve&&d===ve){for(var h=n[a],m=1;h>0&&t[--h]===ve;)m++;if(m%2!==0)return Be}return l===ue&&d===he?Be:Se},Re=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Pe(e,t.lineBreak),r=n[0],s=n[1],a=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map(function(e){return-1!==[ae,de,we].indexOf(e)?ge:e}));var i="keep-all"===t.wordBreak?a.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,s,i]},He=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=r}return e.prototype.slice=function(){return d.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Me=function(e,t){var n=c(e),r=Re(n,t),s=r[0],a=r[1],i=r[2],o=n.length,l=0,d=0;return{next:function(){if(d>=o)return{done:!0,value:null};for(var e=Be;d<o&&(e=Qe(n,a,s,++d,i))===Be;);if(e!==Be||d===o){var t=new He(n,e,l,d);return l=d,{value:t,done:!1}}return{done:!0,value:null}}}},Ve=1,ze=2,Ke=4,qe=8,Ge=10,We=47,Ye=92,Xe=9,Je=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,st=40,at=41,it=95,ot=45,lt=33,ct=60,dt=62,At=64,ut=91,ht=93,mt=61,pt=123,ft=63,gt=125,xt=124,bt=126,yt=128,vt=65533,wt=42,Nt=43,jt=44,Ct=58,Bt=59,St=46,Et=0,kt=8,Ft=11,It=14,Tt=31,Dt=127,Lt=-1,_t=48,Pt=97,Ut=101,Ot=102,Qt=117,Rt=122,Ht=65,Mt=69,Vt=70,zt=85,Kt=90,qt=function(e){return e>=_t&&e<=57},Gt=function(e){return e>=55296&&e<=57343},Wt=function(e){return qt(e)||e>=Ht&&e<=Vt||e>=Pt&&e<=Ot},Yt=function(e){return e>=Pt&&e<=Rt},Xt=function(e){return e>=Ht&&e<=Kt},Jt=function(e){return Yt(e)||Xt(e)},Zt=function(e){return e>=yt},$t=function(e){return e===Ge||e===Xe||e===Je},en=function(e){return Jt(e)||Zt(e)||e===it},tn=function(e){return en(e)||qt(e)||e===ot},nn=function(e){return e>=Et&&e<=kt||e===Ft||e>=It&&e<=Tt||e===Dt},rn=function(e,t){return e===Ye&&t!==Ge},sn=function(e,t,n){return e===ot?en(t)||rn(t,n):!!en(e)||!(e!==Ye||!rn(e,t))},an=function(e,t,n){return e===Nt||e===ot?!!qt(t)||t===St&&qt(n):qt(e===St?t:e)},on=function(e){var t=0,n=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(n=-1),t++);for(var r=[];qt(e[t]);)r.push(e[t++]);var s=r.length?parseInt(d.apply(void 0,r),10):0;e[t]===St&&t++;for(var a=[];qt(e[t]);)a.push(e[t++]);var i=a.length,o=i?parseInt(d.apply(void 0,a),10):0;e[t]!==Mt&&e[t]!==Ut||t++;var l=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(l=-1),t++);for(var c=[];qt(e[t]);)c.push(e[t++]);var A=c.length?parseInt(d.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,l*A)},ln={type:2},cn={type:3},dn={type:4},An={type:13},un={type:8},hn={type:21},mn={type:9},pn={type:10},fn={type:11},gn={type:12},xn={type:14},bn={type:23},yn={type:1},vn={type:25},wn={type:24},Nn={type:26},jn={type:27},Cn={type:28},Bn={type:29},Sn={type:31},En={type:32},kn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==En;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var s=sn(t,n,r)?ze:Ve;return{type:5,value:this.consumeName(),flags:s}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),An;break;case rt:return this.consumeStringToken(rt);case st:return ln;case at:return cn;case wt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),xn;break;case Nt:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jt:return dn;case ot:var a=e,i=this.peekCodePoint(0),o=this.peekCodePoint(1);if(an(a,i,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sn(a,i,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===ot&&o===dt)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case St:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case We:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===wt&&(l=this.consumeCodePoint())===We)return this.consumeToken();if(l===Lt)return this.consumeToken()}break;case Ct:return Nn;case Bt:return jn;case ct:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===ot&&this.peekCodePoint(2)===ot)return this.consumeCodePoint(),this.consumeCodePoint(),vn;break;case At:var c=this.peekCodePoint(0),A=this.peekCodePoint(1),u=this.peekCodePoint(2);if(sn(c,A,u))return{type:7,value:this.consumeName()};break;case ut:return Cn;case Ye:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return Bn;case mt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),un;break;case pt:return fn;case gt:return gn;case Qt:case zt:var h=this.peekCodePoint(0),m=this.peekCodePoint(1);return h!==Nt||!Wt(m)&&m!==ft||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),mn;if(this.peekCodePoint(0)===xt)return this.consumeCodePoint(),hn;break;case bt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;break;case Lt:return En}return $t(e)?(this.consumeWhiteSpace(),Sn):qt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:d(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Wt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===ft&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(d.apply(void 0,e.map(function(e){return e===ft?_t:e})),16),end:parseInt(d.apply(void 0,e.map(function(e){return e===ft?Vt:e})),16)};var r=parseInt(d.apply(void 0,e),16);if(this.peekCodePoint(0)===ot&&Wt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];Wt(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(d.apply(void 0,s),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===st?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Lt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Lt||this.peekCodePoint(0)===at)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),bn)}for(;;){var r=this.consumeCodePoint();if(r===Lt||r===at)return{type:22,value:d.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Lt||this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:22,value:d.apply(void 0,e)}):(this.consumeBadUrlRemnants(),bn);if(r===Ze||r===rt||r===st||nn(r))return this.consumeBadUrlRemnants(),bn;if(r===Ye){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),bn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===at||e===Lt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=d.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Lt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ge)return this._value.splice(0,n),yn;if(r===Ye){var s=this._value[n+1];s!==Lt&&void 0!==s&&(s===Ge?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,s)&&(t+=this.consumeStringSlice(n),t+=d(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ke,n=this.peekCodePoint(0);for(n!==Nt&&n!==ot||e.push(this.consumeCodePoint());qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===St&&qt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=qe;qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Mt||n===Ut)&&((r===Nt||r===ot)&&qt(s)||qt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=qe;qt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[on(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);return sn(r,s,a)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Wt(e)){for(var t=d(e);Wt(this.peekCodePoint(0))&&t.length<6;)t+=d(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Gt(n)||n>1114111?vt:n}return e===Lt?vt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=d(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=d(this.consumeEscapedCodePoint())}}},e}(),Fn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new kn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Qn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?En:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),In=function(e){return 15===e.type},Tn=function(e){return 17===e.type},Dn=function(e){return 20===e.type},Ln=function(e){return 0===e.type},_n=function(e,t){return Dn(e)&&e.value===t},Pn=function(e){return 31!==e.type},Un=function(e){return 31!==e.type&&4!==e.type},On=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},Qn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Rn=function(e){return 17===e.type||15===e.type},Hn=function(e){return 16===e.type||Rn(e)},Mn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Vn={type:17,number:0,flags:Ke},zn={type:16,number:50,flags:Ke},Kn={type:16,number:100,flags:Ke},qn=function(e,t,n){var r=e[0],s=e[1];return[Gn(r,t),Gn("undefined"!==typeof s?s:r,n)]},Gn=function(e,t){if(16===e.type)return e.number/100*t;if(In(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},Wn="deg",Yn="grad",Xn="rad",Jn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case Wn:return Math.PI*t.number/180;case Yn:return Math.PI/200*t.number;case Xn:return t.number;case Jn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===Wn||e.unit===Yn||e.unit===Xn||e.unit===Jn)},er=function(e){switch(e.filter(Dn).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Vn,Vn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Vn,Kn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kn,Kn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kn,Vn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=dr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3);return ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(4===t.value.length){r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3);var i=t.value.substring(3,4);return ar(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6),ar(parseInt(r,16),parseInt(s,16),parseInt(a,16),1);if(8===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6),i=t.value.substring(6,8),ar(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}if(20===t.type){var o=ur[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return ur.TRANSPARENT}},rr=function(e){return 0===(255&e)},sr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},ar=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ir=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},or=function(e,t){var n=t.filter(Un);if(3===n.length){var r=n.map(ir),s=r[0],a=r[1],i=r[2];return ar(s,a,i,1)}if(4===n.length){var o=n.map(ir),l=(s=o[0],a=o[1],i=o[2],o[3]);return ar(s,a,i,l)}return 0};function lr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var cr=function(e,t){var n=t.filter(Un),r=n[0],s=n[1],a=n[2],i=n[3],o=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),l=Hn(s)?s.number/100:0,c=Hn(a)?a.number/100:0,d="undefined"!==typeof i&&Hn(i)?Gn(i,1):1;if(0===l)return ar(255*c,255*c,255*c,1);var A=c<=.5?c*(l+1):c+l-c*l,u=2*c-A,h=lr(u,A,o+1/3),m=lr(u,A,o),p=lr(u,A,o-1/3);return ar(255*h,255*m,255*p,d)},dr={hsl:cr,hsla:cr,rgb:or,rgba:or},Ar=function(e,t){return nr.parse(e,Fn.create(t).parseComponentValue())},ur={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Dn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},mr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Hn(r)?{color:n,stop:r}:{color:n,stop:null}},fr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Vn),null===r.stop&&(r.stop=Kn);for(var s=[],a=0,i=0;i<e.length;i++){var o=e[i].stop;if(null!==o){var l=Gn(o,t);l>a?s.push(l):s.push(a),a=l}else s.push(null)}var c=null;for(i=0;i<s.length;i++){var d=s[i];if(null===d)null===c&&(c=i);else if(null!==c){for(var A=i-c,u=(d-s[c-1])/(A+1),h=1;h<=A;h++)s[c+h-1]=u*h;c=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}})},gr=function(e,t,n){var r=t/2,s=n/2,a=Gn(e[0],t)-r,i=s-Gn(e[1],n);return(Math.atan2(i,a)+2*Math.PI)%(2*Math.PI)},xr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),a=t/2,i=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,a-c,a+c,i-l,i+l]},br=function(e,t){return Math.sqrt(e*e+t*t)},yr=function(e,t,n,r,s){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var a=t[0],i=t[1],o=br(n-a,r-i);return(s?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},vr=function(e,t,n,r,s){var a=0,i=0;switch(e.size){case 0:0===e.shape?a=i=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(a=Math.min(Math.abs(t),Math.abs(t-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)a=i=Math.min(br(t,n),br(t,n-s),br(t-r,n),br(t-r,n-s));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),l=yr(r,s,t,n,!0),c=l[0],d=l[1];i=o*(a=br(c-t,(d-n)/o))}break;case 1:0===e.shape?a=i=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(a=Math.max(Math.abs(t),Math.abs(t-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)a=i=Math.max(br(t,n),br(t,n-s),br(t-r,n),br(t-r,n-s));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r));var A=yr(r,s,t,n,!1);c=A[0],d=A[1],i=o*(a=br(c-t,(d-n)/o))}}return Array.isArray(e.size)&&(a=Gn(e.size[0],r),i=2===e.size.length?Gn(e.size[1],s):a),[a,i]},wr=function(e,t){var n=tr(180),r=[];return On(t).forEach(function(t,s){if(0===s){var a=t[0];if(20===a.type&&-1!==["top","left","right","bottom"].indexOf(a.value))return void(n=er(t));if($n(a))return void(n=(Zn.parse(e,a)+tr(270))%tr(360))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},Nr="closest-side",jr="farthest-side",Cr="closest-corner",Br="farthest-corner",Sr="circle",Er="ellipse",kr="cover",Fr="contain",Ir=function(e,t){var n=0,r=3,s=[],a=[];return On(t).forEach(function(t,i){var o=!0;if(0===i?o=t.reduce(function(e,t){if(Dn(t))switch(t.value){case"center":return a.push(zn),!1;case"top":case"left":return a.push(Vn),!1;case"right":case"bottom":return a.push(Kn),!1}else if(Hn(t)||Rn(t))return a.push(t),!1;return e},o):1===i&&(o=t.reduce(function(e,t){if(Dn(t))switch(t.value){case Sr:return n=0,!1;case Er:return n=1,!1;case Fr:case Nr:return r=0,!1;case jr:return r=1,!1;case Cr:return r=2,!1;case kr:case Br:return r=3,!1}else if(Rn(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)),o){var l=pr(e,t);s.push(l)}}),{size:r,shape:n,stops:s,position:a,type:2}},Tr=function(e){return 1===e.type},Dr=function(e){return 2===e.type},Lr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Ur[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function _r(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Ur[e.name])}var Pr,Ur={"linear-gradient":function(e,t){var n=tr(180),r=[];return On(t).forEach(function(t,s){if(0===s){var a=t[0];if(20===a.type&&"to"===a.value)return void(n=er(t));if($n(a))return void(n=Zn.parse(e,a))}var i=pr(e,t);r.push(i)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,s=[],a=[];return On(t).forEach(function(t,i){var o=!0;if(0===i){var l=!1;o=t.reduce(function(e,t){if(l)if(Dn(t))switch(t.value){case"center":return a.push(zn),e;case"top":case"left":return a.push(Vn),e;case"right":case"bottom":return a.push(Kn),e}else(Hn(t)||Rn(t))&&a.push(t);else if(Dn(t))switch(t.value){case Sr:return n=0,!1;case Er:return n=1,!1;case"at":return l=!0,!1;case Nr:return r=0,!1;case kr:case jr:return r=1,!1;case Fr:case Cr:return r=2,!1;case Br:return r=3,!1}else if(Rn(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)}if(o){var c=pr(e,t);s.push(c)}}),{size:r,shape:n,stops:s,position:a,type:2}},"-moz-radial-gradient":Ir,"-ms-radial-gradient":Ir,"-o-radial-gradient":Ir,"-webkit-radial-gradient":Ir,"-webkit-gradient":function(e,t){var n=tr(180),r=[],s=1,a=0,i=3,o=[];return On(t).forEach(function(t,n){var a=t[0];if(0===n){if(Dn(a)&&"linear"===a.value)return void(s=1);if(Dn(a)&&"radial"===a.value)return void(s=2)}if(18===a.type)if("from"===a.name){var i=nr.parse(e,a.values[0]);r.push({stop:Vn,color:i})}else if("to"===a.name)i=nr.parse(e,a.values[0]),r.push({stop:Kn,color:i});else if("color-stop"===a.name){var o=a.values.filter(Un);if(2===o.length){i=nr.parse(e,o[1]);var l=o[0];Tn(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:i})}}}),1===s?{angle:(n+tr(180))%tr(360),stops:r,type:s}:{size:i,shape:a,stops:r,position:o,type:s}}},Or={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return Un(e)&&_r(e)}).map(function(t){return Lr.parse(e,t)})}},Qr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Dn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Rr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return On(t).map(function(e){return e.filter(Hn)}).map(Mn)}},Hr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return On(t).map(function(e){return e.filter(Dn).map(function(e){return e.value}).join(" ")}).map(Mr)}},Mr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Pr||(Pr={}));var Vr,zr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return On(t).map(function(e){return e.filter(Kr)})}},Kr=function(e){return Dn(e)||Hn(e)},qr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Gr=qr("top"),Wr=qr("right"),Yr=qr("bottom"),Xr=qr("left"),Jr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Mn(t.filter(Hn))}}},Zr=Jr("top-left"),$r=Jr("top-right"),es=Jr("bottom-right"),ts=Jr("bottom-left"),ns=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rs=ns("top"),ss=ns("right"),as=ns("bottom"),is=ns("left"),os=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:0}}},ls=os("top"),cs=os("right"),ds=os("bottom"),As=os("left"),us={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},ms={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Dn).reduce(function(e,t){return e|ps(t.value)},0)}},ps=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},fs={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},gs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Vr||(Vr={}));var xs,bs={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Vr.STRICT:Vr.NORMAL}},ys={name:"line-height",initialValue:"normal",prefix:!1,type:4},vs=function(e,t){return Dn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Hn(e)?Gn(e,t):t},ws={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Lr.parse(e,t)}},Ns={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},js={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Cs=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Bs=Cs("top"),Ss=Cs("right"),Es=Cs("bottom"),ks=Cs("left"),Fs={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Dn).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Is={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Ts=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ds=Ts("top"),Ls=Ts("right"),_s=Ts("bottom"),Ps=Ts("left"),Us={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Os={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Qs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:On(t).map(function(t){for(var n={color:ur.TRANSPARENT,offsetX:Vn,offsetY:Vn,blur:Vn},r=0,s=0;s<t.length;s++){var a=t[s];Rn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:n.blur=a,r++):n.color=nr.parse(e,a)}return n})}},Rs={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Hs={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Ms[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Ms={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,s,a,i,o]:null}},Vs={type:16,number:50,flags:Ke},zs=[Vs,Vs],Ks={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Hn);return 2!==n.length?zs:[n[0],n[1]]}},qs={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(xs||(xs={}));for(var Gs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xs.BREAK_ALL;case"keep-all":return xs.KEEP_ALL;default:return xs.NORMAL}}},Ws={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Tn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Ys={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Xs={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:1}},Js={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Zs={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Dn).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$s={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},ea={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ta={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:Dn(t)&&"bold"===t.value?700:400}},na={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Dn).map(function(e){return e.value})}},ra={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},sa=function(e,t){return 0!==(e&t)},aa={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},ia={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=t.filter(Pn),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(20===i.type){var l=o&&Tn(o)?o.number:1;r.push({counter:i.value,increment:l})}}return r}},oa={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Pn),s=0;s<r.length;s++){var a=r[s],i=r[s+1];if(Dn(a)&&"none"!==a.value){var o=i&&Tn(i)?i.number:0;n.push({counter:a.value,reset:o})}}return n}},la={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(In).map(function(t){return Ys.parse(e,t)})}},ca={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=t.filter(Ln);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;r.push({open:i,close:o})}return r}},da=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},Aa={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&_n(t[0],"none")?[]:On(t).map(function(t){for(var n={color:255,offsetX:Vn,offsetY:Vn,blur:Vn,spread:Vn,inset:!1},r=0,s=0;s<t.length;s++){var a=t[s];_n(a,"inset")?n.inset=!0:Rn(a)?(0===r?n.offsetX=a:1===r?n.offsetY=a:2===r?n.blur=a:n.spread=a,r++):n.color=nr.parse(e,a)}return n})}},ua={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Dn).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},ha={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},ma={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return In(t)?t.number:0}},pa=function(){function e(e,t){var n,r;this.animationDuration=xa(e,la,t.animationDuration),this.backgroundClip=xa(e,hr,t.backgroundClip),this.backgroundColor=xa(e,mr,t.backgroundColor),this.backgroundImage=xa(e,Or,t.backgroundImage),this.backgroundOrigin=xa(e,Qr,t.backgroundOrigin),this.backgroundPosition=xa(e,Rr,t.backgroundPosition),this.backgroundRepeat=xa(e,Hr,t.backgroundRepeat),this.backgroundSize=xa(e,zr,t.backgroundSize),this.borderTopColor=xa(e,Gr,t.borderTopColor),this.borderRightColor=xa(e,Wr,t.borderRightColor),this.borderBottomColor=xa(e,Yr,t.borderBottomColor),this.borderLeftColor=xa(e,Xr,t.borderLeftColor),this.borderTopLeftRadius=xa(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=xa(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=xa(e,es,t.borderBottomRightRadius),this.borderBottomLeftRadius=xa(e,ts,t.borderBottomLeftRadius),this.borderTopStyle=xa(e,rs,t.borderTopStyle),this.borderRightStyle=xa(e,ss,t.borderRightStyle),this.borderBottomStyle=xa(e,as,t.borderBottomStyle),this.borderLeftStyle=xa(e,is,t.borderLeftStyle),this.borderTopWidth=xa(e,ls,t.borderTopWidth),this.borderRightWidth=xa(e,cs,t.borderRightWidth),this.borderBottomWidth=xa(e,ds,t.borderBottomWidth),this.borderLeftWidth=xa(e,As,t.borderLeftWidth),this.boxShadow=xa(e,Aa,t.boxShadow),this.color=xa(e,us,t.color),this.direction=xa(e,hs,t.direction),this.display=xa(e,ms,t.display),this.float=xa(e,fs,t.cssFloat),this.fontFamily=xa(e,$s,t.fontFamily),this.fontSize=xa(e,ea,t.fontSize),this.fontStyle=xa(e,ra,t.fontStyle),this.fontVariant=xa(e,na,t.fontVariant),this.fontWeight=xa(e,ta,t.fontWeight),this.letterSpacing=xa(e,gs,t.letterSpacing),this.lineBreak=xa(e,bs,t.lineBreak),this.lineHeight=xa(e,ys,t.lineHeight),this.listStyleImage=xa(e,ws,t.listStyleImage),this.listStylePosition=xa(e,Ns,t.listStylePosition),this.listStyleType=xa(e,js,t.listStyleType),this.marginTop=xa(e,Bs,t.marginTop),this.marginRight=xa(e,Ss,t.marginRight),this.marginBottom=xa(e,Es,t.marginBottom),this.marginLeft=xa(e,ks,t.marginLeft),this.opacity=xa(e,Xs,t.opacity);var s=xa(e,Fs,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=xa(e,Is,t.overflowWrap),this.paddingTop=xa(e,Ds,t.paddingTop),this.paddingRight=xa(e,Ls,t.paddingRight),this.paddingBottom=xa(e,_s,t.paddingBottom),this.paddingLeft=xa(e,Ps,t.paddingLeft),this.paintOrder=xa(e,ua,t.paintOrder),this.position=xa(e,Os,t.position),this.textAlign=xa(e,Us,t.textAlign),this.textDecorationColor=xa(e,Js,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=xa(e,Zs,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=xa(e,Qs,t.textShadow),this.textTransform=xa(e,Rs,t.textTransform),this.transform=xa(e,Hs,t.transform),this.transformOrigin=xa(e,Ks,t.transformOrigin),this.visibility=xa(e,qs,t.visibility),this.webkitTextStrokeColor=xa(e,ha,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=xa(e,ma,t.webkitTextStrokeWidth),this.wordBreak=xa(e,Gs,t.wordBreak),this.zIndex=xa(e,Ws,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return sa(this.display,4)||sa(this.display,33554432)||sa(this.display,268435456)||sa(this.display,536870912)||sa(this.display,67108864)||sa(this.display,134217728)},e}(),fa=function(){function e(e,t){this.content=xa(e,aa,t.content),this.quotes=xa(e,ca,t.quotes)}return e}(),ga=function(){function e(e,t){this.counterIncrement=xa(e,ia,t.counterIncrement),this.counterReset=xa(e,oa,t.counterReset)}return e}(),xa=function(e,t,n){var r=new kn,s=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(s);var a=new Fn(r.read());switch(t.type){case 2:var i=a.parseComponentValue();return t.parse(e,Dn(i)?i.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,a.parseComponentValue());case"color":return nr.parse(e,a.parseComponentValue());case"image":return Lr.parse(e,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Rn(o)?o:Vn;case"length-percentage":var l=a.parseComponentValue();return Hn(l)?l:Vn;case"time":return Ys.parse(e,a.parseComponentValue())}}},ba="data-html2canvas-debug",ya=function(e){switch(e.getAttribute(ba)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},va=function(e,t){var n=ya(e);return 1===n||t===n},wa=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,va(t,3),this.styles=new pa(e,window.getComputedStyle(t,null)),co(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),va(t,4)&&(this.flags|=16)}return e}(),Na="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ja="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ca="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ba=0;Ba<ja.length;Ba++)Ca[ja.charCodeAt(Ba)]=Ba;for(var Sa=function(e){var t,n,r,s,a,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),d=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=Ca[e.charCodeAt(t)],r=Ca[e.charCodeAt(t+1)],s=Ca[e.charCodeAt(t+2)],a=Ca[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|s>>2,d[l++]=(3&s)<<6|63&a;return c},Ea=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},ka=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Fa=5,Ia=11,Ta=2,Da=65536>>Fa,La=(1<<Fa)-1,_a=Da+(1024>>Fa)+32,Pa=65536>>Ia,Ua=(1<<Ia-Fa)-1,Oa=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Qa=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Ra=function(e,t){var n=Sa(e),r=Array.isArray(n)?ka(n):new Uint32Array(n),s=Array.isArray(n)?Ea(n):new Uint16Array(n),a=24,i=Oa(s,a/2,r[4]/2),o=2===r[5]?Oa(s,(a+r[4])/2):Qa(r,Math.ceil((a+r[4])/4));return new Ha(r[0],r[1],r[2],r[3],i,o)},Ha=function(){function e(e,t,n,r,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=a}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Fa])<<Ta)+(e&La),this.data[t];if(e<=65535)return t=((t=this.index[Da+(e-55296>>Fa)])<<Ta)+(e&La),this.data[t];if(e<this.highStart)return t=_a-Pa+(e>>Ia),t=this.index[t],t+=e>>Fa&Ua,t=((t=this.index[t])<<Ta)+(e&La),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Va="undefined"===typeof Uint8Array?[]:new Uint8Array(256),za=0;za<Ma.length;za++)Va[Ma.charCodeAt(za)]=za;var Ka,qa=1,Ga=2,Wa=3,Ya=4,Xa=5,Ja=7,Za=8,$a=9,ei=10,ti=11,ni=12,ri=13,si=14,ai=15,ii=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);56320===(64512&a)?t.push(((1023&s)<<10)+(1023&a)+65536):(t.push(s),n--)}else t.push(s)}return t},oi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var i=e[s];i<=65535?r.push(i):(i-=65536,r.push(55296+(i>>10),i%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},li=Ra(Na),ci="\xd7",di="\xf7",Ai=function(e){return li.get(e)},ui=function(e,t,n){var r=n-2,s=t[r],a=t[n-1],i=t[n];if(a===Ga&&i===Wa)return ci;if(a===Ga||a===Wa||a===Ya)return di;if(i===Ga||i===Wa||i===Ya)return di;if(a===Za&&-1!==[Za,$a,ti,ni].indexOf(i))return ci;if((a===ti||a===$a)&&(i===$a||i===ei))return ci;if((a===ni||a===ei)&&i===ei)return ci;if(i===ri||i===Xa)return ci;if(i===Ja)return ci;if(a===qa)return ci;if(a===ri&&i===si){for(;s===Xa;)s=t[--r];if(s===si)return ci}if(a===ai&&i===ai){for(var o=0;s===ai;)o++,s=t[--r];if(o%2===0)return ci}return di},hi=function(e){var t=ii(e),n=t.length,r=0,s=0,a=t.map(Ai);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=ci;r<n&&(e=ui(t,a,++r))===ci;);if(e!==ci||r===n){var i=oi.apply(null,t.slice(s,r));return s=r,{value:i,done:!1}}return{done:!0,value:null}}}},mi=function(e){for(var t,n=hi(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},pi=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(e.body.removeChild(r),a===t)return!0}}return!1},fi=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,s=c(r.data).map(function(e){return d(e)}),a=0,i={},o=s.every(function(e,t){n.setStart(r,a),n.setEnd(r,a+e.length);var s=n.getBoundingClientRect();a+=e.length;var o=s.x>i.x||s.y>i.y;return i=s,0===t||o});return e.body.removeChild(t),o},gi=function(){return"undefined"!==typeof(new Image).crossOrigin},xi=function(){return"string"===typeof(new XMLHttpRequest).responseType},bi=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Ut){return!1}return!0},yi=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},vi=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=t.toDataURL();s.src=a;var i=wi(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),Ni(i).then(function(t){r.drawImage(t,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var i=e.createElement("div");return i.style.backgroundImage="url("+a+")",i.style.height=n+"px",yi(s)?Ni(wi(n,n,0,0,i)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),yi(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},wi=function(e,t,n,r,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},Ni=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},ji={get SUPPORT_RANGE_BOUNDS(){var e=pi(document);return Object.defineProperty(ji,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ji.SUPPORT_RANGE_BOUNDS&&fi(document);return Object.defineProperty(ji,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=bi(document);return Object.defineProperty(ji,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?vi(document):Promise.resolve(!1);return Object.defineProperty(ji,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gi();return Object.defineProperty(ji,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xi();return Object.defineProperty(ji,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ji,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(ji,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ci=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Bi=function(e,t,n,r){var s=Ii(t,n),a=[],o=0;return s.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ji.SUPPORT_RANGE_BOUNDS){var s=Ei(r,o,t.length).getClientRects();if(s.length>1){var l=ki(t),c=0;l.forEach(function(t){a.push(new Ci(t,i.fromDOMRectList(e,Ei(r,c+o,t.length).getClientRects()))),c+=t.length})}else a.push(new Ci(t,i.fromDOMRectList(e,s)))}else{var d=r.splitText(t.length);a.push(new Ci(t,Si(e,r))),r=d}else ji.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length}),a},Si=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var a=o(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return i.EMPTY},Ei=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},ki=function(e){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return mi(e)},Fi=function(e,t){if(ji.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Di(e,t)},Ii=function(e,t){return 0!==t.letterSpacing?ki(e):Fi(e,t)},Ti=[32,160,4961,65792,65793,4153,4241],Di=function(e,t){for(var n,r=Me(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],a=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach(function(e){-1===Ti.indexOf(e)?r+=d(e):(r.length&&s.push(r),s.push(d(e)),r="")}),r.length&&s.push(r)}};!(n=r.next()).done;)a();return s},Li=function(){function e(e,t,n){this.text=_i(t.data,n.textTransform),this.textBounds=Bi(e,this.text,n,t)}return e}(),_i=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Pi,Ui);case 2:return e.toUpperCase();default:return e}},Pi=/(^|\s|:|-|\(|\))([a-z])/g,Ui=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Oi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(wa),Qi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(wa),Ri=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=new XMLSerializer,a=o(t,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(wa),Hi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wa),Mi=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(wa),Vi=[{type:15,flags:0,unit:"px",number:3}],zi=[{type:16,flags:0,number:50}],Ki=function(e){return e.width>e.height?new i(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new i(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},qi=function(e){var t=e.type===Yi?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},Gi="checkbox",Wi="radio",Yi="password",Xi=707406591,Ji=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=qi(n),r.type!==Gi&&r.type!==Wi||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Ki(r.bounds)),r.type){case Gi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Vi;break;case Wi:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=zi}return r}return t(n,e),n}(wa),Zi=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return t(n,e),n}(wa),$i=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wa),eo=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=so(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Ar(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):ur.TRANSPARENT,a=n.contentWindow.document.body?Ar(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):ur.TRANSPARENT;r.backgroundColor=rr(s)?rr(a)?r.styles.backgroundColor:a:s}}catch(Ut){}return r}return t(n,e),n}(wa),to=["OL","UL","MENU"],no=function(e,t,n,r){for(var s=t.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,oo(s)&&s.data.trim().length>0)n.textNodes.push(new Li(e,s,n.styles));else if(lo(s))if(Bo(s)&&s.assignedNodes)s.assignedNodes().forEach(function(t){return no(e,t,n,r)});else{var i=ro(e,s);i.styles.isVisible()&&(ao(s,i,r)?i.flags|=4:io(i.styles)&&(i.flags|=2),-1!==to.indexOf(s.tagName)&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?no(e,s.shadowRoot,i,r):jo(s)||fo(s)||Co(s)||no(e,s,i,r))}},ro=function(e,t){return yo(t)?new Oi(e,t):xo(t)?new Qi(e,t):fo(t)?new Ri(e,t):uo(t)?new Hi(e,t):ho(t)?new Mi(e,t):mo(t)?new Ji(e,t):Co(t)?new Zi(e,t):jo(t)?new $i(e,t):vo(t)?new eo(e,t):new wa(e,t)},so=function(e,t){var n=ro(e,t);return n.flags|=4,no(e,t,n,n),n},ao=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||go(e)&&n.styles.isTransparent()},io=function(e){return e.isPositioned()||e.isFloating()},oo=function(e){return e.nodeType===Node.TEXT_NODE},lo=function(e){return e.nodeType===Node.ELEMENT_NODE},co=function(e){return lo(e)&&"undefined"!==typeof e.style&&!Ao(e)},Ao=function(e){return"object"===typeof e.className},uo=function(e){return"LI"===e.tagName},ho=function(e){return"OL"===e.tagName},mo=function(e){return"INPUT"===e.tagName},po=function(e){return"HTML"===e.tagName},fo=function(e){return"svg"===e.tagName},go=function(e){return"BODY"===e.tagName},xo=function(e){return"CANVAS"===e.tagName},bo=function(e){return"VIDEO"===e.tagName},yo=function(e){return"IMG"===e.tagName},vo=function(e){return"IFRAME"===e.tagName},wo=function(e){return"STYLE"===e.tagName},No=function(e){return"SCRIPT"===e.tagName},jo=function(e){return"TEXTAREA"===e.tagName},Co=function(e){return"SELECT"===e.tagName},Bo=function(e){return"SLOT"===e.tagName},So=function(e){return e.tagName.indexOf("-")>0},Eo=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,s=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var a=[];return s&&r.forEach(function(e){var n=t.counters[e.counter];a.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),a},e}(),ko={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Fo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Io={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},To={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Do=function(e,t,n,r,s,a){return e<t||e>n?qo(e,s,a.length>0):r.integers.reduce(function(t,n,s){for(;e>=n;)e-=n,t+=r.values[s];return t},"")+a},Lo=function(e,t,n,r){var s="";do{n||e--,s=r(e)+s,e/=t}while(e*t>=t);return s},_o=function(e,t,n,r,s){var a=n-t+1;return(e<0?"-":"")+(Lo(Math.abs(e),a,r,function(e){return d(Math.floor(e%a)+t)})+s)},Po=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Lo(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Uo=1,Oo=2,Qo=4,Ro=8,Ho=function(e,t,n,r,s,a){if(e<-9999||e>9999)return qo(e,4,s.length>0);var i=Math.abs(e),o=s;if(0===i)return t[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;0===c&&sa(a,Uo)&&""!==o?o=t[c]+o:c>1||1===c&&0===l||1===c&&1===l&&sa(a,Oo)||1===c&&1===l&&sa(a,Qo)&&e>100||1===c&&l>1&&sa(a,Ro)?o=t[c]+(l>0?n[l-1]:"")+o:1===c&&l>0&&(o=n[l-1]+o),i=Math.floor(i/10)}return(e<0?r:"")+o},Mo="\u5341\u767e\u5343\u842c",Vo="\u62fe\u4f70\u4edf\u842c",zo="\u30de\u30a4\u30ca\u30b9",Ko="\ub9c8\uc774\ub108\uc2a4",qo=function(e,t,n){var r=n?". ":"",s=n?"\u3001":"",a=n?", ":"",i=n?" ":"";switch(t){case 0:return"\u2022"+i;case 1:return"\u25e6"+i;case 2:return"\u25fe"+i;case 5:var o=_o(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Po(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",s);case 6:return Do(e,1,3999,ko,3,r).toLowerCase();case 7:return Do(e,1,3999,ko,3,r);case 8:return _o(e,945,969,!1,r);case 9:return _o(e,97,122,!1,r);case 10:return _o(e,65,90,!1,r);case 11:return _o(e,1632,1641,!0,r);case 12:case 49:return Do(e,1,9999,Fo,3,r);case 35:return Do(e,1,9999,Fo,3,r).toLowerCase();case 13:return _o(e,2534,2543,!0,r);case 14:case 30:return _o(e,6112,6121,!0,r);case 15:return Po(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",s);case 16:return Po(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",s);case 17:case 48:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Mo,"\u8ca0",s,Oo|Qo|Ro);case 47:return Ho(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Vo,"\u8ca0",s,Uo|Oo|Qo|Ro);case 42:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Mo,"\u8d1f",s,Oo|Qo|Ro);case 41:return Ho(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Vo,"\u8d1f",s,Uo|Oo|Qo|Ro);case 26:return Ho(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",zo,s,0);case 25:return Ho(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",zo,s,Uo|Oo|Qo);case 31:return Ho(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Ko,a,Uo|Oo|Qo);case 33:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Ko,a,0);case 32:return Ho(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Ko,a,Uo|Oo|Qo);case 18:return _o(e,2406,2415,!0,r);case 20:return Do(e,1,19999,To,3,r);case 21:return _o(e,2790,2799,!0,r);case 22:return _o(e,2662,2671,!0,r);case 22:return Do(e,1,10999,Io,3,r);case 23:return Po(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Po(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return _o(e,3302,3311,!0,r);case 28:return Po(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",s);case 29:return Po(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",s);case 34:return _o(e,3792,3801,!0,r);case 37:return _o(e,6160,6169,!0,r);case 38:return _o(e,4160,4169,!0,r);case 39:return _o(e,2918,2927,!0,r);case 40:return _o(e,1776,1785,!0,r);case 43:return _o(e,3046,3055,!0,r);case 44:return _o(e,3174,3183,!0,r);case 45:return _o(e,3664,3673,!0,r);case 46:return _o(e,3872,3881,!0,r);default:return _o(e,48,57,!0,r)}},Go="data-html2canvas-ignore",Wo=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Eo,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,a=Xo(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,d=$o(a).then(function(){return r(n,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(sl),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zo(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(c,n)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(nl(document.doctype)+"<html></html>"),rl(this.referenceElement.ownerDocument,i,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),d},e.prototype.createElementClone=function(e){if(va(e,2),xo(e))return this.createCanvasClone(e);if(bo(e))return this.createVideoClone(e);if(wo(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return yo(t)&&(yo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),So(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Ut){if(this.context.logger.error("Unable to access cssRules property",Ut),"SecurityError"!==Ut.name)throw Ut}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Ut){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),a=r.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var o=i.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return r}catch(Ut){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Ut){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){lo(t)&&(No(t)||t.hasAttribute(Go)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&lo(t)&&wo(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(lo(s)&&Bo(s)&&"function"===typeof s.assignedNodes){var a=s.assignedNodes();a.length&&a.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(oo(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lo(e)&&(co(e)||Ao(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),a=n.getComputedStyle(e,":before"),i=n.getComputedStyle(e,":after");this.referenceElement===e&&co(r)&&(this.clonedReferenceElement=r),go(r)&&dl(r);var o=this.counters.parse(new ga(this.context,s)),l=this.resolvePseudoContent(e,r,a,Ka.BEFORE);So(e)&&(t=!0),bo(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,i,Ka.AFTER);return c&&r.appendChild(c),this.counters.pop(o),(s&&(this.options.copyStyles||Ao(e))&&!vo(e)||t)&&tl(s,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(jo(e)||Co(e))&&(jo(r)||Co(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var s=this;if(n){var a=n.content,i=t.ownerDocument;if(i&&a&&"none"!==a&&"-moz-alt-content"!==a&&"none"!==n.display){this.counters.parse(new ga(this.context,n));var o=new fa(this.context,n),l=i.createElement("html2canvaspseudoelement");tl(n,l),o.content.forEach(function(t){if(0===t.type)l.appendChild(i.createTextNode(t.value));else if(22===t.type){var n=i.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Dn);r.length&&l.appendChild(i.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var a=t.values.filter(Un),c=a[0],d=a[1];if(c&&Dn(c)){var A=s.counters.getCounterValue(c.value),u=d&&Dn(d)?js.parse(s.context,d.value):3;l.appendChild(i.createTextNode(qo(A,u,!1)))}}else if("counters"===t.name){var h=t.values.filter(Un),m=(c=h[0],h[1]);if(d=h[2],c&&Dn(c)){var p=s.counters.getCounterValues(c.value),f=d&&Dn(d)?js.parse(s.context,d.value):3,g=m&&0===m.type?m.value:"",x=p.map(function(e){return qo(e,f,!1)}).join(g);l.appendChild(i.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(i.createTextNode(da(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(i.createTextNode(da(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(i.createTextNode(t.value))}}),l.className=ol+" "+ll;var c=r===Ka.BEFORE?" "+ol:" "+ll;return Ao(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Ka||(Ka={}));var Yo,Xo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Go,"true"),e.body.appendChild(n),n},Jo=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Zo=function(e){return Promise.all([].slice.call(e.images,0).map(Jo))},$o=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))},50)}})},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===el.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},sl=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},al=":before",il=":after",ol="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",cl='{\n    content: "" !important;\n    display: none !important;\n}',dl=function(e){Al(e,"."+ol+al+cl+"\n         ."+ll+il+cl)},Al=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},ul=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),hl=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:yl(e)||gl(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i=this;return s(this,function(s){switch(s.label){case 0:return t=ul.isSameOrigin(e),n=!xl(e)&&!0===this._options.useCORS&&ji.SUPPORT_CORS_IMAGES&&!t,r=!xl(e)&&!t&&!yl(e)&&"string"===typeof this._options.proxy&&ji.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||xl(e)||yl(e)||r||n?(a=e,r?[4,this.proxy(a)]:[3,2]):[2];case 1:a=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(bl(a)||n)&&(r.crossOrigin="anonymous"),r.src=a,!0===r.complete&&setTimeout(function(){return e(r)},500),i._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(s,a){var i=ji.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===i)s(o.response);else{var e=new FileReader;e.addEventListener("load",function(){return s(e.result)},!1),e.addEventListener("error",function(e){return a(e)},!1),e.readAsDataURL(o.response)}else a("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=a;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&o instanceof XMLHttpRequest&&(o.responseType=i),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return a("Timed out ("+c+"ms) proxying "+r)}}o.send()})},e}(),ml=/^data:image\/svg\+xml/i,pl=/^data:image\/.*;base64,/i,fl=/^data:image\/.*/i,gl=function(e){return ji.SUPPORT_SVG_DRAWING||!vl(e)},xl=function(e){return fl.test(e)},bl=function(e){return pl.test(e)},yl=function(e){return"blob"===e.substr(0,4)},vl=function(e){return"svg"===e.substr(-3).toLowerCase()||ml.test(e)},wl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Nl=function(e,t,n){return new wl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},jl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Nl(this.start,this.startControl,t),s=Nl(this.startControl,this.endControl,t),a=Nl(this.endControl,this.end,t),i=Nl(r,s,t),o=Nl(s,a,t),l=Nl(i,o,t);return n?new e(this.start,r,i,l):new e(l,o,a,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cl=function(e){return 1===e.type},Bl=function(){function e(e){var t=e.styles,n=e.bounds,r=qn(t.borderTopLeftRadius,n.width,n.height),s=r[0],a=r[1],i=qn(t.borderTopRightRadius,n.width,n.height),o=i[0],l=i[1],c=qn(t.borderBottomRightRadius,n.width,n.height),d=c[0],A=c[1],u=qn(t.borderBottomLeftRadius,n.width,n.height),h=u[0],m=u[1],p=[];p.push((s+o)/n.width),p.push((h+d)/n.width),p.push((a+m)/n.height),p.push((l+A)/n.height);var f=Math.max.apply(Math,p);f>1&&(s/=f,a/=f,o/=f,l/=f,d/=f,A/=f,h/=f,m/=f);var g=n.width-o,x=n.height-A,b=n.width-d,y=n.height-m,v=t.borderTopWidth,w=t.borderRightWidth,N=t.borderBottomWidth,j=t.borderLeftWidth,C=Gn(t.paddingTop,e.bounds.width),B=Gn(t.paddingRight,e.bounds.width),S=Gn(t.paddingBottom,e.bounds.width),E=Gn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Sl(n.left+j/3,n.top+v/3,s-j/3,a-v/3,Yo.TOP_LEFT):new wl(n.left+j/3,n.top+v/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Sl(n.left+g,n.top+v/3,o-w/3,l-v/3,Yo.TOP_RIGHT):new wl(n.left+n.width-w/3,n.top+v/3),this.bottomRightBorderDoubleOuterBox=d>0||A>0?Sl(n.left+b,n.top+x,d-w/3,A-N/3,Yo.BOTTOM_RIGHT):new wl(n.left+n.width-w/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=h>0||m>0?Sl(n.left+j/3,n.top+y,h-j/3,m-N/3,Yo.BOTTOM_LEFT):new wl(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Sl(n.left+2*j/3,n.top+2*v/3,s-2*j/3,a-2*v/3,Yo.TOP_LEFT):new wl(n.left+2*j/3,n.top+2*v/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Sl(n.left+g,n.top+2*v/3,o-2*w/3,l-2*v/3,Yo.TOP_RIGHT):new wl(n.left+n.width-2*w/3,n.top+2*v/3),this.bottomRightBorderDoubleInnerBox=d>0||A>0?Sl(n.left+b,n.top+x,d-2*w/3,A-2*N/3,Yo.BOTTOM_RIGHT):new wl(n.left+n.width-2*w/3,n.top+n.height-2*N/3),this.bottomLeftBorderDoubleInnerBox=h>0||m>0?Sl(n.left+2*j/3,n.top+y,h-2*j/3,m-2*N/3,Yo.BOTTOM_LEFT):new wl(n.left+2*j/3,n.top+n.height-2*N/3),this.topLeftBorderStroke=s>0||a>0?Sl(n.left+j/2,n.top+v/2,s-j/2,a-v/2,Yo.TOP_LEFT):new wl(n.left+j/2,n.top+v/2),this.topRightBorderStroke=s>0||a>0?Sl(n.left+g,n.top+v/2,o-w/2,l-v/2,Yo.TOP_RIGHT):new wl(n.left+n.width-w/2,n.top+v/2),this.bottomRightBorderStroke=d>0||A>0?Sl(n.left+b,n.top+x,d-w/2,A-N/2,Yo.BOTTOM_RIGHT):new wl(n.left+n.width-w/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=h>0||m>0?Sl(n.left+j/2,n.top+y,h-j/2,m-N/2,Yo.BOTTOM_LEFT):new wl(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||a>0?Sl(n.left,n.top,s,a,Yo.TOP_LEFT):new wl(n.left,n.top),this.topRightBorderBox=o>0||l>0?Sl(n.left+g,n.top,o,l,Yo.TOP_RIGHT):new wl(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||A>0?Sl(n.left+b,n.top+x,d,A,Yo.BOTTOM_RIGHT):new wl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||m>0?Sl(n.left,n.top+y,h,m,Yo.BOTTOM_LEFT):new wl(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?Sl(n.left+j,n.top+v,Math.max(0,s-j),Math.max(0,a-v),Yo.TOP_LEFT):new wl(n.left+j,n.top+v),this.topRightPaddingBox=o>0||l>0?Sl(n.left+Math.min(g,n.width-w),n.top+v,g>n.width+w?0:Math.max(0,o-w),Math.max(0,l-v),Yo.TOP_RIGHT):new wl(n.left+n.width-w,n.top+v),this.bottomRightPaddingBox=d>0||A>0?Sl(n.left+Math.min(b,n.width-j),n.top+Math.min(x,n.height-N),Math.max(0,d-w),Math.max(0,A-N),Yo.BOTTOM_RIGHT):new wl(n.left+n.width-w,n.top+n.height-N),this.bottomLeftPaddingBox=h>0||m>0?Sl(n.left+j,n.top+Math.min(y,n.height-N),Math.max(0,h-j),Math.max(0,m-N),Yo.BOTTOM_LEFT):new wl(n.left+j,n.top+n.height-N),this.topLeftContentBox=s>0||a>0?Sl(n.left+j+E,n.top+v+C,Math.max(0,s-(j+E)),Math.max(0,a-(v+C)),Yo.TOP_LEFT):new wl(n.left+j+E,n.top+v+C),this.topRightContentBox=o>0||l>0?Sl(n.left+Math.min(g,n.width+j+E),n.top+v+C,g>n.width+j+E?0:o-j+E,l-(v+C),Yo.TOP_RIGHT):new wl(n.left+n.width-(w+B),n.top+v+C),this.bottomRightContentBox=d>0||A>0?Sl(n.left+Math.min(b,n.width-(j+E)),n.top+Math.min(x,n.height+v+C),Math.max(0,d-(w+B)),A-(N+S),Yo.BOTTOM_RIGHT):new wl(n.left+n.width-(w+B),n.top+n.height-(N+S)),this.bottomLeftContentBox=h>0||m>0?Sl(n.left+j+E,n.top+y,Math.max(0,h-(j+E)),m-(N+S),Yo.BOTTOM_LEFT):new wl(n.left+j+E,n.top+n.height-(N+S))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Yo||(Yo={}));var Sl=function(e,t,n,r,s){var a=(Math.sqrt(2)-1)/3*4,i=n*a,o=r*a,l=e+n,c=t+r;switch(s){case Yo.TOP_LEFT:return new jl(new wl(e,c),new wl(e,c-o),new wl(l-i,t),new wl(l,t));case Yo.TOP_RIGHT:return new jl(new wl(e,t),new wl(e+i,t),new wl(l,c-o),new wl(l,c));case Yo.BOTTOM_RIGHT:return new jl(new wl(l,t),new wl(l,t+o),new wl(e+i,c),new wl(e,c));case Yo.BOTTOM_LEFT:default:return new jl(new wl(l,c),new wl(l-i,c),new wl(e,t+o),new wl(e,t))}},El=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},kl=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Fl=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Il=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Tl=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Dl=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Ll=function(e){return 0===e.type},_l=function(e){return 1===e.type},Pl=function(e){return 2===e.type},Ul=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ol=function(e,t,n,r,s){return e.map(function(e,a){switch(a){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+s);case 3:return e.add(t,n+s)}return e})},Ql=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Rl=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Bl(this.container),this.container.styles.opacity<1&&this.effects.push(new Dl(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Il(n,r,s))}if(0!==this.container.styles.overflowX){var a=El(this.curves),i=Fl(this.curves);Ul(a,i)?this.effects.push(new Tl(a,6)):(this.effects.push(new Tl(a,2)),this.effects.push(new Tl(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(e){return!_l(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var a=El(n.curves),i=Fl(n.curves);Ul(a,i)||r.unshift(new Tl(i,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(t){return sa(t.target,e)})},e}(),Hl=function(e,t,n,r){e.container.elements.forEach(function(s){var a=sa(s.flags,4),i=sa(s.flags,2),o=new Rl(s,e);sa(s.styles.display,2048)&&r.push(o);var l=sa(s.flags,8)?[]:r;if(a||i){var c=a||s.styles.isPositioned()?n:t,d=new Ql(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var A=s.styles.zIndex.order;if(A<0){var u=0;c.negativeZIndex.some(function(e,t){return A>e.element.container.styles.zIndex.order?(u=t,!1):u>0}),c.negativeZIndex.splice(u,0,d)}else if(A>0){var h=0;c.positiveZIndex.some(function(e,t){return A>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),c.positiveZIndex.splice(h,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);Hl(o,d,a?d:n,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Hl(o,t,n,l);sa(s.flags,8)&&Ml(s,l)})},Ml=function(e,t){for(var n=e instanceof Mi?e.start:1,r=e instanceof Mi&&e.reversed,s=0;s<t.length;s++){var a=t[s];a.container instanceof Hi&&"number"===typeof a.container.value&&0!==a.container.value&&(n=a.container.value),a.listValue=qo(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},Vl=function(e){var t=new Rl(e,null),n=new Ql(t),r=[];return Hl(t,n,n,r),Ml(t.container,r),n},zl=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Yl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Yl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Yl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Kl=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Yl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Yl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Yl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},ql=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Yl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Yl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Yl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Gl=function(e,t){switch(t){case 0:return Wl(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Wl(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Wl(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Wl(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Wl=function(e,t){var n=[];return Cl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Yl=function(e,t,n,r){var s=[];return Cl(e)?s.push(e.subdivide(.5,!1)):s.push(e),Cl(n)?s.push(n.subdivide(.5,!0)):s.push(n),Cl(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Cl(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Xl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Jl=function(e){var t=e.styles,n=e.bounds,r=Gn(t.paddingLeft,n.width),s=Gn(t.paddingRight,n.width),a=Gn(t.paddingTop,n.width),i=Gn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+a+i))},Zl=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Xl(t)},$l=function(e,t){return 0===e?t.bounds:2===e?Jl(t):Xl(t)},ec=function(e,t,n){var r=Zl(sc(e.styles.backgroundOrigin,t),e),s=$l(sc(e.styles.backgroundClip,t),e),a=rc(sc(e.styles.backgroundSize,t),n,r),i=a[0],o=a[1],l=qn(sc(e.styles.backgroundPosition,t),r.width-i,r.height-o);return[ac(sc(e.styles.backgroundRepeat,t),l,a,r,s),Math.round(r.left+l[0]),Math.round(r.top+l[1]),i,o]},tc=function(e){return Dn(e)&&e.value===Pr.AUTO},nc=function(e){return"number"===typeof e},rc=function(e,t,n){var r=t[0],s=t[1],a=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(Hn(i)&&o&&Hn(o))return[Gn(i,n.width),Gn(o,n.height)];var l=nc(a);if(Dn(i)&&(i.value===Pr.CONTAIN||i.value===Pr.COVER))return nc(a)?n.width/n.height<a!==(i.value===Pr.COVER)?[n.width,n.width/a]:[n.height*a,n.height]:[n.width,n.height];var c=nc(r),d=nc(s),A=c||d;if(tc(i)&&(!o||tc(o)))return c&&d?[r,s]:l||A?A&&l?[c?r:s*a,d?s:r/a]:[c?r:n.width,d?s:n.height]:[n.width,n.height];if(l){var u=0,h=0;return Hn(i)?u=Gn(i,n.width):Hn(o)&&(h=Gn(o,n.height)),tc(i)?u=h*a:o&&!tc(o)||(h=u/a),[u,h]}var m=null,p=null;if(Hn(i)?m=Gn(i,n.width):o&&Hn(o)&&(p=Gn(o,n.height)),null===m||o&&!tc(o)||(p=c&&d?m/r*s:n.height),null!==p&&tc(i)&&(m=c&&d?p/s*r:n.width),null!==m&&null!==p)return[m,p];throw new Error("Unable to calculate background-size for element")},sc=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},ac=function(e,t,n,r,s){var a=t[0],i=t[1],o=n[0],l=n[1];switch(e){case 2:return[new wl(Math.round(r.left),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(r.top+i)),new wl(Math.round(r.left+r.width),Math.round(l+r.top+i)),new wl(Math.round(r.left),Math.round(l+r.top+i))];case 3:return[new wl(Math.round(r.left+a),Math.round(r.top)),new wl(Math.round(r.left+a+o),Math.round(r.top)),new wl(Math.round(r.left+a+o),Math.round(r.height+r.top)),new wl(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new wl(Math.round(r.left+a),Math.round(r.top+i)),new wl(Math.round(r.left+a+o),Math.round(r.top+i)),new wl(Math.round(r.left+a+o),Math.round(r.top+i+l)),new wl(Math.round(r.left+a),Math.round(r.top+i+l))];default:return[new wl(Math.round(s.left),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.height+s.top)),new wl(Math.round(s.left),Math.round(s.height+s.top))]}},ic="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oc="Hidden Text",lc=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),r.src=ic,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(oc)),n.appendChild(s),n.appendChild(r);var i=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(oc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:i,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),cc=function(){function e(e,t){this.context=e,this.options=t}return e}(),dc=1e4,Ac=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new lc(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Pl(e)&&(this.ctx.globalAlpha=e.opacity),Ll(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),_l(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return sa(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):ki(e.text).reduce(function(t,s){return r.ctx.fillText(s,t,e.bounds.top+n),t+r.ctx.measureText(s).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=fc(e.fontFamily).join(", "),r=In(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,a,i,o,l,c,d,A=this;return s(this,function(s){return n=this.createFontStyle(t),r=n[0],a=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(a,i),l=o.baseline,c=o.middle,d=t.paintOrder,e.textBounds.forEach(function(e){d.forEach(function(n){switch(n){case 0:A.ctx.fillStyle=sr(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){A.ctx.shadowColor=sr(n.color),A.ctx.shadowOffsetX=n.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=n.offsetY.number*A.options.scale,A.ctx.shadowBlur=n.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,l)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=sr(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=sr(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Jl(e),s=Fl(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,a,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v;return s(this,function(s){switch(s.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,a=t.styles,o=0,l=t.textNodes,s.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof Oi))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Qi&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Ri))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof eo&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:d=s.sent(),t.width&&t.height&&this.ctx.drawImage(d,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),s.label=14;case 14:if(t instanceof Ji&&(A=Math.min(t.bounds.width,t.bounds.height),t.type===Gi?t.checked&&(this.ctx.save(),this.path([new wl(t.bounds.left+.39363*A,t.bounds.top+.79*A),new wl(t.bounds.left+.16*A,t.bounds.top+.5549*A),new wl(t.bounds.left+.27347*A,t.bounds.top+.44071*A),new wl(t.bounds.left+.39694*A,t.bounds.top+.5649*A),new wl(t.bounds.left+.72983*A,t.bounds.top+.23*A),new wl(t.bounds.left+.84*A,t.bounds.top+.34085*A),new wl(t.bounds.left+.39363*A,t.bounds.top+.79*A)]),this.ctx.fillStyle=sr(Xi),this.ctx.fill(),this.ctx.restore()):t.type===Wi&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+A/2,t.bounds.top+A/2,A/4,0,2*Math.PI,!0),this.ctx.fillStyle=sr(Xi),this.ctx.fill(),this.ctx.restore())),uc(t)&&t.value.length){switch(u=this.createFontStyle(a),y=u[0],h=u[1],m=this.fontMetrics.getMetrics(y,h).baseline,this.ctx.font=y,this.ctx.fillStyle=sr(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=mc(t.styles.textAlign),v=Jl(t),p=0,t.styles.textAlign){case 1:p+=v.width/2;break;case 2:p+=v.width}f=v.add(p,0,0,-v.height/2+1),this.ctx.save(),this.path([new wl(v.left,v.top),new wl(v.left+v.width,v.top),new wl(v.left+v.width,v.top+v.height),new wl(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ci(t.value,f),a.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!sa(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];x=void 0,b=g.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return x=s.sent(),this.ctx.drawImage(x,t.bounds.left-(x.width+10),t.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(y=this.createFontStyle(a)[0],this.ctx.font=y,this.ctx.fillStyle=sr(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new i(t.bounds.left,t.bounds.top+Gn(t.styles.paddingTop,t.bounds.width),t.bounds.width,vs(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ci(e.listValue,v),a.letterSpacing,vs(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o,l,c,d,A,u,h,m,p,f;return s(this,function(s){switch(s.label){case 0:return sa(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:s.sent(),t=0,n=e.negativeZIndex,s.label=2;case 2:return t<n.length?(f=n[t],[4,this.renderStack(f)]):[3,5];case 3:s.sent(),s.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:s.sent(),r=0,a=e.nonInlineLevel,s.label=7;case 7:return r<a.length?(f=a[r],[4,this.renderNode(f)]):[3,10];case 8:s.sent(),s.label=9;case 9:return r++,[3,7];case 10:i=0,o=e.nonPositionedFloats,s.label=11;case 11:return i<o.length?(f=o[i],[4,this.renderStack(f)]):[3,14];case 12:s.sent(),s.label=13;case 13:return i++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,s.label=15;case 15:return l<c.length?(f=c[l],[4,this.renderStack(f)]):[3,18];case 16:s.sent(),s.label=17;case 17:return l++,[3,15];case 18:d=0,A=e.inlineLevel,s.label=19;case 19:return d<A.length?(f=A[d],[4,this.renderNode(f)]):[3,22];case 20:s.sent(),s.label=21;case 21:return d++,[3,19];case 22:u=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return u<h.length?(f=h[u],[4,this.renderStack(f)]):[3,26];case 24:s.sent(),s.label=25;case 25:return u++,[3,23];case 26:m=0,p=e.positiveZIndex,s.label=27;case 27:return m<p.length?(f=p[m],[4,this.renderStack(f)]):[3,30];case 28:s.sent(),s.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Cl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Cl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var s=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o;return s(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k,F,I,T,D,L,_;return s(this,function(s){switch(s.label){case 0:if(0!==n.type)return[3,5];a=void 0,i=n.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return a=s.sent(),[3,4];case 3:return s.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return a&&(o=ec(e,t,[a.width,a.height,a.width/a.height]),y=o[0],B=o[1],S=o[2],N=o[3],j=o[4],x=r.ctx.createPattern(r.resizeImage(a,N,j),"repeat"),r.renderRepeat(y,x,B,S)),[3,6];case 5:Tr(n)?(l=ec(e,t,[null,null,null]),y=l[0],B=l[1],S=l[2],N=l[3],j=l[4],c=xr(n.angle,N,j),d=c[0],A=c[1],u=c[2],h=c[3],m=c[4],(p=document.createElement("canvas")).width=N,p.height=j,f=p.getContext("2d"),g=f.createLinearGradient(A,h,u,m),fr(n.stops,d).forEach(function(e){return g.addColorStop(e.stop,sr(e.color))}),f.fillStyle=g,f.fillRect(0,0,N,j),N>0&&j>0&&(x=r.ctx.createPattern(p,"repeat"),r.renderRepeat(y,x,B,S))):Dr(n)&&(b=ec(e,t,[null,null,null]),y=b[0],v=b[1],w=b[2],N=b[3],j=b[4],C=0===n.position.length?[zn]:n.position,B=Gn(C[0],N),S=Gn(C[C.length-1],j),E=vr(n,B,S,N,j),k=E[0],F=E[1],k>0&&F>0&&(I=r.ctx.createRadialGradient(v+B,w+S,0,v+B,w+S,k),fr(n.stops,2*k).forEach(function(e){return I.addColorStop(e.stop,sr(e.color))}),r.path(y),r.ctx.fillStyle=I,k!==F?(T=e.bounds.left+.5*e.bounds.width,D=e.bounds.top+.5*e.bounds.height,_=1/(L=F/k),r.ctx.save(),r.ctx.translate(T,D),r.ctx.transform(1,0,0,L,0,0),r.ctx.translate(-T,-D),r.ctx.fillRect(v,_*(w-D)+D,N,j*_),r.ctx.restore()):r.ctx.fill())),s.label=6;case 6:return t--,[2]}})},r=this,a=0,i=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return a<i.length?(o=i[a],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){return this.path(zl(n,t)),this.ctx.fillStyle=sr(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,a){return r(this,void 0,void 0,function(){var r,i;return s(this,function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,a)]:[3,2];case 1:return s.sent(),[2];case 2:return r=Kl(a,n),this.path(r),this.ctx.fillStyle=sr(e),this.ctx.fill(),i=ql(a,n),this.path(i),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,a,i,o,l,c,d=this;return s(this,function(s){switch(s.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],a=hc(sc(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=sr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){d.ctx.save();var n=El(e.curves),r=t.inset?0:dc,s=Ol(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(d.path(n),d.ctx.clip(),d.mask(s)):(d.mask(n),d.ctx.clip(),d.path(s)),d.ctx.shadowOffsetX=t.offsetX.number+r,d.ctx.shadowOffsetY=t.offsetY.number,d.ctx.shadowColor=sr(t.color),d.ctx.shadowBlur=t.blur.number,d.ctx.fillStyle=t.inset?sr(t.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),s.label=2;case 2:i=0,o=0,l=r,s.label=3;case 3:return o<l.length?0!==(c=l[o]).style&&!rr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,i,e.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,i,e.curves)];case 10:s.sent(),s.label=11;case 11:i++,s.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,a,i){return r(this,void 0,void 0,function(){var r,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v;return s(this,function(s){return this.ctx.save(),r=Gl(a,n),o=zl(a,n),2===i&&(this.path(o),this.ctx.clip()),Cl(o[0])?(l=o[0].start.x,c=o[0].start.y):(l=o[0].x,c=o[0].y),Cl(o[1])?(d=o[1].end.x,A=o[1].end.y):(d=o[1].x,A=o[1].y),u=0===n||2===n?Math.abs(l-d):Math.abs(c-A),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(o.slice(0,2)),h=t<3?3*t:2*t,m=t<3?2*t:t,3===i&&(h=t,m=t),p=!0,u<=2*h?p=!1:u<=2*h+m?(h*=f=u/(2*h+m),m*=f):(g=Math.floor((u+m)/(h+m)),x=(u-g*h)/(g-1),m=(b=(u-(g+1)*h)/g)<=0||Math.abs(m-x)<Math.abs(m-b)?x:b),p&&(3===i?this.ctx.setLineDash([0,h+m]):this.ctx.setLineDash([h,m])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=sr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Cl(o[0])&&(y=o[3],v=o[0],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(v.start.x,v.start.y)]),this.ctx.stroke()),Cl(o[1])&&(y=o[1],v=o[2],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=Vl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(cc),uc=function(e){return e instanceof $i||e instanceof Zi||e instanceof Ji&&e.type!==Wi&&e.type!==Gi},hc=function(e,t){switch(e){case 0:return El(t);case 2:return kl(t);default:return Fl(t)}},mc=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},pc=["-apple-system","system-ui"],fc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===pc.indexOf(e)}):e},gc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=wi(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,xc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(cc),xc=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},bc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,a([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,a([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),yc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new bc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new hl(this,t)}return e.instanceCount=1,e}(),vc=function(e,t){return void 0===t&&(t={}),wc(e,t)};"undefined"!==typeof window&&ul.setContext(window);var wc=function(e,t){return r(void 0,void 0,void 0,function(){var r,a,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k,F,I,T,D,L,_,P,U,O,Q,R,H,M,V,z;return s(this,function(s){switch(s.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(E=t.allowTaint)&&void 0!==E&&E,imageTimeout:null!==(k=t.imageTimeout)&&void 0!==k?k:15e3,proxy:t.proxy,useCORS:null!==(F=t.useCORS)&&void 0!==F&&F},d=n({logging:null===(I=t.logging)||void 0===I||I,cache:t.cache},c),A={windowWidth:null!==(T=t.windowWidth)&&void 0!==T?T:a.innerWidth,windowHeight:null!==(D=t.windowHeight)&&void 0!==D?D:a.innerHeight,scrollX:null!==(L=t.scrollX)&&void 0!==L?L:a.pageXOffset,scrollY:null!==(_=t.scrollY)&&void 0!==_?_:a.pageYOffset},u=new i(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),h=new yc(d,u),m=null!==(P=t.foreignObjectRendering)&&void 0!==P&&P,p={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:m,copyStyles:m},h.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),f=new Wo(h,e,p),(g=f.clonedReferenceElement)?[4,f.toIFrame(r,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=s.sent(),b=go(g)||po(g)?l(g.ownerDocument):o(h,g),y=b.width,v=b.height,w=b.left,N=b.top,j=Nc(h,g,t.backgroundColor),C={canvas:t.canvas,backgroundColor:j,scale:null!==(Q=null!==(O=t.scale)&&void 0!==O?O:a.devicePixelRatio)&&void 0!==Q?Q:1,x:(null!==(R=t.x)&&void 0!==R?R:0)+w,y:(null!==(H=t.y)&&void 0!==H?H:0)+N,width:null!==(M=t.width)&&void 0!==M?M:Math.ceil(y),height:null!==(V=t.height)&&void 0!==V?V:Math.ceil(v)},m?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gc(h,C).render(g)]):[3,3];case 2:return B=s.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+w+","+N+" with size "+y+"x"+v+" using computed rendering"),h.logger.debug("Starting DOM parsing"),S=so(h,g),j===S.styles.backgroundColor&&(S.styles.backgroundColor=ur.TRANSPARENT),h.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new Ac(h,C).render(S)];case 4:B=s.sent(),s.label=5;case 5:return(null===(z=t.removeContainer)||void 0===z||z)&&(Wo.destroy(x)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,B]}})})},Nc=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?Ar(e,getComputedStyle(r.documentElement).backgroundColor):ur.TRANSPARENT,a=r.body?Ar(e,getComputedStyle(r.body).backgroundColor):ur.TRANSPARENT,i="string"===typeof n?Ar(e,n):null===n?ur.TRANSPARENT:4294967295;return t===r.documentElement?rr(s)?rr(a)?i:a:s:i};return vc}()},5457:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},6440:e=>{"use strict";var t=function(){};e.exports=t},6922:(e,t,n)=>{"use strict";const r=n(9149),s=n(4788),a=new WeakMap,i=new WeakMap,o=function(e){let{cacheKey:t,cache:n=new Map,maxAge:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"===typeof a&&s(n);const o=function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=t?t(s):s[0],l=n.get(o);if(l)return l.data;const c=e.apply(this,s);return n.set(o,{data:c,maxAge:a?Date.now()+a:Number.POSITIVE_INFINITY}),c};return r(o,e,{ignoreNonConfigurable:!0}),i.set(o,n),o};o.decorator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n,r)=>{const s=t[n];if("function"!==typeof s)throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!a.has(this)){const t=o(s,e);return a.set(this,t),t}return a.get(this)}}},o.clear=e=>{const t=i.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if("function"!==typeof t.clear)throw new TypeError("The cache Map can't be cleared!");t.clear()},e.exports=o},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<s&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],A=1,u=null,h=3,m=!1,p=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function v(e){if(f=!1,y(e),!p)if(null!==r(c))p=!0,D(w);else{var t=r(d);null!==t&&L(v,t.startTime-e)}}function w(e,n){p=!1,f&&(f=!1,x(B),B=-1),m=!0;var a=h;try{for(y(n),u=r(c);null!==u&&(!(u.expirationTime>n)||e&&!k());){var i=u.callback;if("function"===typeof i){u.callback=null,h=u.priorityLevel;var o=i(u.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?u.callback=o:u===r(c)&&s(c),y(n)}else s(c);u=r(c)}if(null!==u)var l=!0;else{var A=r(d);null!==A&&L(v,A.startTime-n),l=!1}return l}finally{u=null,h=a,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,j=!1,C=null,B=-1,S=5,E=-1;function k(){return!(t.unstable_now()-E<S)}function F(){if(null!==C){var e=t.unstable_now();E=e;var n=!0;try{n=C(!0,e)}finally{n?N():(j=!1,C=null)}}else j=!1}if("function"===typeof b)N=function(){b(F)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,T=I.port2;I.port1.onmessage=F,N=function(){T.postMessage(null)}}else N=function(){g(F,0)};function D(e){C=e,j||(j=!0,N())}function L(e,n){B=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:A++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(f?(x(B),B=-1):f=!0,L(v,a-i))):(e.sortIndex=o,n(c,e),p||m||(p=!0,D(w))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},7736:(e,t,n)=>{var r=n(3738).default,s=n(9045);e.exports=function(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9149:(e,t,n)=>{"use strict";var r=n(2897).default;const s=(e,t,n,r)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const s=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(t,n);!a(s,i)&&r||Object.defineProperty(e,n,i)},a=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},i=(e,t)=>"/* Wrapped ".concat(e,"*/\n").concat(t),o=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),l=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=function(e,t){let{ignoreNonConfigurable:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{name:a}=e;for(const r of Reflect.ownKeys(t))s(e,t,r,n);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{const s=""===n?"":"with ".concat(n.trim(),"() "),a=i.bind(null,s,t.toString());Object.defineProperty(a,"name",l),Object.defineProperty(e,"toString",r(r({},o),{},{value:a}))})(e,t,a),e}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{453:"8701dc61",455:"7bb34b54",977:"7a7b0c82"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var A=c[d];if(A.getAttribute("src")==r||A.getAttribute("data-webpack")==t+a){o=A;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[s];var u=(t,n)=>{o.onerror=o.onload=null,clearTimeout(h);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,a,[i,o,l]=r,c=0;if(i.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Qv,hasStandardBrowserEnv:()=>Hv,hasStandardBrowserWebWorkerEnv:()=>Mv,navigator:()=>Rv,origin:()=>Vv});var t=n(5043),r=n.t(t,2),s=n(4391);const a=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,d=(3&t)<<4|i>>4;let A=(15&i)<<2|l>>6,u=63&l;o||(u=64,a||(A=64)),r.push(n[c],n[d],n[A],n[u])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==l)throw new o;const c=t<<2|a>>4;if(r.push(c),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==l){const e=i<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=a(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return i.decodeString(e,!0)}catch(Tu){console.error("base64Decode failed: ",Tu)}return null};function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const A=()=>{try{return d().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Tu){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(Tu){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Tu))}},u=e=>{var t,n;return null===(n=null===(t=A())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=()=>{var e;return null===(e=A())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=A())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function f(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(jf){return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}const x={};let b=!1;function y(e,t){if("undefined"===typeof window||"undefined"===typeof document||!f(window.location.host)||x[e]===t||x[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}x[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(x))x[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,i,l,n),document.body.appendChild(t)}s?(i.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){var e;const t=null===(e=A())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Tu){return!1}}function N(){return!w()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(Tu){return!1}}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(S,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new C(n,a,t)}}const S=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(k(n)&&k(a)){if(!E(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function k(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function T(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Tu){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Tu){"undefined"!==typeof console&&console.error&&console.error(Tu)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}function _(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const U="[DEFAULT]";class O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new p;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Tu){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Tu){if(r)return null;throw Tu}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:U})}catch(Tu){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Tu){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(jf){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(jf){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.component?this.component.multipleInstances?e:U:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Q(e){return e===U?void 0:e}class R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const H=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const V={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},z=M.INFO,K={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},q=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=K[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class G{constructor(e){this.name=e,this._logLevel=z,this._logHandler=q,this._userLogHandler=null,H.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...t),this._logHandler(this,M.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...t),this._logHandler(this,M.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.INFO,...t),this._logHandler(this,M.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.WARN,...t),this._logHandler(this,M.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.ERROR,...t),this._logHandler(this,M.ERROR,...t)}}var W=n(4467);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,W.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let J,Z;const $=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap;let se={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ee.get(e);if("objectStoreNames"===t)return e.objectStoreNames||te.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oe(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ae(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(le(this),n),oe($.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oe(e.apply(le(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.call(le(this),t,...r);return te.set(a,t.sort?t.sort():[t]),oe(a)}}function ie(e){return"function"===typeof e?ae(e):(e instanceof IDBTransaction&&function(e){if(ee.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});ee.set(e,t)}(e),t=e,(J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,se):e);var t}function oe(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(oe(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&$.set(t,e)}).catch(()=>{}),re.set(t,e),t}(e);if(ne.has(e))return ne.get(e);const t=ie(e);return t!==e&&(ne.set(e,t),re.set(t,e)),t}const le=e=>re.get(e);const ce=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],Ae=new Map;function ue(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ae.get(t))return Ae.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=de.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!ce.includes(n))return;const a=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let a=t.store;for(var i=arguments.length,o=new Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),s&&t.done]))[0]};return Ae.set(t,a),a}se=(e=>X(X({},e),{},{get:(t,n,r)=>ue(t,n)||e.get(t,n,r),has:(t,n)=>!!ue(t,n)||e.has(t,n)}))(se);class he{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const me="@firebase/app",pe="0.13.2",fe=new G("@firebase/app"),ge="@firebase/app-compat",xe="@firebase/analytics-compat",be="@firebase/analytics",ye="@firebase/app-check-compat",ve="@firebase/app-check",we="@firebase/auth",Ne="@firebase/auth-compat",je="@firebase/database",Ce="@firebase/data-connect",Be="@firebase/database-compat",Se="@firebase/functions",Ee="@firebase/functions-compat",ke="@firebase/installations",Fe="@firebase/installations-compat",Ie="@firebase/messaging",Te="@firebase/messaging-compat",De="@firebase/performance",Le="@firebase/performance-compat",_e="@firebase/remote-config",Pe="@firebase/remote-config-compat",Ue="@firebase/storage",Oe="@firebase/storage-compat",Qe="@firebase/firestore",Re="@firebase/ai",He="@firebase/firestore-compat",Me="firebase",Ve="[DEFAULT]",ze={[me]:"fire-core",[ge]:"fire-core-compat",[be]:"fire-analytics",[xe]:"fire-analytics-compat",[ve]:"fire-app-check",[ye]:"fire-app-check-compat",[we]:"fire-auth",[Ne]:"fire-auth-compat",[je]:"fire-rtdb",[Ce]:"fire-data-connect",[Be]:"fire-rtdb-compat",[Se]:"fire-fn",[Ee]:"fire-fn-compat",[ke]:"fire-iid",[Fe]:"fire-iid-compat",[Ie]:"fire-fcm",[Te]:"fire-fcm-compat",[De]:"fire-perf",[Le]:"fire-perf-compat",[_e]:"fire-rc",[Pe]:"fire-rc-compat",[Ue]:"fire-gcs",[Oe]:"fire-gcs-compat",[Qe]:"fire-fst",[He]:"fire-fst-compat",[Re]:"fire-vertex","fire-js":"fire-js",[Me]:"fire-js-all"},Ke=new Map,qe=new Map,Ge=new Map;function We(e,t){try{e.container.addComponent(t)}catch(Tu){fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Tu)}}function Ye(e){const t=e.name;if(Ge.has(t))return fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ge.set(t,e);for(const n of Ke.values())We(n,e);for(const n of qe.values())We(n,e);return!0}function Xe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ze=new B("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}const et="11.10.0";function tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ve,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw Ze.create("bad-app-name",{appName:String(s)});if(n||(n=h()),!n)throw Ze.create("no-options");const a=Ke.get(s);if(a){if(E(n,a.options)&&E(r,a.config))return a;throw Ze.create("duplicate-app",{appName:s})}const i=new R(s);for(const l of Ge.values())i.addComponent(l);const o=new $e(n,r,i);return Ke.set(s,o),o}function nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve;const t=Ke.get(e);if(!t&&e===Ve&&h())return tt();if(!t)throw Ze.create("no-app",{appName:e});return t}function rt(e,t,n){var r;let s=null!==(r=ze[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&i&&e.push("and"),i&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fe.warn(e.join(" "))}Ye(new P("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const st="firebase-heartbeat-store";let at=null;function it(){return at||(at=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=indexedDB.open(e,t),o=oe(i);return r&&i.addEventListener("upgradeneeded",e=>{r(oe(i.result),e.oldVersion,e.newVersion,oe(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(st)}catch(Tu){console.warn(Tu)}}}).catch(e=>{throw Ze.create("idb-open",{originalErrorMessage:e.message})})),at}async function ot(e,t){try{const n=(await it()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,lt(e)),await n.done}catch(Tu){if(Tu instanceof C)fe.warn(Tu.message);else{const t=Ze.create("idb-set",{originalErrorMessage:null===Tu||void 0===Tu?void 0:Tu.message});fe.warn(t.message)}}}function lt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ct{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new At(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=dt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Tu){fe.warn(Tu)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=dt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ut(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ut(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Tu){return fe.warn(Tu),""}}}function dt(){return(new Date).toISOString().substring(0,10)}class At{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!j()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await it()).transaction(st),n=await t.objectStore(st).get(lt(e));return await t.done,n}catch(Tu){if(Tu instanceof C)fe.warn(Tu.message);else{const t=Ze.create("idb-get",{originalErrorMessage:null===Tu||void 0===Tu?void 0:Tu.message});fe.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ot(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ot(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ut(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var ht;ht="",Ye(new P("platform-logger",e=>new he(e),"PRIVATE")),Ye(new P("heartbeat",e=>new ct(e),"PRIVATE")),rt(me,pe,ht),rt(me,pe,"esm2017"),rt("fire-js","");function mt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function pt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ft=pt,gt=new B("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xt=new G("@firebase/auth");function bt(e){if(xt.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.error("Auth (".concat(et,"): ").concat(e),...n)}}function yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ct(e,...n)}function vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ct(e,...n)}function wt(e,t,n){const r=Object.assign(Object.assign({},ft()),{[t]:n});return new B("auth","Firebase",r).create(t,{appName:e.name})}function Nt(e){return wt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yt(e,"argument-error"),wt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return gt.create(e,...n)}function Bt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Ct(t,...r)}}function St(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bt(t),new Error(t)}function Et(e,t){e||St(t)}function kt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ft(){return"http:"===It()||"https:"===It()}function It(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Tt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ft()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Dt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Et(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Tt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lt(e,t){Et(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class _t{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void St("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void St("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void St("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ut=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ot=new Dt(3e4,6e4);function Qt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Rt(e,t,n,r){return Ht(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const i=F(Object.assign({key:e.config.apiKey},a)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&f(e.emulatorConfig.host)&&(l.credentials="include"),_t.fetch()(await Vt(e,e.config.apiHost,n,i),l)})}async function Ht(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pt),t);try{const t=new Kt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw qt(e,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const t=s.ok?a.errorMessage:a.error.message,[n,i]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw qt(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw qt(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw qt(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(i)throw wt(e,o,i);yt(e,o)}}catch(Tu){if(Tu instanceof C)throw Tu;yt(e,"network-request-failed",{message:String(Tu)})}}async function Mt(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await Rt(e,t,n,r,s);return"mfaPendingCredential"in a&&yt(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function Vt(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),a=e,i=a.config.emulator?Lt(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Ut.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(i).toString()}return i}function zt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(vt(this.auth,"network-request-failed")),Ot.get())})}}function qt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vt(e,t,r);return s.customData._tokenResponse=n,s}function Gt(e){return void 0!==e&&void 0!==e.enterprise}class Wt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Yt(e,t){return Rt(e,"GET","/v2/recaptchaConfig",Qt(e,t))}async function Xt(e,t){return Rt(e,"POST","/v1/accounts:lookup",t)}function Jt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Tu){}}function Zt(e){return 1e3*Number(e)}function $t(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(bt("Failed to decode base64 JWT payload"),null)}catch(Tu){return bt("Caught error parsing JWT payload as JSON",null===Tu||void 0===Tu?void 0:Tu.toString()),null}}function en(e){const t=$t(e);return Bt(t,"internal-error"),Bt("undefined"!==typeof t.exp,"internal-error"),Bt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Tu){throw Tu instanceof C&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Tu)&&e.auth.currentUser===e&&await e.auth.signOut(),Tu}}class nn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Tu){return void((null===Tu||void 0===Tu?void 0:Tu.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class rn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jt(this.lastLoginAt),this.creationTime=Jt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sn(e){var t;const n=e.auth,r=await e.getIdToken(),s=await tn(e,Xt(n,{idToken:r}));Bt(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const i=(null===(t=a.providerUserInfo)||void 0===t?void 0:t.length)?an(a.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,i),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!l&&c,A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new rn(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(e,A)}function an(e){return e.map(e=>{var{providerId:t}=e,n=mt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class on{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt("undefined"!==typeof e.idToken,"internal-error"),Bt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):en(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(0!==e.length,"internal-error");const t=en(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Ht(e,{},async()=>{const n=F({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,a=await Vt(e,r,"/v1/token","key=".concat(s)),i=await e._getAdditionalHeaders();i["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:i,body:n};return e.emulatorConfig&&f(e.emulatorConfig.host)&&(o.credentials="include"),_t.fetch()(a,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,a=new on;return n&&(Bt("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Bt("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),s&&(Bt("number"===typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new on,this.toJSON())}_performRefresh(){return St("not implemented")}}function ln(e,t){Bt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class cn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=mt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await tn(this,this.stsTokenManager.getToken(this.auth,e));return Bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=_(e),r=await n.getIdToken(t),s=$t(r);Bt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a="object"===typeof s.firebase?s.firebase:void 0,i=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Jt(Zt(s.auth_time)),issuedAtTime:Jt(Zt(s.iat)),expirationTime:Jt(Zt(s.exp)),signInProvider:i||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=_(e);await sn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await sn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(Nt(this.auth));const e=await this.getIdToken();return await tn(this,async function(e,t){return Rt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,i,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,A=null!==(r=t.email)&&void 0!==r?r:void 0,u=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,h=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(i=t.tenantId)&&void 0!==i?i:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,f=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:b,isAnonymous:y,providerData:v,stsTokenManager:w}=t;Bt(x&&w,e,"internal-error");const N=on.fromJSON(this.name,w);Bt("string"===typeof x,e,"internal-error"),ln(d,e.name),ln(A,e.name),Bt("boolean"===typeof b,e,"internal-error"),Bt("boolean"===typeof y,e,"internal-error"),ln(u,e.name),ln(h,e.name),ln(m,e.name),ln(p,e.name),ln(f,e.name),ln(g,e.name);const j=new cn({uid:x,auth:e,email:A,emailVerified:b,displayName:d,isAnonymous:y,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:N,createdAt:f,lastLoginAt:g});return v&&Array.isArray(v)&&(j.providerData=v.map(e=>Object.assign({},e))),p&&(j._redirectEventId=p),j}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new on;r.updateFromServerResponse(t);const s=new cn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await sn(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Bt(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?an(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),i=new on;i.updateFromIdToken(n);const o=new cn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new rn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const dn=new Map;function An(e){Et(e instanceof Function,"Expected a class definition");let t=dn.get(e);return t?(Et(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,dn.set(e,t),t)}class un{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}un.type="NONE";const hn=un;function mn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=mn(this.userKey,r.apiKey,s),this.fullPersistenceKey=mn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Xt(this.auth,{idToken:e}).catch(()=>{});return t?cn._fromGetAccountInfoResponse(this.auth,t,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pn(An(hn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||An(hn);const a=mn(n,e.config.apiKey,e.name);let i=null;for(const l of t)try{const t=await l._get(a);if(t){let n;if("string"===typeof t){const r=await Xt(e,{idToken:t}).catch(()=>{});if(!r)break;n=await cn._fromGetAccountInfoResponse(e,r,t)}else n=cn._fromJSON(e,t);l!==s&&(i=n),s=l;break}}catch(jf){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],i&&await s._set(a,i.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(a)}catch(jf){}})),new pn(s,e,n)):new pn(s,e,n)}}function fn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wn(t))return"Blackberry";if(Nn(t))return"Webos";if(xn(t))return"Safari";if((t.includes("chrome/")||bn(t))&&!t.includes("edge/"))return"Chrome";if(vn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/firefox\//i.test(e)}function xn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/crios\//i.test(e)}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iemobile/i.test(e)}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/android/i.test(e)}function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/blackberry/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/webos/i.test(e)}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Cn(){return function(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return jn(e)||vn(e)||Nn(e)||wn(e)||/windows phone/i.test(e)||yn(e)}function Sn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fn(v());break;case"Worker":t="".concat(fn(v()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(et,"/").concat(r)}class En{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Tu){r(Tu)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Tu){t.reverse();for(const n of t)try{n()}catch(xh){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Tu||void 0===Tu?void 0:Tu.message})}}}class kn{constructor(e){var t,n,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,a,i;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNonAlphanumericCharacter)||void 0===i||i),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Fn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tn(this),this.idTokenSubscription=new Tn(this),this.beforeStateQueue=new En(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=An(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await pn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Tu){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Xt(this,{idToken:e}),n=await cn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Je(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,i=await this.tryRedirectSignIn(e);n&&n!==a||!(null===i||void 0===i?void 0:i.user)||(r=i.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Tu){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Tu))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Tu){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sn(e)}catch(Tu){if((null===Tu||void 0===Tu?void 0:Tu.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(Nt(this));const t=e?_(e):null;return t&&Bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(Nt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(Nt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rt(e,"GET","/v2/passwordPolicy",Qt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new kn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new B("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rt(e,"POST","/v2/accounts:revokeToken",Qt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&An(e)||this._popupRedirectResolver;Bt(t,this,"argument-error"),this.redirectPersistenceManager=await pn.create(this,[An(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let a=!1;const i=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(i,this,"internal-error"),i.then(()=>{a||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{a=!0,s()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(xt.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xt.warn("Auth (".concat(et,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function In(e){return _(e)}class Tn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new D(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ln(e){return Dn.loadJS(e)}function _n(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Pn{constructor(){this.enterprise=new Un}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Un{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const On="NO_RECAPTCHA";class Qn{constructor(e){this.type="recaptcha-enterprise",this.auth=In(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Gt(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(On)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Pn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Yt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Wt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Gt(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Dn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ln(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Rn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Qn(e);let i;if(s)i=On;else try{i=await a.verify(n)}catch(l){i=await a.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hn(e,t,n,r,s){var a,i;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Rn(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Rn(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("PHONE_PROVIDER")){const s=await Rn(e,t,n);return r(e,s).catch(async s=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Rn(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Rn(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Mn(e){const t=In(e),n=await Yt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Wt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Qn(t).verify()}}function Vn(e,t,n){const r=In(e);Bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),a=zn(t),{host:i,port:o}=function(e){const t=zn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Kn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Kn(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(a,"//").concat(i).concat(l,"/")},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return Bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Bt(E(c,r.config.emulator)&&E(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,f(i)?(g("".concat(a,"//").concat(i).concat(l)),y("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function zn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return St("not implemented")}_getIdTokenResponse(e){return St("not implemented")}_linkToIdToken(e,t){return St("not implemented")}_getReauthenticationResolver(e){return St("not implemented")}}async function Gn(e,t){return Rt(e,"POST","/v1/accounts:signUp",t)}async function Wn(e,t){return Mt(e,"POST","/v1/accounts:signInWithPassword",Qt(e,t))}class Yn extends qn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Yn(e,t,"password")}static _fromEmailAndCode(e,t){return new Yn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Hn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Wn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Mt(e,"POST","/v1/accounts:signInWithEmailLink",Qt(e,t))}(e,{email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Hn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Mt(e,"POST","/v1/accounts:signInWithEmailLink",Qt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Xn(e,t){return Mt(e,"POST","/v1/accounts:signInWithIdp",Qt(e,t))}class Jn extends qn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=mt(t,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Jn(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return Xn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Xn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=F(t)}return e}}async function Zn(e,t){return Rt(e,"POST","/v1/accounts:sendVerificationCode",Qt(e,t))}const $n={USER_NOT_FOUND:"user-not-found"};class er extends qn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new er({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new er({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mt(e,"POST","/v1/accounts:signInWithPhoneNumber",Qt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mt(e,"POST","/v1/accounts:signInWithPhoneNumber",Qt(e,t));if(n.temporaryProof)throw qt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mt(e,"POST","/v1/accounts:signInWithPhoneNumber",Qt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),$n)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new er({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class tr{constructor(e){var t,n,r,s,a,i;const o=I(T(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Bt(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(i=o.tenantId)&&void 0!==i?i:null}static parseLink(e){const t=function(e){const t=I(T(e)).link,n=t?I(T(t)).deep_link_id:null,r=I(T(e)).deep_link_id;return(r?I(T(r)).link:null)||r||n||t||e}(e);try{return new tr(t)}catch(jf){return null}}}class nr{constructor(){this.providerId=nr.PROVIDER_ID}static credential(e,t){return Yn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=tr.parseLink(t);return Bt(n,"argument-error"),Yn._fromEmailAndCode(e,n.code,n.tenantId)}}nr.PROVIDER_ID="password",nr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sr extends rr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ar extends sr{constructor(){super("facebook.com")}static credential(e){return Jn._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ar.credential(t.oauthAccessToken)}catch(jf){return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",ar.PROVIDER_ID="facebook.com";class ir extends sr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jn._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ir.credential(n,r)}catch(jf){return null}}}ir.GOOGLE_SIGN_IN_METHOD="google.com",ir.PROVIDER_ID="google.com";class or extends sr{constructor(){super("github.com")}static credential(e){return Jn._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return or.credential(t.oauthAccessToken)}catch(jf){return null}}}or.GITHUB_SIGN_IN_METHOD="github.com",or.PROVIDER_ID="github.com";class lr extends sr{constructor(){super("twitter.com")}static credential(e,t){return Jn._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lr.credential(n,r)}catch(jf){return null}}}async function cr(e,t){return Mt(e,"POST","/v1/accounts:signUp",Qt(e,t))}lr.TWITTER_SIGN_IN_METHOD="twitter.com",lr.PROVIDER_ID="twitter.com";class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await cn._fromIdTokenResponse(e,n,r),a=Ar(n);return new dr({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ar(n);return new dr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ar(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ur extends C{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ur.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ur(e,t,n,r)}}function hr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ur._fromErrorAndOperation(e,n,t,r);throw n})}async function mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await tn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dr._forOperation(e,"link",r)}async function pr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Je(r.app))return Promise.reject(Nt(r));const s="reauthenticate";try{const a=await tn(e,hr(r,s,t,e),n);Bt(a.idToken,r,"internal-error");const i=$t(a.idToken);Bt(i,r,"internal-error");const{sub:o}=i;return Bt(e.uid===o,r,"user-mismatch"),dr._forOperation(e,s,a)}catch(Tu){throw(null===Tu||void 0===Tu?void 0:Tu.code)==="auth/".concat("user-not-found")&&yt(r,"user-mismatch"),Tu}}async function fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Je(e.app))return Promise.reject(Nt(e));const r="signIn",s=await hr(e,r,t),a=await dr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(a.user),a}async function gr(e,t){return fr(In(e),t)}async function xr(e){const t=In(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function br(e,t,n){if(Je(e.app))return Promise.reject(Nt(e));const r=In(e),s=Hn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cr,"EMAIL_PASSWORD_PROVIDER"),a=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t}),i=await dr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(i.user),i}function yr(e,t){return Rt(e,"POST","/v2/accounts/mfaEnrollment:start",Qt(e,t))}new WeakMap;const vr="__sak";class wr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vr,"1"),this.storage.removeItem(vr),Promise.resolve(!0)):Promise.resolve(!1)}catch(jf){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Nr extends wr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Cn()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nr.type="LOCAL";const jr=Nr;function Cr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Br(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Sr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Br(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Cr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Br(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Br(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Cr(n);const s=setInterval(()=>{const e=Cr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Sr.type="COOKIE";class Er extends wr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Er.type="SESSION";const kr=Er;class Fr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Fr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!(null===a||void 0===a?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const i=Array.from(a).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(i);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fr.receivers=[];class Tr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((i,o)=>{const l=Ir("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),i(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Dr(){return window}function Lr(){return"undefined"!==typeof Dr().WorkerGlobalScope&&"function"===typeof Dr().importScripts}const _r="firebaseLocalStorageDb",Pr="firebaseLocalStorage",Ur="fbase_key";class Or{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qr(e,t){return e.transaction([Pr],t?"readwrite":"readonly").objectStore(Pr)}function Rr(){const e=indexedDB.open(_r,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Pr,{keyPath:Ur})}catch(Tu){n(Tu)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Pr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_r);return new Or(e).toPromise()}(),t(await Rr()))})})}async function Hr(e,t,n){const r=Qr(e,!0).put({[Ur]:t,value:n});return new Or(r).toPromise()}function Mr(e,t){const n=Qr(e,!0).delete(t);return new Or(n).toPromise()}class Vr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Rr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Tu){if(t++>3)throw Tu;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fr._getInstance(Lr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Tr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(jf){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rr();return await Hr(e,vr,"1"),await Mr(e,vr),!0}catch(jf){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Qr(e,!1).get(t),r=await new Or(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Qr(e,!1).getAll();return new Or(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vr.type="LOCAL";const zr=Vr;function Kr(e,t){return Rt(e,"POST","/v2/accounts/mfaSignIn:start",Qt(e,t))}_n("rcb"),new Dt(3e4,6e4);const qr="recaptcha";async function Gr(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Mn(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Bt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=Hn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===On){Bt((null===n||void 0===n?void 0:n.type)===qr,e,"argument-error");return yr(e,await Wr(e,t,n))}return yr(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{Bt("signin"===t.type,e,"internal-error");const a=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Bt(a,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Hn(e,i,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===On){Bt((null===n||void 0===n?void 0:n.type)===qr,e,"argument-error");return Kr(e,await Wr(e,t,n))}return Kr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Hn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===On){Bt((null===n||void 0===n?void 0:n.type)===qr,e,"argument-error");return Zn(e,await Wr(e,t,n))}return Zn(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Wr(e,t,n){Bt(n.type===qr,e,"argument-error");const r=await n.verify();Bt("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,a=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Yr{constructor(e){this.providerId=Yr.PROVIDER_ID,this.auth=In(e)}verifyPhoneNumber(e,t){return Gr(this.auth,e,_(t))}static credential(e,t){return er._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yr.credentialFromTaggedObject(t)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?er._fromTokenResponse(n,r):null}}function Xr(e,t){return t?An(t):(Bt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yr.PROVIDER_ID="phone",Yr.PHONE_SIGN_IN_METHOD="phone";class Jr extends qn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zr(e){return fr(e.auth,new Jr(e),e.bypassAuthState)}function $r(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),pr(n,new Jr(e),e.bypassAuthState)}async function es(e){const{auth:t,user:n}=e;return Bt(n,t,"internal-error"),mr(n,new Jr(e),e.bypassAuthState)}class ts{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Tu){this.reject(Tu)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:a,type:i}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(i)(o))}catch(Tu){this.reject(Tu)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zr;case"linkViaPopup":case"linkViaRedirect":return es;case"reauthViaPopup":case"reauthViaRedirect":return $r;default:yt(this.auth,"internal-error")}}resolve(e){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ns=new Dt(2e3,1e4);class rs extends ts{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){Et(1===this.filter.length,"Popup operations only handle one event");const e=Ir();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(vt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ns.get())};e()}}rs.currentPopupAction=null;const ss=new Map;class as extends ts{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ss.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ls(t),r=os(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Tu){e=()=>Promise.reject(Tu)}ss.set(this.auth._key(),e)}return this.bypassAuthState||ss.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function is(e,t){ss.set(e._key(),t)}function os(e){return An(e._redirectPersistence)}function ls(e){return mn("pendingRedirect",e.config.apiKey,e.name)}async function cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Je(e.app))return Promise.reject(Nt(e));const r=In(e),s=Xr(r,t),a=new as(r,s,n),i=await a.execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}class ds{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return us(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!us(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(vt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(As(e))}saveEventToCache(e){this.cachedEventUids.add(As(e)),this.lastProcessedEventTime=Date.now()}}function As(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function us(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ms=/^https?/;async function ps(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Rt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(fs(n))return}catch(jf){}yt(e,"unauthorized-domain")}function fs(e){const t=kt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!ms.test(n))return!1;if(hs.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const gs=new Dt(3e4,6e4);function xs(){const e=Dr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function bs(e){return new Promise((t,n)=>{var r,s,a;function i(){xs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xs(),n(vt(e,"network-request-failed"))},timeout:gs.get()})}if(null===(s=null===(r=Dr().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Dr().gapi)||void 0===a?void 0:a.load)){const t=_n("iframefcb");return Dr()[t]=()=>{gapi.load?i():n(vt(e,"network-request-failed"))},Ln("".concat(Dn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw ys=null,e})}let ys=null;const vs=new Dt(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ns=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function js(e){const t=e.config;Bt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Lt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:et},s=Ns.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(F(r).slice(1))}async function Cs(e){const t=await function(e){return ys=ys||bs(e),ys}(e),n=Dr().gapi;return Bt(n,e,"internal-error"),t.open({where:document.body,url:js(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=vt(e,"network-request-failed"),a=Dr().setTimeout(()=>{r(s)},vs.get());function i(){Dr().clearTimeout(a),n(t)}t.ping(i).then(i,()=>{r(s)})}))}const Bs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ss{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Tu){}}}function Es(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Bs),{width:r.toString(),height:s.toString(),top:a,left:i}),c=v().toLowerCase();n&&(o=bn(c)?"_blank":n),gn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return jn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Ss(null);const A=window.open(t||"",o,d);Bt(A,e,"popup-blocked");try{A.focus()}catch(Tu){}return new Ss(A)}const ks="__/auth/handler",Fs="emulator/auth/handler",Is=encodeURIComponent("fac");async function Ts(e,t,n,r,s,a){Bt(e.config.authDomain,e,"auth-domain-config-required"),Bt(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:et,eventId:s};if(t instanceof rr){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))i[e]=t}if(t instanceof sr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(i.scopes=e.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))void 0===o[d]&&delete o[d];const l=await e._getAppCheckToken(),c=l?"#".concat(Is,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ks);return Lt(t,Fs)}(e),"?").concat(F(o).slice(1)).concat(c)}const Ds="webStorageSupport";const Ls=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kr,this._completeRedirectFn=cs,this._overrideRedirectResult=is}async _openPopup(e,t,n,r){var s;Et(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Es(e,await Ts(e,t,n,kt(),r),Ir())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Dr().location.href=e}(await Ts(e,t,n,kt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Et(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Cs(e),n=new ds(e);return t.register("authEvent",t=>{Bt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ds,{type:Ds},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ds];void 0!==s&&t(!!s),yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ps(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bn()||xn()||jn()}};var _s="@firebase/auth",Ps="1.10.8";class Us{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Os=m("authIdTokenMaxAge")||300;let Qs=null;var Rs;!function(e){Dn=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=vt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Rs="Browser",Ye(new P("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;Bt(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:o,clientPlatform:Rs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sn(Rs)},c=new Fn(r,s,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(An);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ye(new P("auth-internal",e=>(e=>new Us(e))(In(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),rt(_s,Ps,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Rs)),rt(_s,Ps,"esm2017");rt("firebase","11.10.0","app");var Hs,Ms="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vs={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var a=e.g[3],i=t+(a^n&(s^a))+r[0]+3614090360&4294967295;i=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^a&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(s^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=a+((i=s+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,a=this.h,i=0;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function a(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return u(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function A(e){return-1==e.h}function u(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function h(e,t){return e.add(u(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function f(e,t){if(d(t))throw Error("division by zero");if(d(e))return new p(o,o);if(A(e))return t=f(u(e),t),new p(u(t.g),u(t.h));if(A(t))return t=f(e,u(t)),new p(u(t.g),t.h);if(30<e.g.length){if(A(e)||A(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=g(n),r=g(r);var s=x(n,1),a=x(r,1);for(r=x(r,2),n=x(n,2);!d(r);){var c=a.add(r);0>=c.l(e)&&(s=s.add(n),a=c),r=x(r,1),n=x(n,1)}return t=h(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=i(n)).j(t);A(c)||0<c.l(e);)c=(a=i(n-=r)).j(t);d(a)&&(a=l),s=s.add(a),e=h(e,c)}return new p(s,e)}function g(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,a=[],i=0;i<s;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(A(this))return-u(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(A(this))return"-"+u(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=f(n,t).g,a=((0<(n=h(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(d(n=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return A(e=h(this,e))?-1:d(e)?0:1},e.abs=function(){return A(this)?u(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,a=0;a<=t;a++){var i=s+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);s=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(d(this)||d(e))return o;if(A(this))return A(e)?u(this).j(u(e)):u(u(this).j(e));if(A(e))return u(this.j(u(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<e.g.length;a++){var l=this.i(s)>>>16,h=65535&this.i(s),p=e.i(a)>>>16,f=65535&e.i(a);n[2*s+2*a]+=h*f,m(n,2*s+2*a),n[2*s+2*a+1]+=l*f,m(n,2*s+2*a+1),n[2*s+2*a+1]+=h*p,m(n,2*s+2*a+1),n[2*s+2*a+2]+=l*p,m(n,2*s+2*a+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return f(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Vs.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return u(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=i(Math.pow(n,l)),s=s.j(l).add(i(c))):s=(s=s.j(r)).add(i(c))}return s},Hs=Vs.Integer=r}).apply("undefined"!==typeof Ms?Ms:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var zs,Ks,qs,Gs,Ws,Ys,Xs,Js,Zs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},$s={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Zs&&Zs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function A(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}function u(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function h(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function f(e){return f[" "](e),e}f[" "]=function(){};var g=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function x(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<y.length;t++)n=y[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function w(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){s.setTimeout(()=>{throw e},0)}function j(){var e=k;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new B,e=>e.reset());class B{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let S,E=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},F=()=>{const e=s.Promise.resolve(void 0);S=()=>{e.then(I)}};var I=()=>{for(var e;e=j();){try{e.h.call(e.g)}catch(Ou){N(Ou)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}E=!1};function T(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}T.prototype.s=!1,T.prototype.ma=function(){this.s||(this.s=!0,this.N())},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(Ou){}return e}();function _(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(g){e:{try{f(t.nodeName);var s=!0;break e}catch(Vu){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:P[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&_.aa.h.call(this)}}A(_,D);var P={2:"touch",3:"pen",4:"mouse"};_.prototype.h=function(){_.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),O=0;function Q(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++O,this.da=this.fa=!1}function R(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function H(e){this.src=e,this.g={},this.h=0}function M(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=0<=a)&&Array.prototype.splice.call(s,a,1),r&&(R(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var s=0;s<e.length;++s){var a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}H.prototype.add=function(e,t,n,r,s){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=V(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new Q(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),K={};function q(e,t,n,r,s){if(r&&r.once)return W(e,t,n,r,s);if(Array.isArray(t)){for(var a=0;a<t.length;a++)q(e,t[a],n,r,s);return null}return n=te(n),e&&e[U]?e.K(t,n,i(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");var o=i(s)?!!s.capture:!!s,l=$(e);if(l||(e[z]=l=new H(e)),(n=l.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,s){if(Array.isArray(t)){for(var a=0;a<t.length;a++)W(e,t[a],n,r,s);return null}return n=te(n),e&&e[U]?e.L(t,n,i(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)Y(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=te(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(a=e.g[t],n,r,s))&&(R(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=$(t))?(M(n,e),0==n.h&&(n.src=null,t[z]=null)):R(e)}}}function J(e){return e in K?K[e]:K[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new _(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function $(e){return(e=e[z])instanceof H?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){T.call(this),this.i=new H(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;v(t=new D(r,e),s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];s=se(i,r,!0,t)&&s}if(s=se(i=t.g=e,r,!0,t)&&s,s=se(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)s=se(i=t.g=n[a],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&M(e.i,i),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ae(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ie(e){e.g=ae(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}A(ne,T),ne.prototype[U]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)R(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends T{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){T.call(this),this.h=e,this.g={}}A(le,T);var ce=[];function de(e){x(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),de(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=s.JSON.stringify,ue=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function fe(){}me.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xe(){D.call(this,"d")}function be(){D.call(this,"c")}A(xe,D),A(be,D);var ye={},ve=null;function we(){return ve=ve||new ne}function Ne(e){D.call(this,ye.La,e)}function je(e){const t=we();re(t,new Ne(t))}function Ce(e,t){D.call(this,ye.STAT_EVENT,e),this.stat=t}function Be(e){const t=we();re(t,new Ce(t,e))}function Se(e,t){D.call(this,ye.Ma,e),this.size=t}function Ee(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Fe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<s.length;i++)s[i]=""}}}return Ae(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ye.La="serverreachability",A(Ne,D),ye.STAT_EVENT="statevent",A(Ce,D),ye.Ma="timingevent",A(Se,D),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var Ie,Te={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function _e(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}A(Le,me),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},Ie=new Le;var Ue={},Oe={};function Qe(e,t,n){e.L=1,e.v=At(it(t)),e.m=n,e.P=!0,Re(e,null)}function Re(e,t){e.F=Date.now(),Ve(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var a=0;a<s.length;a++){var i=q(n,s[a],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),je(),function(e,t,n,r,s,a){e.info(function(){if(e.g)if(a)for(var i="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var d=c[0];c=c[1];var A=d.split("_");i=2<=A.length&&"type"==A[1]?i+(d+"=")+c+"&":i+(d+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i})}(e.i,e.u,e.A,e.l,e.R,e.m)}function He(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Oe:(n=Number(t.substring(n,r)),isNaN(n)?Ue:(r+=1)+n>t.length?Oe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,ze(e,e.I)}function ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ee(c(e.ba,e),t)}function Ke(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||on(e.j,e)}function Ge(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,de(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Lu){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}nn(n),Be(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ee(c(n.Za,n),6e3));if(1>=Ze(n.h)&&n.ca){try{n.ca()}catch(Lu){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const d=c[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const A=e.g;if(A){const e=A.g?A.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(et(a,a.h),a.h=null))}if(r.D){const e=A.g?A.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,dt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=An(r,r.J?r.ia:null,r.W),i.K){tt(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(Ke(o),Ve(o)),r.g=i}else tn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Wt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}je()}catch(Lu){}}_e.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==zt(e)?t.j():this.Y(e)},_e.prototype.Y=function(e){try{if(e==this.g)e:{const u=zt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>u)&&(3!=u||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=u||7==t||je(),Ke(this);var n=this.g.Z();this.X=n;t:if(He(this)){var r=Kt(this.g);e="";var a=r.length,i=4==zt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,a,i){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i})}(this.i,this.u,this.A,this.l,this.R,u,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var d=l;break t}}d=null}if(!(n=d)){this.o=!1,this.s=3,Be(12),Ge(this),qe(this);break e}Fe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Me(this,o),e==Oe){4==u&&(this.s=4,Be(14),n=!1),Fe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ue){this.s=4,Be(15),Fe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Fe(this.i,this.l,e,null),We(this,e)}if(He(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=o.length||this.h.h||(this.s=1,Be(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var A=this.j;A.g==this&&A.ba&&!A.M&&(A.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),rn(A),A.M=!0,Be(11))}}else Fe(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Fe(this.i,this.l,o,null),We(this,o);4==u&&Ge(this),this.o&&!this.J&&(4==u?on(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=zt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=w(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),Ge(this),qe(this)}}}catch(qu){}},_e.prototype.cancel=function(){this.J=!0,Ge(this)},_e.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(je(),Be(17)),Ge(this),this.s=2,qe(this)):ze(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return u(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(a(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof at){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new yt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),lt(this,t[4]),this.l=ut(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new yt(null,this.h))}function it(e){return new at(e)}function ot(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof yt?(e.i=t,function(e,t){t&&!e.j&&(vt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),jt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,xt)),e.i=new yt(t,e.h))}function dt(e,t,n){e.i.set(t,n)}function At(e){return dt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}at.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:ft,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,bt)),e.join("")};var pt=/[#\/\?@]/g,ft=/[#\?:]/g,gt=/[#\?]/g,xt=/[#\?@]/g,bt=/#/g;function yt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var a=e[n].substring(0,r);s=e[n].substring(r+1)}else a=e[n];t(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wt(e,t){vt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nt(e,t){return vt(e),t=Ct(e,t),e.g.has(t)}function jt(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),u(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Bt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Vu){}}function St(){this.g=new he}function Et(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;i(e)&&(s=Ae(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Tu){throw t.push(r+"type="+encodeURIComponent("_badmap")),Tu}}function kt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ft(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return x(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function _t(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):dt(e,t,n))}function Pt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=yt.prototype).add=function(e,t){vt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){vt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){vt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){vt(this);let t=[];if("string"===typeof e)Nt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return vt(this),this.i=null,Nt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},A(kt,me),kt.prototype.g=function(){return new Ft(this.l,this.j)},kt.prototype.i=function(e){return function(){return e}}({}),A(Ft,ne),(e=Ft.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):Dt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Qa=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ft.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),A(Pt,ne);var Ut=/^https?$/i,Ot=["POST","PUT"];function Qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Rt(e),Mt(e)}function Rt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ht(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=zt(e)||2!=e.Z()))if(e.u&&4==zt(e))ae(e.Ea,0,e);else if(re(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var i=String(e.D).match(st)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),a=!Ut.test(i?i.toLowerCase():"")}n=a}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<zt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Rt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){Vt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Tu){}}}function Vt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function zt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function qt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qt("baseRetryDelayMs",5e3,e),this.cb=qt("retryDelaySeedMs",1e4,e),this.Wa=qt("forwardChannelMaxRetries",2,e),this.wa=qt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new St,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Wt(e){if(Xt(e),3==e.G){var t=e.U++,n=it(e.I);if(dt(n,"SID",e.K),dt(n,"RID",t),dt(n,"TYPE","terminate"),$t(e,n),(t=new _e(e,e.j,t)).L=2,t.v=At(it(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(Mu){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}dn(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;S||F(),E||(S(),E=!0),k.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);dt(r,"SID",e.K),dt(r,"RID",n),dt(r,"AID",e.T),$t(e,r),e.m&&e.o&&_t(r,e.m,e.o),n=new _e(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Qe(n,r,t)}function $t(e,t){e.H&&x(e.H,function(e,n){dt(t,n,e)}),e.l&&rt({},function(e,n){dt(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let i=0;i<n;i++){let n=s[i].g;const o=s[i].map;if(n-=t,0>n)t=Math.max(0,s[i].g-100),a=!1;else try{Et(o,e,"req"+n+"_")}catch(qu){r&&r(o)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;S||F(),E||(S(),E=!0),k.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ee(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new _e(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);dt(t,"RID","rpc"),dt(t,"SID",e.K),dt(t,"AID",e.T),dt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&dt(t,"TO",e.ja),dt(t,"TYPE","xmlhttp"),$t(e,t),e.m&&e.o&&_t(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=At(it(t)),n.m=null,n.P=!0,Re(n,e)}function an(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=we(),new Se(r,n)),Jt(e)}else tn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ee(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new at(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),At(r),t?function(e,t){const n=new ke;if(s.Image){const r=new Image;r.onload=d(Bt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=d(Bt,n,"TestLoadImage: error",!1,t,r),r.onabort=d(Bt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(Bt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),Bt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Bt(0,0,!0,t):Bt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Bt(0,0,!1,t)})}(r.toString(),n)}else Be(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(h(e.ka,t),h(e.ka,e.i),e.h.i.length=0,u(e.i),e.i.length=0),e.l.ra()}}function An(e,t,n){var r=n instanceof at?it(n):new at(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var a=s.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new at(null);r&&ot(i,r),t&&(i.g=t),a&&lt(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&dt(r,n,t),dt(r,"VER",e.la),$t(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Pt(new kt({eb:n})):new Pt(e.pa)).Ha(e.J),t}function hn(){}function mn(){}function pn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function fn(e){xe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){be.call(this),this.status=1}function xn(e){this.g=e}(e=Pt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?pe(this.o):pe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Vu){return void Qt(this,Vu)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ot,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,i]of n)this.g.setRequestHeader(s,i);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Vu){Qt(this,Vu)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},e.bb=function(){Ht(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch(_u){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(_u){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=An(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new _e(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),v(a,this.S)):a=this.S),null!==this.m||this.O||(s.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,s,t),dt(n=it(this.I),"RID",e),dt(n,"CVER",22),this.D&&dt(n,"X-HTTP-Session-Id",this.D),$t(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(Lt(a)))+"&"+t:this.m&&_t(n,this.m,a)),et(this.h,s),this.Ua&&dt(n,"TYPE","init"),this.P?(dt(n,"$req",t),dt(n,"SID","null"),s.T=!0,Qe(s,n,null)):Qe(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ee(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Be(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new pn(e,t)},A(pn,ne),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wt(this.g)},pn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=Ae(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wt(this.g),delete this.g,pn.aa.N.call(this)},A(fn,xe),A(gn,be),A(xn,hn),xn.prototype.ua=function(){re(this.g,"a")},xn.prototype.ta=function(e){re(this.g,new fn(e))},xn.prototype.sa=function(e){re(this.g,new gn)},xn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Js=$s.createWebChannelTransport=function(){return new mn},Xs=$s.getStatEventTarget=function(){return we()},Ys=$s.Event=ye,Ws=$s.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Gs=$s.ErrorCode=Te,De.COMPLETE="complete",qs=$s.EventType=De,fe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ks=$s.WebChannel=fe,$s.FetchXmlHttpFactory=kt,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,zs=$s.XhrIo=Pt}).apply("undefined"!==typeof Zs?Zs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ea="@firebase/firestore",ta="4.8.0";class na{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}na.UNAUTHENTICATED=new na(null),na.GOOGLE_CREDENTIALS=new na("google-credentials-uid"),na.FIRST_PARTY=new na("first-party-uid"),na.MOCK_USER=new na("mock-user");let ra="11.10.0";const sa=new G("@firebase/firestore");function aa(){return sa.logLevel}function ia(e){if(sa.logLevel<=M.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ca);sa.debug("Firestore (".concat(ra,"): ").concat(e),...s)}}function oa(e){if(sa.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ca);sa.error("Firestore (".concat(ra,"): ").concat(e),...s)}}function la(e){if(sa.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ca);sa.warn("Firestore (".concat(ra,"): ").concat(e),...s)}}function ca(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Du){return e}}function da(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Aa(e,r,n)}function Aa(e,t,n){let r="FIRESTORE (".concat(ra,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw oa(r),new Error(r)}function ua(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Aa(t,s,r)}function ha(e,t){return e}const ma={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pa extends C{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class fa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ga{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(na.UNAUTHENTICATED))}shutdown(){}}class ba{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ya{constructor(e){this.t=e,this.currentUser=na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ua(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fa,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},i=e=>{ia("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>i(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(ia("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fa)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ia("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ua("string"==typeof t.accessToken,31837,{l:t}),new ga(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ua(null===e||"string"==typeof e,2055,{h:e}),new na(e)}}class va{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=na.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new va(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(na.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Na{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ja{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Je(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ua(void 0===this.o,3512);const n=e=>{null!=e.error&&ia("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ia("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ia("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ia("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Na(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ua("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Na(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ca(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Ba(){return new TextEncoder}class Sa{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ca(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ea(e,t){return e<t?-1:e>t?1:0}function ka(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Ea(r,s);{const a=Ba(),i=Ia(a.encode(Fa(e,n)),a.encode(Fa(t,n)));return 0!==i?i:Ea(r,s)}}n+=r>65535?2:1}return Ea(e.length,t.length)}function Fa(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Ia(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ea(e[n],t[n]);return Ea(e.length,t.length)}function Ta(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Da="__name__";class La{constructor(e,t,n){void 0===t?t=0:t>e.length&&da(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&da(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===La.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=La.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ea(e.length,t.length)}static compareSegments(e,t){const n=La.isNumericId(e),r=La.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?La.extractNumericId(e).compare(La.extractNumericId(t)):ka(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class _a extends La{construct(e,t,n){return new _a(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new pa(ma.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new _a(e)}static emptyPath(){return new _a([])}}const Pa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ua extends La{construct(e,t,n){return new Ua(e,t,n)}static isValidIdentifier(e){return Pa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ua.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Da}static keyField(){return new Ua([Da])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new pa(ma.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new pa(ma.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new pa(ma.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new pa(ma.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ua(t)}static emptyPath(){return new Ua([])}}class Oa{constructor(e){this.path=e}static fromPath(e){return new Oa(_a.fromString(e))}static fromName(e){return new Oa(_a.fromString(e).popFirst(5))}static empty(){return new Oa(_a.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_a.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _a.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oa(new _a(e.slice()))}}function Qa(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ra(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":da(12329,{type:typeof e})}function Ha(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new pa(ma.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ra(e);throw new pa(ma.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ma(e,t){const n={typeString:e};return t&&(n.value=t),n}function Va(e,t){if(!Qa(e))throw new pa(ma.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const i=e[r];if(s&&typeof i!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==a&&i!==a.value){n="Expected '".concat(r,"' field to equal '").concat(a.value,"'");break}}if(n)throw new pa(ma.INVALID_ARGUMENT,n);return!0}const za=-62135596800,Ka=1e6;class qa{static now(){return qa.fromMillis(Date.now())}static fromDate(e){return qa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ka);return new qa(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pa(ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pa(ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<za)throw new pa(ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pa(ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ka}_compareTo(e){return this.seconds===e.seconds?Ea(this.nanoseconds,e.nanoseconds):Ea(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Va(e,qa._jsonSchema))return new qa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-za;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qa._jsonSchemaVersion="firestore/timestamp/1.0",qa._jsonSchema={type:Ma("string",qa._jsonSchemaVersion),seconds:Ma("number"),nanoseconds:Ma("number")};class Ga{static fromTimestamp(e){return new Ga(e)}static min(){return new Ga(new qa(0,0))}static max(){return new Ga(new qa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Wa=-1;class Ya{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ya.UNKNOWN_ID=-1;function Xa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Ga.fromTimestamp(1e9===r?new qa(n+1,0):new qa(n,r));return new Za(s,Oa.empty(),t)}function Ja(e){return new Za(e.readTime,e.key,Wa)}class Za{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Za(Ga.min(),Oa.empty(),Wa)}static max(){return new Za(Ga.max(),Oa.empty(),Wa)}}function $a(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Oa.comparator(e.documentKey,t.documentKey),0!==n?n:Ea(e.largestBatchId,t.largestBatchId))}class ei{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ti{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&da(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ti((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ti?t:ti.resolve(t)}catch(e){return ti.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ti.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ti.reject(t)}static resolve(e){return new ti((t,n)=>{t(e)})}static reject(e){return new ti((t,n)=>{n(e)})}static waitFor(e){return new ti((t,n)=>{let r=0,s=0,a=!1;e.forEach(e=>{++r,e.next(()=>{++s,a&&s===r&&t()},e=>n(e))}),a=!0,s===r&&t()})}static or(e){let t=ti.resolve(!1);for(const n of e)t=t.next(e=>e?ti.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ti((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{a[l]=e,++i,i===s&&n(a)},e=>r(e))}})}static doWhile(e,t){return new ti((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ni(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ri(e){return"IndexedDbTransactionError"===e.name}class si{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}si.ue=-1;const ai=-1;function ii(e){return null==e}function oi(e){return 0===e&&1/e==-1/0}const li="remoteDocuments",ci="owner",di="mutationQueues",Ai="mutations";const ui="documentMutations",hi="remoteDocumentsV14",mi="remoteDocumentGlobal",pi="targets",fi="targetDocuments",gi="targetGlobal",xi="collectionParents",bi="clientMetadata",yi="bundles",vi="namedQueries",wi="indexConfiguration",Ni="indexState",ji="indexEntries",Ci="documentOverlays",Bi="globals",Si=[di,Ai,ui,li,pi,ci,gi,fi,bi,mi,xi,yi,vi],Ei=[di,Ai,ui,hi,pi,ci,gi,fi,bi,mi,xi,yi,vi,Ci],ki=Ei,Fi=[...ki,wi,Ni,ji];function Ii(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ti(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Di(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Li{constructor(e,t){this.comparator=e,this.root=t||Pi.EMPTY}insert(e,t){return new Li(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(e){return new Li(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _i(this.root,e,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _i(this.root,e,this.comparator,!0)}}class _i{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pi{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Pi.RED,this.left=null!=r?r:Pi.EMPTY,this.right=null!=s?s:Pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Pi(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Pi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw da(43730,{key:this.key,value:this.value});if(this.right.isRed())throw da(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw da(27949);return e+(this.isRed()?0:1)}}Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1,Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw da(57766)}get value(){throw da(16141)}get color(){throw da(16727)}get left(){throw da(29726)}get right(){throw da(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ui{constructor(e){this.comparator=e,this.data=new Li(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Oi(this.data.getIterator())}getIteratorFrom(e){return new Oi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ui))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ui(this.comparator);return t.data=e,t}}class Oi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Qi{constructor(e){this.fields=e,e.sort(Ua.comparator)}static empty(){return new Qi([])}unionWith(e){let t=new Ui(Ua.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ri extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ri("Invalid base64 string: "+e):e}}(e);return new Hi(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ea(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hi.EMPTY_BYTE_STRING=new Hi("");const Mi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(e){if(ua(!!e,39018),"string"==typeof e){let t=0;const n=Mi.exec(e);if(ua(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:zi(e.seconds),nanos:zi(e.nanos)}}function zi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ki(e){return"string"==typeof e?Hi.fromBase64String(e):Hi.fromUint8Array(e)}const qi="server_timestamp",Gi="__type__",Wi="__previous_value__",Yi="__local_write_time__";function Xi(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Gi])||void 0===n?void 0:n.stringValue)===qi}function Ji(e){const t=e.mapValue.fields[Wi];return Xi(t)?Ji(t):t}function Zi(e){const t=Vi(e.mapValue.fields[Yi].timestampValue);return new qa(t.seconds,t.nanos)}const $i="(default)";class eo{constructor(e,t){this.projectId=e,this.database=t||$i}static empty(){return new eo("","")}get isDefaultDatabase(){return this.database===$i}isEqual(e){return e instanceof eo&&e.projectId===this.projectId&&e.database===this.database}}const to="__type__",no="__max__",ro={mapValue:{fields:{__type__:{stringValue:no}}}},so="__vector__",ao="value";function io(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xi(e)?4:yo(e)?9007199254740991:xo(e)?10:11:da(28295,{value:e})}function oo(e,t){if(e===t)return!0;const n=io(e);if(n!==io(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zi(e).isEqual(Zi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Vi(e.timestampValue),r=Vi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ki(e.bytesValue).isEqual(Ki(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zi(e.geoPointValue.latitude)===zi(t.geoPointValue.latitude)&&zi(e.geoPointValue.longitude)===zi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zi(e.integerValue)===zi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=zi(e.doubleValue),r=zi(t.doubleValue);return n===r?oi(n)===oi(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ta(e.arrayValue.values||[],t.arrayValue.values||[],oo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ii(n)!==Ii(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!oo(n[s],r[s])))return!1;return!0}(e,t);default:return da(52216,{left:e})}}function lo(e,t){return void 0!==(e.values||[]).find(e=>oo(e,t))}function co(e,t){if(e===t)return 0;const n=io(e),r=io(t);if(n!==r)return Ea(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ea(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=zi(e.integerValue||e.doubleValue),r=zi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ao(e.timestampValue,t.timestampValue);case 4:return Ao(Zi(e),Zi(t));case 5:return ka(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ki(e),r=Ki(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Ea(n[s],r[s]);if(0!==e)return e}return Ea(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ea(zi(e.latitude),zi(t.latitude));return 0!==n?n:Ea(zi(e.longitude),zi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return uo(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i[ao])||void 0===n?void 0:n.arrayValue,c=null===(r=o[ao])||void 0===r?void 0:r.arrayValue,d=Ea((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==d?d:uo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ro.mapValue&&t===ro.mapValue)return 0;if(e===ro.mapValue)return 1;if(t===ro.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=ka(r[i],a[i]);if(0!==e)return e;const t=co(n[r[i]],s[a[i]]);if(0!==t)return t}return Ea(r.length,a.length)}(e.mapValue,t.mapValue);default:throw da(23264,{le:n})}}function Ao(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ea(e,t);const n=Vi(e),r=Vi(t),s=Ea(n.seconds,r.seconds);return 0!==s?s:Ea(n.nanos,r.nanos)}function uo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=co(n[s],r[s]);if(e)return e}return Ea(n.length,r.length)}function ho(e){return mo(e)}function mo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Vi(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ki(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Oa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(mo(e.fields[s]));return n+"}"}(e.mapValue):da(61005,{value:e})}function po(e){return!!e&&"integerValue"in e}function fo(e){return!!e&&"arrayValue"in e}function go(e){return!!e&&"mapValue"in e}function xo(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[to])||void 0===n?void 0:n.stringValue)===so}function bo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ti(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=bo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yo(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===no}class vo{constructor(e){this.value=e}static empty(){return new vo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!go(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bo(t)}setAll(e){let t=Ua.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=bo(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());go(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];go(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ti(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new vo(bo(this.value))}}class wo{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new wo(e,0,Ga.min(),Ga.min(),Ga.min(),vo.empty(),0)}static newFoundDocument(e,t,n,r){return new wo(e,1,t,Ga.min(),n,r,0)}static newNoDocument(e,t){return new wo(e,2,t,Ga.min(),Ga.min(),vo.empty(),0)}static newUnknownDocument(e,t){return new wo(e,3,t,Ga.min(),Ga.min(),vo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ga.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ga.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class No{constructor(e,t){this.position=e,this.inclusive=t}}function jo(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?Oa.comparator(Oa.fromName(i.referenceValue),n.key):co(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Co(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!oo(e.position[n],t.position[n]))return!1;return!0}class Bo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function So(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Eo{}class ko extends Eo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Uo(e,t,n):"array-contains"===t?new Ho(e,n):"in"===t?new Mo(e,n):"not-in"===t?new Vo(e,n):"array-contains-any"===t?new zo(e,n):new ko(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Oo(e,n):new Qo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(co(t,this.value)):null!==t&&io(this.value)===io(t)&&this.matchesComparison(co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return da(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fo extends Eo{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Fo(e,t)}matches(e){return Io(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Io(e){return"and"===e.op}function To(e){return Do(e)&&Io(e)}function Do(e){for(const t of e.filters)if(t instanceof Fo)return!1;return!0}function Lo(e){if(e instanceof ko)return e.field.canonicalString()+e.op.toString()+ho(e.value);if(To(e))return e.filters.map(e=>Lo(e)).join(",");{const t=e.filters.map(e=>Lo(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function _o(e,t){return e instanceof ko?function(e,t){return t instanceof ko&&e.op===t.op&&e.field.isEqual(t.field)&&oo(e.value,t.value)}(e,t):e instanceof Fo?function(e,t){return t instanceof Fo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&_o(n,t.filters[r]),!0)}(e,t):void da(19439)}function Po(e){return e instanceof ko?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ho(e.value))}(e):e instanceof Fo?function(e){return e.op.toString()+" {"+e.getFilters().map(Po).join(" ,")+"}"}(e):"Filter"}class Uo extends ko{constructor(e,t,n){super(e,t,n),this.key=Oa.fromName(n.referenceValue)}matches(e){const t=Oa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oo extends ko{constructor(e,t){super(e,"in",t),this.keys=Ro("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qo extends ko{constructor(e,t){super(e,"not-in",t),this.keys=Ro("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ro(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Oa.fromName(e.referenceValue))}class Ho extends ko{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fo(t)&&lo(t.arrayValue,this.value)}}class Mo extends ko{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lo(this.value.arrayValue,t)}}class Vo extends ko{constructor(e,t){super(e,"not-in",t)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!lo(this.value.arrayValue,t)}}class zo extends ko{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>lo(this.value.arrayValue,e))}}class Ko{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.Pe=null}}function qo(e){return new Ko(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Go(e){const t=ha(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ii(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ho(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ho(e)).join(",")),t.Pe=e}return t.Pe}function Wo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!So(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_o(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Co(e.startAt,t.startAt)&&Co(e.endAt,t.endAt)}class Yo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Xo(e,t,n,r,s,a,i,o){return new Yo(e,t,n,r,s,a,i,o)}function Jo(e){return new Yo(e)}function Zo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $o(e){return null!==e.collectionGroup}function el(e){const t=ha(e);if(null===t.Te){t.Te=[];const e=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ui(Ua.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new Bo(r,n))}),e.has(Ua.keyField().canonicalString())||t.Te.push(new Bo(Ua.keyField(),n))}return t.Te}function tl(e){const t=ha(e);return t.Ie||(t.Ie=nl(t,el(e))),t.Ie}function nl(e,t){if("F"===e.limitType)return qo(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Bo(e.field,t)});const n=e.endAt?new No(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new No(e.startAt.position,e.startAt.inclusive):null;return qo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function rl(e,t,n){return new Yo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function sl(e,t){return Wo(tl(e),tl(t))&&e.limitType===t.limitType}function al(e){return"".concat(Go(tl(e)),"|lt:").concat(e.limitType)}function il(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Po(e)).join(", "),"]")),ii(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ho(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ho(e)).join(",")),"Target(".concat(t,")")}(tl(e)),"; limitType=").concat(e.limitType,")")}function ol(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of el(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=jo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,el(e),t))&&!(e.endAt&&!function(e,t,n){const r=jo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,el(e),t))}(e,t)}function ll(e){return(t,n)=>{let r=!1;for(const s of el(e)){const e=cl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function cl(e,t,n){const r=e.field.isKeyField()?Oa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?co(r,s):da(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return da(19790,{direction:e.dir})}}class dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Di(this.inner)}size(){return this.innerSize}}const Al=new Li(Oa.comparator);function ul(){return Al}const hl=new Li(Oa.comparator);function ml(){let e=hl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function pl(e){let t=hl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function fl(){return xl()}function gl(){return xl()}function xl(){return new dl(e=>e.toString(),(e,t)=>e.isEqual(t))}new Li(Oa.comparator);const bl=new Ui(Oa.comparator);function yl(){let e=bl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const vl=new Ui(Ea);function wl(){return vl}function Nl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oi(t)?"-0":t}}function jl(e){return{integerValue:""+e}}class Cl{constructor(){this._=void 0}}function Bl(e,t,n){return e instanceof kl?function(e,t){const n={fields:{[Gi]:{stringValue:qi},[Yi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xi(t)&&(t=Ji(t)),t&&(n.fields[Wi]=t),{mapValue:n}}(n,t):e instanceof Fl?Il(e,t):e instanceof Tl?Dl(e,t):function(e,t){const n=El(e,t),r=_l(n)+_l(e.Ee);return po(n)&&po(e.Ee)?jl(r):Nl(e.serializer,r)}(e,t)}function Sl(e,t,n){return e instanceof Fl?Il(e,t):e instanceof Tl?Dl(e,t):n}function El(e,t){return e instanceof Ll?function(e){return po(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class kl extends Cl{}class Fl extends Cl{constructor(e){super(),this.elements=e}}function Il(e,t){const n=Pl(t);for(const r of e.elements)n.some(e=>oo(e,r))||n.push(r);return{arrayValue:{values:n}}}class Tl extends Cl{constructor(e){super(),this.elements=e}}function Dl(e,t){let n=Pl(t);for(const r of e.elements)n=n.filter(e=>!oo(e,r));return{arrayValue:{values:n}}}class Ll extends Cl{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function _l(e){return zi(e.integerValue||e.doubleValue)}function Pl(e){return fo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ul{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ul}static exists(e){return new Ul(void 0,e)}static updateTime(e){return new Ul(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ol(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ql{}function Rl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yl(e.key,Ul.none()):new zl(e.key,e.data,Ul.none());{const n=e.data,r=vo.empty();let s=new Ui(Ua.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Kl(e.key,r,new Qi(s.toArray()),Ul.none())}}function Hl(e,t,n){e instanceof zl?function(e,t,n){const r=e.value.clone(),s=Gl(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kl?function(e,t,n){if(!Ol(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gl(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(ql(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ml(e,t,n,r){return e instanceof zl?function(e,t,n,r){if(!Ol(e.precondition,t))return n;const s=e.value.clone(),a=Wl(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kl?function(e,t,n,r){if(!Ol(e.precondition,t))return n;const s=Wl(e.fieldTransforms,r,t),a=t.data;return a.setAll(ql(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ol(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ta(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fl&&t instanceof Fl||e instanceof Tl&&t instanceof Tl?Ta(e.elements,t.elements,oo):e instanceof Ll&&t instanceof Ll?oo(e.Ee,t.Ee):e instanceof kl&&t instanceof kl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zl extends Ql{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kl extends Ql{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ql(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Gl(e,t,n){const r=new Map;ua(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,Sl(i,o,n[s]))}return r}function Wl(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,Bl(e,a,t))}return r}class Yl extends Ql{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Hl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ml(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ml(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gl();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=Rl(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Ga.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yl())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,(e,t)=>Vl(e,t))&&Ta(this.baseMutations,e.baseMutations,(e,t)=>Vl(e,t))}}class Jl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var Zl,$l;function ec(e){if(void 0===e)return oa("GRPC error has no .code"),ma.UNKNOWN;switch(e){case Zl.OK:return ma.OK;case Zl.CANCELLED:return ma.CANCELLED;case Zl.UNKNOWN:return ma.UNKNOWN;case Zl.DEADLINE_EXCEEDED:return ma.DEADLINE_EXCEEDED;case Zl.RESOURCE_EXHAUSTED:return ma.RESOURCE_EXHAUSTED;case Zl.INTERNAL:return ma.INTERNAL;case Zl.UNAVAILABLE:return ma.UNAVAILABLE;case Zl.UNAUTHENTICATED:return ma.UNAUTHENTICATED;case Zl.INVALID_ARGUMENT:return ma.INVALID_ARGUMENT;case Zl.NOT_FOUND:return ma.NOT_FOUND;case Zl.ALREADY_EXISTS:return ma.ALREADY_EXISTS;case Zl.PERMISSION_DENIED:return ma.PERMISSION_DENIED;case Zl.FAILED_PRECONDITION:return ma.FAILED_PRECONDITION;case Zl.ABORTED:return ma.ABORTED;case Zl.OUT_OF_RANGE:return ma.OUT_OF_RANGE;case Zl.UNIMPLEMENTED:return ma.UNIMPLEMENTED;case Zl.DATA_LOSS:return ma.DATA_LOSS;default:return da(39323,{code:e})}}($l=Zl||(Zl={}))[$l.OK=0]="OK",$l[$l.CANCELLED=1]="CANCELLED",$l[$l.UNKNOWN=2]="UNKNOWN",$l[$l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$l[$l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$l[$l.NOT_FOUND=5]="NOT_FOUND",$l[$l.ALREADY_EXISTS=6]="ALREADY_EXISTS",$l[$l.PERMISSION_DENIED=7]="PERMISSION_DENIED",$l[$l.UNAUTHENTICATED=16]="UNAUTHENTICATED",$l[$l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$l[$l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$l[$l.ABORTED=10]="ABORTED",$l[$l.OUT_OF_RANGE=11]="OUT_OF_RANGE",$l[$l.UNIMPLEMENTED=12]="UNIMPLEMENTED",$l[$l.INTERNAL=13]="INTERNAL",$l[$l.UNAVAILABLE=14]="UNAVAILABLE",$l[$l.DATA_LOSS=15]="DATA_LOSS";new Hs([4294967295,4294967295],0);Error;class tc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nc(e){return ua(!!e,49232),Ga.fromTimestamp(function(e){const t=Vi(e);return new qa(t.seconds,t.nanos)}(e))}function rc(e,t){const n=function(e){return new _a(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function sc(e){const t=_a.fromString(e);return ua(dc(t),10190,{key:t.toString()}),t}function ac(e){const t=sc(e);return 4===t.length?_a.emptyPath():ic(t)}function ic(e){return ua(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function oc(e){let t=ac(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ua(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=lc(e);return t instanceof Fo&&To(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map(e=>function(e){return new Bo(cc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ii(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new No(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new No(n,t)}(n.endAt)),Xo(t,s,i,a,o,"F",l,c)}function lc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cc(e.unaryFilter.field);return ko.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cc(e.unaryFilter.field);return ko.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cc(e.unaryFilter.field);return ko.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cc(e.unaryFilter.field);return ko.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return da(61313);default:return da(60726)}}(e):void 0!==e.fieldFilter?function(e){return ko.create(cc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return da(58110);default:return da(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Fo.create(e.compositeFilter.filters.map(e=>lc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return da(1026)}}(e.compositeFilter.op))}(e):da(30097,{filter:e})}function cc(e){return Ua.fromServerFormat(e.fieldPath)}function dc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ac{constructor(e){this.gt=e}}function uc(e){const t=oc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rl(t,t.limit,"L"):t}class hc{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(zi(e.integerValue));else if("doubleValue"in e){const n=zi(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),oi(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=Vi(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ki(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?yo(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):xo(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):da(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const r of Object.keys(n))this.xt(r,t),this.Dt(n[r],t)}Lt(e,t){var n,r;const s=e.fields||{};this.Ct(t,53);const a=ao,i=(null===(r=null===(n=s[a].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(zi(i)),this.xt(a,t),this.Dt(s[a],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const r of n)this.Dt(r,t)}Bt(e,t){this.Ct(t,37),Oa.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}hc.Ut=new hc;class mc{constructor(){this.Dn=new pc}addToCollectionParentIndex(e,t){return this.Dn.add(t),ti.resolve()}getCollectionParents(e,t){return ti.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ti.resolve()}deleteFieldIndex(e,t){return ti.resolve()}deleteAllFieldIndexes(e){return ti.resolve()}createTargetIndexes(e,t){return ti.resolve()}getDocumentsMatchingTarget(e,t){return ti.resolve(null)}getIndexType(e,t){return ti.resolve(0)}getFieldIndexes(e,t){return ti.resolve([])}getNextCollectionGroupToUpdate(e){return ti.resolve(null)}getMinOffset(e,t){return ti.resolve(Za.min())}getMinOffsetFromCollectionGroup(e,t){return ti.resolve(Za.min())}updateCollectionGroup(e,t,n){return ti.resolve()}updateIndexEntries(e,t){return ti.resolve()}}class pc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ui(_a.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ui(_a.comparator)).toArray()}}new Uint8Array(0);const fc=41943040;class gc{static withCacheSize(e){return new gc(e,gc.DEFAULT_COLLECTION_PERCENTILE,gc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}gc.DEFAULT_COLLECTION_PERCENTILE=10,gc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gc.DEFAULT=new gc(fc,gc.DEFAULT_COLLECTION_PERCENTILE,gc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gc.DISABLED=new gc(-1,0,0);class xc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new xc(0)}static ur(){return new xc(-1)}}const bc=1048576;class yc{constructor(){this.changes=new dl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ti.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ml(n.mutation,e,Qi.empty(),qa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl();const r=fl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ml();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=fl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=ul();const a=xl(),i=xl();return t.forEach((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof Kl)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),Ml(i.mutation,t,i.mutation.getFieldMask(),qa.now())):a.set(t.key,Qi.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>{var n;return i.set(e,new vc(t,null!==(n=a.get(e))&&void 0!==n?n:null))}),i))}recalculateAndSaveOverlays(e,t){const n=xl();let r=new Li((e,t)=>e-t),s=yl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||Qi.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||yl()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=gl();l.forEach(e=>{if(!s.has(e)){const r=Rl(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ti.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Oa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$o(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ti.resolve(fl());let i=Wa,o=s;return a.next(t=>ti.forEach(t,(t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?ti.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,yl())).next(e=>({batchId:i,changes:pl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oa(t)).next(e=>{let t=ml();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=ml();return this.indexManager.getCollectionParents(e,s).next(i=>ti.forEach(i,i=>{const o=function(e,t){return new Yo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,wo.newInvalidDocument(r)))});let n=ml();return e.forEach((e,r)=>{const a=s.get(e);void 0!==a&&Ml(a.mutation,r,Qi.empty(),qa.now()),ol(t,r)&&(n=n.insert(e,r))}),n})}}class Nc{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ti.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:nc(e.createTime)}}(t)),ti.resolve()}getNamedQuery(e,t){return ti.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:uc(e.bundledQuery),readTime:nc(e.readTime)}}(t)),ti.resolve()}}class jc{constructor(){this.overlays=new Li(Oa.comparator),this.kr=new Map}getOverlay(e,t){return ti.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fl();return ti.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.wt(e,t,r)}),ti.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.kr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),ti.resolve()}getOverlaysForCollection(e,t,n){const r=fl(),s=t.length+1,a=new Oa(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ti.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Li((e,t)=>e-t);const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=fl(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=fl(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>i.set(e,t)),!(i.size()>=r)););return ti.resolve(i)}wt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(n.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Jl(t,n));let s=this.kr.get(t);void 0===s&&(s=yl(),this.kr.set(t,s)),this.kr.set(t,s.add(n.key))}}class Cc{constructor(){this.sessionToken=Hi.EMPTY_BYTE_STRING}getSessionToken(e){return ti.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ti.resolve()}}class Bc{constructor(){this.qr=new Ui(Sc.Qr),this.$r=new Ui(Sc.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new Sc(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Sc(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Oa(new _a([])),n=new Sc(t,e),r=new Sc(t,e+1),s=[];return this.$r.forEachInRange([n,r],e=>{this.Wr(e),s.push(e.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Oa(new _a([])),n=new Sc(t,e),r=new Sc(t,e+1);let s=yl();return this.$r.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Sc(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Sc{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Oa.comparator(e.key,t.key)||Ea(e.Hr,t.Hr)}static Ur(e,t){return Ea(e.Hr,t.Hr)||Oa.comparator(e.key,t.key)}}class Ec{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ui(Sc.Qr)}checkEmpty(e){return ti.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Xl(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.Yr=this.Yr.add(new Sc(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return ti.resolve(a)}lookupMutationBatch(e,t){return ti.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),s=r<0?0:r;return ti.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ti.resolve(0===this.mutationQueue.length?ai:this.er-1)}getAllMutationBatches(e){return ti.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Sc(t,0),r=new Sc(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);s.push(t)}),ti.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ui(Ea);return t.forEach(e=>{const t=new Sc(e,0),r=new Sc(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ti.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Oa.isDocumentKey(s)||(s=s.child(""));const a=new Sc(new Oa(s),0);let i=new Ui(Ea);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Hr)),!0)},a),ti.resolve(this.ei(i))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ua(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return ti.forEach(t.mutations,r=>{const s=new Sc(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new Sc(t,0),r=this.Yr.firstAfterOrEqual(n);return ti.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ti.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kc{constructor(e){this.ni=e,this.docs=new Li(Oa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ti.resolve(n?n.document.mutableCopy():wo.newInvalidDocument(t))}getEntries(e,t){let n=ul();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():wo.newInvalidDocument(e))}),ti.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=ul();const a=t.path,i=new Oa(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||$a(Ja(i),n)<=0||(r.has(i.key)||ol(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return ti.resolve(s)}getAllFromCollectionGroup(e,t,n,r){da(9500)}ri(e,t){return ti.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fc(this)}getSize(e){return ti.resolve(this.size)}}class Fc extends yc{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(n)}),ti.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class Ic{constructor(e){this.persistence=e,this.ii=new dl(e=>Go(e),Wo),this.lastRemoteSnapshotVersion=Ga.min(),this.highestTargetId=0,this.si=0,this.oi=new Bc,this.targetCount=0,this._i=xc.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),ti.resolve()}getLastRemoteSnapshotVersion(e){return ti.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ti.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ti.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),ti.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new xc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ti.resolve()}updateTargetData(e,t){return this.hr(t),ti.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ti.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ii.forEach((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.ii.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)}),ti.waitFor(s).next(()=>r)}getTargetCount(e){return ti.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return ti.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),ti.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ti.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ti.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return ti.resolve(n)}containsKey(e,t){return ti.resolve(this.oi.containsKey(t))}}class Tc{constructor(e,t){this.ai={},this.overlays={},this.ui=new si(0),this.ci=!1,this.ci=!0,this.li=new Cc,this.referenceDelegate=e(this),this.hi=new Ic(this),this.indexManager=new mc,this.remoteDocumentCache=function(e){return new kc(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Ac(t),this.Ti=new Nc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new Ec(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){ia("MemoryPersistence","Starting transaction:",e);const r=new Dc(this.ui.next());return this.referenceDelegate.Ii(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ti.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class Dc extends ei{constructor(e){super(),this.currentSequenceNumber=e}}class Lc{constructor(e){this.persistence=e,this.Ai=new Bc,this.Ri=null}static Vi(e){return new Lc(e)}get mi(){if(this.Ri)return this.Ri;throw da(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),ti.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),ti.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ti.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ti.forEach(this.mi,n=>{const r=Oa.fromPath(n);return this.fi(e,r).next(e=>{e||t.removeEntry(r,Ga.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ti.or([()=>ti.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class _c{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=r}static Es(e,t){let n=yl(),r=yl();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new _c(e,t.fromCache,n,r)}}class Pc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Uc{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=N()?8:ni(v())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ps(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ys(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Pc;return this.ws(e,t,n).next(r=>{if(s.result=r,this.Rs)return this.Ss(e,t,n,r.size)})}).next(()=>s.result)}Ss(e,t,n,r){return n.documentReadCount<this.Vs?(aa()<=M.DEBUG&&ia("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ti.resolve()):(aa()<=M.DEBUG&&ia("QueryEngine","Query:",il(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.fs*r?(aa()<=M.DEBUG&&ia("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tl(t))):ti.resolve())}ps(e,t){if(Zo(t))return ti.resolve(null);let n=tl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=rl(t,null,"F"),n=tl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=yl(...r);return this.gs.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const a=this.bs(t,r);return this.Ds(t,a,s,n.readTime)?this.ps(e,rl(t,null,"F")):this.vs(e,a,t,n)}))})))}ys(e,t,n,r){return Zo(t)||r.isEqual(Ga.min())?ti.resolve(null):this.gs.getDocuments(e,n).next(s=>{const a=this.bs(t,s);return this.Ds(t,a,n,r)?ti.resolve(null):(aa()<=M.DEBUG&&ia("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),il(t)),this.vs(e,a,t,Xa(r,Wa)).next(e=>e))})}bs(e,t){let n=new Ui(ll(e));return t.forEach((t,r)=>{ol(e,r)&&(n=n.add(r))}),n}Ds(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ws(e,t,n){return aa()<=M.DEBUG&&ia("QueryEngine","Using full collection scan to execute query:",il(t)),this.gs.getDocumentsMatchingQuery(e,t,Za.min(),n)}vs(e,t,n,r){return this.gs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Oc="LocalStore";class Qc{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Li(Ea),this.Ms=new dl(e=>Go(e),Wo),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wc(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Rc(e,t,n,r){return new Qc(e,t,n,r)}async function Hc(e,t){const n=ha(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],a=[];let i=yl();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next(e=>({Bs:e,removedBatchIds:s,addedBatchIds:a}))})})}class Mc{constructor(){this.activeTargetIds=wl()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vc{constructor(){this.Fo=new Mc,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Mc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zc{xo(e){}shutdown(){}}const Kc="ConnectivityMonitor";class qc{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ia(Kc,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ia(Kc,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gc=null;function Wc(){return null===Gc?Gc=268435456+Math.round(2147483648*Math.random()):Gc++,"0x"+Gc.toString(16)}const Yc="RestConnection",Xc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jc{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.Ko=this.databaseId.database===$i?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,s){const a=Wc(),i=this.Go(e,t.toUriEncodedString());ia(Yc,"Sending RPC '".concat(e,"' ").concat(a,":"),i,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,r,s);const{host:l}=new URL(i),c=f(l);return this.jo(e,i,o,n,c).then(t=>(ia(Yc,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw la(Yc,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",i,"request:",n),t})}Jo(e,t,n,r,s,a){return this.Wo(e,t,n,r,s)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Xc[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class Zc{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const $c="WebChannelConnection";class ed extends Jc{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,r,s){const a=Wc();return new Promise((s,i)=>{const o=new zs;o.setWithCredentials(!0),o.listenOnce(qs.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Gs.NO_ERROR:const t=o.getResponseJson();ia($c,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(t)),s(t);break;case Gs.TIMEOUT:ia($c,"RPC '".concat(e,"' ").concat(a," timed out")),i(new pa(ma.DEADLINE_EXCEEDED,"Request time out"));break;case Gs.HTTP_ERROR:const n=o.getStatus();if(ia($c,"RPC '".concat(e,"' ").concat(a," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ma).indexOf(t)>=0?t:ma.UNKNOWN}(t.status);i(new pa(e,t.message))}else i(new pa(ma.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new pa(ma.UNAVAILABLE,"Connection failed."));break;default:da(9055,{c_:e,streamId:a,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{ia($c,"RPC '".concat(e,"' ").concat(a," completed."))}});const l=JSON.stringify(r);ia($c,"RPC '".concat(e,"' ").concat(a," sending request:"),r),o.send(t,"POST",l,n,15)})}P_(e,t,n){const r=Wc(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Js(),i=Xs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ia($c,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const d=a.createWebChannel(c,o);this.T_(d);let A=!1,u=!1;const h=new Zc({Ho:t=>{u?ia($c,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(A||(ia($c,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),d.open(),A=!0),ia($c,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),d.send(t))},Yo:()=>d.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(d,Ks.EventType.OPEN,()=>{u||(ia($c,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.s_())}),m(d,Ks.EventType.CLOSE,()=>{u||(u=!0,ia($c,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.__(),this.I_(d))}),m(d,Ks.EventType.ERROR,t=>{u||(u=!0,la($c,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),h.__(new pa(ma.UNAVAILABLE,"The operation could not be completed")))}),m(d,Ks.EventType.MESSAGE,t=>{var n;if(!u){const s=t.data[0];ua(!!s,16349);const a=s,i=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){ia($c,"RPC '".concat(e,"' stream ").concat(r," received error:"),i);const t=i.status;let n=function(e){const t=Zl[e];if(void 0!==t)return ec(t)}(t),s=i.message;void 0===n&&(n=ma.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),u=!0,h.__(new pa(n,s)),d.close()}else ia($c,"RPC '".concat(e,"' stream ").concat(r," received:"),s),h.a_(s)}}),m(i,Ys.STAT_EVENT,t=>{t.stat===Ws.PROXY?ia($c,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ws.NOPROXY&&ia($c,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{h.o_()},0),h}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function td(){return"undefined"!=typeof document?document:null}function nd(e){return new tc(e,!0)}class rd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=r,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-n);r>0&&ia("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}class sd{}class ad extends sd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new pa(ma.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,i]=s;return this.connection.Wo(e,rc(t,n),r,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ma.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new pa(ma.UNKNOWN,e.toString())})}Jo(e,t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[i,o]=a;return this.connection.Jo(e,rc(t,n),r,i,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ma.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new pa(ma.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class id{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(oa(t),this._a=!1):ia("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const od="RemoteStore";class ld{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{Ad(this)&&(ia(od,"Restarting streams for network reachability change."),await async function(e){const t=ha(e);t.Ia.add(4),await dd(t),t.Aa.set("Unknown"),t.Ia.delete(4),await cd(t)}(this))})}),this.Aa=new id(n,r)}}async function cd(e){if(Ad(e))for(const t of e.da)await t(!0)}async function dd(e){for(const t of e.da)await t(!1)}function Ad(e){return 0===ha(e).Ia.size}async function ud(e,t){const n=ha(e);t?(n.Ia.delete(2),await cd(n)):t||(n.Ia.add(2),await dd(n),n.Aa.set("Unknown"))}class hd{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new hd(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pa(ma.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class md{constructor(){this.queries=pd(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=ha(e),r=n.queries;n.queries=pd(),r.forEach((e,n)=>{for(const r of n.wa)r.onError(t)})}(this,new pa(ma.ABORTED,"Firestore shutting down"))}}function pd(){return new dl(e=>al(e),sl)}function fd(e){e.Da.forEach(e=>{e.next()})}var gd,xd;(xd=gd||(gd={})).Fa="default",xd.Cache="cache";const bd="SyncEngine";class yd{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new dl(e=>al(e),sl),this.Tu=new Map,this.Iu=new Set,this.du=new Li(Oa.comparator),this.Eu=new Map,this.Au=new Bc,this.Ru={},this.Vu=new Map,this.mu=xc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function vd(e,t,n){const r=ha(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Pu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=ha(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.wa)s.va(t)&&(r=!0)}),r&&fd(n)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wd(e,t,n){const r=ha(e),s=[],a=[],i=[];r.Pu.isEmpty()||(r.Pu.forEach((e,o)=>{i.push(r.gu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=_c.Es(o.targetId,e);a.push(t)}}))}),await Promise.all(i),r.hu.J_(s),await async function(e,t){const n=ha(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ti.forEach(t,t=>ti.forEach(t.Is,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ti.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ri(e))throw e;ia(Oc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Fs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Fs=n.Fs.insert(e,s)}}}(r.localStore,a))}async function Nd(e,t){const n=ha(e);if(!n.currentUser.isEqual(t)){ia(bd,"User change. New user:",t.toKey());const e=await Hc(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new pa(ma.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wd(n,e.Bs)}}class jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Rc(this.persistence,new Uc,e.initialUser,this.serializer)}Du(e){return new Tc(Lc.Vi,this.serializer)}bu(e){return new Vc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jd.provider={build:()=>new jd};class Cd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nd.bind(null,this.syncEngine),await ud(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new md}createDatastore(e){const t=nd(e.databaseInfo.databaseId),n=function(e){return new ed(e)}(e.databaseInfo);return function(e,t,n,r){return new ad(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ld(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>vd(this.syncEngine,e,0),qc.C()?new qc:new zc)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new yd(e,t,n,r,s,a);return i&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ha(e);ia(od,"RemoteStore shutting down."),t.Ia.add(5),await dd(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Cd.provider={build:()=>new Cd};function Bd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Sd=new Map,Ed="firestore.googleapis.com",kd=!0;class Fd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new pa(ma.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ed,this.ssl=kd}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:kd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=fc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<bc)throw new pa(ma.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new pa(ma.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new pa(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new pa(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new pa(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pa(ma.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pa(ma.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xa;switch(e.type){case"firstParty":return new wa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new pa(ma.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sd.get(e);t&&(ia("ComponentProvider","Removing Datastore"),Sd.delete(e),t.terminate())}(this),Promise.resolve()}}function Td(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=Ha(e,Id);const a=f(t),i=e._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);a&&(g("https://".concat(c)),y("Firestore",!0)),i.host!==Ed&&i.host!==c&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},i),{host:c,ssl:a,emulatorOptions:r});if(!E(d,o)&&(e._setSettings(d),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=na.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new pa(ma.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new na(a)}e._authCredentials=new ba(new ga(t,n))}}class Dd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dd(this.firestore,e,this._query)}}class Ld{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _d(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ld(this.firestore,e,this._key)}toJSON(){return{type:Ld._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Va(t,Ld._jsonSchema))return new Ld(e,n||null,new Oa(_a.fromString(t.referencePath)))}}Ld._jsonSchemaVersion="firestore/documentReference/1.0",Ld._jsonSchema={type:Ma("string",Ld._jsonSchemaVersion),referencePath:Ma("string")};class _d extends Dd{constructor(e,t,n){super(e,t,Jo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ld(this.firestore,null,new Oa(e))}withConverter(e){return new _d(this.firestore,e,this._path)}}const Pd="AsyncQueue";class Ud{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new rd(this,"async_queue_retry"),this.oc=()=>{const e=td();e&&ia(Pd,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=td();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=td();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new fa;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(Tu){if(!ri(Tu))throw Tu;ia(Pd,"Operation failed with retryable error: "+Tu)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,oa("INTERNAL UNHANDLED ERROR: ",Od(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=hd.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&da(47125,{hc:Od(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Od(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Qd extends Id{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ud,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ud(e),this._firestoreClient=void 0,await e}}}class Rd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rd(Hi.fromBase64String(e))}catch(e){throw new pa(ma.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Rd(Hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rd._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Va(e,Rd._jsonSchema))return Rd.fromBase64String(e.bytes)}}Rd._jsonSchemaVersion="firestore/bytes/1.0",Rd._jsonSchema={type:Ma("string",Rd._jsonSchemaVersion),bytes:Ma("string")};class Hd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new pa(ma.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ua(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Md{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pa(ma.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pa(ma.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ea(this._lat,e._lat)||Ea(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Md._jsonSchemaVersion}}static fromJSON(e){if(Va(e,Md._jsonSchema))return new Md(e.latitude,e.longitude)}}Md._jsonSchemaVersion="firestore/geoPoint/1.0",Md._jsonSchema={type:Ma("string",Md._jsonSchemaVersion),latitude:Ma("number"),longitude:Ma("number")};class Vd{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Va(e,Vd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Vd(e.vectorValues);throw new pa(ma.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vd._jsonSchemaVersion="firestore/vectorValue/1.0",Vd._jsonSchema={type:Ma("string",Vd._jsonSchemaVersion),vectorValues:Ma("object")};const zd=new RegExp("[~\\*/\\[\\]]");function Kd(e,t,n){if(t.search(zd)>=0)throw qd("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Hd(...t.split("."))._internalPath}catch(r){throw qd("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function qd(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=" in field ".concat(r)),i&&(l+=" in document ".concat(s)),l+=")"),new pa(ma.INVALID_ARGUMENT,o+e+l)}class Gd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ld(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Wd extends Gd{data(){return super.data()}}function Yd(e,t){return"string"==typeof t?Kd(e,t):t instanceof Hd?t._internalPath:t._delegate._internalPath}class Xd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jd extends Gd{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pa(ma.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Jd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Jd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jd._jsonSchema={type:Ma("string",Jd._jsonSchemaVersion),bundleSource:Ma("string","DocumentSnapshot"),bundleName:Ma("string"),bundle:Ma("string")};class Zd extends Jd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class $d{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Zd(this._firestore,this._userDataWriter,n.key,n,new Xd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pa(ma.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Zd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Xd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Zd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:eA(t.type),doc:r,oldIndex:s,newIndex:a}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pa(ma.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$d._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return da(61501,{type:e})}}$d._jsonSchemaVersion="firestore/querySnapshot/1.0",$d._jsonSchema={type:Ma("string",$d._jsonSchemaVersion),bundleSource:Ma("string","QuerySnapshot"),bundleName:Ma("string"),bundle:Ma("string")};new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ra=e}(et),Ye(new P("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const a=e.getProvider("app").getImmediate(),i=new Qd(new ya(e.getProvider("auth-internal")),new ja(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new pa(ma.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eo(e.options.projectId,t)}(a,r),a);return s=Object.assign({useFetchStreams:t},s),i._setSettings(s),i},"PUBLIC").setMultipleInstances(!0)),rt(ea,ta,e),rt(ea,ta,"esm2017")}();const tA=tt({apiKey:"AIzaSyDyMnOeBiZ4maqoCbdTmA66arlCcfmbLuw",authDomain:"realestateapp-ef426.firebaseapp.com",projectId:"realestateapp-ef426",storageBucket:"realestateapp-ef426.firebasestorage.app",messagingSenderId:"868965069507",appId:"1:868965069507:web:c0c354d2addd2218e56876",measurementId:"G-X9MM7BFJME"}),nA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();const t=Xe(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xe(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;yt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ls,persistence:[zr,jr,kr]}),r=m("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Os)return;const r=null===t||void 0===t?void 0:t.token;Qs!==r&&(Qs=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){_(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){_(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const a=u("auth");return a&&Vn(n,"http://".concat(a)),n}(tA),rA=new ir;!function(e,t){const n="object"==typeof e?e:nt(),r="string"==typeof e?e:t||$i,s=Xe(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Td(s,...e)}}(tA);var sA,aA=n(7950),iA=n.t(aA,2);function oA(){return oA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oA.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(sA||(sA={}));const lA="popstate";function cA(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function dA(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Tu){}}}function AA(e,t){return{usr:e.state,key:e.key,idx:t}}function uA(e,t,n,r){return void 0===n&&(n=null),oA({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?mA(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function hA(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function mA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function pA(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o=sA.Pop,l=null,c=d();function d(){return(i.state||{idx:null}).idx}function A(){o=sA.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:h.location,delta:t})}function u(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:hA(e);return n=n.replace(/ $/,"%20"),cA(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,i.replaceState(oA({},i.state,{idx:c}),""));let h={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(lA,A),l=e,()=>{s.removeEventListener(lA,A),l=null}},createHref:e=>t(s,e),createURL:u,encodeLocation(e){let t=u(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=sA.Push;let r=uA(h.location,e,t);n&&n(r,e),c=d()+1;let A=AA(r,c),u=h.createHref(r);try{i.pushState(A,"",u)}catch(m){if(m instanceof DOMException&&"DataCloneError"===m.name)throw m;s.location.assign(u)}a&&l&&l({action:o,location:h.location,delta:1})},replace:function(e,t){o=sA.Replace;let r=uA(h.location,e,t);n&&n(r,e),c=d();let s=AA(r,c),A=h.createHref(r);i.replaceState(s,"",A),a&&l&&l({action:o,location:h.location,delta:0})},go:e=>i.go(e)};return h}var fA;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(fA||(fA={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function gA(e,t,n){return void 0===n&&(n="/"),xA(e,t,n,!1)}function xA(e,t,n,r){let s=TA(("string"===typeof t?mA(t):t).pathname||"/",n);if(null==s)return null;let a=bA(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=IA(s);i=kA(a[o],e,r)}return i}function bA(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(cA(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=UA([r,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(cA(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),bA(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:EA(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of yA(e.path))s(e,t,r);else s(e,t)}),t}function yA(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=yA(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const vA=/^:[\w-]+$/,wA=3,NA=2,jA=1,CA=10,BA=-2,SA=e=>"*"===e;function EA(e,t){let n=e.split("/"),r=n.length;return n.some(SA)&&(r+=BA),t&&(r+=NA),n.filter(e=>!SA(e)).reduce((e,t)=>e+(vA.test(t)?wA:""===t?jA:CA),r)}function kA(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",d=FA({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),A=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=FA({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:UA([a,d.pathname]),pathnameBase:OA(UA([a,d.pathnameBase])),route:A}),"/"!==d.pathnameBase&&(a=UA([a,d.pathnameBase]))}return i}function FA(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);dA("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:i,pattern:e}}function IA(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return dA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function TA(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function DA(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function LA(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function _A(e,t){let n=LA(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function PA(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=mA(e):(s=oA({},e),cA(!s.pathname||!s.pathname.includes("?"),DA("?","pathname","search",s)),cA(!s.pathname||!s.pathname.includes("#"),DA("#","pathname","hash",s)),cA(!s.search||!s.search.includes("#"),DA("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?mA(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:QA(r),hash:RA(s)}}(s,a),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const UA=e=>e.join("/").replace(/\/\/+/g,"/"),OA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QA=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",RA=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function HA(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const MA=["post","put","patch","delete"],VA=(new Set(MA),["get",...MA]);new Set(VA),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function zA(){return zA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zA.apply(this,arguments)}const KA=t.createContext(null);const qA=t.createContext(null);const GA=t.createContext(null);const WA=t.createContext(null);const YA=t.createContext({outlet:null,matches:[],isDataRoute:!1});const XA=t.createContext(null);function JA(){return null!=t.useContext(WA)}function ZA(){return JA()||cA(!1),t.useContext(WA).location}function $A(e){t.useContext(GA).static||t.useLayoutEffect(e)}function eu(){let{isDataRoute:e}=t.useContext(YA);return e?function(){let{router:e}=Au(cu.UseNavigateStable),n=hu(du.UseNavigateStable),r=t.useRef(!1);$A(()=>{r.current=!0});let s=t.useCallback(function(t,s){void 0===s&&(s={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,zA({fromRouteId:n},s)))},[e,n]);return s}():function(){JA()||cA(!1);let e=t.useContext(KA),{basename:n,future:r,navigator:s}=t.useContext(GA),{matches:a}=t.useContext(YA),{pathname:i}=ZA(),o=JSON.stringify(_A(a,r.v7_relativeSplatPath)),l=t.useRef(!1);$A(()=>{l.current=!0});let c=t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void s.go(t);let a=PA(t,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:UA([n,a.pathname])),(r.replace?s.replace:s.push)(a,r.state,r)},[n,s,o,i,e]);return c}()}function tu(){let{matches:e}=t.useContext(YA),n=e[e.length-1];return n?n.params:{}}function nu(e,n){let{relative:r}=void 0===n?{}:n,{future:s}=t.useContext(GA),{matches:a}=t.useContext(YA),{pathname:i}=ZA(),o=JSON.stringify(_A(a,s.v7_relativeSplatPath));return t.useMemo(()=>PA(e,JSON.parse(o),i,"path"===r),[e,o,i,r])}function ru(e,n,r,s){JA()||cA(!1);let{navigator:a}=t.useContext(GA),{matches:i}=t.useContext(YA),o=i[i.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let d,A=ZA();if(n){var u;let e="string"===typeof n?mA(n):n;"/"===c||(null==(u=e.pathname)?void 0:u.startsWith(c))||cA(!1),d=e}else d=A;let h=d.pathname||"/",m=h;if("/"!==c){let e=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=gA(e,{pathname:m});let f=lu(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:UA([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:UA([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,s);return n&&f?t.createElement(WA.Provider,{value:{location:zA({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:sA.Pop}},f):f}function su(){let e=function(){var e;let n=t.useContext(XA),r=uu(du.UseRouteError),s=hu(du.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[s]}(),n=HA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}const au=t.createElement(su,null);class iu extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(YA.Provider,{value:this.props.routeContext},t.createElement(XA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ou(e){let{routeContext:n,match:r,children:s}=e,a=t.useContext(KA);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(YA.Provider,{value:n},s)}function lu(e,n,r,s){var a;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(a=r)?void 0:a.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||cA(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,a)=>{let i,A=!1,u=null,h=null;var m;r&&(i=l&&s.route.id?l[s.route.id]:void 0,u=s.route.errorElement||au,c&&(d<0&&0===a?(m="route-fallback",!1||mu[m]||(mu[m]=!0),A=!0,h=null):d===a&&(A=!0,h=s.route.hydrateFallbackElement||null)));let p=n.concat(o.slice(0,a+1)),f=()=>{let n;return n=i?u:A?h:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(ou,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?t.createElement(iu,{location:r.location,revalidation:r.revalidation,component:u,error:i,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var cu=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cu||{}),du=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(du||{});function Au(e){let n=t.useContext(KA);return n||cA(!1),n}function uu(e){let n=t.useContext(qA);return n||cA(!1),n}function hu(e){let n=function(){let e=t.useContext(YA);return e||cA(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||cA(!1),r.route.id}const mu={};function pu(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function fu(e){let{to:n,replace:r,state:s,relative:a}=e;JA()||cA(!1);let{future:i,static:o}=t.useContext(GA),{matches:l}=t.useContext(YA),{pathname:c}=ZA(),d=eu(),A=PA(n,_A(l,i.v7_relativeSplatPath),c,"path"===a),u=JSON.stringify(A);return t.useEffect(()=>d(JSON.parse(u),{replace:r,state:s,relative:a}),[d,u,a,r,s]),null}function gu(e){cA(!1)}function xu(e){let{basename:n="/",children:r=null,location:s,navigationType:a=sA.Pop,navigator:i,static:o=!1,future:l}=e;JA()&&cA(!1);let c=n.replace(/^\/*/,"/"),d=t.useMemo(()=>({basename:c,navigator:i,static:o,future:zA({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);"string"===typeof s&&(s=mA(s));let{pathname:A="/",search:u="",hash:h="",state:m=null,key:p="default"}=s,f=t.useMemo(()=>{let e=TA(A,c);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:a}},[c,A,u,h,m,p,a]);return null==f?null:t.createElement(GA.Provider,{value:d},t.createElement(WA.Provider,{children:r,value:f}))}function bu(e){let{children:t,location:n}=e;return ru(yu(t),n)}new Promise(()=>{});t.Component;function yu(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let a=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,yu(e.props.children,a));e.type!==gu&&cA(!1),e.props.index&&e.props.children&&cA(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=yu(e.props.children,a)),r.push(i)}),r}function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vu.apply(this,arguments)}function wu(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Nu=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Tu){}new Map;const ju=r.startTransition;iA.flushSync,r.useId;function Cu(e){let{basename:n,children:r,future:s,window:a}=e,i=t.useRef();null==i.current&&(i.current=function(e){return void 0===e&&(e={}),pA(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return uA("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:hA(t)},null,e)}({window:a,v5Compat:!0}));let o=i.current,[l,c]=t.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},A=t.useCallback(e=>{d&&ju?ju(()=>c(e)):c(e)},[c,d]);return t.useLayoutEffect(()=>o.listen(A),[o,A]),t.useEffect(()=>pu(s),[s]),t.createElement(xu,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const Bu="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Su=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eu=t.forwardRef(function(e,n){let r,{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:A,viewTransition:u}=e,h=wu(e,Nu),{basename:m}=t.useContext(GA),p=!1;if("string"===typeof d&&Su.test(d)&&(r=d,Bu))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=TA(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:p=!0}catch(Tu){}let f=function(e,n){let{relative:r}=void 0===n?{}:n;JA()||cA(!1);let{basename:s,navigator:a}=t.useContext(GA),{hash:i,pathname:o,search:l}=nu(e,{relative:r}),c=o;return"/"!==s&&(c="/"===o?s:UA([s,o])),a.createHref({pathname:c,search:l,hash:i})}(d,{relative:a}),g=function(e,n){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=void 0===n?{}:n,c=eu(),d=ZA(),A=nu(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:hA(d)===hA(A);c(e,{replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,A,s,a,r,e,i,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:A,relative:a,viewTransition:u});return t.createElement("a",vu({},h,{href:r||f,onClick:p||i?s:function(e){s&&s(e),e.defaultPrevented||g(e)},ref:n,target:c}))});var ku,Fu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ku||(ku={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Fu||(Fu={}));function Iu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let Tu={data:""},Du=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Tu},Lu=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_u=/\/\*[^]*?\*\/|  +/g,Pu=/\n+/g,Uu=(e,t)=>{let n="",r="",s="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?n=a+" "+i+";":r+="f"==a[1]?Uu(i,a):a+"{"+Uu(i,"k"==a[1]?"":t)+"}":"object"==typeof i?r+=Uu(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Uu.p?Uu.p(a,i):a+":"+i+";")}return n+(t&&s?t+"{"+s+"}":s)+r},Ou={},Qu=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Qu(e[n]);return t}return e},Ru=(e,t,n,r,s)=>{let a=Qu(e),i=Ou[a]||(Ou[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!Ou[i]){let t=a!==e?e:(e=>{let t,n,r=[{}];for(;t=Lu.exec(e.replace(_u,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Pu," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Pu," ").trim();return r[0]})(e);Ou[i]=Uu(s?{["@keyframes "+i]:t}:t,n?"":"."+i)}let o=n&&Ou.g?Ou.g:null;return n&&(Ou.g=Ou[i]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Ou[i],t,r,o),i};function Hu(e){let t=this||{},n=e.call?e(t.p):e;return Ru(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let a=t[s];if(a&&a.call){let e=a(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Uu(e,""):!1===e?"":e}return e+r+(null==a?"":a)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Du(t.target),t.g,t.o,t.k)}Hu.bind({g:1});let Mu,Vu,zu,Ku=Hu.bind({k:1});function qu(e,t){let n=this||{};return function(){let r=arguments;function s(a,i){let o=Object.assign({},a),l=o.className||s.className;n.p=Object.assign({theme:Vu&&Vu()},o),n.o=/ *go\d+/.test(l),o.className=Hu.apply(n,r)+(l?" "+l:""),t&&(o.ref=i);let c=e;return e[0]&&(c=o.as||e,delete o.as),zu&&c[0]&&zu(o),Mu(c,o)}return t?t(s):s}}var Gu,Wu,Yu,Xu,Ju,Zu,$u,eh,th,nh,rh,sh,ah,ih,oh,lh,ch=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,dh=(()=>{let e=0;return()=>(++e).toString()})(),Ah=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),uh="default",hh=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return X(X({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return X(X({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?X(X({},e),t.toast):e)});case 2:let{toast:r}=t;return hh(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return X(X({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?X(X({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?X(X({},e),{},{toasts:[]}):X(X({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return X(X({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return X(X({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>X(X({},e),{},{pauseDuration:e.pauseDuration+a}))})}},mh=[],ph={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},fh={},gh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uh;fh[t]=hh(fh[t]||ph,e),mh.forEach(e=>{let[n,r]=e;n===t&&r(fh[t])})},xh=e=>Object.keys(fh).forEach(t=>gh(e,t)),bh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uh;return t=>{gh(t,e)}},yh={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},vh=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return X(X({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||dh()})}(t,e,n);return bh(r.toasterId||(e=>Object.keys(fh).find(t=>fh[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},wh=(e,t)=>vh("blank")(e,t);wh.error=vh("error"),wh.success=vh("success"),wh.loading=vh("loading"),wh.custom=vh("custom"),wh.dismiss=(e,t)=>{let n={type:3,toastId:e};t?bh(t)(n):xh(n)},wh.dismissAll=e=>wh.dismiss(void 0,e),wh.remove=(e,t)=>{let n={type:4,toastId:e};t?bh(t)(n):xh(n)},wh.removeAll=e=>wh.remove(void 0,e),wh.promise=(e,t,n)=>{let r=wh.loading(t.loading,X(X({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?ch(t.success,e):void 0;return s?wh.success(s,X(X({id:r},n),null==n?void 0:n.success)):wh.dismiss(r),e}).catch(e=>{let s=t.error?ch(t.error,e):void 0;s?wh.error(s,X(X({id:r},n),null==n?void 0:n.error)):wh.dismiss(r)}),e};var Nh=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uh,[r,s]=(0,t.useState)(fh[n]||ph),a=(0,t.useRef)(fh[n]);(0,t.useEffect)(()=>(a.current!==fh[n]&&s(fh[n]),mh.push([n,s]),()=>{let e=mh.findIndex(e=>{let[t]=e;return t===n});e>-1&&mh.splice(e,1)}),[n]);let i=r.toasts.map(t=>{var n,r,s;return X(X(X(X({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||yh[t.type],style:X(X(X({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return X(X({},r),{},{toasts:i})}(e,n),a=(0,t.useRef)(new Map).current,i=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let n=setTimeout(()=>{a.delete(e),o({type:4,toastId:e})},t);a.set(e,n)},[]);(0,t.useEffect)(()=>{if(s)return;let e=Date.now(),t=r.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>wh.dismiss(t.id,n),r);t.visible&&wh.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[r,s,n]);let o=(0,t.useCallback)(bh(n),[n]),l=(0,t.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,t.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,t.useCallback)(()=>{s&&o({type:6,time:Date.now()})},[s,o]),A=(0,t.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:a}=t||{},i=r.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,t.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:A}}},jh=Ku(Gu||(Gu=Iu(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Ch=Ku(Wu||(Wu=Iu(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Bh=Ku(Yu||(Yu=Iu(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Sh=qu("div")(Xu||(Xu=Iu(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",jh,Ch,e=>e.secondary||"#fff",Bh),Eh=Ku(Ju||(Ju=Iu(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),kh=qu("div")(Zu||(Zu=Iu(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Eh),Fh=Ku($u||($u=Iu(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ih=Ku(eh||(eh=Iu(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Th=qu("div")(th||(th=Iu(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Fh,Ih,e=>e.secondary||"#fff"),Dh=qu("div")(nh||(nh=Iu(["\n  position: absolute;\n"]))),Lh=qu("div")(rh||(rh=Iu(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),_h=Ku(sh||(sh=Iu(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Ph=qu("div")(ah||(ah=Iu(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),_h),Uh=e=>{let{toast:n}=e,{icon:r,type:s,iconTheme:a}=n;return void 0!==r?"string"==typeof r?t.createElement(Ph,null,r):r:"blank"===s?null:t.createElement(Lh,null,t.createElement(kh,X({},a)),"loading"!==s&&t.createElement(Dh,null,"error"===s?t.createElement(Sh,X({},a)):t.createElement(Th,X({},a))))},Oh=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Qh=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Rh=qu("div")(ih||(ih=Iu(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Hh=qu("div")(oh||(oh=Iu(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Mh=t.memo(e=>{let{toast:n,position:r,style:s,children:a}=e,i=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Ah()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Oh(n),Qh(n)];return{animation:t?"".concat(Ku(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ku(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},o=t.createElement(Uh,{toast:n}),l=t.createElement(Hh,X({},n.ariaProps),ch(n.message,n));return t.createElement(Rh,{className:n.className,style:X(X(X({},i),s),n.style)},"function"==typeof a?a({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))});!function(e,t,n,r){Uu.p=t,Mu=e,Vu=n,zu=r}(t.createElement);var Vh=e=>{let{id:n,className:r,style:s,onHeightUpdate:a,children:i}=e,o=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;a(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[n,a]);return t.createElement("div",{ref:o,className:r,style:s},i)},zh=Hu(lh||(lh=Iu(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Kh=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:s,gutter:a,children:i,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:A}=Nh(s,o);return t.createElement("div",{"data-rht-toaster":o||"",style:X({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:A.startPause,onMouseLeave:A.endPause},d.map(e=>{let s=e.position||r,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return X(X({left:0,right:0,display:"flex",position:"absolute",transition:Ah()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(s,A.calculateOffset(e,{reverseOrder:n,gutter:a,defaultPosition:r}));return t.createElement(Vh,{id:e.id,key:e.id,onHeightUpdate:A.updateHeight,className:e.visible?zh:"",style:o},"custom"===e.type?ch(e.message,e):i?i(e):t.createElement(Mh,{toast:e,position:s}))}))},qh=wh,Gh={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wh=t.createContext&&t.createContext(Gh),Yh=["attr","size","title"];function Xh(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}function Zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zh(Object(n),!0).forEach(function(t){em(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function em(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tm(e){return e&&e.map((e,n)=>t.createElement(e.tag,$h({key:n},e.attr),tm(e.child)))}function nm(e){return n=>t.createElement(rm,Jh({attr:$h({},e.attr)},n),tm(e.child))}function rm(e){var n=n=>{var r,{attr:s,size:a,title:i}=e,o=Xh(e,Yh),l=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Jh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:r,style:$h($h({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&t.createElement("title",null,i),e.children)};return void 0!==Wh?t.createElement(Wh.Consumer,null,e=>n(e)):n(Gh)}function sm(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function am(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256 336h-.02c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0C-2.06 328.75.02 320.33.02 336H0c0 44.18 57.31 80 128 80s128-35.82 128-80zM128 176l72 144H56l72-144zm511.98 160c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0-87.12 174.26-85.04 165.84-85.04 181.51H384c0 44.18 57.31 80 128 80s128-35.82 128-80h-.02zM440 320l72-144 72 144H440zm88 128H352V153.25c23.51-10.29 41.16-31.48 46.39-57.25H528c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H383.64C369.04 12.68 346.09 0 320 0s-49.04 12.68-63.64 32H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h129.61c5.23 25.76 22.87 46.96 46.39 57.25V448H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function im(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function om(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function lm(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(e)}function cm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function dm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function Am(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function um(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function hm(e){return nm({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function mm(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function pm(e){return nm({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function fm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function gm(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function xm(e){return nm({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function bm(e){return nm({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function ym(e){return nm({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(e)}function vm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"},child:[]}]})(e)}function wm(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(e)}function Nm(e){return nm({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function jm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"},child:[]}]})(e)}function Cm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function Bm(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function Sm(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Em(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 54.1c63 45 104 118.6 104 201.9 0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4 7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31-41.5 30.8-68 79.6-68 134.9-.1 92.3 74.5 168.1 168 168.1 91.6 0 168.6-74.2 168-169.1-.3-51.8-24.7-101.8-68.1-134-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8zM296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24z"},child:[]}]})(e)}function km(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function Fm(e){return nm({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Im(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function Tm(e){return nm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Dm(e){return nm({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function Lm(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function _m(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(e)}function Pm(e){return nm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function Um(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function Om(e){return nm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}const Qm="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABnANMDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KKKACiiigAooooAKKKKACiiigAooooAYzYoVs1l69qQ03T5pc4kI2xj1Ncx8KvGZ8WaHIk0u7ULKV4ZgWJLAHhvxryZZnh442OAb99q/8AwPXqdMcPUlRddL3U7HfUUUV6xzBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUxmxSvbcB9FZuoamljZyTGRXA6bTXL/DfxyfFen3aXUgF7aXDwyYO0EBuCK8uWZ4aGKjg5S9+Sb+7+vwOiOHqSpyqpaK34ndUzNQySSLGXjUynGdikdfTNcL/wtzTV1SXTLqRdN1BDta3usqR7g9CKWOzTC5dGMsTKye2jf5XClQqVr8ivY2b7xlbaf4s0/RpX2vdq+1yePMHRa6dWzXzv8Rre/vfEOgSWtyPP85pheKPkjx/FnP6V1/8AwvXTY9Qi0tQNR1SY7I7PT2Lyk/yA96+MyniylXq1aeKury9zRvTotL7HrYjLJKnCdHXTXyPTr6+j0+1eeZ2WGMfMygk/lWZb+LtPvoRNaT/bEPIMDBhn045rUt98tvG00HlSSDLxFt2D6ZrxP4o/Cu90u4k8QeGHeBl5ntLckc/3lHp7V7ue4jMcLQ+sYBJpbq2tu6/U48HRoV5+zqy5W9n0+Z23irUJL64hCjMK8g+9ePfCTVL3RvHeoywRF7MPKtyB0Pz/AC49xV7TfFXivRdGe/1xbcaTCCzS3oCPx0AA7muH8R+KfE3hNzZ6Ra2lp5w+1eeBukm3Hdu56Y9K/DZ5jia+Njjue1S97vTbQ+yw+EcKU8LZNPTRn1AvxC0+GHzrt2s19ZiAv51taHr1n4gsVvLCb7TbMcLKoIVvcZr5d+D/AMJdX+J06a94vubq60dJP3VrMxHnsOuR/wA86+q47SK2tEjhiSJIxhFRQAo9AO1fuGRVszxNH2+Oa5XtZWb8/T5HyOYUcPh5+ypO8lv2RZ3iuY1jxlbaN4g03S532tesVEmeFY/dU1hTfF/TbXVn0u9H9k38f3o7wHBHqD0Nee/FCO81a+0qe2uFMrXQkWcFdsahdwcn29K8XOuKqWHUYYJuUlJc2jWieq1tvsbYPLZVanLXXKmnb7j6FzT68gf49aXY38GmNKup6lIfLjttPzJLI/pjoB716lZ3Mk1lFNNC9tI4y0TtkqfQmvsMBm2FzKLlQb03umvzPNrYarh2lUVrlveKdXO+KNZbS9IuZY3Ec4jbZ3w23r9KqeA/GMXizwvY6j5oEjrslDHHzjg4HpmtFmWHeLeD5vfS5vx/Mn6vU9l7a2l7HW0VGsgkG5DuFSV6d77HOFFFFMAooooAxvEfinS/B+lS6nrV/Dpmnxna9xcSBVUk4GM9STwBXKf8NCfDn/ocdL/7+n/CuI/bMVX+E9huUN/xUmkjkf8AT5H/AIn869w/s+1/59of+/Y/woA4b/hoT4c/9Djpf/f0/wCFbfhn4geGvHAuo9A1q11Rof8AXGCTd5eemeRj8KuC+0MqwFxYNt+8S0fy/XmrFnd6Z5Mk1rLamEf6yaFlCj/gQoFzLa55P4zsda8B3c+oRa7DJ4cwZpbfUV3mMD7yhhyfavPNNtfEmqeJdN0fT9Qg0Ox1hPtn2qGLfNIrDdgE9GFe2+LvDfh3xpc2j6xqsNxptv8AvPsInURuw6FjnJHsa1JfCOlagdLu7NUjSzkVraS3IYBQMED0GOOK/JsRwrWnjXiaaXs+dPlb15evp6H0tDNaUaPI9ZNau33erNrQ9Hh0bS4rSGSWWOL+OVizt9Setcd8UvBui+ILOO61OEK1ueZlIX5NvOT6CvQ0A9K5jxl4Lg8aWaWN1cTQ2BbM0MLFWmGPuk56e1fdZxgPrmXzwtKCbask+mu/yPHwtZ0a6q8zXmfNWiWlj8UF8SWOlQta6ZYxwiwCu2JHO7Lk+j8cdq9C/Zm8FaRo+l6peJZbNWhujau7gbkUKMKvoK9f0nwlpOh2H2Gw023s7bnMaKB1681Ho/hSy0XUtQvbTMb3ZUyrjHKjr+NfIZXwziMrx9KvzKULO67O2jXfU9jE5rGvQnRjdXtb5br5nQKqgcKB+FZXiCb7PpN02ecda1Kw/FOgv4j0l7CO9msY5Rh5rcfvAvseoNffZhTq1cLUp0V70k0vmj5+m0ppy2Pk74qeJ9R+I3iEeGtAinv7e3lCNHGpPny9yT02ivUvGXgWXWvDttbzwtHf28CGNsdSE5U+3tXrPhHwTong3TlttG0+GyTq7IMux9z1NblxaRXS4eNX/wB5Qa/N3wQ5YbldX3/wPopZwoyj7GNox+882+Al49x4FS3YGOW0neN0f7wOc8/nXqOB0xxXPaH4XtNA1HUZ7UFI75lkdO24cH8TV3+39O3so1G2JH3v36fL9ea/QMnoVcLgaVCv8UVb7tF+B4eMrQq151Y6KTv95y/xQ8GaP4o0eOTUo9q253JIjbCo9M+leBaPa6Z8RNS1/RtJjNvpVtbr9kmZ2CyTZxvJ7jHGPSvozxNoll8QNKNkmp4s/M23K2bhi4/ubhyv4Vc0Pwbovh3S106w063tLYjBjVRk/j3r47NuGamaY6deLUI2Vn3ffSx6mEzJYegoXbfTsjx79mvwTpWlnWLqSzVdZtrhYd8hz5S7eAgPTPqK901CxS/s5oJGZYpO8ZIb8xWXpfhK00rXbvUrbcj3UYSZT0OOhroG46cV9PkmBng8vhhcQlzK6duuu/3WOHHYn6ziHXi97fLQ8A8XTa34Da8/tLWYNR0aVliiE6ZuJC42hARzx3NYHgvQPEviDxofDk+qxaNo2ngzG309Nssy7uBvPr617RrXwz0rxB4ii1jWN+o/Zzm3tpP9RF3yR3PvWrF4PsrfxBDq8K+TPHG0RWMYyh6Lx2HYV8PT4Uqxx8cQ4p0+d+63dqN9D1lmcFRcF8TW9uv66dSHXvGnhv4d2tsNb1e30m3l+SBryb/WEdcMSSfxrF/4aE+HP/Q46X/39P8AhXey20M+PMiSTacjcoOKj+w2n/PrD/37H+FfrKXKrI+ZOG/4aE+HP/Q46X/39P8AhXWeHvEmmeK9Mi1HStQhv7KQttuLeTeh2nDc9iCCMVf/ALNtP+fWH/v2P8K4D4GxqvhbVFVQFGv6mAAOBi6kxTA9IooooA8G/bK/5JPp/wD2Mmk/+lkVe7V4V+2R/wAkm07/ALGTSf8A0sSvdaAPzI/4KH6VZeHvjJYpYRCwW70tZJFtVEYdvMYbjtxk8dTX6A/C/wANaTpfw10Kzs7C3it59PgeWPylCyMY1JLDGCSfWvgv/gpR83xo0TPONFUj/v69fW3g0fGdvCOjm2bwV9m+xQiHzjdBtuweg64xQfP4aSji62l9j4c+IGg2Fr+2xLocNlHFo3/CTWsX2GMMsew+XlcDjByePev0c+Ivj7w78EfAd3repRrZ6bYqfKtbVFUyMfuxoMdT7V+cPipNU/4bWhGsmz/tT/hJbQzmxD+UX/dfc38kfWvb/wDgp1rF0tr4E0lQwspXubl+TtZ1MQUEd8BmI9KDmw9Z0KVepFa30PW/gP8AEP4gftDWN34pnu18HeFhK0FjY2ESS3U5XBLvJKCAMkDhexrn/jN8cvH/AOzF4t0qfW2i8a+BdWOwXC2ywX1u4wWUFMIx2kkZ9K9Q/ZLsINP/AGd/A0cIXyzpquWA/iYkt+teef8ABQ7T7e4/Z5aaZE8211S3ePIBy2GX/wBBoPRqKcMJ7VSfMle57P8A8JVJ8QPh5Br/AIN1qG2iurc3VteNbecGULkqVbbg54/Cvi34a/t5eOL34m6JpXipdNj0K7u1tLme3tWjIBbyxIpZum4g/TNesf8ABPzUry6/Z31aKdWMNpeXCWxY5+UxqxA9gxNfK3xw+GZsfgt8MPH9hCVhuLebTb141xtlWaV4nJHcjK5/2Peg48ViKrpU69NtaXa+4/U7U9YttF0m61K8mWO0t4WmklJ+VVUZJ/KvgTwX+298S/iT8WtN8N6a2kWGmapqi21tM1kZJIoS2AWG7k45rvoPjFcfGz9nnwB4UsblpPEniu7XRtRMTnfHBDn7RKwzkZRV57l6+fPD+m2uk/t3adYWyJHa2nioW0CxqFAVGwOBQVi8VKUqbpStFtXt5/5H3L+0N4p8a/DL4R3/AIp0PWrWS+0aBGuY7yxVluyZFUnAb5Pvdq86/ZR+MvxH/aE0XX9R1HXdO0mGxuFto1s9N8xizLuyct0xXov7Zij/AIZp8bcD/j2Xt/01SvmD9hfxlrfhH4X/ABAudC8MXfie6iuUdY7eSOPDCLhfmbmg2rVHTxkYNvls3Y+mfCfiL4k6b8dJvCfiu803UfDs+lPf2F3Z2RikkZZFRlf5sKQGB4r5A/4KKaRY6H8X9HbT4F09bjS1kmW1URiVvMYbm24ycY5NfcXwDvH8UfCTwVr+pr9s1iTTwz3UwzKrSYMi5PPUAH6Cvir/AIKV/wDJWPD3/YI/9qtQZZgn9Tcr7tP7z7l+CfhvTPD/AMLvDUWm2UNj52l2skvlxgF2MSks2OpJPU+tdF4qt9TutBuF0a+TT9RX54rh4hKvHUEVS+Fv/JMvCZ7/ANk2n/ola27uWOS3uUVlcxxncC2TyvGR2zQe5C3s0vI+JP2f/wBqb4o/Gb4uL4OudQ0fT4Y0nknuotPLPiP+6C2Oa9U/a9+LXjr4F+HNN8SeHtRs7izuLpbKSxvbQNhjGzbw4bP8PSvlv9hvn9q66U8jytQGPb0r3/8A4KUAH4M6Dkf8xuP/ANFS0Hz9KtUlgalRyd03rc7L9nfxn8QfjN8K7bxVeeJdPsbq6klSK3tNKDxBUbA5LZ5rR+GWv/E/xBq3xC8OeJtV0uy1XR5rVdP1DT7DKPFJGzh2Rnyc8DHYg14N8J/iN4q8C/sWLLoHh2+mkDTx/wBrRyxhLZGlw8wQNuwo5HpX2xpGnWyWq36xot1dW0fnzhRvlwpxubq2MnGfU0HoYZurGN27pXfnc+K/gf8AtTfFP4rfGb/hBbnUdIso4pLlZLqPT9zlYW6gFsc17f8AFPWvir8Pbzw3f6frmm6xoNxqltYakLjTfLmiSWZULqQ23A3elfGX7Kl/d6X+1fdz2mnS6rciTVFFvHKqSAbm5+avtj4L+LtY+J3ij4iReKdFl00adqNvFa6RqDCTyY1iDo4HTJb5sjuoPamcODqyrU7Sk+Zt2+Wp7lmvPPgf/wAixqv/AGMGqf8ApVLXoaV558D/APkWNV/7GDVP/SqWkfRno1FFFAHhH7ZX/JJ9O/7GPSP/AEsjr3SvCf2yj/xafT/+xk0n/wBLIq92SgD8xv8AgoZrFr4i+NVgNKnj1D7LpKRTPbuHSNjI7EMR3x6V+gXwv8TaVq3w50K8s9StbixSwhDzJIuIyIl3BiDgGuoHhvSFJI0qyBzn/j3Tr69Klh0uyt7eSCKzgigk+/EkShW4xyAMHig86jhZUa06t78x+V/xC16wuv20JteguIpdI/4SW1la+Vv3RjXZuYN6fLX2V+2B8E5vj78M7S78NPHf65pspurEpKGS4jPEkSn7uTxjPpXvzeG9IVdq6VZBem0W6Y/lWFb+OvCWmrrlpDqllB/wjaLJqcMZ2iyQqxXzAB8o2qW57UGdPAqKqQm7qZ4F+xH8Vrdfh/H8P/ELNofibQWaIWOpZhd4G5Rl3dcEkYz2rmv22vEmofF6bRPhZ4ItW1/V3vBd6gbP54bYBCIxJIOF5bnNfSurat4C8QyeGjqJ0XUJdd/5A73UaSNdYG8+USvPy5bjHFVLj4gfDf4c3FzpbajpWiSW8ipcRWsIRYZH+6JCi4BPo340Fyws5UPq7lptfrYwPhn4H0r9m/4Ex6TqOowWwtbaSa8u5cKslw65cqM9M8Ae1eRfDPS/D3x0/Y2Hge3vbWbWobWdorQv+/huEmeSNghIbrgZ96+nrjxN4c1LxA3h2W+tLrVorZdQ/s+UBnEJOFkwRjbnjPWuf/4WV8O9N8O2ni5dY0m10i8l+x2+qRhVSaQtt8sOBzlgQB60GssOpWj9lJq3qfJP/BPX4bnRbnxF488QEWVvp7SadbPct5ccTkjz3yzY7Bc46ACvHtO8RaZH+2xH4ge7RNF/4SrzvtgGIdm772fSv0X1b4lfDvw/othNe6zpdppGtb5bZZIwsVzt+Z2A24JGCxyO3NdVZWHh/VNNgurW10+5sJ4xNFNHGjRvGRkMpxjBHNBwvLv3cKcZfC7njH7ZXizRv+Gb/E1uNWtZJdStkWySOVXe4PmpygB+b8K8W/4Jy+KNL8M+FfGdnqmp2umTNeQzIt3MIsqE2sRuPNfUn/CyPhtdabLef2jpMlnp2yJpBGHSIMSVC4XlSV/h44pvh3x58N/GVnc3ei3+japb2Nt9omuERNsUIYhmLFcBRhskelB1Tw05V4109lY89sfjJ4bufjp4J+Hngy8STTbSG+nvTZMWt9wj+SHOcHksfqBXyx/wUT1q08QfFzSF0q4j1I2+meXL9ncOA29m25Hev0LkvvC+j2Om6o02n21veSRxWd0ERBI8oCoI2HGXJGPXNQyXXhGHXr3TGTTf7Xt7X+0biHy08xICzKJmOOnB560E18JOvSdOUt32/A5TwJ8WPB+g/CPw1fXfiXTIbaDSrYSbrtWYERKCu3rwa85/Z9+OFh8Qp/iv4u1K5j0vSV1CKC1/tD91sgWLClsnOSeeK9T8O/ED4ZeMdUtLTRtU0LUby8i8+1ihSPfPHgfPHlfmGMHjPArq4o/DzapcaBFHppvFiS6msQiF/LJKpIyY5G5SAT6UHR7Oo3HXRf5H5r/sX6/Y6P8AtPNfahcxadbTw3oSW4PlozN93luma9//AOCkGuWVx8NdB0m3uYbjUxq6TtaxsHkVPKkG4oDnGSv519D6f43+H+veJpvDttqOjXOtQzNDJp4RRL5iDc67SPvAfwjtzVbVvil8Mo9curTUdd0WPUrW5+wzm4VQ0MuFbymdlwDgqdpPQ0HHDAyhh5Yfm36njv7D+reHfEH7Pdn4UvrqzuLzzLqC50q4YCSRGfJBQkEgjvX0rqWqaf4d0t5Lq5gsrGCLmaZwqKoGB8x4NYmteJPB3g/WdPg1CfTLHUbsolsDABIVdtgwQCQC3GTxXW3ljb6hAYLq3iuYT1jmQOp/A0HfRpulTUL7Kx+Xf7I2t6dpP7VDalqF3FaWM8moCO7mby0bez7cluma+u/2gfjl4O8AeGNTl0HVrO48W695NpH/AGdL5znDbfMcpuxsUtyeuK+gf+Eb0nbt/suy25zj7OmP5Uf8I3pPJ/suyyQB/wAe6dunbtk0HFQwdTD0pU4y3d722LFmxaCMkkkxqTmuC+B//Isar/2MGqf+lUteiKqqAFAAAwMCvO/gf/yLGq/9jBqn/pVLQeoj0aiiigZwnxa+GNp8XPCq6Fd3t1pyrdW96lxa7S8ckMgkjyrAgjIGfpTf+EL8Zf8ARQ7n/wAFFr/8TXeUtAHB/wDCF+Mv+iiXP/gotf8A4mk/4Qvxl/0UO5/8FFr/APE13tFAGPoWn6hYaf5Oo6o+rXWWzcPGkR56fKgAr5M8WeF9R1zxr+0zcRXev6YLjSrdbWDTwgS+ZLKSIjB5b5io5I619lEBuCMimGPIwRkdKAPk2OO6F1+ynINOusabv+2/uD/oudOeAb/T5yF/AGuebxJ4q+A/gjxb4A/sqe58eatr19f6Jqn2Jb221hLm6aVfNOfldEcxESZAEQxxivtbaPQflUbQhuoB4xyKAPmbVvD+o6l+1tcXEuoaxoUEPguGJr7SlRYpJRcM7R5YNnC84ryqTTdQsP2K/hlYNbaxFfaR4rtLi78iANdRRRam8skg4xnZ8wNfd/l9+9IYFYAFQQOgx7Y/lQB8jfF6LWviPN8FZPDN5f2l5cS6p5WsapZRy7Flspo0knjBwodiozjIzXrfwC1W3j+DttoY8MTeG5/DNqNIn0NpN6RtDHt2wyniRG/hbv3r17yRwcDI5HFO2nr3oA+ZP2U2ubXRvFdtp7ajc/DqyZR4d/tiEx3tkwVzNZDPLxxHGxj/AHyB0rkfh9b6jdfsw/D/AOHqWUlnqniC+udP1D7ZaFkt7QXE003mKGyVdAsYAOD5pr7H8keg/KlWLaoAGABgAUAfFcPh+fUPgzpfwf8AGml3WpW/hzxbaaHJNFG6rPpyuxtrhGDbk8tPL5J4Mdd78OfCfjnwZ428ZW3jSddftNL8NLZaT4kUk3OpW++VwLhDnE6k7SRw/UY6V9M+Wuc7Rn1xQyq3VQfqKAPhb4W2MvxS+DPwZ8E6bo95p3ijwTe6dqOoale2/lNpiwE+csb5zK8g/d4Xhg/PANb8P/CSaT8XtA+OJgebTte1iXw5e6als0d3b6YxEdqzZb59kiGYqEyBM/NfY/kjrgZxjpR5QPYUAfDmj6Rrvh/4veJ/HVzoU2s+F9D8f3l6+niELcW4uLGO2GoW5zmUDDq0LbcK5YcqK1D4istR1z4+eCrrwpfa1eeMtUc6VZ3FoPs92rafDFveQnYiiWN+W5+X3r7PMIZskAn1x/n0H5VJtB6gH8KAPjjxR4Z1rwL4w+D2m6Hd6hc/Eyw0zT9KvL2WLzNN1vThIou4rg7sK0YDSo55yeNxr6z1uzvtS0maHTtQbS7t/wDV3SwLIY/+APwa0/LTgbVx9KXA44oA4T/hC/GX/RRLn/wUWv8A8TR/whfjL/oolz/4KLX/AOJrvKKAOD/4Qvxl/wBFEuf/AAUWv/xNcl8LNP8AHng/xjqfhy/0y1ufCCST3aa/JMI7ieeWQv8A6peACXI9sV7TSBQvQAfh69aAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z";var Rm=n(579);const Hm=e=>{let{isOpen:n,onClose:r,source:s="database"}=e;const[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[A,u]=(0,t.useState)(!1),h=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Database Admin Login"}),c&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:c}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="Sheli2313",n="Homelife2025";return a!==t&&o!==n?(d("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isAdmin")):a!==t?(d("Invalid username. Please try again."),void sessionStorage.removeItem("isAdmin")):o!==n?(d("Incorrect password for this username."),void sessionStorage.removeItem("isAdmin")):(sessionStorage.setItem("isAdmin","true"),r(),void h("companyProfile"===s?"/company-info":"/database"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:A?"text":"password",id:"password",value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{u(!A)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:A?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null};function Mm(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Vm(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Vm(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const zm=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Vm(e))&&(r&&(r+=" "),r+=t);return r},Km=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var qm=e=>"number"==typeof e&&!isNaN(e),Gm=e=>"string"==typeof e,Wm=e=>"function"==typeof e,Ym=e=>Gm(e)||Wm(e)?e:null,Xm=(e,t)=>!1===e||qm(e)&&e>0?e:t,Jm=e=>(0,t.isValidElement)(e)||Gm(e)||Wm(e)||qm(e);function Zm(e){let{enter:n,exit:r,appendPosition:s=!1,collapse:a=!0,collapseDuration:i=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:d,nodeRef:A,isIn:u,playToast:h}=e,m=s?"".concat(n,"--").concat(l):n,p=s?"".concat(r,"--").concat(l):r,f=(0,t.useRef)(0);return(0,t.useLayoutEffect)(()=>{let e=A.current,t=m.split(" "),n=r=>{r.target===A.current&&(h(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===f.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,t.useEffect)(()=>{let e=A.current,t=()=>{e.removeEventListener("animationend",t),a?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition="all ".concat(n,"ms"),requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)})})}(e,d,i):d()};u||(c?t():(f.current=1,e.className+=" ".concat(p),e.addEventListener("animationend",t)))},[u]),t.createElement(t.Fragment,null,o)}}function $m(e,t){return{content:ep(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function ep(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,t.isValidElement)(e)&&!Gm(e.type)?(0,t.cloneElement)(e,{closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):Wm(e)?e({closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):e}function tp(e){let{delay:n,isRunning:r,closeToast:s,type:a="default",hide:i,className:o,controlledProgress:l,progress:c,rtl:d,isIn:A,theme:u}=e,h=i||l&&0===c,m={animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused"};l&&(m.transform="scaleX(".concat(c,")"));let p=zm("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(u),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":d}),f=Wm(o)?o({rtl:d,type:a,defaultClassName:p}):zm(p,o),g={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{A&&s()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},t.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(u," Toastify__progress-bar--").concat(a)}),t.createElement("div",X({role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:f,style:m},g)))}var np=1,rp=()=>"".concat(np++);function sp(e,t,n){let r=1,s=0,a=[],i=[],o=t,l=new Map,c=new Set,d=()=>{i=Array.from(l.values()),c.forEach(e=>e())},A=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},u=e=>{if(null==e)l.forEach(A);else{let t=l.get(e);t&&A(t)}d()},h=e=>{var t,r;let{toastId:s,updateId:a}=e.props,i=null==a;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(s,e),d(),n($m(e,i?"added":"updated")),i&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:o,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))})},removeToast:u,toasts:l,clearQueue:()=>{s-=a.length,a=[]},buildToast:(t,i)=>{if((t=>{let{containerId:n,toastId:r,updateId:s}=t,a=n?n!==e:1!==e,i=l.has(r)&&null==s;return a||i})(i))return;let{toastId:c,updateId:A,data:m,staleId:p,delay:f}=i,g=null==A;g&&s++;let x=X(X(X({},o),{},{style:o.toastStyle,key:r++},Object.fromEntries(Object.entries(i).filter(e=>{let[t,n]=e;return null!=n}))),{},{toastId:c,updateId:A,data:m,isIn:!1,className:Ym(i.className||o.toastClassName),progressClassName:Ym(i.progressClassName||o.progressClassName),autoClose:!i.isLoading&&Xm(i.autoClose,o.autoClose),closeToast(e){l.get(c).removalReason=e,u(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n($m(e,"removed")),l.delete(c),s--,s<0&&(s=0),a.length>0)return void h(a.shift());d()}}});x.closeButton=o.closeButton,!1===i.closeButton||Jm(i.closeButton)?x.closeButton=i.closeButton:!0===i.closeButton&&(x.closeButton=!Jm(o.closeButton)||o.closeButton);let b={content:t,props:x,staleId:p};o.limit&&o.limit>0&&s>o.limit&&g?a.push(b):qm(f)?setTimeout(()=>{h(b)},f):h(b)},setProps(e){o=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>i}}var ap=new Map,ip=[],op=new Set,lp=e=>op.forEach(t=>t(e)),cp=()=>ap.size>0;function dp(e,t){var n;if(t)return!(null==(n=ap.get(t))||!n.isToastActive(e));let r=!1;return ap.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function Ap(e){if(cp()){if(null==e||(e=>Gm(e)||qm(e))(e))ap.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=ap.get(e.containerId);t?t.removeToast(e.id):ap.forEach(t=>{t.removeToast(e.id)})}}else ip=ip.filter(t=>null!=e&&t.options.toastId!==e)}function up(e,t){Jm(e)&&(cp()||ip.push({content:e,options:t}),ap.forEach(n=>{n.buildToast(e,t)}))}function hp(e,t){ap.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function mp(e){let t=e.containerId||1;return{subscribe(n){let r=sp(t,e,lp);ap.set(t,r);let s=r.observe(n);return ip.forEach(e=>up(e.content,e.options)),ip=[],()=>{s(),ap.delete(t)}},setProps(e){var n;null==(n=ap.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=ap.get(t))?void 0:e.getSnapshot()}}}function pp(e){return e&&(Gm(e.toastId)||qm(e.toastId))?e.toastId:rp()}function fp(e,t){return up(e,t),t.toastId}function gp(e,t){return X(X({},t),{},{type:t&&t.type||e,toastId:pp(t)})}function xp(e){return(t,n)=>fp(t,gp(e,n))}function bp(e,t){return fp(e,gp("default",t))}function yp(e){let[n,r]=(0,t.useState)(!1),[s,a]=(0,t.useState)(!1),i=(0,t.useRef)(null),o=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:A,closeOnClick:u}=e;function h(){r(!0)}function m(){r(!1)}function p(t){let r=i.current;if(o.canDrag&&r){o.didMove=!0,n&&m(),"x"===e.draggableDirection?o.delta=t.clientX-o.start:o.delta=t.clientY-o.start,o.start!==t.clientX&&(o.canCloseOnClick=!1);let s="x"===e.draggableDirection?"".concat(o.delta,"px, var(--y)"):"0, calc(".concat(o.delta,"px + var(--y))");r.style.transform="translate3d(".concat(s,",0)"),r.style.opacity="".concat(1-Math.abs(o.delta/o.removalDistance))}}function f(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",f);let t=i.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return a(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=ap.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,t.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",h),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",m)}},[e.pauseOnFocusLoss]);let g={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){o.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",f);let n=i.current;o.canCloseOnClick=!0,o.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(o.start=t.clientX,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=t.clientY,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:s,right:a}=i.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=s&&t.clientX<=a&&t.clientY>=n&&t.clientY<=r?m():h()}};return l&&c&&(g.onMouseEnter=m,e.stacked||(g.onMouseLeave=h)),u&&(g.onClick=e=>{A&&A(e),o.canCloseOnClick&&d(!0)}),{playToast:h,pauseToast:m,isRunning:n,preventExitTransition:s,toastRef:i,eventHandlers:g}}bp.loading=(e,t)=>fp(e,gp("default",X({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),bp.promise=function(e,t,n){let r,{pending:s,error:a,success:i}=t;s&&(r=Gm(s)?bp.loading(s,n):bp.loading(s.render,X(X({},n),s)));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,s)=>{if(null==t)return void bp.dismiss(r);let a=X(X(X({type:e},o),n),{},{data:s}),i=Gm(t)?{render:t}:t;return r?bp.update(r,X(X({},a),i)):bp(i.render,X(X({},a),i)),s},c=Wm(e)?e():e;return c.then(e=>l("success",i,e)).catch(e=>l("error",a,e)),c},bp.success=xp("success"),bp.info=xp("info"),bp.error=xp("error"),bp.warning=xp("warning"),bp.warn=bp.warning,bp.dark=(e,t)=>fp(e,gp("default",X({theme:"dark"},t))),bp.dismiss=function(e){Ap(e)},bp.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ap.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},bp.isActive=dp,bp.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=ap.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:s}=n,a=X(X(X({delay:100},r),t),{},{toastId:t.toastId||e,updateId:rp()});a.toastId!==e&&(a.staleId=e);let i=a.render||s;delete a.render,fp(i,a)}},bp.done=e=>{bp.update(e,{progress:1})},bp.onChange=function(e){return op.add(e),()=>{op.delete(e)}},bp.play=e=>hp(!0,e),bp.pause=e=>hp(!1,e);var vp="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,wp=e=>{let{theme:n,type:r,isLoading:s}=e,a=Mm(e,Km);return t.createElement("svg",X({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},a))};var Np={info:function(e){return t.createElement(wp,X({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(wp,X({},e),t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(wp,X({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(wp,X({},e),t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}};function jp(e){let{theme:n,type:r,isLoading:s,icon:a}=e,i=null,o={theme:n,type:r};return!1===a||(Wm(a)?i=a(X(X({},o),{},{isLoading:s})):(0,t.isValidElement)(a)?i=(0,t.cloneElement)(a,o):s?i=Np.spinner():(e=>e in Np)(r)&&(i=Np[r](o))),i}var Cp=e=>{let{isRunning:n,preventExitTransition:r,toastRef:s,eventHandlers:a,playToast:i}=yp(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:A,hideProgressBar:u,closeToast:h,transition:m,position:p,className:f,style:g,progressClassName:x,updateId:b,role:y,progress:v,rtl:w,toastId:N,deleteToast:j,isIn:C,isLoading:B,closeOnClick:S,theme:E,ariaLabel:k}=e,F=zm("Toastify__toast","Toastify__toast-theme--".concat(E),"Toastify__toast--".concat(A),{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":S}),I=Wm(f)?f({rtl:w,position:p,type:A,defaultClassName:F}):zm(F,f),T=jp(e),D=!!v||!c,L={closeToast:h,type:A,theme:E},_=null;return!1===o||(_=Wm(o)?o(L):(0,t.isValidElement)(o)?(0,t.cloneElement)(o,L):function(e){let{closeToast:n,theme:r,ariaLabel:s="close"}=e;return t.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),n(!0)},"aria-label":s},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),t.createElement(m,{isIn:C,done:j,position:p,preventExitTransition:r,nodeRef:s,playToast:i},t.createElement("div",X(X({id:N,tabIndex:0,onClick:d,"data-in":C,className:I},a),{},{style:g,ref:s},C&&{role:y,"aria-label":k}),null!=T&&t.createElement("div",{className:zm("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!B})},T),ep(l,e,!n),_,!e.customProgressBar&&t.createElement(tp,X(X({},b&&!D?{key:"p-".concat(b)}:{}),{},{rtl:w,theme:E,delay:c,isRunning:n,isIn:C,closeToast:h,hide:u,type:A,className:x,controlledProgress:D,progress:v||0}))))},Bp=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Sp=Zm(Bp("bounce",!0)),Ep=(Zm(Bp("slide",!0)),Zm(Bp("zoom")),Zm(Bp("flip")),{position:"top-right",transition:Sp,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function kp(e){let n=X(X({},Ep),e),r=e.stacked,[s,a]=(0,t.useState)(!0),i=(0,t.useRef)(null),{getToastToRender:o,isToastActive:l,count:c}=function(e){var n;let{subscribe:r,getSnapshot:s,setProps:a}=(0,t.useRef)(mp(e)).current;a(e);let i=null==(n=(0,t.useSyncExternalStore)(r,s,s))?void 0:n.slice();return{getToastToRender:function(t){if(!i)return[];let n=new Map;return e.newestOnTop&&i.reverse(),i.forEach(e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},isToastActive:dp,count:null==i?void 0:i.length}}(n),{className:d,style:A,rtl:u,containerId:h,hotKeys:m}=n;function p(e){let t=zm("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":u});return Wm(d)?d({position:e,rtl:u,defaultClassName:t}):zm(t,Ym(d))}function f(){r&&(a(!0),bp.play())}return vp(()=>{var e;if(r){let t=i.current.querySelectorAll('[data-in="true"]'),r=12,a=null==(e=n.position)?void 0:e.includes("top"),o=0,l=0;Array.from(t).reverse().forEach((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(s)),n.dataset.pos||(n.dataset.pos=a?"top":"bot");let i=o*(s?.2:1)+(s?0:r*t);n.style.setProperty("--y","".concat(a?i:-1*i,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s","".concat(1-(s?l:0))),o+=n.offsetHeight,l+=.025})}},[s,c,r]),(0,t.useEffect)(()=>{function e(e){var t;let n=i.current;m(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),a(!1),bp.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(a(!0),bp.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m]),t.createElement("section",{ref:i,className:"Toastify",id:h,onMouseEnter:()=>{r&&(a(!1),bp.pause())},onMouseLeave:f,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":n["aria-label"]},o((e,n)=>{let s=n.length?X({},A):X(X({},A),{},{pointerEvents:"none"});return t.createElement("div",{tabIndex:-1,className:p(e),"data-stacked":r,style:s,key:"c-".concat(e)},n.map(e=>{let{content:n,props:s}=e;return t.createElement(Cp,X(X({},s),{},{stacked:r,collapseAll:f,isIn:l(s.toastId,s.containerId),key:"t-".concat(s.key)}),n)}))}))}function Fp(e){let{user:n}=e;const r=eu(),[s,a]=(0,t.useState)(!1);return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("nav",{className:"bg-white text-gray-800 px-6 py-3 flex justify-between items-center shadow-lg",children:[(0,Rm.jsx)("div",{className:"flex items-center",children:(0,Rm.jsx)(Eu,{to:"/",children:(0,Rm.jsx)("img",{src:Qm,alt:"Company Logo",className:"h-20 w-auto object-contain",style:{maxWidth:"200px"}})})}),(0,Rm.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 text-3xl font-bold",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsx)("button",{onClick:()=>{a(!0)},className:"text-3xl hover:text-blue-900 transition-colors",title:"Database",children:(0,Rm.jsx)(mm,{})}),(0,Rm.jsxs)("button",{onClick:async()=>{try{await function(e){return _(e).signOut()}(nA),r("/")}catch(e){bp.error("Sign-out error")}},className:"bg-gray-600 hover:bg-blue-900 text-white px-4 py-2 rounded-md transition-colors duration-200 flex items-center space-x-2",title:"Sign Out",children:[(0,Rm.jsx)(Em,{className:"text-lg"}),(0,Rm.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,Rm.jsx)(Hm,{isOpen:s,onClose:()=>a(!1)})]})}const Ip=[{acct:"10001",description:"Cash - Current Account",type:"A",line:"CASH"},{acct:"10002",description:"Cash - Trust",type:"A",line:"NET TRUST FUNDS"},{acct:"10004",description:"Cash - Commission Trust Account",type:"A",line:"CASH"},{acct:"10005",description:"Term Deposits - Buyers",type:"A",line:"NET TRUST FUNDS"},{acct:"10006",description:"Cash - General Term Deposits",type:"A",line:"CASH"},{acct:"10009",description:"Cash - Petty Cash",type:"A",line:"CASH"},{acct:"11000",description:"Notes Receivables",type:"A",line:"NOTES RECEIVABLE"},{acct:"12100",description:"A/R - Agt's Recoverable- Gen Exp",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12101",description:"A/R - Agt's Recoverable - Advert",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12200",description:"A/R - Commission From Deals",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12500",description:"A/R - Other",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12600",description:"Loan - Homelife Top Star",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12700",description:"Loan- Executive Mortgage",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12999",description:"A/R - Allowance",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"15000",description:"Prepaid Expenses",type:"A",line:"PREPAID EXPENSES"},{acct:"16010",description:"Land & Buildings",type:"A",line:"LAND & BUILDING"},{acct:"16020",description:"Vehicles",type:"A",line:"AUTOMOBILE"},{acct:"16030",description:"Office Furniture",type:"A",line:"OFFICE EQUIPMENT"},{acct:"16040",description:"Office Equipment",type:"A",line:"OFFICE EQUIPMENT"},{acct:"16050",description:"Computer Hardware",type:"A",line:"COMPUTER EQUIPMENT"},{acct:"16060",description:"Computer Software",type:"A",line:"COMPUTER EQUIPMENT"},{acct:"16070",description:"Leasehold Improvements",type:"A",line:"LEASEHOLD IMPROVEMENTS"},{acct:"16080",description:"Signs",type:"A",line:"LEASEHOLD IMPROVEMENTS"},{acct:"16090",description:"Franchise Cost",type:"A",line:"FRANCHISE COSTS"},{acct:"17000",description:"Incorporation Cost",type:"A",line:"FRANCHISE COSTS"},{acct:"17010",description:"Acc. Depr. - Building",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17020",description:"Acc. Depr. - Vehicles",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17030",description:"Acc. Depr. - Office Furniture",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17040",description:"Acc. Depr. - Office Equipment",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17050",description:"Acc. Depr. - Comp. Hardware",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17060",description:"Acc. Depr. - Comp. Software",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17070",description:"Acc. Amor. - Leaseholds",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17080",description:"Acc. Depr. - Signs",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17090",description:"Acc. Amor. - Franchise Costs",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"20000",description:"Bank Operating Line",type:"L",line:"LIABILITY"},{acct:"21000",description:"A/P - Suppliers",type:"L",line:"ACCOUNTS PAYABLE"},{acct:"21100",description:"A/P - Other Brokers & Referrals",type:"L",line:"ACCOUNTS PAYABLE"},{acct:"21200",description:"Garnishment",type:"L",line:"LIABILITY"},{acct:"21300",description:"Liability For Trust Funds",type:"L",line:"LIABILITY"},{acct:"21400",description:"Loan - Clientel",type:"L",line:"LIABILITY"},{acct:"21450",description:"Loan Payable - 2199435 Ont Inc",type:"L",line:"LIABILITY"},{acct:"21500",description:"Commission Payable",type:"L",line:"LIABILITY"},{acct:"21600",description:"Brokers Commission",type:"L",line:"LIABILITY"},{acct:"22000",description:"Accrued Expenses",type:"L",line:"LIABILITY"},{acct:"23000",description:"HST Collected",type:"L",line:"LIABILITY"},{acct:"23001",description:"HST Input Tax Credit",type:"A",line:"ASSET"},{acct:"23002",description:"Agent's HST Contra",type:"L",line:"LIABILITY"},{acct:"23004",description:"HST Net Payable",type:"L",line:"LIABILITY"},{acct:"24000",description:"F.I.T. Withheld",type:"L",line:"LIABILITY"},{acct:"24001",description:"E.I. Withheld",type:"L",line:"LIABILITY"},{acct:"24002",description:"C.P.P. Withheld",type:"L",line:"LIABILITY"},{acct:"24500",description:"Payroll Clearing",type:"L",line:"LIABILITY"},{acct:"24700",description:"Vacation Pay Payable",type:"L",line:"LIABILITY"},{acct:"26000",description:"Income Tax Payable",type:"L",line:"LIABILITY"},{acct:"27000",description:"Bank Loan #1",type:"L",line:"LIABILITY"},{acct:"27010",description:"Long Term Loan - Computers",type:"L",line:"LIABILITY"},{acct:"28000",description:"Shareholder Loan - Sri",type:"L",line:"LIABILITY"},{acct:"28010",description:"Shareholder Loan - #2",type:"L",line:"LIABILITY"},{acct:"28020",description:"Shareholder Loan - #3",type:"L",line:"LIABILITY"},{acct:"28050",description:"Loan Payable - Executive Mortgage",type:"L",line:"LIABILITY"},{acct:"29000",description:"Suspense",type:"L",line:"LIABILITY"},{acct:"30000",description:"Preferred Stock",type:"E",line:"EQUITY"},{acct:"30010",description:"Common Stock",type:"E",line:"EQUITY"},{acct:"30050",description:"Dividend",type:"E",line:"EQUITY"},{acct:"39998",description:"Retained Earnings - Open Bal.",type:"E",line:"EQUITY"},{acct:"39999",description:"Retained Earnings - Y.T.D.",type:"E",line:"EQUITY"},{acct:"40100",description:"Commission Income",type:"R",line:"REVENUE"},{acct:"42100",description:"Interest Income",type:"R",line:"REVENUE"},{acct:"43100",description:"Other Income",type:"R",line:"REVENUE"},{acct:"44100",description:"Fee Deducted Income",type:"R",line:"REVENUE"},{acct:"45100",description:"Desk Fee Income",type:"R",line:"REVENUE"},{acct:"46100",description:"Brokers Commission Split",type:"R",line:"REVENUE"},{acct:"50100",description:"Agent's Commission",type:"E",line:"EXPENSE"},{acct:"51100",description:"Commission To Other Brokers",type:"E",line:"EXPENSE"},{acct:"52100",description:"Referral Fees",type:"E",line:"EXPENSE"},{acct:"60101",description:"Equip. Rental - Computer",type:"E",line:"EXPENSE"},{acct:"60102",description:"Equip. Rental - Furniture",type:"E",line:"EXPENSE"},{acct:"60199",description:"Equip. Rental - Misc.",type:"E",line:"EXPENSE"},{acct:"62101",description:"Rent & Occ. - Rent Expense",type:"E",line:"EXPENSE"},{acct:"62102",description:"Rent & Occ. - Common Area",type:"E",line:"EXPENSE"},{acct:"62103",description:"Rent & Occ. - Utilities",type:"E",line:"EXPENSE"},{acct:"62104",description:"Rent & Occ. - Repairs & Maint",type:"E",line:"EXPENSE"},{acct:"62105",description:"Rent & Occ. - Prop./Bus. Taxes",type:"E",line:"EXPENSE"},{acct:"63101",description:"Lic. & Ins. - Errors & Ommiss.",type:"E",line:"EXPENSE"},{acct:"63102",description:"Lic. & Ins. - Office Contents",type:"E",line:"EXPENSE"},{acct:"63103",description:"Lic. & Ins. - Licenses",type:"E",line:"EXPENSE"},{acct:"63199",description:"Lic. & Ins. - Misc.",type:"E",line:"EXPENSE"},{acct:"64101",description:"Selling - Mls Fees",type:"E",line:"EXPENSE"},{acct:"64102",description:"Selling - Signs",type:"E",line:"EXPENSE"},{acct:"64103",description:"Selling - Supplies",type:"E",line:"EXPENSE"},{acct:"64104",description:"Selling - Meetings",type:"E",line:"EXPENSE"},{acct:"64199",description:"Selling - Misc.",type:"E",line:"EXPENSE"},{acct:"65101",description:"Advertising - Newspapers",type:"E",line:"EXPENSE"},{acct:"65102",description:"Advertising - Other Medium",type:"E",line:"EXPENSE"},{acct:"65103",description:"Advertising - Web Solutions",type:"E",line:"EXPENSE"},{acct:"65104",description:"Advertising - Recovered",type:"E",line:"EXPENSE"},{acct:"65105",description:"Advertising - Promotional",type:"E",line:"EXPENSE"},{acct:"65199",description:"Advertising - Misc.",type:"E",line:"EXPENSE"},{acct:"66101",description:"Recruiting Lunches",type:"E",line:"EXPENSE"},{acct:"66102",description:"Recruiting Gifts",type:"E",line:"EXPENSE"},{acct:"66103",description:"Recruiting Agency",type:"E",line:"EXPENSE"},{acct:"66111",description:"Staff Lunches",type:"E",line:"EXPENSE"},{acct:"66112",description:"Staff Gifts",type:"E",line:"EXPENSE"},{acct:"66199",description:"Misc. Recruiting",type:"E",line:"EXPENSE"},{acct:"69101",description:"Franchise Costs - Realty Executives",type:"E",line:"EXPENSE"},{acct:"69103",description:"Franchise Costs - Advertising",type:"E",line:"EXPENSE"},{acct:"69199",description:"Franchise Costs - Misc.",type:"E",line:"EXPENSE"},{acct:"70101",description:"Payroll Exp. - Mgmt. Salaries",type:"E",line:"EXPENSE"},{acct:"70102",description:"Payroll Exp. - Salaries",type:"E",line:"EXPENSE"},{acct:"70103",description:"Payroll Exp. - Part-Time",type:"E",line:"EXPENSE"},{acct:"70104",description:"Payroll Exp. - Payroll",type:"E",line:"EXPENSE"},{acct:"70105",description:"Payroll Exp. - Group Insurance",type:"E",line:"EXPENSE"},{acct:"70106",description:"Payroll Exp. - E.H.T.",type:"E",line:"EXPENSE"},{acct:"70107",description:"Payroll Exp. - Recovered",type:"E",line:"EXPENSE"},{acct:"70199",description:"Payroll Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"71101",description:"Bank Charges - Interest",type:"E",line:"EXPENSE"},{acct:"71102",description:"Bank Charges - Loan Interest",type:"E",line:"EXPENSE"},{acct:"71104",description:"Bank Charges - Service Charges",type:"E",line:"EXPENSE"},{acct:"71199",description:"Bank Charges - Misc.",type:"E",line:"EXPENSE"},{acct:"72101",description:"Commun. Exp. - Telephone Lines",type:"E",line:"EXPENSE"},{acct:"72102",description:"Commun. Exp. - Internet Service",type:"E",line:"EXPENSE"},{acct:"72103",description:"Commun. Exp. - Pagers",type:"E",line:"EXPENSE"},{acct:"72104",description:"Commun. Exp. - Cellular",type:"E",line:"EXPENSE"},{acct:"72199",description:"Commun. Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"75101",description:"Office Exp. - Computer Supplies",type:"E",line:"EXPENSE"},{acct:"75102",description:"Office Exp. - Office Supplies",type:"E",line:"EXPENSE"},{acct:"75103",description:"Office Exp. - Printing",type:"E",line:"EXPENSE"},{acct:"75104",description:"Office Exp. - Postage",type:"E",line:"EXPENSE"},{acct:"75105",description:"Office Exp. - Courier Service",type:"E",line:"EXPENSE"},{acct:"75107",description:"Office Exp. - Business Taxes",type:"E",line:"EXPENSE"},{acct:"75108",description:"Office Exp. - Security Services",type:"E",line:"EXPENSE"},{acct:"75109",description:"Office Exp. - Automobile",type:"E",line:"EXPENSE"},{acct:"75110",description:"Office Exp. - Charitable",type:"E",line:"EXPENSE"},{acct:"75111",description:"Office Exp. - Bad Debts",type:"E",line:"EXPENSE"},{acct:"75112",description:"Office Exp. - Photocopies",type:"E",line:"EXPENSE"},{acct:"75114",description:"Office Exp. -Tel.Answer Servi Ces",type:"E",line:"EXPENSE"},{acct:"75115",description:"Office Exp. - Recruiting",type:"E",line:"EXPENSE"},{acct:"75116",description:"Office Exp. - Conventions/Seminars",type:"E",line:"EXPENSE"},{acct:"75117",description:"Office Exp. - Entertainment",type:"E",line:"EXPENSE"},{acct:"75199",description:"Office Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"76101",description:"Prof. Fees - Legal",type:"E",line:"EXPENSE"},{acct:"76102",description:"Prof. Fees - Accounting",type:"E",line:"EXPENSE"},{acct:"76103",description:"Prof. Fees - Consulting",type:"E",line:"EXPENSE"},{acct:"79101",description:"Depreciation",type:"E",line:"EXPENSE"},{acct:"79102",description:"Amortization - Franchise Fees",type:"E",line:"EXPENSE"},{acct:"80101",description:"Gain Or Loss On Fixed Assets",type:"E",line:"EXPENSE"},{acct:"90101",description:"Federal Income Taxes",type:"E",line:"EXPENSE"},{acct:"90102",description:"Provincial Income Taxes",type:"E",line:"EXPENSE"}],Tp=()=>{const[e,n]=(0,t.useState)("main"),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),A=eu(),u=[{id:"chart-accounts",title:"Chart of Accounts Menu",icon:cm},{id:"trial-balance",title:"Trial Balance - Detail Balance",icon:am},{id:"hst-report",title:"HST Report",icon:Fm},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:Bm},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:wm},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:om},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:ym}],h=()=>{window.print()};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen print:hidden",children:[(0,Rm.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Rm.jsxs)("button",{onClick:()=>A("/finance"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Finance"]})}),(0,Rm.jsx)("nav",{className:"p-4",children:(0,Rm.jsx)("ul",{className:"space-y-2",children:u.map(t=>(0,Rm.jsx)("li",{children:(0,Rm.jsx)("button",{onClick:()=>{var e;"trial-balance"===(e=t.id)?A("/trial-balance"):"hst-report"===e?A("/hst-report"):"trust-payments"===e?A("/real-estate-trust-payments"):"commission-trust"===e?A("/commission-trust-payments"):"commission-trust-ledger"===e?A("/commission-trust-ledger"):"general-account"===e?A("/general-account-payments"):n(e)},className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===t.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(t.icon,{className:"mr-3"}),(0,Rm.jsx)("span",{className:"text-sm font-medium",children:t.title})]})})},t.id))})})]}),(0,Rm.jsx)("div",{className:"flex-1 p-6 print:p-0",children:(()=>{switch(e){case"chart-accounts":default:return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Chart of Accounts"}),(0,Rm.jsxs)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,Rm.jsx)(km,{}),"Print"]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Acct #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Type"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Line Description"})]})}),(0,Rm.jsx)("tbody",{children:Ip.map((e,t)=>(0,Rm.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-mono text-sm",children:e.acct}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.type}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.line})]},t))})]})})]});case"trial-balance":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Trial Balance - Detail Balance"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed trial balance reports with account balances and adjustments."}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,Rm.jsxs)("tbody",{children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Cash"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Receivable"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Payable"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"($15,000)"})]})]})]})})]});case"hst-report":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"HST Report"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate and view HST (Harmonized Sales Tax) reports for tax filing."}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-3 text-blue-600",children:"HST Collected"}),(0,Rm.jsxs)("div",{className:"space-y-2",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Total Sales (HST Included):"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$100,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"HST Collected (13%):"}),(0,Rm.jsx)("span",{className:"font-semibold text-green-600",children:"$13,000"})]})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-3 text-red-600",children:"HST Paid"}),(0,Rm.jsxs)("div",{className:"space-y-2",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Total Purchases (HST Included):"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$50,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"HST Paid (13%):"}),(0,Rm.jsx)("span",{className:"font-semibold text-red-600",children:"$6,500"})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Net HST Owing"}),(0,Rm.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"$6,500 (HST Collected - HST Paid)"})]})]});case"trust-payments":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage real estate trust account payments and transactions."}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Trust Account Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Current Balance:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$150,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Pending Payments:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$25,000"})]})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Transactions"}),(0,Rm.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Deposit - Property Sale #1234"}),(0,Rm.jsx)("span",{className:"text-green-600",children:"+$75,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Payment - Vendor Invoice #567"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$15,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Deposit - Earnest Money"}),(0,Rm.jsx)("span",{className:"text-green-600",children:"+$5,000"})]})]})]})]})]});case"commission-trust":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage commission trust account payments and distributions."}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Commission Trust Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commissions:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$75,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Paid to Agents:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$60,000"})]})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Commission Payments"}),(0,Rm.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Agent Smith - Property #1234"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$12,500"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Agent Johnson - Property #5678"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$8,750"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Agent Brown - Property #9012"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$9,250"})]})]})]})]})]});case"commission-trust-ledger":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Ledger"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed transactions and balances for the commission trust account."}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,Rm.jsxs)("tbody",{children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-12-31"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Initial Balance"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$150,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$150,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-15"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Smith"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$12,500"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$137,500"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-20"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Johnson"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$8,750"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$128,750"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-25"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Brown"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$9,250"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$119,500"})]})]})]})})]});case"general-account":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage accounts payable and general expense payments."}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Accounts Payable Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Outstanding:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$45,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Overdue Amount:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2 text-red-600",children:"$12,000"})]})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Expense Payments"}),(0,Rm.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Office Rent - January 2024"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$3,500"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Utilities - December 2023"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$850"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Marketing Services"}),(0,Rm.jsx)("span",{className:"text-red-600",children:"-$2,200"})]})]})]})]})]})}})()})]}),(0,Rm.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          .print\\:p-0 {\n            padding: 0 !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "})]})};function Dp(e){return nm({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}const Lp=e=>{let{setUser:n}=e;const[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),A=()=>{s(""),i("")},u=async()=>{try{const e=await async function(e,t,n){if(Je(e.app))return Promise.reject(vt(e,"operation-not-supported-in-this-environment"));const r=In(e);jt(e,t,rr);const s=Xr(r,n);return new rs(r,"signInViaPopup",t,s).executeNotNull()}(nA,rA),t=e.user;n(t),d("")}catch(e){d("Error logging in with Google.")}};return(0,Rm.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-200 p-4",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-80 text-center",children:[(0,Rm.jsx)("img",{src:Qm,alt:"Logo",className:"h-16 mx-auto mb-6"}),(0,Rm.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-gray-900",children:o?"Login":"Sign Up"}),c&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:c}),(0,Rm.jsx)("label",{className:"block text-left font-bold mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"email",placeholder:"Enter email",value:r,onChange:e=>s(e.target.value),className:"w-full p-2 mb-4 border rounded focus:outline-yellow-400"}),(0,Rm.jsx)("label",{className:"block text-left font-bold mb-1",children:"Password"}),(0,Rm.jsx)("input",{type:"password",placeholder:"Enter password",value:a,onChange:e=>i(e.target.value),className:"w-full p-2 mb-6 border rounded focus:outline-yellow-400"}),o?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("button",{onClick:async()=>{try{const e=await function(e,t,n){return Je(e.app)?Promise.reject(Nt(e)):gr(_(e),nr.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&xr(e),t})}(nA,r,a),t=e.user;n(t),d("")}catch(e){"auth/user-not-found"===e.code?d("User not found. Please sign up first."):"auth/wrong-password"===e.code?d("Incorrect password. Please try again."):d("Login failed. Please check your credentials.")}},className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-semibold mb-4 transition",children:"Login"}),(0,Rm.jsxs)("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 border border-gray-300 py-2 rounded hover:bg-gray-100 transition mb-4",children:[(0,Rm.jsx)(Dp,{size:22}),"Login with Google"]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-700",children:["Don't have an account?"," ",(0,Rm.jsx)("button",{onClick:()=>{l(!1),d(""),A()},className:"text-blue-900 font-semibold hover:underline",children:"Sign Up"})]})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("button",{onClick:async()=>{try{const e=(await br(nA,r,a)).user;n(e),d("")}catch(e){"auth/email-already-in-use"===e.code?d("Email already in use. Please login instead."):"auth/weak-password"===e.code?d("Password too weak. Use at least 6 characters."):d("Sign up failed. Please try again.")}},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded font-semibold mb-4 transition",children:"Sign Up"}),(0,Rm.jsxs)("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 border border-gray-300 py-2 rounded hover:bg-gray-100 transition mb-4",children:[(0,Rm.jsx)(Dp,{size:22}),"Sign Up with Google"]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-700",children:["Already have an account?"," ",(0,Rm.jsx)("button",{onClick:()=>{l(!0),d(""),A()},className:"text-blue-900 font-semibold hover:underline",children:"Login"})]})]})]})})};var _p=n(5173),Pp=n(6922);function Up(e){return"string"===typeof e}function Op(e,t,n){return n.indexOf(e)===t}function Qp(e){return-1===e.indexOf(",")?e:e.split(",")}function Rp(e){if(!e)return e;if("C"===e||"posix"===e||"POSIX"===e)return"en-US";if(-1!==e.indexOf(".")){var t=e.split(".")[0];return Rp(void 0===t?"":t)}if(-1!==e.indexOf("@")){var n=e.split("@")[0];return Rp(void 0===n?"":n)}if(-1===e.indexOf("-")||(r=e).toLowerCase()!==r)return e;var r,s=e.split("-"),a=s[0],i=s[1],o=void 0===i?"":i;return"".concat(a,"-").concat(o.toUpperCase())}var Hp=Pp(function(e){var t=void 0===e?{}:e,n=t.useFallbackLocale,r=void 0===n||n,s=t.fallbackLocale,a=void 0===s?"en-US":s,i=[];if("undefined"!==typeof navigator){for(var o=[],l=0,c=navigator.languages||[];l<c.length;l++){var d=c[l];o=o.concat(Qp(d))}var A=navigator.language,u=A?Qp(A):A;i=i.concat(o,u)}return r&&i.push(a),i.filter(Up).map(Rp).filter(Op)},{cacheKey:JSON.stringify});var Mp=Pp(function(e){return Hp(e)[0]||null},{cacheKey:JSON.stringify});const Vp=Mp;function zp(e,t,n){return function(r,s){void 0===s&&(s=n);var a=e(r)+s;return t(a)}}function Kp(e){return function(t){return new Date(e(t).getTime()-1)}}function qp(e,t){return function(n){return[e(n),t(n)]}}function Gp(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function Wp(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function Yp(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Xp(e){var t=Gp(e),n=t+(1-t)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Jp=zp(Gp,Xp,-100),Zp=zp(Gp,Xp,100),$p=Kp(Zp),ef=zp(Gp,$p,-100),tf=(zp(Gp,$p,100),qp(Xp,$p));function nf(e){var t=Gp(e),n=t+(1-t)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var rf=zp(Gp,nf,-10),sf=zp(Gp,nf,10),af=Kp(sf),of=zp(Gp,af,-10),lf=(zp(Gp,af,10),qp(nf,af));function cf(e){var t=Gp(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var df=zp(Gp,cf,-1),Af=zp(Gp,cf,1),uf=Kp(Af),hf=zp(Gp,uf,-1),mf=(zp(Gp,uf,1),qp(cf,uf));function pf(e,t){return function(n,r){void 0===r&&(r=t);var s=Gp(n),a=Wp(n)+r,i=new Date;return i.setFullYear(s,a,1),i.setHours(0,0,0,0),e(i)}}function ff(e){var t=Gp(e),n=Wp(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var gf=pf(ff,-1),xf=pf(ff,1),bf=Kp(xf),yf=pf(bf,-1),vf=(pf(bf,1),qp(ff,bf));function wf(e,t){return function(n,r){void 0===r&&(r=t);var s=Gp(n),a=Wp(n),i=Yp(n)+r,o=new Date;return o.setFullYear(s,a,i),o.setHours(0,0,0,0),e(o)}}function Nf(e){var t=Gp(e),n=Wp(e),r=Yp(e),s=new Date;return s.setFullYear(t,n,r),s.setHours(0,0,0,0),s}wf(Nf,-1);var jf,Cf=Kp(wf(Nf,1)),Bf=(wf(Cf,-1),wf(Cf,1),qp(Nf,Cf));function Sf(e){return Yp(bf(e))}var Ef={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},kf={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},Ff=((jf={})[Ef.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],jf[Ef.HEBREW]=["he","he-IL"],jf[Ef.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],jf),If=[0,1,2,3,4,5,6],Tf=new Map;function Df(e){return function(t,n){return function(e){return function(t,n){var r=t||Vp();Tf.has(r)||Tf.set(r,new Map);var s=Tf.get(r);return s.has(e)||s.set(e,new Intl.DateTimeFormat(r||void 0,e).format),s.get(e)(n)}}(e)(t,function(e){var t=new Date(e);return new Date(t.setHours(12))}(n))}}Df({day:"numeric",month:"numeric",year:"numeric"});var Lf=Df({day:"numeric"}),_f=Df({day:"numeric",month:"long",year:"numeric"}),Pf=Df({month:"long"}),Uf=Df({month:"long",year:"numeric"}),Of=Df({weekday:"short"}),Qf=Df({weekday:"long"}),Rf=Df({year:"numeric"}),Hf=If[0],Mf=If[5],Vf=If[6];function zf(e,t){void 0===t&&(t=Ef.ISO_8601);var n=e.getDay();switch(t){case Ef.ISO_8601:return(n+6)%7;case Ef.ISLAMIC:return(n+1)%7;case Ef.HEBREW:case Ef.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function Kf(e,t){void 0===t&&(t=Ef.ISO_8601);var n=Gp(e),r=Wp(e),s=e.getDate()-zf(e,t);return new Date(n,r,s)}function qf(e,t){switch(e){case"century":return Xp(t);case"decade":return nf(t);case"year":return cf(t);case"month":return ff(t);case"day":return Nf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Gf(e,t){switch(e){case"century":return Zp(t);case"decade":return sf(t);case"year":return Af(t);case"month":return xf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Wf(e,t){switch(e){case"century":return $p(t);case"decade":return af(t);case"year":return uf(t);case"month":return bf(t);case"day":return Cf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Yf(e,t){switch(e){case"century":return tf(t);case"decade":return lf(t);case"year":return mf(t);case"month":return vf(t);case"day":return Bf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Xf(e,t,n){return void 0===t&&(t=Rf),n.map(function(n){return t(e,n)}).join(" \u2013 ")}function Jf(e,t,n){return Xf(e,t,lf(n))}function Zf(e){return e.getDay()===(new Date).getDay()}function $f(e,t){void 0===t&&(t=Ef.ISO_8601);var n=e.getDay();switch(t){case Ef.ISLAMIC:case Ef.HEBREW:return n===Mf||n===Vf;case Ef.ISO_8601:case Ef.GREGORY:return n===Vf||n===Hf;default:throw new Error("Unsupported calendar type.")}}var eg="react-calendar__navigation";function tg(e){var n=e.activeStartDate,r=e.drillUp,s=e.formatMonthYear,a=void 0===s?Uf:s,i=e.formatYear,o=void 0===i?Rf:i,l=e.locale,c=e.maxDate,d=e.minDate,A=e.navigationAriaLabel,u=void 0===A?"":A,h=e.navigationAriaLive,m=e.navigationLabel,p=e.next2AriaLabel,f=void 0===p?"":p,g=e.next2Label,x=void 0===g?"\xbb":g,b=e.nextAriaLabel,y=void 0===b?"":b,v=e.nextLabel,w=void 0===v?"\u203a":v,N=e.prev2AriaLabel,j=void 0===N?"":N,C=e.prev2Label,B=void 0===C?"\xab":C,S=e.prevAriaLabel,E=void 0===S?"":S,k=e.prevLabel,F=void 0===k?"\u2039":k,I=e.setActiveStartDate,T=e.showDoubleView,D=e.view,L=e.views.indexOf(D)>0,_="century"!==D,P=function(e,t){switch(e){case"century":return Jp(t);case"decade":return rf(t);case"year":return df(t);case"month":return gf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,n),U=_?function(e,t){switch(e){case"decade":return rf(t,-100);case"year":return df(t,-10);case"month":return gf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,n):void 0,O=Gf(D,n),Q=_?function(e,t){switch(e){case"decade":return sf(t,100);case"year":return Af(t,10);case"month":return xf(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,n):void 0,R=function(){if(P.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"century":return ef(t);case"decade":return of(t);case"year":return hf(t);case"month":return yf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,n);return d&&d>=e}(),H=_&&function(){if(U.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"decade":return of(t,-100);case"year":return hf(t,-10);case"month":return yf(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(D,n);return d&&d>=e}(),M=c&&c<O,V=_&&c&&c<Q;function z(e){var t=function(){switch(D){case"century":return function(e,t,n){return Xf(e,t,tf(n))}(l,o,e);case"decade":return Jf(l,o,e);case"year":return o(l,e);case"month":return a(l,e);default:throw new Error("Invalid view: ".concat(D,"."))}}();return m?m({date:e,label:t,locale:l||Mp()||void 0,view:D}):t}return t.createElement("div",{className:eg},null!==B&&_?t.createElement("button",{"aria-label":j,className:"".concat(eg,"__arrow ").concat(eg,"__prev2-button"),disabled:H,onClick:function(){I(U,"prev2")},type:"button"},B):null,null!==F&&t.createElement("button",{"aria-label":E,className:"".concat(eg,"__arrow ").concat(eg,"__prev-button"),disabled:R,onClick:function(){I(P,"prev")},type:"button"},F),function(){var e="".concat(eg,"__label");return t.createElement("button",{"aria-label":u,"aria-live":h,className:e,disabled:!L,onClick:r,style:{flexGrow:1},type:"button"},t.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--from")},z(n)),T?t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(e,"__divider")}," \u2013 "),t.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--to")},z(O))):null)}(),null!==w&&t.createElement("button",{"aria-label":y,className:"".concat(eg,"__arrow ").concat(eg,"__next-button"),disabled:M,onClick:function(){I(O,"next")},type:"button"},w),null!==x&&_?t.createElement("button",{"aria-label":f,className:"".concat(eg,"__arrow ").concat(eg,"__next2-button"),disabled:V,onClick:function(){I(Q,"next2")},type:"button"},x):null)}var ng=function(){return ng=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ng.apply(this,arguments)},rg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function sg(e){return"".concat(e,"%")}function ag(e){var n=e.children,r=e.className,s=e.count,a=e.direction,i=e.offset,o=e.style,l=e.wrap,c=rg(e,["children","className","count","direction","offset","style","wrap"]);return t.createElement("div",ng({className:r,style:ng({display:"flex",flexDirection:a,flexWrap:l?"wrap":"nowrap"},o)},c),t.Children.map(n,function(e,n){var r=i&&0===n?sg(100*i/s):null;return t.cloneElement(e,ng(ng({},e.props),{style:{flexBasis:sg(100/s),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:r,marginInlineStart:r,marginInlineEnd:0}}))}))}var ig,og=n(6440);function lg(e,t){return t[0]<=e&&t[1]>=e}function cg(e,t){return lg(e[0],t)||lg(e[1],t)}function dg(e,t,n){var r=[];if(cg(t,e)){r.push(n);var s=lg(e[0],t),a=lg(e[1],t);s&&r.push("".concat(n,"Start")),a&&r.push("".concat(n,"End")),s&&a&&r.push("".concat(n,"BothEnds"))}return r}function Ag(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,s="react-calendar__tile",a=[s];if(!n)return a;var i=new Date,o=function(){if(Array.isArray(n))return n;var t=e.dateType;if(!t)throw new Error("dateType is required when date is not an array of two dates");return Yf(t,n)}();if(lg(i,o)&&a.push("".concat(s,"--now")),!t||!function(e){return Array.isArray(e)?null!==e[0]&&null!==e[1]:null!==e}(t))return a;var l,c,d=function(){if(Array.isArray(t))return t;var n=e.valueType;if(!n)throw new Error("valueType is required when value is not an array of two dates");return Yf(n,t)}();c=o,(l=d)[0]<=c[0]&&l[1]>=c[1]?a.push("".concat(s,"--active")):cg(d,o)&&a.push("".concat(s,"--hasActive"));var A=dg(d,o,"".concat(s,"--range"));a.push.apply(a,A);var u=Array.isArray(t)?t:[t];if(r&&1===u.length){var h=dg(r>d[0]?[d[0],r]:[r,d[0]],o,"".concat(s,"--hover"));a.push.apply(a,h)}return a}var ug=((ig={})[kf.ARABIC]=Ef.ISLAMIC,ig[kf.HEBREW]=Ef.HEBREW,ig[kf.ISO_8601]=Ef.ISO_8601,ig[kf.US]=Ef.GREGORY,ig);var hg=!1;function mg(e){if(function(e){return void 0!==e&&e in kf}(e)){var t=ug[e];return og(hg,'Specifying calendarType="'.concat(e,'" is deprecated. Use calendarType="').concat(t,'" instead.')),hg=!0,t}return e}function pg(e){for(var n=e.className,r=e.count,s=void 0===r?3:r,a=e.dateTransform,i=e.dateType,o=e.end,l=e.hover,c=e.offset,d=e.renderTile,A=e.start,u=e.step,h=void 0===u?1:u,m=e.value,p=e.valueType,f=[],g=A;g<=o;g+=h){var x=a(g);f.push(d({classes:Ag({date:x,dateType:i,hover:l,value:m,valueType:p}),date:x}))}return t.createElement(ag,{className:n,count:s,offset:c,wrap:!0},f)}function fg(e){var n=e.activeStartDate,r=e.children,s=e.classes,a=e.date,i=e.formatAbbr,o=e.locale,l=e.maxDate,c=e.maxDateTransform,d=e.minDate,A=e.minDateTransform,u=e.onClick,h=e.onMouseOver,m=e.style,p=e.tileClassName,f=e.tileContent,g=e.tileDisabled,x=e.view,b=(0,t.useMemo)(function(){return"function"===typeof p?p({activeStartDate:n,date:a,view:x}):p},[n,a,p,x]),y=(0,t.useMemo)(function(){return"function"===typeof f?f({activeStartDate:n,date:a,view:x}):f},[n,a,f,x]);return t.createElement("button",{className:zm(s,b),disabled:d&&A(d)>a||l&&c(l)<a||g&&g({activeStartDate:n,date:a,view:x}),onClick:u?function(e){return u(a,e)}:void 0,onFocus:h?function(){return h(a)}:void 0,onMouseOver:h?function(){return h(a)}:void 0,style:m,type:"button"},i?t.createElement("abbr",{"aria-label":i(o,a)},r):r,y)}var gg=function(){return gg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},gg.apply(this,arguments)},xg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},bg="react-calendar__century-view__decades__decade";function yg(e){var n=e.classes,r=void 0===n?[]:n,s=e.currentCentury,a=e.formatYear,i=void 0===a?Rf:a,o=xg(e,["classes","currentCentury","formatYear"]),l=o.date,c=o.locale,d=[];return r&&d.push.apply(d,r),bg&&d.push(bg),Xp(l).getFullYear()!==s&&d.push("".concat(bg,"--neighboringCentury")),t.createElement(fg,gg({},o,{classes:d,maxDateTransform:af,minDateTransform:nf,view:"century"}),Jf(c,i,l))}var vg=function(){return vg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},vg.apply(this,arguments)},wg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function Ng(e){var n=e.activeStartDate,r=e.hover,s=e.showNeighboringCentury,a=e.value,i=e.valueType,o=wg(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=Gp(Xp(n)),c=l+(s?119:99);return t.createElement(pg,{className:"react-calendar__century-view__decades",dateTransform:nf,dateType:"decade",end:c,hover:r,renderTile:function(e){var r=e.date,s=wg(e,["date"]);return t.createElement(yg,vg({key:r.getTime()},o,s,{activeStartDate:n,currentCentury:l,date:r}))},start:l,step:10,value:a,valueType:i})}var jg=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},Cg=Object.values(Ef),Bg=Object.values(kf),Sg=["century","decade","year","month"],Eg=_p.oneOf(jg(jg([],Cg,!0),Bg,!0)),kg=_p.oneOfType([_p.string,_p.arrayOf(_p.string)]),Fg=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var s=e.maxDate;return s&&r>s?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, minDate cannot be larger than maxDate.")):null},Ig=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var s=e.minDate;return s&&r<s?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, maxDate cannot be smaller than minDate.")):null},Tg=_p.oneOfType([_p.func,_p.exact({current:_p.any})]),Dg=_p.arrayOf(_p.oneOfType([_p.instanceOf(Date),_p.oneOf([null])]).isRequired),Lg=_p.oneOfType([_p.instanceOf(Date),_p.oneOf([null]),Dg]),_g=(_p.arrayOf(_p.oneOf(Sg)),function(e,t,n){var r=e[t];return void 0===r||"string"===typeof r&&-1!==Sg.indexOf(r)?null:new Error("Invalid prop `".concat(t,"` of value `").concat(r,"` supplied to `").concat(n,"`, expected one of [").concat(Sg.map(function(e){return'"'.concat(e,'"')}).join(", "),"]."))});_g.isRequired=function(e,t,n,r,s){var a=e[t];return a?_g(e,t,n):new Error("The prop `".concat(t,"` is marked as required in `").concat(n,"`, but its value is `").concat(a,"`."))};var Pg={activeStartDate:_p.instanceOf(Date).isRequired,hover:_p.instanceOf(Date),locale:_p.string,maxDate:Ig,minDate:Fg,onClick:_p.func,onMouseOver:_p.func,tileClassName:_p.oneOfType([_p.func,kg]),tileContent:_p.oneOfType([_p.func,_p.node]),value:Lg,valueType:_p.oneOf(["century","decade","year","month","day"]).isRequired},Ug=(_p.instanceOf(Date).isRequired,_p.arrayOf(_p.string.isRequired).isRequired,_p.instanceOf(Date).isRequired,_p.string,_p.func,_p.func,_p.objectOf(_p.oneOfType([_p.string,_p.number])),_p.oneOfType([_p.func,kg]),_p.oneOfType([_p.func,_p.node]),_p.func,function(){return Ug=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Ug.apply(this,arguments)}),Og=function(e){return t.createElement("div",{className:"react-calendar__century-view"},t.createElement(Ng,Ug({},e)))};Og.propTypes=Ug(Ug({},Pg),{showNeighboringCentury:_p.bool});const Qg=Og;var Rg=function(){return Rg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Rg.apply(this,arguments)},Hg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},Mg="react-calendar__decade-view__years__year";function Vg(e){var n=e.classes,r=void 0===n?[]:n,s=e.currentDecade,a=e.formatYear,i=void 0===a?Rf:a,o=Hg(e,["classes","currentDecade","formatYear"]),l=o.date,c=o.locale,d=[];return r&&d.push.apply(d,r),Mg&&d.push(Mg),nf(l).getFullYear()!==s&&d.push("".concat(Mg,"--neighboringDecade")),t.createElement(fg,Rg({},o,{classes:d,maxDateTransform:uf,minDateTransform:cf,view:"decade"}),i(c,l))}var zg=function(){return zg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},zg.apply(this,arguments)},Kg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function qg(e){var n=e.activeStartDate,r=e.hover,s=e.showNeighboringDecade,a=e.value,i=e.valueType,o=Kg(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=Gp(nf(n)),c=l+(s?11:9);return t.createElement(pg,{className:"react-calendar__decade-view__years",dateTransform:cf,dateType:"year",end:c,hover:r,renderTile:function(e){var r=e.date,s=Kg(e,["date"]);return t.createElement(Vg,zg({key:r.getTime()},o,s,{activeStartDate:n,currentDecade:l,date:r}))},start:l,value:a,valueType:i})}var Gg=function(){return Gg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Gg.apply(this,arguments)},Wg=function(e){return t.createElement("div",{className:"react-calendar__decade-view"},t.createElement(qg,Gg({},e)))};Wg.propTypes=Gg(Gg({},Pg),{showNeighboringDecade:_p.bool});const Yg=Wg;var Xg=function(){return Xg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Xg.apply(this,arguments)},Jg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},Zg=function(e,t,n){if(n||2===arguments.length)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))};function $g(e){var n=e.classes,r=void 0===n?[]:n,s=e.formatMonth,a=void 0===s?Pf:s,i=e.formatMonthYear,o=void 0===i?Uf:i,l=Jg(e,["classes","formatMonth","formatMonthYear"]),c=l.date,d=l.locale;return t.createElement(fg,Xg({},l,{classes:Zg(Zg([],r,!0),["react-calendar__year-view__months__month"],!1),formatAbbr:o,maxDateTransform:bf,minDateTransform:ff,view:"year"}),a(d,c))}var ex=function(){return ex=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ex.apply(this,arguments)},tx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function nx(e){var n=e.activeStartDate,r=e.hover,s=e.value,a=e.valueType,i=tx(e,["activeStartDate","hover","value","valueType"]),o=Gp(n);return t.createElement(pg,{className:"react-calendar__year-view__months",dateTransform:function(e){var t=new Date;return t.setFullYear(o,e,1),ff(t)},dateType:"month",end:11,hover:r,renderTile:function(e){var r=e.date,s=tx(e,["date"]);return t.createElement($g,ex({key:r.getTime()},i,s,{activeStartDate:n,date:r}))},start:0,value:s,valueType:a})}var rx=function(){return rx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},rx.apply(this,arguments)},sx=function(e){return t.createElement("div",{className:"react-calendar__year-view"},t.createElement(nx,rx({},e)))};sx.propTypes=rx({},Pg);const ax=sx;var ix=function(){return ix=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ix.apply(this,arguments)},ox=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},lx="react-calendar__month-view__days__day";function cx(e){var n=e.calendarType,r=e.classes,s=void 0===r?[]:r,a=e.currentMonthIndex,i=e.formatDay,o=void 0===i?Lf:i,l=e.formatLongDate,c=void 0===l?_f:l,d=ox(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),A=mg(n),u=d.date,h=d.locale,m=[];return s&&m.push.apply(m,s),lx&&m.push(lx),$f(u,A)&&m.push("".concat(lx,"--weekend")),u.getMonth()!==a&&m.push("".concat(lx,"--neighboringMonth")),t.createElement(fg,ix({},d,{classes:m,formatAbbr:c,maxDateTransform:Cf,minDateTransform:Nf,view:"month"}),o(h,u))}var dx=function(){return dx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},dx.apply(this,arguments)},Ax=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};function ux(e){var n=e.activeStartDate,r=e.calendarType,s=e.hover,a=e.showFixedNumberOfWeeks,i=e.showNeighboringMonth,o=e.value,l=e.valueType,c=Ax(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=mg(r),A=Gp(n),u=Wp(n),h=a||i,m=zf(n,d),p=h?0:m,f=1+(h?-m:0),g=function(){if(a)return f+42-1;var e=Sf(n);if(i){var t=new Date;return t.setFullYear(A,u,e),t.setHours(0,0,0,0),e+(7-zf(t,d)-1)}return e}();return t.createElement(pg,{className:"react-calendar__month-view__days",count:7,dateTransform:function(e){var t=new Date;return t.setFullYear(A,u,e),Nf(t)},dateType:"day",hover:s,end:g,renderTile:function(e){var s=e.date,a=Ax(e,["date"]);return t.createElement(cx,dx({key:s.getTime()},c,a,{activeStartDate:n,calendarType:r,currentMonthIndex:u,date:s}))},offset:p,start:f,value:o,valueType:l})}var hx="react-calendar__month-view__weekdays",mx="".concat(hx,"__weekday");function px(e){for(var n=e.calendarType,r=e.formatShortWeekday,s=void 0===r?Of:r,a=e.formatWeekday,i=void 0===a?Qf:a,o=e.locale,l=e.onMouseLeave,c=mg(n),d=ff(new Date),A=Gp(d),u=Wp(d),h=[],m=1;m<=7;m+=1){var p=new Date(A,u,m-zf(d,c)),f=i(o,p);h.push(t.createElement("div",{key:m,className:zm(mx,Zf(p)&&"".concat(mx,"--current"),$f(p,c)&&"".concat(mx,"--weekend"))},t.createElement("abbr",{"aria-label":f,title:f},s(o,p).replace(".",""))))}return t.createElement(ag,{className:hx,count:7,onFocus:l,onMouseOver:l},h)}var fx=function(){return fx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},fx.apply(this,arguments)},gx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},xx="react-calendar__tile";function bx(e){var n=e.onClickWeekNumber,r=e.weekNumber,s=t.createElement("span",null,r);if(n){var a=e.date,i=e.onClickWeekNumber,o=e.weekNumber,l=gx(e,["date","onClickWeekNumber","weekNumber"]);return t.createElement("button",fx({},l,{className:xx,onClick:function(e){return i(o,a,e)},type:"button"}),s)}e.date,e.onClickWeekNumber,e.weekNumber,l=gx(e,["date","onClickWeekNumber","weekNumber"]);return t.createElement("div",fx({},l,{className:xx}),s)}function yx(e){var n=e.activeStartDate,r=e.calendarType,s=e.onClickWeekNumber,a=e.onMouseLeave,i=e.showFixedNumberOfWeeks,o=mg(r),l=function(){if(i)return 6;var e=Sf(n)-(7-zf(n,o));return 1+Math.ceil(e/7)}(),c=function(){for(var e=Gp(n),t=Wp(n),r=Yp(n),s=[],a=0;a<l;a+=1)s.push(Kf(new Date(e,t,r+7*a),o));return s}(),d=c.map(function(e){return function(e,t){void 0===t&&(t=Ef.ISO_8601);var n,r=t===Ef.GREGORY?Ef.GREGORY:Ef.ISO_8601,s=Kf(e,t),a=Gp(e)+1;do{n=Kf(new Date(a,0,r===Ef.ISO_8601?4:1),t),a-=1}while(e<n);return Math.round((s.getTime()-n.getTime())/6048e5)+1}(e,o)});return t.createElement(ag,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},d.map(function(e,n){var r=c[n];if(!r)throw new Error("date is not defined");return t.createElement(bx,{key:e,date:r,onClickWeekNumber:s,weekNumber:e})}))}var vx=function(){return vx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},vx.apply(this,arguments)},wx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};var Nx=function(e){var n=e.activeStartDate,r=e.locale,s=e.onMouseLeave,a=e.showFixedNumberOfWeeks,i=e.calendarType,o=void 0===i?function(e){if(e)for(var t=0,n=Object.entries(Ff);t<n.length;t++){var r=n[t],s=r[0];if(r[1].includes(e))return s}return Ef.ISO_8601}(r):i,l=e.formatShortWeekday,c=e.formatWeekday,d=e.onClickWeekNumber,A=e.showWeekNumbers,u=wx(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);var h="react-calendar__month-view";return t.createElement("div",{className:zm(h,A?"".concat(h,"--weekNumbers"):"")},t.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},A?t.createElement(yx,{activeStartDate:n,calendarType:o,onClickWeekNumber:d,onMouseLeave:s,showFixedNumberOfWeeks:a}):null,t.createElement("div",{style:{flexGrow:1,width:"100%"}},t.createElement(px,{calendarType:o,formatShortWeekday:l,formatWeekday:c,locale:r,onMouseLeave:s}),t.createElement(ux,vx({calendarType:o},u)))))};Nx.propTypes=vx(vx({},Pg),{calendarType:Eg,formatDay:_p.func,formatLongDate:_p.func,formatShortWeekday:_p.func,formatWeekday:_p.func,onClickWeekNumber:_p.func,onMouseLeave:_p.func,showFixedNumberOfWeeks:_p.bool,showNeighboringMonth:_p.bool,showWeekNumbers:_p.bool});const jx=Nx;var Cx=function(){return Cx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Cx.apply(this,arguments)},Bx="react-calendar",Sx=["century","decade","year","month"],Ex=["decade","year","month","day"],kx=new Date;kx.setFullYear(1,0,1),kx.setHours(0,0,0,0);var Fx=new Date(864e13);function Ix(e){return e instanceof Date?e:new Date(e)}function Tx(e,t){return Sx.slice(Sx.indexOf(e),Sx.indexOf(t)+1)}function Dx(e,t,n){return e&&function(e,t,n){return-1!==Tx(t,n).indexOf(e)}(e,t,n)?e:n}function Lx(e){var t=Sx.indexOf(e);return Ex[t]}function _x(e,t){var n=e.value,r=e.minDate,s=e.maxDate,a=e.maxDetail,i=function(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=Ix(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}(n,t);if(!i)return null;var o=Lx(a);return function(e,t,n){return t&&t>e?t:n&&n<e?n:e}(function(){switch(t){case 0:return qf(o,i);case 1:return Wf(o,i);default:throw new Error("Invalid index value: ".concat(t))}}(),r,s)}var Px=function(e){return _x(e,0)},Ux=function(e){return _x(e,1)},Ox=function(e){return[Px,Ux].map(function(t){return t(e)})};function Qx(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,s=e.minDetail,a=e.value;return qf(Dx(e.view,s,n),Px({value:a,minDate:r,maxDate:t,maxDetail:n})||new Date)}function Rx(e){return e&&(!Array.isArray(e)||1===e.length)}function Hx(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var Mx,Vx=(0,t.forwardRef)(function(e,n){var r=e.activeStartDate,s=e.allowPartialRange,a=e.calendarType,i=e.className,o=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,d=e.formatDay,A=e.formatLongDate,u=e.formatMonth,h=e.formatMonthYear,m=e.formatShortWeekday,p=e.formatWeekday,f=e.formatYear,g=e.goToRangeStartOnSelect,x=void 0===g||g,b=e.inputRef,y=e.locale,v=e.maxDate,w=void 0===v?Fx:v,N=e.maxDetail,j=void 0===N?"month":N,C=e.minDate,B=void 0===C?kx:C,S=e.minDetail,E=void 0===S?"century":S,k=e.navigationAriaLabel,F=e.navigationAriaLive,I=e.navigationLabel,T=e.next2AriaLabel,D=e.next2Label,L=e.nextAriaLabel,_=e.nextLabel,P=e.onActiveStartDateChange,U=e.onChange,O=e.onClickDay,Q=e.onClickDecade,R=e.onClickMonth,H=e.onClickWeekNumber,M=e.onClickYear,V=e.onDrillDown,z=e.onDrillUp,K=e.onViewChange,q=e.prev2AriaLabel,G=e.prev2Label,W=e.prevAriaLabel,Y=e.prevLabel,X=e.returnValue,J=void 0===X?"start":X,Z=e.selectRange,$=e.showDoubleView,ee=e.showFixedNumberOfWeeks,te=e.showNavigation,ne=void 0===te||te,re=e.showNeighboringCentury,se=e.showNeighboringDecade,ae=e.showNeighboringMonth,ie=void 0===ae||ae,oe=e.showWeekNumbers,le=e.tileClassName,ce=e.tileContent,de=e.tileDisabled,Ae=e.value,ue=e.view,he=(0,t.useState)(o),me=he[0],pe=he[1],fe=(0,t.useState)(null),ge=fe[0],xe=fe[1],be=(0,t.useState)(Array.isArray(l)?l.map(function(e){return null!==e?Ix(e):null}):null!==l&&void 0!==l?Ix(l):null),ye=be[0],ve=be[1],we=(0,t.useState)(c),Ne=we[0],je=we[1],Ce=r||me||function(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,s=e.defaultView,a=e.maxDate,i=e.maxDetail,o=e.minDate,l=e.minDetail,c=e.value,d=e.view,A=Dx(d,l,i),u=t||n;return u?qf(A,u):Qx({maxDate:a,maxDetail:i,minDate:o,minDetail:l,value:c||r,view:d||s})}({activeStartDate:r,defaultActiveStartDate:o,defaultValue:l,defaultView:c,maxDate:w,maxDetail:j,minDate:B,minDetail:E,value:Ae,view:ue}),Be=function(){var e=Z&&Rx(ye)?ye:void 0!==Ae?Ae:ye;return e?Array.isArray(e)?e.map(function(e){return null!==e?Ix(e):null}):null!==e?Ix(e):null:null}(),Se=Lx(j),Ee=Dx(ue||Ne,E,j),ke=Tx(E,j),Fe=Z?ge:null,Ie=ke.indexOf(Ee)<ke.length-1,Te=ke.indexOf(Ee)>0,De=(0,t.useCallback)(function(e){return function(){switch(J){case"start":return Px;case"end":return Ux;case"range":return Ox;default:throw new Error("Invalid returnValue.")}}()({maxDate:w,maxDetail:j,minDate:B,value:e})},[w,j,B,J]),Le=(0,t.useCallback)(function(e,t){pe(e);var n={action:t,activeStartDate:e,value:Be,view:Ee};P&&!Hx(Ce,e)&&P(n)},[Ce,P,Be,Ee]),_e=(0,t.useCallback)(function(e,t){var n=function(){switch(Ee){case"century":return Q;case"decade":return M;case"year":return R;case"month":return O;default:throw new Error("Invalid view: ".concat(Ee,"."))}}();n&&n(e,t)},[O,Q,R,M,Ee]),Pe=(0,t.useCallback)(function(e,t){if(Ie){_e(e,t);var n=ke[ke.indexOf(Ee)+1];if(!n)throw new Error("Attempted to drill down from the lowest view.");pe(e),je(n);var r={action:"drillDown",activeStartDate:e,value:Be,view:n};P&&!Hx(Ce,e)&&P(r),K&&Ee!==n&&K(r),V&&V(r)}},[Ce,Ie,P,_e,V,K,Be,Ee,ke]),Ue=(0,t.useCallback)(function(){if(Te){var e=ke[ke.indexOf(Ee)-1];if(!e)throw new Error("Attempted to drill up from the highest view.");var t=qf(e,Ce);pe(t),je(e);var n={action:"drillUp",activeStartDate:t,value:Be,view:e};P&&!Hx(Ce,t)&&P(n),K&&Ee!==e&&K(n),z&&z(n)}},[Ce,Te,P,z,K,Be,Ee,ke]),Oe=(0,t.useCallback)(function(e,t){var n=Be;_e(e,t);var r,a=Z&&!Rx(n);if(Z)if(a)r=qf(Se,e);else{if(!n)throw new Error("previousValue is required");if(Array.isArray(n))throw new Error("previousValue must not be an array");r=function(e,t,n){var r=[t,n].sort(function(e,t){return e.getTime()-t.getTime()});return[qf(e,r[0]),Wf(e,r[1])]}(Se,n,e)}else r=De(e);var i=!Z||a||x?Qx({maxDate:w,maxDetail:j,minDate:B,minDetail:E,value:r,view:Ee}):null;t.persist(),pe(i),ve(r);var o={action:"onChange",activeStartDate:i,value:r,view:Ee};if(P&&!Hx(Ce,i)&&P(o),U)if(Z)if(Rx(r)){if(s){if(Array.isArray(r))throw new Error("value must not be an array");U([r||null,null],t)}}else U(r||null,t);else U(r||null,t)},[Ce,s,De,x,w,j,B,E,P,U,_e,Z,Be,Se,Ee]);function Qe(e){xe(e)}function Re(){xe(null)}function He(e){var n={activeStartDate:e?Gf(Ee,Ce):qf(Ee,Ce),hover:Fe,locale:y,maxDate:w,minDate:B,onClick:Ie?Pe:Oe,onMouseOver:Z?Qe:void 0,tileClassName:le,tileContent:ce,tileDisabled:de,value:Be,valueType:Se};switch(Ee){case"century":return t.createElement(Qg,Cx({formatYear:f,showNeighboringCentury:re},n));case"decade":return t.createElement(Yg,Cx({formatYear:f,showNeighboringDecade:se},n));case"year":return t.createElement(ax,Cx({formatMonth:u,formatMonthYear:h},n));case"month":return t.createElement(jx,Cx({calendarType:a,formatDay:d,formatLongDate:A,formatShortWeekday:m,formatWeekday:p,onClickWeekNumber:H,onMouseLeave:Z?Re:void 0,showFixedNumberOfWeeks:"undefined"!==typeof ee?ee:$,showNeighboringMonth:ie,showWeekNumbers:oe},n));default:throw new Error("Invalid view: ".concat(Ee,"."))}}(0,t.useImperativeHandle)(n,function(){return{activeStartDate:Ce,drillDown:Pe,drillUp:Ue,onChange:Oe,setActiveStartDate:Le,value:Be,view:Ee}},[Ce,Pe,Ue,Oe,Le,Be,Ee]);var Me=Array.isArray(Be)?Be:[Be];return t.createElement("div",{className:zm(Bx,Z&&1===Me.length&&"".concat(Bx,"--selectRange"),$&&"".concat(Bx,"--doubleView"),i),ref:b},ne?t.createElement(tg,{activeStartDate:Ce,drillUp:Ue,formatMonthYear:h,formatYear:f,locale:y,maxDate:w,minDate:B,navigationAriaLabel:k,navigationAriaLive:F,navigationLabel:I,next2AriaLabel:T,next2Label:D,nextAriaLabel:L,nextLabel:_,prev2AriaLabel:q,prev2Label:G,prevAriaLabel:W,prevLabel:Y,setActiveStartDate:Le,showDoubleView:$,view:Ee,views:ke}):null,t.createElement("div",{className:"".concat(Bx,"__viewContainer"),onBlur:Z?Re:void 0,onMouseLeave:Z?Re:void 0},He(),$?He(!0):null))}),zx=_p.instanceOf(Date),Kx=_p.oneOfType([_p.string,_p.instanceOf(Date)]),qx=_p.oneOfType([Kx,(Mx=Kx,_p.arrayOf(Mx))]);Vx.propTypes={activeStartDate:zx,allowPartialRange:_p.bool,calendarType:Eg,className:kg,defaultActiveStartDate:zx,defaultValue:qx,defaultView:_g,formatDay:_p.func,formatLongDate:_p.func,formatMonth:_p.func,formatMonthYear:_p.func,formatShortWeekday:_p.func,formatWeekday:_p.func,formatYear:_p.func,goToRangeStartOnSelect:_p.bool,inputRef:Tg,locale:_p.string,maxDate:Ig,maxDetail:_p.oneOf(Sx),minDate:Fg,minDetail:_p.oneOf(Sx),navigationAriaLabel:_p.string,navigationAriaLive:_p.oneOf(["off","polite","assertive"]),navigationLabel:_p.func,next2AriaLabel:_p.string,next2Label:_p.node,nextAriaLabel:_p.string,nextLabel:_p.node,onActiveStartDateChange:_p.func,onChange:_p.func,onClickDay:_p.func,onClickDecade:_p.func,onClickMonth:_p.func,onClickWeekNumber:_p.func,onClickYear:_p.func,onDrillDown:_p.func,onDrillUp:_p.func,onViewChange:_p.func,prev2AriaLabel:_p.string,prev2Label:_p.node,prevAriaLabel:_p.string,prevLabel:_p.node,returnValue:_p.oneOf(["start","end","range"]),selectRange:_p.bool,showDoubleView:_p.bool,showFixedNumberOfWeeks:_p.bool,showNavigation:_p.bool,showNeighboringCentury:_p.bool,showNeighboringDecade:_p.bool,showNeighboringMonth:_p.bool,showWeekNumbers:_p.bool,tileClassName:_p.oneOfType([_p.func,kg]),tileContent:_p.oneOfType([_p.func,_p.node]),tileDisabled:_p.func,value:qx,view:_g};const Gx=Vx,Wx={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Yx(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Xx={date:Yx({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Yx({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Yx({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Jx={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Zx(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const $x={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Zx({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Zx({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Zx({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Zx({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Zx({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function eb(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const tb={ordinalNumber:(nb={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(nb.matchPattern);if(!n)return null;const r=n[0],s=e.match(nb.parsePattern);if(!s)return null;let a=nb.valueCallback?nb.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:eb({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:eb({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:eb({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:eb({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:eb({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var nb;const rb={code:"en-US",formatDistance:(e,t,n)=>{let r;const s=Wx[e];return r="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Xx,formatRelative:(e,t,n,r)=>Jx[e],localize:$x,match:tb,options:{weekStartsOn:0,firstWeekContainsDate:1}},sb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ab=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ib={p:ab,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return sb(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",sb(r,t)).replace("{{time}}",ab(s,t))}},ob=/^D+$/,lb=/^Y+$/,cb=["D","DD","YY","YYYY"];function db(e){return ob.test(e)}function Ab(e){return lb.test(e)}function ub(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),cb.includes(e))throw new RangeError(r)}Math.pow(10,8);const hb=6048e5,mb=Symbol.for("constructDateFrom");function pb(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&mb in e?e[mb](t):e instanceof Date?new e.constructor(t):new Date(t)}let fb={};function gb(){return fb}function xb(){return Object.assign({},gb())}function bb(e,t){return pb(t||e,e)}function yb(e,t){const n=function(e){var t;return"function"===typeof e&&(null===(t=e.prototype)||void 0===t?void 0:t.constructor)===e}(t)?new t(0):pb(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class vb{constructor(){(0,W.A)(this,"subPriority",0)}validate(e,t){return!0}}class wb extends vb{constructor(e,t,n,r,s){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Nb extends vb{constructor(e,t){super(),(0,W.A)(this,"priority",10),(0,W.A)(this,"subPriority",-1),this.context=e||(e=>pb(t,e))}set(e,t){return t.timestampIsSet?e:pb(e,yb(e,this.context))}}class jb{run(e,t,n,r){const s=this.parse(e,t,n,r);return s?{setter:new wb(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,n){return!0}}const Cb=/^(1[0-2]|0?\d)/,Bb=/^(3[0-1]|[0-2]?\d)/,Sb=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Eb=/^(5[0-3]|[0-4]?\d)/,kb=/^(2[0-3]|[0-1]?\d)/,Fb=/^(2[0-4]|[0-1]?\d)/,Ib=/^(1[0-1]|0?\d)/,Tb=/^(1[0-2]|0?\d)/,Db=/^[0-5]?\d/,Lb=/^[0-5]?\d/,_b=/^\d/,Pb=/^\d{1,2}/,Ub=/^\d{1,3}/,Ob=/^\d{1,4}/,Qb=/^-?\d+/,Rb=/^-?\d/,Hb=/^-?\d{1,2}/,Mb=/^-?\d{1,3}/,Vb=/^-?\d{1,4}/,zb=/^([+-])(\d{2})(\d{2})?|Z/,Kb=/^([+-])(\d{2})(\d{2})|Z/,qb=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Gb=/^([+-])(\d{2}):(\d{2})|Z/,Wb=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Yb(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Xb(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Jb(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};return{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}}function Zb(e){return Xb(Qb,e)}function $b(e,t){switch(e){case 1:return Xb(_b,t);case 2:return Xb(Pb,t);case 3:return Xb(Ub,t);case 4:return Xb(Ob,t);default:return Xb(new RegExp("^\\d{1,"+e+"}"),t)}}function ey(e,t){switch(e){case 1:return Xb(Rb,t);case 2:return Xb(Hb,t);case 3:return Xb(Mb,t);case 4:return Xb(Vb,t);default:return Xb(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ty(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function ny(e,t){const n=t>0,r=n?t:1-t;let s;if(r<=50)s=e||100;else{const t=r+50;s=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?s:1-s}function ry(e){return e%400===0||e%4===0&&e%100!==0}function sy(e,t){var n,r,s,a,i,o;const l=gb(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=bb(e,null===t||void 0===t?void 0:t.in),A=d.getDay(),u=(A<c?7:0)+A-c;return d.setDate(d.getDate()-u),d.setHours(0,0,0,0),d}function ay(e,t){var n,r,s,a,i,o;const l=bb(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),d=gb(),A=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:d.firstWeekContainsDate)&&void 0!==r?r:null===(o=d.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,u=pb((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(c+1,0,A),u.setHours(0,0,0,0);const h=sy(u,t),m=pb((null===t||void 0===t?void 0:t.in)||e,0);m.setFullYear(c,0,A),m.setHours(0,0,0,0);const p=sy(m,t);return+l>=+h?c+1:+l>=+p?c:c-1}function iy(e,t){return sy(e,X(X({},t),{},{weekStartsOn:1}))}function oy(e,t){var n,r,s,a,i,o;const l=gb(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:l.firstWeekContainsDate)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:1,d=ay(e,t),A=pb((null===t||void 0===t?void 0:t.in)||e,0);A.setFullYear(d,0,c),A.setHours(0,0,0,0);return sy(A,t)}function ly(e,t){const n=bb(e,null===t||void 0===t?void 0:t.in),r=+sy(n,t)-+oy(n,t);return Math.round(r/hb)+1}function cy(e,t,n){const r=bb(e,null===n||void 0===n?void 0:n.in),s=ly(r,n)-t;return r.setDate(r.getDate()-7*s),bb(r,null===n||void 0===n?void 0:n.in)}function dy(e,t){const n=bb(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),s=pb(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=iy(s),i=pb(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=iy(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Ay(e,t){const n=dy(e,t),r=pb((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),iy(r)}function uy(e,t){const n=bb(e,null===t||void 0===t?void 0:t.in),r=+iy(n)-+Ay(n);return Math.round(r/hb)+1}function hy(e,t,n){const r=bb(e,null===n||void 0===n?void 0:n.in),s=uy(r,n)-t;return r.setDate(r.getDate()-7*s),r}const my=[31,28,31,30,31,30,31,31,30,31,30,31],py=[31,29,31,30,31,30,31,31,30,31,30,31];function fy(e,t,n){const r=bb(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?pb((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function gy(e,t,n){var r,s,a,i,o,l;const c=gb(),d=null!==(r=null!==(s=null!==(a=null!==(i=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==i?i:null===n||void 0===n||null===(o=n.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:c.weekStartsOn)&&void 0!==s?s:null===(l=c.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,A=bb(e,null===n||void 0===n?void 0:n.in),u=A.getDay(),h=7-d;return fy(A,t<0||t>6?t-(u+h)%7:((t%7+7)%7+h)%7-(u+h)%7,n)}function xy(e,t){const n=bb(e,null===t||void 0===t?void 0:t.in).getDay();return 0===n?7:n}function by(e,t,n){const r=bb(e,null===n||void 0===n?void 0:n.in);return fy(r,t-xy(r,n),n)}function yy(e){const t=bb(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}const vy={G:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",140),(0,W.A)(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",130),(0,W.A)(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Yb($b(4,e),r);case"yo":return Yb(n.ordinalNumber(e,{unit:"year"}),r);default:return Yb($b(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=ny(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const s="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},Y:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",130),(0,W.A)(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Yb($b(4,e),r);case"Yo":return Yb(n.ordinalNumber(e,{unit:"year"}),r);default:return Yb($b(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const s=ay(e,r);if(n.isTwoDigitYear){const t=ny(n.year,s);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),sy(e,r)}const a="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(a,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),sy(e,r)}},R:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",130),(0,W.A)(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return ey("R"===t?4:t.length,e)}set(e,t,n){const r=pb(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),iy(r)}},u:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",130),(0,W.A)(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return ey("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",120),(0,W.A)(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return $b(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",120),(0,W.A)(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return $b(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,W.A)(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return Yb(Xb(Cb,e),r);case"MM":return Yb($b(2,e),r);case"Mo":return Yb(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",110),(0,W.A)(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return Yb(Xb(Cb,e),r);case"LL":return Yb($b(2,e),r);case"Lo":return Yb(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",100),(0,W.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return Xb(Eb,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return $b(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return sy(cy(e,n,r),r)}},I:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",100),(0,W.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return Xb(Eb,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return $b(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return iy(hy(e,n))}},d:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"subPriority",1),(0,W.A)(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return Xb(Bb,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return $b(t.length,e)}}validate(e,t){const n=ry(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=py[r]:t>=1&&t<=my[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"subpriority",1),(0,W.A)(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return Xb(Sb,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return $b(t.length,e)}}validate(e,t){return ry(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=gy(e,n,r)).setHours(0,0,0,0),e}},e:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Yb($b(t.length,e),s);case"eo":return Yb(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=gy(e,n,r)).setHours(0,0,0,0),e}},c:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Yb($b(t.length,e),s);case"co":return Yb(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=gy(e,n,r)).setHours(0,0,0,0),e}},i:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",90),(0,W.A)(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return $b(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Yb(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Yb(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Yb(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Yb(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=by(e,n)).setHours(0,0,0,0),e}},a:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",80),(0,W.A)(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ty(n),0,0,0),e}},b:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",80),(0,W.A)(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ty(n),0,0,0),e}},B:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",80),(0,W.A)(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(ty(n),0,0,0),e}},h:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",70),(0,W.A)(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return Xb(Tb,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return $b(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",70),(0,W.A)(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return Xb(kb,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return $b(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",70),(0,W.A)(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return Xb(Ib,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return $b(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",70),(0,W.A)(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return Xb(Fb,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return $b(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",60),(0,W.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return Xb(Db,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return $b(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",50),(0,W.A)(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return Xb(Lb,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return $b(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",30),(0,W.A)(this,"incompatibleTokens",["t","T"])}parse(e,t){return Yb($b(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",10),(0,W.A)(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return Jb(zb,e);case"XX":return Jb(Kb,e);case"XXXX":return Jb(qb,e);case"XXXXX":return Jb(Wb,e);default:return Jb(Gb,e)}}set(e,t,n){return t.timestampIsSet?e:pb(e,e.getTime()-yy(e)-n)}},x:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",10),(0,W.A)(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return Jb(zb,e);case"xx":return Jb(Kb,e);case"xxxx":return Jb(qb,e);case"xxxxx":return Jb(Wb,e);default:return Jb(Gb,e)}}set(e,t,n){return t.timestampIsSet?e:pb(e,e.getTime()-yy(e)-n)}},t:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",40),(0,W.A)(this,"incompatibleTokens","*")}parse(e){return Zb(e)}set(e,t,n){return[pb(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends jb{constructor(){super(...arguments),(0,W.A)(this,"priority",20),(0,W.A)(this,"incompatibleTokens","*")}parse(e){return Zb(e)}set(e,t,n){return[pb(e,n),{timestampIsSet:!0}]}}},wy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ny=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jy=/^'([^]*?)'?$/,Cy=/''/g,By=/\S/,Sy=/[a-zA-Z]/;function Ey(e,t,n,r){var s,a,i,o,l,c,d,A,u,h,m,p,f,g;const x=()=>pb((null===r||void 0===r?void 0:r.in)||n,NaN),b=xb(),y=null!==(s=null!==(a=null===r||void 0===r?void 0:r.locale)&&void 0!==a?a:b.locale)&&void 0!==s?s:rb,v=null!==(i=null!==(o=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(d=r.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:b.firstWeekContainsDate)&&void 0!==o?o:null===(A=b.locale)||void 0===A||null===(A=A.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==i?i:1,w=null!==(u=null!==(h=null!==(m=null!==(p=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==p?p:null===r||void 0===r||null===(f=r.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==m?m:b.weekStartsOn)&&void 0!==h?h:null===(g=b.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==u?u:0;if(!t)return e?x():bb(n,null===r||void 0===r?void 0:r.in);const N={firstWeekContainsDate:v,weekStartsOn:w,locale:y},j=[new Nb(null===r||void 0===r?void 0:r.in,n)],C=t.match(Ny).map(e=>{const t=e[0];if(t in ib){return(0,ib[t])(e,y.formatLong)}return e}).join("").match(wy),B=[];for(let F of C){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Ab(F)||ub(F,t,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!db(F)||ub(F,t,e);const n=F[0],s=vy[n];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=B.find(e=>t.includes(e.token)||e.token===n);if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(F,"` at the same time"))}else if("*"===s.incompatibleTokens&&B.length>0)throw new RangeError("The format string mustn't contain `".concat(F,"` and any other token at the same time"));B.push({token:n,fullToken:F});const r=s.run(e,F,y.match,N);if(!r)return x();j.push(r.setter),e=r.rest}else{if(n.match(Sy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===F?F="'":"'"===n&&(F=ky(F)),0!==e.indexOf(F))return x();e=e.slice(F.length)}}if(e.length>0&&By.test(e))return x();const S=j.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,n)=>n.indexOf(e)===t).map(e=>j.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let E=bb(n,null===r||void 0===r?void 0:r.in);if(isNaN(+E))return x();const k={};for(const F of S){if(!F.validate(E,N))return x();const e=F.set(E,k,N);Array.isArray(e)?(E=e[0],Object.assign(k,e[1])):E=e}return E}function ky(e){return e.match(jy)[1].replace(Cy,"'")}function Fy(e,t){var n,r,s,a,i,o;const l=gb(),c=null!==(n=null!==(r=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:l.weekStartsOn)&&void 0!==r?r:null===(o=l.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:0,d=bb(e,null===t||void 0===t?void 0:t.in),A=d.getDay(),u=6+(A<c?-7:0)-(A-c);return d.setDate(d.getDate()+u),d.setHours(23,59,59,999),d}function Iy(e,t,n){const r=+bb(e,null===n||void 0===n?void 0:n.in),[s,a]=[+bb(t.start,null===n||void 0===n?void 0:n.in),+bb(t.end,null===n||void 0===n?void 0:n.in)].sort((e,t)=>e-t);return r>=s&&r<=a}function Ty(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dy}=Object.prototype,{getPrototypeOf:Ly}=Object,{iterator:_y,toStringTag:Py}=Symbol,Uy=(Oy=Object.create(null),e=>{const t=Dy.call(e);return Oy[t]||(Oy[t]=t.slice(8,-1).toLowerCase())});var Oy;const Qy=e=>(e=e.toLowerCase(),t=>Uy(t)===e),Ry=e=>t=>typeof t===e,{isArray:Hy}=Array,My=Ry("undefined");function Vy(e){return null!==e&&!My(e)&&null!==e.constructor&&!My(e.constructor)&&qy(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const zy=Qy("ArrayBuffer");const Ky=Ry("string"),qy=Ry("function"),Gy=Ry("number"),Wy=e=>null!==e&&"object"===typeof e,Yy=e=>{if("object"!==Uy(e))return!1;const t=Ly(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Py in e)&&!(_y in e)},Xy=Qy("Date"),Jy=Qy("File"),Zy=Qy("Blob"),$y=Qy("FileList"),ev=Qy("URLSearchParams"),[tv,nv,rv,sv]=["ReadableStream","Request","Response","Headers"].map(Qy);function av(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Hy(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Vy(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let i;for(n=0;n<a;n++)i=r[n],t.call(null,e[i],i,e)}}function iv(e,t){if(Vy(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const ov="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,lv=e=>!My(e)&&e!==ov;const cv=(dv="undefined"!==typeof Uint8Array&&Ly(Uint8Array),e=>dv&&e instanceof dv);var dv;const Av=Qy("HTMLFormElement"),uv=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),hv=Qy("RegExp"),mv=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};av(n,(n,s)=>{let a;!1!==(a=t(n,s,e))&&(r[s]=a||n)}),Object.defineProperties(e,r)};const pv=Qy("AsyncFunction"),fv=(gv="function"===typeof setImmediate,xv=qy(ov.postMessage),gv?setImmediate:xv?((e,t)=>(ov.addEventListener("message",n=>{let{source:r,data:s}=n;r===ov&&s===e&&t.length&&t.shift()()},!1),n=>{t.push(n),ov.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var gv,xv;const bv="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ov):"undefined"!==typeof process&&process.nextTick||fv,yv={isArray:Hy,isArrayBuffer:zy,isBuffer:Vy,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||qy(e.append)&&("formdata"===(t=Uy(e))||"object"===t&&qy(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zy(e.buffer),t},isString:Ky,isNumber:Gy,isBoolean:e=>!0===e||!1===e,isObject:Wy,isPlainObject:Yy,isEmptyObject:e=>{if(!Wy(e)||Vy(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Tu){return!1}},isReadableStream:tv,isRequest:nv,isResponse:rv,isHeaders:sv,isUndefined:My,isDate:Xy,isFile:Jy,isBlob:Zy,isRegExp:hv,isFunction:qy,isStream:e=>Wy(e)&&qy(e.pipe),isURLSearchParams:ev,isTypedArray:cv,isFileList:$y,forEach:av,merge:function e(){const{caseless:t,skipUndefined:n}=lv(this)&&this||{},r={},s=(s,a)=>{const i=t&&iv(r,a)||a;Yy(r[i])&&Yy(s)?r[i]=e(r[i],s):Yy(s)?r[i]=e({},s):Hy(s)?r[i]=s.slice():n&&My(s)||(r[i]=s)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&av(arguments[a],s);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return av(t,(t,r)=>{n&&qy(t)?e[r]=Ty(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,a,i;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&Ly(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Uy,kindOfTest:Qy,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Hy(e))return e;let t=e.length;if(!Gy(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[_y]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Av,hasOwnProperty:uv,hasOwnProp:uv,reduceDescriptors:mv,freezeMethods:e=>{mv(e,(t,n)=>{if(qy(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];qy(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Hy(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:iv,global:ov,isContextDefined:lv,isSpecCompliantForm:function(e){return!!(e&&qy(e.append)&&"FormData"===e[Py]&&e[_y])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Wy(e)){if(t.indexOf(e)>=0)return;if(Vy(e))return e;if(!("toJSON"in e)){t[r]=e;const s=Hy(e)?[]:{};return av(e,(e,t)=>{const a=n(e,r+1);!My(a)&&(s[t]=a)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:pv,isThenable:e=>e&&(Wy(e)||qy(e))&&qy(e.then)&&qy(e.catch),setImmediate:fv,asap:bv,isIterable:e=>null!=e&&qy(e[_y])};function vv(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}yv.inherits(vv,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:yv.toJSONObject(this.config),code:this.code,status:this.status}}});const wv=vv.prototype,Nv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Nv[e]={value:e}}),Object.defineProperties(vv,Nv),Object.defineProperty(wv,"isAxiosError",{value:!0}),vv.from=(e,t,n,r,s,a)=>{const i=Object.create(wv);yv.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return vv.call(i,o,l,n,r,s),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const jv=vv;function Cv(e){return yv.isPlainObject(e)||yv.isArray(e)}function Bv(e){return yv.endsWith(e,"[]")?e.slice(0,-2):e}function Sv(e,t,n){return e?e.concat(t).map(function(e,t){return e=Bv(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Ev=yv.toFlatObject(yv,{},null,function(e){return/^is[A-Z]/.test(e)});const kv=function(e,t,n){if(!yv.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=yv.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!yv.isUndefined(t[e])})).metaTokens,s=n.visitor||c,a=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&yv.isSpecCompliantForm(t);if(!yv.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(yv.isDate(e))return e.toISOString();if(yv.isBoolean(e))return e.toString();if(!o&&yv.isBlob(e))throw new jv("Blob is not supported. Use a Buffer instead.");return yv.isArrayBuffer(e)||yv.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(yv.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(yv.isArray(e)&&function(e){return yv.isArray(e)&&!e.some(Cv)}(e)||(yv.isFileList(e)||yv.endsWith(n,"[]"))&&(o=yv.toArray(e)))return n=Bv(n),o.forEach(function(e,r){!yv.isUndefined(e)&&null!==e&&t.append(!0===i?Sv([n],r,a):null===i?n:n+"[]",l(e))}),!1;return!!Cv(e)||(t.append(Sv(s,n,a),l(e)),!1)}const d=[],A=Object.assign(Ev,{defaultVisitor:c,convertValue:l,isVisitable:Cv});if(!yv.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!yv.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),yv.forEach(n,function(n,a){!0===(!(yv.isUndefined(n)||null===n)&&s.call(t,n,yv.isString(a)?a.trim():a,r,A))&&e(n,r?r.concat(a):[a])}),d.pop()}}(e),t};function Fv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Iv(e,t){this._pairs=[],e&&kv(e,this,t)}const Tv=Iv.prototype;Tv.append=function(e,t){this._pairs.push([e,t])},Tv.toString=function(e){const t=e?function(t){return e.call(this,t,Fv)}:Fv;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Dv=Iv;function Lv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _v(e,t,n){if(!t)return e;const r=n&&n.encode||Lv;yv.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(a=s?s(t,n):yv.isURLSearchParams(t)?t.toString():new Dv(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Pv=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){yv.forEach(this.handlers,function(t){null!==t&&e(t)})}},Uv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ov={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Dv,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Qv="undefined"!==typeof window&&"undefined"!==typeof document,Rv="object"===typeof navigator&&navigator||void 0,Hv=Qv&&(!Rv||["ReactNative","NativeScript","NS"].indexOf(Rv.product)<0),Mv="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Vv=Qv&&window.location.href||"http://localhost",zv=X(X({},e),Ov);const Kv=function(e){function t(e,n,r,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=s>=e.length;if(a=!a&&yv.isArray(r)?r.length:a,o)return yv.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&yv.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],s)&&yv.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}(r[a])),!i}if(yv.isFormData(e)&&yv.isFunction(e.entries)){const n={};return yv.forEachEntry(e,(e,r)=>{t(function(e){return yv.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const qv={transitional:Uv,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=yv.isObject(e);s&&yv.isHTMLForm(e)&&(e=new FormData(e));if(yv.isFormData(e))return r?JSON.stringify(Kv(e)):e;if(yv.isArrayBuffer(e)||yv.isBuffer(e)||yv.isStream(e)||yv.isFile(e)||yv.isBlob(e)||yv.isReadableStream(e))return e;if(yv.isArrayBufferView(e))return e.buffer;if(yv.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return kv(e,new zv.classes.URLSearchParams,X({visitor:function(e,t,n,r){return zv.isNode&&yv.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=yv.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return kv(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(yv.isString(e))try{return(t||JSON.parse)(e),yv.trim(e)}catch(Tu){if("SyntaxError"!==Tu.name)throw Tu}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||qv.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(yv.isResponse(e)||yv.isReadableStream(e))return e;if(e&&yv.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(Tu){if(n){if("SyntaxError"===Tu.name)throw jv.from(Tu,jv.ERR_BAD_RESPONSE,this,null,this.response);throw Tu}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zv.classes.FormData,Blob:zv.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};yv.forEach(["delete","get","head","post","put","patch"],e=>{qv.headers[e]={}});const Gv=qv,Wv=yv.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yv=Symbol("internals");function Xv(e){return e&&String(e).trim().toLowerCase()}function Jv(e){return!1===e||null==e?e:yv.isArray(e)?e.map(Jv):String(e)}function Zv(e,t,n,r,s){return yv.isFunction(r)?r.call(this,t,n):(s&&(t=n),yv.isString(t)?yv.isString(r)?-1!==t.indexOf(r):yv.isRegExp(r)?r.test(t):void 0:void 0)}class $v{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Xv(t);if(!s)throw new Error("header name must be a non-empty string");const a=yv.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Jv(e))}const a=(e,t)=>yv.forEach(e,(e,n)=>s(e,n,t));if(yv.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(yv.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&Wv[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(yv.isObject(e)&&yv.isIterable(e)){let n,r,s={};for(const t of e){if(!yv.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?yv.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Xv(e)){const n=yv.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(yv.isFunction(t))return t.call(this,e,n);if(yv.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xv(e)){const n=yv.findKey(this,e);return!(!n||void 0===this[n]||t&&!Zv(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Xv(e)){const s=yv.findKey(n,e);!s||t&&!Zv(0,n[s],s,t)||(delete n[s],r=!0)}}return yv.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!Zv(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return yv.forEach(this,(r,s)=>{const a=yv.findKey(n,s);if(a)return t[a]=Jv(r),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();i!==s&&delete t[s],t[i]=Jv(r),n[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return yv.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&yv.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Yv]=this[Yv]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Xv(e);t[r]||(!function(e,t){const n=yv.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return yv.isArray(e)?e.forEach(r):r(e),this}}$v.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),yv.reduceDescriptors($v.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),yv.freezeMethods($v);const ew=$v;function tw(e,t){const n=this||Gv,r=t||n,s=ew.from(r.headers);let a=r.data;return yv.forEach(e,function(e){a=e.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function nw(e){return!(!e||!e.__CANCEL__)}function rw(e,t,n){jv.call(this,null==e?"canceled":e,jv.ERR_CANCELED,t,n),this.name="CanceledError"}yv.inherits(rw,jv,{__CANCEL__:!0});const sw=rw;function aw(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new jv("Request failed with status code "+n.status,[jv.ERR_BAD_REQUEST,jv.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const iw=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];s||(s=l),n[a]=o,r[a]=l;let d=i,A=0;for(;d!==a;)A+=n[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-s<t)return;const u=c&&l-c;return u?Math.round(1e3*A/u):void 0}};const ow=function(e,t){let n,r,s=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=a?i(l,e):(n=l,r||(r=setTimeout(()=>{r=null,i(n)},a-t)))},()=>n&&i(n)]},lw=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=iw(50,250);return ow(n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,o=a-r,l=s(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},cw=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},dw=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yv.asap(()=>e(...n))},Aw=zv.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zv.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zv.origin),zv.navigator&&/(msie|trident)/i.test(zv.navigator.userAgent)):()=>!0,uw=zv.hasStandardBrowserEnv?{write(e,t,n,r,s,a,i){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];yv.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),yv.isString(r)&&o.push("path=".concat(r)),yv.isString(s)&&o.push("domain=".concat(s)),!0===a&&o.push("secure"),yv.isString(i)&&o.push("SameSite=".concat(i)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function hw(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const mw=e=>e instanceof ew?X({},e):e;function pw(e,t){t=t||{};const n={};function r(e,t,n,r){return yv.isPlainObject(e)&&yv.isPlainObject(t)?yv.merge.call({caseless:r},e,t):yv.isPlainObject(t)?yv.merge({},t):yv.isArray(t)?t.slice():t}function s(e,t,n,s){return yv.isUndefined(t)?yv.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function a(e,t){if(!yv.isUndefined(t))return r(void 0,t)}function i(e,t){return yv.isUndefined(t)?yv.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,a){return a in t?r(n,s):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>s(mw(e),mw(t),0,!0)};return yv.forEach(Object.keys(X(X({},e),t)),function(r){const a=l[r]||s,i=a(e[r],t[r],r);yv.isUndefined(i)&&a!==o||(n[r]=i)}),n}const fw=e=>{const t=pw({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=t;if(t.headers=i=ew.from(i),t.url=_v(hw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),yv.isFormData(n))if(zv.hasStandardBrowserEnv||zv.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(yv.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&i.set(n,r)})}if(zv.hasStandardBrowserEnv&&(r&&yv.isFunction(r)&&(r=r(t)),r||!1!==r&&Aw(t.url))){const e=s&&a&&uw.read(a);e&&i.set(s,e)}return t},gw="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=fw(e);let s=r.data;const a=ew.from(r.headers).normalize();let i,o,l,c,d,{responseType:A,onUploadProgress:u,onDownloadProgress:h}=r;function m(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function f(){if(!p)return;const r=ew.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());aw(function(e){t(e),m()},function(e){n(e),m()},{data:A&&"text"!==A&&"json"!==A?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=f:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(f)},p.onabort=function(){p&&(n(new jv("Request aborted",jv.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const r=t&&t.message?t.message:"Network Error",s=new jv(r,jv.ERR_NETWORK,e,p);s.event=t||null,n(s),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Uv;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new jv(t,s.clarifyTimeoutError?jv.ETIMEDOUT:jv.ECONNABORTED,e,p)),p=null},void 0===s&&a.setContentType(null),"setRequestHeader"in p&&yv.forEach(a.toJSON(),function(e,t){p.setRequestHeader(t,e)}),yv.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),A&&"json"!==A&&(p.responseType=r.responseType),h&&([l,d]=lw(h,!0),p.addEventListener("progress",l)),u&&p.upload&&([o,c]=lw(u),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new sw(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===zv.protocols.indexOf(g)?n(new jv("Unsupported protocol "+g+":",jv.ERR_BAD_REQUEST,e)):p.send(s||null)})},xw=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof jv?t:new sw(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,s(new jv("timeout ".concat(t," of ms exceeded"),jv.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>yv.asap(i),o}};function bw(e,t){this.v=e,this.k=t}function yw(e){return function(){return new vw(e.apply(this,arguments))}}function vw(e){var t,n;function r(t,n){try{var a=e[t](n),i=a.value,o=i instanceof bw;Promise.resolve(o?i.v:i).then(function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return r(l,n);n=e[l](n).value}s(a.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise(function(a,i){var o={key:e,arg:s,resolve:a,reject:i,next:null};n?n=n.next=o:(t=n=o,r(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function ww(e){return new bw(e,0)}function Nw(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new bw(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function jw(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Cw(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Cw(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Cw=function(e){this.s=e,this.n=e.next},Cw.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Cw(e)}vw.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},vw.prototype.next=function(e){return this._invoke("next",e)},vw.prototype.throw=function(e){return this._invoke("throw",e)},vw.prototype.return=function(e){return this._invoke("return",e)};const Bw=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Sw=function(){var e=yw(function*(e,t){var n,r=!1,s=!1;try{for(var a,i=jw(Ew(e));r=!(a=yield ww(i.next())).done;r=!1){const e=a.value;yield*Nw(jw(Bw(e,t)))}}catch(o){s=!0,n=o}finally{try{r&&null!=i.return&&(yield ww(i.return()))}finally{if(s)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Ew=function(){var e=yw(function*(e){if(e[Symbol.asyncIterator])return void(yield*Nw(jw(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield ww(t.read());if(e)break;yield n}}finally{yield ww(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),kw=(e,t,n,r)=>{const s=Sw(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:Fw}=yv,Iw=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(yv.global),{ReadableStream:Tw,TextEncoder:Dw}=yv.global,Lw=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Tu){return!1}},_w=e=>{e=yv.merge.call({skipUndefined:!0},Iw,e);const{fetch:t,Request:n,Response:r}=e,s=t?Fw(t):"function"===typeof fetch,a=Fw(n),i=Fw(r);if(!s)return!1;const o=s&&Fw(Tw),l=s&&("function"===typeof Dw?(e=>t=>e.encode(t))(new Dw):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=a&&o&&Lw(()=>{let e=!1;const t=new n(zv.origin,{body:new Tw,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=i&&o&&Lw(()=>yv.isReadableStream(new r("").body)),A={stream:d&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!A[e]&&(A[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new jv("Response type '".concat(e,"' is not supported"),jv.ERR_NOT_SUPPORT,n)})});const u=async(e,t)=>{const r=yv.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(yv.isBlob(e))return e.size;if(yv.isSpecCompliantForm(e)){const t=new n(zv.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return yv.isArrayBufferView(e)||yv.isArrayBuffer(e)?e.byteLength:(yv.isURLSearchParams(e)&&(e+=""),yv.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:s,method:i,data:o,signal:l,cancelToken:h,timeout:m,onDownloadProgress:p,onUploadProgress:f,responseType:g,headers:x,withCredentials:b="same-origin",fetchOptions:y}=fw(e),v=t||fetch;g=g?(g+"").toLowerCase():"text";let w=xw([l,h&&h.toAbortSignal()],m),N=null;const j=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let C;try{if(f&&c&&"get"!==i&&"head"!==i&&0!==(C=await u(x,o))){let e,t=new n(s,{method:"POST",body:o,duplex:"half"});if(yv.isFormData(o)&&(e=t.headers.get("content-type"))&&x.setContentType(e),t.body){const[e,n]=cw(C,lw(dw(f)));o=kw(t.body,65536,e,n)}}yv.isString(b)||(b=b?"include":"omit");const t=a&&"credentials"in n.prototype,l=X(X({},y),{},{signal:w,method:i.toUpperCase(),headers:x.normalize().toJSON(),body:o,duplex:"half",credentials:t?b:void 0});N=a&&new n(s,l);let h=await(a?v(N,y):v(s,l));const m=d&&("stream"===g||"response"===g);if(d&&(p||m&&j)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});const t=yv.toFiniteNumber(h.headers.get("content-length")),[n,s]=p&&cw(t,lw(dw(p),!0))||[];h=new r(kw(h.body,65536,n,()=>{s&&s(),j&&j()}),e)}g=g||"text";let B=await A[yv.findKey(A,g)||"text"](h,e);return!m&&j&&j(),await new Promise((t,n)=>{aw(t,n,{data:B,headers:ew.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:N})})}catch(B){if(j&&j(),B&&"TypeError"===B.name&&/Load failed|fetch/i.test(B.message))throw Object.assign(new jv("Network Error",jv.ERR_NETWORK,e,N),{cause:B.cause||B});throw jv.from(B,B&&B.code,e,N)}}},Pw=new Map,Uw=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,a=[r,s,n];let i,o,l=a.length,c=Pw;for(;l--;)i=a[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:_w(t)),c=o;return o},Ow=(Uw(),{http:null,xhr:gw,fetch:{get:Uw}});yv.forEach(Ow,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Tu){}Object.defineProperty(e,"adapterName",{value:t})}});const Qw=e=>"- ".concat(e),Rw=e=>yv.isFunction(e)||null===e||!1===e;const Hw={getAdapter:function(e,t){e=yv.isArray(e)?e:[e];const{length:n}=e;let r,s;const a={};for(let i=0;i<n;i++){let n;if(r=e[i],s=r,!Rw(r)&&(s=Ow[(n=String(r)).toLowerCase()],void 0===s))throw new jv("Unknown adapter '".concat(n,"'"));if(s&&(yv.isFunction(s)||(s=s.get(t))))break;a[n||"#"+i]=s}if(!s){const e=Object.entries(a).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(Qw).join("\n"):" "+Qw(e[0]):"as no adapter specified";throw new jv("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:Ow};function Mw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sw(null,e)}function Vw(e){Mw(e),e.headers=ew.from(e.headers),e.data=tw.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Hw.getAdapter(e.adapter||Gv.adapter,e)(e).then(function(t){return Mw(e),t.data=tw.call(e,e.transformResponse,t),t.headers=ew.from(t.headers),t},function(t){return nw(t)||(Mw(e),t&&t.response&&(t.response.data=tw.call(e,e.transformResponse,t.response),t.response.headers=ew.from(t.response.headers))),Promise.reject(t)})}const zw="1.13.1",Kw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Kw[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const qw={};Kw.transitional=function(e,t,n){function r(e,t){return"[Axios v"+zw+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,a)=>{if(!1===e)throw new jv(r(s," has been removed"+(t?" in "+t:"")),jv.ERR_DEPRECATED);return t&&!qw[s]&&(qw[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,a)}},Kw.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Gw={assertOptions:function(e,t,n){if("object"!==typeof e)throw new jv("options must be an object",jv.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new jv("option "+a+" must be "+n,jv.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new jv("Unknown option "+a,jv.ERR_BAD_OPTION)}},validators:Kw},Ww=Gw.validators;class Yw{constructor(e){this.defaults=e||{},this.interceptors={request:new Pv,response:new Pv}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Tu){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=pw(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&Gw.assertOptions(n,{silentJSONParsing:Ww.transitional(Ww.boolean),forcedJSONParsing:Ww.transitional(Ww.boolean),clarifyTimeoutError:Ww.transitional(Ww.boolean)},!1),null!=r&&(yv.isFunction(r)?t.paramsSerializer={serialize:r}:Gw.assertOptions(r,{encode:Ww.function,serialize:Ww.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Gw.assertOptions(t,{baseUrl:Ww.spelling("baseURL"),withXsrfToken:Ww.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&yv.merge(s.common,s[t.method]);s&&yv.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=ew.concat(a,s);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,A=0;if(!o){const e=[Vw.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);A<d;)c=c.then(e[A++],e[A++]);return c}d=i.length;let u=t;for(;A<d;){const e=i[A++],t=i[A++];try{u=e(u)}catch(h){t.call(this,h);break}}try{c=Vw.call(this,u)}catch(h){return Promise.reject(h)}for(A=0,d=l.length;A<d;)c=c.then(l[A++],l[A++]);return c}getUri(e){return _v(hw((e=pw(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}yv.forEach(["delete","get","head","options"],function(e){Yw.prototype[e]=function(t,n){return this.request(pw(n||{},{method:e,url:t,data:(n||{}).data}))}}),yv.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(pw(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Yw.prototype[e]=t(),Yw.prototype[e+"Form"]=t(!0)});const Xw=Yw;class Jw{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new sw(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Jw(function(t){e=t});return{token:t,cancel:e}}}const Zw=Jw;const $w={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($w).forEach(e=>{let[t,n]=e;$w[n]=t});const eN=$w;const tN=function e(t){const n=new Xw(t),r=Ty(Xw.prototype.request,n);return yv.extend(r,Xw.prototype,n,{allOwnKeys:!0}),yv.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(pw(t,n))},r}(Gv);tN.Axios=Xw,tN.CanceledError=sw,tN.CancelToken=Zw,tN.isCancel=nw,tN.VERSION=zw,tN.toFormData=kv,tN.AxiosError=jv,tN.Cancel=tN.CanceledError,tN.all=function(e){return Promise.all(e)},tN.spread=function(e){return function(t){return e.apply(null,t)}},tN.isAxiosError=function(e){return yv.isObject(e)&&!0===e.isAxiosError},tN.mergeConfig=pw,tN.AxiosHeaders=ew,tN.formToJSON=e=>Kv(yv.isHTMLForm(e)?new FormData(e):e),tN.getAdapter=Hw.getAdapter,tN.HttpStatusCode=eN,tN.default=tN;const nN=tN.create({baseURL:"homelife.brokeragelead.ca"===window.location.hostname?"https://homelife.brokeragelead.ca/api":"http://localhost:8001/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),rN=e=>{let{onReminderAdded:n}=e;const[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)("");return(0,Rm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!r||!a.trim())return void alert("Please fill out both fields.");let t="";if(r){{const e=r.split("-");if(3!==e.length)return void alert("Invalid date selected from picker.");t="".concat(e[2],"/").concat(e[1],"/").concat(e[0])}try{await nN.post("/reminders",{date:t,reminder:a.trim()}),s(""),i(""),n(),alert("Reminder added successfully!")}catch(o){console.error("Error adding reminder:",o),alert("Failed to add reminder.")}}else alert("Please select a date.")},className:"mb-6 flex flex-col gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,Rm.jsx)("input",{type:"date",id:"date",name:"date",value:r,onChange:e=>s(e.target.value),className:"border p-2 rounded w-full"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"reminder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder"}),(0,Rm.jsx)("input",{type:"text",id:"reminder",name:"reminder",placeholder:"Enter Reminder",value:a,onChange:e=>i(e.target.value),className:"border p-2 rounded w-full"})]}),(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-4 py-2 rounded hover:bg-blue-800 self-start",children:"Add Reminder"})]})},sN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Finance Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="FinanceAdmin",n="Finance2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isFinanceAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isFinanceAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isFinanceAdmin")):(sessionStorage.setItem("isFinanceAdmin","true"),r(),void u("/finance"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null},aN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Financial Reports Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="ReportsAdmin",n="Reports2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isReportsAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isReportsAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isReportsAdmin")):(sessionStorage.setItem("isReportsAdmin","true"),r(),void u("/financial-reports"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null},iN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Trade Info Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="TradeAdmin",n="Trade2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isTradeAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isTradeAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isTradeAdmin")):(sessionStorage.setItem("isTradeAdmin","true"),r(),void u("/trade-info"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},oN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Listing Info Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="ListingAdmin",n="Listing2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isListingAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isListingAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isListingAdmin")):(sessionStorage.setItem("isListingAdmin","true"),r(),void u("/listing-info"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},lN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Agent Info Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="AgentAdmin",n="Agent2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isAgentAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isAgentAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isAgentAdmin")):(sessionStorage.setItem("isAgentAdmin","true"),r(),void u("/agent-info"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},cN=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),u=eu();return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Vendor Info Admin Login"}),l&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="VendorAdmin",n="Vendor2025";return s!==t&&i!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isVendorAdmin")):s!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isVendorAdmin")):i!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isVendorAdmin")):(sessionStorage.setItem("isVendorAdmin","true"),r(),void u("/vendor-info"))},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,Rm.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:d?"text":"password",id:"password",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{A(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,Rm.jsx)(gm,{size:20}):(0,Rm.jsx)(xm,{size:20})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},dN=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(null),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[v,w]=(0,t.useState)(!1),N=eu(),j=async()=>{i(!0),l(null);try{const e=await nN.get("/reminders");n(e.data)}catch(o){console.error("Error fetching reminders:",o),"ECONNABORTED"===o.code?l("Request timed out. Please check your connection and try again."):o.response?l("Server error: ".concat(o.response.status,". Please try again later.")):o.request?l("Unable to connect to server. Please check if the backend is running."):l("Failed to fetch reminders. Please try again later.")}finally{i(!1)}};(0,t.useEffect)(()=>{j()},[]);const C=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":[("0"+t.getDate()).slice(-2),("0"+(t.getMonth()+1)).slice(-2),t.getFullYear()].join("/")},B=r?C(r):"",S=(()=>{const e=new Date;return{start:sy(e,{weekStartsOn:1}),end:Fy(e,{weekStartsOn:1})}})(),E=e.filter(e=>{try{return Iy(Ey(e.date,"dd/MM/yyyy",new Date),S)}catch(Tu){return console.error("Error parsing reminder date for filtering:",e.date,Tu),!1}}),k=r?E.filter(e=>e.date===B):E;return o?(0,Rm.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,Rm.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,Rm.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,Rm.jsxs)("span",{className:"block sm:inline",children:[" ",o]}),(0,Rm.jsxs)("div",{className:"mt-3 space-x-2",children:[(0,Rm.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:j,children:"Retry"}),(0,Rm.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}):(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row p-6",children:[(0,Rm.jsxs)("div",{className:"md:flex-1 bg-white rounded-lg shadow-md p-6 mb-8 md:mb-0",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-center text-gray-700",children:"Calendar"}),(0,Rm.jsx)(Gx,{onChange:s,value:r,className:"mx-auto border-none",tileClassName:e=>{let{date:t}=e;return C(t)===B?"bg-yellow-300 rounded-lg":""}})]}),(0,Rm.jsxs)("div",{className:"md:flex-1 bg-white rounded-lg shadow-md p-6 md:ml-10",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"Add Reminder"}),(0,Rm.jsx)(rN,{onReminderAdded:()=>{j()}}),(0,Rm.jsxs)("div",{className:"mt-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:r?"Reminders for ".concat(B," (This Week)"):"This Week's Reminders"}),(0,Rm.jsx)("button",{onClick:()=>N("/database/reminders"),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 text-sm",children:"View All Reminders"})]}),a&&(0,Rm.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Loading reminders..."})]}),!a&&0===k.length&&(0,Rm.jsx)("p",{className:"text-gray-500",children:r?"No reminders for ".concat(B," this week."):"No reminders for this week."}),!a&&k.length>0&&(0,Rm.jsx)("ul",{className:"space-y-2 mb-4",children:k.map(e=>(0,Rm.jsxs)("li",{className:"p-3 bg-gray-100 rounded-md shadow-sm",children:[(0,Rm.jsx)("p",{className:"font-semibold text-gray-800",children:e.date}),(0,Rm.jsx)("p",{className:"text-gray-600",children:e.reminder})]},e._id))}),E.length>0&&!a&&(0,Rm.jsxs)("div",{className:"space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>{n([])},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 text-sm",children:"Clear Displayed Weekly Reminders"}),(0,Rm.jsx)("button",{onClick:j,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm",children:"Refresh All Reminders"})]})]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 px-6 pb-10",children:[(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{d(!0)},children:[(0,Rm.jsx)(lm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Company Profile"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{x(!0)},children:[(0,Rm.jsx)(Cm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Listing Info"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{f(!0)},children:[(0,Rm.jsx)(fm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Trade Info"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{y(!0)},children:[(0,Rm.jsx)(Om,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Agent Info"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{u(!0)},children:[(0,Rm.jsx)(dm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Finance"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{w(!0)},children:[(0,Rm.jsx)(Pm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Vendor Info"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{m(!0)},children:[(0,Rm.jsx)(bm,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Financial Reports"})]})]}),(0,Rm.jsx)(Hm,{isOpen:c,onClose:()=>d(!1),source:"companyProfile"}),(0,Rm.jsx)(sN,{isOpen:A,onClose:()=>u(!1)}),(0,Rm.jsx)(aN,{isOpen:h,onClose:()=>m(!1)}),(0,Rm.jsx)(iN,{isOpen:p,onClose:()=>f(!1)}),(0,Rm.jsx)(oN,{isOpen:g,onClose:()=>x(!1)}),(0,Rm.jsx)(lN,{isOpen:b,onClose:()=>y(!1)}),(0,Rm.jsx)(cN,{isOpen:v,onClose:()=>w(!1)})]})},AN=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)({}),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),A=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString()},u=async()=>{i(!0),l("");try{const e=await nN.get("/ledger"),t=[...JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),...e.data];t.sort((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n}),n(t);const r={};t.forEach(e=>{r[e.accountNumber]||(r[e.accountNumber]={debit:0,credit:0,transactions:[]}),r[e.accountNumber].debit+=e.debit||0,r[e.accountNumber].credit+=e.credit||0,r[e.accountNumber].transactions.push(e)}),Object.keys(r).forEach(e=>{r[e].transactions.sort((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n})}),s(r)}catch(r){var e,t;n([]),s({});const a=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch ledger data";l(a),console.error("Error fetching ledger:",r)}i(!1)};return(0,t.useEffect)(()=>{u()},[]),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Trial Balance"}),(0,Rm.jsxs)("div",{className:"flex gap-2",children:[(0,Rm.jsx)("button",{onClick:u,disabled:a||c,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:opacity-50",children:a?"Loading...":"Refresh"}),(0,Rm.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to clear ALL trial balance data? This action cannot be undone.")){d(!0),l("");try{await nN.get("/ledger");await nN.delete("/ledger");localStorage.removeItem("trialBalanceTransactions"),localStorage.removeItem("lastARNumber"),n([]),s({}),bp.success("All trial balance data and AR transactions cleared successfully.")}catch(r){var e,t;const n=r.message||(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to clear trial balance data";l(n),bp.error(n),console.error("Error clearing data:",r)}d(!1)}},disabled:c||a,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 disabled:opacity-50",children:c?"Clearing...":"Clear All Data"})]})]}),o&&(0,Rm.jsx)("div",{className:"text-red-600 mb-4 text-sm",children:o}),(0,Rm.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Account Number"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Account Name"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",style:{minWidth:"80px",width:"80px"},children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Reference #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Balance"})]})}),(0,Rm.jsx)("tbody",{children:Ip.map((e,n)=>{const s=r[e.acct]||{debit:0,credit:0,transactions:[]},a=0+s.debit-s.credit,i=s.transactions.length>0;return(0,Rm.jsxs)(t.Fragment,{children:[(0,Rm.jsxs)("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",children:e.acct}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==s.debit?s.debit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==s.credit?s.credit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==a?a.toFixed(2):"-"})]}),i&&(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1 font-semibold text-xs",children:"Opening Balance"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"})]}),s.transactions.map((t,n)=>(0,Rm.jsxs)("tr",{className:"bg-gray-100 text-xs",children:[(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"},children:"Cash Receipt"===t.type?t.date?A(t.date):"-":t.apNumber&&t.date?A(t.date):t.chequeDate?A(t.chequeDate):t.date?A(t.date):t.createdAt?A(t.createdAt):"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1",children:"Cash Receipt"===t.type?t.reference&&"null"!==t.reference?t.reference:"-":t.apNumber?t.apNumber:"Journal Entry"===t.type?t.reference||"-":t.reference&&"Manual Journal Entry"!==t.reference?t.reference:t.eftNumber?"EFT".concat(t.eftNumber):"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1",children:t.description}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right",children:t.debit?t.debit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right",children:t.credit?t.credit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1"})]},"".concat(e.acct,"-").concat(n))),(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-2 py-1"}),(0,Rm.jsx)("td",{className:"px-2 py-1 font-semibold text-xs",children:"Closing Balance"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:0!==a?a.toFixed(2):"-"})]})]})]},e.acct)})})]})}),(0,Rm.jsxs)("div",{className:"mt-4 text-xs text-gray-600",children:["Total Entries: ",e.length," | Last Updated:"," ",(new Date).toLocaleTimeString()]})]})},uN=[{id:"reminders",name:"Reminders Database",icon:(0,Rm.jsx)(im,{size:40,className:"text-blue-900"}),route:"/database/reminders"},{id:"company-profile",name:"Company Profile Database",icon:(0,Rm.jsx)(Om,{size:40,className:"text-blue-900"}),route:"/company-profile-db"},{id:"listing-info",name:"Listing Info Database",icon:(0,Rm.jsx)(jm,{size:40,className:"text-blue-900"}),route:"/listing-info-db"},{id:"agent-info",name:"Agent Info Database",icon:(0,Rm.jsx)(Um,{size:40,className:"text-blue-900"}),route:"/agent-info-db"},{id:"trade-info",name:"Trade Info Database",icon:(0,Rm.jsx)(wm,{size:40,className:"text-blue-900"}),route:"/trade-db"},{id:"finance-db",name:"Finance Database",icon:(0,Rm.jsx)(Bm,{size:40,className:"text-blue-900"}),route:"/finance-db"},{id:"vendor-info",name:"Vendor Info Database",icon:(0,Rm.jsx)(Pm,{size:40,className:"text-blue-900"}),route:"/vendor-info-db"},{id:"trial-balance",name:"Trial Balance",icon:(0,Rm.jsx)(am,{size:40,className:"text-blue-900"}),route:"/trial-balance"},{id:"outside-brokers",name:"Outside Brokers Database",icon:(0,Rm.jsx)(lm,{size:40,className:"text-blue-900"}),route:"/outside-brokers-db"},{id:"lawyers",name:"Lawyers Database",icon:(0,Rm.jsx)(vm,{size:40,className:"text-blue-900"}),route:"/lawyers-db"}],hN=()=>{const e=eu(),[n,r]=(0,t.useState)(null);(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isAdmin")||e("/")},[e]);return(0,Rm.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"p-8",children:n?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:n.name}),(0,Rm.jsx)(AN,{})]}),(0,Rm.jsx)("div",{className:"mt-6",children:(0,Rm.jsx)("button",{onClick:()=>r(null),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Database"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:uN.map(t=>{let{id:n,name:s,icon:a,route:i}=t;return(0,Rm.jsxs)("div",{onClick:()=>{var t;"trial-balance"===(t={id:n,name:s,icon:a,route:i}).id?r(t):e(t.route)},className:"p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 ease-in-out",children:[a,(0,Rm.jsx)("h2",{className:"text-xl font-semibold mb-2",children:s})]},n)})})]})})]})},mN=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)({_id:null,date:"",reminder:""}),A=eu(),u=async()=>{s(!0),i(null);try{const e=await nN.get("/reminders");n(e.data)}catch(a){i("Failed to fetch reminders. Please try again later."),console.error("Error fetching all reminders:",a)}finally{s(!1)}};(0,t.useEffect)(()=>{u()},[]);const h=e=>{const{name:t,value:n}=e.target;d(e=>X(X({},e),{},{[t]:n}))};return a?(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"p-6",children:(0,Rm.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,Rm.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,Rm.jsxs)("span",{className:"block sm:inline",children:[" ",a]}),(0,Rm.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded mt-2",onClick:u,children:"Retry"})]})})]}):(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>A("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"All Reminders"}),r?(0,Rm.jsx)("p",{children:"Loading reminders..."}):0===e.length?(0,Rm.jsx)("p",{className:"text-gray-500",children:"No reminders found."}):(0,Rm.jsx)("div",{className:"overflow-x-auto shadow-md rounded-lg",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{className:"bg-blue-900 text-white",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Date"}),(0,Rm.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Reminder"}),(0,Rm.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"py-4 px-6 whitespace-nowrap",children:e.date}),(0,Rm.jsx)("td",{className:"py-4 px-6",children:e.reminder}),(0,Rm.jsxs)("td",{className:"py-4 px-6 whitespace-nowrap",children:[(0,Rm.jsx)("button",{onClick:()=>(d(X({},e)),void l(!0)),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-xs mr-2",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this reminder?"))try{s(!0),await nN.delete("/reminders/".concat(e)),alert("Reminder deleted successfully."),u()}catch(r){var t,n;console.error("Error deleting reminder:",r),i((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete reminder.")}finally{s(!1)}})(e._id),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded text-xs",children:"Delete"})]})]},e._id))})]})})]}),o&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Edit Reminder"}),(0,Rm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.date||!c.reminder.trim())return void alert("Date and reminder text cannot be empty.");if(/^\d{2}\/\d{2}\/\d{4}$/.test(c.date))try{s(!0),await nN.put("/reminders/".concat(c._id),{date:c.date,reminder:c.reminder.trim()}),alert("Reminder updated successfully."),l(!1),u()}catch(r){var t,n;console.error("Error updating reminder:",r),alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to update reminder.")}finally{s(!1)}else alert("Invalid date format. Please use DD/MM/YYYY.")},children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date (DD/MM/YYYY)"}),(0,Rm.jsx)("input",{type:"text",id:"edit-date",name:"date",value:c.date,onChange:h,className:"border border-gray-300 p-2 rounded w-full focus:ring-blue-700 focus:border-blue-700",placeholder:"DD/MM/YYYY",required:!0})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("label",{htmlFor:"edit-reminder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Text"}),(0,Rm.jsx)("textarea",{id:"edit-reminder",name:"reminder",value:c.reminder,onChange:h,rows:"3",className:"border border-gray-300 p-2 rounded w-full focus:ring-blue-700 focus:border-blue-700",required:!0})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>l(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-800 hover:bg-blue-900 text-white font-semibold py-2 px-4 rounded",disabled:r,children:r?"Saving...":"Save Changes"})]})]})]})})]})},pN=()=>{const e=eu(),[n,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0);(0,t.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await nN.get("/company-profile");r(Array.isArray(e.data)?e.data:[e.data]),a(!1)}catch(e){bp.error("Failed to fetch company profiles"),a(!1)}};return s?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"container mx-auto p-6",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>e("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Company Profiles"}),(0,Rm.jsx)("div",{className:"grid gap-6",children:n.map(t=>(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,Rm.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>e("/edit-company-profile"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this company profile?"))try{await nN.delete("/company-profile/".concat(e)),bp.success("Company profile deleted successfully!"),i()}catch(t){bp.error("Failed to delete company profile")}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,Rm.jsx)("button",{onClick:()=>(e=>{const t=window.open("","_blank"),n=e.logoUrl?'<img src="'.concat(e.logoUrl,'" alt="Company Logo" style="max-height: 100px; margin-bottom: 20px;"/>'):"";t.document.write("\n      <html>\n        <head>\n          <title>Company Profile - ".concat(e.companyName,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }\n            .container { max-width: 800px; margin: 0 auto; }\n            .header { text-align: center; margin-bottom: 30px; }\n            .field { margin-bottom: 10px; }\n            .label { font-weight: bold; }\n          </style>\n        </head>\n        <body>\n          <div class="container">\n            <div class="header">\n              ').concat(n,'\n              <h1>Company Profile</h1>\n            </div>\n            <div class="field"><span class="label">Company Name:</span> ').concat(e.companyName,'</div>\n            <div class="field"><span class="label">Address:</span> ').concat(e.address,'</div>\n            <div class="field"><span class="label">City:</span> ').concat(e.city,'</div>\n            <div class="field"><span class="label">Province:</span> ').concat(e.province,'</div>\n            <div class="field"><span class="label">Postal Code:</span> ').concat(e.postalCode,'</div>\n            <div class="field"><span class="label">Phone:</span> ').concat(e.phone,'</div>\n            <div class="field"><span class="label">Fax:</span> ').concat(e.fax,'</div>\n            <div class="field"><span class="label">Email:</span> ').concat(e.email,'</div>\n            <div class="field"><span class="label">TREB #:</span> ').concat(e.trebNumber,'</div>\n            <div class="field"><span class="label">RECO #:</span> ').concat(e.recoNumber,'</div>\n            <div class="field"><span class="label">Trust Status Company:</span> ').concat(e.trustStatusCompany?"Yes":"No","</div>\n          </div>\n        </body>\n      </html>\n    ")),t.document.close(),t.print()})(t),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),t.logoUrl&&(0,Rm.jsx)("div",{className:"mb-4",children:(0,Rm.jsx)("img",{src:t.logoUrl,alt:"Company Logo",className:"h-20 object-contain"})}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 gap-4 mt-12",children:[{label:"Company Name",value:t.companyName},{label:"Address",value:t.address},{label:"City",value:t.city},{label:"Province",value:t.province},{label:"Postal Code",value:t.postalCode},{label:"Phone",value:t.phone},{label:"Fax",value:t.fax},{label:"Email",value:t.email},{label:"TREB #",value:t.trebNumber},{label:"RECO #",value:t.recoNumber},{label:"Trust Status Company",value:t.trustStatusCompany?"Yes":"No"}].map(e=>(0,Rm.jsxs)("div",{className:"border-b border-gray-200 pb-2",children:[(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:e.label}),(0,Rm.jsx)("div",{className:"font-medium",children:e.value})]},e.label))})]},t._id))})]})]})},fN=()=>{const e=eu();return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-100 px-6 py-16",children:[(0,Rm.jsxs)("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 mb-8 flex items-center gap-2",onClick:()=>e("/database"),children:[(0,Rm.jsx)(sm,{}),"Back to Database"]}),(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-center mb-12 text-gray-800",children:"Company Information"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{title:"General Ledger Account Setup",path:"/ledger-db"},{title:"Miscellaneous Settings",path:"/miscellaneous-db"},{title:"Company Profile",path:"/database/company-info-db"},{title:"MLS Fee Setup",path:"/mls-fee-db"}].map((t,n)=>(0,Rm.jsx)("div",{className:"bg-white shadow-md rounded-xl p-6 relative cursor-pointer hover:scale-105 transition-transform duration-300 hover:bg-yellow-300",onClick:()=>e(t.path),children:(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:t.title})},n))})]})]})},gN=()=>{const e=eu(),[n,r]=(0,t.useState)({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""}),[s,a]=(0,t.useState)(!0);(0,t.useEffect)(()=>{i()},[]);const i=async()=>{try{const e=await nN.get("/company-profile");e.data&&r(e.data),a(!1)}catch(e){bp.error("Failed to fetch company profile"),a(!1)}},o=async e=>{const{name:t,value:n,type:s,checked:a,files:i}=e.target;if("file"===s){if(i[0]){const e=new FileReader;e.onload=e=>{r(t=>X(X({},t),{},{logoUrl:e.target.result}))},e.readAsDataURL(i[0])}}else r(e=>X(X({},e),{},{[t]:"checkbox"===s?a:n}))};return s?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Company Profile"}),(0,Rm.jsx)("button",{onClick:()=>e("/database/company-info-db"),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a(!0);try{await nN.put("/company-profile/".concat(n._id),n),bp.success("Company profile updated successfully!"),setTimeout(()=>{e("/database/company-info-db")},1500)}catch(i){var r,s;bp.error((null===(r=i.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||"Failed to update company profile")}finally{a(!1)}},className:"space-y-4",children:[[{label:"Company Name",name:"companyName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Postal Code",name:"postalCode"},{label:"Phone",name:"phone",type:"tel"},{label:"Fax",name:"fax",type:"tel"},{label:"Email",name:"email",type:"email"},{label:"TREB #",name:"trebNumber"},{label:"RECO #",name:"recoNumber"}].map(e=>(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,value:n[e.name],onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name)),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-1",children:["Province",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{id:"province",name:"province",value:n.province,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"].map(e=>(0,Rm.jsx)("option",{value:e,children:e},e))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,Rm.jsx)("input",{type:"file",id:"logo",name:"logo",accept:"image/*",onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700"}),n.logoUrl&&(0,Rm.jsx)("div",{className:"mt-2",children:(0,Rm.jsx)("img",{src:n.logoUrl,alt:"Company Logo Preview",className:"h-20 object-contain"})})]}),(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"trustStatusCompany",name:"trustStatusCompany",checked:n.trustStatusCompany,onChange:o,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,Rm.jsx)("label",{htmlFor:"trustStatusCompany",className:"ml-2 block text-sm text-gray-700",children:"Trust Status Company"})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:s?"Updating...":"Update"})})]})]})]})},xN=e=>{let{setShowProfileForm:n}=e;const[r,s]=(0,t.useState)({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""}),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),A=async e=>{const{name:t,value:n,type:r,checked:a,files:i}=e.target;if("file"===r){if(i[0]){const e=new FileReader;e.onload=e=>{s(t=>X(X({},t),{},{logoUrl:e.target.result}))},e.readAsDataURL(i[0])}}else s(e=>X(X({},e),{},{[t]:"checkbox"===r?a:n}))};return(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Company Profile"}),(0,Rm.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),l(""),d(!1);try{await nN.post("/company-profile",r),bp.success("Company profile submitted successfully!"),s({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""})}catch(a){var t,n;bp.error((null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to submit form")}finally{i(!1)}},className:"space-y-4",children:[[{label:"Company Name",name:"companyName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Postal Code",name:"postalCode"},{label:"Phone",name:"phone",type:"tel"},{label:"Fax",name:"fax",type:"tel"},{label:"Email",name:"email",type:"email"},{label:"TREB #",name:"trebNumber"},{label:"RECO #",name:"recoNumber"}].map(e=>(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,value:r[e.name],onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name)),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-1",children:["Province",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{id:"province",name:"province",value:r.province,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"].map(e=>(0,Rm.jsx)("option",{value:e,children:e},e))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,Rm.jsx)("input",{type:"file",id:"logo",name:"logo",accept:"image/*",onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"}),r.logoUrl&&(0,Rm.jsx)("div",{className:"mt-2",children:(0,Rm.jsx)("img",{src:r.logoUrl,alt:"Company Logo Preview",className:"h-20 object-contain"})})]}),(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"trustStatusCompany",name:"trustStatusCompany",checked:r.trustStatusCompany,onChange:A,className:"h-4 w-4 text-blue-900 focus:ring-blue-900 border-gray-300 rounded"}),(0,Rm.jsx)("label",{htmlFor:"trustStatusCompany",className:"ml-2 block text-sm text-gray-700",children:"Trust Status Company"})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900"),children:a?"Submitting...":"Submit"})})]})]})},bN=e=>{let{setSelectedForm:n}=e;const[r,s]=(0,t.useState)({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1}),[a,i]=(0,t.useState)(!1),o=e=>{const{name:t,value:n,type:r,checked:a}=e.target;s(e=>X(X({},e),{},{[t]:"checkbox"===r?a:n}))};return(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"General Ledger Account Setup"}),(0,Rm.jsx)("button",{onClick:()=>n(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0),console.log("Submitting form data:",r);const t=Object.entries(r).filter(e=>{let[t,n]=e;return"agentDisbursement"!==t&&!n}).map(e=>{let[t]=e;return t});if(t.length>0)return bp.error("All fields are mandatory"),void i(!1);try{const e=await nN.post("/general-ledger-setup",r);console.log("Form submission response:",e.data),bp.success("Form submitted successfully"),s({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1})}catch(o){var n,a;console.error("Form submission error:",o),bp.error((null===(n=o.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)||"Failed to submit form")}finally{i(!1)}},className:"space-y-4",children:[[{label:"A/R - Commission Earned",name:"ARCommissionEarned"},{label:"A/P - General & Commission Expense",name:"APGeneralCommissionExpense"},{label:"A/P - Other Brokers",name:"AROtherDebit"},{label:"Liability For Trust Funds Held",name:"unpaidFileTrustReceivable"},{label:"Commission Payable",name:"commissionReceivablePayable"},{label:"HST with held From Agents",name:"heldFundsReceivableAgent"},{label:"Held Funds Payable (Agent)",name:"heldFundsPayableAgent"},{label:"Suspense",name:"suspense"},{label:"Labour Expenses - Management",name:"unpaidExpensesManagement"},{label:"Labour Expenses - Hourly",name:"unpaidExpensesNonMgmt"},{label:"Agent Bonus",name:"payrollAgent"}].map(e=>(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"text",id:e.name,name:e.name,value:r[e.name],onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent",required:!0})]},e.name)),(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"agentDisbursement",name:"agentDisbursement",checked:r.agentDisbursement,onChange:o,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,Rm.jsx)("label",{htmlFor:"agentDisbursement",className:"ml-2 block text-sm text-gray-700",children:"Agent Disbursement"})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:a?"Submitting...":"Submit"})})]})]})},yN=e=>{let{setSelectedForm:n}=e;const[r,s]=(0,t.useState)({fee:"",selectionOption:"% of Sell Price",mlsFeeTaxApplicable:"No",postToAP:"No dont post to A/P"}),[a,i]=(0,t.useState)(!1),o=e=>{const{name:t,value:n}=e.target;s(e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Rm.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"MLS Fee Setup"}),(0,Rm.jsx)("button",{onClick:()=>n(null),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{if(isNaN(r.fee)||r.fee<=0)throw new Error("Please enter a valid fee amount");const e=await nN.post("/mls-fees",r);console.log("MLS Fee created:",e.data),bp.success("MLS Fee created successfully!"),s({fee:"",selectionOption:"% of Sell Price",mlsFeeTaxApplicable:"No",postToAP:"No dont post to A/P"}),setTimeout(()=>{n(null)},1e3)}catch(t){bp.error(t.message||"Failed to create MLS fee")}finally{i(!1)}},className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Fee",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",step:"0.01",name:"fee",value:r.fee,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Selection Option",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"selectionOption",value:r.selectionOption,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"% of Sell Price",children:"% of Sell Price"}),(0,Rm.jsx)("option",{value:"Flat Amount",children:"Flat Amount"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["MLS Fee Tax Applicable",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"mlsFeeTaxApplicable",value:r.mlsFeeTaxApplicable,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Post to A/P",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"postToAP",value:r.postToAP,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Yes Post to A/P",children:"Yes, Post to A/P"}),(0,Rm.jsx)("option",{value:"No dont post to A/P",children:"No, dont post to A/P"})]})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:a?"Creating...":"Create MLS Fee"})})]})]})})},vN=e=>{let{setSelectedForm:n}=e;console.log("MiscSettingsForm rendered");const[r,s]=(0,t.useState)({lastListing:"",lastTrade:"",compassDirection:"Lorem Ipsum 1",cdaAddress:"Lorem Ipsum 1",multipleOffices:"No",mainOfficeNumber:"",hstNumber:"",payrollNumber:"",expStmtAddress:"Lorem Ipsum 1",openingBalanceFormat:"Lorem Ipsum 1"}),[a,i]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("MiscSettingsForm useEffect running");(async()=>{try{i(!0),console.log("Fetching settings from:","/misc-settings");const e=await nN.get("/misc-settings");console.log("Fetched settings:",e.data);const t=await nN.get("/listings");console.log("Fetched listings:",t.data);let n=0;t.data&&t.data.length>0&&(n=Math.max(...t.data.map(e=>e.listingNumber||0)));const r=await nN.get("/trades");console.log("Fetched trades:",r.data);let a=0;if(r.data&&r.data.length>0&&(a=Math.max(...r.data.map(e=>e.tradeNumber||0))),e.data&&e.data.length>0){const t=e.data[0];s(X(X({},t),{},{lastListing:n.toString(),lastTrade:a.toString(),mainOfficeNumber:t.mainOfficeNumber||"",hstNumber:t.hstNumber||"",payrollNumber:t.payrollNumber||""}))}else s(e=>X(X({},e),{},{lastListing:n.toString(),lastTrade:a.toString()}))}catch(e){console.error("Error fetching settings:",e),bp.error("Failed to load settings. Please try again.")}finally{i(!1)}})()},[]);const o=e=>{const{name:t,value:n}=e.target;s(e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Miscellaneous Settings"}),(0,Rm.jsx)("button",{onClick:()=>n(null),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{const e=X(X({},r),{},{lastListing:Number(r.lastListing),lastTrade:Number(r.lastTrade),mainOfficeNumber:Number(r.mainOfficeNumber),hstNumber:Number(r.hstNumber),payrollNumber:Number(r.payrollNumber)});r._id?(await nN.put("/misc-settings/".concat(r._id),e),bp.success("Settings updated successfully!")):(await nN.post("/misc-settings",e),bp.success("Settings saved successfully!")),setTimeout(()=>{n(null)},1500)}catch(a){var t,s;console.error("Error saving settings:",a),bp.error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to save settings. Please check your input and try again.")}finally{i(!1)}},className:"space-y-8 bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-700 border-b pb-2",children:"TRADES & LISTINGS"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Listing",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"lastListing",value:r.lastListing,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from the database"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Trade",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"lastTrade",value:r.lastTrade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from the database"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Compass Direction",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"compassDirection",value:r.compassDirection,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CDA,Address",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"cdaAddress",value:r.cdaAddress,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-700 border-b pb-2",children:"COMPANY SETTINGS"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Multiple Offices",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"multipleOffices",value:r.multipleOffices,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Main Office #",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"mainOfficeNumber",value:r.mainOfficeNumber,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["HST #",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"hstNumber",value:r.hstNumber,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payroll #",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"payrollNumber",value:r.payrollNumber,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["8.61 - Exp. Stmt. Address",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"expStmtAddress",value:r.expStmtAddress,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Opening Balance Format",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsxs)("select",{name:"openingBalanceFormat",value:r.openingBalanceFormat,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:a?"Saving...":"Save Settings"})})]})]})})},wN=[{name:"General Ledger Account Setup",route:"ledger"},{name:"Miscellaneous Settings",route:"misc"},{name:"MLS Fee Setup",route:"mls"}],NN=()=>{const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(!1);return(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(()=>{if(r)return(0,Rm.jsx)(xN,{setShowProfileForm:s});switch(e){case"ledger":return(0,Rm.jsx)(bN,{setSelectedForm:n});case"mls":return(0,Rm.jsx)(yN,{setSelectedForm:n});case"misc":return(0,Rm.jsx)(vN,{setSelectedForm:n});default:return(0,Rm.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Company Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Rm.jsx)("div",{onClick:()=>s(!0),className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",children:(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Company Profile"})}),wN.map(e=>(0,Rm.jsx)("div",{onClick:()=>(e=>{n(e.route),s(!1)})(e),className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",children:(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.name})},e.route))]})]})}})()]})};function jN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function CN(e,t){if(e){if("string"==typeof e)return jN(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jN(e,t):void 0}}function BN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||CN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var SN=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EN.apply(null,arguments)}var kN=n(816);function FN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,kN.A)(r.key),r)}}function IN(e,t){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IN(e,t)}function TN(e){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},TN(e)}function DN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(DN=function(){return!!e})()}var LN=n(2284);function _N(e,t){if(t&&("object"==(0,LN.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function PN(e){return function(e){if(Array.isArray(e))return jN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||CN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var UN=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(Tu){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)}),this.tags=[],this.ctr=0},e}(),ON=Math.abs,QN=String.fromCharCode,RN=Object.assign;function HN(e){return e.trim()}function MN(e,t,n){return e.replace(t,n)}function VN(e,t){return e.indexOf(t)}function zN(e,t){return 0|e.charCodeAt(t)}function KN(e,t,n){return e.slice(t,n)}function qN(e){return e.length}function GN(e){return e.length}function WN(e,t){return t.push(e),e}var YN=1,XN=1,JN=0,ZN=0,$N=0,ej="";function tj(e,t,n,r,s,a,i){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:YN,column:XN,length:i,return:""}}function nj(e,t){return RN(tj("",null,null,"",null,null,0),e,{length:-e.length},t)}function rj(){return $N=ZN>0?zN(ej,--ZN):0,XN--,10===$N&&(XN=1,YN--),$N}function sj(){return $N=ZN<JN?zN(ej,ZN++):0,XN++,10===$N&&(XN=1,YN++),$N}function aj(){return zN(ej,ZN)}function ij(){return ZN}function oj(e,t){return KN(ej,e,t)}function lj(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cj(e){return YN=XN=1,JN=qN(ej=e),ZN=0,[]}function dj(e){return ej="",e}function Aj(e){return HN(oj(ZN-1,mj(91===e?e+2:40===e?e+1:e)))}function uj(e){for(;($N=aj())&&$N<33;)sj();return lj(e)>2||lj($N)>3?"":" "}function hj(e,t){for(;--t&&sj()&&!($N<48||$N>102||$N>57&&$N<65||$N>70&&$N<97););return oj(e,ij()+(t<6&&32==aj()&&32==sj()))}function mj(e){for(;sj();)switch($N){case e:return ZN;case 34:case 39:34!==e&&39!==e&&mj($N);break;case 40:41===e&&mj(e);break;case 92:sj()}return ZN}function pj(e,t){for(;sj()&&e+$N!==57&&(e+$N!==84||47!==aj()););return"/*"+oj(t,ZN-1)+"*"+QN(47===e?e:sj())}function fj(e){for(;!lj(aj());)sj();return oj(e,ZN)}var gj="-ms-",xj="-moz-",bj="-webkit-",yj="comm",vj="rule",wj="decl",Nj="@keyframes";function jj(e,t){for(var n="",r=GN(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function Cj(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case wj:return e.return=e.return||e.value;case yj:return"";case Nj:return e.return=e.value+"{"+jj(e.children,r)+"}";case vj:e.value=e.props.join(",")}return qN(n=jj(e.children,r))?e.return=e.value+"{"+n+"}":""}function Bj(e){return function(t){t.root||(t=t.return)&&e(t)}}function Sj(e){return dj(Ej("",null,null,null,[""],e=cj(e),0,[0],e))}function Ej(e,t,n,r,s,a,i,o,l){for(var c=0,d=0,A=i,u=0,h=0,m=0,p=1,f=1,g=1,x=0,b="",y=s,v=a,w=r,N=b;f;)switch(m=x,x=sj()){case 40:if(108!=m&&58==zN(N,A-1)){-1!=VN(N+=MN(Aj(x),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:N+=Aj(x);break;case 9:case 10:case 13:case 32:N+=uj(m);break;case 92:N+=hj(ij()-1,7);continue;case 47:switch(aj()){case 42:case 47:WN(Fj(pj(sj(),ij()),t,n),l);break;default:N+="/"}break;case 123*p:o[c++]=qN(N)*g;case 125*p:case 59:case 0:switch(x){case 0:case 125:f=0;case 59+d:-1==g&&(N=MN(N,/\f/g,"")),h>0&&qN(N)-A&&WN(h>32?Ij(N+";",r,n,A-1):Ij(MN(N," ","")+";",r,n,A-2),l);break;case 59:N+=";";default:if(WN(w=kj(N,t,n,c,d,s,o,b,y=[],v=[],A),a),123===x)if(0===d)Ej(N,t,w,w,y,a,A,o,v);else switch(99===u&&110===zN(N,3)?100:u){case 100:case 108:case 109:case 115:Ej(e,w,w,r&&WN(kj(e,w,w,0,0,s,o,b,s,y=[],A),v),s,v,A,o,r?y:v);break;default:Ej(N,w,w,w,[""],v,0,o,v)}}c=d=h=0,p=g=1,b=N="",A=i;break;case 58:A=1+qN(N),h=m;default:if(p<1)if(123==x)--p;else if(125==x&&0==p++&&125==rj())continue;switch(N+=QN(x),x*p){case 38:g=d>0?1:(N+="\f",-1);break;case 44:o[c++]=(qN(N)-1)*g,g=1;break;case 64:45===aj()&&(N+=Aj(sj())),u=aj(),d=A=qN(b=N+=fj(ij())),x++;break;case 45:45===m&&2==qN(N)&&(p=0)}}return a}function kj(e,t,n,r,s,a,i,o,l,c,d){for(var A=s-1,u=0===s?a:[""],h=GN(u),m=0,p=0,f=0;m<r;++m)for(var g=0,x=KN(e,A+1,A=ON(p=i[m])),b=e;g<h;++g)(b=HN(p>0?u[g]+" "+x:MN(x,/&\f/g,u[g])))&&(l[f++]=b);return tj(e,t,n,0===s?vj:o,l,c,d)}function Fj(e,t,n){return tj(e,t,n,yj,QN($N),KN(e,2,-2),0)}function Ij(e,t,n,r){return tj(e,t,n,wj,KN(e,0,r),KN(e,r+1,-1),r)}var Tj=function(e,t,n){for(var r=0,s=0;r=s,s=aj(),38===r&&12===s&&(t[n]=1),!lj(s);)sj();return oj(e,ZN)},Dj=function(e,t){return dj(function(e,t){var n=-1,r=44;do{switch(lj(r)){case 0:38===r&&12===aj()&&(t[n]=1),e[n]+=Tj(ZN-1,t,n);break;case 2:e[n]+=Aj(r);break;case 4:if(44===r){e[++n]=58===aj()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=QN(r)}}while(r=sj());return e}(cj(e),t))},Lj=new WeakMap,_j=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Lj.get(n))&&!r){Lj.set(e,!0);for(var s=[],a=Dj(t,s),i=n.props,o=0,l=0;o<a.length;o++)for(var c=0;c<i.length;c++,l++)e.props[l]=s[o]?a[o].replace(/&\f/g,i[c]):i[c]+" "+a[o]}}},Pj=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Uj(e,t){switch(function(e,t){return 45^zN(e,0)?(((t<<2^zN(e,0))<<2^zN(e,1))<<2^zN(e,2))<<2^zN(e,3):0}(e,t)){case 5103:return bj+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return bj+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return bj+e+xj+e+gj+e+e;case 6828:case 4268:return bj+e+gj+e+e;case 6165:return bj+e+gj+"flex-"+e+e;case 5187:return bj+e+MN(e,/(\w+).+(:[^]+)/,bj+"box-$1$2"+gj+"flex-$1$2")+e;case 5443:return bj+e+gj+"flex-item-"+MN(e,/flex-|-self/,"")+e;case 4675:return bj+e+gj+"flex-line-pack"+MN(e,/align-content|flex-|-self/,"")+e;case 5548:return bj+e+gj+MN(e,"shrink","negative")+e;case 5292:return bj+e+gj+MN(e,"basis","preferred-size")+e;case 6060:return bj+"box-"+MN(e,"-grow","")+bj+e+gj+MN(e,"grow","positive")+e;case 4554:return bj+MN(e,/([^-])(transform)/g,"$1"+bj+"$2")+e;case 6187:return MN(MN(MN(e,/(zoom-|grab)/,bj+"$1"),/(image-set)/,bj+"$1"),e,"")+e;case 5495:case 3959:return MN(e,/(image-set\([^]*)/,bj+"$1$`$1");case 4968:return MN(MN(e,/(.+:)(flex-)?(.*)/,bj+"box-pack:$3"+gj+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+bj+e+e;case 4095:case 3583:case 4068:case 2532:return MN(e,/(.+)-inline(.+)/,bj+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(qN(e)-1-t>6)switch(zN(e,t+1)){case 109:if(45!==zN(e,t+4))break;case 102:return MN(e,/(.+:)(.+)-([^]+)/,"$1"+bj+"$2-$3$1"+xj+(108==zN(e,t+3)?"$3":"$2-$3"))+e;case 115:return~VN(e,"stretch")?Uj(MN(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==zN(e,t+1))break;case 6444:switch(zN(e,qN(e)-3-(~VN(e,"!important")&&10))){case 107:return MN(e,":",":"+bj)+e;case 101:return MN(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+bj+(45===zN(e,14)?"inline-":"")+"box$3$1"+bj+"$2$3$1"+gj+"$2box$3")+e}break;case 5936:switch(zN(e,t+11)){case 114:return bj+e+gj+MN(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return bj+e+gj+MN(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return bj+e+gj+MN(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return bj+e+gj+e+e}return e}var Oj=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case wj:e.return=Uj(e.value,e.length);break;case Nj:return jj([nj(e,{value:MN(e.value,"@","@"+bj)})],r);case vj:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return jj([nj(e,{props:[MN(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return jj([nj(e,{props:[MN(t,/:(plac\w+)/,":"+bj+"input-$1")]}),nj(e,{props:[MN(t,/:(plac\w+)/,":-moz-$1")]}),nj(e,{props:[MN(t,/:(plac\w+)/,gj+"input-$1")]})],r)}return""})}}],Qj=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var r,s,a=e.stylisPlugins||Oj,i={},o=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)i[t[n]]=!0;o.push(e)});var l,c=[_j,Pj],d=[Cj,Bj(function(e){l.insert(e)})],A=function(e){var t=GN(e);return function(n,r,s,a){for(var i="",o=0;o<t;o++)i+=e[o](n,r,s,a)||"";return i}}(c.concat(a,d));s=function(e,t,n,r){l=n,jj(Sj(e?e+"{"+t.styles+"}":t.styles),A),r&&(u.inserted[t.name]=!0)};var u={key:t,sheet:new UN({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return u.sheet.hydrate(o),u};var Rj=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var Hj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Mj(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Vj=/[A-Z]|^ms/g,zj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Kj=function(e){return 45===e.charCodeAt(1)},qj=function(e){return null!=e&&"boolean"!==typeof e},Gj=Mj(function(e){return Kj(e)?e:e.replace(Vj,"-$&").toLowerCase()}),Wj=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(zj,function(e,t,n){return Xj={name:t,styles:n,next:Xj},t})}return 1===Hj[e]||Kj(e)||"number"!==typeof t||0===t?t:t+"px"};function Yj(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var s=n;if(1===s.anim)return Xj={name:s.name,styles:s.styles,next:Xj},s.name;var a=n;if(void 0!==a.styles){var i=a.next;if(void 0!==i)for(;void 0!==i;)Xj={name:i.name,styles:i.styles,next:Xj},i=i.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Yj(e,t,n[s])+";";else for(var a in n){var i=n[a];if("object"!==typeof i){var o=i;null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":qj(o)&&(r+=Gj(a)+":"+Wj(a,o)+";")}else if(!Array.isArray(i)||"string"!==typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=Yj(e,t,i);switch(a){case"animation":case"animationName":r+=Gj(a)+":"+l+";";break;default:r+=a+"{"+l+"}"}}else for(var c=0;c<i.length;c++)qj(i[c])&&(r+=Gj(a)+":"+Wj(a,i[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=Xj,l=n(e);return Xj=o,Yj(e,t,l)}}var c=n;if(null==t)return c;var d=t[c];return void 0!==d?d:c}var Xj,Jj=/label:\s*([^\s;{]+)\s*(;|$)/g;function Zj(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,s="";Xj=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,s+=Yj(n,t,a)):s+=a[0];for(var i=1;i<e.length;i++){if(s+=Yj(n,t,e[i]),r)s+=a[i]}Jj.lastIndex=0;for(var o,l="";null!==(o=Jj.exec(s));)l+="-"+o[1];var c=function(e){for(var t,n=0,r=0,s=e.length;s>=4;++r,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(s){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:Xj}}var $j=!!r.useInsertionEffect&&r.useInsertionEffect,eC=$j||function(e){return e()},tC=($j||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?Qj({key:"css"}):null)),nC=(tC.Provider,function(e){return(0,t.forwardRef)(function(n,r){var s=(0,t.useContext)(tC);return e(n,s,r)})}),rC=t.createContext({});var sC={}.hasOwnProperty,aC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",iC=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Rj(t,n,r),eC(function(){return function(e,t,n){Rj(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}(t,n,r)}),null},oC=nC(function(e,n,r){var s=e.css;"string"===typeof s&&void 0!==n.registered[s]&&(s=n.registered[s]);var a=e[aC],i=[s],o="";"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")}),r}(n.registered,i,e.className):null!=e.className&&(o=e.className+" ");var l=Zj(i,void 0,t.useContext(rC));o+=n.key+"-"+l.name;var c={};for(var d in e)sC.call(e,d)&&"css"!==d&&d!==aC&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),t.createElement(t.Fragment,null,t.createElement(iC,{cache:n,serialized:l,isStringTag:"string"===typeof a}),t.createElement(a,c))}),lC=oC,cC=(n(219),function(e,n){var r=arguments;if(null==n||!sC.call(n,"css"))return t.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=lC,a[1]=function(e,t){var n={};for(var r in t)sC.call(t,r)&&(n[r]=t[r]);return n[aC]=e,n}(e,n);for(var i=2;i<s;i++)a[i]=r[i];return t.createElement.apply(null,a)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(cC||(cC={}));function dC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zj(t)}const AC=Math.min,uC=Math.max,hC=Math.round,mC=Math.floor,pC=e=>({x:e,y:e});function fC(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function gC(){return"undefined"!==typeof window}function xC(e){return vC(e)?(e.nodeName||"").toLowerCase():"#document"}function bC(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function yC(e){var t;return null==(t=(vC(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function vC(e){return!!gC()&&(e instanceof Node||e instanceof bC(e).Node)}function wC(e){return!!gC()&&(e instanceof Element||e instanceof bC(e).Element)}function NC(e){return!!gC()&&(e instanceof HTMLElement||e instanceof bC(e).HTMLElement)}function jC(e){return!(!gC()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof bC(e).ShadowRoot)}const CC=new Set(["inline","contents"]);function BC(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=FC(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!CC.has(s)}function SC(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const EC=new Set(["html","body","#document"]);function kC(e){return EC.has(xC(e))}function FC(e){return bC(e).getComputedStyle(e)}function IC(e){if("html"===xC(e))return e;const t=e.assignedSlot||e.parentNode||jC(e)&&e.host||yC(e);return jC(t)?t.host:t}function TC(e){const t=IC(e);return kC(t)?e.ownerDocument?e.ownerDocument.body:e.body:NC(t)&&BC(t)?t:TC(t)}function DC(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const s=TC(e),a=s===(null==(r=e.ownerDocument)?void 0:r.body),i=bC(s);if(a){const e=LC(i);return t.concat(i,i.visualViewport||[],BC(s)?s:[],e&&n?DC(e):[])}return t.concat(s,DC(s,[],n))}function LC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _C(e){const t=FC(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=NC(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,o=hC(n)!==a||hC(r)!==i;return o&&(n=a,r=i),{width:n,height:r,$:o}}function PC(e){return wC(e)?e:e.contextElement}function UC(e){const t=PC(e);if(!NC(t))return pC(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=_C(t);let i=(a?hC(n.width):n.width)/r,o=(a?hC(n.height):n.height)/s;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const OC=pC(0);function QC(e){const t=bC(e);return SC()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:OC}function RC(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=PC(e);let i=pC(1);t&&(r?wC(r)&&(i=UC(r)):i=UC(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==bC(e))&&t}(a,n,r)?QC(a):pC(0);let l=(s.left+o.x)/i.x,c=(s.top+o.y)/i.y,d=s.width/i.x,A=s.height/i.y;if(a){const e=bC(a),t=r&&wC(r)?bC(r):r;let n=e,s=LC(n);for(;s&&r&&t!==n;){const e=UC(s),t=s.getBoundingClientRect(),r=FC(s),a=t.left+(s.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,A*=e.y,l+=a,c+=i,n=bC(s),s=LC(n)}}return fC({width:d,height:A,x:l,y:c})}function HC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function MC(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:o="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=PC(e),d=s||a?[...c?DC(c):[],...DC(t)]:[];d.forEach(e=>{s&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const A=c&&o?function(e,t){let n,r=null;const s=yC(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:A,width:u,height:h}=c;if(o||t(),!u||!h)return;const m={rootMargin:-mC(A)+"px "+-mC(s.clientWidth-(d+u))+"px "+-mC(s.clientHeight-(A+h))+"px "+-mC(d)+"px",threshold:uC(0,AC(1,l))||1};let p=!0;function f(t){const r=t[0].intersectionRatio;if(r!==l){if(!p)return i();r?i(!1,r):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||HC(c,e.getBoundingClientRect())||i(),p=!1}try{r=new IntersectionObserver(f,X(X({},m),{},{root:s.ownerDocument}))}catch(g){r=new IntersectionObserver(f,m)}r.observe(e)}(!0),a}(c,n):null;let u,h=-1,m=null;i&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let p=l?RC(e):null;return l&&function t(){const r=RC(e);p&&!HC(p,r)&&n();p=r,u=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{s&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==A||A(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(u)}}var VC=t.useLayoutEffect,zC=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],KC=function(){};function qC(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function GC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=[].concat(r);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&a.push("".concat(qC(e,i)));return a.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var WC=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===(0,LN.A)(e)&&null!==e?[e]:[];var t},YC=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,X({},Mm(e,zC))},XC=function(e,t,n){var r=e.cx,s=e.getStyles,a=e.getClassNames,i=e.className;return{css:s(t,e),className:r(null!==n&&void 0!==n?n:{},a(t,e),i)}};function JC(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function ZC(e){return JC(e)?window.pageYOffset:e.scrollTop}function $C(e,t){JC(e)?window.scrollTo(0,t):e.scrollTop=t}function eB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KC,s=ZC(e),a=t-s,i=0;!function t(){var o=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(i+=10,s,a,n);$C(e,o),i<n?window.requestAnimationFrame(t):r(e)}()}function tB(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),s=t.offsetHeight/3;r.bottom+s>n.bottom?$C(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):r.top-s<n.top&&$C(e,Math.max(t.offsetTop-s,0))}function nB(){try{return document.createEvent("TouchEvent"),!0}catch(Tu){return!1}}var rB=!1,sB={get passive(){return rB=!0}},aB="undefined"!==typeof window?window:{};aB.addEventListener&&aB.removeEventListener&&(aB.addEventListener("p",KC,sB),aB.removeEventListener("p",KC,!1));var iB=rB;function oB(e){return null!=e}function lB(e,t,n){return e?t:n}var cB=["children","innerProps"],dB=["children","innerProps"];function AB(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,s=e.placement,a=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var d,A=l.getBoundingClientRect().height,u=n.getBoundingClientRect(),h=u.bottom,m=u.height,p=u.top,f=n.offsetParent.getBoundingClientRect().top,g=i?window.innerHeight:JC(d=l)?window.innerHeight:d.clientHeight,x=ZC(l),b=parseInt(getComputedStyle(n).marginBottom,10),y=parseInt(getComputedStyle(n).marginTop,10),v=f-y,w=g-p,N=v+x,j=A-x-p,C=h-g+x+b,B=x+p-y,S=160;switch(s){case"auto":case"bottom":if(w>=m)return{placement:"bottom",maxHeight:t};if(j>=m&&!i)return a&&eB(l,C,S),{placement:"bottom",maxHeight:t};if(!i&&j>=r||i&&w>=r)return a&&eB(l,C,S),{placement:"bottom",maxHeight:i?w-b:j-b};if("auto"===s||i){var E=t,k=i?v:N;return k>=r&&(E=Math.min(k-b-o,t)),{placement:"top",maxHeight:E}}if("bottom"===s)return a&&$C(l,C),{placement:"bottom",maxHeight:t};break;case"top":if(v>=m)return{placement:"top",maxHeight:t};if(N>=m&&!i)return a&&eB(l,B,S),{placement:"top",maxHeight:t};if(!i&&N>=r||i&&v>=r){var F=t;return(!i&&N>=r||i&&v>=r)&&(F=i?v-y:N-y),a&&eB(l,B,S),{placement:"top",maxHeight:F}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return c}var uB,hB=function(e){return"auto"===e?"bottom":e},mB=(0,t.createContext)(null),pB=function(e){var n=e.children,r=e.minMenuHeight,s=e.maxMenuHeight,a=e.menuPlacement,i=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(mB)||{}).setPortalPlacement,d=(0,t.useRef)(null),A=BN((0,t.useState)(s),2),u=A[0],h=A[1],m=BN((0,t.useState)(null),2),p=m[0],f=m[1],g=l.spacing.controlHeight;return VC(function(){var e=d.current;if(e){var t="fixed"===i,n=AB({maxHeight:s,menuEl:e,minHeight:r,placement:a,shouldScroll:o&&!t,isFixedPosition:t,controlHeight:g});h(n.maxHeight),f(n.placement),null===c||void 0===c||c(n.placement)}},[s,a,i,o,r,c,g]),n({ref:d,placerProps:X(X({},e),{},{placement:p||hB(a),maxHeight:u})})},fB=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return cC("div",EN({},XC(e,"menu",{menu:!0}),{ref:n},r),t)},gB=function(e,t){var n=e.theme,r=n.spacing.baseUnit,s=n.colors;return X({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},xB=gB,bB=gB,yB=["size"],vB=["innerProps","isRtl","size"];var wB={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},NB=function(e){var t=e.size,n=Mm(e,yB);return cC("svg",EN({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:wB},n))},jB=function(e){return cC(NB,EN({size:20},e),cC("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},CB=function(e){return cC(NB,EN({size:20},e),cC("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},BB=function(e,t){var n=e.isFocused,r=e.theme,s=r.spacing.baseUnit,a=r.colors;return X({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*s,":hover":{color:n?a.neutral80:a.neutral40}})},SB=BB,EB=BB,kB=function(){var e=dC.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(uB||(uB=Iu(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),FB=function(e){var t=e.delay,n=e.offset;return cC("span",{css:dC({animation:"".concat(kB," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},IB=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,s=e.innerRef,a=e.innerProps,i=e.menuIsOpen;return cC("div",EN({ref:s},XC(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":i}),a,{"aria-disabled":n||void 0}),t)},TB=["data"],DB=function(e){var t=e.children,n=e.cx,r=e.getStyles,s=e.getClassNames,a=e.Heading,i=e.headingProps,o=e.innerProps,l=e.label,c=e.theme,d=e.selectProps;return cC("div",EN({},XC(e,"group",{group:!0}),o),cC(a,EN({},i,{selectProps:d,theme:c,getStyles:r,getClassNames:s,cx:n}),l),cC("div",null,t))},LB=["innerRef","isDisabled","isHidden","inputClassName"],_B={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},PB={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":X({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},_B)},UB=function(e){return X({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},_B)},OB=function(e){var t=e.children,n=e.innerProps;return cC("div",n,t)};var QB=function(e){var t=e.children,n=e.components,r=e.data,s=e.innerProps,a=e.isDisabled,i=e.removeProps,o=e.selectProps,l=n.Container,c=n.Label,d=n.Remove;return cC(l,{data:r,innerProps:X(X({},XC(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:o},cC(c,{data:r,innerProps:X({},XC(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),cC(d,{data:r,innerProps:X(X({},XC(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},RB={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return cC("div",EN({},XC(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||cC(jB,null))},Control:IB,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return cC("div",EN({},XC(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||cC(CB,null))},DownChevron:CB,CrossIcon:jB,Group:DB,GroupHeading:function(e){var t=YC(e);t.data;var n=Mm(t,TB);return cC("div",EN({},XC(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return cC("div",EN({},XC(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return cC("span",EN({},t,XC(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=YC(e),s=r.innerRef,a=r.isDisabled,i=r.isHidden,o=r.inputClassName,l=Mm(r,LB);return cC("div",EN({},XC(e,"input",{"input-container":!0}),{"data-value":n||""}),cC("input",EN({className:t({input:!0},o),ref:s,style:UB(i),disabled:a},l)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,s=void 0===r?4:r,a=Mm(e,vB);return cC("div",EN({},XC(X(X({},a),{},{innerProps:t,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),cC(FB,{delay:0,offset:n}),cC(FB,{delay:160,offset:!0}),cC(FB,{delay:320,offset:!n}))},Menu:fB,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,s=e.isMulti;return cC("div",EN({},XC(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,s=e.controlElement,a=e.innerProps,i=e.menuPlacement,o=e.menuPosition,l=(0,t.useRef)(null),c=(0,t.useRef)(null),d=BN((0,t.useState)(hB(i)),2),A=d[0],u=d[1],h=(0,t.useMemo)(function(){return{setPortalPlacement:u}},[]),m=BN((0,t.useState)(null),2),p=m[0],f=m[1],g=(0,t.useCallback)(function(){if(s){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(s),t="fixed"===o?0:window.pageYOffset,n=e[A]+t;n===(null===p||void 0===p?void 0:p.offset)&&e.left===(null===p||void 0===p?void 0:p.rect.left)&&e.width===(null===p||void 0===p?void 0:p.rect.width)||f({offset:n,rect:e})}},[s,o,A,null===p||void 0===p?void 0:p.offset,null===p||void 0===p?void 0:p.rect.left,null===p||void 0===p?void 0:p.rect.width]);VC(function(){g()},[g]);var x=(0,t.useCallback)(function(){"function"===typeof c.current&&(c.current(),c.current=null),s&&l.current&&(c.current=MC(s,l.current,g,{elementResize:"ResizeObserver"in window}))},[s,g]);VC(function(){x()},[x]);var b=(0,t.useCallback)(function(e){l.current=e,x()},[x]);if(!n&&"fixed"!==o||!p)return null;var y=cC("div",EN({ref:b},XC(X(X({},e),{},{offset:p.offset,position:o,rect:p.rect}),"menuPortal",{"menu-portal":!0}),a),r);return cC(mB.Provider,{value:h},n?(0,aA.createPortal)(y,n):y)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,s=Mm(e,dB);return cC("div",EN({},XC(X(X({},s),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,s=Mm(e,cB);return cC("div",EN({},XC(X(X({},s),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:QB,MultiValueContainer:OB,MultiValueLabel:OB,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return cC("div",EN({role:"button"},n),t||cC(jB,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,s=e.isSelected,a=e.innerRef,i=e.innerProps;return cC("div",EN({},XC(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":s}),{ref:a,"aria-disabled":n},i),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return cC("div",EN({},XC(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,s=e.isRtl;return cC("div",EN({},XC(e,"container",{"--is-disabled":r,"--is-rtl":s}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return cC("div",EN({},XC(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,s=e.hasValue;return cC("div",EN({},XC(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),n),t)}},HB=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function MB(e,t){return e===t||!(!HB(e)||!HB(t))}function VB(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!MB(e[n],t[n]))return!1;return!0}for(var zB={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},KB=function(e){return cC("span",EN({css:zB},e))},qB={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,s=e.context,a=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,s=e.labels,a=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return"option ".concat(r,a?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,s=e.label,a=void 0===s?"":s,i=e.selectValue,o=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,d=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&i)return"value ".concat(a," focused, ").concat(d(i,n),".");if("menu"===t&&c){var A=o?" disabled":"",u="".concat(l?" selected":"").concat(A);return"".concat(a).concat(u,", ").concat(d(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},GB=function(e){var n=e.ariaSelection,r=e.focusedOption,s=e.focusedValue,a=e.focusableOptions,i=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,d=e.isAppleDevice,A=l.ariaLiveMessages,u=l.getOptionLabel,h=l.inputValue,m=l.isMulti,p=l.isOptionDisabled,f=l.isSearchable,g=l.menuIsOpen,x=l.options,b=l.screenReaderStatus,y=l.tabSelectsValue,v=l.isLoading,w=l["aria-label"],N=l["aria-live"],j=(0,t.useMemo)(function(){return X(X({},qB),A||{})},[A]),C=(0,t.useMemo)(function(){var e,t="";if(n&&j.onChange){var r=n.option,s=n.options,a=n.removedValue,i=n.removedValues,l=n.value,c=a||r||(e=l,Array.isArray(e)?null:e),d=c?u(c):"",A=s||i||void 0,h=A?A.map(u):[],m=X({isDisabled:c&&p(c,o),label:d,labels:h},n);t=j.onChange(m)}return t},[n,j,p,o,u]),B=(0,t.useMemo)(function(){var e="",t=r||s,n=!!(r&&o&&o.includes(r));if(t&&j.onFocus){var i={focused:t,label:u(t),isDisabled:p(t,o),isSelected:n,options:a,context:t===r?"menu":"value",selectValue:o,isAppleDevice:d};e=j.onFocus(i)}return e},[r,s,u,p,j,a,o,d]),S=(0,t.useMemo)(function(){var e="";if(g&&x.length&&!v&&j.onFilter){var t=b({count:a.length});e=j.onFilter({inputValue:h,resultsMessage:t})}return e},[a,h,g,j,x,b,v]),E="initial-input-focus"===(null===n||void 0===n?void 0:n.action),k=(0,t.useMemo)(function(){var e="";if(j.guidance){var t=s?"value":g?"menu":"input";e=j.guidance({"aria-label":w,context:t,isDisabled:r&&p(r,o),isMulti:m,isSearchable:f,tabSelectsValue:y,isInitialFocus:E})}return e},[w,r,s,m,p,f,g,j,o,y,E]),F=cC(t.Fragment,null,cC("span",{id:"aria-selection"},C),cC("span",{id:"aria-focused"},B),cC("span",{id:"aria-results"},S),cC("span",{id:"aria-guidance"},k));return cC(t.Fragment,null,cC(KB,{id:c},E&&F),cC(KB,{"aria-live":N,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},i&&!E&&F))},WB=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],YB=new RegExp("["+WB.map(function(e){return e.letters}).join("")+"]","g"),XB={},JB=0;JB<WB.length;JB++)for(var ZB=WB[JB],$B=0;$B<ZB.letters.length;$B++)XB[ZB.letters[$B]]=ZB.base;var eS=function(e){return e.replace(YB,function(e){return XB[e]})},tS=function(e,t){void 0===t&&(t=VB);var n=null;function r(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var a=e.apply(this,r);return n={lastResult:a,lastArgs:r,lastThis:this},a}return r.clear=function(){n=null},r}(eS),nS=function(e){return e.replace(/^\s+|\s+$/g,"")},rS=function(e){return"".concat(e.label," ").concat(e.value)},sS=["innerRef"];function aS(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=Object.entries(e).filter(function(e){var t=BN(e,1)[0];return!n.includes(t)});return s.reduce(function(e,t){var n=BN(t,2),r=n[0],s=n[1];return e[r]=s,e},{})}(Mm(e,sS),"onExited","in","enter","exit","appear");return cC("input",EN({ref:t},n,{css:dC({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var iS=["boxSizing","height","overflow","paddingRight","position"],oS={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function lS(e){e.cancelable&&e.preventDefault()}function cS(e){e.stopPropagation()}function dS(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function AS(){return"ontouchstart"in window||navigator.maxTouchPoints}var uS=!("undefined"===typeof window||!window.document||!window.document.createElement),hS=0,mS={capture:!1,passive:!1};var pS=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},fS={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function gS(e){var n=e.children,r=e.lockEnabled,s=e.captureEnabled,a=function(e){var n=e.isEnabled,r=e.onBottomArrive,s=e.onBottomLeave,a=e.onTopArrive,i=e.onTopLeave,o=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),d=(0,t.useRef)(null),A=(0,t.useCallback)(function(e,t){if(null!==d.current){var n=d.current,c=n.scrollTop,A=n.scrollHeight,u=n.clientHeight,h=d.current,m=t>0,p=A-u-c,f=!1;p>t&&o.current&&(s&&s(e),o.current=!1),m&&l.current&&(i&&i(e),l.current=!1),m&&t>p?(r&&!o.current&&r(e),h.scrollTop=A,f=!0,o.current=!0):!m&&-t>c&&(a&&!l.current&&a(e),h.scrollTop=0,f=!0,l.current=!0),f&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}},[r,s,a,i]),u=(0,t.useCallback)(function(e){A(e,e.deltaY)},[A]),h=(0,t.useCallback)(function(e){c.current=e.changedTouches[0].clientY},[]),m=(0,t.useCallback)(function(e){var t=c.current-e.changedTouches[0].clientY;A(e,t)},[A]),p=(0,t.useCallback)(function(e){if(e){var t=!!iB&&{passive:!1};e.addEventListener("wheel",u,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",m,t)}},[m,h,u]),f=(0,t.useCallback)(function(e){e&&(e.removeEventListener("wheel",u,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",m,!1))},[m,h,u]);return(0,t.useEffect)(function(){if(n){var e=d.current;return p(e),function(){f(e)}}},[n,p,f]),function(e){d.current=e}}({isEnabled:void 0===s||s,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),i=function(e){var n=e.isEnabled,r=e.accountForScrollbars,s=void 0===r||r,a=(0,t.useRef)({}),i=(0,t.useRef)(null),o=(0,t.useCallback)(function(e){if(uS){var t=document.body,n=t&&t.style;if(s&&iS.forEach(function(e){var t=n&&n[e];a.current[e]=t}),s&&hS<1){var r=parseInt(a.current.paddingRight,10)||0,i=document.body?document.body.clientWidth:0,o=window.innerWidth-i+r||0;Object.keys(oS).forEach(function(e){var t=oS[e];n&&(n[e]=t)}),n&&(n.paddingRight="".concat(o,"px"))}t&&AS()&&(t.addEventListener("touchmove",lS,mS),e&&(e.addEventListener("touchstart",dS,mS),e.addEventListener("touchmove",cS,mS))),hS+=1}},[s]),l=(0,t.useCallback)(function(e){if(uS){var t=document.body,n=t&&t.style;hS=Math.max(hS-1,0),s&&hS<1&&iS.forEach(function(e){var t=a.current[e];n&&(n[e]=t)}),t&&AS()&&(t.removeEventListener("touchmove",lS,mS),e&&(e.removeEventListener("touchstart",dS,mS),e.removeEventListener("touchmove",cS,mS)))}},[s]);return(0,t.useEffect)(function(){if(n){var e=i.current;return o(e),function(){l(e)}}},[n,o,l]),function(e){i.current=e}}({isEnabled:r});return cC(t.Fragment,null,r&&cC("div",{onClick:pS,css:fS}),n(function(e){a(e),i(e)}))}var xS={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},bS=function(e){var t=e.name,n=e.onFocus;return cC("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:xS,value:"",onChange:function(){}})};function yS(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function vS(){return yS(/^Mac/i)}function wS(){return yS(/^iPhone/i)||yS(/^iPad/i)||vS()&&navigator.maxTouchPoints>1}var NS={clearIndicator:EB,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,s=e.theme,a=s.colors,i=s.borderRadius;return X({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:r?a.primary:a.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:r?a.primary:a.neutral30}})},dropdownIndicator:SB,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,s=n.spacing;return X({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*s.baseUnit,paddingRight:3*s.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,a=r.colors;return X({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:2*s,marginTop:2*s})},input:function(e,t){var n=e.isDisabled,r=e.value,s=e.theme,a=s.spacing,i=s.colors;return X(X({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},PB),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,s=e.theme,a=s.colors,i=s.spacing.baseUnit;return X({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?a.neutral60:a.neutral20,padding:2*i})},loadingMessage:bB,menu:function(e,t){var n,r=e.placement,s=e.theme,a=s.borderRadius,i=s.spacing,o=s.colors;return X((n={label:"menu"},(0,W.A)(n,function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),(0,W.A)(n,"position","absolute"),(0,W.A)(n,"width","100%"),(0,W.A)(n,"zIndex",1),n),t?{}:{backgroundColor:o.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return X({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,s=n.borderRadius,a=n.colors;return X({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,s=n.colors,a=e.cropWithEllipsis;return X({overflow:"hidden",textOverflow:a||void 0===a?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,s=n.borderRadius,a=n.colors,i=e.isFocused;return X({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:i?a.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},noOptionsMessage:xB,option:function(e,t){var n=e.isDisabled,r=e.isFocused,s=e.isSelected,a=e.theme,i=a.spacing,o=a.colors;return X({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:s?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:n?void 0:s?o.primary:o.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,s=n.colors;return X({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,s=r.spacing,a=r.colors;return X({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,s=e.hasValue,a=e.selectProps.controlShouldRenderValue;return X({alignItems:"center",display:r&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var jS,CS={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},BS={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:nB(),captureMenuScroll:!nB(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=X({ignoreCase:!0,ignoreAccents:!0,stringify:rS,trim:!0,matchFrom:"any"},jS),r=n.ignoreCase,s=n.ignoreAccents,a=n.stringify,i=n.trim,o=n.matchFrom,l=i?nS(t):t,c=i?nS(a(e)):a(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),s&&(l=tS(l),c=eS(c)),"start"===o?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(Tu){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function SS(e,t,n,r){return{type:"option",data:t,isDisabled:_S(e,t,n),isSelected:PS(e,t,n),label:DS(e,t),value:LS(e,t),index:r}}function ES(e,t){return e.options.map(function(n,r){if("options"in n){var s=n.options.map(function(n,r){return SS(e,n,t,r)}).filter(function(t){return IS(e,t)});return s.length>0?{type:"group",data:n,options:s,index:r}:void 0}var a=SS(e,n,t,r);return IS(e,a)?a:void 0}).filter(oB)}function kS(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,PN(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function FS(e,t){return e.reduce(function(e,n){return"group"===n.type?e.push.apply(e,PN(n.options.map(function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}}))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e},[])}function IS(e,t){var n=e.inputValue,r=void 0===n?"":n,s=t.data,a=t.isSelected,i=t.label,o=t.value;return(!OS(e)||!a)&&US(e,{label:i,value:o,data:s},r)}var TS=function(e,t){var n;return(null===(n=e.find(function(e){return e.data===t}))||void 0===n?void 0:n.id)||null},DS=function(e,t){return e.getOptionLabel(t)},LS=function(e,t){return e.getOptionValue(t)};function _S(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function PS(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=LS(e,t);return n.some(function(t){return LS(e,t)===r})}function US(e,t,n){return!e.filterOption||e.filterOption(t,n)}var OS=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},QS=1,RS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IN(e,t)}(r,e);var n=function(e){var t=DN();return function(){var n,r=TN(e);if(t){var s=TN(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return _N(this,n)}}(r);function r(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,s=r.onChange,a=r.name;n.name=a,t.ariaOnChange(e,n),s(e,n)},t.setValue=function(e,n,r){var s=t.props,a=s.closeMenuOnSelect,i=s.isMulti,o=s.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:o}),a&&(t.setState({inputIsHiddenAfterUpdate:!i}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,s=n.isMulti,a=n.name,i=t.state.selectValue,o=s&&t.isOptionSelected(e,i),l=t.isOptionDisabled(e,i);if(o){var c=t.getOptionValue(e);t.setValue(i.filter(function(e){return t.getOptionValue(e)!==c}),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:a});s?t.setValue([].concat(PN(i),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,s=t.getOptionValue(e),a=r.filter(function(e){return t.getOptionValue(e)!==s}),i=lB(n,a,a[0]||null);t.onChange(i,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(lB(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],s=n.slice(0,n.length-1),a=lB(e,s,s[0]||null);r&&t.onChange(a,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return TS(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return FS(ES(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return GC.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return DS(t.props,e)},t.getOptionValue=function(e){return LS(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,s=NS[e](n,r);s.boxSizing="border-box";var a=t.props.styles[e];return a?a(s,n):s},t.getClassNames=function(e,n){var r,s;return null===(r=(s=t.props.classNames)[e])||void 0===r?void 0:r.call(s,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,X(X({},RB),e.components);var e},t.buildCategorizedOptions=function(){return ES(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return kS(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:X({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,s=n.menuIsOpen;t.focusInput(),s?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout(function(){return t.focusInput()}))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&JC(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var s=Math.abs(r.clientX-t.initialTouchX),a=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=s>5||a>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return OS(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,s=n.backspaceRemovesValue,a=n.escapeClearsValue,i=n.inputValue,o=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,d=n.onKeyDown,A=n.tabSelectsValue,u=n.openMenuOnFocus,h=t.state,m=h.focusedOption,p=h.focusedValue,f=h.selectValue;if(!l&&("function"!==typeof d||(d(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||i)return;t.focusValue("previous");break;case"ArrowRight":if(!r||i)return;t.focusValue("next");break;case"Delete":case"Backspace":if(i)return;if(p)t.removeValue(p);else{if(!s)return;r?t.popValue():o&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!A||!m||u&&t.isOptionSelected(m,f))return;t.selectOption(m);break;case"Enter":if(229===e.keyCode)break;if(c){if(!m)return;if(t.isComposing)return;t.selectOption(m);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:i}),t.onMenuClose()):o&&a&&t.clearValue();break;case" ":if(i)return;if(!c){t.openMenu("first");break}if(!m)return;t.selectOption(m);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++QS),t.state.selectValue=WC(e.value),e.menuIsOpen&&t.state.selectValue.length){var s=t.getFocusableOptionsWithIds(),a=t.buildFocusableOptions(),i=a.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=s,t.state.focusedOption=a[i],t.state.focusedOptionId=TS(s,a[i])}return t}return function(e,t,n){t&&FN(e.prototype,t),n&&FN(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&tB(this.menuListRef,this.focusedOptionRef),(vS()||wS())&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,s=this.state.isFocused;(s&&!n&&e.isDisabled||s&&r&&!e.menuIsOpen)&&this.focusInput(),s&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):s||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(tB(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,s=n.isFocused,a=this.buildFocusableOptions(),i="first"===e?0:a.length-1;if(!this.props.isMulti){var o=a.indexOf(r[0]);o>-1&&(i=o)}this.scrollToFocusedOptionOnUpdate=!(s&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:a[i],focusedOptionId:this.getFocusedOptionId(a[i])},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var s=n.indexOf(r);r||(s=-1);var a=n.length-1,i=-1;if(n.length){switch(e){case"previous":i=0===s?0:-1===s?a:s-1;break;case"next":s>-1&&s<a&&(i=s+1)}this.setState({inputIsHidden:-1!==i,focusedValue:n[i]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var s=0,a=r.indexOf(n);n||(a=-1),"up"===e?s=a>0?a-1:r.length-1:"down"===e?s=(a+1)%r.length:"pageup"===e?(s=a-t)<0&&(s=0):"pagedown"===e?(s=a+t)>r.length-1&&(s=r.length-1):"last"===e&&(s=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[s],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[s])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(CS):X(X({},CS),this.props.theme):CS}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,s=this.getValue,a=this.selectOption,i=this.setValue,o=this.props,l=o.isMulti,c=o.isRtl,d=o.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:s,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:d,selectOption:a,selectProps:o,setValue:i,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return _S(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return PS(this.props,e,t)}},{key:"filterOption",value:function(e,t){return US(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,s=e.inputId,a=e.inputValue,i=e.tabIndex,o=e.form,l=e.menuIsOpen,c=e.required,d=this.getComponents().Input,A=this.state,u=A.inputIsHidden,h=A.ariaSelection,m=this.commonProps,p=s||this.getElementId("input"),f=X(X(X({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===h||void 0===h?void 0:h.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(d,EN({},m,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:p,innerRef:this.getInputRef,isDisabled:n,isHidden:u,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:i,form:o,type:"text",value:a},f)):t.createElement(aS,EN({id:p,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:KC,onFocus:this.onInputFocus,disabled:n,tabIndex:i,inputMode:"none",form:o,value:""},f))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,s=n.MultiValueContainer,a=n.MultiValueLabel,i=n.MultiValueRemove,o=n.SingleValue,l=n.Placeholder,c=this.commonProps,d=this.props,A=d.controlShouldRenderValue,u=d.isDisabled,h=d.isMulti,m=d.inputValue,p=d.placeholder,f=this.state,g=f.selectValue,x=f.focusedValue,b=f.isFocused;if(!this.hasValue()||!A)return m?null:t.createElement(l,EN({},c,{key:"placeholder",isDisabled:u,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),p);if(h)return g.map(function(n,o){var l=n===x,d="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,EN({},c,{components:{Container:s,Label:a,Remove:i},isFocused:l,isDisabled:u,key:d,index:o,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))});if(m)return null;var y=g[0];return t.createElement(o,EN({},c,{data:y,isDisabled:u}),this.formatOptionLabel(y,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,s=r.isDisabled,a=r.isLoading,i=this.state.isFocused;if(!this.isClearable()||!e||s||!this.hasValue()||a)return null;var o={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,EN({},n,{innerProps:o,isFocused:i}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,s=r.isDisabled,a=r.isLoading,i=this.state.isFocused;if(!e||!a)return null;return t.createElement(e,EN({},n,{innerProps:{"aria-hidden":"true"},isDisabled:s,isFocused:i}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var s=this.commonProps,a=this.props.isDisabled,i=this.state.isFocused;return t.createElement(r,EN({},s,{isDisabled:a,isFocused:i}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,s=this.state.isFocused,a={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,EN({},n,{innerProps:a,isDisabled:r,isFocused:s}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,s=n.GroupHeading,a=n.Menu,i=n.MenuList,o=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,d=n.Option,A=this.commonProps,u=this.state.focusedOption,h=this.props,m=h.captureMenuScroll,p=h.inputValue,f=h.isLoading,g=h.loadingMessage,x=h.minMenuHeight,b=h.maxMenuHeight,y=h.menuIsOpen,v=h.menuPlacement,w=h.menuPosition,N=h.menuPortalTarget,j=h.menuShouldBlockScroll,C=h.menuShouldScrollIntoView,B=h.noOptionsMessage,S=h.onMenuScrollToTop,E=h.onMenuScrollToBottom;if(!y)return null;var k,F=function(n,r){var s=n.type,a=n.data,i=n.isDisabled,o=n.isSelected,l=n.label,c=n.value,h=u===a,m=i?void 0:function(){return e.onOptionHover(a)},p=i?void 0:function(){return e.selectOption(a)},f="".concat(e.getElementId("option"),"-").concat(r),g={id:f,onClick:p,onMouseMove:m,onMouseOver:m,tabIndex:-1,role:"option","aria-selected":e.state.isAppleDevice?void 0:o};return t.createElement(d,EN({},A,{innerProps:g,data:a,isDisabled:i,isSelected:o,key:f,label:l,type:s,value:c,isFocused:h,innerRef:h?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())k=this.getCategorizedOptions().map(function(n){if("group"===n.type){var a=n.data,i=n.options,o=n.index,l="".concat(e.getElementId("group"),"-").concat(o),c="".concat(l,"-heading");return t.createElement(r,EN({},A,{key:l,data:a,options:i,Heading:s,headingProps:{id:c,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map(function(e){return F(e,"".concat(o,"-").concat(e.index))}))}if("option"===n.type)return F(n,"".concat(n.index))});else if(f){var I=g({inputValue:p});if(null===I)return null;k=t.createElement(l,A,I)}else{var T=B({inputValue:p});if(null===T)return null;k=t.createElement(c,A,T)}var D={minMenuHeight:x,maxMenuHeight:b,menuPlacement:v,menuPosition:w,menuShouldScrollIntoView:C},L=t.createElement(pB,EN({},A,D),function(n){var r=n.ref,s=n.placerProps,o=s.placement,l=s.maxHeight;return t.createElement(a,EN({},A,D,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:f,placement:o}),t.createElement(gS,{captureEnabled:m,onTopArrive:S,onBottomArrive:E,lockEnabled:j},function(n){return t.createElement(i,EN({},A,{innerRef:function(t){e.getMenuListRef(t),n(t)},innerProps:{role:"listbox","aria-multiselectable":A.isMulti,id:e.getElementId("listbox")},isLoading:f,maxHeight:l,focusedOption:u}),k)}))});return N||"fixed"===w?t.createElement(o,EN({},A,{appendTo:N,controlElement:this.controlRef,menuPlacement:v,menuPosition:w}),L):L}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,s=n.isDisabled,a=n.isMulti,i=n.name,o=n.required,l=this.state.selectValue;if(o&&!this.hasValue()&&!s)return t.createElement(bS,{name:i,onFocus:this.onValueInputFocus});if(i&&!s){if(a){if(r){var c=l.map(function(t){return e.getOptionValue(t)}).join(r);return t.createElement("input",{name:i,type:"hidden",value:c})}var d=l.length>0?l.map(function(n,r){return t.createElement("input",{key:"i-".concat(r),name:i,type:"hidden",value:e.getOptionValue(n)})}):t.createElement("input",{name:i,type:"hidden",value:""});return t.createElement("div",null,d)}var A=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:i,type:"hidden",value:A})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,s=n.focusedOption,a=n.focusedValue,i=n.isFocused,o=n.selectValue,l=this.getFocusableOptions();return t.createElement(GB,EN({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:s,focusedValue:a,isFocused:i,selectValue:o,focusableOptions:l,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,s=e.SelectContainer,a=e.ValueContainer,i=this.props,o=i.className,l=i.id,c=i.isDisabled,d=i.menuIsOpen,A=this.state.isFocused,u=this.commonProps=this.getCommonProps();return t.createElement(s,EN({},u,{className:o,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:A}),this.renderLiveRegion(),t.createElement(n,EN({},u,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:A,menuIsOpen:d}),t.createElement(a,EN({},u,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,EN({},u,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,s=t.inputIsHiddenAfterUpdate,a=t.ariaSelection,i=t.isFocused,o=t.prevWasFocused,l=t.instancePrefix,c=e.options,d=e.value,A=e.menuIsOpen,u=e.inputValue,h=e.isMulti,m=WC(d),p={};if(n&&(d!==n.value||c!==n.options||A!==n.menuIsOpen||u!==n.inputValue)){var f=A?function(e,t){return kS(ES(e,t))}(e,m):[],g=A?FS(ES(e,m),"".concat(l,"-option")):[],x=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,m):null,b=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,f);p={selectValue:m,focusedOption:b,focusedOptionId:TS(g,b),focusableOptionsWithIds:g,focusedValue:x,clearFocusValueOnUpdate:!1}}var y=null!=s&&e!==n?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},v=a,w=i&&o;return i&&!w&&(v={value:lB(h,m,m[0]||null),options:m,action:"initial-input-focus"},w=!o),"initial-input-focus"===(null===a||void 0===a?void 0:a.action)&&(v=null),X(X(X({},p),y),{},{prevProps:e,ariaSelection:v,prevWasFocused:w})}}]),r}(t.Component);RS.defaultProps=BS;var HS=(0,t.forwardRef)(function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,s=e.defaultMenuIsOpen,a=void 0!==s&&s,i=e.defaultValue,o=void 0===i?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,A=e.onInputChange,u=e.onMenuClose,h=e.onMenuOpen,m=e.value,p=Mm(e,SN),f=BN((0,t.useState)(void 0!==l?l:r),2),g=f[0],x=f[1],b=BN((0,t.useState)(void 0!==c?c:a),2),y=b[0],v=b[1],w=BN((0,t.useState)(void 0!==m?m:o),2),N=w[0],j=w[1],C=(0,t.useCallback)(function(e,t){"function"===typeof d&&d(e,t),j(e)},[d]),B=(0,t.useCallback)(function(e,t){var n;"function"===typeof A&&(n=A(e,t)),x(void 0!==n?n:e)},[A]),S=(0,t.useCallback)(function(){"function"===typeof h&&h(),v(!0)},[h]),E=(0,t.useCallback)(function(){"function"===typeof u&&u(),v(!1)},[u]),k=void 0!==l?l:g,F=void 0!==c?c:y,I=void 0!==m?m:N;return X(X({},p),{},{inputValue:k,menuIsOpen:F,onChange:C,onInputChange:B,onMenuClose:E,onMenuOpen:S,value:I})}(e);return t.createElement(RS,EN({ref:n},r))}),MS=HS;const VS=e=>{let{sellPrice:n="",closingDate:r="",status:s="Active",ar:a="",onClosingDateChange:i=()=>{},onStatusChange:o=()=>{},onARChange:l=()=>{},listingCommission:c="",sellingCommission:d="",onListingCommissionChange:A=()=>{},onSellingCommissionChange:u=()=>{},goToNextSection:h=()=>{},goToPreviousSection:m=()=>{},tradeNumber:p="",saleClosingRows:f=[],commissionIncomeRows:g=[],outsideBrokersRows:x=[],editingSaleClosingIdx:b=null,editingCommissionIncomeIdx:y=null,editingOutsideBrokerIdx:v=null,brokerAgentName:w="",brokerBrokerage:N="",brokerSellingAmount:j="",onBrokerAgentNameChange:C=()=>{},onBrokerBrokerageChange:B=()=>{},onBrokerSellingAmountChange:S=()=>{},onAddCommissionInfo:E=()=>{},onEditSaleClosing:k=()=>{},onDeleteSaleClosing:F=()=>{},onEditCommissionIncome:I=()=>{},onDeleteCommissionIncome:T=()=>{},onEditOutsideBroker:D=()=>{},onDeleteOutsideBroker:L=()=>{},outsideBrokers:_=[],onCommissionTotalChange:P=()=>{},onUpdateSaleClosing:U=()=>{},onUpdateCommissionIncome:O=()=>{},onUpdateOutsideBroker:Q=()=>{},onBrokerTotalChange:R=()=>{}}=e;const H=parseFloat(n)||0,M=parseFloat(c)||0,V=parseFloat(d)||0,z=parseFloat(j)||0,K=(0,t.useMemo)(()=>(H*M/100).toFixed(2),[H,M]),q=(0,t.useMemo)(()=>(H*V/100).toFixed(2),[H,V]),G=(0,t.useMemo)(()=>(.13*K).toFixed(2),[K]),W=(0,t.useMemo)(()=>(.13*q).toFixed(2),[q]),Y=(0,t.useMemo)(()=>(parseFloat(G)+parseFloat(W)).toFixed(2),[G,W]),X=(0,t.useMemo)(()=>(parseFloat(K)+parseFloat(q)+parseFloat(G)+parseFloat(W)).toFixed(2),[K,q,G,W]),J=(0,t.useMemo)(()=>(.13*z).toFixed(2),[z]),Z=(0,t.useMemo)(()=>(z+parseFloat(J)).toFixed(2),[z,J]);(0,t.useEffect)(()=>{S({target:{value:q}})},[q,S]),(0,t.useEffect)(()=>{P(X)},[X,P]),(0,t.useEffect)(()=>{"function"===typeof R&&R(Z)},[Z,R]);return(0,Rm.jsxs)("div",{className:"py-8 px-2",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Commissions"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sale Closing Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sell Price"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:n,readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100",value:p,readOnly:!0})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Date"}),(0,Rm.jsx)("input",{type:"date",className:"w-full rounded border-gray-300 bg-gray-50",value:r,onChange:i})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Rm.jsxs)("select",{className:"w-full rounded border-gray-300 bg-gray-50",value:s,onChange:o,children:[(0,Rm.jsx)("option",{value:"Active",children:"Active"}),(0,Rm.jsx)("option",{value:"Sold",children:"Sold"})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AR"}),(0,Rm.jsx)("input",{type:"text",name:"ar",value:a,onChange:l,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:!0})]})]}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Commission Income"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Income"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:"Commission",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Commission (%)"}),(0,Rm.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:c,onChange:A,placeholder:"%"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Commission (%)"}),(0,Rm.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:d,onChange:u,placeholder:"%"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Amount"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:K,readOnly:!0})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Amount"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:q,readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Tax"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:G,readOnly:!0})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Tax"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:W,readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:Y,readOnly:!0})]})]}),(0,Rm.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100 font-semibold",value:X,readOnly:!0})]})})]}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Outside Brokers & Expenses"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Broker"}),(0,Rm.jsxs)("select",{className:"w-full rounded border-gray-300 bg-gray-50",onChange:e=>{const t=e.target.value;if(t){const e=_.find(e=>"".concat(e.firstName," ").concat(e.lastName," - ").concat(e.company)===t);e&&(C({target:{value:"".concat(e.firstName," ").concat(e.lastName)}}),B({target:{value:e.company}}),S({target:{value:e.sellingAmount||""}}))}else C({target:{value:""}}),B({target:{value:""}}),S({target:{value:""}})},value:w&&N?"".concat(w," - ").concat(N):"",children:[(0,Rm.jsx)("option",{value:"",children:"Select a Broker"}),_.map((e,t)=>(0,Rm.jsxs)("option",{value:"".concat(e.firstName," ").concat(e.lastName," - ").concat(e.company),children:[e.firstName," ",e.lastName," - ",e.company]},t))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agent Name"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:w,onChange:C})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brokerage"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:N,onChange:B})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Amount"}),(0,Rm.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:j,onChange:S})]})]}),(0,Rm.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End (Side)"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:(()=>{const e=_.find(e=>"".concat(e.firstName," ").concat(e.lastName)===w);return e&&e.end?e.end:""})(),readOnly:!0})]})}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:J,readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,Rm.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100 font-semibold",value:Z,readOnly:!0})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mt-12 space-y-8",children:[(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold",children:"Sale Closing Information"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{const e={sellPrice:n,closingDate:r,tradeNumber:p,status:s,ar:a};null!==b&&"function"===typeof U?U(e):E({type:"saleClosing",data:e})},children:null!==b?"Update":"Add"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:k,disabled:0===f.length,children:"Edit"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:F,disabled:0===f.length,children:"Delete"})]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Sell Price"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Closing Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Trade Number"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"AR"})]})}),(0,Rm.jsx)("tbody",{children:0===f.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No sale closing info added yet."})}):f.map((e,t)=>(0,Rm.jsxs)("tr",{className:"text-center",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellPrice}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.closingDate}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.tradeNumber}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.status}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.ar})]},t))})]})})]}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold",children:"Commission Income"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{const e={income:"Commission",listingAmount:K,sellingAmount:q,listingTax:G,sellingTax:W,tax:(parseFloat(G)+parseFloat(W)).toFixed(2),total:X};null!==y&&"function"===typeof O?O(e):E({type:"commissionIncome",data:e})},children:null!==y?"Update":"Add"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:I,disabled:0===g.length,children:"Edit"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:T,disabled:0===g.length,children:"Delete"})]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Income"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Listing Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Selling Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:0===g.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No commission income info added yet."})}):g.map((e,t)=>(0,Rm.jsxs)("tr",{className:"text-center",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.income}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.listingAmount}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellingAmount}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.tax}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.total})]},t))})]})})]}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold",children:"Outside Brokers & Expenses"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{if(w||N||j){const e={agentName:w,brokerage:N,sellingAmount:j,tax:J,total:Z};null!==v&&"function"===typeof Q?Q(e):E({type:"outsideBroker",data:e})}},children:null!==v?"Update":"Add"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:D,disabled:0===x.length,children:"Edit"}),(0,Rm.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:L,disabled:0===x.length,children:"Delete"})]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Brokerage"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Selling Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:0===x.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No outside brokers added yet."})}):x.map((e,t)=>(0,Rm.jsxs)("tr",{className:"text-center",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.agentName}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.brokerage}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellingAmount}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.tax}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.total})]},t))})]})})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,Rm.jsx)("button",{onClick:m,className:"bg-gray-500 text-white px-6 py-2 rounded font-semibold hover:bg-gray-600",children:"Previous"}),(0,Rm.jsx)("button",{onClick:h,className:"bg-yellow-700 text-white px-6 py-2 rounded font-semibold hover:bg-yellow-800",children:"Next"})]})]})},zS=e=>{let{keyInfoData:n,handleKeyInfoChange:r,goToNextSection:s,lookupSuccess:a,lookupError:i,isLoading:o,isLoadingTradeNumber:l,nextTradeNumber:c,listings:d,setKeyInfoData:A,onListingSelected:u,trades:h=[],currentTradeNumber:m=null}=e;const[p,f]=(0,t.useState)(n.conditions||[]),[g,x]=(0,t.useState)({conditionText:"",dueDate:"",conditionMetDate:""});(0,t.useEffect)(()=>{n.conditions&&f(n.conditions)},[n.conditions]);const b=(e,t)=>{x(n=>X(X({},n),{},{[e]:t}))};return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold",children:"Trade Record"}),(0,Rm.jsx)("h2",{className:"text-xl font-bold",children:"Dates"})]}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s()},children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[(0,Rm.jsxs)("div",{className:"space-y-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",name:"tradeNumber",value:c,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}),l&&(0,Rm.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Loading..."})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Rm.jsxs)("select",{name:"status",value:n.status,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"AVAILABLE",children:"Available"}),(0,Rm.jsx)("option",{value:"SOLD",children:"Sold"})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Number *"}),(0,Rm.jsx)(MS,{options:d.sort((e,t)=>t.listingNumber-e.listingNumber).map(e=>{const t=h.some(t=>{var n;return(null===(n=t.keyInfo)||void 0===n?void 0:n.listingNumber)===e.listingNumber.toString()&&t.tradeNumber!==m});return{value:e.listingNumber.toString(),label:"".concat(e.listingNumber," - ").concat(e.address.streetNumber," ").concat(e.address.streetName).concat(t?" (Already Used)":""),listing:e,isUsed:t,isDisabled:t}}),value:n.listingNumber?{value:n.listingNumber,label:d.find(e=>e.listingNumber.toString()===n.listingNumber)?"".concat(n.listingNumber," - ").concat(d.find(e=>e.listingNumber.toString()===n.listingNumber).address.streetNumber," ").concat(d.find(e=>e.listingNumber.toString()===n.listingNumber).address.streetName):n.listingNumber}:null,onChange:e=>{if(e&&e.listing){if(e.isUsed)return void bp.error("Listing ".concat(e.listing.listingNumber," is already used in another trade. Please select a different listing."));const t=e.listing;A(e=>{var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B;return X(X({},e),{},{listingNumber:null!==(n=null===(r=t.listingNumber)||void 0===r?void 0:r.toString())&&void 0!==n?n:e.listingNumber,streetNumber:null!==(s=null===(a=t.address)||void 0===a?void 0:a.streetNumber)&&void 0!==s?s:e.streetNumber,streetName:null!==(i=null===(o=t.address)||void 0===o?void 0:o.streetName)&&void 0!==i?i:e.streetName,unit:null!==(l=null===(c=t.address)||void 0===c?void 0:c.unit)&&void 0!==l?l:e.unit,province:null!==(d=null===(A=t.address)||void 0===A?void 0:A.province)&&void 0!==d?d:e.province,postalCode:null!==(u=null===(h=t.address)||void 0===h?void 0:h.postalCode)&&void 0!==u?u:e.postalCode,entryDate:null!==(m=t.dates)&&void 0!==m&&m.entry?new Date(t.dates.entry).toISOString().split("T")[0]:e.entryDate,type:null!==(p=t.propertyType)&&void 0!==p?p:e.type,propertyType:null!==(f=t.propertyType)&&void 0!==f?f:e.propertyType,dealType:null!==(g=t.dealType)&&void 0!==g?g:e.dealType,mlsNumber:null!==(x=t.mlsNumber)&&void 0!==x?x:e.mlsNumber,weManage:void 0!==t.lead?!0===t.lead||"Yes"===t.lead?"Yes":"No":void 0!==t.weManage?t.weManage?"Yes":"No":e.weManage,listCommission:null!==(b=null===(y=t.commission)||void 0===y||null===(v=y.list)||void 0===v?void 0:v.toString())&&void 0!==b?b:e.listCommission,sellCommission:null!==(w=null===(N=t.commission)||void 0===N||null===(j=N.sell)||void 0===j?void 0:j.toString())&&void 0!==w?w:e.sellCommission,city:null!==(C=null===(B=t.address)||void 0===B?void 0:B.city)&&void 0!==C?C:e.city,sellPrice:e.sellPrice})}),"function"===typeof u&&u(t)}else A(e=>X(X({},e),{},{listingNumber:""}))},isClearable:!0,placeholder:"Select a listing...",className:"text-sm"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Number"}),(0,Rm.jsx)("input",{type:"text",name:"streetNumber",value:n.streetNumber,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name"}),(0,Rm.jsx)("input",{type:"text",name:"streetName",value:n.streetName,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Rm.jsx)("input",{type:"text",name:"unit",value:n.unit,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:n.city,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:n.province,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:n.postalCode,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MLS Number"}),(0,Rm.jsx)("input",{type:"text",name:"mlsNumber",value:n.mlsNumber||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,Rm.jsxs)("select",{name:"propertyType",value:n.propertyType||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Property Type"}),(0,Rm.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,Rm.jsx)("option",{value:"Residential",children:"Residential"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deal Type"}),(0,Rm.jsxs)("select",{name:"dealType",value:n.dealType||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Deal Type"}),(0,Rm.jsx)("option",{value:"Sale",children:"Sale"}),(0,Rm.jsx)("option",{value:"Lease",children:"Lease"})]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Manage"}),(0,Rm.jsxs)("select",{name:"weManage",value:n.weManage,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classification"}),(0,Rm.jsxs)("select",{name:"classification",value:n.classification,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"LISTING SIDE",children:"Listing Side"}),(0,Rm.jsx)("option",{value:"CO-OPERATING SIDE",children:"Co-operating Side"})]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Commission"}),(0,Rm.jsx)("input",{type:"text",name:"listCommission",value:n.listCommission,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Co-Operating Side commission"}),(0,Rm.jsx)("input",{type:"text",name:"sellCommission",value:n.sellCommission,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sell Price"}),(0,Rm.jsx)("input",{type:"text",name:"sellPrice",value:n.sellPrice,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{className:"space-y-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Offer Date"}),(0,Rm.jsx)("input",{type:"date",name:"offerDate",value:n.offerDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firm Date"}),p.length>0?(0,Rm.jsx)("input",{type:"date",name:"firmDate",value:n.firmDate,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}):(0,Rm.jsx)("input",{type:"date",name:"firmDate",value:n.firmDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Close Date"}),(0,Rm.jsx)("input",{type:"date",name:"closeDate",value:n.closeDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Date"}),(0,Rm.jsx)("input",{type:"date",name:"entryDate",value:n.entryDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finalized Date"}),(0,Rm.jsx)("input",{type:"date",name:"finalizedDate",value:n.finalizedDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Manage"}),(0,Rm.jsxs)("select",{name:"weManage",value:n.weManage,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firm"}),(0,Rm.jsxs)("select",{name:"firm",value:n.firm,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Conditions"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition *"}),(0,Rm.jsxs)("select",{value:g.conditionText,onChange:e=>b("conditionText",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select Condition"}),(0,Rm.jsx)("option",{value:"Finance",children:"Finance"}),(0,Rm.jsx)("option",{value:"Inspections",children:"Inspections"}),(0,Rm.jsx)("option",{value:"Status Certificate",children:"Status Certificate"}),(0,Rm.jsx)("option",{value:"Lawyers Approval",children:"Lawyers Approval"}),(0,Rm.jsx)("option",{value:"Due Diligence",children:"Due Diligence"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date *"}),(0,Rm.jsx)("input",{type:"date",value:g.dueDate,onChange:e=>b("dueDate",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition Met Date"}),(0,Rm.jsx)("input",{type:"date",value:g.conditionMetDate,onChange:e=>{b("conditionMetDate",e.target.value),p.length>=0&&e.target.value&&A(t=>X(X({},t),{},{firmDate:e.target.value,status:"SOLD"}))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsx)("div",{className:"flex gap-3",children:(0,Rm.jsx)("button",{type:"button",onClick:()=>{if(console.log("handleAddCondition called"),console.log("newCondition state:",g),console.log("Condition field:",g.conditionText),console.log("Due Date field:",g.dueDate),console.log("Condition Met Date field:",g.conditionMetDate),g.conditionText&&g.dueDate){const e={conditionText:g.conditionText,dueDate:g.dueDate,conditionMetDate:g.conditionMetDate};console.log("Adding condition:",e);const t=[...p,e];f(t),x({conditionText:"",dueDate:"",conditionMetDate:""}),A(e=>{const n=X(X({},e),{},{conditions:t});return console.log("Updated keyInfoData:",n),n})}else console.log("Validation failed - missing required fields")},disabled:!g.conditionText||!g.dueDate,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed",children:"Add Condition"})})]}),p.length>0&&(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsx)("h4",{className:"text-md font-medium text-gray-700",children:"Added Conditions:"}),p.map((e,t)=>(0,Rm.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rm.jsx)("div",{className:"flex-1",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Condition:"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-900",children:e.conditionText})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Due Date:"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-900",children:e.dueDate})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Met Date:"}),(0,Rm.jsx)("input",{type:"date",value:e.conditionMetDate||"",onChange:e=>{const n=p.map((n,r)=>r===t?X(X({},n),{},{conditionMetDate:e.target.value}):n);f(n),A(t=>X(X({},t),{},{conditions:n,firmDate:e.target.value,status:"SOLD"}))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})}),(0,Rm.jsx)("button",{type:"button",onClick:()=>(e=>{const t=p[e];if(window.confirm('Are you sure you want to delete the condition: "'.concat(t.conditionText,'"?'))){const t=p.filter((t,n)=>n!==e);f(t),A(e=>X(X({},e),{},{conditions:t}))}})(t),className:"ml-4 px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Delete"})]})},t))]})]}),(0,Rm.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Rm.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:bg-yellow-300",children:"Next"})})]}),(a||i)&&(0,Rm.jsxs)("div",{className:"mt-4",children:[a&&(0,Rm.jsx)("div",{className:"p-3 bg-green-100 border border-green-300 rounded-md text-green-800",children:a}),i&&(0,Rm.jsx)("div",{className:"p-3 bg-red-100 border border-red-300 rounded-md text-red-800",children:i})]})]})},KS=(e,t)=>{const{name:n,value:r}=e.target,s=(e=>{const t=e.replace(/\D/g,"").slice(0,10);return t.length>=6?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6)):t.length>=3?"".concat(t.slice(0,3),"-").concat(t.slice(3)):t})(r);t(e=>X(X({},e),{},{[n]:s}))},qS=e=>{let{people:n,person:r,setPerson:s,selectedPersonType:a,setSelectedPersonType:i,editingPersonIndex:o,setEditingPersonIndex:l,showDeletePersonConfirm:c,handlePersonInputChange:d,handlePersonTypeSelect:A,handlePersonSubmit:u,handlePersonEdit:h,confirmDeletePerson:m,cancelDeletePerson:p,goToNextSection:f,goToPreviousSection:g,listingNumber:x,dealType:b}=e;const[y,v]=(0,t.useState)([]),[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[B,S]=(0,t.useState)([]),[E,k]=(0,t.useState)(""),[F,I]=(0,t.useState)(!1),[T,D]=(0,t.useState)(!1),L=async e=>{if(e){N(!0);try{const t=await nN.get("/listings/".concat(e,"/people"));v(t.data)}catch(t){console.error("Error fetching people for listing:",t),v([])}finally{N(!1)}}else v([])};(0,t.useEffect)(()=>{x?L(x):v([])},[x]),(0,t.useEffect)(()=>{_()},[]);const _=async()=>{D(!0);try{const e=(await nN.get("/lawyers")).data.reduce((e,t)=>(t.companyName&&!e.find(e=>e.name===t.companyName)&&e.push({name:t.companyName,address:t.address||"",email:t.email||"",phone:t.primaryPhone||""}),e),[]);S(e)}catch(e){console.error("Error fetching companies:",e),bp.error("Failed to fetch companies")}finally{D(!1)}};(0,t.useEffect)(()=>{const e=e=>{F&&!e.target.closest(".company-dropdown-container")&&I(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[F]),(0,t.useEffect)(()=>{if(y.length>0){const e=y[0];console.log("Auto-populate person:",e),("Purchase"===b&&"Seller"===a||"Lease"===b&&"Landlord"===a)&&(s({type:e.type||a,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",primaryPhone:e.primaryPhone||e.phone||"",cellPhone:e.cellPhone||e.phone||"",address:e.address||"",end:e.end||"Listing End",companyName:e.companyName||""}),C(!0))}},[y,a,b]),(0,t.useEffect)(()=>{s(e=>X({companyName:""},e))},[]);const P=n;return(0,t.useEffect)(()=>{console.log("PeopleForm received new people prop:",n),console.log("peopleToShow:",P),console.log("Number of people:",n.length)},[n,P]),(0,t.useEffect)(()=>{null!==o&&n[o]&&(i(n[o].type||""),k(n[o].companyName||""))},[o]),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-6",children:"People Information"}),x&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,Rm.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Rm.jsx)("strong",{children:"Selected Listing:"})," ",x]})}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"Select Person Type"}),(0,Rm.jsx)("div",{className:"flex flex-wrap gap-3",children:["Tenant","Landlord","Seller","Buyer","Seller Lawyer","Buyer Lawyer"].map(e=>(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",id:"type-".concat(e),name:"personType",checked:a===e,onChange:()=>A(e),className:"mr-2"}),(0,Rm.jsx)("label",{htmlFor:"type-".concat(e),className:"text-sm font-medium text-gray-700",children:e})]},e))})]}),w&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,Rm.jsxs)("p",{className:"text-sm text-yellow-800",children:["Loading people from listing ",x,"..."]})}),("Purchase"===b&&"Seller"===a||"Lease"===b&&"Landlord"===a)&&y.length>0&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,Rm.jsxs)("p",{className:"text-sm text-green-800",children:["Showing ",y.length," people from listing ",x]})}),j&&("Purchase"===b&&"Seller"===a||"Lease"===b&&"Landlord"===a)&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,Rm.jsxs)("p",{className:"text-sm text-blue-800",children:["\u2713 Form auto-populated with first person's details from listing"," ",x]})}),a&&(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("PeopleForm handleFormSubmit called"),console.log("Current person state:",r),console.log("Selected person type:",a);if("Seller Lawyer"===a||"Buyer Lawyer"===a)try{const t={type:a,firstName:r.firstName||"",lastName:r.lastName||"",companyName:r.companyName||"",email:r.email||"",end:r.end||("Seller Lawyer"===a||"Buyer Lawyer"===a?"Selling End":"Listing End"),primaryPhone:r.primaryPhone||"",cellPhone:r.cellPhone||"",address:r.address||""};(await nN.post("/lawyers",t)).data;if(u){const t=X(X({},e),{},{preventDefault:()=>{},target:X({},e.target)});u(t)}bp.success("Lawyer saved successfully")}catch(t){console.error("Error saving lawyer:",t),bp.error("Failed to save lawyer")}else u&&u(e)},className:"space-y-4 p-4 border rounded-lg",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Rm.jsx)("input",{type:"text",name:"type",value:r.type||a,onChange:d,placeholder:"Enter person type or select from radio buttons above",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"You can type a custom type or select from the radio buttons above"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,Rm.jsxs)("select",{name:"end",value:r.end||"Listing End",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,Rm.jsx)("option",{value:"Selling End",children:"Selling End"})]})]})]}),("Tenant"===a||"Landlord"===a||"Seller"===a||"Buyer"===a||"Seller Lawyer"===a||"Buyer Lawyer"===a)&&(0,Rm.jsxs)("div",{className:"relative company-dropdown-container",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",name:"companyName",value:E||r.companyName||"",onChange:e=>{const t=e.target.value;k(t),s(e=>X(X({},e),{},{companyName:t})),I(t.length>0)},onFocus:()=>I(!0),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm pr-8",placeholder:"Type to search or enter company name"}),(0,Rm.jsx)(um,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),F&&("Seller Lawyer"===a||"Buyer Lawyer"===a)&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:T?(0,Rm.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading companies..."}):0===B.length?(0,Rm.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No companies found"}):B.filter(e=>e.name.toLowerCase().includes(E.toLowerCase())).map((e,t)=>(0,Rm.jsxs)("div",{onClick:()=>(e=>{s(t=>X(X({},t),{},{companyName:e.name,address:e.address||"",email:e.email||"",primaryPhone:e.phone||""})),k(e.name),I(!1)})(e),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0",children:[(0,Rm.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.address&&(0,Rm.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]},t))})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:r.firstName||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:r.lastName||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"text",name:"email",value:r.email||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone Number"}),(0,Rm.jsx)("input",{type:"tel",name:"primaryPhone",value:r.primaryPhone||"",onChange:e=>KS(e,s),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone Number"}),(0,Rm.jsx)("input",{type:"tel",name:"cellPhone",value:r.cellPhone||"",onChange:e=>KS(e,s),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:r.address||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>{s({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),l(null),i(""),C(!1),k("")},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"}),(0,Rm.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-yellow-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==o?"Update Person":"Add Person"})]})]}),console.log("Rendering table with peopleToShow:",P),console.log("peopleToShow.length:",P.length),P.length>0&&(0,Rm.jsxs)("div",{className:"mt-6",children:[(0,Rm.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:("Purchase"===b&&"Seller"===a||"Lease"===b&&"Landlord"===a)&&y.length>0?"People from Listing ".concat(x):"People List"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"End"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Primary Phone"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Company Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{children:P.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.type||"N/A"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.end||"N/A"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"N/A"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.primaryPhone||e.cellPhone||"N/A"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.companyName||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:(0,Rm.jsx)("button",{type:"button",className:"text-blue-600 hover:underline mr-2",onClick:()=>h(t),children:"Edit"})})]},t))})]})})]}),c&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,Rm.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this person?"}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:p,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),(0,Rm.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,Rm.jsx)("button",{onClick:g,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Previous"}),(0,Rm.jsx)("button",{onClick:f,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Next"})]})]})},GS=e=>{let{outsideBrokers:n,setOutsideBrokers:r,broker:s,setBroker:a,selectedBrokerType:i,setSelectedBrokerType:o,editingBrokerIndex:l,setEditingBrokerIndex:c,showDeleteBrokerConfirm:d,handleBrokerInputChange:A,handleBrokerEdit:u,handleBrokerDelete:h,confirmDeleteBroker:m,cancelDeleteBroker:p,goToNextSection:f,goToPreviousSection:g}=e;const[x,b]=(0,t.useState)([]),[y,v]=(0,t.useState)(""),[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("OutsideBrokersForm received new outsideBrokers prop:",n)},[n]),(0,t.useEffect)(()=>{B()},[]);const B=async()=>{C(!0);try{const e=(await nN.get("/outside-brokers")).data.reduce((e,t)=>(t.company&&!e.find(e=>e.name===t.company)&&e.push({name:t.company,address:t.address||"",email:t.email||"",phone:t.primaryPhone||""}),e),[]);b(e)}catch(e){console.error("Error fetching companies:",e),bp.error("Failed to fetch companies")}finally{C(!1)}};(0,t.useEffect)(()=>{const e=e=>{w&&!e.target.closest(".company-dropdown-container")&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[w]),(0,t.useEffect)(()=>{if(null!==l&&n[l]){const e=n[l],t=e.type||"";a({type:t,firstName:e.firstName||"",lastName:e.lastName||"",company:e.company||"",email:e.email||"",payBroker:e.payBroker||"No",end:"Listing Broker"===t?"Listing End":"Selling End",primaryPhone:e.primaryPhone||"",chargedHST:e.chargedHST||"Yes",address:e.address||""}),o(t),v(e.company||"")}},[l,n]);return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Outside Brokers Information"}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"Select Broker Type"}),(0,Rm.jsx)("div",{className:"flex flex-wrap gap-3",children:["Listing Broker","Cooperating Broker"].map(e=>(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",id:"broker-type-".concat(e),name:"brokerType",checked:i===e,onChange:()=>(e=>{o(e),a(t=>X(X({},t),{},{type:e,end:"Listing Broker"===e?"Listing End":"Selling End"}))})(e),className:"mr-2"}),(0,Rm.jsx)("label",{htmlFor:"broker-type-".concat(e),className:"text-sm font-medium text-gray-700",children:e})]},e))})]}),i&&(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={type:i,firstName:s.firstName||"",lastName:s.lastName||"",company:s.company||"",email:s.email||"",payBroker:s.payBroker||"No",end:"Listing Broker"===i?"Listing End":"Selling End",primaryPhone:s.primaryPhone||"",chargedHST:s.chargedHST||"Yes",address:s.address||""};console.log("OutsideBrokersForm handleFormSubmit called"),console.log("Current outside brokers:",n),console.log("Form data:",t),console.log("Editing index:",l);try{if(null!==l){const e=n[l];e._id&&await nN.put("/outside-brokers/".concat(e._id),t);const s=[...n];s[l]=X(X({},t),{},{_id:e._id}),r(s),c(null),bp.success("Broker updated successfully")}else{const e=(await nN.post("/outside-brokers",t)).data,s=[...n,e];r(s),bp.success("Broker added successfully")}}catch(d){console.error("Error saving broker:",d),bp.error("Failed to save broker")}a({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),o(""),v("")},className:"space-y-4 p-4 border rounded-lg",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Rm.jsx)("input",{type:"text",name:"type",defaultValue:i,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Broker"}),(0,Rm.jsxs)("select",{name:"payBroker",value:s.payBroker,onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,Rm.jsx)("input",{type:"text",name:"end",value:"Listing Broker"===i?"Listing End":"Selling End",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:s.firstName||"",onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:s.lastName||"",onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{className:"relative company-dropdown-container",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",name:"company",value:y||s.company||"",onChange:e=>{const t=e.target.value;v(t),a(e=>X(X({},e),{},{company:t})),N(t.length>0)},onFocus:()=>N(!0),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm pr-8",placeholder:"Type to search or enter company name"}),(0,Rm.jsx)(um,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),w&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:j?(0,Rm.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading companies..."}):0===x.length?(0,Rm.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No companies found"}):x.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())).map((e,t)=>(0,Rm.jsxs)("div",{onClick:()=>(e=>{a(t=>X(X({},t),{},{company:e.name,address:e.address||"",email:e.email||"",primaryPhone:e.phone||""})),v(e.name),N(!1)})(e),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0",children:[(0,Rm.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.address&&(0,Rm.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]},t))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"email",name:"email",value:s.email||"",onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone Number"}),(0,Rm.jsx)("input",{type:"tel",name:"primaryPhone",value:s.primaryPhone||"",onChange:e=>KS(e,a),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charged HST"}),(0,Rm.jsxs)("select",{name:"chargedHST",value:s.chargedHST,onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:s.address||"",onChange:A,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Rm.jsx)("button",{type:"button",onClick:async()=>{if(s.firstName&&s.lastName&&i){const t=X(X({},s),{},{type:i,end:"Listing Broker"===i?"Listing End":"Selling End"});try{const e=(await nN.post("/outside-brokers",t)).data;r([...n,e]),bp.success("Broker added successfully")}catch(e){console.error("Error saving broker:",e),bp.error("Failed to save broker")}}c(null),o(""),a({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),v("")},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"}),(0,Rm.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-yellow-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==l?"Update Broker":"Add Broker"})]})]}),n.length>0&&(0,Rm.jsxs)("div",{className:"mt-8",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Added Outside Brokers"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Company"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"End"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{children:n.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.type||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.firstName||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.lastName||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.company||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.end||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:(0,Rm.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>u(t),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:(0,Rm.jsx)(pm,{})}),(0,Rm.jsx)("button",{onClick:()=>h(t),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,Rm.jsx)(Lm,{})})]})})]},t))})]})})]}),d&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,Rm.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Confirm Delete"}),(0,Rm.jsx)("p",{className:"mb-6",children:"Are you sure you want to delete this broker?"}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:p,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:m,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})}),(0,Rm.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,Rm.jsx)("button",{type:"button",onClick:g,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Previous"}),(0,Rm.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Next"})]})]})},WS={weHold:"Yes",heldBy:"Homelife Top Star Realty Inc., Brokerage",received:"Yes",depositDate:"",receivedFrom:"",amount:"0.00",reference:"",paymentType:"EFT",currency:"CAD",earnInterest:"No"},YS=e=>{let{trustRecords:n,setTrustRecords:r,tradeNumber:s}=e;if("function"!==typeof r)throw new Error("setTrustRecords prop is required and must be a function.");const[a,i]=(0,t.useState)(WS),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(null),h=e=>{const{name:t,value:n}=e.target;i("weHold"===t?"Yes"===n?e=>X(X({},e),{},{weHold:n,heldBy:"Homelife Top Star Realty Inc., Brokerage"}):e=>X(X({},e),{},{weHold:n,heldBy:""}):e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsxs)("div",{className:"max-w-[1300px] w-full mx-auto px-6",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Trust Information"}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Adding a Deposit Entry"}),(0,Rm.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:async e=>{e.preventDefault();let t=null;if("Yes"===a.weHold&&parseFloat(a.amount)>0)try{t=(await nN.post("/real-estate-trust-eft/trust-deposit",{tradeId:s,amount:parseFloat(a.amount),receivedFrom:a.receivedFrom,reference:a.reference,description:"Trust deposit from ".concat(a.receivedFrom)})).data.eftNumber}catch(h){console.error("Error generating EFT number:",h)}const c={weHold:a.weHold,heldBy:a.heldBy,received:a.received,depositDate:a.depositDate,receivedFrom:a.receivedFrom,amount:a.amount,reference:a.reference,eftNumber:t,paymentType:a.paymentType,currency:a.currency,earnInterest:a.earnInterest},d={payee:a.receivedFrom,reference:a.reference,eftNumber:t,paymentType:a.paymentType,depositDate:a.depositDate,amount:a.amount},A="Trade #: ".concat(s||"N/A",", Received from: ").concat(a.receivedFrom).concat(a.reference?", Ref: ".concat(a.reference):""),u=parseFloat(a.amount);if(!isNaN(u)&&u>0)try{"Yes"===a.weHold&&(await nN.post("/ledger",{accountNumber:"10002",accountName:"CASH - TRUST",debit:u,credit:0,description:A,eftNumber:t,date:a.depositDate}),await nN.post("/ledger",{accountNumber:"21300",accountName:"LIABILITY FOR TRUST FUNDS",debit:0,credit:u,description:A,eftNumber:t,date:a.depositDate}))}catch(h){console.error("Error posting to ledger:",h)}if(null!==o){const e=[...n];e[o]=X(X({},c),{},{payeeEntry:d}),r(e),l(null)}else r([...n,X(X({},c),{},{payeeEntry:d})]);i(WS)},children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Hold"}),(0,Rm.jsxs)("select",{name:"weHold",value:a.weHold,onChange:h,className:"w-full rounded border-gray-300",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Held By"}),"Yes"===a.weHold?(0,Rm.jsx)("input",{name:"heldBy",value:a.heldBy,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100 cursor-not-allowed"}):(0,Rm.jsx)("input",{name:"heldBy",value:a.heldBy,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Enter who holds the deposit"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received"}),(0,Rm.jsxs)("select",{name:"received",value:a.received,onChange:h,className:"w-full rounded border-gray-300",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deposit Date"}),(0,Rm.jsx)("input",{type:"date",name:"depositDate",value:a.depositDate,onChange:h,className:"w-full rounded border-gray-300"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received From"}),(0,Rm.jsx)("input",{name:"receivedFrom",value:a.receivedFrom,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Name of person/entity"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,Rm.jsx)("input",{type:"number",name:"amount",value:a.amount,onChange:h,className:"w-full rounded border-gray-300"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference (Optional)"}),(0,Rm.jsx)("input",{name:"reference",value:a.reference,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Reference number"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type"}),(0,Rm.jsxs)("select",{name:"paymentType",value:a.paymentType,onChange:h,className:"w-full rounded border-gray-300",children:[(0,Rm.jsx)("option",{value:"EFT",children:"EFT"}),(0,Rm.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,Rm.jsx)("option",{value:"Wire",children:"Wire"}),(0,Rm.jsx)("option",{value:"Cash",children:"Cash"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Rm.jsx)("input",{name:"currency",value:a.currency,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earn Interest"}),(0,Rm.jsxs)("select",{name:"earnInterest",value:a.earnInterest,onChange:h,className:"w-full rounded border-gray-300",children:[(0,Rm.jsx)("option",{value:"No",children:"No"}),(0,Rm.jsx)("option",{value:"Yes",children:"Yes"})]})]}),(0,Rm.jsxs)("div",{className:"col-span-2 flex gap-2 mt-4",children:[(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-6 py-2 rounded font-semibold",children:"Apply"}),(0,Rm.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded font-semibold ml-2",onClick:()=>function(){const e=(e=>e.payeeEntry?{receivedFrom:e.payeeEntry.payee||e.receivedFrom||"",heldBy:e.heldBy||"",amount:e.amount||"0.00",currency:e.currency||"CAD",paymentType:e.paymentType||e.payeeEntry&&e.payeeEntry.paymentType||"",depositDate:e.depositDate||e.payeeEntry&&e.payeeEntry.depositDate||"",reference:e.reference||e.payeeEntry&&e.payeeEntry.reference||"",eftNumber:e.eftNumber||e.payeeEntry&&e.payeeEntry.eftNumber||null}:{receivedFrom:e.receivedFrom||"",heldBy:e.heldBy||"",amount:e.amount||"0.00",currency:e.currency||"CAD",paymentType:e.paymentType||"",depositDate:e.depositDate||"",reference:e.reference||"",eftNumber:e.eftNumber||null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a);if(!e.receivedFrom||!e.amount||!e.depositDate)return void alert("Please fill in the required fields (Received From, Amount, Deposit Date) before printing receipt.");const t=window.open("","_blank","width=800,height=600"),n=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Trust Receipt</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: white; }\n          .receipt-container { max-width: 800px; margin: 0 auto; border: 1px solid #ccc; padding: 30px; background: white; }\n          .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }\n          .company-info { flex: 1; }\n          .company-info h2 { margin: 0 0 5px 0; font-size: 18px; font-weight: bold; }\n          .company-info p { margin: 2px 0; font-size: 12px; }\n          .logo { width: 120px; height: auto; }\n          .receipt-title { text-align: center; font-size: 24px; font-weight: bold; margin: 20px 0; text-decoration: underline; }\n          .receipt-date { text-align: center; font-size: 14px; margin-bottom: 30px; }\n          .receipt-content { margin-left: 50px; }\n          .receipt-row { margin-bottom: 15px; display: flex; align-items: center; }\n          .receipt-label { font-weight: bold; min-width: 200px; margin-right: 20px; }\n          .receipt-value { flex: 1; min-height: 20px; text-align: right; }\n          .signature-line { display: flex; align-items: center; margin-top: 40px; }\n          .signature-line .receipt-label { margin-right: 20px; }\n          .signature-line .receipt-value { border-bottom: 1px solid #000; min-width: 200px; height: 30px; text-align: center; }\n          @media print { body { margin: 0; } .receipt-container { border: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="receipt-container">\n          <div class="header">\n            <div class="company-info">\n                      <h2>Homelife Top Star Realty Inc., Brokerage</h2>\n        <p>9889 Markham Road, Suite 201</p>\n        <p>Markham, Ontario L6E OB7</p>\n        <p>Phone: 905-209-1400</p>\n            </div>\n            <div class="logo">\n              <img src="/logo.jpeg" alt="Logo" style="width: 100%; height: auto;" />\n            </div>\n          </div>\n          <div class="receipt-title">RECEIPT</div>\n          <div class="receipt-date">Date: '.concat(n,'</div>\n          <div class="receipt-content">\n            <div class="receipt-row">\n              <div class="receipt-label">RECEIVED FROM:</div>\n              <div class="receipt-value">').concat(e.receivedFrom,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">TRUST DEPOSIT ON (Held By):</div>\n              <div class="receipt-value">').concat(e.heldBy,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">FUNDS RECEIVED:</div>\n              <div class="receipt-value">$').concat(e.amount," ").concat(e.currency,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">DEPOSIT RECEIVED IN:</div>\n              <div class="receipt-value">CAD</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">DATE RECEIVED:</div>\n              <div class="receipt-value">').concat(e.depositDate,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">PAYMENT TYPE:</div>\n              <div class="receipt-value">').concat(e.paymentType,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">REFERENCE #:</div>\n              <div class="receipt-value">').concat(e.eftNumber?"EFT#".concat(e.eftNumber):e.reference||"N/A",'</div>\n            </div>\n            <div class="signature-line">\n              <div class="receipt-label">RECEIVED BY:</div>\n              <div class="receipt-value">Administrator</div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close(),t.onload=function(){t.print(),t.close()}}(),children:"Print Receipt"}),(0,Rm.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded font-semibold ml-2",onClick:()=>i(WS),children:"Cancel"})]})]})]}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Trust Account Entries"}),(0,Rm.jsx)("div",{className:"flex gap-2 mb-4",children:(0,Rm.jsx)("button",{type:"button",onClick:()=>(e=>{u(e),d(!0)})(0),disabled:0===n.length,className:"bg-red-600 text-white px-4 py-2 rounded font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-red-700",children:"Delete"})}),(0,Rm.jsx)("div",{className:"w-full px-6",children:(0,Rm.jsxs)("table",{className:"w-full border border-gray-300 mb-4",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"We Hold"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left whitespace-nowrap",style:{minWidth:"250px"},children:"Held By"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Received"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Interest"})]})}),(0,Rm.jsx)("tbody",{children:0===n.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"No trust entries found. Add a deposit entry above."})}):n.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.weHold}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.heldBy}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.depositDate}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.amount}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.received}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.earnInterest})]},t))})]})}),(0,Rm.jsx)("div",{className:"w-full px-6",children:(0,Rm.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Payee"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Amount"})]})}),(0,Rm.jsx)("tbody",{children:0===n.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No trust entries found. Add a deposit entry above."})}):n.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.receivedFrom}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.reference}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.paymentType}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.depositDate}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:e.amount})]},t))})]})})]}),c&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,Rm.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this trust entry?"}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>{d(!1),u(null)},className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{if(null!==A){const t=n[A];if(t){const n=parseFloat(t.amount);if(!isNaN(n)&&n>0){const r="Trade #: ".concat(s||"N/A",", Trust entry deleted, Received from: ").concat(t.receivedFrom).concat(t.reference?", Ref: ".concat(t.reference):"");try{"Yes"===t.weHold&&(await nN.post("/ledger",{accountNumber:"21300",accountName:"LIABILITY FOR TRUST FUNDS",debit:n,credit:0,description:r,date:t.depositDate}),await nN.post("/ledger",{accountNumber:"10002",accountName:"CASH - TRUST",debit:0,credit:n,description:r,date:t.depositDate})),bp.success("Ledger updated for trust entry deletion.")}catch(e){bp.error("Failed to update ledger for trust entry deletion.")}}}r(n.filter((e,t)=>t!==A)),d(!1),u(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},XS=async(e,t)=>{try{return(await nN.get("/commission-trust-eft/check-existing/".concat(e,"/").concat(t))).data}catch(n){return bp.error("Error checking Commission Trust EFT"),{exists:!1}}},JS=async(e,t)=>{try{return(await nN.get("/real-estate-trust-eft/check-existing/".concat(e,"/").concat(t))).data}catch(n){return bp.error("Error checking Real Estate Trust EFT"),{exists:!1}}},ZS=e=>({AgentCommissionTransfer:"Agent Commission Transfer",RefundOfDeposit:"Refund of Deposit",OutsideBrokerCommission:"Outside Broker Commission",OurBrokerageCommission:"Our Brokerage Commission",CommissionTransfer:"Commission Transfer",BalanceOfDeposit:"Balance of Deposit"}[e]||e),$S=e=>({plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flexible:"Flexible Plan",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e),eE=e=>{if(!e)return"N/A";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString("en-CA")},tE=e=>{if(null===e||void 0===e||""===e)return"$0.00";const t="string"===typeof e?parseFloat(e.replace(/,/g,"")):e;return isNaN(t)?"$0.00":t.toLocaleString("en-US",{style:"currency",currency:"USD"})},nE=e=>{var t;if(!e||!e.people||!Array.isArray(e.people))return{firstParty:"N/A",secondParty:"N/A"};if("Lease"===((null===(t=e.keyInfo)||void 0===t?void 0:t.dealType)||"")){const t=e.people.filter(e=>"Landlord"===e.type).map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", "),n=e.people.filter(e=>"Tenant"===e.type).map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", ");return{firstParty:t||"N/A",secondParty:n||"N/A",firstPartyLabel:"Landlord",secondPartyLabel:"Tenant"}}{const t=e.people.filter(e=>"Seller"===e.type).map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", "),n=e.people.filter(e=>"Buyer"===e.type).map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", ");return{firstParty:t||"N/A",secondParty:n||"N/A",firstPartyLabel:"Seller",secondPartyLabel:"Buyer"}}},rE=[{label:"Plan 250",value:"plan250"},{label:"Plan 500",value:"plan500"},{label:"Plan 90/10",value:"plan9010"},{label:"Plan 95/5",value:"plan955"},{label:"Plan 85/15",value:"plan8515"},{label:"Plan 50/50",value:"plan5050"},{label:"Plan 80/20",value:"plan8020"},{label:"Plan 150",value:"plan150"},{label:"Flexible Plan",value:"flexible"}],sE={agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",taxOnFees:"",total:"",totalFees:"",netCommission:"",lead:"No",alreadyAdded:!1},aE={sellPrice:"",closingDate:"",tradeNumber:"",status:"Active",ar:""},iE=e=>{var n,r,s;let{goToPreviousSection:a,agent:i,setAgent:o,agents:l,setAgents:c,editingIndex:d,setEditingIndex:A,showDeleteModal:u,setShowDeleteModal:h,deletingIndex:m,setDeletingIndex:p,showBuyerRebateModal:f,setShowBuyerRebateModal:g,buyerRebateIncluded:x,setBuyerRebateIncluded:b,buyerRebateAmount:y,setBuyerRebateAmount:v,pendingAgent:w,setPendingAgent:N,validationErrors:j,setValidationErrors:C,onSaveTrade:B,classification:S,commissionData:E,selectedListing:k,isEditingExistingTrade:F=!1,isEditMode:I=!1}=e;const[T,D]=(0,t.useState)([]),[L,_]=(0,t.useState)([]),[P,U]=(0,t.useState)(aE),[O,Q]=(0,t.useState)(!1),[R,H]=(0,t.useState)(!1),[M,V]=(0,t.useState)(0);(0,t.useEffect)(()=>{(async()=>{try{const e=await nN.get("/agents");D(e.data)}catch(e){D([])}})()},[]),(0,t.useEffect)(()=>{V(0)},[k]),(0,t.useEffect)(()=>{const e=((parseFloat(i.awardAmount)||0)*(parseFloat(i.percentage)||0)/100).toFixed(2);o(t=>Y(X(X({},t),{},{amount:e})))},[i.awardAmount,i.percentage,i.feeInfo,i.feesDeducted]),(0,t.useEffect)(()=>{if(("LISTING SIDE"===i.classification||"CO-OPERATING SIDE"===i.classification)&&1===l.length){const e=l[0],t=parseFloat(e.percentage)||0;if(t>0&&100===parseFloat(i.percentage)){const e=100-t;o(t=>X(X({},t),{},{percentage:e.toString()}))}}},[l,i.classification,i.percentage]),(0,t.useEffect)(()=>{if(S&&E){let e="0.00";if("LISTING SIDE"===S){e=(parseFloat(E.listingAmount)||0).toFixed(2)}else if("SELLING SIDE"===S){e=(parseFloat(E.sellingAmount)||0).toFixed(2)}else if("CO-OPERATING SIDE"===S){e=(parseFloat(E.sellingAmount)||0).toFixed(2)}else e="0.00";if(!i.awardAmount||"0.00"===i.awardAmount||i.awardAmount!==e){const t=X(X({},i),{},{awardAmount:e});o(Y(t))}}},[S,E,i.awardAmount]),(0,t.useEffect)(()=>{S&&(o(e=>X(X({},e),{},{classification:S})),"CO-OPERATING SIDE"===S&&(o(e=>X(X({},e),{},{agentId:"",agentName:""})),C(e=>X(X({},e),{},{agentId:"",agentName:""}))))},[S]),(0,t.useEffect)(()=>{if(console.log("selectedListing in AgentCommissionInfo:",k),console.log("selectedListing type:",typeof k),console.log("selectedListing keys:",k?Object.keys(k):"null"),console.log("isEditingExistingTrade:",F),console.log("classification:",S),F&&i.agentId&&i.agentName)console.log("Editing existing trade with agent data - not auto-populating from selectedListing");else if("LISTING SIDE"===S){if(k){console.log("selectedListing.agent:",k.agent),console.log("selectedListing.agents:",k.agents);let r=null;if(k.agents&&k.agents.length>0){console.log("Found agent in selectedListing.agents:",k.agents);const t=G();if(!(t.length>0)){if(console.log("No available agents, showing last agent as already added"),k.agents&&k.agents.length>0){var e;const t=k.agents[k.agents.length-1],n=(null===(e=t.agentNo)||void 0===e?void 0:e.toString())||"",r="".concat(t.firstName||""," ").concat(t.lastName||"").trim();n&&r&&o(e=>X(X({},e),{},{agentId:n,agentName:r,alreadyAdded:!0}))}return}{const e=M<t.length?M:0;r=t[e],console.log("Using available agent at index:",e,r)}}else k.agent&&(console.log("Found agent in selectedListing.agent:",k.agent),r=k.agent);if(r){console.log("listingAgent to use:",r),console.log("listingAgent keys:",Object.keys(r));let e="",s="";var t;if(k.agents&&k.agents.length>0)e=(null===(t=r.agentNo)||void 0===t?void 0:t.toString())||"",s="".concat(r.firstName||""," ").concat(r.lastName||"").trim();else if(k.agent){var n;if(e=(null===(n=r.employeeNo)||void 0===n?void 0:n.toString())||"",k.agents&&k.agents.length>0){const e=k.agents[0];s="".concat(e.firstName||""," ").concat(e.lastName||"").trim()}else s=""}console.log("Calculated agentId:",e),console.log("Calculated agentName:",s),e&&s?(o(t=>X(X({},t),{},{agentId:e,agentName:s})),C(e=>X(X({},e),{},{agentId:"",agentName:""}))):console.log("Agent ID or name is missing, not setting agent data")}else console.log("No agent found in selectedListing")}}else console.log("Classification is not LISTING SIDE - not auto-populating agent information")},[k,F,S,M,l]);const z=()=>{const e={};return String(i.agentId||"").trim()||(e.agentId="Agent ID is required"),String(i.agentName||"").trim()||(e.agentName="Agent Name is required"),C(e),Object.keys(e).length>0&&bp.error("Please fix the validation errors."),0===Object.keys(e).length},K=e=>{const{name:t,value:n}=e.target;let r=X(X({},i),{},{[t]:n});o(Y(r)),j[t]&&C(e=>X(X({},e),{},{[t]:""}))},q=e=>{const t=e.target.value,n=T.find(e=>e._id===t);n?(o(e=>X(X({},e),{},{agentId:n.employeeNo,agentName:"".concat(n.firstName," ").concat(n.lastName)})),C(e=>X(X({},e),{},{agentId:"",agentName:""}))):o(e=>X(X({},e),{},{agentId:"",agentName:""}))},G=()=>{if(!k||!k.agents||0===k.agents.length)return[];const e=l.map(e=>e.agentId);return k.agents.filter(t=>{var n;const r=(null===(n=t.agentNo)||void 0===n?void 0:n.toString())||"";return!e.includes(r)})},W=()=>{const e=l.filter(e=>"CO-OPERATING SIDE"===e.classification).map(e=>e.agentId);return T.filter(t=>{var n;const r=(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())||"";return!e.includes(r)})},Y=e=>{const t=(parseFloat(e.awardAmount)||0)*(parseFloat(e.percentage)||0)/100,n=.13*t,r=t+n;let s=0;switch(e.feeInfo){case"plan250":s=250;break;case"plan500":s=500;break;case"plan9010":s=.1*t;break;case"plan8515":s=.15*t;break;case"plan955":s=.05*t;break;case"plan5050":s=.5*t;break;case"plan8020":s=.2*t;break;case"plan150":s=150;break;case"flexible":s=parseFloat(e.feesDeducted)||0;break;default:s=0}const a=.13*s,i=s+a,o=r-i;return X(X({},e),{},{amount:t.toFixed(2),feesDeducted:"flexible"===e.feeInfo?e.feesDeducted:s.toFixed(2),tax:n.toFixed(2),total:r.toFixed(2),taxOnFees:a.toFixed(2),totalFees:i.toFixed(2),netCommission:o.toFixed(2)})};return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Agent Commission Information"}),(0,Rm.jsxs)("form",{className:"mb-6",onSubmit:null!==d?e=>{e.preventDefault(),z()&&(N(i),g(!0))}:e=>{e.preventDefault(),i.alreadyAdded?bp.error("This agent has already been added to the list."):z()&&(N(i),g(!0))},children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Agent ",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),"CO-OPERATING SIDE"===i.classification&&W().length>0?(0,Rm.jsxs)("select",{name:"agentSelect",value:(null===(n=T.find(e=>e.employeeNo===i.agentId))||void 0===n?void 0:n._id)||"",onChange:q,className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(j.agentId?"border-red-500":"border-gray-300"),children:[(0,Rm.jsx)("option",{value:"",children:"Select an agent"}),W().map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id))]}):"CO-OPERATING SIDE"===i.classification&&0===W().length?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("input",{name:"agentId",value:"",onChange:K,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 border-gray-300",readOnly:!0}),(0,Rm.jsx)("input",{name:"agentName",value:"",onChange:K,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 border-gray-300",readOnly:!0})]}):"CO-OPERATING SIDE"===i.classification?(0,Rm.jsxs)("select",{name:"agentSelect",value:(null===(r=T.find(e=>e.employeeNo===i.agentId))||void 0===r?void 0:r._id)||"",onChange:q,className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(j.agentId?"border-red-500":"border-gray-300"),children:[(0,Rm.jsx)("option",{value:"",children:"Select an agent"}),T.map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id))]}):"LISTING SIDE"===i.classification&&k&&k.agents&&k.agents.length>1&&G().length>0?(0,Rm.jsxs)("select",{name:"listingAgentSelect",value:M,onChange:e=>{const t=parseInt(e.target.value);V(t);const n=G();if(n[t]){var r;const e=n[t],s=(null===(r=e.agentNo)||void 0===r?void 0:r.toString())||"",a="".concat(e.firstName||""," ").concat(e.lastName||"").trim();o(e=>X(X({},e),{},{agentId:s,agentName:a})),C(e=>X(X({},e),{},{agentId:"",agentName:""}))}},className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(j.agentId?"border-red-500":"border-gray-300"),children:[(0,Rm.jsx)("option",{value:"",children:"Select an agent"}),G().map((e,t)=>(0,Rm.jsxs)("option",{value:t,children:[e.agentNo," - ",e.firstName," ",e.lastName]},t))]}):"LISTING SIDE"===i.classification&&k&&k.agents&&k.agents.length>1&&0===G().length?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("input",{name:"agentId",value:"",onChange:K,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 border-gray-300",readOnly:!0}),(0,Rm.jsx)("input",{name:"agentName",value:"",onChange:K,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 border-gray-300",readOnly:!0})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("input",{name:"agentId",value:i.agentId,onChange:K,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(j.agentId?"border-red-500":"border-gray-300"),readOnly:"LISTING SIDE"===i.classification}),(0,Rm.jsx)("input",{name:"agentName",value:i.agentName,onChange:K,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 ".concat(j.agentName?"border-red-500":"border-gray-300"),readOnly:"LISTING SIDE"===i.classification})]}),"LISTING SIDE"===i.classification&&k&&k.agents&&k.agents.length>1&&G().length>0&&(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select from remaining listing agents"}),"LISTING SIDE"===i.classification&&k&&k.agents&&k.agents.length>1&&0===G().length&&(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All listing agents have been added"}),"LISTING SIDE"===i.classification&&(!k||!k.agents||k.agents.length<=1)&&(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-populated from listing agent information"}),"CO-OPERATING SIDE"===i.classification&&W().length>0&&(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select from remaining co-operating agents"}),"CO-OPERATING SIDE"===i.classification&&0===W().length&&(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All co-operating agents have been added"}),i.alreadyAdded&&(0,Rm.jsx)("p",{className:"text-xs text-red-500 mt-1 font-medium",children:"This agent has already been added to the list"}),j.agentId&&(0,Rm.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.agentId}),j.agentName&&(0,Rm.jsx)("p",{className:"text-red-500 text-xs mt-1",children:j.agentName})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classification"}),(0,Rm.jsx)("input",{name:"classification",value:i.classification,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically populated from Key Info Form"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lead"}),(0,Rm.jsxs)("select",{name:"lead",value:i.lead,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"YTD Commission"}),(0,Rm.jsxs)("select",{name:"ytdCommission",value:i.ytdCommission,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Info"}),(0,Rm.jsx)("select",{name:"feeInfo",value:i.feeInfo,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:rE.map(e=>(0,Rm.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Award Amount"}),(0,Rm.jsx)("input",{name:"awardAmount",value:i.awardAmount,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100",readOnly:!0}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from Commission Income selling amount"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Percentage"}),(0,Rm.jsx)("input",{name:"percentage",value:i.percentage,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,Rm.jsx)("input",{name:"amount",value:i.amount,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),(0,Rm.jsx)("input",{name:"tax",value:i.tax,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,Rm.jsx)("input",{name:"total",value:i.total,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fees Deducted"}),(0,Rm.jsx)("input",{name:"feesDeducted",value:i.feesDeducted,onChange:K,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:"flexible"!==i.feeInfo})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Fees"}),(0,Rm.jsx)("input",{name:"totalFees",value:i.totalFees,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Net Commission"}),(0,Rm.jsx)("input",{name:"netCommission",value:i.netCommission,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[null!==d&&(0,Rm.jsx)("button",{type:"button",onClick:()=>{if(A(null),o(X(X({},sE),{},{classification:i.classification})),V(0),S&&E){let e="0.00";if("LISTING SIDE"===S){const t=parseFloat(E.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}o(t=>X(X({},t),{},{awardAmount:e}))}if(k&&"LISTING SIDE"===S){const t=G();if(t.length>0){var e;const n=t[0],r=(null===(e=n.agentNo)||void 0===e?void 0:e.toString())||"",s="".concat(n.firstName||""," ").concat(n.lastName||"").trim();r&&s&&o(e=>X(X({},e),{},{agentId:r,agentName:s}))}}b("no"),v(""),C({})},className:"px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-6 py-2 rounded font-semibold ".concat(i.alreadyAdded?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-900 text-white"),disabled:i.alreadyAdded,children:null!==d?"Update Agent":i.alreadyAdded?"Agent Already Added":"Add Agent"})]})]}),f&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buyer Rebate Confirmation"}),(0,Rm.jsx)("p",{className:"mb-4",children:"Is buyer rebate included in this commission?"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center mb-2",children:[(0,Rm.jsx)("input",{type:"radio",name:"buyerRebateIncluded",value:"yes",checked:"yes"===x,onChange:e=>b(e.target.value),className:"mr-2"}),"Yes"]}),(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",name:"buyerRebateIncluded",value:"no",checked:"no"===x,onChange:e=>b(e.target.value),className:"mr-2"}),"No"]})]}),"yes"===x&&(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buyer Rebate Amount"}),(0,Rm.jsx)("input",{type:"number",value:y,onChange:e=>v(e.target.value),placeholder:"Enter amount",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),"yes"===x&&y&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-gray-100 rounded",children:(0,Rm.jsxs)("p",{className:"text-sm",children:[(0,Rm.jsx)("strong",{children:"Original Net Commission:"})," $",null===w||void 0===w?void 0:w.netCommission,(0,Rm.jsx)("br",{}),(0,Rm.jsx)("strong",{children:"Buyer Rebate:"})," $",y,(0,Rm.jsx)("br",{}),(0,Rm.jsx)("strong",{children:"Final Net Commission:"})," $",(parseFloat((null===w||void 0===w?void 0:w.netCommission)||0)-parseFloat(y||0)).toFixed(2)]})}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>{g(!1),b("no"),v(""),N(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{if(!w)return;let e=parseFloat(w.amount)||0,t=parseFloat(w.tax)||0,n=parseFloat(w.total)||0,r=parseFloat(w.netCommission)||0;if("yes"===x&&y){e-=parseFloat(y)||0,n=e+t;r=n-(parseFloat(w.totalFees)||0)}const s=X(X({},w),{},{amount:e.toFixed(2),total:n.toFixed(2),netCommission:r.toFixed(2),buyerRebateIncluded:x,buyerRebateAmount:"yes"===x?y:""});if(null!==d){const e=[...l];e[d]=s,c(e),A(null)}else{const e=[...l,s];if(c(e),1===e.length&&("LISTING SIDE"===s.classification||"CO-OPERATING SIDE"===s.classification)){const e=parseFloat(s.percentage)||0;if(e>0){const t=100-e;o(e=>X(X({},e),{},{percentage:t.toString()}))}}}if(o(X(X({},sE),{},{classification:i.classification,alreadyAdded:!1})),V(0),S&&E){let e="0.00";if("LISTING SIDE"===S){const t=parseFloat(E.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}o(t=>X(X({},t),{},{awardAmount:e}))}g(!1),b("no"),v(""),N(null)},className:"px-4 py-2 bg-blue-900 text-white rounded hover:bg-blue-800",children:"Confirm"})]})]})}),u&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Confirmation"}),(0,Rm.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this agent commission record?"}),(0,Rm.jsxs)("p",{className:"mb-6 text-sm text-gray-600",children:["Agent: ",null===(s=l[m])||void 0===s?void 0:s.agentName,(0,Rm.jsx)("br",{}),"This action cannot be undone."]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>{h(!1),p(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{if(null!==m){const t=l.filter((e,t)=>t!==m);if(c(t),o(X(X({},sE),{},{classification:i.classification,alreadyAdded:!1})),V(0),S&&E){let e="0.00";if("LISTING SIDE"===S){const t=parseFloat(E.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}o(t=>X(X({},t),{},{awardAmount:e}))}if(k&&"LISTING SIDE"===S){const t=G();if(t.length>0){var e;const n=t[0],r=(null===(e=n.agentNo)||void 0===e?void 0:e.toString())||"",s="".concat(n.firstName||""," ").concat(n.lastName||"").trim();if(r&&s){let e="0.00";if("LISTING SIDE"===S){const t=parseFloat(E.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===S){const t=parseFloat(E.sellingAmount)||0;e=t.toFixed(2)}o(t=>X(X({},t),{},{agentId:r,agentName:s,awardAmount:e}))}}}}h(!1),p(null)},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}),(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Agents List"}),(0,Rm.jsxs)("div",{className:"overflow-x-auto mb-8",children:[(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Agent"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Classification"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Lead"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Total"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Fees"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Net"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Buyer Rebate"})]})}),(0,Rm.jsx)("tbody",{children:0===l.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:9,className:"text-center py-4 text-gray-500",children:"No agents added yet."})}):l.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.agentName}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.classification}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.lead}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.amount}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.tax}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.total}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.feesDeducted}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.netCommission}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:"yes"===e.buyerRebateIncluded?"$".concat(e.buyerRebateAmount):"-"})]},t))})]}),l.length>0&&(0,Rm.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>{A(0),o(l[0])},className:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>{p(0),h(!0)},className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]}),(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Fees Deduction"}),(0,Rm.jsx)("div",{className:"overflow-x-auto mb-8",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Fee Type"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Deducted Fee"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Taxed"})]})}),(0,Rm.jsx)("tbody",{children:0===l.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:3,className:"text-center py-4 text-gray-500",children:"No fees deduction entries yet."})}):l.map((e,t)=>(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:$S(e.feeInfo)}),(0,Rm.jsxs)("td",{className:"px-4 py-2 border-b border-r",children:["$",e.feesDeducted]}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:"Yes"})]},"".concat(t,"-fee")),"yes"===e.buyerRebateIncluded&&(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b border-r",children:"Buyer Rebate"}),(0,Rm.jsxs)("td",{className:"px-4 py-2 border-b border-r",children:["$",e.buyerRebateAmount]}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b",children:"No"})]},"".concat(t,"-rebate"))]}))})]})}),!I&&(0,Rm.jsx)("div",{className:"flex justify-end mt-8",children:(0,Rm.jsx)("button",{type:"button",className:"px-6 py-2 rounded font-semibold ".concat(O||R?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-900 text-white hover:bg-blue-800"),onClick:async()=>{if(O||R)return;console.log("Attempting to save trade. Current list of added agents:",l);if(""!==i.agentName&&""!==i.agentId&&null===d&&!i.alreadyAdded)return console.log("Unsaved agent form data detected:",i),void alert("You have unsaved agent information in the form. Please click 'Add Agent' to add it to the list before saving the entire trade.");try{Q(!0),await B(),H(!0),bp.success("Trade saved successfully!")}catch(e){console.error("Error saving trade:",e),bp.error("Failed to save trade. Please try again.")}finally{Q(!1)}},disabled:O||R,children:O?"Saving...":R?"Trade Saved":"Save Trade"})})]})},oE=e=>{var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k;let{trade:F,onClose:I,onUpdate:T}=e;const[D,L]=(0,t.useState)("key-info"),[_,P]=(0,t.useState)(!1),[U,O]=(0,t.useState)([]),[Q,R]=(0,t.useState)([]),[H,M]=(0,t.useState)(!1),[V,z]=(0,t.useState)((null===F||void 0===F?void 0:F.tradeNumber)||""),[K,q]=(0,t.useState)({listingNumber:(null===F||void 0===F||null===(n=F.keyInfo)||void 0===n?void 0:n.listingNumber)||"",tradeNumber:(null===F||void 0===F?void 0:F.tradeNumber)||"",status:(null===F||void 0===F||null===(r=F.keyInfo)||void 0===r?void 0:r.status)||"AVAILABLE",streetNumber:(null===F||void 0===F||null===(s=F.keyInfo)||void 0===s?void 0:s.streetNumber)||"",streetName:(null===F||void 0===F||null===(a=F.keyInfo)||void 0===a?void 0:a.streetName)||"",unit:(null===F||void 0===F||null===(i=F.keyInfo)||void 0===i?void 0:i.unit)||"",city:(null===F||void 0===F||null===(o=F.keyInfo)||void 0===o?void 0:o.city)||"",province:(null===F||void 0===F||null===(l=F.keyInfo)||void 0===l?void 0:l.province)||"",postalCode:(null===F||void 0===F||null===(c=F.keyInfo)||void 0===c?void 0:c.postalCode)||"",offerDate:(null===F||void 0===F||null===(d=F.keyInfo)||void 0===d?void 0:d.offerDate)||"",firmDate:(null===F||void 0===F||null===(A=F.keyInfo)||void 0===A?void 0:A.firmDate)||"",closeDate:(null===F||void 0===F||null===(u=F.keyInfo)||void 0===u?void 0:u.closeDate)||"",entryDate:(null===F||void 0===F||null===(h=F.keyInfo)||void 0===h?void 0:h.entryDate)||"",finalizedDate:(null===F||void 0===F||null===(m=F.keyInfo)||void 0===m?void 0:m.finalizedDate)||"",sellPrice:(null===F||void 0===F||null===(p=F.keyInfo)||void 0===p?void 0:p.sellPrice)||"",mlsNumber:(null===F||void 0===F||null===(f=F.keyInfo)||void 0===f?void 0:f.mlsNumber)||"",propertyType:(null===F||void 0===F||null===(g=F.keyInfo)||void 0===g?void 0:g.propertyType)||"",dealType:(null===F||void 0===F||null===(x=F.keyInfo)||void 0===x?void 0:x.dealType)||"",weManage:(null===F||void 0===F||null===(b=F.keyInfo)||void 0===b?void 0:b.weManage)||"",classification:(null===F||void 0===F||null===(y=F.keyInfo)||void 0===y?void 0:y.classification)||"LISTING SIDE",firm:(null===F||void 0===F||null===(v=F.keyInfo)||void 0===v?void 0:v.firm)||"",listCommission:(null===F||void 0===F||null===(w=F.keyInfo)||void 0===w?void 0:w.listCommission)||"",sellCommission:(null===F||void 0===F||null===(N=F.keyInfo)||void 0===N?void 0:N.sellCommission)||"",conditions:(null===F||void 0===F?void 0:F.conditions)||[]}),[G,W]=(0,t.useState)((null===F||void 0===F?void 0:F.people)||[]);(0,t.useEffect)(()=>{console.log("People state changed:",G)},[G]);const[Y,J]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),[Z,$]=(0,t.useState)((null===F||void 0===F?void 0:F.outsideBrokers)||[]);(0,t.useEffect)(()=>{console.log("Outside brokers state changed:",Z)},[Z]);const[ee,te]=(0,t.useState)({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"",end:"",primaryPhone:"",chargedHST:"Yes",address:"",sellingAmount:"",tax:"",total:""}),[ne,re]=(0,t.useState)((null===F||void 0===F?void 0:F.trustRecords)||[]),[se,ae]=(0,t.useState)({weHold:"",heldBy:"",received:"",depositDate:"",receivedFrom:"",amount:"",reference:"",paymentType:"",currency:"",earnInterest:""}),[ie,oe]=(0,t.useState)((null===F||void 0===F||null===(j=F.keyInfo)||void 0===j?void 0:j.closeDate)||""),[le,ce]=(0,t.useState)("Active"),[de,Ae]=(0,t.useState)(""),[ue,he]=(0,t.useState)((null===F||void 0===F||null===(C=F.keyInfo)||void 0===C?void 0:C.listCommission)||""),[me,pe]=(0,t.useState)((null===F||void 0===F||null===(B=F.keyInfo)||void 0===B?void 0:B.sellCommission)||""),[fe,ge]=(0,t.useState)((null===F||void 0===F||null===(S=F.commission)||void 0===S?void 0:S.saleClosingRows)||[]),[xe,be]=(0,t.useState)((null===F||void 0===F||null===(E=F.commission)||void 0===E?void 0:E.commissionIncomeRows)||[]),[ye,ve]=(0,t.useState)((null===F||void 0===F||null===(k=F.commission)||void 0===k?void 0:k.outsideBrokersRows)||[]),[we,Ne]=(0,t.useState)(0),[je,Ce]=(0,t.useState)({agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",taxOnFees:"",total:"",totalFees:"",netCommission:"",lead:"No"}),[Be,Se]=(0,t.useState)((null===F||void 0===F?void 0:F.agentCommissionList)||[]),[Ee,ke]=(0,t.useState)(""),[Fe,Ie]=(0,t.useState)(null),[Te,De]=(0,t.useState)(!1),[Le,_e]=(0,t.useState)(null),[Pe,Ue]=(0,t.useState)(""),[Oe,Qe]=(0,t.useState)(null),[Re,He]=(0,t.useState)(!1),[Me,Ve]=(0,t.useState)(null),[ze,Ke]=(0,t.useState)(null),[qe,Ge]=(0,t.useState)(!1),[We,Ye]=(0,t.useState)(null),[Xe,Je]=(0,t.useState)(null),[Ze,$e]=(0,t.useState)(null),[et,tt]=(0,t.useState)(null),[nt,rt]=(0,t.useState)(null),[st,at]=(0,t.useState)(!1),[it,ot]=(0,t.useState)(null),[lt,ct]=(0,t.useState)(!1),[dt,At]=(0,t.useState)(""),[ut,ht]=(0,t.useState)(""),[mt,pt]=(0,t.useState)(null),[ft,gt]=(0,t.useState)({}),[xt,bt]=(0,t.useState)({listingAmount:"0.00",sellingAmount:"0.00",listingTax:"0.00",sellingTax:"0.00"});(0,t.useEffect)(()=>{var e,t;if((null===F||void 0===F||null===(e=F.commission)||void 0===e||null===(t=e.commissionIncomeRows)||void 0===t?void 0:t.length)>0){const e=F.commission.commissionIncomeRows[0];bt({listingAmount:e.listingAmount||"0.00",sellingAmount:e.sellingAmount||"0.00",listingTax:e.listingTax||"0.00",sellingTax:e.sellingTax||"0.00"})}},[F]),(0,t.useEffect)(()=>{null!==F&&void 0!==F&&F.keyInfo&&(he(F.keyInfo.listCommission||""),pe(F.keyInfo.sellCommission||""))},[F]);const[yt,vt]=(0,t.useState)(""),[wt,Nt]=(0,t.useState)(""),[jt,Ct]=(0,t.useState)(""),[Bt,St]=(0,t.useState)("");(0,t.useEffect)(()=>{var e,t;if((null===F||void 0===F||null===(e=F.commission)||void 0===e||null===(t=e.outsideBrokersRows)||void 0===t?void 0:t.length)>0){const e=F.commission.outsideBrokersRows[0];vt(e.agentName||""),Nt(e.brokerage||""),Ct(e.sellingAmount||"")}},[F]),(0,t.useEffect)(()=>{var e;if((null===F||void 0===F||null===(e=F.agentCommissionList)||void 0===e?void 0:e.length)>0){const e=F.agentCommissionList[0];Ce({agentId:e.agentId||"",agentName:e.agentName||"",classification:e.classification||"",ytdCommission:e.ytdCommission||"Yes",awardAmount:e.awardAmount||"",percentage:e.percentage||100,amount:e.amount||"",feeInfo:e.feeInfo||"plan500",feesDeducted:e.feesDeducted||"",tax:e.tax||"",taxOnFees:e.taxOnFees||"",total:e.total||"",totalFees:e.totalFees||"",netCommission:e.netCommission||"",lead:e.lead||"No"})}},[F]),(0,t.useEffect)(()=>{if(F&&K.listingNumber&&U.length>0){const e=U.find(e=>e.listingNumber.toString()===K.listingNumber);if(e&&(console.log("Found selected listing:",e),console.log("Listing people:",e.people),console.log("Listing agents:",e.agents),0===G.length&&e.people&&Array.isArray(e.people))){const t=e.people.map(e=>X(X({},e),{},{type:"Lease"===K.dealType?"Landlord":"Seller"}));console.log("Setting people:",t),W(t)}}},[F,K.listingNumber,K.dealType,U,G.length]),(0,t.useEffect)(()=>{(async()=>{try{const e=await nN.get("/listings");O(e.data)}catch(e){console.error("Error fetching listings:",e)}})()},[]),(0,t.useEffect)(()=>{(async()=>{try{const e=await nN.get("/trades");R(e.data)}catch(e){console.error("Error fetching trades:",e)}})()},[]),(0,t.useEffect)(()=>{const e=xe[0]||{};bt({listingAmount:e.listingAmount||"0.00",sellingAmount:e.sellingAmount||"0.00"})},[xe]),(0,t.useEffect)(()=>{if(K.sellPrice&&(ue||me)){const e=parseFloat(K.sellPrice)||0,t=parseFloat(ue)||0,n=parseFloat(me)||0,r=(e*t/100).toFixed(2),s=(e*n/100).toFixed(2),a=(.13*parseFloat(r)).toFixed(2),i=(.13*parseFloat(s)).toFixed(2);bt({listingAmount:r,sellingAmount:s,listingTax:a,sellingTax:i})}},[K.sellPrice,ue,me]),(0,t.useEffect)(()=>{if(xe.length>0&&K.sellPrice){const e=xe[0],t=parseFloat(K.sellPrice)||0;if(t>0){const n=parseFloat(e.listingAmount)||0,r=n>0?(n/t*100).toFixed(2):"",s=parseFloat(e.sellingAmount)||0,a=s>0?(s/t*100).toFixed(2):"";he(r),pe(a)}}},[xe,K.sellPrice]),(0,t.useEffect)(()=>{K.closeDate&&oe(K.closeDate)},[K.closeDate]),(0,t.useEffect)(()=>{he(K.listCommission||""),pe(K.sellCommission||"")},[K.listCommission,K.sellCommission]);const[Et,kt]=(0,t.useState)({}),Ft=async()=>{P(!0);try{const e=X(X({},F),{},{keyInfo:K,people:G,outsideBrokers:Z,trustRecords:ne,commission:{saleClosingRows:fe,commissionIncomeRows:xe,outsideBrokersRows:ye},agentCommissionList:Be,conditions:K.conditions});await nN.put("/trades/".concat(F._id),e),bp.success("Trade updated successfully!"),T(e),I()}catch(e){console.error("Error updating trade:",e),bp.error("Failed to update trade. Please try again.")}finally{P(!1)}},It=()=>{"key-info"===D?L("people"):"people"===D?L("outside-brokers"):"outside-brokers"===D?L("trust"):"trust"===D?L("commission"):"commission"===D&&L("agent-info")},Tt=()=>{"people"===D?L("key-info"):"outside-brokers"===D?L("people"):"trust"===D?L("outside-brokers"):"commission"===D?L("trust"):"agent-info"===D&&L("commission")};return(0,t.useEffect)(()=>{const e=ne.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);if("LISTING SIDE"===K.classification){if(ne.some(e=>"Yes"===e.weHold)){const t=e-parseFloat(we||0);Ae(t.toFixed(2))}else Ae(we)}else"CO-OPERATING SIDE"===K.classification&&Ae(we)},[K.classification,we,Bt,ne]),(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl h-[90vh] flex flex-col",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Rm.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit Trade #",null===F||void 0===F?void 0:F.tradeNumber]}),(0,Rm.jsx)("button",{onClick:I,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Rm.jsx)("div",{className:"border-b",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("key-info"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("key-info"),children:"Key Info"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("people"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("people"),children:"People"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("outside-brokers"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("outside-brokers"),children:"Outside Brokers"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("trust"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("trust"),children:"Trust"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("commission"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("commission"),children:"Commission"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("agent-info"===D?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("agent-info"),children:"Agent Info"})]})}),(0,Rm.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["key-info"===D&&(0,Rm.jsx)(zS,{keyInfoData:K,handleKeyInfoChange:e=>{const{name:t,value:n}=e.target;q(e=>X(X({},e),{},{[t]:n}))},goToNextSection:It,listings:U,setKeyInfoData:q,isLoadingTradeNumber:H,nextTradeNumber:V,onListingSelected:e=>{e&&e.people&&Array.isArray(e.people)&&W(e.people.map(e=>X(X({},e),{},{type:"Lease"===K.dealType?"Landlord":"Seller"})))},trades:Q,currentTradeNumber:null===F||void 0===F?void 0:F.tradeNumber}),"people"===D&&(0,Rm.jsx)(qS,{people:G,person:Y,setPerson:J,setPeople:W,selectedPersonType:Ee,setSelectedPersonType:ke,editingPersonIndex:Fe,setEditingPersonIndex:Ie,showDeletePersonConfirm:Te,setShowDeletePersonConfirm:De,personToDelete:Le,setPersonToDelete:_e,handlePersonInputChange:e=>{const{name:t,value:n}=e.target;J(e=>X(X({},e),{},{[t]:n}))},handlePersonTypeSelect:e=>{ke(e),J(t=>X(X({},t),{},{type:e}))},handlePersonSubmit:e=>{e.preventDefault(),console.log("handlePersonSubmit called"),console.log("Current person:",Y),console.log("Selected person type:",Ee),console.log("Current people array:",G);const t=X(X({},Y),{},{type:Ee});if(console.log("Person to add:",t),null!==Fe){const e=[...G];e[Fe]=t,W(e),Ie(null),console.log("Updated person at index:",Fe)}else W([...G,t]),console.log("Added new person to array");J({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),ke("")},handlePersonEdit:e=>{J(G[e]),Ie(e),ke(G[e].type)},handlePersonDelete:e=>{_e(e),De(!0)},confirmDeletePerson:()=>{const e=G.filter((e,t)=>t!==Le);W(e),De(!1),_e(null)},cancelDeletePerson:()=>{De(!1),_e(null)},goToNextSection:It,goToPreviousSection:Tt,listingNumber:K.listingNumber,dealType:K.dealType,weManage:K.weManage}),"outside-brokers"===D&&(0,Rm.jsx)(GS,{outsideBrokers:Z,setOutsideBrokers:$,broker:ee,setBroker:te,selectedBrokerType:Pe,setSelectedBrokerType:Ue,editingBrokerIndex:Oe,setEditingBrokerIndex:Qe,showDeleteBrokerConfirm:Re,setShowDeleteBrokerConfirm:He,brokerToDelete:Me,setBrokerToDelete:Ve,handleBrokerInputChange:e=>{const{name:t,value:n}=e.target;te(e=>X(X({},e),{},{[t]:n}))},handleBrokerTypeSelect:e=>{Ue(e),te(t=>X(X({},t),{},{type:e}))},handleBrokerEdit:e=>{te(Z[e]),Qe(e),Ue(Z[e].type)},handleBrokerDelete:e=>{Ve(e),He(!0)},confirmDeleteBroker:()=>{const e=Z.filter((e,t)=>t!==Me);$(e),He(!1),Ve(null)},cancelDeleteBroker:()=>{He(!1),Ve(null)},goToNextSection:It,goToPreviousSection:Tt,listingNumber:K.listingNumber,weManage:K.weManage,dealType:K.dealType}),"trust"===D&&(0,Rm.jsx)(YS,{trustRecords:ne,setTrustRecords:re,trust:se,setTrust:ae,editingTrustIndex:ze,setEditingTrustIndex:Ke,showDeleteTrustConfirm:qe,setShowDeleteTrustConfirm:Ge,trustToDelete:We,setTrustToDelete:Ye,handleTrustInputChange:e=>{const{name:t,value:n}=e.target;ae(e=>X(X({},e),{},{[t]:n}))},handleTrustSubmit:e=>{if(e.preventDefault(),null!==ze){const e=[...ne];e[ze]=se,re(e),Ke(null)}else re([...ne,se]);ae({weHold:"",heldBy:"",received:"",depositDate:"",receivedFrom:"",amount:"",reference:"",paymentType:"",currency:"",earnInterest:""})},handleTrustEdit:e=>{ae(ne[e]),Ke(e)},handleTrustDelete:e=>{Ye(e),Ge(!0)},confirmDeleteTrust:()=>{const e=ne.filter((e,t)=>t!==We);re(e),Ge(!1),Ye(null)},cancelDeleteTrust:()=>{Ge(!1),Ye(null)},goToNextSection:It,goToPreviousSection:Tt,tradeNumber:K.tradeNumber||V,userName:"Admin"}),"commission"===D&&(0,Rm.jsx)(VS,{sellPrice:K.sellPrice,closingDate:ie,status:le,ar:de,onClosingDateChange:e=>oe(e.target.value),onStatusChange:e=>ce(e.target.value),onARChange:e=>Ae(e.target.value),listingCommission:ue,sellingCommission:me,onListingCommissionChange:e=>{const t=e.target.value;he(t),q(e=>X(X({},e),{},{listCommission:t}))},onSellingCommissionChange:e=>{const t=e.target.value;pe(t),q(e=>X(X({},e),{},{sellCommission:t}))},goToNextSection:It,goToPreviousSection:Tt,tradeNumber:V,saleClosingRows:fe,commissionIncomeRows:xe,outsideBrokersRows:ye,editingSaleClosingIdx:Xe,editingCommissionIncomeIdx:Ze,editingOutsideBrokerIdx:et,commissionFormFields:Et,onUpdateSaleClosing:e=>{const t=[...fe];t[Xe]=e,ge(t),Je(null),kt({})},onUpdateCommissionIncome:e=>{const t=[...xe];t[Ze]=e,be(t),$e(null),kt({})},onUpdateOutsideBroker:e=>{const t=[...ye];t[et]=e,ve(t),tt(null),kt({})},onEditSaleClosing:()=>{fe.length>0&&(Je(0),kt(X({},fe[0])))},onEditCommissionIncome:()=>{xe.length>0&&($e(0),kt(X({},xe[0])))},onEditOutsideBroker:()=>{ye.length>0&&(tt(0),kt(X({},ye[0])))},onAddCommissionInfo:e=>{let{type:t,data:n}=e;switch(t){case"saleClosing":ge([...fe,n]);break;case"commissionIncome":be([...xe,n]);break;case"outsideBroker":ve([...ye,n])}},onDeleteSaleClosing:()=>{fe.length>0&&(ge([]),Je(null),kt({}))},onDeleteCommissionIncome:()=>{xe.length>0&&(be([]),$e(null),kt({}))},onDeleteOutsideBroker:()=>{ye.length>0&&(ve([]),tt(null),kt({}))},outsideBrokers:Z,onCommissionTotalChange:Ne,onBrokerTotalChange:St,brokerAgentName:yt,brokerBrokerage:wt,brokerSellingAmount:jt,onBrokerAgentNameChange:e=>vt(e.target.value),onBrokerBrokerageChange:e=>Nt(e.target.value),onBrokerSellingAmountChange:e=>Ct(e.target.value)}),"agent-info"===D&&(0,Rm.jsx)(iE,{goToNextSection:Ft,goToPreviousSection:Tt,agent:je,setAgent:Ce,agents:Be,setAgents:Se,editingIndex:nt,setEditingIndex:rt,showDeleteModal:st,setShowDeleteModal:at,deletingIndex:it,setDeletingIndex:ot,showBuyerRebateModal:lt,setShowBuyerRebateModal:ct,buyerRebateIncluded:dt,setBuyerRebateIncluded:At,buyerRebateAmount:ut,setBuyerRebateAmount:ht,pendingAgent:mt,setPendingAgent:pt,validationErrors:ft,setValidationErrors:gt,onSaveTrade:Ft,commissionTotal:we,classification:K.classification,commissionData:xt,isEditMode:!0,isEditingExistingTrade:!0,selectedListing:U.find(e=>e.listingNumber.toString()===K.listingNumber)})]}),(0,Rm.jsxs)("div",{className:"border-t p-6 flex justify-between",children:[(0,Rm.jsx)("button",{onClick:Tt,disabled:"key-info"===D,className:"px-6 py-2 rounded-md font-medium ".concat("key-info"===D?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"),children:"Previous"}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsx)("button",{onClick:I,className:"px-6 py-2 bg-gray-600 text-white rounded-md font-medium hover:bg-gray-700",children:"Cancel"}),"agent-info"===D?(0,Rm.jsx)("button",{onClick:Ft,disabled:_,className:"px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 disabled:bg-blue-400",children:_?"Saving...":"Save Trade"}):(0,Rm.jsx)("button",{onClick:It,className:"px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:"Next"})]})]})]})})};var lE=Uint8Array,cE=Uint16Array,dE=Int32Array,AE=new lE([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uE=new lE([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hE=new lE([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mE=function(e,t){for(var n=new cE(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var s=new dE(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},pE=mE(AE,2),fE=pE.b,gE=pE.r;fE[28]=258,gE[258]=28;for(var xE=mE(uE,0),bE=(xE.b,xE.r),yE=new cE(32768),vE=0;vE<32768;++vE){var wE=(43690&vE)>>1|(21845&vE)<<1;wE=(61680&(wE=(52428&wE)>>2|(13107&wE)<<2))>>4|(3855&wE)<<4,yE[vE]=((65280&wE)>>8|(255&wE)<<8)>>1}var NE=function(e,t,n){for(var r=e.length,s=0,a=new cE(t);s<r;++s)e[s]&&++a[e[s]-1];var i,o=new cE(t);for(s=1;s<t;++s)o[s]=o[s-1]+a[s-1]<<1;if(n){i=new cE(1<<t);var l=15-t;for(s=0;s<r;++s)if(e[s])for(var c=s<<4|e[s],d=t-e[s],A=o[e[s]-1]++<<d,u=A|(1<<d)-1;A<=u;++A)i[yE[A]>>l]=c}else for(i=new cE(r),s=0;s<r;++s)e[s]&&(i[s]=yE[o[e[s]-1]++]>>15-e[s]);return i},jE=new lE(288);for(vE=0;vE<144;++vE)jE[vE]=8;for(vE=144;vE<256;++vE)jE[vE]=9;for(vE=256;vE<280;++vE)jE[vE]=7;for(vE=280;vE<288;++vE)jE[vE]=8;var CE=new lE(32);for(vE=0;vE<32;++vE)CE[vE]=5;var BE=NE(jE,9,0),SE=NE(CE,5,0),EE=function(e){return(e+7)/8|0},kE=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new lE(e.subarray(t,n))},FE=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},IE=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},TE=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return{t:QE,l:0};if(1==s){var i=new lE(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,A=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=n[n[c].f<n[A].f?c++:A++],l=n[c!=d&&n[c].f<n[A].f?c++:A++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};var u=a[0].s;for(r=1;r<s;++r)a[r].s>u&&(u=a[r].s);var h=new cE(u+1),m=DE(n[d-1],h,0);if(m>t){r=0;var p=0,f=m-t,g=1<<f;for(a.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});r<s;++r){var x=a[r].s;if(!(h[x]>t))break;p+=g-(1<<m-h[x]),h[x]=t}for(p>>=f;p>0;){var b=a[r].s;h[b]<t?p-=1<<t-h[b]++-1:++r}for(;r>=0&&p;--r){var y=a[r].s;h[y]==t&&(--h[y],++p)}m=t}return{t:new lE(h),l:m}},DE=function(e,t,n){return-1==e.s?Math.max(DE(e.l,t,n+1),DE(e.r,t,n+1)):t[e.s]=n},LE=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new cE(++t),r=0,s=e[0],a=1,i=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==s&&o!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=e[o]}return{c:n.subarray(0,r),n:t}},_E=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},PE=function(e,t,n){var r=n.length,s=EE(t+2);e[s]=255&r,e[s+1]=r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;a<r;++a)e[s+a+4]=n[a];return 8*(s+4+r)},UE=function(e,t,n,r,s,a,i,o,l,c,d){FE(t,d++,n),++s[256];for(var A=TE(s,15),u=A.t,h=A.l,m=TE(a,15),p=m.t,f=m.l,g=LE(u),x=g.c,b=g.n,y=LE(p),v=y.c,w=y.n,N=new cE(19),j=0;j<x.length;++j)++N[31&x[j]];for(j=0;j<v.length;++j)++N[31&v[j]];for(var C=TE(N,7),B=C.t,S=C.l,E=19;E>4&&!B[hE[E-1]];--E);var k,F,I,T,D=c+5<<3,L=_E(s,jE)+_E(a,CE)+i,_=_E(s,u)+_E(a,p)+i+14+3*E+_E(N,B)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&D<=L&&D<=_)return PE(t,d,e.subarray(l,l+c));if(FE(t,d,1+(_<L)),d+=2,_<L){k=NE(u,h,0),F=u,I=NE(p,f,0),T=p;var P=NE(B,S,0);FE(t,d,b-257),FE(t,d+5,w-1),FE(t,d+10,E-4),d+=14;for(j=0;j<E;++j)FE(t,d+3*j,B[hE[j]]);d+=3*E;for(var U=[x,v],O=0;O<2;++O){var Q=U[O];for(j=0;j<Q.length;++j){var R=31&Q[j];FE(t,d,P[R]),d+=B[R],R>15&&(FE(t,d,Q[j]>>5&127),d+=Q[j]>>12)}}}else k=BE,F=jE,I=SE,T=CE;for(j=0;j<o;++j){var H=r[j];if(H>255){IE(t,d,k[(R=H>>18&31)+257]),d+=F[R+257],R>7&&(FE(t,d,H>>23&31),d+=AE[R]);var M=31&H;IE(t,d,I[M]),d+=T[M],M>3&&(IE(t,d,H>>5&8191),d+=uE[M])}else IE(t,d,k[H]),d+=F[H]}return IE(t,d,k[256]),d+F[256]},OE=new dE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),QE=new lE(0),RE=function(e,t,n,r,s,a){var i=a.z||e.length,o=new lE(r+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(r,o.length-s),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var A=OE[t-1],u=A>>13,h=8191&A,m=(1<<n)-1,p=a.p||new cE(32768),f=a.h||new cE(m+1),g=Math.ceil(n/3),x=2*g,b=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<x)&m},y=new dE(25e3),v=new cE(288),w=new cE(32),N=0,j=0,C=a.i||0,B=0,S=a.w||0,E=0;C+2<i;++C){var k=b(C),F=32767&C,I=f[k];if(p[F]=I,f[k]=F,S<=C){var T=i-C;if((N>7e3||B>24576)&&(T>423||!c)){d=UE(e,l,0,y,v,w,j,B,E,C-E,d),B=N=j=0,E=C;for(var D=0;D<286;++D)v[D]=0;for(D=0;D<30;++D)w[D]=0}var L=2,_=0,P=h,U=F-I&32767;if(T>2&&k==b(C-U))for(var O=Math.min(u,T)-1,Q=Math.min(32767,C),R=Math.min(258,T);U<=Q&&--P&&F!=I;){if(e[C+L]==e[C+L-U]){for(var H=0;H<R&&e[C+H]==e[C+H-U];++H);if(H>L){if(L=H,_=U,H>O)break;var M=Math.min(U,H-2),V=0;for(D=0;D<M;++D){var z=C-U+D&32767,K=z-p[z]&32767;K>V&&(V=K,I=z)}}}U+=(F=I)-(I=p[F])&32767}if(_){y[B++]=268435456|gE[L]<<18|bE[_];var q=31&gE[L],G=31&bE[_];j+=AE[q]+uE[G],++v[257+q],++w[G],S=C+L,++N}else y[B++]=e[C],++v[e[C]]}}for(C=Math.max(C,S);C<i;++C)y[B++]=e[C],++v[e[C]];d=UE(e,l,c,y,v,w,j,B,E,C-E,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=f,a.p=p,a.i=C,a.w=S)}else{for(C=a.w||0;C<i+c;C+=65535){var W=C+65535;W>=i&&(l[d/8|0]=c,W=i),d=PE(l,d+1,e.subarray(C,W))}a.i=i}return kE(o,0,r+EE(d)+s)},HE=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,a=0|n.length,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=r+=n[i];r=(65535&r)+15*(r>>16),s=(65535&s)+15*(s>>16)}e=r,t=s},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},ME=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),i=new lE(a.length+e.length);i.set(a),i.set(e,a.length),e=i,s.w=a.length}return RE(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,s)},VE=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},zE=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=HE();s.p(t.dictionary),VE(e,2,s.d())}};function KE(e,t){t||(t={});var n=HE();n.p(e);var r=ME(e,t,t.dictionary?6:2,4);return zE(r,t),VE(r,r.length-4,n.d()),r}var qE="undefined"!=typeof TextDecoder&&new TextDecoder;try{qE.decode(QE,{stream:!0})}catch(Tu){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function GE(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const WE=new TextEncoder;const YE=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),XE={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class JE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,W.A)(this,"buffer",void 0),(0,W.A)(this,"byteLength",void 0),(0,W.A)(this,"byteOffset",void 0),(0,W.A)(this,"length",void 0),(0,W.A)(this,"offset",void 0),(0,W.A)(this,"lastWrittenByte",void 0),(0,W.A)(this,"littleEndian",void 0),(0,W.A)(this,"_data",void 0),(0,W.A)(this,"_mark",void 0),(0,W.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,s=e.byteLength-r;let a=r;(ArrayBuffer.isView(e)||e instanceof JE)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=n?s:0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,s),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=XE[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,s=this.buffer.slice(r,r+n);if(this.littleEndian===YE&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();const s=new XE[t](e.buffer);return this.offset+=n,s.reverse(),s}const a=new XE[t](s);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return GE(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return GE(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return WE.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ZE(e){let t=e.length;for(;--t>=0;)e[t]=0}const $E=256,ek=286,tk=30,nk=15,rk=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),sk=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ak=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ik=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ok=new Array(576);ZE(ok);const lk=new Array(60);ZE(lk);const ck=new Array(512);ZE(ck);const dk=new Array(256);ZE(dk);const Ak=new Array(29);ZE(Ak);const uk=new Array(tk);function hk(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}let mk,pk,fk;function gk(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ZE(uk);const xk=e=>e<256?ck[e]:ck[256+(e>>>7)],bk=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},yk=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,bk(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},vk=(e,t,n)=>{yk(e,n[2*t],n[2*t+1])},wk=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Nk=(e,t,n)=>{const r=new Array(16);let s,a,i=0;for(s=1;s<=nk;s++)i=i+n[s-1]<<1,r[s]=i;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=wk(r[t]++,t))}},jk=e=>{let t;for(t=0;t<ek;t++)e.dyn_ltree[2*t]=0;for(t=0;t<tk;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ck=e=>{e.bi_valid>8?bk(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Bk=(e,t,n,r)=>{const s=2*t,a=2*n;return e[s]<e[a]||e[s]===e[a]&&r[t]<=r[n]},Sk=(e,t,n)=>{const r=e.heap[n];let s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&Bk(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!Bk(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r},Ek=(e,t,n)=>{let r,s,a,i,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,s=e.pending_buf[e.sym_buf+o++],0===r?vk(e,s,t):(a=dk[s],vk(e,a+$E+1,t),i=rk[a],0!==i&&(s-=Ak[a],yk(e,s,i)),r--,a=xk(r),vk(e,a,n),i=sk[a],0!==i&&(r-=uk[a],yk(e,r,i)))}while(o<e.sym_next);vk(e,256,t)},kk=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.elems;let i,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<a;i++)0!==n[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=r[2*l+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)Sk(e,n,i);l=a;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Sk(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,n[2*l]=n[2*i]+n[2*o],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,n[2*i+1]=n[2*o+1]=l,e.heap[1]=l++,Sk(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,A,u,h,m,p=0;for(u=0;u<=nk;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],u=n[2*n[2*d+1]+1]+1,u>l&&(u=l,p++),n[2*d+1]=u,d>r||(e.bl_count[u]++,h=0,d>=o&&(h=i[d-o]),m=n[2*d],e.opt_len+=m*(u+h),a&&(e.static_len+=m*(s[2*d+1]+h)));if(0!==p){do{for(u=l-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(u=l;0!==u;u--)for(d=e.bl_count[u];0!==d;)A=e.heap[--c],A>r||(n[2*A+1]!==u&&(e.opt_len+=(u-n[2*A+1])*n[2*A],n[2*A+1]=u),d--)}})(e,t),Nk(n,c,e.bl_count)},Fk=(e,t,n)=>{let r,s,a=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=i,i=t[2*(r+1)+1],++o<l&&s===i||(o<c?e.bl_tree[2*s]+=o:0!==s?(s!==a&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=s,0===i?(l=138,c=3):s===i?(l=6,c=3):(l=7,c=4))},Ik=(e,t,n)=>{let r,s,a=-1,i=t[1],o=0,l=7,c=4;for(0===i&&(l=138,c=3),r=0;r<=n;r++)if(s=i,i=t[2*(r+1)+1],!(++o<l&&s===i)){if(o<c)do{vk(e,s,e.bl_tree)}while(0!==--o);else 0!==s?(s!==a&&(vk(e,s,e.bl_tree),o--),vk(e,16,e.bl_tree),yk(e,o-3,2)):o<=10?(vk(e,17,e.bl_tree),yk(e,o-3,3)):(vk(e,18,e.bl_tree),yk(e,o-11,7));o=0,a=s,0===i?(l=138,c=3):s===i?(l=6,c=3):(l=7,c=4)}};let Tk=!1;const Dk=(e,t,n,r)=>{yk(e,0+(r?1:0),3),Ck(e),bk(e,n),bk(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Lk=e=>{Tk||((()=>{let e,t,n,r,s;const a=new Array(16);for(n=0,r=0;r<28;r++)for(Ak[r]=n,e=0;e<1<<rk[r];e++)dk[n++]=r;for(dk[n-1]=r,s=0,r=0;r<16;r++)for(uk[r]=s,e=0;e<1<<sk[r];e++)ck[s++]=r;for(s>>=7;r<tk;r++)for(uk[r]=s<<7,e=0;e<1<<sk[r]-7;e++)ck[256+s++]=r;for(t=0;t<=nk;t++)a[t]=0;for(e=0;e<=143;)ok[2*e+1]=8,e++,a[8]++;for(;e<=255;)ok[2*e+1]=9,e++,a[9]++;for(;e<=279;)ok[2*e+1]=7,e++,a[7]++;for(;e<=287;)ok[2*e+1]=8,e++,a[8]++;for(Nk(ok,287,a),e=0;e<tk;e++)lk[2*e+1]=5,lk[2*e]=wk(e,5);mk=new hk(ok,rk,257,ek,nk),pk=new hk(lk,sk,0,tk,nk),fk=new hk(new Array(0),ak,0,19,7)})(),Tk=!0),e.l_desc=new gk(e.dyn_ltree,mk),e.d_desc=new gk(e.dyn_dtree,pk),e.bl_desc=new gk(e.bl_tree,fk),e.bi_buf=0,e.bi_valid=0,jk(e)},_k=(e,t,n,r)=>{let s,a,i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<$E;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),kk(e,e.l_desc),kk(e,e.d_desc),i=(e=>{let t;for(Fk(e,e.dyn_ltree,e.l_desc.max_code),Fk(e,e.dyn_dtree,e.d_desc.max_code),kk(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ik[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?Dk(e,t,n,r):4===e.strategy||a===s?(yk(e,2+(r?1:0),3),Ek(e,ok,lk)):(yk(e,4+(r?1:0),3),((e,t,n,r)=>{let s;for(yk(e,t-257,5),yk(e,n-1,5),yk(e,r-4,4),s=0;s<r;s++)yk(e,e.bl_tree[2*ik[s]+1],3);Ik(e,e.dyn_ltree,t-1),Ik(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ek(e,e.dyn_ltree,e.dyn_dtree)),jk(e),r&&Ck(e)},Pk=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(dk[n]+$E+1)]++,e.dyn_dtree[2*xk(t)]++),e.sym_next===e.sym_end),Uk=e=>{yk(e,2,3),vk(e,256,ok),(e=>{16===e.bi_valid?(bk(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},Ok={_tr_init:Lk,_tr_stored_block:Dk,_tr_flush_block:_k,_tr_tally:Pk,_tr_align:Uk};var Qk=(e,t,n,r)=>{let s=65535&e,a=e>>>16&65535,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do{s=s+t[r++]|0,a=a+s|0}while(--i);s%=65521,a%=65521}return s|a<<16};const Rk=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Hk=(e,t,n,r)=>{const s=Rk,a=r+n;e^=-1;for(let i=r;i<a;i++)e=e>>>8^s[255&(e^t[i])];return-1^e},Mk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vk={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:zk,_tr_stored_block:Kk,_tr_flush_block:qk,_tr_tally:Gk,_tr_align:Wk}=Ok,{Z_NO_FLUSH:Yk,Z_PARTIAL_FLUSH:Xk,Z_FULL_FLUSH:Jk,Z_FINISH:Zk,Z_BLOCK:$k,Z_OK:eF,Z_STREAM_END:tF,Z_STREAM_ERROR:nF,Z_DATA_ERROR:rF,Z_BUF_ERROR:sF,Z_DEFAULT_COMPRESSION:aF,Z_FILTERED:iF,Z_HUFFMAN_ONLY:oF,Z_RLE:lF,Z_FIXED:cF,Z_DEFAULT_STRATEGY:dF,Z_UNKNOWN:AF,Z_DEFLATED:uF}=Vk,hF=258,mF=262,pF=42,fF=113,gF=666,xF=(e,t)=>(e.msg=Mk[t],t),bF=e=>2*e-(e>4?9:0),yF=e=>{let t=e.length;for(;--t>=0;)e[t]=0},vF=e=>{let t,n,r,s=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=s?n-s:0}while(--t);t=s,r=t;do{n=e.prev[--r],e.prev[r]=n>=s?n-s:0}while(--t)};let wF=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const NF=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},jF=(e,t)=>{qk(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,NF(e.strm)},CF=(e,t)=>{e.pending_buf[e.pending++]=t},BF=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},SF=(e,t,n,r)=>{let s=e.avail_in;return s>r&&(s=r),0===s?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),1===e.state.wrap?e.adler=Qk(e.adler,t,s,n):2===e.state.wrap&&(e.adler=Hk(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},EF=(e,t)=>{let n,r,s=e.max_chain_length,a=e.strstart,i=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-mF?e.strstart-(e.w_size-mF):0,c=e.window,d=e.w_mask,A=e.prev,u=e.strstart+hF;let h=c[a+i-1],m=c[a+i];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+i]===m&&c[n+i-1]===h&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<u);if(r=hF-(u-a),a=u-hF,r>i){if(e.match_start=t,i=r,r>=o)break;h=c[a+i-1],m=c[a+i]}}}while((t=A[t&d])>l&&0!==--s);return i<=e.lookahead?i:e.lookahead},kF=e=>{const t=e.w_size;let n,r,s;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-mF)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),vF(e),r+=t),0===e.strm.avail_in)break;if(n=SF(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=wF(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=wF(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<mF&&0!==e.strm.avail_in)},FF=(e,t)=>{let n,r,s,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>s&&(n=s),n<a&&(0===n&&t!==Zk||t===Yk||n!==r+e.strm.avail_in))break;i=t===Zk&&n===r+e.strm.avail_in?1:0,Kk(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,NF(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(SF(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===i);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?4:t!==Yk&&t!==Zk&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(SF(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,a=s>e.w_size?e.w_size:s,r=e.strstart-e.block_start,(r>=a||(r||t===Zk)&&t!==Yk&&0===e.strm.avail_in&&r<=s)&&(n=r>s?s:r,i=t===Zk&&0===e.strm.avail_in&&n===r?1:0,Kk(e,e.block_start,n,i),e.block_start+=n,NF(e.strm)),i?3:1)},IF=(e,t)=>{let n,r;for(;;){if(e.lookahead<mF){if(kF(e),e.lookahead<mF&&t===Yk)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=wF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-mF&&(e.match_length=EF(e,n)),e.match_length>=3)if(r=Gk(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=wF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=wF(e,e.ins_h,e.window[e.strstart+1]);else r=Gk(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(jF(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Zk?(jF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jF(e,!1),0===e.strm.avail_out)?1:2},TF=(e,t)=>{let n,r,s;for(;;){if(e.lookahead<mF){if(kF(e),e.lookahead<mF&&t===Yk)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=wF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-mF&&(e.match_length=EF(e,n),e.match_length<=5&&(e.strategy===iF||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,r=Gk(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=wF(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(jF(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Gk(e,0,e.window[e.strstart-1]),r&&jF(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Gk(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Zk?(jF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jF(e,!1),0===e.strm.avail_out)?1:2};function DF(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}const LF=[new DF(0,0,0,0,FF),new DF(4,4,8,4,IF),new DF(4,5,16,8,IF),new DF(4,6,32,32,IF),new DF(4,4,16,16,TF),new DF(8,16,32,32,TF),new DF(8,16,128,128,TF),new DF(8,32,128,256,TF),new DF(32,128,258,1024,TF),new DF(32,258,258,4096,TF)];function _F(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=uF,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yF(this.dyn_ltree),yF(this.dyn_dtree),yF(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yF(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),yF(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const PF=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==pF&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==fF&&t.status!==gF?1:0},UF=e=>{if(PF(e))return xF(e,nF);e.total_in=e.total_out=0,e.data_type=AF;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?pF:fF,e.adler=2===t.wrap?0:1,t.last_flush=-2,zk(t),eF},OF=e=>{const t=UF(e);return t===eF&&(e=>{e.window_size=2*e.w_size,yF(e.head),e.max_lazy_match=LF[e.level].max_lazy,e.good_match=LF[e.level].good_length,e.nice_match=LF[e.level].nice_length,e.max_chain_length=LF[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},QF=(e,t,n,r,s,a)=>{if(!e)return nF;let i=1;if(t===aF&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),s<1||s>9||n!==uF||r<8||r>15||t<0||t>9||a<0||a>cF||8===r&&1!==i)return xF(e,nF);8===r&&(r=9);const o=new _F;return e.state=o,o.strm=e,o.status=pF,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=a,o.method=n,OF(e)};var RF=(e,t)=>{if(PF(e)||t>$k||t<0)return e?xF(e,nF):nF;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===gF&&t!==Zk)return xF(e,0===e.avail_out?sF:nF);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(NF(e),0===e.avail_out)return n.last_flush=-1,eF}else if(0===e.avail_in&&bF(t)<=bF(r)&&t!==Zk)return xF(e,sF);if(n.status===gF&&0!==e.avail_in)return xF(e,sF);if(n.status===pF&&0===n.wrap&&(n.status=fF),n.status===pF){let t=uF+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=oF||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,BF(n,t),0!==n.strstart&&(BF(n,e.adler>>>16),BF(n,65535&e.adler)),e.adler=1,n.status=fF,NF(e),0!==n.pending)return n.last_flush=-1,eF}if(57===n.status)if(e.adler=0,CF(n,31),CF(n,139),CF(n,8),n.gzhead)CF(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),CF(n,255&n.gzhead.time),CF(n,n.gzhead.time>>8&255),CF(n,n.gzhead.time>>16&255),CF(n,n.gzhead.time>>24&255),CF(n,9===n.level?2:n.strategy>=oF||n.level<2?4:0),CF(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(CF(n,255&n.gzhead.extra.length),CF(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Hk(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(CF(n,0),CF(n,0),CF(n,0),CF(n,0),CF(n,0),CF(n,9===n.level?2:n.strategy>=oF||n.level<2?4:0),CF(n,3),n.status=fF,NF(e),0!==n.pending)return n.last_flush=-1,eF;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=s,NF(e),0!==n.pending)return n.last_flush=-1,eF;t=0,r-=s}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-r,r)),NF(e),0!==n.pending)return n.last_flush=-1,eF;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,CF(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-r,r)),NF(e),0!==n.pending)return n.last_flush=-1,eF;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,CF(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Hk(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(NF(e),0!==n.pending))return n.last_flush=-1,eF;CF(n,255&e.adler),CF(n,e.adler>>8&255),e.adler=0}if(n.status=fF,NF(e),0!==n.pending)return n.last_flush=-1,eF}if(0!==e.avail_in||0!==n.lookahead||t!==Yk&&n.status!==gF){let r=0===n.level?FF(n,t):n.strategy===oF?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(kF(e),0===e.lookahead)){if(t===Yk)return 1;break}if(e.match_length=0,n=Gk(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(jF(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Zk?(jF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jF(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===lF?((e,t)=>{let n,r,s,a;const i=e.window;for(;;){if(e.lookahead<=hF){if(kF(e),e.lookahead<=hF&&t===Yk)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(s=e.strstart-1,r=i[s],r===i[++s]&&r===i[++s]&&r===i[++s])){a=e.strstart+hF;do{}while(r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&r===i[++s]&&s<a);e.match_length=hF-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Gk(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Gk(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(jF(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Zk?(jF(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jF(e,!1),0===e.strm.avail_out)?1:2})(n,t):LF[n.level].func(n,t);if(3!==r&&4!==r||(n.status=gF),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),eF;if(2===r&&(t===Xk?Wk(n):t!==$k&&(Kk(n,0,0,!1),t===Jk&&(yF(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),NF(e),0===e.avail_out))return n.last_flush=-1,eF}return t!==Zk?eF:n.wrap<=0?tF:(2===n.wrap?(CF(n,255&e.adler),CF(n,e.adler>>8&255),CF(n,e.adler>>16&255),CF(n,e.adler>>24&255),CF(n,255&e.total_in),CF(n,e.total_in>>8&255),CF(n,e.total_in>>16&255),CF(n,e.total_in>>24&255)):(BF(n,e.adler>>>16),BF(n,65535&e.adler)),NF(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?eF:tF)},HF=(e,t)=>{let n=t.length;if(PF(e))return nF;const r=e.state,s=r.wrap;if(2===s||1===s&&r.status!==pF||r.lookahead)return nF;if(1===s&&(e.adler=Qk(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===s&&(yF(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,kF(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=wF(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,kF(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=i,e.input=o,e.avail_in=a,r.wrap=s,eF},MF={deflateInit:(e,t)=>QF(e,t,uF,15,8,dF),deflateInit2:QF,deflateReset:OF,deflateResetKeep:UF,deflateSetHeader:(e,t)=>PF(e)||2!==e.state.wrap?nF:(e.state.gzhead=t,eF),deflate:RF,deflateEnd:e=>{if(PF(e))return nF;const t=e.state.status;return e.state=null,t===fF?xF(e,rF):eF},deflateSetDictionary:HF,deflateInfo:"pako deflate (from Nodeca project)"};const VF=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var zF=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)VF(n,t)&&(e[t]=n[t])}}return e},KF=e=>{let t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,s=0,a=e.length;r<a;r++){let t=e[r];n.set(t,s),s+=t.length}return n};let qF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(EU){qF=!1}const GF=new Uint8Array(256);for(let n=0;n<256;n++)GF[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;GF[254]=GF[254]=1;var WF=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,s,a,i=e.length,o=0;for(s=0;s<i;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<i&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,s=0;a<o;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<i&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},YF=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,s;const a=new Array(2*n);for(s=0,r=0;r<n;){let t=e[r++];if(t<128){a[s++]=t;continue}let i=GF[t];if(i>4)a[s++]=65533,r+=i-1;else{for(t&=2===i?31:3===i?15:7;i>1&&r<n;)t=t<<6|63&e[r++],i--;i>1?a[s++]=65533:t<65536?a[s++]=t:(t-=65536,a[s++]=55296|t>>10&1023,a[s++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&qF)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,s)},XF=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+GF[e[n]]>t?n:t};var JF=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ZF=Object.prototype.toString,{Z_NO_FLUSH:$F,Z_SYNC_FLUSH:eI,Z_FULL_FLUSH:tI,Z_FINISH:nI,Z_OK:rI,Z_STREAM_END:sI,Z_DEFAULT_COMPRESSION:aI,Z_DEFAULT_STRATEGY:iI,Z_DEFLATED:oI}=Vk;function lI(e){this.options=zF({level:aI,method:oI,chunkSize:16384,windowBits:15,memLevel:8,strategy:iI},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JF,this.strm.avail_out=0;let n=MF.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==rI)throw new Error(Mk[n]);if(t.header&&MF.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?WF(t.dictionary):"[object ArrayBuffer]"===ZF.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=MF.deflateSetDictionary(this.strm,e),n!==rI)throw new Error(Mk[n]);this._dict_set=!0}}function cI(e,t){const n=new lI(t);if(n.push(e,!0),n.err)throw n.msg||Mk[n.err];return n.result}lI.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?nI:$F,"string"===typeof e?n.input=WF(e):"[object ArrayBuffer]"===ZF.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===eI||a===tI)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=MF.deflate(n,a),s===sI)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=MF.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===rI;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},lI.prototype.onData=function(e){this.chunks.push(e)},lI.prototype.onEnd=function(e){e===rI&&(this.result=KF(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dI=function(e,t){return(t=t||{}).raw=!0,cI(e,t)},AI=function(e,t){return(t=t||{}).gzip=!0,cI(e,t)},uI={Deflate:lI,deflate:cI,deflateRaw:dI,gzip:AI,constants:Vk};const hI=16209;var mI=function(e,t){let n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C;const B=e.state;n=e.next_in,j=e.input,r=n+(e.avail_in-5),s=e.next_out,C=e.output,a=s-(t-e.avail_out),i=s+(e.avail_out-257),o=B.dmax,l=B.wsize,c=B.whave,d=B.wnext,A=B.window,u=B.hold,h=B.bits,m=B.lencode,p=B.distcode,f=(1<<B.lenbits)-1,g=(1<<B.distbits)-1;e:do{h<15&&(u+=j[n++]<<h,h+=8,u+=j[n++]<<h,h+=8),x=m[u&f];t:for(;;){if(b=x>>>24,u>>>=b,h-=b,b=x>>>16&255,0===b)C[s++]=65535&x;else{if(!(16&b)){if(0===(64&b)){x=m[(65535&x)+(u&(1<<b)-1)];continue t}if(32&b){B.mode=16191;break e}e.msg="invalid literal/length code",B.mode=hI;break e}y=65535&x,b&=15,b&&(h<b&&(u+=j[n++]<<h,h+=8),y+=u&(1<<b)-1,u>>>=b,h-=b),h<15&&(u+=j[n++]<<h,h+=8,u+=j[n++]<<h,h+=8),x=p[u&g];n:for(;;){if(b=x>>>24,u>>>=b,h-=b,b=x>>>16&255,!(16&b)){if(0===(64&b)){x=p[(65535&x)+(u&(1<<b)-1)];continue n}e.msg="invalid distance code",B.mode=hI;break e}if(v=65535&x,b&=15,h<b&&(u+=j[n++]<<h,h+=8,h<b&&(u+=j[n++]<<h,h+=8)),v+=u&(1<<b)-1,v>o){e.msg="invalid distance too far back",B.mode=hI;break e}if(u>>>=b,h-=b,b=s-a,v>b){if(b=v-b,b>c&&B.sane){e.msg="invalid distance too far back",B.mode=hI;break e}if(w=0,N=A,0===d){if(w+=l-b,b<y){y-=b;do{C[s++]=A[w++]}while(--b);w=s-v,N=C}}else if(d<b){if(w+=l+d-b,b-=d,b<y){y-=b;do{C[s++]=A[w++]}while(--b);if(w=0,d<y){b=d,y-=b;do{C[s++]=A[w++]}while(--b);w=s-v,N=C}}}else if(w+=d-b,b<y){y-=b;do{C[s++]=A[w++]}while(--b);w=s-v,N=C}for(;y>2;)C[s++]=N[w++],C[s++]=N[w++],C[s++]=N[w++],y-=3;y&&(C[s++]=N[w++],y>1&&(C[s++]=N[w++]))}else{w=s-v;do{C[s++]=C[w++],C[s++]=C[w++],C[s++]=C[w++],y-=3}while(y>2);y&&(C[s++]=C[w++],y>1&&(C[s++]=C[w++]))}break}}break}}while(n<r&&s<i);y=h>>3,n-=y,h-=y<<3,u&=(1<<h)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=s<i?i-s+257:257-(s-i),B.hold=u,B.bits=h};const pI=15,fI=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gI=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xI=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bI=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var yI=(e,t,n,r,s,a,i,o)=>{const l=o.bits;let c,d,A,u,h,m,p=0,f=0,g=0,x=0,b=0,y=0,v=0,w=0,N=0,j=0,C=null;const B=new Uint16Array(16),S=new Uint16Array(16);let E,k,F,I=null;for(p=0;p<=pI;p++)B[p]=0;for(f=0;f<r;f++)B[t[n+f]]++;for(b=l,x=pI;x>=1&&0===B[x];x--);if(b>x&&(b=x),0===x)return s[a++]=20971520,s[a++]=20971520,o.bits=1,0;for(g=1;g<x&&0===B[g];g++);for(b<g&&(b=g),w=1,p=1;p<=pI;p++)if(w<<=1,w-=B[p],w<0)return-1;if(w>0&&(0===e||1!==x))return-1;for(S[1]=0,p=1;p<pI;p++)S[p+1]=S[p]+B[p];for(f=0;f<r;f++)0!==t[n+f]&&(i[S[t[n+f]]++]=f);if(0===e?(C=I=i,m=20):1===e?(C=fI,I=gI,m=257):(C=xI,I=bI,m=0),j=0,f=0,p=g,h=a,y=b,v=0,A=-1,N=1<<b,u=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){E=p-v,i[f]+1<m?(k=0,F=i[f]):i[f]>=m?(k=I[i[f]-m],F=C[i[f]-m]):(k=96,F=0),c=1<<p-v,d=1<<y,g=d;do{d-=c,s[h+(j>>v)+d]=E<<24|k<<16|F}while(0!==d);for(c=1<<p-1;j&c;)c>>=1;if(0!==c?(j&=c-1,j+=c):j=0,f++,0===--B[p]){if(p===x)break;p=t[n+i[f]]}if(p>b&&(j&u)!==A){for(0===v&&(v=b),h+=g,y=p-v,w=1<<y;y+v<x&&(w-=B[y+v],!(w<=0));)y++,w<<=1;if(N+=1<<y,1===e&&N>852||2===e&&N>592)return 1;A=j&u,s[A]=b<<24|y<<16|h-a}}return 0!==j&&(s[h+j]=p-v<<24|64<<16),o.bits=b,0};const{Z_FINISH:vI,Z_BLOCK:wI,Z_TREES:NI,Z_OK:jI,Z_STREAM_END:CI,Z_NEED_DICT:BI,Z_STREAM_ERROR:SI,Z_DATA_ERROR:EI,Z_MEM_ERROR:kI,Z_BUF_ERROR:FI,Z_DEFLATED:II}=Vk,TI=16180,DI=16190,LI=16191,_I=16192,PI=16194,UI=16199,OI=16200,QI=16206,RI=16209,HI=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function MI(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const VI=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<TI||t.mode>16211?1:0},zI=e=>{if(VI(e))return SI;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=TI,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,jI},KI=e=>{if(VI(e))return SI;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,zI(e)},qI=(e,t)=>{let n;if(VI(e))return SI;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?SI:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,KI(e))},GI=(e,t)=>{if(!e)return SI;const n=new MI;e.state=n,n.strm=e,n.window=null,n.mode=TI;const r=qI(e,t);return r!==jI&&(e.state=null),r};let WI,YI,XI=!0;const JI=e=>{if(XI){WI=new Int32Array(512),YI=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(yI(1,e.lens,0,288,WI,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;yI(2,e.lens,0,32,YI,0,e.work,{bits:5}),XI=!1}e.lencode=WI,e.lenbits=9,e.distcode=YI,e.distbits=5},ZI=(e,t,n,r)=>{let s;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>r&&(s=r),a.window.set(t.subarray(n-r,n-r+s),a.wnext),(r-=s)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0};var $I=(e,t)=>{let n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j=0;const C=new Uint8Array(4);let B,S;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(VI(e)||!e.output||!e.input&&0!==e.avail_in)return SI;n=e.state,n.mode===LI&&(n.mode=_I),i=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,A=o,u=l,N=jI;e:for(;;)switch(n.mode){case TI:if(0===n.wrap){n.mode=_I;break}for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=Hk(n.check,C,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=RI;break}if((15&c)!==II){e.msg="unknown compression method",n.mode=RI;break}if(c>>>=4,d-=4,w=8+(15&c),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=RI;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:LI,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==II){e.msg="unknown compression method",n.mode=RI;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=RI;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Hk(n.check,C,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Hk(n.check,C,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Hk(n.check,C,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Hk(n.check,C,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>o&&(h=o),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+h),w)),512&n.flags&&4&n.wrap&&(n.check=Hk(n.check,r,h,a)),o-=h,a+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Hk(n.check,r,h,a)),o-=h,a+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;h=0;do{w=r[a+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&h<o);if(512&n.flags&&4&n.wrap&&(n.check=Hk(n.check,r,h,a)),o-=h,a+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=RI;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=LI;break;case 16189:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}e.adler=n.check=HI(c),c=0,d=0,n.mode=DI;case DI:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,BI;e.adler=n.check=1,n.mode=LI;case LI:if(t===wI||t===NI)break e;case _I:if(n.last){c>>>=7&d,d-=7&d,n.mode=QI;break}for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(JI(n),n.mode=UI,t===NI){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=RI}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=RI;break}if(n.length=65535&c,c=0,d=0,n.mode=PI,t===NI)break e;case PI:n.mode=16195;case 16195:if(h=n.length,h){if(h>o&&(h=o),h>l&&(h=l),0===h)break e;s.set(r.subarray(a,a+h),i),o-=h,a+=h,l-=h,i+=h,n.length-=h;break}n.mode=LI;break;case 16196:for(;d<14;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=RI;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.lens[E[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[E[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},N=yI(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid code lengths set",n.mode=RI;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;j=n.lencode[c&(1<<n.lenbits)-1],f=j>>>24,g=j>>>16&255,x=65535&j,!(f<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(x<16)c>>>=f,d-=f,n.lens[n.have++]=x;else{if(16===x){for(S=f+2;d<S;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(c>>>=f,d-=f,0===n.have){e.msg="invalid bit length repeat",n.mode=RI;break}w=n.lens[n.have-1],h=3+(3&c),c>>>=2,d-=2}else if(17===x){for(S=f+3;d<S;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=f,d-=f,w=0,h=3+(7&c),c>>>=3,d-=3}else{for(S=f+7;d<S;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=f,d-=f,w=0,h=11+(127&c),c>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=RI;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===RI)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=RI;break}if(n.lenbits=9,B={bits:n.lenbits},N=yI(1,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,N){e.msg="invalid literal/lengths set",n.mode=RI;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},N=yI(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,N){e.msg="invalid distances set",n.mode=RI;break}if(n.mode=UI,t===NI)break e;case UI:n.mode=OI;case OI:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,mI(e,u),i=e.next_out,s=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,n.mode===LI&&(n.back=-1);break}for(n.back=0;j=n.lencode[c&(1<<n.lenbits)-1],f=j>>>24,g=j>>>16&255,x=65535&j,!(f<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(g&&0===(240&g)){for(b=f,y=g,v=x;j=n.lencode[v+((c&(1<<b+y)-1)>>b)],f=j>>>24,g=j>>>16&255,x=65535&j,!(b+f<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=f,d-=f,n.back+=f,n.length=x,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=LI;break}if(64&g){e.msg="invalid literal/length code",n.mode=RI;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(S=n.extra;d<S;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;j=n.distcode[c&(1<<n.distbits)-1],f=j>>>24,g=j>>>16&255,x=65535&j,!(f<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(0===(240&g)){for(b=f,y=g,v=x;j=n.distcode[v+((c&(1<<b+y)-1)>>b)],f=j>>>24,g=j>>>16&255,x=65535&j,!(b+f<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=f,d-=f,n.back+=f,64&g){e.msg="invalid distance code",n.mode=RI;break}n.offset=x,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(S=n.extra;d<S;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=RI;break}n.mode=16204;case 16204:if(0===l)break e;if(h=u-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=RI;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=s,m=i-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do{s[i++]=p[m++]}while(--h);0===n.length&&(n.mode=OI);break;case 16205:if(0===l)break e;s[i++]=n.length,l--,n.mode=OI;break;case QI:if(n.wrap){for(;d<32;){if(0===o)break e;o--,c|=r[a++]<<d,d+=8}if(u-=l,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?Hk(n.check,s,u,i-u):Qk(n.check,s,u,i-u)),u=l,4&n.wrap&&(n.flags?c:HI(c))!==n.check){e.msg="incorrect data check",n.mode=RI;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=RI;break}c=0,d=0}n.mode=16208;case 16208:N=CI;break e;case RI:N=EI;break e;case 16210:return kI;default:return SI}return e.next_out=i,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||u!==e.avail_out&&n.mode<RI&&(n.mode<QI||t!==vI))&&ZI(e,e.output,e.next_out,u-e.avail_out),A-=e.avail_in,u-=e.avail_out,e.total_in+=A,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?Hk(n.check,s,u,e.next_out-u):Qk(n.check,s,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(n.mode===LI?128:0)+(n.mode===UI||n.mode===PI?256:0),(0===A&&0===u||t===vI)&&N===jI&&(N=FI),N},eT={inflateReset:KI,inflateReset2:qI,inflateResetKeep:zI,inflateInit:e=>GI(e,15),inflateInit2:GI,inflate:$I,inflateEnd:e=>{if(VI(e))return SI;let t=e.state;return t.window&&(t.window=null),e.state=null,jI},inflateGetHeader:(e,t)=>{if(VI(e))return SI;const n=e.state;return 0===(2&n.wrap)?SI:(n.head=t,t.done=!1,jI)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,s,a;return VI(e)?SI:(r=e.state,0!==r.wrap&&r.mode!==DI?SI:r.mode===DI&&(s=1,s=Qk(s,t,n,0),s!==r.check)?EI:(a=ZI(e,t,n,n),a?(r.mode=16210,kI):(r.havedict=1,jI)))},inflateInfo:"pako inflate (from Nodeca project)"};var tT=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const nT=Object.prototype.toString,{Z_NO_FLUSH:rT,Z_FINISH:sT,Z_OK:aT,Z_STREAM_END:iT,Z_NEED_DICT:oT,Z_STREAM_ERROR:lT,Z_DATA_ERROR:cT,Z_MEM_ERROR:dT}=Vk;function AT(e){this.options=zF({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JF,this.strm.avail_out=0;let n=eT.inflateInit2(this.strm,t.windowBits);if(n!==aT)throw new Error(Mk[n]);if(this.header=new tT,eT.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=WF(t.dictionary):"[object ArrayBuffer]"===nT.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=eT.inflateSetDictionary(this.strm,t.dictionary),n!==aT)))throw new Error(Mk[n])}function uT(e,t){const n=new AT(t);if(n.push(e),n.err)throw n.msg||Mk[n.err];return n.result}AT.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let a,i,o;if(this.ended)return!1;for(i=t===~~t?t:!0===t?sT:rT,"[object ArrayBuffer]"===nT.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=eT.inflate(n,i),a===oT&&s&&(a=eT.inflateSetDictionary(n,s),a===aT?a=eT.inflate(n,i):a===cT&&(a=oT));n.avail_in>0&&a===iT&&n.state.wrap>0&&0!==e[n.next_in];)eT.inflateReset(n),a=eT.inflate(n,i);switch(a){case lT:case cT:case oT:case dT:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===iT))if("string"===this.options.to){let e=XF(n.output,n.next_out),t=n.next_out-e,s=YF(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(s)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==aT||0!==o){if(a===iT)return a=eT.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},AT.prototype.onData=function(e){this.chunks.push(e)},AT.prototype.onEnd=function(e){e===aT&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=KF(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var hT=function(e,t){return(t=t||{}).raw=!0,uT(e,t)},mT={Inflate:AT,inflate:uT,inflateRaw:hT,ungzip:uT,constants:Vk};const{Deflate:pT,deflate:fT,deflateRaw:gT,gzip:xT}=uI,{Inflate:bT,inflate:yT,inflateRaw:vT,ungzip:wT}=mT;var NT=bT,jT=yT;const CT=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;CT[n]=e}const BT=4294967295;function ST(e,t){return(function(e,t,n){let r=e;for(let s=0;s<n;s++)r=CT[255&(r^t[s])]^r>>>8;return r}(BT,e,t)^BT)>>>0}function ET(e,t,n){const r=e.readUint32(),s=ST(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==r)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(r,", found ").concat(s))}function kT(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function FT(e,t,n,r){let s=0;for(;s<r;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-r]&255}function IT(e,t,n,r){let s=0;if(0===n.length)for(;s<r;s++)t[s]=e[s];else for(;s<r;s++)t[s]=e[s]+n[s]&255}function TT(e,t,n,r,s){let a=0;if(0===n.length){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+(t[a-s]>>1)&255}else{for(;a<s;a++)t[a]=e[a]+(n[a]>>1)&255;for(;a<r;a++)t[a]=e[a]+(t[a-s]+n[a]>>1)&255}}function DT(e,t,n,r,s){let a=0;if(0===n.length){for(;a<s;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-s]&255}else{for(;a<s;a++)t[a]=e[a]+n[a]&255;for(;a<r;a++)t[a]=e[a]+LT(t[a-s],n[a],n[a-s])&255}}function LT(e,t,n){const r=e+t-n,s=Math.abs(r-e),a=Math.abs(r-t),i=Math.abs(r-n);return s<=a&&s<=i?e:a<=i?t:n}function _T(e,t,n,r,s,a){switch(e){case 0:kT(t,n,s);break;case 1:FT(t,n,s,a);break;case 2:IT(t,n,r,s);break;case 3:TT(t,n,r,s,a);break;case 4:DT(t,n,r,s,a);break;default:throw new Error("Unsupported filter: ".concat(e))}}const PT=new Uint16Array([255]),UT=255===new Uint8Array(PT.buffer)[0];function OT(e){return(255&e)<<8|e>>8&255}const QT=new Uint16Array([255]),RT=255===new Uint8Array(QT.buffer)[0],HT=new Uint8Array(0);function MT(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,i=Math.ceil(a/8)*s,o=Math.ceil(a/8*s*n),l=new Uint8Array(r*o);let c,d,A=HT,u=0;for(let h=0;h<r;h++){switch(c=t.subarray(u+1,u+1+o),d=l.subarray(h*o,(h+1)*o),t[u]){case 0:kT(c,d,o);break;case 1:FT(c,d,o,i);break;case 2:IT(c,d,A,o);break;case 3:TT(c,d,A,o,i);break;case 4:DT(c,d,A,o,i);break;default:throw new Error("Unsupported filter: ".concat(t[u]))}A=d,u+=o+1}if(16===a){const e=new Uint16Array(l.buffer);if(RT)for(let t=0;t<e.length;t++)e[t]=VT(e[t]);return e}return l}function VT(e){return(255&e)<<8|e>>8&255}const zT=Uint8Array.of(137,80,78,71,13,10,26,10);function KT(e){if(!function(e){if(e.length<zT.length)return!1;for(let t=0;t<zT.length;t++)if(e[t]!==zT[t])return!1;return!0}(e.readBytes(zT.length)))throw new Error("wrong PNG signature")}const qT="tEXt",GT=new TextDecoder("latin1");function WT(e){if(XT(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const YT=/^[\u0000-\u00FF]*$/;function XT(e){if(!YT.test(e))throw new Error("invalid latin1 text")}function JT(e,t,n){const r=ZT(t);e[r]=function(e,t){return GT.decode(e.readBytes(t))}(t,n-r.length-1)}function ZT(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=GT.decode(e.readBytes(t-e.offset-1));return e.skip(1),WT(n),n}const $T=-1,eD=0,tD=2,nD=3,rD=4,sD=6,aD=-1,iD=0,oD=-1,lD=0,cD=-1,dD=0,AD=1,uD=0,hD=1,mD=2,pD=0,fD=1;class gD extends JE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,W.A)(this,"_checkCrc",void 0),(0,W.A)(this,"_inflator",void 0),(0,W.A)(this,"_png",void 0),(0,W.A)(this,"_apng",void 0),(0,W.A)(this,"_end",void 0),(0,W.A)(this,"_hasPalette",void 0),(0,W.A)(this,"_palette",void 0),(0,W.A)(this,"_hasTransparency",void 0),(0,W.A)(this,"_transparency",void 0),(0,W.A)(this,"_compressionMethod",void 0),(0,W.A)(this,"_filterMethod",void 0),(0,W.A)(this,"_interlaceMethod",void 0),(0,W.A)(this,"_colorType",void 0),(0,W.A)(this,"_isAnimated",void 0),(0,W.A)(this,"_numberOfFrames",void 0),(0,W.A)(this,"_numberOfPlays",void 0),(0,W.A)(this,"_frames",void 0),(0,W.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new NT,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=aD,this._filterMethod=oD,this._interlaceMethod=cD,this._colorType=$T,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(KT(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(KT(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case qT:JT(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?ET(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?ET(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case eD:n=1;break;case tD:n=3;break;case nD:n=1;break;case rD:n=2;break;case sD:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==iD)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<t;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case eD:case tD:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case nD:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=ZT(this),n=this.readUint8();if(n!==iD)throw new Error("Unsupported iCCP compression method: ".concat(n));const r=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:jT(r)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=MT({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(n,r,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case uD:break;case hD:for(let t=0;t<this._png.height;t++)for(let r=0;r<this._png.width;r++){const s=(t*e.width+r)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[s+e]=0}break;case mD:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,r=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case pD:for(let n=0;n<t.height;n++)for(let s=0;s<t.width;s++){const{index:a,frameIndex:i}=r(n,s);for(let n=0;n<this._png.channels;n++)e.data[a+n]=t.data[i+n]}break;case fD:for(let s=0;s<t.height;s++)for(let a=0;a<t.width;a++){const{index:i,frameIndex:o}=r(s,a);for(let r=0;r<this._png.channels;r++){const s=t.data[o+this._png.channels-1]/n,a=r%(this._png.channels-1)===0?1:t.data[o+r],l=Math.floor(s*a+(1-s)*e.data[i+r]);e.data[i+r]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==lD)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===dD)this._png.data=MT({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==AD)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:r,channels:s,depth:a}=e,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*s,l=new Uint8Array(r*n*o);let c=0;for(let d=0;d<7;d++){const e=i[d],s=Math.ceil((n-e.x)/e.xStep),a=Math.ceil((r-e.y)/e.yStep);if(s<=0||a<=0)continue;const A=s*o,u=new Uint8Array(A);for(let i=0;i<a;i++){const a=t[c++],d=t.subarray(c,c+A);c+=A;const h=new Uint8Array(A);_T(a,d,h,u,A,o),u.set(h);for(let t=0;t<s;t++){const s=e.x+t*e.xStep,a=e.y+i*e.yStep;if(!(s>=n||a>=r))for(let e=0;e<o;e++)l[(a*n+s)*o+e]=h[t*o+e]}}}if(16===a){const e=new Uint16Array(l.buffer);if(UT)for(let t=0;t<e.length;t++)e[t]=OT(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:uD,blendOp:pD,data:e}),this._inflator=new NT,this._writingDataChunks=!1}}var xD;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(xD||(xD={}));var bD=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function yD(){bD.console&&"function"==typeof bD.console.log&&bD.console.log.apply(bD.console,arguments)}var vD={log:yD,warn:function(e){bD.console&&("function"==typeof bD.console.warn?bD.console.warn.apply(bD.console,arguments):yD.call(null,arguments))},error:function(e){bD.console&&("function"==typeof bD.console.error?bD.console.error.apply(bD.console,arguments):yD(e))}};function wD(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){CD(r.response,t,n)},r.onerror=function(){vD.error("could not download file")},r.send()}function ND(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(Pu){}return t.status>=200&&t.status<=299}function jD(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(Pu){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var CD=bD.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,LN.A)(window))||window!==bD?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=bD.URL||bD.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin!==location.origin?ND(s.href)?wD(e,t,n):jD(s,s.target="_blank"):jD(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){jD(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(ND(e))wD(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){jD(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,LN.A)(t)&&(vD.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return wD(e,t,n);var s="application/octet-stream"===e.type,a=/constructor/i.test(bD.HTMLElement)||bD.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,LN.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=bD.URL||bD.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function BD(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,i=s.exec(e);i&&(t=a(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var SD=bD.atob.bind(bD),ED=bD.btoa.bind(bD);function kD(e,t){var n=e[0],r=e[1],s=e[2],a=e[3];n=ID(n,r,s,a,t[0],7,-680876936),a=ID(a,n,r,s,t[1],12,-389564586),s=ID(s,a,n,r,t[2],17,606105819),r=ID(r,s,a,n,t[3],22,-1044525330),n=ID(n,r,s,a,t[4],7,-176418897),a=ID(a,n,r,s,t[5],12,1200080426),s=ID(s,a,n,r,t[6],17,-1473231341),r=ID(r,s,a,n,t[7],22,-45705983),n=ID(n,r,s,a,t[8],7,1770035416),a=ID(a,n,r,s,t[9],12,-1958414417),s=ID(s,a,n,r,t[10],17,-42063),r=ID(r,s,a,n,t[11],22,-1990404162),n=ID(n,r,s,a,t[12],7,1804603682),a=ID(a,n,r,s,t[13],12,-40341101),s=ID(s,a,n,r,t[14],17,-1502002290),n=TD(n,r=ID(r,s,a,n,t[15],22,1236535329),s,a,t[1],5,-165796510),a=TD(a,n,r,s,t[6],9,-1069501632),s=TD(s,a,n,r,t[11],14,643717713),r=TD(r,s,a,n,t[0],20,-373897302),n=TD(n,r,s,a,t[5],5,-701558691),a=TD(a,n,r,s,t[10],9,38016083),s=TD(s,a,n,r,t[15],14,-660478335),r=TD(r,s,a,n,t[4],20,-405537848),n=TD(n,r,s,a,t[9],5,568446438),a=TD(a,n,r,s,t[14],9,-1019803690),s=TD(s,a,n,r,t[3],14,-187363961),r=TD(r,s,a,n,t[8],20,1163531501),n=TD(n,r,s,a,t[13],5,-1444681467),a=TD(a,n,r,s,t[2],9,-51403784),s=TD(s,a,n,r,t[7],14,1735328473),n=DD(n,r=TD(r,s,a,n,t[12],20,-1926607734),s,a,t[5],4,-378558),a=DD(a,n,r,s,t[8],11,-2022574463),s=DD(s,a,n,r,t[11],16,1839030562),r=DD(r,s,a,n,t[14],23,-35309556),n=DD(n,r,s,a,t[1],4,-1530992060),a=DD(a,n,r,s,t[4],11,1272893353),s=DD(s,a,n,r,t[7],16,-155497632),r=DD(r,s,a,n,t[10],23,-1094730640),n=DD(n,r,s,a,t[13],4,681279174),a=DD(a,n,r,s,t[0],11,-358537222),s=DD(s,a,n,r,t[3],16,-722521979),r=DD(r,s,a,n,t[6],23,76029189),n=DD(n,r,s,a,t[9],4,-640364487),a=DD(a,n,r,s,t[12],11,-421815835),s=DD(s,a,n,r,t[15],16,530742520),n=LD(n,r=DD(r,s,a,n,t[2],23,-995338651),s,a,t[0],6,-198630844),a=LD(a,n,r,s,t[7],10,1126891415),s=LD(s,a,n,r,t[14],15,-1416354905),r=LD(r,s,a,n,t[5],21,-57434055),n=LD(n,r,s,a,t[12],6,1700485571),a=LD(a,n,r,s,t[3],10,-1894986606),s=LD(s,a,n,r,t[10],15,-1051523),r=LD(r,s,a,n,t[1],21,-2054922799),n=LD(n,r,s,a,t[8],6,1873313359),a=LD(a,n,r,s,t[15],10,-30611744),s=LD(s,a,n,r,t[6],15,-1560198380),r=LD(r,s,a,n,t[13],21,1309151649),n=LD(n,r,s,a,t[4],6,-145523070),a=LD(a,n,r,s,t[11],10,-1120210379),s=LD(s,a,n,r,t[2],15,718787259),r=LD(r,s,a,n,t[9],21,-343485551),e[0]=MD(n,e[0]),e[1]=MD(r,e[1]),e[2]=MD(s,e[2]),e[3]=MD(a,e[3])}function FD(e,t,n,r,s,a){return t=MD(MD(t,e),MD(r,a)),MD(t<<s|t>>>32-s,n)}function ID(e,t,n,r,s,a,i){return FD(t&n|~t&r,e,t,s,a,i)}function TD(e,t,n,r,s,a,i){return FD(t&r|n&~r,e,t,s,a,i)}function DD(e,t,n,r,s,a,i){return FD(t^n^r,e,t,s,a,i)}function LD(e,t,n,r,s,a,i){return FD(n^(t|~r),e,t,s,a,i)}function _D(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)kD(r,PD(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(kD(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,kD(r,s),r}function PD(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var UD="0123456789abcdef".split("");function OD(e){for(var t="",n=0;n<4;n++)t+=UD[e>>8*n+4&15]+UD[e>>8*n&15];return t}function QD(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function RD(e){return _D(e).map(QD).join("")}var HD="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=OD(e[t]);return e.join("")}(_D("hello"));function MD(e,t){if(HD){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function VD(e,t){var n,r,s,a;if(e!==n){for(var i=(s=e,a=1+(256/e.length|0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=e,r=o}else o=r;var A=t.length,u=0,h=0,m="";for(l=0;l<A;l++)h=(h+(d=o[u=(u+1)%256]))%256,o[u]=o[h],o[h]=d,i=o[(o[u]+o[h])%256],m+=String.fromCharCode(t.charCodeAt(l)^i);return m}var zD={print:4,modify:8,copy:16,"annot-forms":32};function KD(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(e){if(void 0!==zD.perm)throw new Error("Invalid permission: "+e);s+=zD[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var a=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=RD(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=VD(this.encryptionKey,this.padding)}function qD(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||35===s||37===s||40===s||41===s||47===s||60===s||62===s||91===s||93===s||123===s||125===s||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function GD(e){if("object"!==(0,LN.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!r],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[n]){var i=t[n][a];try{i[0].apply(e,r)}catch(Ou){bD.console&&vD.error("jsPDF PubSub Error",Ou.message,Ou)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function WD(e){if(!(this instanceof WD))return new WD(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function YD(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function XD(e,t,n,r,s){if(!(this instanceof XD))return new XD(e,t,n,r,s);this.type="axial"===e?2:3,this.coords=t,this.colors=n,YD.call(this,r,s)}function JD(e,t,n,r,s){if(!(this instanceof JD))return new JD(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,YD.call(this,r,s)}function ZD(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,c="S",d=null;"object"===(0,LN.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,s=e.format||s,a=e.compress||e.compressPdf||a,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),i=e.filters||(!0===a?["FlateEncode"]:i),r=r||"mm",n=(""+(n||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,u={},h={internal:{},__private__:{}};h.__private__.PubSub=GD;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(e){m=e};var f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return f};var g=h.__private__.getPageFormat=function(e){return f[e]};s=s||"a4";var x="compat",b="advanced",y=x;function v(){this.saveGraphicsState(),J(new Ie(ue,0,0,-ue,0,hn()*ue).toString()+" cm"),this.setFontSize(this.getFontSize()/ue),c="n",y=b}function w(){this.restoreGraphicsState(),c="S",y=x}var N=h.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};h.advancedAPI=function(e){var t=y===x;return t&&v.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},h.compatAPI=function(e){var t=y===b;return t&&w.call(this),"function"!=typeof e||(e(this),t&&v.call(this)),this},h.isAdvancedAPI=function(){return y===b};var j,C=function(e){if(y!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=h.roundToPrecision=h.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};j=h.hpf=h.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return B(e,16)};var S=h.f2=h.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return B(e,2)},E=h.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return B(e,3)},k=h.scale=h.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return y===x?e*ue:y===b?e:void 0},F=function(e){return k(function(e){return y===x?hn()-e:y===b?e:void 0}(e))};h.__private__.setPrecision=h.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var I,T="00000000000000000000000000000000",D=h.__private__.getFileId=function(){return T},L=h.__private__.setFileId=function(e){return T=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():T.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(xt=new KD(d.userPermissions,d.userPassword,d.ownerPassword,T)),T};h.setFileId=function(e){return L(e),this},h.getFileId=function(){return D()};var _=h.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),s=Math.abs(t%60),a=[n,R(r),"'",R(s),"'"].join("");return["D:",e.getFullYear(),R(e.getMonth()+1),R(e.getDate()),R(e.getHours()),R(e.getMinutes()),R(e.getSeconds()),a].join("")},P=h.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,r,s,a,i,0)},U=h.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=_(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return I=t},O=h.__private__.getCreationDate=function(e){var t=I;return"jsDate"===e&&(t=P(I)),t};h.setCreationDate=function(e){return U(e),this},h.getCreationDate=function(e){return O(e)};var Q,R=h.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},H=h.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},M=0,V=[],z=[],K=0,q=[],G=[],W=!1,Y=z;h.__private__.setCustomOutputDestination=function(e){W=!0,Y=e};var X=function(e){W||(Y=e)};h.__private__.resetCustomOutputDestination=function(){W=!1,Y=z};var J=h.__private__.out=function(e){return e=e.toString(),K+=e.length+1,Y.push(e),Y},Z=h.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=h.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(e){return te=y===b?e/ue:e,this};var ne,re=h.__private__.getFontSize=h.getFontSize=function(){return y===x?te:te*ue},se=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(e){return se=e,this},h.__private__.getR2L=h.getR2L=function(){return se};var ae,ie=h.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};h.__private__.getZoomMode=function(){return ne};var oe,le=h.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ae=e};h.__private__.getPageMode=function(){return ae};var ce=h.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};h.__private__.getLayoutMode=function(){return oe},h.__private__.setDisplayMode=h.setDisplayMode=function(e,t,n){return ie(e),ce(t),le(n),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},h.__private__.getDocumentProperties=function(){return de},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},h.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var Ae,ue,he,me,pe,fe={},ge={},xe=[],be={},ye={},ve={},we={},Ne=null,je=0,Ce=[],Be=new GD(h),Se=e.hotfixes||[],Ee={},ke={},Fe=[],Ie=function e(t,n,r,s,a,i){if(!(this instanceof e))return new e(t,n,r,s,a,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(s)&&(s=1),isNaN(a)&&(a=0),isNaN(i)&&(i=0),this._matrix=[t,n,r,s,a,i]};Object.defineProperty(Ie.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ie.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ie.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ie.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ie.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ie.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ie.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ie.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ie.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ie.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ie.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(e)},Ie.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,s=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ie(t,n,r,s,a,i)},Ie.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*n+(t/=i)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Ie(i,0,0,l,0,0),translate:new Ie(1,0,0,1,s,a),rotate:new Ie(e,t,-t,e,0,0),skew:new Ie(1,0,o,1,0,0)}},Ie.prototype.toString=function(e){return this.join(" ")},Ie.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty,i=1/(e*r-t*n),o=r*i,l=-t*i,c=-n*i,d=e*i;return new Ie(o,l,c,d,-o*s-c*a,-l*s-d*a)},Ie.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Ie.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Ie.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,a=this.ty;return new Ie(e,t,n,r,s,a)},h.Matrix=Ie;var Te=h.matrixMult=function(e,t){return t.multiply(e)},De=new Ie(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=De;var Le=function(e,t){if(!ye[e]){var n=(t instanceof XD?"Sh":"P")+(Object.keys(be).length+1).toString(10);t.id=n,ye[e]=n,be[n]=t,Be.publish("addPattern",t)}};h.ShadingPattern=XD,h.TilingPattern=JD,h.addShadingPattern=function(e,t){return C("addShadingPattern()"),Le(e,t),this},h.beginTilingPattern=function(e){C("beginTilingPattern()"),sn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},h.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=G[Q].join("\n"),Le(e,t),Be.publish("endTilingPattern",t),Fe.pop().restore()};var _e,Pe=h.__private__.newObject=function(){var e=Ue();return Oe(e,!0),e},Ue=h.__private__.newObjectDeferred=function(){return M++,V[M]=function(){return K},M},Oe=function(e,t){return t="boolean"==typeof t&&t,V[e]=K,t&&J(e+" 0 obj"),e},Qe=h.__private__.newAdditionalObject=function(){var e={objId:Ue(),content:""};return q.push(e),e},Re=Ue(),He=Ue(),Me=h.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",s=0;s<3;s++)r+=("0"+Math.floor(255*parseFloat(t[s])).toString(16)).slice(-2);return r},Ve=h.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,s=e.ch3,a=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var o=new BD(n);if(o.ok)n=o.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,s=255&l}if(void 0===r||void 0===a&&n===r&&r===s)t="string"==typeof n?n+" "+i[0]:2===e.precision?S(n/255)+" "+i[0]:E(n/255)+" "+i[0];else if(void 0===a||"object"===(0,LN.A)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",i[1]].join(" ");t="string"==typeof n?[n,r,s,i[1]].join(" "):2===e.precision?[S(n/255),S(r/255),S(s/255),i[1]].join(" "):[E(n/255),E(r/255),E(s/255),i[1]].join(" ")}else t="string"==typeof n?[n,r,s,a,i[2]].join(" "):2===e.precision?[S(n),S(r),S(s),S(a),i[2]].join(" "):[E(n),E(r),E(s),E(a),i[2]].join(" ");return t},ze=h.__private__.getFilters=function(){return i},Ke=h.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||ze(),r=e.alreadyAppliedFilters||[],s=e.addLength1||!1,a=t.length,i=e.objectId,o=function(e){return e};if(null!==d&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=xt.encryptor(i,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],A=(l=void 0!==ZD.API.processDataByFilters?ZD.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===s&&c.push({key:"Length1",value:a})),0!=A.length)if(A.split("/").length-1==1)c.push({key:"Filter",value:A});else{c.push({key:"Filter",value:"["+A+"]"});for(var u=0;u<c.length;u+=1)if("DecodeParms"===c[u].key){for(var h=[],m=0;m<l.reverseChain.split("/").length-1;m+=1)h.push("null");h.push(c[u].value),c[u].value="["+h.join(" ")+"]"}}J("<<");for(var p=0;p<c.length;p++)J("/"+c[p].key+" "+c[p].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},qe=h.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,s=e.contentsObjId;Oe(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(j(e.mediaBox.bottomLeftX))+" "+parseFloat(j(e.mediaBox.bottomLeftY))+" "+j(e.mediaBox.topRightX)+" "+j(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+j(e.cropBox.bottomLeftX)+" "+j(e.cropBox.bottomLeftY)+" "+j(e.cropBox.topRightX)+" "+j(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+j(e.bleedBox.bottomLeftX)+" "+j(e.bleedBox.bottomLeftY)+" "+j(e.bleedBox.topRightX)+" "+j(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+j(e.trimBox.bottomLeftX)+" "+j(e.trimBox.bottomLeftY)+" "+j(e.trimBox.topRightX)+" "+j(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+j(e.artBox.bottomLeftX)+" "+j(e.artBox.bottomLeftY)+" "+j(e.artBox.topRightX)+" "+j(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Be.publish("putPage",{objId:r,pageContext:Ce[t],pageNumber:t,page:n}),J("/Contents "+s+" 0 R"),J(">>"),J("endobj");var a=n.join("\n");return y===b&&(a+="\nQ"),Oe(s,!0),Ke({data:a,filters:ze(),objectId:s}),J("endobj"),r},Ge=h.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=je;e++)Ce[e].objId=Ue(),Ce[e].contentsObjId=Ue();for(e=1;e<=je;e++)n.push(qe({number:e,data:G[e],objId:Ce[e].objId,contentsObjId:Ce[e].contentsObjId,mediaBox:Ce[e].mediaBox,cropBox:Ce[e].cropBox,bleedBox:Ce[e].bleedBox,trimBox:Ce[e].trimBox,artBox:Ce[e].artBox,userUnit:Ce[e].userUnit,rootDictionaryObjId:Re,resourceDictionaryObjId:He}));Oe(Re,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<je;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+je),J(">>"),J("endobj"),Be.publish("postPutPages")},We=function(e){Be.publish("putFont",{font:e,out:J,newObject:Pe,putStream:Ke}),!0!==e.isAlreadyPutted&&(e.objectNumber=Pe(),J("<<"),J("/Type /Font"),J("/BaseFont /"+qD(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ye=function(e){e.objectNumber=Pe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[j(e.x),j(e.y),j(e.x+e.width),j(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ke({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},Xe=function(e,t){t||(t=21);var n=Pe(),r=function(e,t){var n,r=[],s=1/(t-1);for(n=0;n<1;n+=s)r.push(n);if(r.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var d=e[l].offset,A=(n-d)/(e[l+1].offset-d),u=e[l].color,h=e[l+1].color;o+=H(Math.round((1-A)*u[0]+A*h[0]).toString(16))+H(Math.round((1-A)*u[1]+A*h[1]).toString(16))+H(Math.round((1-A)*u[2]+A*h[2]).toString(16))}return o.trim()}(e.colors,t),s=[];s.push({key:"FunctionType",value:"0"}),s.push({key:"Domain",value:"[0.0 1.0]"}),s.push({key:"Size",value:"["+t+"]"}),s.push({key:"BitsPerSample",value:"8"}),s.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),s.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke({data:r,additionalKeyValues:s,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=Pe(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var a="/Coords ["+j(parseFloat(e.coords[0]))+" "+j(parseFloat(e.coords[1]))+" ";2===e.type?a+=j(parseFloat(e.coords[2]))+" "+j(parseFloat(e.coords[3])):a+=j(parseFloat(e.coords[2]))+" "+j(parseFloat(e.coords[3]))+" "+j(parseFloat(e.coords[4]))+" "+j(parseFloat(e.coords[5])),J(a+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Je=function(e,t){var n=Ue(),r=Pe();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var s=[];s.push({key:"Type",value:"/Pattern"}),s.push({key:"PatternType",value:"1"}),s.push({key:"PaintType",value:"1"}),s.push({key:"TilingType",value:"1"}),s.push({key:"BBox",value:"["+e.boundingBox.map(j).join(" ")+"]"}),s.push({key:"XStep",value:j(e.xStep)}),s.push({key:"YStep",value:j(e.yStep)}),s.push({key:"Resources",value:n+" 0 R"}),e.matrix&&s.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ke({data:e.stream,additionalKeyValues:s,objectId:e.objectNumber}),J("endobj")},Ze=function(e){for(var t in e.objectNumber=Pe(),J("<<"),e)switch(t){case"opacity":J("/ca "+S(e[t]));break;case"stroke-opacity":J("/CA "+S(e[t]))}J(">>"),J("endobj")},$e=function(e){Oe(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),fe)fe.hasOwnProperty(e)&&(!1===A||!0===A&&u.hasOwnProperty(e))&&J("/"+e+" "+fe[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(be).length>0){for(var e in J("/Shading <<"),be)be.hasOwnProperty(e)&&be[e]instanceof XD&&be[e].objectNumber>=0&&J("/"+e+" "+be[e].objectNumber+" 0 R");Be.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(be).length>0){for(var t in J("/Pattern <<"),be)be.hasOwnProperty(t)&&be[t]instanceof h.TilingPattern&&be[t].objectNumber>=0&&be[t].objectNumber<e&&J("/"+t+" "+be[t].objectNumber+" 0 R");Be.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(ve).length>0){var e;for(e in J("/ExtGState <<"),ve)ve.hasOwnProperty(e)&&ve[e].objectNumber>=0&&J("/"+e+" "+ve[e].objectNumber+" 0 R");Be.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),Ee)Ee.hasOwnProperty(e)&&Ee[e].objectNumber>=0&&J("/"+e+" "+Ee[e].objectNumber+" 0 R");Be.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},et=function(e){ge[e.fontName]=ge[e.fontName]||{},ge[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,s){var a={id:"F"+(Object.keys(fe).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:s||!1,metadata:{}};return Be.publish("addFont",{font:a,instance:this}),fe[a.id]=a,et(a),a.id},nt=h.__private__.pdfEscape=h.pdfEscape=function(e,t){return function(e,t){var n,r,s,a,i,o,l,c,d;if(s=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&fe[Ae].metadata&&fe[Ae].metadata[s]&&fe[Ae].metadata[s].encoding&&(a=fe[Ae].metadata[s].encoding,!i&&fe[Ae].encoding&&(i=fe[Ae].encoding),!i&&a.codePages&&(i=a.codePages[0]),"string"==typeof i&&(i=a[i]),i)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=i[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=h.__private__.beginPage=function(e){G[++je]=[],Ce[je]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},it(je),X(G[Q])},st=function(e,t){var r,a,i;switch(n=t||n,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(a=r[0],i=r[1])),Array.isArray(e)&&(a=e[0]*ue,i=e[1]*ue),isNaN(a)&&(a=s[0],i=s[1]),(a>14400||i>14400)&&(vD.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),a=Math.min(14400,a),i=Math.min(14400,i)),s=[a,i],n.substr(0,1)){case"l":i>a&&(s=[i,a]);break;case"p":a>i&&(s=[i,a])}rt(s),Ot(Pt),J(qt),0!==Zt&&J(Zt+" J"),0!==$t&&J($t+" j"),Be.publish("addPage",{pageNumber:je})},at=function(e){e>0&&e<=je&&(G.splice(e,1),Ce.splice(e,1),je--,Q>je&&(Q=je),this.setPage(Q))},it=function(e){e>0&&e<=je&&(Q=e)},ot=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return G.length-1},lt=function(e,t,n){var r,s=void 0;return n=n||{},e=void 0!==e?e:fe[Ae].fontName,t=void 0!==t?t:fe[Ae].fontStyle,r=e.toLowerCase(),void 0!==ge[r]&&void 0!==ge[r][t]?s=ge[r][t]:void 0!==ge[e]&&void 0!==ge[e][t]?s=ge[e][t]:!1===n.disableWarning&&vD.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),s||n.noFallback||null==(s=ge.times[t])&&(s=ge.times.normal),s},ct=h.__private__.putInfo=function(){var e=Pe(),t=function(e){return e};for(var n in null!==d&&(t=xt.encryptor(e,0)),J("<<"),J("/Producer ("+nt(t("jsPDF "+ZD.version))+")"),de)de.hasOwnProperty(n)&&de[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(de[n]))+")");J("/CreationDate ("+nt(t(I))+")"),J(">>"),J("endobj")},dt=h.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Re;switch(Pe(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&J("/OpenAction [3 0 R /XYZ null null "+S(ne)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}ae&&J("/PageMode /"+ae),Be.publish("putCatalog"),J(">>"),J("endobj")},At=h.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(M+1)),J("/Root "+M+" 0 R"),J("/Info "+(M-1)+" 0 R"),null!==d&&J("/Encrypt "+xt.oid+" 0 R"),J("/ID [ <"+T+"> <"+T+"> ]"),J(">>")},ut=h.__private__.putHeader=function(){J("%PDF-"+m),J("%\xba\xdf\xac\xe0")},ht=h.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(M+1)),J("0000000000 65535 f ");for(var t=1;t<=M;t++)"function"==typeof V[t]?J((e+V[t]()).slice(-10)+" 00000 n "):void 0!==V[t]?J((e+V[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},mt=h.__private__.buildDocument=function(){var e;M=0,K=0,z=[],V=[],q=[],Re=Ue(),He=Ue(),X(z),Be.publish("buildDocument"),ut(),Ge(),function(){Be.publish("putAdditionalObjects");for(var e=0;e<q.length;e++){var t=q[e];Oe(t.objId,!0),J(t.content),J("endobj")}Be.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in fe)fe.hasOwnProperty(e)&&(!1===A||!0===A&&u.hasOwnProperty(e))&&We(fe[e])}(),function(){var e;for(e in ve)ve.hasOwnProperty(e)&&Ze(ve[e])}(),function(){for(var e in Ee)Ee.hasOwnProperty(e)&&Ye(Ee[e])}(),function(e){var t;for(t in be)be.hasOwnProperty(t)&&(be[t]instanceof XD?Xe(be[t]):be[t]instanceof JD&&Je(be[t],e))}(e),Be.publish("putResources"),e.forEach($e),$e({resourcesOid:He,objectOid:Number.MAX_SAFE_INTEGER}),Be.publish("postPutResources"),null!==d&&(xt.oid=Pe(),J("<<"),J("/Filter /Standard"),J("/V "+xt.v),J("/R "+xt.r),J("/U <"+xt.toHexString(xt.U)+">"),J("/O <"+xt.toHexString(xt.O)+">"),J("/P "+xt.P),J(">>"),J("endobj")),ct(),dt();var t=K;return ht(),At(),J("startxref"),J(""+t),J("%%EOF"),X(G[Q]),z.join("\n")},pt=h.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},ft=h.output=h.__private__.output=(_e=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return mt();case"save":h.save(t.filename);break;case"arraybuffer":return $(mt());case"blob":return pt(mt());case"bloburi":case"bloburl":if(void 0!==bD.URL&&"function"==typeof bD.URL.createObjectURL)return bD.URL&&bD.URL.createObjectURL(pt(mt()))||void 0;vD.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=mt();try{n=ED(r)}catch(d){n=ED(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(bD)){var s="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",a=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(s=t.pdfObjectUrl,a="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+s+'"'+a+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=bD.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(bD)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=bD.open();if(null!==c){c.document.write(l);var A=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(A.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(bD))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',m=bD.open();if(null!==m&&(m.document.write(u),m.document.title=t.filename),m||"undefined"==typeof safari)return m;break;case"datauri":case"dataurl":return bD.document.location.href=this.output("datauristring",t);default:return null}},_e.foo=function(){try{return _e.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!bD.console)throw new Error(n);bD.console.error(n,t),bD.alert&&alert(n)}},_e.foo.bar=_e,_e.foo),gt=function(e){return!0===Array.isArray(Se)&&Se.indexOf(e)>-1};switch(r){case"pt":ue=1;break;case"mm":ue=72/25.4;break;case"cm":ue=72/2.54;break;case"in":ue=72;break;case"px":ue=1==gt("px_scaling")?.75:96/72;break;case"pc":case"em":ue=12;break;case"ex":ue=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);ue=r}var xt=null;U(),L();var bt=h.__private__.getPageInfo=h.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ce[e].objId,pageNumber:e,pageContext:Ce[e]}},yt=h.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ce)if(Ce[t].objId===e)break;return bt(t)},vt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Ce[Q].objId,pageNumber:Q,pageContext:Ce[Q]}};h.addPage=function(){return st.apply(this,arguments),this},h.setPage=function(){return it.apply(this,arguments),X.call(this,G[Q]),this},h.insertPage=function(e){return this.addPage(),this.movePage(Q,e),this},h.movePage=function(e,t){var n,r;if(e>t){n=G[e],r=Ce[e];for(var s=e;s>t;s--)G[s]=G[s-1],Ce[s]=Ce[s-1];G[t]=n,Ce[t]=r,this.setPage(t)}else if(e<t){n=G[e],r=Ce[e];for(var a=e;a<t;a++)G[a]=G[a+1],Ce[a]=Ce[a+1];G[t]=n,Ce[t]=r,this.setPage(t)}return this},h.deletePage=function(){return at.apply(this,arguments),this},h.__private__.text=h.text=function(e,t,n,r,s){var a,i,o,l,c,d,A,h,m,p=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var f=n;n=t,t=e,e=f}if(arguments[3]instanceof Ie==0?(o=arguments[4],l=arguments[5],"object"===(0,LN.A)(A=arguments[3])&&null!==A||("string"==typeof o&&(l=o,o=null),"string"==typeof A&&(l=A,A=null),"number"==typeof A&&(o=A,A=null),r={flags:A,angle:o,align:l})):(C("The transform parameter of text() with a Matrix value"),m=s),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return p;var g,x="",v="number"==typeof r.lineHeightFactor?r.lineHeightFactor:_t,w=p.internal.scaleFactor;function N(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,A)}function B(e){for(var t,n=e.concat(),r=[],s=n.length;s--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function S(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,s,a=e.concat(),i=[],o=a.length;o--;)"string"==typeof(r=a.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(s=t(r[0],r[1],r[2]),i.push([s[0],s[1],s[2]]));n=i}return n}var E=!1,F=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var I=e.concat();i=[];for(var T,D=I.length;D--;)("string"!=typeof(T=I.shift())||Array.isArray(T)&&"string"!=typeof T[0])&&(F=!1);E=F}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var L=te/p.internal.scaleFactor,_=L*(v-1);switch(r.baseline){case"bottom":n-=_;break;case"top":n+=L-_;break;case"hanging":n+=L-2*_;break;case"middle":n+=L/2-_}if((d=r.maxWidth||0)>0&&("string"==typeof e?e=p.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(p.splitTextToSize(t,d))},[]))),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:Ae,fonts:fe,activeFontSize:te}},Be.publish("preProcessText",a),e=a.text,o=(r=a.options).angle,m instanceof Ie==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),y===b&&(o=-o);var P=Math.cos(o),U=Math.sin(o);m=new Ie(P,U,-U,P,0,0)}else o&&o instanceof Ie&&(m=o);y!==b||m||(m=De),void 0!==(c=r.charSpace||Xt)&&(x+=j(k(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=r.horizontalScale)&&(x+=j(100*h)+" Tz\n"),r.lang;var O=-1,Q=void 0!==r.renderingMode?r.renderingMode:r.stroke,R=p.internal.getCurrentPageInfo().pageContext;switch(Q){case 0:case!1:case"fill":O=0;break;case 1:case!0:case"stroke":O=1;break;case 2:case"fillThenStroke":O=2;break;case 3:case"invisible":O=3;break;case 4:case"fillAndAddForClipping":O=4;break;case 5:case"strokeAndAddPathForClipping":O=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":O=6;break;case 7:case"addToPathForClipping":O=7}var H=void 0!==R.usedRenderingMode?R.usedRenderingMode:-1;-1!==O?x+=O+" Tr\n":-1!==H&&(x+="0 Tr\n"),-1!==O&&(R.usedRenderingMode=O),l=r.align||"left";var M,V=te*v,z=p.internal.pageSize.getWidth(),K=fe[Ae];c=r.charSpace||Xt,d=r.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},r.flags);var q=[],G=function(e){return p.getStringUnitWidth(e,{font:K,charSpace:c,fontSize:te,doKerning:!1})*te/w};if("[object Array]"===Object.prototype.toString.call(e)){var W;i=B(e),"left"!==l&&(M=i.map(G));var Y,X=0;if("right"===l){t-=M[0],e=[],D=i.length;for(var Z=0;Z<D;Z++)0===Z?(Y=Mt(t),W=Vt(n)):(Y=k(X-M[Z]),W=-V),e.push([i[Z],Y,W]),X=M[Z]}else if("center"===l){t-=M[0]/2,e=[],D=i.length;for(var $=0;$<D;$++)0===$?(Y=Mt(t),W=Vt(n)):(Y=k((X-M[$])/2),W=-V),e.push([i[$],Y,W]),X=M[$]}else if("left"===l){e=[],D=i.length;for(var ee=0;ee<D;ee++)e.push(i[ee])}else if("justify"===l&&"Identity-H"===K.encoding){e=[],D=i.length,d=0!==d?d:z;for(var ne=0,re=0;re<D;re++)if(W=0===re?Vt(n):-V,Y=0===re?Mt(t):ne,re<D-1){var ae=k((d-M[re])/(i[re].split(" ").length-1)),ie=i[re].split(" ");e.push([ie[0]+" ",Y,W]),ne=0;for(var oe=1;oe<ie.length;oe++){var le=(G(ie[oe-1]+" "+ie[oe])-G(ie[oe]))*w+ae;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),ne-=le}}else e.push([i[re],Y,W]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],D=i.length,d=0!==d?d:z,re=0;re<D;re++){W=0===re?Vt(n):-V,Y=0===re?Mt(t):0;var ce=i[re].split(" ").length-1,de=ce>0?(d-M[re])/ce:0;re<D-1?q.push(j(k(de))):q.push(0),e.push([i[re],Y,W])}}}!0===("boolean"==typeof r.R2L?r.R2L:se)&&(e=S(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:Ae,fonts:fe,activeFontSize:te}},Be.publish("postProcessText",a),e=a.text,g=a.mutex.isHex||!1;var ue=fe[Ae].encoding;"WinAnsiEncoding"!==ue&&"StandardEncoding"!==ue||(e=S(e,function(e,t,n){return[N(e),t,n]})),i=B(e),e=[];for(var he,me,pe,ge=Array.isArray(i[0])?1:0,xe="",be=function(e,t,n){var s="";return n instanceof Ie?(n="number"==typeof r.angle?Te(n,new Ie(1,0,0,1,e,t)):Te(new Ie(1,0,0,1,e,t),n),y===b&&(n=Te(new Ie(1,0,0,-1,0,0),n)),s=n.join(" ")+" Tm\n"):s=j(e)+" "+j(t)+" Td\n",s},ye=0;ye<i.length;ye++){switch(xe="",ge){case 1:pe=(g?"<":"(")+i[ye][0]+(g?">":")"),he=parseFloat(i[ye][1]),me=parseFloat(i[ye][2]);break;case 0:pe=(g?"<":"(")+i[ye]+(g?">":")"),he=Mt(t),me=Vt(n)}void 0!==q&&void 0!==q[ye]&&(xe=q[ye]+" Tw\n"),0===ye?e.push(xe+be(he,me,m)+pe):0===ge?e.push(xe+pe):1===ge&&e.push(xe+be(he,me,m)+pe)}e=0===ge?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=Ae+" "+te+" Tf\n",ve+=j(te*v)+" TL\n",ve+=Wt+"\n",ve+=x,ve+=e,J(ve+="ET"),u[Ae]=!0,p};var wt=h.__private__.clip=h.clip=function(e){return J("evenodd"===e?"W*":"W"),this};h.clipEvenOdd=function(){return wt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return J("n"),this};var Nt=h.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(e){return Nt(e)&&(c=e),this};var jt=h.__private__.getStyle=h.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Ct=h.close=function(){return J("h"),this};h.stroke=function(){return J("S"),this},h.fill=function(e){return Bt("f",e),this},h.fillEvenOdd=function(e){return Bt("f*",e),this},h.fillStroke=function(e){return Bt("B",e),this},h.fillStrokeEvenOdd=function(e){return Bt("B*",e),this};var Bt=function(e,t){"object"===(0,LN.A)(t)?kt(t,e):J(e)},St=function(e){null===e||y===b&&void 0===e||(e=jt(e),J(e))};function Et(e,t,n,r,s){var a=new JD(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,s||this.matrix);a.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Le(i,a),a}var kt=function(e,t){var n=ye[e.key],r=be[n];if(r instanceof XD)J("q"),J(Ft(t)),r.gState&&h.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof JD){var s=new Ie(1,0,0,-1,0,hn());e.matrix&&(s=s.multiply(e.matrix||De),n=Et.call(r,e.key,e.boundingBox,e.xStep,e.yStep,s).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&h.setGState(r.gState),J(t),J("Q")}},Ft=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},It=h.moveTo=function(e,t){return J(j(k(e))+" "+j(F(t))+" m"),this},Tt=h.lineTo=function(e,t){return J(j(k(e))+" "+j(F(t))+" l"),this},Dt=h.curveTo=function(e,t,n,r,s,a){return J([j(k(e)),j(F(t)),j(k(n)),j(F(r)),j(k(s)),j(F(a)),"c"].join(" ")),this};h.__private__.line=h.line=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(s))throw new Error("Invalid arguments passed to jsPDF.line");return y===x?this.lines([[n-e,r-t]],e,t,[1,1],s||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},h.__private__.lines=h.lines=function(e,t,n,r,s,a){var i,o,l,c,d,A,u,h,m,p,f,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],a=a||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Nt(s)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for(It(t,n),i=r[0],o=r[1],c=e.length,p=t,f=n,l=0;l<c;l++)2===(d=e[l]).length?(p=d[0]*i+p,f=d[1]*o+f,Tt(p,f)):(A=d[0]*i+p,u=d[1]*o+f,h=d[2]*i+p,m=d[3]*o+f,p=d[4]*i+p,f=d[5]*o+f,Dt(A,u,h,m,p,f));return a&&Ct(),St(s),this},h.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":It(r[0],r[1]);break;case"l":Tt(r[0],r[1]);break;case"c":Dt.apply(this,r);break;case"h":Ct()}}return this},h.__private__.rect=h.rect=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(s))throw new Error("Invalid arguments passed to jsPDF.rect");return y===x&&(r=-r),J([j(k(e)),j(F(t)),j(k(n)),j(k(r)),"re"].join(" ")),St(s),this},h.__private__.triangle=h.triangle=function(e,t,n,r,s,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[s-n,a-r],[e-s,t-a]],e,t,[1,1],i,!0),this},h.__private__.roundedRect=h.roundedRect=function(e,t,n,r,s,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return s=Math.min(s,.5*n),a=Math.min(a,.5*r),this.lines([[n-2*s,0],[s*o,0,s,a-a*o,s,a],[0,r-2*a],[0,a*o,-s*o,a,-s,a],[2*s-n,0],[-s*o,0,-s,-a*o,-s,-a],[0,2*a-r],[0,-a*o,s*o,-a,s,-a]],e+s,t,[1,1],i,!0),this},h.__private__.ellipse=h.ellipse=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(s))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*r;return It(e+n,t),Dt(e+n,t-i,e+a,t-r,e,t-r),Dt(e-a,t-r,e-n,t-i,e-n,t),Dt(e-n,t+i,e-a,t+r,e,t+r),Dt(e+a,t+r,e+n,t+i,e+n,t),St(s),this},h.__private__.circle=h.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Nt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},h.setFont=function(e,t,n){return n&&(t=N(t,n)),Ae=lt(e,t,{disableWarning:!1}),this};var Lt=h.__private__.getFont=h.getFont=function(){return fe[lt.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var e,t,n={};for(e in ge)if(ge.hasOwnProperty(e))for(t in n[e]=[],ge[e])ge[e].hasOwnProperty(t)&&n[e].push(t);return n},h.addFont=function(e,t,n,r,s){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?s=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(n=N(n,r)),tt.call(this,e,t,n,s=s||"Identity-H")};var _t,Pt=e.lineWidth||.200025,Ut=h.__private__.getLineWidth=h.getLineWidth=function(){return Pt},Ot=h.__private__.setLineWidth=h.setLineWidth=function(e){return Pt=e,J(j(k(e))+" w"),this};h.__private__.setLineDash=ZD.API.setLineDash=ZD.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return j(k(e))}).join(" "),t=j(k(t)),J("["+e+"] "+t+" d"),this};var Qt=h.__private__.getLineHeight=h.getLineHeight=function(){return te*_t};h.__private__.getLineHeight=h.getLineHeight=function(){return te*_t};var Rt=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(_t=e),this},Ht=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return _t};Rt(e.lineHeight);var Mt=h.__private__.getHorizontalCoordinate=function(e){return k(e)},Vt=h.__private__.getVerticalCoordinate=function(e){return y===b?e:Ce[Q].mediaBox.topRightY-Ce[Q].mediaBox.bottomLeftY-k(e)},zt=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(e){return j(Mt(e))},Kt=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(e){return j(Vt(e))},qt=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Me(qt)},h.__private__.setStrokeColor=h.setDrawColor=function(e,t,n,r){return qt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(qt),this};var Gt=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Me(Gt)},h.__private__.setFillColor=h.setFillColor=function(e,t,n,r){return Gt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(Gt),this};var Wt=e.textColor||"0 g",Yt=h.__private__.getTextColor=h.getTextColor=function(){return Me(Wt)};h.__private__.setTextColor=h.setTextColor=function(e,t,n,r){return Wt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Xt=e.charSpace,Jt=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Xt||0)};h.__private__.setCharSpace=h.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Xt=e,this};var Zt=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,J(t+" J"),this};var $t=0;h.__private__.setLineJoin=h.setLineJoin=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $t=t,J(t+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(j(k(e))+" M"),this},h.GState=WD,h.setGState=function(e){(e="string"==typeof e?ve[we[e]]:en(null,e)).equals(Ne)||(J("/"+e.id+" gs"),Ne=e)};var en=function(e,t){if(!e||!we[e]){var n=!1;for(var r in ve)if(ve.hasOwnProperty(r)&&ve[r].equals(t)){n=!0;break}if(n)t=ve[r];else{var s="GS"+(Object.keys(ve).length+1).toString(10);ve[s]=t,t.id=s}return e&&(we[e]=t.id),Be.publish("addGState",t),t}};h.addGState=function(e,t){return en(e,t),this},h.saveGraphicsState=function(){return J("q"),xe.push({key:Ae,size:te,color:Wt}),this},h.restoreGraphicsState=function(){J("Q");var e=xe.pop();return Ae=e.key,te=e.size,Wt=e.color,Ne=null,this},h.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},h.comment=function(e){return J("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var s="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return s},set:function(e){s=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var s=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}});var a=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},rn=function(){this.page=je,this.currentPage=Q,this.pages=G.slice(0),this.pagesContext=Ce.slice(0),this.x=he,this.y=me,this.matrix=pe,this.width=on(Q),this.height=cn(Q),this.outputDestination=Y,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){je=this.page,Q=this.currentPage,Ce=this.pagesContext,G=this.pages,he=this.x,me=this.y,pe=this.matrix,ln(Q,this.width),dn(Q,this.height),Y=this.outputDestination};var sn=function(e,t,n,r,s){Fe.push(new rn),je=Q=0,G=[],he=e,me=t,pe=s,rt([n,r])};for(var an in h.beginFormObject=function(e,t,n,r,s){return sn(e,t,n,r,s),this},h.endFormObject=function(e){return function(e){if(ke[e])Fe.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Ee).length+1).toString(10);t.id=n,ke[e]=n,Ee[n]=t,Be.publish("addFormObject",t),Fe.pop().restore()}}(e),this},h.doFormObject=function(e,t){var n=Ee[ke[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},h.getFormObject=function(e){var t=Ee[ke[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},h.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(CD(pt(mt()),e),"function"==typeof CD.unload&&bD.setTimeout&&setTimeout(CD.unload,911),this):new Promise(function(t,n){try{var s=CD(pt(mt()),e);"function"==typeof CD.unload&&bD.setTimeout&&setTimeout(CD.unload,911),t(s)}catch(r){n(r.message)}})},ZD.API)ZD.API.hasOwnProperty(an)&&("events"===an&&ZD.API.events.length?function(e,t){var n,r,s;for(s=t.length-1;-1!==s;s--)n=t[s][0],r=t[s][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Be,ZD.API.events):h[an]=ZD.API[an]);function on(e){return Ce[e].mediaBox.topRightX-Ce[e].mediaBox.bottomLeftX}function ln(e,t){Ce[e].mediaBox.topRightX=t+Ce[e].mediaBox.bottomLeftX}function cn(e){return Ce[e].mediaBox.topRightY-Ce[e].mediaBox.bottomLeftY}function dn(e,t){Ce[e].mediaBox.topRightY=t+Ce[e].mediaBox.bottomLeftY}var An=h.getPageWidth=function(e){return on(e=e||Q)/ue},un=h.setPageWidth=function(e,t){ln(e,t*ue)},hn=h.getPageHeight=function(e){return cn(e=e||Q)/ue},mn=h.setPageHeight=function(e,t){dn(e,t*ue)};return h.internal={pdfEscape:nt,getStyle:jt,getFont:Lt,getFontSize:re,getCharSpace:Jt,getTextColor:Yt,getLineHeight:Qt,getLineHeightFactor:Ht,getLineWidth:Ut,write:Z,getHorizontalCoordinate:Mt,getVerticalCoordinate:Vt,getCoordinateString:zt,getVerticalCoordinateString:Kt,collections:{},newObject:Pe,newAdditionalObject:Qe,newObjectDeferred:Ue,newObjectDeferredBegin:Oe,getFilters:ze,putStream:Ke,events:Be,scaleFactor:ue,pageSize:{getWidth:function(){return An(Q)},setWidth:function(e){un(Q,e)},getHeight:function(){return hn(Q)},setHeight:function(e){mn(Q,e)}},encryptionOptions:d,encryption:xt,getEncryptor:function(e){return null!==d?xt.encryptor(e,0):function(e){return e}},output:ft,getNumberOfPages:ot,pages:G,out:J,f2:S,f3:E,getPageInfo:bt,getPageInfoByObjId:yt,getCurrentPageInfo:vt,getPDFVersion:p,Point:tn,Rectangle:nn,Matrix:Ie,hasHotfix:gt},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return An(Q)},set:function(e){un(Q,e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return hn(Q)},set:function(e){mn(Q,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===A&&(u[r]=!0);var s=e[t][0].split("-");et({id:r,fontName:s[0],fontStyle:s[1]||""})}Be.publish("addFonts",{fonts:fe,dictionary:ge})}.call(h,ee),Ae="F1",st(s,n),Be.publish("initialized"),h}KD.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},KD.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},KD.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},KD.prototype.processOwnerPassword=function(e,t){return VD(RD(t).substr(0,5),e)},KD.prototype.encryptor=function(e,t){var n=RD(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return VD(n,e)}},WD.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,LN.A)(e)!==(0,LN.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},ZD.API={events:[]},ZD.version="3.0.3";var $D=ZD.API,eL=1,tL=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nL=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},rL=function(e){return e.toFixed(2)},sL=function(e){return e.toFixed(5)};$D.__acroform__={};var aL=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},iL=function(e){return e*eL},oL=function(e){var t=new NL,n=UL.internal.getHeight(e)||0,r=UL.internal.getWidth(e)||0;return t.BBox=[0,0,Number(rL(r)),Number(rL(n))],t},lL=$D.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},cL=$D.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},dL=$D.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},AL=$D.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dL(e,t-1)},uL=$D.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return lL(e,t-1)},hL=$D.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cL(e,t-1)},mL=$D.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],a=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(s+i)||0,l.upperRight_Y=r(a)||0,[Number(rL(l.lowerLeft_X)),Number(rL(l.lowerLeft_Y)),Number(rL(l.upperRight_X)),Number(rL(l.upperRight_Y))]},pL=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=fL(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+rL(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=oL(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},fL=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(e){return e.split("\n")}):s.map(function(e){return[e]});var a=n,i=UL.internal.getHeight(e)||0;i=i<0?-i:i;var o=UL.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<s.length){var a=n+" "+s[t+1][0];return gL(a,e,r).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var c,d,A=gL("3",e,a).height,u=e.multiline?i-a:(i-A)/2,h=u+=2,m=0,p=0,f=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+gL(t,e,a=12).width+", FieldWidth:"+o+"\n";break}for(var g="",x=0,b=0;b<s.length;b++)if(s.hasOwnProperty(b)){var y=!1;if(1!==s[b].length&&f!==s[b].length-1){if((A+2)*(x+2)+2>i)continue e;g+=s[b][f],y=!0,p=b,b--}else{g=" "==(g+=s[b][f]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var v=parseInt(b),w=l(v,g,a),N=b>=s.length-1;if(w&&!N){g+=" ",f=0;continue}if(w||N){if(N)p=v;else if(e.multiline&&(A+2)*(x+2)+2>i)continue e}else{if(!e.multiline)continue e;if((A+2)*(x+2)+2>i)continue e;p=v}}for(var j="",C=m;C<=p;C++){var B=s[C];if(e.multiline){if(C===p){j+=B[f]+" ",f=(f+1)%B.length;continue}if(C===m){j+=B[B.length-1]+" ";continue}}j+=B[0]+" "}switch(j=" "==j.substr(j.length-1)?j.substr(0,j.length-1):j,d=gL(j,e,a).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=rL(c)+" "+rL(h)+" Td\n",t+="("+tL(j)+") Tj\n",t+=-rL(c)+" 0 Td\n",h=-(a+2),d=0,m=y?p:p+1,x++,g=""}break}return r.text=t,r.fontSize=a,r},gL=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},xL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bL=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},yL=$D.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var s="[",a=0;a<e.length;a++)switch(0!==a&&(s+=" "),(0,LN.A)(e[a])){case"boolean":case"number":case"object":s+=e[a].toString();break;case"string":"/"!==e[a].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),s+="("+tL(r(e[a].toString()))+")"):s+=e[a].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vL=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+tL(r(e))+")"},wL=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wL.prototype.toString=function(){return this.objId+" 0 R"},wL.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wL.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:yL(s,this.objId,this.scope)}):s instanceof wL?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):"function"!=typeof s&&e.push({key:r,value:s}))}return e};var NL=function(){wL.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};aL(NL,wL);var jL=function(){wL.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+tL(t(e))+")"}},set:function(t){e=t}})};aL(jL,wL);var CL=function e(){wL.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(t,3))},set:function(e){!0===Boolean(e)?this.F=uL(t,3):this.F=hL(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof DL)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+tL(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/eL:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof DL||this instanceof _L))return vL(A,this.objId,this.scope)},set:function(e){e=e.toString(),A=e}});var u=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof FL==0?vL(u,this.objId,this.scope):u},set:function(e){e=e.toString(),u=this instanceof FL==0?"("===e.substr(0,1)?nL(e.substr(1,e.length-2)):nL(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof FL==1?nL(u.substr(1,u.length-1)):u},set:function(e){e=e.toString(),u=this instanceof FL==1?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof FL==0?vL(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof FL==0?"("===e.substr(0,1)?nL(e.substr(1,e.length-2)):nL(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof FL==1?nL(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof FL==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(e){m=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,1):this.Ff=hL(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,2):this.Ff=hL(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,3):this.Ff=hL(this.Ff,3)}});var f=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==f)return f},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');f=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(f){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:f=2;break;case"center":case 1:f=1;break;default:f=0}}})};aL(CL,wL);var BL=function(){CL.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yL(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,s=[];r=t.exec(e);)s.push(r[n]);return s}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,18):this.Ff=hL(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=uL(this.Ff,19):this.Ff=hL(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=uL(this.Ff,20),t.sort()):this.Ff=hL(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,22):this.Ff=hL(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,23):this.Ff=hL(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,27):this.Ff=hL(this.Ff,27)}}),this.hasAppearanceStream=!1};aL(BL,CL);var SL=function(){BL.call(this),this.fontName="helvetica",this.combo=!1};aL(SL,BL);var EL=function(){SL.call(this),this.combo=!0};aL(EL,SL);var kL=function(){EL.call(this),this.edit=!0};aL(kL,EL);var FL=function(){CL.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,15):this.Ff=hL(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,16):this.Ff=hL(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,17):this.Ff=hL(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,26):this.Ff=hL(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+tL(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,LN.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};aL(FL,CL);var IL=function(){FL.call(this),this.pushButton=!0};aL(IL,FL);var TL=function(){FL.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};aL(TL,FL);var DL=function(){var e,t;CL.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+tL(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,LN.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=UL.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};aL(DL,CL),TL.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},TL.prototype.createOption=function(e){var t=new DL;return t.Parent=this,t.optionName=e,this.Kids.push(t),OL.call(this.scope,t),t};var LL=function(){FL.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=UL.CheckBox.createAppearanceStream()};aL(LL,FL);var _L=function(){CL.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,13):this.Ff=hL(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,21):this.Ff=hL(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,23):this.Ff=hL(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,24):this.Ff=hL(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,25):this.Ff=hL(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,26):this.Ff=hL(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};aL(_L,CL);var PL=function(){_L.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(AL(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=uL(this.Ff,14):this.Ff=hL(this.Ff,14)}}),this.password=!0};aL(PL,_L);var UL={CheckBox:{createAppearanceStream:function(){return{N:{On:UL.CheckBox.YesNormal},D:{On:UL.CheckBox.YesPushDown,Off:UL.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=fL(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+rL(UL.internal.getWidth(e))+" "+rL(UL.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+rL(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],a=UL.internal.getHeight(e),i=UL.internal.getWidth(e),o=fL(e,e.caption);return s.push("1 g"),s.push("0 0 "+rL(i)+" "+rL(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+rL(i-1)+" "+rL(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+rL(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),t.stream=s.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+rL(UL.internal.getWidth(e))+" "+rL(UL.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:UL.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=UL.RadioButton.Circle.YesNormal,t.D[e]=UL.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var n=[],r=UL.internal.getWidth(e)<=UL.internal.getHeight(e)?UL.internal.getWidth(e)/4:UL.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=UL.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sL(UL.internal.getWidth(e)/2)+" "+sL(UL.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=[],r=UL.internal.getWidth(e)<=UL.internal.getHeight(e)?UL.internal.getWidth(e)/4:UL.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*UL.internal.Bezier_C).toFixed(5)),i=Number((r*UL.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sL(UL.internal.getWidth(e)/2)+" "+sL(UL.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sL(UL.internal.getWidth(e)/2)+" "+sL(UL.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=[],r=UL.internal.getWidth(e)<=UL.internal.getHeight(e)?UL.internal.getWidth(e)/4:UL.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*UL.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sL(UL.internal.getWidth(e)/2)+" "+sL(UL.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:UL.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=UL.RadioButton.Cross.YesNormal,t.D[e]=UL.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=oL(e);t.scope=e.scope;var n=[],r=UL.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+rL(UL.internal.getWidth(e)-2)+" "+rL(UL.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(rL(r.x1.x)+" "+rL(r.x1.y)+" m"),n.push(rL(r.x2.x)+" "+rL(r.x2.y)+" l"),n.push(rL(r.x4.x)+" "+rL(r.x4.y)+" m"),n.push(rL(r.x3.x)+" "+rL(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=UL.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+rL(UL.internal.getWidth(e))+" "+rL(UL.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+rL(UL.internal.getWidth(e)-2)+" "+rL(UL.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(rL(n.x1.x)+" "+rL(n.x1.y)+" m"),r.push(rL(n.x2.x)+" "+rL(n.x2.y)+" l"),r.push(rL(n.x4.x)+" "+rL(n.x4.y)+" m"),r.push(rL(n.x3.x)+" "+rL(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=oL(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+rL(UL.internal.getWidth(e))+" "+rL(UL.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};UL.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=UL.internal.getWidth(e),n=UL.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},UL.internal.getWidth=function(e){var t=0;return"object"===(0,LN.A)(e)&&(t=iL(e.Rect[2])),t},UL.internal.getHeight=function(e){var t=0;return"object"===(0,LN.A)(e)&&(t=iL(e.Rect[3])),t};var OL=$D.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(CL.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(xL)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");eL=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new jL,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){!function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}(e)}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&bL(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var s=e[r],a=[],i=s.Rect;if(s.Rect&&(s.Rect=mL(s.Rect,t)),t.internal.newObjectDeferredBegin(s.objId,!0),s.DA=UL.createDefaultAppearanceStream(s),"object"===(0,LN.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(a=s.getKeyValueListForStream()),s.Rect=i,s.hasAppearanceStream&&!s.appearanceStreamContent){var o=pL(s);a.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(s.appearanceStreamContent){var l="";for(var c in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(c)){var d=s.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var r in d)if(d.hasOwnProperty(r)){var A=d[r];"function"==typeof A&&(A=A.call(t,s)),l+="/"+r+" "+A+" ",t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A)}}else"function"==typeof(A=d)&&(A=A.call(t,s)),l+="/"+r+" "+A,t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A);l+=">>"}a.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:s.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,LN.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof CL))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};$D.AcroFormChoiceField=BL,$D.AcroFormListBox=SL,$D.AcroFormComboBox=EL,$D.AcroFormEditBox=kL,$D.AcroFormButton=FL,$D.AcroFormPushButton=IL,$D.AcroFormRadioButton=TL,$D.AcroFormCheckBox=LL,$D.AcroFormTextField=_L,$D.AcroFormPasswordField=PL,$D.AcroFormAppearance=UL,$D.AcroForm={ChoiceField:BL,ListBox:SL,ComboBox:EL,EditBox:kL,Button:FL,PushButton:IL,RadioButton:TL,CheckBox:LL,TextField:_L,PasswordField:PL,Appearance:UL},ZD.AcroForm={ChoiceField:BL,ListBox:SL,ComboBox:EL,EditBox:kL,Button:FL,PushButton:IL,RadioButton:TL,CheckBox:LL,TextField:_L,PasswordField:PL,Appearance:UL};ZD.AcroForm;function QL(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(e,t){var s,a,i,o,l,c=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(w(e))for(l in r)for(i=r[l],s=0;s<i.length;s+=1){for(o=!0,a=0;a<i[s].length;a+=1)if(void 0!==i[s][a]&&i[s][a]!==e[a]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(i=r[l],s=0;s<i.length;s+=1){for(o=!0,a=0;a<i[s].length;a+=1)if(void 0!==i[s][a]&&i[s][a]!==e.charCodeAt(a)){o=!1;break}if(!0===o){c=l;break}}return c===n&&t!==n&&(c=t),c},a=function e(t){for(var n=this.internal.write,r=this.internal.putStream,s=(0,this.internal.getFilters)();-1!==s.indexOf("FlateEncode");)s.splice(s.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===g.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===g.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";a.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d,A=null!==(d=t.sMaskBitsPerComponent)&&void 0!==d?d:t.bitsPerComponent,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:t.sMask};"filter"in t&&(u.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(t.width),u.filter=t.filter),e.call(this,u)}if(t.colorSpace===g.INDEXED){var h=this.internal.newObject();r({data:j(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},i=function(){var e=this.internal.collections[t+"images"];for(var n in e)a.call(this,e[n])},o=function(){var e,n=this.internal.collections[t+"images"],r=this.internal.write;for(var s in n)r("/I"+(e=n[s]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},A=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===(0,LN.A)(e)&&1===e.nodeType},h=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return SD(unescape(r).split("base64,").pop());var s=e.loadFile(r,!0);if(void 0!==s)return s}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(n){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return SD(t.toDataURL(a,1).split("base64,").pop())}},m=function(e){var n=this.internal.collections[t+"images"];if(n)for(var r in n)if(e===n[r].alias)return n[r]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,s,a){var i=p.call(this,n,r,s),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(n=i[0],r=i[1],d[s.index]=s,a){a*=Math.PI/180;var A=Math.cos(a),u=Math.sin(a),h=function(e){return e.toFixed(4)},m=[h(A),h(u),h(-1*u),h(A),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(m.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+s.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(w(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},v=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var w=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},N=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},j=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=w(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,t,r,s,a,i,o,c,d;if("number"==typeof arguments[1]?(t=n,r=arguments[1],s=arguments[2],a=arguments[3],i=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7]):(t=arguments[1],r=arguments[2],s=arguments[3],a=arguments[4],i=arguments[5],o=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,LN.A)(e=arguments[0])&&!u(e)&&"imageData"in e){var A=e;e=A.imageData,t=A.format||t||n,r=A.x||r||0,s=A.y||s||0,a=A.w||A.width||a,i=A.h||A.height||i,o=A.alias||o,c=A.compression||c,d=A.rotation||A.angle||d}var h=this.internal.getFilters();if(void 0===c&&-1!==h.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var m=C.call(this,e,t,o,c);return f.call(this,r,s,a,i,m,d),this};var C=function(t,r,a,i){var o,l,c;if("string"==typeof t&&s(t)===n){t=unescape(t);var p=B(t,!1);(""!==p||void 0!==(p=e.loadFile(t,!0)))&&(t=p)}if(u(t)&&(t=h(t,r)),r=s(t,r),!A(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=a)||0===c.length)&&(a=function(e){return"string"==typeof e||w(e)?b(e):w(e.data)?b(e.data):null}(t)),(o=m.call(this,a))||(t instanceof Uint8Array||"RGBA"===r||(l=t,t=N(t)),o=this["process"+r.toUpperCase()](t,d.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:x.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},B=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var a;n=null!==(a=v(e))&&void 0!==a?a:e;try{r=SD(n)}catch(s){if(t)throw y(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+s.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(t){var r,a,i="";if(u(t)&&(t=h(t)),"string"==typeof t&&s(t)===n&&(""===(i=B(t,!1))&&(i=e.loadFile(t)||""),t=i),a=s(t),!A(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(t instanceof Uint8Array||(t=N(t)),!(r=this["process"+a.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=a,r}}(ZD.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};ZD.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,s,a=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var A=0;A<l.length;A++){n=l[A];var u=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),f=this.internal.getEncryptor(m.objId),g=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y)+"] ")+"/Contents ("+u(f(n.contents))+")",s+=" /Popup "+p.objId+" 0 R",s+=" /P "+o.objId+" 0 R",s+=" /T ("+u(f(g))+") >>",m.content=s;var x=m.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+i(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+i(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(s+=" /Open true"),s+=" >>",p.content=s,this.internal.write(m.objId,"0 R",p.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+i(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+u(h(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var y=this.annotations._nameMap[n.options.name];n.options.pageNumber=y.page,n.options.top=y.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+u(h(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var v=i(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+v+" "+n.options.zoom+"]"}""!=s&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,s){var a=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+n),h:o(t+r)},options:s,type:"link"})},e.textWithLink=function(e,t,n,r){var s,a,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){a=r.maxWidth;var l=this.splitTextToSize(e,a).length;s=Math.ceil(o*l)}else a=i,s=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,n-o,a,s,r),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(ZD.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&s.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&a(e)&&4==t[e.charCodeAt(0)].length},A=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,s="",a=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(a++,"number"==typeof(r=r[e.charCodeAt(t)])&&(s+=String.fromCharCode(r),r=n,a=0),t===e.length-1&&(r=n,s+=e.charAt(t-(a-1)),t-=a-1,a=0)):(r=n,s+=e.charAt(t-a),t-=a,a=0);return s};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var u=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===a(e)?-1:!c(e)||!i(t)&&!i(n)||!i(n)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(n)&&c(n)?3:o(e)||!i(n)?1:2:-1},h=function(e){var n=0,r=0,s=0,a="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),r=0;r<c[n].length;r+=1)a=c[n][r],o=c[n][r-1],l=c[n][r+1],i(a)?(s=u(a,o,l),d[n]+=-1!==s?String.fromCharCode(t[a.charCodeAt(0)][s]):a):d[n]+=a;d[n]=A(d[n])}return d.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([h(t[r][0]),t[r][1],t[r][2]]):n.push([h(t[r])]);e=n}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",m])}(ZD.API),ZD.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ZD.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var s=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),s=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var A=0;A<e.length;A++)i<(l=this.getStringUnitWidth(e[A],{font:s})*n)&&(i=l);return 0!==i&&(o=e.length),{w:i/=a,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var s=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==s.lineNumber&&(s.lineNumber===e.lineNumber?(e.x=(s.x||0)+(s.width||0),e.y=s.y||0):s.y+s.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=s.y+s.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,d){if(r.call(this),!l)throw new Error("No data for PDF table.");var A,u,h,m,p=[],f=[],g=[],x={},b={},y=[],v=[],w=(d=d||{}).autoSize||!1,N=!1!==d.printHeaders,j=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,C=d.margins||Object.assign({width:this.getPageWidth()},t),B="number"==typeof d.padding?d.padding:3,S=d.headerBackgroundColor||"#c8c8c8",E=d.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=S,this.internal.__cell__.headerTextColor=E,this.setFontSize(j),null==c)f=p=Object.keys(l[0]),g=p.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,LN.A)(c[0]))for(p=c.map(function(e){return e.name}),f=c.map(function(e){return e.prompt||e.name||""}),g=c.map(function(e){return e.align||"left"}),A=0;A<c.length;A+=1)b[c[A].name]=.7499990551181103*c[A].width;else Array.isArray(c)&&"string"==typeof c[0]&&(f=p=c,g=p.map(function(){return"left"}));if(w||Array.isArray(c)&&"string"==typeof c[0])for(A=0;A<p.length;A+=1){for(x[m=p[A]]=l.map(function(e){return e[m]}),this.setFont(void 0,"bold"),y.push(this.getTextDimensions(f[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),u=x[m],this.setFont(void 0,"normal"),h=0;h<u.length;h+=1)y.push(this.getTextDimensions(u[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[m]=Math.max.apply(null,y)+B+B,y=[]}if(N){var k={};for(A=0;A<p.length;A+=1)k[p[A]]={},k[p[A]].text=f[A],k[p[A]].align=g[A];var F=o.call(this,k,b);v=p.map(function(t){return new a(e,n,b[t],F,k[t].text,void 0,k[t].align)}),this.setTableHeaderRow(v),this.printHeaderRow(1,!1)}var I=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(A=0;A<l.length;A+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:A,data:l[A]},this);var T=o.call(this,l[A],b);for(h=0;h<p.length;h+=1){var D=l[A][p[h]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:A,col:h,data:D},this),i.call(this,new a(e,n,b[p[h]],T,D,A+2,I[p[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var o=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,s=this.internal.scaleFactor;return Object.keys(e).map(function(r){var s=e[r];return this.splitTextToSize(s.hasOwnProperty("text")?s.text:s,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/s+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var s;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){s=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(s.y=this.internal.__cell__.margins.top||0,l.push(s)),s.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,s),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(ZD.API);var RL={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HL=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ML=QL(HL),VL=[100,200,300,400,500,600,700,800,900],zL=QL(VL);function KL(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return RL[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),s=function(e){return"number"==typeof ML[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function qL(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var GL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},WL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function YL(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function XL(e){return e.trimLeft()}function JL(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function ZL(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var $L,e_,t_,n_,r_,s_,a_,i_,o_=["times"];function l_(e,t,n,r,s){var a=4,i=A_;switch(s){case ZD.API.image_compression.FAST:a=1,i=d_;break;case ZD.API.image_compression.MEDIUM:a=6,i=u_;break;case ZD.API.image_compression.SLOW:a=9,i=h_}e=function(e,t,n,r){for(var s,a=e.length/t,i=new Uint8Array(e.length+a),o=[c_,d_,A_,u_,h_],l=0;l<a;l+=1){var c=l*t,d=e.subarray(c,c+t);if(r)i.set(r(d,n,s),c+l);else{for(var A=o.length,u=[],h=0;h<A;h+=1)u[h]=o[h](d,n,s);var m=p_(u.concat());i.set(u[m],c+l)}s=d}return i}(e,t,Math.ceil(n*r/8),i);var o=KE(e,{level:a});return ZD.API.__addimage__.arrayBufferToBinaryString(o)}function c_(e){var t=Array.apply([],e);return t.unshift(0),t}function d_(e,t){var n=e.length,r=[];r[0]=1;for(var s=0;s<n;s+=1){var a=e[s-t]||0;r[s+1]=e[s]-a+256&255}return r}function A_(e,t,n){var r=e.length,s=[];s[0]=2;for(var a=0;a<r;a+=1){var i=n&&n[a]||0;s[a+1]=e[a]-i+256&255}return s}function u_(e,t,n){var r=e.length,s=[];s[0]=3;for(var a=0;a<r;a+=1){var i=e[a-t]||0,o=n&&n[a]||0;s[a+1]=e[a]+256-(i+o>>>1)&255}return s}function h_(e,t,n){var r=e.length,s=[];s[0]=4;for(var a=0;a<r;a+=1){var i=m_(e[a-t]||0,n&&n[a]||0,n&&n[a-t]||0);s[a+1]=e[a]-i+256&255}return s}function m_(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=s&&r<=a?e:s<=a?t:n}function p_(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function f_(e,t,n){var r=t*n,s=Math.floor(r/8),a=16-(r-8*s+n),i=(1<<n)-1;return x_(e,s)>>a&i}function g_(e,t,n,r){var s=n*r,a=Math.floor(s/8),i=16-(s-8*a+r),o=(1<<r)-1,l=(t&o)<<i;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var r=n>>8&255;e.setUint8(t,r)}}(e,a,x_(e,a)&~(o<<i)&65535|l)}function x_(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function b_(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],a=s>>7,i=1<<1+(7&s);e[t++],e[t++];var o=null,l=null;a&&(o=t,l=i,t+=3*i);var c=!0,d=[],A=0,u=null,h=0,m=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];A=e[t++]|e[t++]<<8,u=e[t++],1&p||(u=null),h=p>>2&7,t++;break;case 254:for(;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var f=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++],v=y>>6&1,w=1<<1+(7&y),N=o,j=l,C=!1;y>>7&&(C=!0,N=t,j=w,t+=3*w);var B=t;for(t++;;){var S;if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}d.push({x:f,y:g,width:x,height:b,has_local_palette:C,palette_offset:N,palette_size:j,data_offset:B,data_length:t-B,transparent_index:u,interlaced:!!v,delay:A,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,r){var s=this.frameInfo(t),a=s.width*s.height,i=new Uint8Array(a);y_(e,s.data_offset,i,a);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,d=n-c,A=c,u=4*(s.y*n+s.x),h=4*((s.y+s.height)*n+s.x),m=u,p=4*d;!0===s.interlaced&&(p+=4*n*7);for(var f=8,g=0,x=i.length;g<x;++g){var b=i[g];if(0===A&&(A=c,(m+=p)>=h&&(p=4*d+4*n*(f-1),m=u+(c+d)*(f<<1),f>>=1)),b===l)m+=4;else{var y=e[o+3*b],v=e[o+3*b+1],w=e[o+3*b+2];r[m++]=w,r[m++]=v,r[m++]=y,r[m++]=255}--A}},this.decodeAndBlitFrameRGBA=function(t,r){var s=this.frameInfo(t),a=s.width*s.height,i=new Uint8Array(a);y_(e,s.data_offset,i,a);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,d=n-c,A=c,u=4*(s.y*n+s.x),h=4*((s.y+s.height)*n+s.x),m=u,p=4*d;!0===s.interlaced&&(p+=4*n*7);for(var f=8,g=0,x=i.length;g<x;++g){var b=i[g];if(0===A&&(A=c,(m+=p)>=h&&(p=4*d+4*n*(f-1),m=u+(c+d)*(f<<1),f>>=1)),b===l)m+=4;else{var y=e[o+3*b],v=e[o+3*b+1],w=e[o+3*b+2];r[m++]=y,r[m++]=v,r[m++]=w,r[m++]=255}--A}}}function y_(e,t,n,r){for(var s=e[t++],a=1<<s,i=a+1,o=i+1,l=s+1,c=(1<<l)-1,d=0,A=0,u=0,h=e[t++],m=new Int32Array(4096),p=null;;){for(;d<16&&0!==h;)A|=e[t++]<<d,d+=8,1===h?h=e[t++]:--h;if(d<l)break;var f=A&c;if(A>>=l,d-=l,f!==a){if(f===i)break;for(var g=f<o?f:p,x=0,b=g;b>a;)b=m[b]>>8,++x;var y=b;if(u+x+(g!==f?1:0)>r)return void vD.log("Warning, gif stream longer than expected.");n[u++]=y;var v=u+=x;for(g!==f&&(n[u++]=y),b=g;x--;)b=m[b],n[--v]=255&b,b>>=8;null!==p&&o<4096&&(m[o++]=p<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=f}else o=i+1,c=(1<<(l=s+1))-1,p=null}return u!==r&&vD.log("Warning, gif stream shorter than expected."),n}function v_(e){var t,n,r,s,a,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),A=new Array(65535),u=new Array(65535),h=new Array(64),m=new Array(64),p=[],f=0,g=7,x=new Array(64),b=new Array(64),y=new Array(64),v=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(e,t){for(var n=0,r=0,s=new Array,a=1;a<=16;a++){for(var i=1;i<=e[a];i++)s[t[r]]=[],s[t[r]][0]=n,s[t[r]][1]=a,r++,n++;n*=2}return s}function D(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(f|=1<<g),n--,--g<0&&(255==f?(L(255),L(0)):L(f),g=7,f=0)}function L(e){p.push(e)}function _(e){L(e>>8&255),L(255&e)}function P(e,t,n,r,s){for(var a,i=s[0],o=s[240],l=function(e,t){var n,r,s,a,i,o,l,c,d,A,u=0;for(d=0;d<8;++d){n=e[u],r=e[u+1],s=e[u+2],a=e[u+3],i=e[u+4],o=e[u+5],l=e[u+6];var m=n+(c=e[u+7]),p=n-c,f=r+l,g=r-l,x=s+o,b=s-o,y=a+i,v=a-i,w=m+y,N=m-y,j=f+x,C=f-x;e[u]=w+j,e[u+4]=w-j;var B=.707106781*(C+N);e[u+2]=N+B,e[u+6]=N-B;var S=.382683433*((w=v+b)-(C=g+p)),E=.5411961*w+S,k=1.306562965*C+S,F=.707106781*(j=b+g),I=p+F,T=p-F;e[u+5]=T+E,e[u+3]=T-E,e[u+1]=I+k,e[u+7]=I-k,u+=8}for(u=0,d=0;d<8;++d){n=e[u],r=e[u+8],s=e[u+16],a=e[u+24],i=e[u+32],o=e[u+40],l=e[u+48];var D=n+(c=e[u+56]),L=n-c,_=r+l,P=r-l,U=s+o,O=s-o,Q=a+i,R=a-i,H=D+Q,M=D-Q,V=_+U,z=_-U;e[u]=H+V,e[u+32]=H-V;var K=.707106781*(z+M);e[u+16]=M+K,e[u+48]=M-K;var q=.382683433*((H=R+O)-(z=P+L)),G=.5411961*H+q,W=1.306562965*z+q,Y=.707106781*(V=O+P),X=L+Y,J=L-Y;e[u+40]=J+G,e[u+24]=J-G,e[u+8]=X+W,e[u+56]=X-W,u++}for(d=0;d<64;++d)A=e[d]*t[d],h[d]=A>0?A+.5|0:A-.5|0;return h}(e,t),c=0;c<64;++c)m[N[c]]=l[c];var d=m[0]-n;n=m[0],0==d?D(r[0]):(D(r[u[a=32767+d]]),D(A[a]));for(var p=63;p>0&&0==m[p];)p--;if(0==p)return D(i),n;for(var f,g=1;g<=p;){for(var x=g;0==m[g]&&g<=p;)++g;var b=g-x;if(b>=16){f=b>>4;for(var y=1;y<=f;++y)D(o);b&=15}a=32767+m[g],D(s[(b<<4)+u[a]]),D(A[a]),g++}return 63!=p&&D(i),n}function U(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=i((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[N[n]]=r}for(var s=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var A=i((s[a]*e+50)/100);A=Math.min(Math.max(A,1),255),l[N[a]]=A}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,m=0;m<8;m++)for(var p=0;p<8;p++)c[h]=1/(o[N[h]]*u[m]*u[p]*8),d[h]=1/(l[N[h]]*u[m]*u[p]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){a&&U(a),p=new Array,f=0,g=7,_(65496),_(65504),_(16),L(74),L(70),L(73),L(70),L(0),L(1),L(1),L(0),_(1),_(1),L(0),L(0),function(){_(65499),_(132),L(0);for(var e=0;e<64;e++)L(o[e]);L(1);for(var t=0;t<64;t++)L(l[t])}(),function(e,t){_(65472),_(17),L(8),_(t),_(e),L(3),L(1),L(17),L(0),L(2),L(17),L(1),L(3),L(17),L(1)}(e.width,e.height),function(){_(65476),_(418),L(0);for(var e=0;e<16;e++)L(j[e+1]);for(var t=0;t<=11;t++)L(C[t]);L(16);for(var n=0;n<16;n++)L(B[n+1]);for(var r=0;r<=161;r++)L(S[r]);L(1);for(var s=0;s<16;s++)L(E[s+1]);for(var a=0;a<=11;a++)L(k[a]);L(17);for(var i=0;i<16;i++)L(F[i+1]);for(var o=0;o<=161;o++)L(I[o])}(),_(65498),_(12),L(3),L(1),L(0),L(2),L(17),L(3),L(17),L(0),L(63),L(0);var i=0,A=0,u=0;f=0,g=7,this.encode.displayName="_encode_";for(var h,m,v,N,T,O,Q,R,H,M=e.data,V=e.width,z=e.height,K=4*V,q=0;q<z;){for(h=0;h<K;){for(T=K*q+h,Q=-1,R=0,H=0;H<64;H++)O=T+(R=H>>3)*K+(Q=4*(7&H)),q+R>=z&&(O-=K*(q+1+R-z)),h+Q>=K&&(O-=h+Q-K+4),m=M[O++],v=M[O++],N=M[O++],x[H]=(w[m]+w[v+256|0]+w[N+512|0]>>16)-128,b[H]=(w[m+768|0]+w[v+1024|0]+w[N+1280|0]>>16)-128,y[H]=(w[m+1280|0]+w[v+1536|0]+w[N+1792|0]>>16)-128;i=P(x,c,i,t,r),A=P(b,d,A,n,s),u=P(y,d,u,n,s),h+=32}q+=8}if(g>=0){var G=[];G[1]=g+1,G[0]=(1<<g+1)-1,D(G)}return _(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=T(j,C),n=T(E,k),r=T(B,S),s=T(F,I),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)u[32767+r]=n,A[32767+r]=[],A[32767+r][1]=n,A[32767+r][0]=r;for(var s=-(t-1);s<=-e;s++)u[32767+s]=n,A[32767+s]=[],A[32767+s][1]=n,A[32767+s][0]=t-1+s;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),U(e)}function w_(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N_(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,s){for(var a=0;a<s;a++)e[t+a]=n[r+a]}function s(e,t,n,r){for(var s=0;s<r;s++)e[t+s]=n}function a(e){return new Int32Array(e)}function i(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,s){for(var a=s[r],i=0;i<a&&(n.push(s.length>r+1?[]:new t),!(s.length<r+1));i++)e(n[i],r+1,s)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,s,a){t(!(s%r));do{e[n+(s-=r)]=a}while(0<s)}function d(e,n,r,s,i){if(t(2328>=i),512>=i)var o=a(512);else if(null==(o=a(i)))return 0;return function(e,n,r,s,i,o){var d,u,h=n,m=1<<r,p=a(16),f=a(16);for(t(0!=i),t(null!=s),t(null!=e),t(0<r),u=0;u<i;++u){if(15<s[u])return 0;++p[s[u]]}if(p[0]==i)return 0;for(f[1]=0,d=1;15>d;++d){if(p[d]>1<<d)return 0;f[d+1]=f[d]+p[d]}for(u=0;u<i;++u)d=s[u],0<s[u]&&(o[f[d]++]=u);if(1==f[15])return(s=new A).g=0,s.value=o[0],c(e,h,1,m,s),m;var g,x=-1,b=m-1,y=0,v=1,w=1,N=1<<r;for(u=0,d=1,i=2;d<=r;++d,i<<=1){if(v+=w<<=1,0>(w-=p[d]))return 0;for(;0<p[d];--p[d])(s=new A).g=d,s.value=o[u++],c(e,h+y,i,N,s),y=l(y,d)}for(d=r+1,i=2;15>=d;++d,i<<=1){if(v+=w<<=1,0>(w-=p[d]))return 0;for(;0<p[d];--p[d]){if(s=new A,(y&b)!=x){for(h+=N,g=1<<(x=d)-r;15>x&&!(0>=(g-=p[x]));)++x,g<<=1;m+=N=1<<(g=x-r),e[n+(x=y&b)].g=g+r,e[n+x].value=h-n-x}s.g=d-r,s.value=o[u++],c(e,h+(y>>r),i,N,s),y=l(y,d)}}return v!=2*f[15]-1?0:m}(e,n,r,s,i,o)}function A(){this.value=this.g=0}function u(){this.value=this.g=0}function h(){this.G=i(5,A),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(On,u)}function m(e,n,r,s){t(null!=e),t(null!=n),t(2147483648>s),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+s,e.Zc=4<=s?r+s-4+1:r,B(e)}function p(e,t){for(var n=0;0<t--;)n|=E(e,128)<<t;return n}function f(e,t){var n=p(e,t);return S(e)?-n:n}function g(e,n,r,s){var a,i=0;for(t(null!=e),t(null!=n),t(4294967288>s),e.Sb=s,e.Ra=0,e.u=0,e.h=0,4<s&&(s=4),a=0;a<s;++a)i+=n[r+a]<<8*a;e.Ra=i,e.bb=s,e.oa=n,e.pa=r}function x(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Hn-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=Rn){var r=w(e)&Qn[n];return e.u+=n,x(e),r}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function v(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Hn-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Hn}function j(e,t){e.u=t,e.h=N(e)}function C(e){e.u>=Mn&&(t(e.u>=Mn),x(e))}function B(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function S(e){return p(e,1)}function E(e,t){var n=e.Ca;0>e.b&&B(e);var r=e.b,s=n*t>>>8,a=(e.I>>>r>s)+0;for(a?(n-=s,e.I-=s+1<<r>>>0):n=s+1,r=n,s=0;256<=r;)s+=8,r>>=8;return r=7^s+Vn[r],e.b-=r,e.Ca=(n<<r)-1,a}function k(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function F(e,t){return e[t+0]|e[t+1]<<8}function I(e,t){return F(e,t)|e[t+2]<<16}function T(e,t){return F(e,t)|F(e,t+2)<<16}function D(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=a(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function L(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function _(){this.X=[],this.Xa=this.Mb=0}function P(e,n,r,s){t(null!=r),t(null!=s);var a=r[0],i=s[0];return 0==a&&(a=(e*i+n/2)/n),0==i&&(i=(n*a+e/2)/e),0>=a||0>=i?0:(r[0]=a,s[0]=i,1)}function U(e,t){return e+(1<<t)-1>>>t}function O(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function Q(t,n){e[n]=function(n,r,s,a,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],s,a+c);o[l+c]=O(n[r+c],d)}}}function R(){this.ud=this.hd=this.jd=0}function H(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function M(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function V(e,t){return M(e+(e-t+.5>>1))}function z(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function K(e,t,n,r,s,a,i){for(r=a[i-1],n=0;n<s;++n)a[i+n]=r=O(e[t+n],r)}function q(e,t,n,r,s){var a;for(a=0;a<n;++a){var i=e[t+a],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));r[s+a]=(4278255360&i)+l>>>0}}function G(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function W(e,t,n,r,s,a){var i;for(i=0;i<r;++i){var o=t[n+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),s[a+i]=(4278255360&o)+(d<<16)+c}}function Y(t,n,r,s,a){e[n]=function(e,t,n,r,i,o,l,c,d){for(r=l;r<c;++r)for(l=0;l<d;++l)i[o++]=a(n[s(e[t++])])},e[t]=function(t,n,i,o,l,c,d){var A=8>>t.b,u=t.Ea,h=t.K[0],m=t.w;if(8>A)for(t=(1<<t.b)-1,m=(1<<A)-1;n<i;++n){var p,f=0;for(p=0;p<u;++p)p&t||(f=s(o[l++])),c[d++]=a(h[f&m]),f>>=A}else e["VP8LMapColor"+r](o,l,h,m,c,d,n,i,u)}}function X(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=a>>16&255,r[s++]=a>>8&255,r[s++]=255&a}}function J(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=a>>16&255,r[s++]=a>>8&255,r[s++]=255&a,r[s++]=a>>24&255}}function Z(e,t,n,r,s){for(n=t+n;t<n;){var a=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;r[s++]=a,r[s++]=i}}function $(e,t,n,r,s){for(n=t+n;t<n;){var a=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[s++]=a,r[s++]=i}}function ee(e,t,n,r,s){for(n=t+n;t<n;){var a=e[t++];r[s++]=255&a,r[s++]=a>>8&255,r[s++]=a>>16&255}}function te(e,t,n,s,a,i){if(0==i)for(n=t+n;t<n;)k(s,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),a+=32;else r(s,a,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==Mr||e==Vr||e==zr||e==Kr}function se(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new se,this.f.kb=new ae,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,s=t.ba.f.RGBA,a=s.eb,i=s.fb+e.ka*s.A,o=fs[t.ba.S],l=e.y,c=e.O,d=e.f,A=e.N,u=e.ea,h=e.W,m=t.cc,p=t.dc,f=t.Mc,g=t.Nc,x=e.ka,b=e.ka+e.T,y=e.U,v=y+1>>1;for(0==x?o(l,c,null,null,d,A,u,h,d,A,u,h,a,i,null,null,y):(o(t.ec,t.fc,l,c,m,p,f,g,d,A,u,h,a,i-s.A,a,i,y),++n);x+2<b;x+=2)m=d,p=A,f=u,g=h,A+=e.Rc,h+=e.Rc,i+=2*s.A,o(l,(c+=2*e.fa)-e.fa,l,c,m,p,f,g,d,A,u,h,a,i-s.A,a,i,y);return c+=e.fa,e.j+b<e.o?(r(t.ec,t.fc,l,c,y),r(t.cc,t.dc,d,A,v),r(t.Mc,t.Nc,u,h,v),n--):1&b||o(l,c,null,null,d,A,u,h,d,A,u,h,a,i+s.A,null,null,y),n}function Ae(e,n,r){var s=e.F,a=[e.J];if(null!=s){var i=e.U,o=n.ba.S,l=o==Qr||o==zr;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var A=n.eb;d=n.fb+d*n.A,e=jr(s,a[0],e.width,i,c,A,d+(l?0:3),n.A),t(r==c),e&&re(o)&&wr(A,d,l,i,c,n.A)}return 0}function ue(e){var t=e.ma,n=t.ba.S,r=11>n,s=n==Pr||n==Or||n==Qr||n==Rr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!_n(t.Oa,e,s?11:12))return 0;if(s&&re(n)&&xn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=a(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,xn()}}else alert("todo:EmitYUV");s&&(t.Jb=Ae,r&&fn())}if(r&&!Fs){for(e=0;256>e;++e)Is[e]=89858*(e-128)+Cs>>js,Ls[e]=-22014*(e-128)+Cs,Ds[e]=-45773*(e-128),Ts[e]=113618*(e-128)+Cs>>js;for(e=Bs;e<Ss;++e)t=76283*(e-16)+Cs>>js,_s[e-Bs]=Ke(t,255),Ps[e-Bs]=Ke(t+8>>4,15);Fs=1}return 1}function he(e){var n=e.ma,r=e.U,s=e.T;return t(!(1&e.ka)),0>=r||0>=s?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function me(e){e.ma.memory=null}function pe(e,t,n,r){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,r[0]=b(e,1),0!=b(e,3)?0:!e.h)}function fe(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function xe(e,t,n){var r=w(n),s=e[t+=255&r].g-8;return 0<s&&(j(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<s)-1),j(n,n.u+e[t].g),e[t].value}function be(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function ye(e,n,r){var s=e.xc;return t((n=0==s?0:e.vc[e.md*(r>>s)+(n>>s)])<e.Wb),e.Ya[n]}function ve(e,n,s,a){var i=e.ab,o=e.c*n,l=e.C;n=l+n;var c=s,d=a;for(a=e.Ta,s=e.Ua;0<i--;){var A=e.gc[i],u=l,h=n,m=c,p=d,f=(d=a,c=s,A.Ea);switch(t(u<h),t(h<=A.nc),A.hc){case 2:qn(m,p,(h-u)*f,d,c);break;case 0:var g=u,x=h,b=d,y=c,v=(B=A).Ea;0==g&&(zn(m,p,null,null,1,b,y),K(m,p+1,0,0,v-1,b,y+1),p+=v,y+=v,++g);for(var w=1<<B.b,N=w-1,j=U(v,B.b),C=B.K,B=B.w+(g>>B.b)*j;g<x;){var S=C,E=B,k=1;for(Kn(m,p,b,y-v,1,b,y);k<v;){var F=(k&~N)+w;F>v&&(F=v),(0,Jn[S[E++]>>8&15])(m,p+ +k,b,y+k-v,F-k,b,y+k),k=F}p+=v,y+=v,++g&N||(B+=j)}h!=A.nc&&r(d,c-f,d,c+(h-u-1)*f,f);break;case 1:for(f=m,x=p,v=(m=A.Ea)-(y=m&~(b=(p=1<<A.b)-1)),g=U(m,A.b),w=A.K,A=A.w+(u>>A.b)*g;u<h;){for(N=w,j=A,C=new R,B=x+y,S=x+m;x<B;)G(N[j++],C),Zn(C,f,x,p,d,c),x+=p,c+=p;x<S&&(G(N[j++],C),Zn(C,f,x,v,d,c),x+=v,c+=v),++u&b||(A+=g)}break;case 3:if(m==d&&p==c&&0<A.b){for(x=d,m=f=c+(h-u)*f-(y=(h-u)*U(A.Ea,A.b)),p=d,b=c,g=[],y=(v=y)-1;0<=y;--y)g[y]=p[b+y];for(y=v-1;0<=y;--y)x[m+y]=g[y];Gn(A,u,h,d,f,d,c)}else Gn(A,u,h,m,p,d,c)}c=a,d=s}d!=s&&r(a,s,c,d,o)}function we(e,n){var r=e.V,s=e.Ba+e.c*e.C,a=n-e.C;if(t(n<=e.l.o),t(16>=a),0<a){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(ve(e,a,r,s),a=l=[l],t((r=e.C)<(s=n)),t(i.v<i.va),s>i.o&&(s=i.o),r<i.j){var d=i.j-r;r=i.j,a[0]+=d*c}if(r>=s?r=0:(a[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=s-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var A=r.f.RGBA,u=(s=r.S,a=i.U,i=i.T,d=A.eb,A.A),h=i;for(A=A.fb+e.Ma*A.A;0<h--;){var m=o,p=l,f=a,g=d,x=A;switch(s){case _r:$n(m,p,f,g,x);break;case Pr:er(m,p,f,g,x);break;case Mr:er(m,p,f,g,x),wr(g,x,0,f,1,0);break;case Ur:rr(m,p,f,g,x);break;case Or:te(m,p,f,g,x,1);break;case Vr:te(m,p,f,g,x,1),wr(g,x,0,f,1,0);break;case Qr:te(m,p,f,g,x,0);break;case zr:te(m,p,f,g,x,0),wr(g,x,1,f,1,0);break;case Rr:tr(m,p,f,g,x);break;case Kr:tr(m,p,f,g,x),Nr(g,x,f,1,0);break;case Hr:nr(m,p,f,g,x);break;default:t(0)}l+=c,A+=u}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function je(e,n,r,s,a,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ps[e.Z]);n<r;++n)ps[e.Z](o,l,s,a,s,a,i),o=s,l=a,a+=i;e.qd=o,e.rd=l}}function Ce(e,n){var r=e.l.ma,s=0==r.Z||1==r.Z?e.l.j:e.C;if(s=e.C<s?s:e.C,t(n<=e.l.o),n>s){var a=e.l.width,i=r.ca,o=r.tb+a*s,l=e.V,c=e.Ba+e.c*s,d=e.gc;t(1==e.ab),t(3==d[0].hc),Yn(d[0],s,n,l,c,i,o),je(r,s,n,i,o,a)}e.C=e.Ma=n}function Be(e,n,r,s,a,i,o){var l=e.$/s,c=e.$%s,d=e.m,A=e.s,u=r+e.$,h=u;a=r+s*a;var m=r+s*i,p=280+A.ua,f=e.Pb?l:16777216,g=0<A.ua?A.Wa:null,x=A.wc,b=u<m?ye(A,c,l):null;t(e.C<i),t(m<=a);var y=!1;e:for(;;){for(;y||u<m;){var v=0;if(l>=f){var B=u-r;t((f=e).Pb),f.wd=f.m,f.xd=B,0<f.s.ua&&L(f.s.Wa,f.s.vb),f=l+$r}if(c&x||(b=ye(A,c,l)),t(null!=b),b.Qb&&(n[u]=b.qb,y=!0),!y)if(C(d),b.jc){v=d,B=n;var S=u,E=b.pd[w(v)&On-1];t(b.jc),256>E.g?(j(v,v.u+E.g),B[S]=E.value,v=0):(j(v,v.u+E.g-256),t(256<=E.value),v=E.value),0==v&&(y=!0)}else v=xe(b.G[0],b.H[0],d);if(d.h)break;if(y||256>v){if(!y)if(b.nd)n[u]=(b.qb|v<<8)>>>0;else{if(C(d),y=xe(b.G[1],b.H[1],d),C(d),B=xe(b.G[2],b.H[2],d),S=xe(b.G[3],b.H[3],d),d.h)break;n[u]=(S<<24|y<<16|v<<8|B)>>>0}if(y=!1,++u,++c>=s&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=g))for(;h<u;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else if(280>v){if(v=fe(v-256,d),B=xe(b.G[4],b.H[4],d),C(d),B=ge(s,B=fe(B,d)),d.h)break;if(u-r<B||a-u<v)break e;for(S=0;S<v;++S)n[u+S]=n[u+S-B];for(u+=v,c+=v;c>=s;)c-=s,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(u<=a),c&x&&(b=ye(A,c,l)),null!=g)for(;h<u;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else{if(!(v<p))break e;for(y=v-280,t(null!=g);h<u;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v;v=u,t(!(y>>>(B=g).Xa)),n[v]=B.X[y],y=!0}y||t(d.h==N(d))}if(e.Pb&&d.h&&u<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&L(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=u-r}return 1}return e.a=3,0}function Se(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ee(){var t=new an;return null==t?null:(t.a=0,t.xb=ms,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),qn=q,Zn=W,$n=X,er=J,tr=Z,nr=$,rr=ee,e.VP8LMapColor32b=Wn,e.VP8LMapColor8b=Xn,t)}function ke(e,n,r,o,l){var c=1,u=[e],m=[n],p=o.m,f=o.s,g=null,x=0;e:for(;;){if(r)for(;c&&b(p,1);){var y=u,v=m,N=o,B=1,S=N.m,E=N.gc[N.ab],k=b(S,2);if(N.Oc&1<<k)c=0;else{switch(N.Oc|=1<<k,E.hc=k,E.Ea=y[0],E.nc=v[0],E.K=[null],++N.ab,t(4>=N.ab),k){case 0:case 1:E.b=b(S,3)+2,B=ke(U(E.Ea,E.b),U(E.nc,E.b),0,N,E.K),E.K=E.K[0];break;case 3:var F,I=b(S,8)+1,T=16<I?0:4<I?1:2<I?2:3;if(y[0]=U(E.Ea,T),E.b=T,F=B=ke(I,1,0,N,E.K)){var L,_=I,P=E,Q=1<<(8>>P.b),R=a(Q);if(null==R)F=0;else{var H=P.K[0],M=P.w;for(R[0]=P.K[0][0],L=1;L<1*_;++L)R[L]=O(H[M+L],R[L-1]);for(;L<4*Q;++L)R[L]=0;P.K[0]=null,P.K[0]=R,F=1}}B=F;break;case 2:break;default:t(0)}c=B}}if(u=u[0],m=m[0],c&&b(p,1)&&!(c=1<=(x=b(p,4))&&11>=x)){o.a=3;break e}var V;if(V=c)t:{var z,K,q,G=o,W=u,Y=m,X=x,J=r,Z=G.m,$=G.s,ee=[null],te=1,ne=0,re=Zr[X];n:for(;;){if(J&&b(Z,1)){var se=b(Z,3)+2,ae=U(W,se),ie=U(Y,se),oe=ae*ie;if(!ke(ae,ie,0,G,ee))break n;for(ee=ee[0],$.xc=se,z=0;z<oe;++z){var le=ee[z]>>8&65535;ee[z]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(K=0;5>K;++K){var ce=Wr[K];!K&&0<X&&(ce+=1<<X),ne<ce&&(ne=ce)}var de=i(te*re,A),Ae=te,ue=i(Ae,h);if(null==ue)var he=null;else t(65536>=Ae),he=ue;var me=a(ne);if(null==he||null==me||null==de){G.a=1;break n}var pe=de;for(z=q=0;z<te;++z){var fe=he[z],ge=fe.G,xe=fe.H,ye=0,ve=1,we=0;for(K=0;5>K;++K){ce=Wr[K],ge[K]=pe,xe[K]=q,!K&&0<X&&(ce+=1<<X);r:{var Ne,je=ce,Ce=G,Ee=me,Fe=pe,Ie=q,Te=0,De=Ce.m,Le=b(De,1);if(s(Ee,0,0,je),Le){var _e=b(De,1)+1,Pe=b(De,1),Ue=b(De,0==Pe?1:8);Ee[Ue]=1,2==_e&&(Ee[Ue=b(De,8)]=1);var Oe=1}else{var Qe=a(19),Re=b(De,4)+4;if(19<Re){Ce.a=3;var He=0;break r}for(Ne=0;Ne<Re;++Ne)Qe[Xr[Ne]]=b(De,3);var Me=void 0,Ve=void 0,ze=Ce,Ke=Qe,qe=je,Ge=Ee,We=0,Ye=ze.m,Xe=8,Je=i(128,A);s:for(;d(Je,0,7,Ke,19);){if(b(Ye,1)){var Ze=2+2*b(Ye,3);if((Me=2+b(Ye,Ze))>qe)break s}else Me=qe;for(Ve=0;Ve<qe&&Me--;){C(Ye);var $e=Je[0+(127&w(Ye))];j(Ye,Ye.u+$e.g);var et=$e.value;if(16>et)Ge[Ve++]=et,0!=et&&(Xe=et);else{var tt=16==et,nt=et-16,rt=Gr[nt],st=b(Ye,qr[nt])+rt;if(Ve+st>qe)break s;for(var at=tt?Xe:0;0<st--;)Ge[Ve++]=at}}We=1;break s}We||(ze.a=3),Oe=We}(Oe=Oe&&!De.h)&&(Te=d(Fe,Ie,8,Ee,je)),Oe&&0!=Te?He=Te:(Ce.a=3,He=0)}if(0==He)break n;if(ve&&1==Yr[K]&&(ve=0==pe[q].g),ye+=pe[q].g,q+=He,3>=K){var it,ot=me[0];for(it=1;it<ce;++it)me[it]>ot&&(ot=me[it]);we+=ot}}if(fe.nd=ve,fe.Qb=0,ve&&(fe.qb=(ge[3][xe[3]+0].value<<24|ge[1][xe[1]+0].value<<16|ge[2][xe[2]+0].value)>>>0,0==ye&&256>ge[0][xe[0]+0].value&&(fe.Qb=1,fe.qb+=ge[0][xe[0]+0].value<<8)),fe.jc=!fe.Qb&&6>we,fe.jc){var lt,ct=fe;for(lt=0;lt<On;++lt){var dt=lt,At=ct.pd[dt],ut=ct.G[0][ct.H[0]+dt];256<=ut.value?(At.g=ut.g+256,At.value=ut.value):(At.g=0,At.value=0,dt>>=be(ut,8,At),dt>>=be(ct.G[1][ct.H[1]+dt],16,At),dt>>=be(ct.G[2][ct.H[2]+dt],0,At),be(ct.G[3][ct.H[3]+dt],24,At))}}}$.vc=ee,$.Wb=te,$.Ya=he,$.yc=de,V=1;break t}V=0}if(!(c=V)){o.a=3;break e}if(0<x){if(f.ua=1<<x,!D(f.Wa,x)){o.a=1,c=0;break e}}else f.ua=0;var ht=o,mt=u,pt=m,ft=ht.s,gt=ft.xc;if(ht.c=mt,ht.i=pt,ft.md=U(mt,gt),ft.wc=0==gt?-1:(1<<gt)-1,r){o.xb=hs;break e}if(null==(g=a(u*m))){o.a=1,c=0;break e}c=(c=Be(o,g,0,u,m,m,null))&&!p.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||Se(f)):Se(f),c}function Fe(e,n){var r=e.c*e.i,s=r+n+16*n;return t(e.c<=n),e.V=a(s),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Ie(e,n){var r=e.C,s=n-r,a=e.V,i=e.Ba+e.c*r;for(t(n<=e.l.o);0<s;){var o=16<s?16:s,l=e.l.ma,c=e.l.width,d=c*o,A=l.ca,u=l.tb+c*r,h=e.Ta,m=e.Ua;ve(e,o,a,i),Cr(h,m,A,u,d),je(l,r,r+o,A,u,c),s-=o,a+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Te(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Le(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function _e(){this.Yb=function(){var e=[];return function e(t,n,r){for(var s=r[n],a=0;a<s&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));a++)e(t[a],n+1,r)}(e,0,[3,11]),e}()}function Pe(){this.jb=a(3),this.Wc=o([4,8],_e),this.Xc=o([4,17],_e)}function Ue(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Oe(){this.ld=this.La=this.dd=this.tc=0}function Qe(){this.Na=this.la=0}function Re(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function He(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Me(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oe),this.Y=0,this.ya=Array(new He),this.aa=0,this.l=new qe}function Ve(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ze(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new Te,this.Kc=new De,this.ed=new Ue,this.Qa=new Le,this.Ic=this.$c=this.Aa=0,this.D=new Me,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,Re),this.Pa=new Pe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ve),this.Hd=0,this.rb=Array(new Qe),this.sb=0,this.wa=Array(new Oe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new He),this.L=this.aa=0,this.gd=o([4,2],Oe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ke(e,t){return 0>e?0:e>t?t:e}function qe(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new ze;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ns||(ns=Je)),e}function We(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Ye(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return We(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,a=n.w,i=n.ha;if(4>i)return We(e,7,"Truncated header.");var o=r[a+0]|r[a+1]<<8|r[a+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return We(e,3,"Incorrect keyframe parameters.");if(!l.yd)return We(e,4,"Frame not displayable.");a+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return We(e,7,"cannot parse picture header");if(!Ye(r,a,i))return We(e,3,"Bad code word");c.c=16383&(r[a+4]<<8|r[a+3]),c.Td=r[a+4]>>6,c.i=16383&(r[a+6]<<8|r[a+5]),c.Ud=r[a+6]>>6,a+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,s((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,s(o.Zb,0,0,o.Zb.length),s(o.Lb,0,0,o.Lb)}if(l.ub>i)return We(e,7,"bad partition length");m(o=e.m,r,a,l.ub),a+=l.ub,i-=l.ub,l.Rb&&(c.Ld=S(o),c.Kd=S(o)),c=e.Qa;var d,A=e.Pa;if(t(null!=o),t(null!=c),c.Cb=S(o),c.Cb){if(c.Bb=S(o),S(o)){for(c.Fb=S(o),d=0;4>d;++d)c.Zb[d]=S(o)?f(o,7):0;for(d=0;4>d;++d)c.Lb[d]=S(o)?f(o,6):0}if(c.Bb)for(d=0;3>d;++d)A.jb[d]=S(o)?p(o,8):255}else c.Bb=0;if(o.Ka)return We(e,3,"cannot parse segment header");if((c=e.ed).zd=S(o),c.Tb=p(o,6),c.wb=p(o,3),c.Pc=S(o),c.Pc&&S(o)){for(A=0;4>A;++A)S(o)&&(c.vd[A]=f(o,6));for(A=0;4>A;++A)S(o)&&(c.od[A]=f(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return We(e,3,"cannot parse filter header");var u=i;if(i=d=a,a=d+u,c=u,e.Xb=(1<<p(e.m,2))-1,u<3*(A=e.Xb))r=7;else{for(d+=3*A,c-=3*A,u=0;u<A;++u){var h=r[i+0]|r[i+1]<<8|r[i+2]<<16;h>c&&(h=c),m(e.Jc[+u],r,d,h),d+=h,c-=h,i+=3}m(e.Jc[+A],r,d,c),r=d<a?0:5}if(0!=r)return We(e,r,"cannot parse partitions");for(r=p(d=e.m,7),i=S(d)?f(d,4):0,a=S(d)?f(d,4):0,c=S(d)?f(d,4):0,A=S(d)?f(d,4):0,d=S(d)?f(d,4):0,u=e.Qa,h=0;4>h;++h){if(u.Cb){var g=u.Zb[h];u.Fb||(g+=r)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=r}var x=e.pb[h];x.Sc[0]=es[Ke(g+i,127)],x.Sc[1]=ts[Ke(g+0,127)],x.Eb[0]=2*es[Ke(g+a,127)],x.Eb[1]=101581*ts[Ke(g+c,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=es[Ke(g+A,117)],x.Qc[1]=ts[Ke(g+d,127)],x.lc=g+d}if(!l.Rb)return We(e,4,"Not a key frame.");for(S(o),l=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(a=0;3>a;++a)for(c=0;11>c;++c)A=E(o,ls[r][i][a][c])?p(o,8):is[r][i][a][c],l.Wc[r][i].Yb[a][c]=A;for(i=0;17>i;++i)l.Xc[r][i]=l.Wc[r][cs[i]]}return e.kc=S(o),e.kc&&(e.Bd=p(o,8)),e.cb=1}function Je(e,t,n,r,s,a,i){var o=t[s].Yb[n];for(n=0;16>s;++s){if(!E(e,o[n+0]))return s;for(;!E(e,o[n+1]);)if(o=t[++s].Yb[0],n=0,16==s)return 16;var l=t[s+1].Yb;if(E(e,o[n+2])){var c=e,d=0;if(E(c,(u=o)[(A=n)+3]))if(E(c,u[A+6])){for(o=0,A=2*(d=E(c,u[A+8]))+(u=E(c,u[A+9+d])),d=0,u=rs[A];u[o];++o)d+=d+E(c,u[o]);d+=3+(8<<A)}else E(c,u[A+7])?(d=7+2*E(c,165),d+=E(c,145)):d=5+E(c,159);else d=E(c,u[A+4])?3+E(c,u[A+5]):2;o=l[2]}else d=1,o=l[1];l=i+ss[s],0>(c=e).b&&B(c);var A,u=c.b,h=(A=c.Ca>>1)-(c.I>>u)>>31;--c.b,c.Ca+=h,c.Ca|=1,c.I-=(A+1&h)<<u,a[l]=((d^h)-h)*r[(0<s)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,s(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,t,n,r,s){s=e[t+n+32*r]+(s>>3),e[t+n+32*r]=-256&s?0>s?0:255:s}function et(e,t,n,r,s,a){$e(e,t,0,n,r+s),$e(e,t,1,n,r+a),$e(e,t,2,n,r-a),$e(e,t,3,n,r-s)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var s,i=0,o=a(16);for(s=0;4>s;++s){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-tt(e[t+12]),A=tt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+A,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-A,i+=4,t++}for(s=i=0;4>s;++s)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-tt(o[i+12]),$e(n,r,0,0,l+(A=tt(o[i+4])+(35468*o[i+12]>>16))),$e(n,r,1,0,c+d),$e(n,r,2,0,c-d),$e(n,r,3,0,l-A),i++,r+=32}function rt(e,t,n,r){var s=e[t+0]+4,a=35468*e[t+4]>>16,i=tt(e[t+4]),o=35468*e[t+1]>>16;et(n,r,0,s+i,e=tt(e[t+1]),o),et(n,r,1,s+a,e,o),et(n,r,2,s-a,e,o),et(n,r,3,s-i,e,o)}function st(e,t,n,r,s){nt(e,t,n,r),s&&nt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function it(e,t,n,r){var s;for(e=e[t+0]+4,s=0;4>s;++s)for(t=0;4>t;++t)$e(n,r,t,s,e)}function ot(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var s,i=a(16);for(s=0;4>s;++s){var o=e[t+0+s]+e[t+12+s],l=e[t+4+s]+e[t+8+s],c=e[t+4+s]-e[t+8+s],d=e[t+0+s]-e[t+12+s];i[0+s]=o+l,i[8+s]=o-l,i[4+s]=d+c,i[12+s]=d-c}for(s=0;4>s;++s)o=(e=i[0+4*s]+3)+i[3+4*s],l=i[1+4*s]+i[2+4*s],c=i[1+4*s]-i[2+4*s],d=e-i[3+4*s],n[r+0]=o+l>>3,n[r+16]=d+c>>3,n[r+32]=o-l>>3,n[r+48]=d-c>>3,r+=64}function ct(e,t,n){var r,s=t-32,a=Dr,i=255-e[s-1];for(r=0;r<n;++r){var o,l=a,c=i+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[s+o]];t+=32}}function dt(e,t){ct(e,t,4)}function At(e,t){ct(e,t,8)}function ut(e,t){ct(e,t,16)}function ht(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function mt(e,t){var n;for(n=16;0<n;--n)s(e,t,e[t-1],16),t+=32}function pt(e,t,n){var r;for(r=0;16>r;++r)s(t,n+32*r,e,16)}function ft(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];pt(r>>5,e,t)}function gt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];pt(r>>4,e,t)}function xt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];pt(r>>4,e,t)}function bt(e,t){pt(128,e,t)}function yt(e,t,n){return e+2*t+n+2>>2}function vt(e,t){var n,s=t-32;for(s=new Uint8Array([yt(e[s-1],e[s+0],e[s+1]),yt(e[s+0],e[s+1],e[s+2]),yt(e[s+1],e[s+2],e[s+3]),yt(e[s+2],e[s+3],e[s+4])]),n=0;4>n;++n)r(e,t+32*n,s,0,s.length)}function wt(e,t){var n=e[t-1],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96];k(e,t+0,16843009*yt(e[t-1-32],n,r)),k(e,t+32,16843009*yt(n,r,s)),k(e,t+64,16843009*yt(r,s,a)),k(e,t+96,16843009*yt(s,a,a))}function Nt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)s(e,t+32*n,r,4)}function jt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=yt(r,s,e[t-1+96]),e[t+1+96]=e[t+0+64]=yt(n,r,s),e[t+2+96]=e[t+1+64]=e[t+0+32]=yt(a,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=yt(i,a,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=yt(o,i,a),e[t+3+32]=e[t+2+0]=yt(l,o,i),e[t+3+0]=yt(c,l,o)}function Ct(e,t){var n=e[t+1-32],r=e[t+2-32],s=e[t+3-32],a=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=yt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=yt(n,r,s),e[t+2+0]=e[t+1+32]=e[t+0+64]=yt(r,s,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=yt(s,a,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=yt(a,i,o),e[t+3+64]=e[t+2+96]=yt(i,o,l),e[t+3+96]=yt(o,l,l)}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=a+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=yt(s,r,n),e[t+0+64]=yt(r,n,a),e[t+0+32]=e[t+1+96]=yt(n,a,i),e[t+1+32]=e[t+2+96]=yt(a,i,o),e[t+2+32]=e[t+3+96]=yt(i,o,l),e[t+3+32]=yt(o,l,c)}function St(e,t){var n=e[t+0-32],r=e[t+1-32],s=e[t+2-32],a=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+s+1>>1,e[t+2+0]=e[t+1+64]=s+a+1>>1,e[t+3+0]=e[t+2+64]=a+i+1>>1,e[t+0+32]=yt(n,r,s),e[t+1+32]=e[t+0+96]=yt(r,s,a),e[t+2+32]=e[t+1+96]=yt(s,a,i),e[t+3+32]=e[t+2+96]=yt(a,i,o),e[t+3+64]=yt(i,o,l),e[t+3+96]=yt(o,l,c)}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+s+1>>1,e[t+2+32]=e[t+0+64]=s+a+1>>1,e[t+1+0]=yt(n,r,s),e[t+3+0]=e[t+1+32]=yt(r,s,a),e[t+3+32]=e[t+1+64]=yt(s,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function kt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],a=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=s+r+1>>1,e[t+0+96]=a+s+1>>1,e[t+3+0]=yt(o,l,c),e[t+2+0]=yt(i,o,l),e[t+1+0]=e[t+3+32]=yt(n,i,o),e[t+1+32]=e[t+3+64]=yt(r,n,i),e[t+1+64]=e[t+3+96]=yt(s,r,n),e[t+1+96]=yt(a,s,r)}function Ft(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function It(e,t){var n;for(n=0;8>n;++n)s(e,t,e[t-1],8),t+=32}function Tt(e,t,n){var r;for(r=0;8>r;++r)s(t,n+32*r,e,8)}function Dt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Tt(r>>4,e,t)}function Lt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Tt(r>>3,e,t)}function _t(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Tt(r>>3,e,t)}function Pt(e,t){Tt(128,e,t)}function Ut(e,t,n){var r=e[t-n],s=e[t+0],a=3*(s-r)+Ir[1020+e[t-2*n]-e[t+n]],i=Tr[112+(a+4>>3)];e[t-n]=Dr[255+r+Tr[112+(a+3>>3)]],e[t+0]=Dr[255+s-i]}function Ot(e,t,n,r){var s=e[t+0],a=e[t+n];return Lr[255+e[t-2*n]-e[t-n]]>r||Lr[255+a-s]>r}function Qt(e,t,n,r){return 4*Lr[255+e[t-n]-e[t+0]]+Lr[255+e[t-2*n]-e[t+n]]<=r}function Rt(e,t,n,r,s){var a=e[t-3*n],i=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],A=e[t+3*n];return 4*Lr[255+o-l]+Lr[255+i-c]>r?0:Lr[255+e[t-4*n]-a]<=s&&Lr[255+a-i]<=s&&Lr[255+i-o]<=s&&Lr[255+A-d]<=s&&Lr[255+d-c]<=s&&Lr[255+c-l]<=s}function Ht(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Qt(e,t+r,n,s)&&Ut(e,t+r,n)}function Mt(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Qt(e,t+r*n,1,s)&&Ut(e,t+r*n,1)}function Vt(e,t,n,r){var s;for(s=3;0<s;--s)Ht(e,t+=4*n,n,r)}function zt(e,t,n,r){var s;for(s=3;0<s;--s)Mt(e,t+=4,n,r)}function Kt(e,t,n,r,s,a,i,o){for(a=2*a+1;0<s--;){if(Rt(e,t,n,a,i))if(Ot(e,t,n,o))Ut(e,t,n);else{var l=e,c=t,d=n,A=l[c-2*d],u=l[c-d],h=l[c+0],m=l[c+d],p=l[c+2*d],f=27*(x=Ir[1020+3*(h-u)+Ir[1020+A-m]])+63>>7,g=18*x+63>>7,x=9*x+63>>7;l[c-3*d]=Dr[255+l[c-3*d]+x],l[c-2*d]=Dr[255+A+g],l[c-d]=Dr[255+u+f],l[c+0]=Dr[255+h-f],l[c+d]=Dr[255+m-g],l[c+2*d]=Dr[255+p-x]}t+=r}}function qt(e,t,n,r,s,a,i,o){for(a=2*a+1;0<s--;){if(Rt(e,t,n,a,i))if(Ot(e,t,n,o))Ut(e,t,n);else{var l=e,c=t,d=n,A=l[c-d],u=l[c+0],h=l[c+d],m=Tr[112+(4+(p=3*(u-A))>>3)],p=Tr[112+(p+3>>3)],f=m+1>>1;l[c-2*d]=Dr[255+l[c-2*d]+f],l[c-d]=Dr[255+A+p],l[c+0]=Dr[255+u-m],l[c+d]=Dr[255+h-f]}t+=r}}function Gt(e,t,n,r,s,a){Kt(e,t,n,1,16,r,s,a)}function Wt(e,t,n,r,s,a){Kt(e,t,1,n,16,r,s,a)}function Yt(e,t,n,r,s,a){var i;for(i=3;0<i;--i)qt(e,t+=4*n,n,1,16,r,s,a)}function Xt(e,t,n,r,s,a){var i;for(i=3;0<i;--i)qt(e,t+=4,1,n,16,r,s,a)}function Jt(e,t,n,r,s,a,i,o){Kt(e,t,s,1,8,a,i,o),Kt(n,r,s,1,8,a,i,o)}function Zt(e,t,n,r,s,a,i,o){Kt(e,t,1,s,8,a,i,o),Kt(n,r,1,s,8,a,i,o)}function $t(e,t,n,r,s,a,i,o){qt(e,t+4*s,s,1,8,a,i,o),qt(n,r+4*s,s,1,8,a,i,o)}function en(e,t,n,r,s,a,i,o){qt(e,t+4,1,s,8,a,i,o),qt(n,r+4,1,s,8,a,i,o)}function tn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new _,this.vb=new _,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new A}function an(){this.xb=this.a=0,this.l=new qe,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new v,this.Pb=0,this.wd=new v,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=i(4,rn),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new qe,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,s,a,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)s[a+t]=e+n[r+t]&255,e=s[a+t]}function cn(e,t,n,r,s,a,i){var o;if(null==e)ln(null,null,n,r,s,a,i);else for(o=0;o<i;++o)s[a+o]=e[t+o]+n[r+o]&255}function dn(e,t,n,r,s,a,i){if(null==e)ln(null,null,n,r,s,a,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,s[a+o]=d}}function An(e,n,s,i){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>s||0>=i||s+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new on,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=a(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,A=e.P,u=e.qc,h=e.mb,m=e.nb,p=A+1,f=u-1,x=c.l;if(t(null!=d&&null!=h&&null!=n),ps[0]=null,ps[1]=ln,ps[2]=cn,ps[3]=dn,c.ca=h,c.tb=m,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=u)n=0;else if(c.$a=3&d[A+0],c.Z=d[A+0]>>2&3,c.Lc=d[A+0]>>4&3,A=d[A+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||A)n=0;else if(x.put=he,x.ac=ue,x.bc=me,x.ma=c,x.width=n.width,x.height=n.height,x.Da=n.Da,x.v=n.v,x.va=n.va,x.j=n.j,x.o=n.o,c.$a)e:{t(1==c.$a),n=Ee();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,g(n.m,d,p,f),!ke(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=a(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Fe(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=f>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-s}t(null!=e.ga),t(s+i<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(p=e.rc,f=e.Vc,x=e.Fa,A=e.P+1+s*n,u=e.mb,h=e.nb+s*n,t(A<=e.P+e.qc),0!=d.Z)for(t(null!=ps[d.Z]),c=0;c<i;++c)ps[d.Z](p,f,x,A,u,h,n),p=u,f=h,h+=n,A+=n;else for(c=0;c<i;++c)r(u,h,x,A,n),p=u,f=h,h+=n,A+=n;e.rc=p,e.Vc=f}else{if(t(null!=d.mc),n=s+i,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||fn(),d.ic){d=c.V,p=c.Ba,f=c.c;var b=c.i,y=(x=1,A=c.$/f,u=c.$%f,h=c.m,m=c.s,c.$),v=f*b,w=f*n,j=m.wc,B=y<w?ye(m,u,A):null;t(y<=v),t(n<=b),t(Ne(m));t:for(;;){for(;!h.h&&y<w;){if(u&j||(B=ye(m,u,A)),t(null!=B),C(h),256>(b=xe(B.G[0],B.H[0],h)))d[p+y]=b,++y,++u>=f&&(u=0,++A<=n&&!(A%16)&&Ce(c,A));else{if(!(280>b)){x=0;break t}b=fe(b-256,h);var S,E=xe(B.G[4],B.H[4],h);if(C(h),!(y>=(E=ge(f,E=fe(E,h)))&&v-y>=b)){x=0;break t}for(S=0;S<b;++S)d[p+y+S]=d[p+y+S-E];for(y+=b,u+=b;u>=f;)u-=f,++A<=n&&!(A%16)&&Ce(c,A);y<w&&u&j&&(B=ye(m,u,A))}t(h.h==N(h))}Ce(c,A>n?n:A);break t}!x||h.h&&y<v?(x=0,c.a=h.h?5:3):c.$=y,n=x}else n=Be(c,c.V,c.Ba,c.c,c.i,n,Ie);if(!n){i=0;break e}}s+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+s*o}function un(e,t,n,r,s,a){for(;0<s--;){var i,o=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(i=0;i<r;++i){var A=c[d+4*i];255!=A&&(A*=32897,o[l+4*i+0]=o[l+4*i+0]*A>>23,o[l+4*i+1]=o[l+4*i+1]*A>>23,o[l+4*i+2]=o[l+4*i+2]*A>>23)}t+=a}}function hn(e,t,n,r,s){for(;0<r--;){var a;for(a=0;a<n;++a){var i=e[t+2*a+0],o=15&(c=e[t+2*a+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*a+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*a+1]=240&c|o}t+=s}}function mn(e,t,n,r,s,a,i,o){var l,c,d=255;for(c=0;c<s;++c){for(l=0;l<r;++l){var A=e[t+l];a[i+4*l]=A,d&=A}t+=n,i+=o}return 255!=d}function pn(e,t,n,r,s){var a;for(a=0;a<s;++a)n[r+a]=e[t+a]>>8}function fn(){wr=un,Nr=hn,jr=mn,Cr=pn}function gn(n,r,s){e[n]=function(e,n,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b){var y,v=b-1>>1,w=o[l+0]|c[d+0]<<16,N=A[u+0]|h[m+0]<<16;t(null!=e);var j=3*w+N+131074>>2;for(r(e[n+0],255&j,j>>16,p,f),null!=a&&(j=3*N+w+131074>>2,r(a[i+0],255&j,j>>16,g,x)),y=1;y<=v;++y){var C=o[l+y]|c[d+y]<<16,B=A[u+y]|h[m+y]<<16,S=w+C+N+B+524296,E=S+2*(C+N)>>3;j=E+w>>1,w=(S=S+2*(w+B)>>3)+C>>1,r(e[n+2*y-1],255&j,j>>16,p,f+(2*y-1)*s),r(e[n+2*y-0],255&w,w>>16,p,f+(2*y-0)*s),null!=a&&(j=S+N>>1,w=E+B>>1,r(a[i+2*y-1],255&j,j>>16,g,x+(2*y-1)*s),r(a[i+2*y+0],255&w,w>>16,g,x+(2*y+0)*s)),w=C,N=B}1&b||(j=3*w+N+131074>>2,r(e[n+b-1],255&j,j>>16,p,f+(b-1)*s),null!=a&&(j=3*N+w+131074>>2,r(a[i+b-1],255&j,j>>16,g,x+(b-1)*s)))}}function xn(){fs[_r]=gs,fs[Pr]=bs,fs[Ur]=xs,fs[Or]=ys,fs[Qr]=vs,fs[Rr]=ws,fs[Hr]=Ns,fs[Mr]=bs,fs[Vr]=ys,fs[zr]=vs,fs[Kr]=ws}function bn(e){return e&~ks?0>e?0:255:e>>Es}function yn(e,t){return bn((19077*e>>8)+(26149*t>>8)-14234)}function vn(e,t,n){return bn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function wn(e,t){return bn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,r,s){r[s+0]=yn(e,n),r[s+1]=vn(e,t,n),r[s+2]=wn(e,t)}function jn(e,t,n,r,s){r[s+0]=wn(e,t),r[s+1]=vn(e,t,n),r[s+2]=yn(e,n)}function Cn(e,t,n,r,s){var a=vn(e,t,n);t=a<<3&224|wn(e,t)>>3,r[s+0]=248&yn(e,n)|a>>5,r[s+1]=t}function Bn(e,t,n,r,s){var a=240&wn(e,t)|15;r[s+0]=240&yn(e,n)|vn(e,t,n)>>4,r[s+1]=a}function Sn(e,t,n,r,s){r[s+0]=255,Nn(e,t,n,r,s+1)}function En(e,t,n,r,s){jn(e,t,n,r,s),r[s+3]=255}function kn(e,t,n,r,s){Nn(e,t,n,r,s),r[s+3]=255}function Ke(e,t){return 0>e?0:e>t?t:e}function Fn(t,n,r){e[t]=function(e,t,s,a,i,o,l,c,d){for(var A=c+(-2&d)*r;c!=A;)n(e[t+0],s[a+0],i[o+0],l,c),n(e[t+1],s[a+0],i[o+0],l,c+r),t+=2,++a,++o,c+=2*r;1&d&&n(e[t+0],s[a+0],i[o+0],l,c)}}function In(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Tn(e,t,n,r,s){switch(e>>>30){case 3:ar(t,n,r,s,0);break;case 2:ir(t,n,r,s);break;case 1:lr(t,n,r,s)}}function Dn(e,t){var n,a,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,A=e.pc+584,u=e.oc,h=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[A+32*n-1]=129,u[h+32*n-1]=129;for(0<i?l[c-1-32]=d[A-1-32]=u[h-1-32]=129:(s(l,c-32-1,127,21),s(d,A-32-1,127,9),s(u,h-32-1,127,9)),a=0;a<e.za;++a){var m=t.ya[t.aa+a];if(0<a){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(d,A+32*n-4,d,A+32*n+4,4),r(u,h+32*n-4,u,h+32*n+4,4)}var p=e.Gd,f=e.Hd+a,g=m.ad,x=m.Hc;if(0<i&&(r(l,c-32,p[f].y,0,16),r(d,A-32,p[f].f,0,8),r(u,h-32,p[f].ea,0,8)),m.Za){var b=l,y=c-32+16;for(0<i&&(a>=e.za-1?s(b,y,p[f].y[15],4):r(b,y,p[f+1].y,0,4)),n=0;4>n;n++)b[y+128+n]=b[y+256+n]=b[y+384+n]=b[y+0+n];for(n=0;16>n;++n,x<<=2)b=l,y=c+Us[n],As[m.Ob[n]](b,y),Tn(x,g,16*+n,b,y)}else if(b=In(a,i,m.Ob[0]),ds[b](l,c),0!=x)for(n=0;16>n;++n,x<<=2)Tn(x,g,16*+n,l,c+Us[n]);for(n=m.Gc,b=In(a,i,m.Dd),us[b](d,A),us[b](u,h),x=g,b=d,y=A,255&(m=0|n)&&(170&m?or(x,256,b,y):cr(x,256,b,y)),m=u,x=h,255&(n>>=8)&&(170&n?or(g,320,m,x):cr(g,320,m,x)),i<e.Ub-1&&(r(p[f].y,0,l,c+480,16),r(p[f].f,0,d,A+224,8),r(p[f].ea,0,u,h+224,8)),n=8*o*e.B,p=e.sa,f=e.ta+16*a+16*o*e.R,g=e.qa,m=e.ra+8*a+n,x=e.Ha,b=e.Ia+8*a+n,n=0;16>n;++n)r(p,f+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(g,m+n*e.B,d,A+32*n,8),r(x,b+n*e.B,u,h+32*n,8)}}function Ln(e,r,s,a,i,o,l,c,d){var A=[0],u=[0],h=0,m=null!=d?d.kd:0,p=null!=d?d:new nn;if(null==e||12>s)return 7;p.data=e,p.w=r,p.ha=s,r=[r],s=[s],p.gb=[p.gb];e:{var f=r,x=s,b=p.gb;if(t(null!=e),t(null!=x),t(null!=b),b[0]=0,12<=x[0]&&!n(e,f[0],"RIFF")){if(n(e,f[0]+8,"WEBP")){b=3;break e}var y=T(e,f[0]+4);if(12>y||4294967286<y){b=3;break e}if(m&&y>x[0]-8){b=7;break e}b[0]=y,f[0]+=12,x[0]-=12}b=0}if(0!=b)return b;for(y=0<p.gb[0],s=s[0];;){e:{var w=e;x=r,b=s;var N=A,j=u,C=f=[0];if((E=h=[h])[0]=0,8>b[0])b=7;else{if(!n(w,x[0],"VP8X")){if(10!=T(w,x[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var B=T(w,x[0]+8),S=1+I(w,x[0]+12);if(2147483648<=S*(w=1+I(w,x[0]+15))){b=3;break e}null!=C&&(C[0]=B),null!=N&&(N[0]=S),null!=j&&(j[0]=w),x[0]+=18,b[0]-=18,E[0]=1}b=0}}if(h=h[0],f=f[0],0!=b)return b;if(x=!!(2&f),!y&&h)return 3;if(null!=o&&(o[0]=!!(16&f)),null!=l&&(l[0]=x),null!=c&&(c[0]=0),l=A[0],f=u[0],h&&x&&null==d){b=0;break}if(4>s){b=7;break}if(y&&h||!y&&!h&&!n(e,r[0],"ALPH")){s=[s],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{B=e,b=r,y=s;var E=p.gb;N=p.na,j=p.P,C=p.Sa,S=22,t(null!=B),t(null!=y),w=b[0];var k=y[0];for(t(null!=N),t(null!=C),N[0]=null,j[0]=null,C[0]=0;;){if(b[0]=w,y[0]=k,8>k){b=7;break e}var F=T(B,w+4);if(4294967286<F){b=3;break e}var D=8+F+1&-2;if(S+=D,0<E&&S>E){b=3;break e}if(!n(B,w,"VP8 ")||!n(B,w,"VP8L")){b=0;break e}if(k[0]<D){b=7;break e}n(B,w,"ALPH")||(N[0]=B,j[0]=w+8,C[0]=F),w+=D,k-=D}}if(s=s[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=b)break}s=[s],p.Ja=[p.Ja],p.xa=[p.xa];e:if(E=e,b=r,y=s,N=p.gb[0],j=p.Ja,C=p.xa,B=b[0],w=!n(E,B,"VP8 "),S=!n(E,B,"VP8L"),t(null!=E),t(null!=y),t(null!=j),t(null!=C),8>y[0])b=7;else{if(w||S){if(E=T(E,B+4),12<=N&&E>N-12){b=3;break e}if(m&&E>y[0]-8){b=7;break e}j[0]=E,b[0]+=8,y[0]-=8,C[0]=S}else C[0]=5<=y[0]&&47==E[B+0]&&!(E[B+4]>>5),j[0]=y[0];b=0}if(s=s[0],p.Ja=p.Ja[0],p.xa=p.xa[0],r=r[0],0!=b)break;if(4294967286<p.Ja)return 3;if(null==c||x||(c[0]=p.xa?2:1),l=[l],f=[f],p.xa){if(5>s){b=7;break}c=l,m=f,x=o,null==e||5>s?e=0:5<=s&&47==e[r+0]&&!(e[r+4]>>5)?(y=[0],E=[0],N=[0],g(j=new v,e,r,s),pe(j,y,E,N)?(null!=c&&(c[0]=y[0]),null!=m&&(m[0]=E[0]),null!=x&&(x[0]=N[0]),e=1):e=0):e=0}else{if(10>s){b=7;break}c=f,null==e||10>s||!Ye(e,r+3,s-3)?e=0:(m=e[r+0]|e[r+1]<<8|e[r+2]<<16,x=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&m||3<(m>>1&7)||!(m>>4&1)||m>>5>=p.Ja||!x||!e?e=0:(l&&(l[0]=x),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],f=f[0],h&&(A[0]!=l||u[0]!=f))return 3;null!=d&&(d[0]=p,d.offset=r-d.w,t(4294967286>r-d.w),t(d.offset==d.ha-s));break}return 0==b||7==b&&h&&null==d?(null!=o&&(o[0]|=null!=p.na&&0<p.na.length),null!=a&&(a[0]=l),null!=i&&(i[0]=f),0):b}function _n(e,t,n){var r=t.width,s=t.height,a=0,i=0,o=r,l=s;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,a=e.v,i=e.j,11>n||(a&=-2,i&=-2),0>a||0>i||0>=o||0>=l||a+o>r||i+l>s))return 0;if(t.v=a,t.j=i,t.va=a+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!P(o,l,n=[e.ib],a=[e.hb]))return 0;t.ib=n[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*s/4,t.Kb=0),1}function Pn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Un(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var s=n.cd,i=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=s||0>=i||o+s>e||l+i>t)return 2;e=s,t=i}if(n.da){if(!P(e,t,s=[n.ib],i=[n.hb]))return 2;e=s[0],t=i[0]}}r.width=e,r.height=t;e:{var c=r.width,d=r.height;if(e=r.S,0>=c||0>=d||!(e>=_r&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=i=s=t=0;var A=(l=c*Rs[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(s=c)*d)),null==(d=a(A+2*i+o))){e=1;break e}r.sd=d,11>e?((c=r.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=A):((c=r.f.kb).y=d,c.O=0,c.fa=l,c.Fd=A,c.f=d,c.N=0+A,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+A+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+A+2*i),c.Tc=o,c.lb=s)}if(t=1,s=r.S,i=r.width,o=r.height,s>=_r&&13>s)if(11>s)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Rs[s],t&=null!=e.eb;else{e=r.f.kb,l=(i+1)/2,A=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var u=Math.abs(e.Db),h=Math.abs(e.lb),m=h*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(A-1)+l<=e.Cd,t=(t&=u*(A-1)+l<=e.Ed)&c>=i&d>=l&u>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==s&&(t&=h>=i,t&=m<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Pn(r)),e}var On=64,Qn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rn=24,Hn=32,Mn=8,Vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Q("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return H(H(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return H(e,t[n-1])},e.Predictor7=function(e,t,n){return H(e,t[n+0])},e.Predictor8=function(e,t,n){return H(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return H(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return H(H(e,t[n-1]),H(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=z(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+z(r>>16&255,e>>16&255,t>>16&255)+z(r>>8&255,e>>8&255,t>>8&255)+z(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(M((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|M((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|M((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|M((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(V((e=H(e,t[n+0]))>>24&255,r>>24&255)<<24|V(e>>16&255,r>>16&255)<<16|V(e>>8&255,r>>8&255)<<8|V(255&e,255&r))>>>0};var zn=e.PredictorAdd0;e.PredictorAdd1=K,Q("Predictor2","PredictorAdd2"),Q("Predictor3","PredictorAdd3"),Q("Predictor4","PredictorAdd4"),Q("Predictor5","PredictorAdd5"),Q("Predictor6","PredictorAdd6"),Q("Predictor7","PredictorAdd7"),Q("Predictor8","PredictorAdd8"),Q("Predictor9","PredictorAdd9"),Q("Predictor10","PredictorAdd10"),Q("Predictor11","PredictorAdd11"),Q("Predictor12","PredictorAdd12"),Q("Predictor13","PredictorAdd13");var Kn=e.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var qn,Gn=e.ColorIndexInverseTransform,Wn=e.MapARGB,Yn=e.VP8LColorIndexInverseTransformAlpha,Xn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,$n,er,tr,nr,rr,sr,ar,ir,or,lr,cr,dr,Ar,ur,hr,mr,pr,fr,gr,xr,br,yr,vr,wr,Nr,jr,Cr,Br=a(511),Sr=a(2041),Er=a(225),kr=a(767),Fr=0,Ir=Sr,Tr=Er,Dr=kr,Lr=Br,_r=0,Pr=1,Ur=2,Or=3,Qr=4,Rr=5,Hr=6,Mr=7,Vr=8,zr=9,Kr=10,qr=[2,3,7],Gr=[3,3,11],Wr=[280,256,256,256,40],Yr=[0,1,1,1,0],Xr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$r=8,es=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ts=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ns=null,rs=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ss=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],is=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],os=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ls=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cs=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ds=[],As=[],us=[],hs=1,ms=2,ps=[],fs=[];gn("UpsampleRgbLinePair",Nn,3),gn("UpsampleBgrLinePair",jn,3),gn("UpsampleRgbaLinePair",kn,4),gn("UpsampleBgraLinePair",En,4),gn("UpsampleArgbLinePair",Sn,4),gn("UpsampleRgba4444LinePair",Bn,2),gn("UpsampleRgb565LinePair",Cn,2);var gs=e.UpsampleRgbLinePair,xs=e.UpsampleBgrLinePair,bs=e.UpsampleRgbaLinePair,ys=e.UpsampleBgraLinePair,vs=e.UpsampleArgbLinePair,ws=e.UpsampleRgba4444LinePair,Ns=e.UpsampleRgb565LinePair,js=16,Cs=1<<js-1,Bs=-227,Ss=482,Es=6,ks=(256<<Es)-1,Fs=0,Is=a(256),Ts=a(256),Ds=a(256),Ls=a(256),_s=a(Ss-Bs),Ps=a(Ss-Bs);Fn("YuvToRgbRow",Nn,3),Fn("YuvToBgrRow",jn,3),Fn("YuvToRgbaRow",kn,4),Fn("YuvToBgraRow",En,4),Fn("YuvToArgbRow",Sn,4),Fn("YuvToRgba4444Row",Bn,2),Fn("YuvToRgb565Row",Cn,2);var Us=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Os=[0,2,8],Qs=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,o,l,c){var d=Pr,A=new tn,u=new ie;A.ba=u,u.S=d,u.width=[u.width],u.height=[u.height];var h=u.width,m=u.height,p=new oe;if(null==p||null==e)var f=2;else t(null!=p),f=Ln(e,n,o,p.width,p.height,p.Pd,p.Qd,p.format,null);if(0!=f?h=0:(null!=h&&(h[0]=p.width[0]),null!=m&&(m[0]=p.height[0]),h=1),h){u.width=u.width[0],u.height=u.height[0],null!=l&&(l[0]=u.width),null!=c&&(c[0]=u.height);e:{if(l=new qe,(c=new nn).data=e,c.w=n,c.ha=o,c.kd=1,n=[0],t(null!=c),(0==(e=Ln(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=A),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=he,l.ac=ue,l.bc=me,l.ma=A,c.xa){if(null==(e=Ee())){A=1;break e}if(function(e,n){var r=[0],s=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!pe(e.m,r,s,a)){e.a=3;break t}if(e.xb=ms,n.width=r[0],n.height=s[0],!ke(r[0],s[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Un(l.width,l.height,A.Oa,A.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!_n(c.Oa,o,Or)){l.a=2;break n}if(!Fe(l,o.width))break n;if(o.da)break n;if((o.da||re(l.ca.S))&&fn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&fn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!D(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Be(l,l.V,l.Ba,l.c,l.i,o.o,we))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){A=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,Xe(e,l)){if(0==(n=Un(l.width,l.height,A.Oa,A.ba))){if(e.Aa=0,o=A.Oa,t(null!=(c=e)),null!=o){if(0<(h=0>(h=o.Md)?0:100<h?255:255*h/100)){for(m=p=0;4>m;++m)12>(f=c.pb[m]).lc&&(f.ia=h*Qs[0>f.lc?0:f.lc]>>3),p|=f.ia;p&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return We(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Os[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var A=e.gd[o][c],u=d;if(l.Pc&&(u+=l.vd[0],c&&(u+=l.od[0])),0<(u=0>u?0:63<u?63:u)){var h=u;0<l.wb&&(h=4<l.wb?h>>2:h>>1)>9-l.wb&&(h=9-l.wb),1>h&&(h=1),A.dd=h,A.tc=2*u+h,A.ld=40<=u?2:15<=u?1:0}else A.tc=0;A.La=c}}}o=0}else We(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(h=e.za);var m=32*h,p=h+1,f=0<e.L?h*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*h;if((A=l+832+(c=3*(16*o+Os[e.L])/2*m)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=A)o=0;else{if(A>e.Vb){if(e.Vb=0,e.Ec=a(A),e.Fc=0,null==e.Ec){o=We(e,1,"no memory during frame initialization.");break t}e.Vb=A}A=e.Ec,u=e.Fc,e.Ac=A,e.Bc=u,u+=l,e.Gd=i(m,Ve),e.Hd=0,e.rb=i(p+1,Qe),e.sb=1,e.wa=f?i(f,Oe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=A,e.pc=u,u+=832,e.ya=i(g,He),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(m=Os[e.L])*e.R,m=m/2*e.B,e.sa=A,e.ta=u+h,e.qa=e.sa,e.ra=e.ta+16*o*e.R+m,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+m,e.$c=0,u+=c,e.mb=d?A:null,e.nb=d?u:null,t(u+d<=e.Fc+e.Vb),Ze(e),s(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Fr){for(o=-255;255>=o;++o)Br[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Sr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Er[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)kr[255+o]=0>o?0:255<o?255:o;Fr=1}sr=lt,ar=st,or=at,lr=it,cr=ot,ir=rt,dr=Gt,Ar=Wt,ur=Jt,hr=Zt,mr=Yt,pr=Xt,fr=$t,gr=en,xr=Ht,br=Mt,yr=Vt,vr=zt,As[0]=Nt,As[1]=dt,As[2]=vt,As[3]=wt,As[4]=jt,As[5]=Bt,As[6]=Ct,As[7]=St,As[8]=kt,As[9]=Et,ds[0]=ft,ds[1]=ut,ds[2]=ht,ds[3]=mt,ds[4]=gt,ds[5]=xt,ds[6]=bt,us[0]=Dt,us[1]=At,us[2]=Ft,us[3]=It,us[4]=_t,us[5]=Lt,us[6]=Pt,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,A=c,u=A.Ac,h=A.Bc+4*i,m=A.zc,p=A.ya[A.aa+i];if(A.Qa.Bb?p.$b=E(d,A.Pa.jb[0])?2+E(d,A.Pa.jb[2]):E(d,A.Pa.jb[1]):p.$b=0,A.kc&&(p.Ad=E(d,A.Bd)),p.Za=!E(d,145)+0,p.Za){var f=p.Ob,g=0;for(A=0;4>A;++A){var x,b=m[0+A];for(x=0;4>x;++x){b=os[u[h+x]][b];for(var y=as[E(d,b[0])];0<y;)y=as[2*y+E(d,b[y])];b=-y,u[h+x]=b}r(f,g,u,h,4),g+=4,m[0+A]=b}}else b=E(d,156)?E(d,128)?1:3:E(d,163)?2:0,p.Ob[0]=b,s(u,h,b,4),s(m,0,b,4);p.Dd=E(d,142)?E(d,114)?E(d,183)?1:3:2:0}if(c.m.Ka)return We(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],u=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],h=l.kc?i.Ad:0)d.la=u.la=0,i.Za||(d.Na=u.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var v,w;if(d=u,u=c,h=l.Pa.Xc,m=l.ya[l.aa+l.ja],p=l.pb[m.$b],A=m.ad,f=0,g=l.rb[l.sb-1],b=x=0,s(A,f,0,384),m.Za)var N=0,j=h[3];else{y=a(16);var C=d.Na+g.Na;if(C=ns(u,h[1],C,p.Eb,0,y,0),d.Na=g.Na=(0<C)+0,1<C)sr(y,0,A,f);else{var B=y[0]+3>>3;for(y=0;256>y;y+=16)A[f+y]=B}N=1,j=h[0]}var S=15&d.la,k=15&g.la;for(y=0;4>y;++y){var F=1&k;for(B=w=0;4>B;++B)S=S>>1|(F=(C=ns(u,j,C=F+(1&S),p.Sc,N,A,f))>N)<<7,w=w<<2|(3<C?3:1<C?2:0!=A[f+0]),f+=16;S>>=4,k=k>>1|F<<7,x=(x<<8|w)>>>0}for(j=S,N=k>>4,v=0;4>v;v+=2){for(w=0,S=d.la>>4+v,k=g.la>>4+v,y=0;2>y;++y){for(F=1&k,B=0;2>B;++B)C=F+(1&S),S=S>>1|(F=0<(C=ns(u,h[2],C,p.Qc,0,A,f)))<<3,w=w<<2|(3<C?3:1<C?2:0!=A[f+0]),f+=16;S>>=2,k=k>>1|F<<5}b|=w<<4*v,j|=S<<4<<v,N|=(240&k)<<v}d.la=j,g.la=N,m.Hc=x,m.Gc=b,m.ia=43690&b?0:p.ia,h=!(x|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!h),c.Ka)return We(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(i.M=o.M,i.uc=d,Dn(o,i),c=1,i=(w=o.D).Nb,d=(b=Os[o.L])*o.R,u=b/2*o.B,y=16*i*o.R,B=8*i*o.B,h=o.sa,m=o.ta-d+y,p=o.qa,A=o.ra-u+B,f=o.Ha,g=o.Ia-u+B,k=0==(S=w.M),x=S>=o.Va-1,2==o.Aa&&Dn(o,w),w.uc)for(F=(C=o).D.M,t(C.D.uc),w=C.yb;w<C.Hb;++w){N=w,j=F;var I=(T=(H=C).D).Nb;v=H.R;var T=T.wa[T.Y+N],D=H.sa,L=H.ta+16*I*v+16*N,_=T.dd,P=T.tc;if(0!=P)if(t(3<=P),1==H.L)0<N&&br(D,L,v,P+4),T.La&&vr(D,L,v,P),0<j&&xr(D,L,v,P+4),T.La&&yr(D,L,v,P);else{var U=H.B,O=H.qa,Q=H.ra+8*I*U+8*N,R=H.Ha,H=H.Ia+8*I*U+8*N;I=T.ld,0<N&&(Ar(D,L,v,P+4,_,I),hr(O,Q,R,H,U,P+4,_,I)),T.La&&(pr(D,L,v,P,_,I),gr(O,Q,R,H,U,P,_,I)),0<j&&(dr(D,L,v,P+4,_,I),ur(O,Q,R,H,U,P+4,_,I)),T.La&&(mr(D,L,v,P,_,I),fr(O,Q,R,H,U,P,_,I))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*S,S=16*(S+1),k?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+B,l.ea=o.Ha,l.W=o.Ia+B):(w-=b,l.y=h,l.O=m,l.f=p,l.N=A,l.ea=f,l.W=g),x||(S-=b),S>l.o&&(S=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&w<S&&(l.J=An(o,l,w,S-w),l.F=o.mb,null==l.F&&0==l.F.length)){c=We(o,3,"Could not decode alpha data.");break t}w<l.j&&(b=l.j-w,w=l.j,t(!(1&b)),l.O+=o.R*b,l.N+=o.B*(b>>1),l.W+=o.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),w<S&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=S-w,c=l.put(l))}i+1!=o.Ic||x||(r(o.sa,o.ta-d,h,m+16*o.R,d),r(o.qa,o.ra-u,p,A+8*o.B,u),r(o.Ha,o.Ia-u,f,g+8*o.B,u))}if(!c)return We(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=A.Oa&&A.Oa.fd&&(n=Pn(A.ba))}A=n}d=0!=A?null:11>d?u.f.RGBA.eb:u.f.kb.y}else d=null;return d};var Rs=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return e[t+0]|e[t+1]<<8}function A(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],m=[0],p=[],f=new l,g=e,x=function(e,t){var n={},r=0,s=!1,a=0,i=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(u(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=u(e,t+=4);t+=4;var h=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(f=n.frames[r]).src_off=s?i:t-8,f.src_size=a+l+8,r++,s&&(s=!1,a=0,i=0);break;case"VP8X":(f=n.header={}).feature_flags=e[t];var m=t+4;f.canvas_width=1+A(e,m),m+=3,f.canvas_height=1+A(e,m),m+=3;break;case"ALPH":s=!0,a=h+8,i=t-8;break;case"ANIM":(f=n.header).bgcolor=u(e,t),m=t+4,f.loop_count=d(e,m),m+=2;break;case"ANMF":var p,f;(f=n.frames[r]={}).offset_x=2*A(e,t),t+=3,f.offset_y=2*A(e,t),t+=3,f.width=1+A(e,t),t+=3,f.height=1+A(e,t),t+=3,f.duration=A(e,t),t+=3,p=e[t++],f.dispose=1&p,f.blend=p>>1&1}"ANMF"!=o&&(t+=h)}return n}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,y=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var v=0;v<y.length&&0!=y[v].blend;v++);}var w=y[0],N=f.WebPDecodeRGBA(g,w.src_off,w.src_size,m,h);w.rgba=N,w.imgwidth=m[0],w.imgheight=h[0];for(var j=0;j<m[0]*h[0]*4;j++)p[j]=N[j];return this.width=m,this.height=h,this.data=p,this}!function(e){var t,n,r,s,a,i,o,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var A=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var s=0;Object.defineProperty(this,"posX",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var A=[];Object.defineProperty(this,"ctxStack",{get:function(){return A},set:function(e){A=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=u(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=u(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null,m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(e){h=null,m=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],s=t[4];t[5];var a=t[6],i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(s)[2];s="px"===i?Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(s)*this.pdf.getFontSize()):Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(s);var o=function(e){var t,n,r=[],s=e.trim();if(""===s)return o_;if(s in WL)return[WL[s]];for(;""!==s;){switch(n=null,t=(s=XL(s)).charAt(0)){case'"':case"'":n=JL(s.substring(1),t);break;default:n=ZL(s)}if(null===n)return o_;if(r.push(n[0]),""!==(s=XL(n[1]))&&","!==s.charAt(0))return o_;s=s.replace(/^,/,"")}return r}(a);if(this.fontFaces){var l=function(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=KL(e[n]),s=r.family,a=r.stretch,i=r.style,o=r.weight;t[s]=t[s]||{},t[s][a]=t[s][a]||{},t[s][a][i]=t[s][a][i]||{},t[s][a][i][o]=r}return t}(n.concat(t))}return h}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}),d=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},GL,n.genericFontFamilies||{}),a=null,i=null,o=0;o<t.length;++o)if(s[(a=KL(t[o])).family]&&(a.family=s[a.family]),e.hasOwnProperty(a.family)){i=e[a.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+YL(a)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var n=ML[e],r=n<=ML.normal?-1:1,s=qL(t,HL,n,r);if(!s)throw new Error("Could not find a matching font-stretch value for "+e);return s}(a.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=RL[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(a.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=zL[e],r=qL(t,VL,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+YL(a)+"'.");return i}(l,c);this.pdf.setFont(d.ref.name,d.ref.style)}else{var A="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(A="bold"),"italic"===n&&(A+="italic"),0===A.length&&(A="normal");for(var u="",m={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},p=0;p<o.length;p++){if(void 0!==this.pdf.internal.getFont(o[p],A,{noFallback:!0,disableWarning:!0})){u=o[p];break}if("bolditalic"===A&&void 0!==this.pdf.internal.getFont(o[p],"bold",{noFallback:!0,disableWarning:!0}))u=o[p],A="bold";else if(void 0!==this.pdf.internal.getFont(o[p],"normal",{noFallback:!0,disableWarning:!0})){u=o[p],A="normal";break}}if(""===u)for(var f=0;f<o.length;f++)if(m[o[f]]){u=m[o[f]];break}u=""===u?"Times":u,this.pdf.setFont(u,A)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,U.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,U.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};A.prototype.setLineDash=function(e){this.lineDash=e},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){y.call(this,"fill",!1)},A.prototype.stroke=function(){y.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw vD.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(e,t)},A.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,LN.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},A.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw vD.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new i(n.x,n.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),y.call(this,null,!0)},A.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw vD.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var s=this.ctx.transform.applyToPoint(new i(n,r)),a=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:s.x,y:s.y}),this.ctx.lastPoint=new i(s.x,s.y)},A.prototype.bezierCurveTo=function(e,t,n,r,s,a){if(isNaN(s)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vD.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new i(s,a)),l=this.ctx.transform.applyToPoint(new i(e,t)),c=this.ctx.transform.applyToPoint(new i(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new i(o.x,o.y)},A.prototype.arc=function(e,t,n,r,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s))throw vD.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new i(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new i(0,n)),c=this.ctx.transform.applyToPoint(new i(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(s-r)>=2*Math.PI&&(r=0,s=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:s,counterclockwise:a})},A.prototype.arcTo=function(e,t,n,r,s){throw new Error("arcTo not implemented.")},A.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vD.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},A.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vD.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var s={};"butt"!==this.lineCap&&(s.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(s.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),s.hasOwnProperty("lineCap")&&(this.lineCap=s.lineCap),s.hasOwnProperty("lineJoin")&&(this.lineJoin=s.lineJoin)}},A.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vD.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},A.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw vD.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},A.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},A.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var u=function(e){var t,n,r,s;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,s=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),s=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),s=parseFloat(a[4]);else{if(s=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new BD(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:s,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};A.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw vD.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){var s=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:a,angle:s,align:this.textAlign,maxWidth:r})}},A.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw vD.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){r=isNaN(r)?void 0:r;var s=L(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:a,renderingMode:"stroke",angle:s,align:this.textAlign,maxWidth:r})}},A.prototype.measureText=function(e){if("string"!=typeof e)throw vD.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),s=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:s*=Math.round(96*n/72*1e4)/1e4})},A.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw vD.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.rotate=function(e){if(isNaN(e))throw vD.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},A.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw vD.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.transform=function(e,t,n,r,s,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(a))throw vD.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new l(e,t,n,r,s,a);this.ctx.transform=this.ctx.transform.multiply(i)},A.prototype.setTransform=function(e,t,n,r,s,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,s=isNaN(s)?0:s,a=isNaN(a)?0:a,this.ctx.transform=new l(e,t,n,r,s,a)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(e,t,n,r,s,a,i,c,d){var A=this.pdf.getImageProperties(e),u=1,h=1,m=1,g=1;void 0!==r&&void 0!==c&&(m=c/r,g=d/s,u=A.width/r*c/r,h=A.height/s*d/s),void 0===a&&(a=t,i=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,d=s),void 0===r&&void 0===c&&(c=A.width,d=A.height);for(var y,w=this.ctx.transform.decompose(),N=L(w.rotate.shx),j=new l,C=(j=(j=(j=j.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new o(a-t*m,i-n*g,r*u,s*h)),B=f.call(this,C),S=[],E=0;E<B.length;E+=1)-1===S.indexOf(B[E])&&S.push(B[E]);if(b(S),this.autoPaging)for(var k=S[0],F=S[S.length-1],I=k;I<F+1;I++){this.pdf.setPage(I);var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],D=1===I?this.posY+this.margin[0]:this.margin[0],_=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],U=1===I?0:_+(I-2)*P;if(0!==this.ctx.clip_path.length){var O=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(y,this.posX+this.margin[3],-U+D+this.ctx.prevPageLastElemOffset),v.call(this,"fill",!0),this.path=O}var Q=JSON.parse(JSON.stringify(C));Q=x([Q],this.posX+this.margin[3],-U+D+this.ctx.prevPageLastElemOffset)[0];var R=(I>k||I<F)&&p.call(this);R&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,P,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",Q.x,Q.y,Q.w,Q.h,null,null,N),R&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,N)};var f=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var s=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+s)/n)+1);break;case"arc":r.push(Math.floor((e.y+s-e.radius)/n)+1),r.push(Math.floor((e.y+s+e.radius)/n)+1);break;case"qct":var a=_(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((a.y+s)/n)+1),r.push(Math.floor((a.y+a.h+s)/n)+1);break;case"bct":var i=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+s)/n)+1),r.push(Math.floor((i.y+i.h+s)/n)+1);break;case"rect":r.push(Math.floor((e.y+s)/n)+1),r.push(Math.floor((e.y+e.h+s)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,s=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=s,this.lineJoin=a},x=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},y=function(e,t){for(var n,r,s=this.fillStyle,a=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),A=JSON.parse(JSON.stringify(this.path)),u=[],h=0;h<A.length;h++)if(void 0!==A[h].x)for(var m=f.call(this,A[h]),y=0;y<m.length;y+=1)-1===u.indexOf(m[y])&&u.push(m[y]);for(var w=0;w<u.length;w++)for(;this.pdf.internal.getNumberOfPages()<u[w];)g.call(this);if(b(u),this.autoPaging)for(var N=u[0],j=u[u.length-1],C=N;C<j+1;C++){this.pdf.setPage(C),this.fillStyle=s,this.strokeStyle=a,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var B=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],S=1===C?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],k=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:E+(C-2)*k;if(0!==this.ctx.clip_path.length){var I=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(n,this.posX+this.margin[3],-F+S+this.ctx.prevPageLastElemOffset),v.call(this,e,!0),this.path=I}if(r=JSON.parse(JSON.stringify(d)),this.path=x(r,this.posX+this.margin[3],-F+S+this.ctx.prevPageLastElemOffset),!1===t||0===C){var T=(C>N||C<j)&&p.call(this);T&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],B,k,null).clip().discardPath()),v.call(this,e,t),T&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,v.call(this,e,t),this.lineWidth=o;this.path=d},v=function(e,t){if(("stroke"!==e||t||!m.call(this))&&("stroke"===e||t||!h.call(this))){for(var n,r,s=[],a=this.path,i=0;i<a.length;i++){var o=a[i];switch(o.type){case"begin":s.push({begin:!0});break;case"close":s.push({close:!0});break;case"mt":s.push({start:o,deltas:[],abs:[]});break;case"lt":var l=s.length;if(a[i-1]&&!isNaN(a[i-1].x)&&(n=[o.x-a[i-1].x,o.y-a[i-1].y],l>0))for(;l>=0;l--)if(!0!==s[l-1].close&&!0!==s[l-1].begin){s[l-1].deltas.push(n),s[l-1].abs.push(o);break}break;case"bct":n=[o.x1-a[i-1].x,o.y1-a[i-1].y,o.x2-a[i-1].x,o.y2-a[i-1].y,o.x-a[i-1].x,o.y-a[i-1].y],s[s.length-1].deltas.push(n);break;case"qct":var c=a[i-1].x+2/3*(o.x1-a[i-1].x),d=a[i-1].y+2/3*(o.y1-a[i-1].y),A=o.x+2/3*(o.x1-o.x),u=o.y+2/3*(o.y1-o.y),p=o.x,f=o.y;n=[c-a[i-1].x,d-a[i-1].y,A-a[i-1].x,u-a[i-1].y,p-a[i-1].x,f-a[i-1].y],s[s.length-1].deltas.push(n);break;case"arc":s.push({deltas:[],abs:[],arc:!0}),Array.isArray(s[s.length-1].abs)&&s[s.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,x=0;x<s.length;x++)if(s[x].arc)for(var b=s[x].abs,y=0;y<b.length;y++){var v=b[y];"arc"===v.type?j.call(this,v.x,v.y,v.radius,v.startAngle,v.endAngle,v.counterclockwise,void 0,t,!g):k.call(this,v.x,v.y),g=!0}else if(!0===s[x].close)this.pdf.internal.out("h"),g=!1;else if(!0!==s[x].begin){var w=s[x].start.x,N=s[x].start.y;F.call(this,s[x].deltas,w,N),g=!0}r&&C.call(this,r),t&&B.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},N=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(e,t,n,r,s,a,i,o,l){for(var c=T.call(this,n,r,s,a),d=0;d<c.length;d++){var A=c[d];0===d&&(l?S.call(this,A.x1+e,A.y1+t):k.call(this,A.x1+e,A.y1+t)),I.call(this,e,t,A.x2,A.y2,A.x3,A.y3,A.x4,A.y4)}o?B.call(this):C.call(this,i)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=w.call(this,e.y),s=N.call(this,r)-n.h,a=this.ctx.transform.applyToPoint(new i(e.x,r)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var A,u,h,m=this.ctx.transform.applyToRectangle(new o(e.x,r,n.w,n.h)),g=d.applyToRectangle(new o(e.x,s,n.w,n.h)),y=f.call(this,g),j=[],C=0;C<y.length;C+=1)-1===j.indexOf(y[C])&&j.push(y[C]);if(b(j),this.autoPaging)for(var B=j[0],S=j[j.length-1],E=B;E<S+1;E++){this.pdf.setPage(E);var k=1===E?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[2],T=I-this.margin[0],D=this.pdf.internal.pageSize.width-this.margin[1],L=D-this.margin[3],_=1===E?0:F+(E-2)*T;if(0!==this.ctx.clip_path.length){var P=this.path;A=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(A,this.posX+this.margin[3],-1*_+k),v.call(this,"fill",!0),this.path=P}var U=x([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-_+k+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(u=this.pdf.internal.getFontSize(),this.pdf.setFontSize(u*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var O="text"!==this.autoPaging;if(O||U.y+U.h<=I){if(O||U.y>=k&&U.x<=D){var Q=O?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||D-U.x)[0],R=x([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-_+k+this.ctx.prevPageLastElemOffset)[0],H=O&&(E>B||E<S)&&p.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,T,null).clip().discardPath()),this.pdf.text(Q,R.x,R.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),H&&this.pdf.restoreGraphicsState()}}else U.y<I&&(this.ctx.prevPageLastElemOffset+=I-U.y);e.scale>=.01&&(this.pdf.setFontSize(u),this.lineWidth=h)}else e.scale>=.01&&(u=this.pdf.internal.getFontSize(),this.pdf.setFontSize(u*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(u),this.lineWidth=h)},k=function(e,t,s,a){s=s||0,a=a||0,this.pdf.internal.out(n(e+s)+" "+r(t+a)+" l")},F=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},I=function(e,n,r,i,o,l,c,d){this.pdf.internal.out([t(s(r+e)),t(a(i+n)),t(s(o+e)),t(a(l+n)),t(s(c+e)),t(a(d+n)),"c"].join(" "))},T=function(e,t,n,r){for(var s=2*Math.PI,a=Math.PI/2;t>n;)t-=s;var i=Math.abs(n-t);i<s&&r&&(i=s-i);for(var o=[],l=r?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,a);o.push(D.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},D=function(e,t,n){var r=(n-t)/2,s=e*Math.cos(r),a=e*Math.sin(r),i=s,o=-a,l=i*i+o*o,c=l+i*s+o*a,d=4/3*(Math.sqrt(2*l*c)-c)/(i*a-o*s),A=i-d*o,u=o+d*i,h=A,m=-u,p=r+t,f=Math.cos(p),g=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:A*f-u*g,y2:A*g+u*f,x3:h*f-m*g,y3:h*g+m*f,x4:e*Math.cos(n),y4:e*Math.sin(n)}},L=function(e){return 180*e/Math.PI},_=function(e,t,n,r,s,a){var i=e+.5*(n-e),l=t+.5*(r-t),c=s+.5*(n-s),d=a+.5*(r-a),A=Math.min(e,s,i,c),u=Math.max(e,s,i,c),h=Math.min(t,a,l,d),m=Math.max(t,a,l,d);return new o(A,h,u-A,m-h)},P=function(e,t,n,r,s,a,i,l){var c,d,A,u,h,m,p,f,g,x,b,y,v,w,N=n-e,j=r-t,C=s-n,B=a-r,S=i-s,E=l-a;for(d=0;d<41;d++)g=(p=(A=e+(c=d/40)*N)+c*((h=n+c*C)-A))+c*(h+c*(s+c*S-h)-p),x=(f=(u=t+c*j)+c*((m=r+c*B)-u))+c*(m+c*(a+c*E-m)-f),0==d?(b=g,y=x,v=g,w=x):(b=Math.min(b,g),y=Math.min(y,x),v=Math.max(v,g),w=Math.max(w,x));return new o(Math.round(b),Math.round(y),Math.round(v-b),Math.round(w-y))},U=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(ZD.API),function(e){var t=function(e){var t,n,r,s,a,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],r=0,s=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;s>r;r+=4)0!==(a=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(a=((a=((a=((a=(a-(d=a%85))/85)-(c=a%85))/85)-(l=a%85))/85)-(o=a%85))/85)%85,n.push(i+33,o+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,s,a,i=String,o="length",l=255,c="charCodeAt",d="slice",A="replace";for(e[d](-2),e=e[d](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),r=[],s=0,a=(e+=t="uuuuu"[d](e[o]%5||5))[o];a>s;s+=5)n=52200625*(e[c](s)-33)+614125*(e[c](s+1)-33)+7225*(e[c](s+2)-33)+85*(e[c](s+3)-33)+(e[c](s+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),i.fromCharCode.apply(i,r)},r=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},a=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=KE(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var o=0,l=e||"",c=[];for("string"==typeof(i=i||[])&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=s(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(ZD.API),function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,s=0,a=function(e){var t=e.length,n=[],r=String.fromCharCode;for(s=0;s<t;s+=1)n.push(r(255&e.charCodeAt(s)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(a(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return a(r.responseText)}(e,t,n)}catch(Ru){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(ZD.API),function(e){function t(){return(bD.html2canvas?Promise.resolve(bD.html2canvas):Promise.resolve().then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function r(){return(bD.DOMPurify?Promise.resolve(bD.DOMPurify):n.e(977).then(n.bind(n,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var s=function(e){var t=(0,LN.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},i=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),s=t.firstChild;s;s=s.nextSibling)!0!==n&&1===s.nodeType&&"SCRIPT"===s.nodeName||r.appendChild(e(s,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(s(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(r).then(function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,s=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete s.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var a=0;a<n.length;++a){var i=n[a],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return s.windowHeight=s.windowHeight||0,s.windowHeight=0==s.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):s.windowHeight,t.context2d.save(!0),e(this.prop.container,s)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==s(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||ZD.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var s=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:o.convert(Object.assign({},r),Promise.prototype),a=n.call(s,e,t);return o.convert(a,r.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ZD.getPageSize=function(e,t,n){if("object"===(0,LN.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var s,a=(""+n).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(i.hasOwnProperty(a))l=i[a][1]/s,c=i[a][0]/s;else try{l=n[1],c=n[0]}catch(Ku){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:s,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(KL):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(ZD.API),ZD.API.addJS=function(e){return t_=e,this.internal.events.subscribe("postPutResources",function(){$L=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($L+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),e_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+t_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==$L&&void 0!==e_&&this.internal.out("/Names <</JavaScript "+$L+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],i=n.exec(a);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(s=0;s<l;s++){var d=e.internal.newObject();c.push(d);var A=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var u=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<c.length;s++)e.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+u+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var s=t.children[r];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var i=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(ZD.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,s,a,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),s=e.length,a={width:0,height:0,numcomponents:1},i=4;i<s;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),a={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(ZD.API),ZD.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,a=function(e,t){return new gD(e,t).decode()}(e,{checkCrc:!0}),i=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;s=c&&1===l?function(e){for(var t=e.width,n=e.height,r=e.data,s=e.palette,a=e.depth,i=!1,o=[],l=[],c=void 0,d=!1,A=0,u=0;u<s.length;u++){var h=BN(s[u],4),m=h[0],p=h[1],f=h[2],g=h[3];o.push(m,p,f),null!=g&&(0===g?(A++,l.length<1&&l.push(u)):g<255&&(d=!0))}if(d||A>1){i=!0,l=void 0;var x=t*n;c=new Uint8Array(x);for(var b=new DataView(r.buffer),y=0;y<x;y++){var v=BN(s[f_(b,y,a)],4)[3];c[y]=v}}else 0===A&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:i?8:void 0,colorBytes:r,alphaBytes:c,needSMask:i,palette:o,mask:l}}(a):2===l||4===l?function(e){for(var t=e.data,n=e.width,r=e.height,s=e.channels,a=e.depth,i=2===s?"DeviceGray":"DeviceRGB",o=s-1,l=n*r,c=o,d=l*c,A=1*l,u=Math.ceil(d*a/8),h=Math.ceil(A*a/8),m=new Uint8Array(u),p=new Uint8Array(h),f=new DataView(t.buffer),g=new DataView(m.buffer),x=new DataView(p.buffer),b=!1,y=0;y<l;y++){for(var v=y*s,w=0;w<c;w++)g_(g,f_(f,v+w,a),y*c+w,a);var N=f_(f,v+c,a);N<(1<<a)-1&&(b=!0),g_(x,N,1*y,a)}return{colorSpace:i,colorsPerPixel:o,sMaskBitsPerComponent:b?a:void 0,colorBytes:m,alphaBytes:p,needSMask:b}}(a):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,n=new Uint8Array(2*t),r=new DataView(n.buffer,n.byteOffset,n.byteLength),s=0;s<t;s++)r.setUint16(2*s,e[s],!1);return n}(t):t,needSMask:!1}}(a);var A,u,h,m=s,p=m.colorSpace,f=m.colorsPerPixel,g=m.sMaskBitsPerComponent,x=m.colorBytes,b=m.alphaBytes,y=m.needSMask,v=m.palette,w=m.mask,N=null;return r!==ZD.API.image_compression.NONE?(N=function(e){var t;switch(e){case ZD.API.image_compression.FAST:t=11;break;case ZD.API.image_compression.MEDIUM:t=13;break;case ZD.API.image_compression.SLOW:t=14;break;default:t=12}return t}(r),A=this.decode.FLATE_DECODE,u="/Predictor ".concat(N," /Colors ").concat(f," /BitsPerComponent ").concat(d," /Columns ").concat(i),e=l_(x,Math.ceil(i*f*d/8),f,d,r),y&&(h=l_(b,Math.ceil(i*g/8),1,g,r))):(A=void 0,u=void 0,e=x,y&&(h=b)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:e,index:t,filter:A,decodeParameters:u,transparency:w,palette:v,sMask:h,predictor:N,width:i,height:o,bitsPerComponent:d,sMaskBitsPerComponent:g,colorSpace:p}}},function(e){e.processGIF89A=function(t,n,r,s){var a=new b_(t),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new v_(100).encode(c,100);return e.processJPEG.call(this,d,n,r,s)},e.processGIF87A=e.processGIF89A}(ZD.API),w_.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},w_.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(Pu){vD.log("bit decode error:"+Pu)}},w_.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==n&&(this.pos+=4-n)}},w_.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*s*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},w_.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},w_.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,d=r*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},w_.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&n)/n*255|0,c=(i>>11)/t*255|0,d=s*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},w_.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},w_.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=i}},w_.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var a=new w_(t,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new v_(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(ZD.API),N_.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var a=new N_(t),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},c=new v_(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(ZD.API),ZD.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var d=r[c],A=r[c+1],u=r[c+2],h=r[c+3];a[o++]=d,a[o++]=A,a[o++]=u,i[l++]=h}var m=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ZD.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},n_=ZD.API,r_=n_.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:s.metadata.Unicode.kerning,d=c.fof?c.fof:1,A=!1!==t.doKerning,u=0,h=e.length,m=0,p=o[0]||l,f=[];for(n=0;n<h;n++)r=e.charCodeAt(n),"function"==typeof s.metadata.widthOfString?f.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+i*(1e3/a)||0)/1e3):(u=A&&"object"===(0,LN.A)(c[r])&&!isNaN(parseInt(c[r][m],10))?c[r][m]/d:0,f.push((o[r]||p)/l+u)),m=r;return f},s_=n_.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return n_.processArabic&&(e=n_.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,s)/n:r_.apply(this,arguments).reduce(function(e,t){return e+t},0)},a_=function(e,t,n,r){for(var s=[],a=0,i=e.length,o=0;a!==i&&o+t[a]<n;)o+=t[a],a++;s.push(e.slice(0,a));var l=a;for(o=0;a!==i;)o+t[a]>r&&(s.push(e.slice(l,a)),o=0,l=a),o+=t[a],a++;return l!==a&&s.push(e.slice(l,a)),s},i_=function(e,t,n){n||(n={});var r,s,a,i,o,l,c,d=[],A=[d],u=n.textIndent||0,h=0,m=0,p=e.split(" "),f=r_.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),x=[];p.map(function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):x.push(e[0])}),p=x,l=s_.apply(this,[g,n])}for(a=0,i=p.length;a<i;a++){var b=0;if(r=p[a],l&&"\n"==r[0]&&(r=r.substr(1),b=1),u+h+(m=(s=r_.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||b){if(m>t){for(o=a_.apply(this,[r,s,t-(u+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)A.push([o.shift()]);m=s.slice(r.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[r];A.push(d),u=m+l,h=f}else d.push(r),u+=h+m,h=f}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},A.map(c)},n_.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(i_.apply(this,[r[o],i,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},s={},a=0;a<16;a++)r[n[a]]=t[a],s[t[a]]=n[a];var i=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,r,a,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=i(c).slice(2)).slice(0,-1)+s[n.slice(-1)]),"number"==typeof t)t<0?(r=i(t).slice(3),a="-"):(r=i(t).slice(2),a=""),r=a+r.slice(0,-1)+s[r.slice(-1)];else{if("object"!==(0,LN.A)(t))throw new Error("Don't know what to do with value type "+(0,LN.A)(t)+".");r=o(t)}l.push(n+r)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,s,a,i={},o=1,l=i,c=[],d="",A="",u=e.length-1,h=1;h<u;h+=1)"'"==(a=e[h])?t?(s=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(c.push([l,s]),l={},s=void 0):"}"==a?((n=c.pop())[0][n[1]]=l,s=void 0,l=n[0]):"-"==a?o=-1:void 0===s?r.hasOwnProperty(a)?(d+=r[a],s=parseInt(d,16)*o,o=1,d=""):d+=a:r.hasOwnProperty(a)?(A+=r[a],l[s]=parseInt(A,16)*o,o=1,s=void 0,A=""):A+=a;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},A={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=A.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=d.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(ZD.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(void 0===a)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if("string"!=typeof(r=!1===a.existsFileInVFS(s.postScriptName)?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(SD(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(s,r)}}])}(ZD),ZD.API.addSvgAsImage=function(e,t,r,s,a,i,o,l){if(isNaN(t)||isNaN(r))throw vD.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw vD.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(bD.canvg?Promise.resolve(bD.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(d,e,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(A)}).then(function(){u.addImage(c.toDataURL("image/jpeg",1),t,r,s,a,o,l)})},ZD.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},ZD.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],c=0,d=0,A=0;function u(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var h=o.length;for(A=0;A<h;A+=1)n[o[A]].value=n[o[A]].defaultValue,n[o[A]].explicitSet=!1}if("object"===(0,LN.A)(e))for(s in e)if(a=e[s],u(o,s)&&void 0!==a){if("boolean"===n[s].type&&"boolean"==typeof a)n[s].value=a;else if("name"===n[s].type&&u(n[s].valueSet,a))n[s].value=a;else if("integer"===n[s].type&&Number.isInteger(a))n[s].value=a;else if("array"===n[s].type){for(c=0;c<a.length;c+=1)if(r=!0,1===a[c].length&&"number"==typeof a[c][0])l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)"number"!=typeof a[c][d]&&(r=!1);!0===r&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),a=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+r.length+s.length+t.length+a.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+s+a),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(ZD.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,s=["","0","00","000","0000"],a=[""],i=0,o=e.length;i<o;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return a.join("");n=n.toString(16),a.push(s[4-n.length],n)}return a.join("")},r=function(e){var t,n,r,s,a,i,o;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=n[i],r.length>=100&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(s=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+s+">"));return r.length&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var A=a();i({data:c,addLength1:!0,objectId:A}),s("endobj");var u=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:u}),s("endobj");var h=a();s("<<"),s("/Type /FontDescriptor"),s("/FontName /"+qD(n.fontName)),s("/FontFile2 "+A+" 0 R"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/Flags "+n.metadata.flags),s("/StemV "+n.metadata.stemV),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s(">>"),s("endobj");var m=a();s("<<"),s("/Type /Font"),s("/BaseFont /"+qD(n.fontName)),s("/FontDescriptor "+h+" 0 R"),s("/W "+e.API.PDFObject.convert(o)),s("/CIDToGIDMap /Identity"),s("/DW 1000"),s("/Subtype /CIDFontType2"),s("/CIDSystemInfo"),s("<<"),s("/Supplement 0"),s("/Registry (Adobe)"),s("/Ordering ("+n.encoding+")"),s(">>"),s(">>"),s("endobj"),n.objectNumber=a(),s("<<"),s("/Type /Font"),s("/Subtype /Type0"),s("/ToUnicode "+u+" 0 R"),s("/BaseFont /"+qD(n.fontName)),s("/Encoding /"+n.encoding),s("/DescendantFonts ["+m+" 0 R]"),s(">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,a=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=a();i({data:l,addLength1:!0,objectId:d}),s("endobj");var A=a();i({data:r(n.metadata.toUnicode),addLength1:!0,objectId:A}),s("endobj");var u=a();s("<<"),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s("/StemV "+n.metadata.stemV),s("/Type /FontDescriptor"),s("/FontFile2 "+d+" 0 R"),s("/Flags 96"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/FontName /"+qD(n.fontName)),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s(">>"),s("endobj"),n.objectNumber=a();for(var h=0;h<n.metadata.hmtx.widths.length;h++)n.metadata.hmtx.widths[h]=parseInt(n.metadata.hmtx.widths[h]*(1e3/n.metadata.head.unitsPerEm));s("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+qD(n.fontName)+"/FontDescriptor "+u+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]);var s=function(e){var t,r=e.text||"",s=e.x,a=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,A=c,u="",h=0,m="",p=d[A].encoding;if("Identity-H"!==d[A].encoding)return{text:r,x:s,y:a,options:i,mutex:o};for(m=r,A=c,Array.isArray(r)&&(m=r[0]),h=0;h<m.length;h+=1)d[A].metadata.hasOwnProperty("cmap")&&(t=d[A].metadata.cmap.unicode.codeMap[m[h].charCodeAt(0)]),t||m[h].charCodeAt(0)<256&&d[A].metadata.hasOwnProperty("Unicode")?u+=m[h]:u+="";var f="";return parseInt(A.slice(1))<14||"WinAnsiEncoding"===p?f=l(u,A).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(f=n(u,d[A])),o.isHex=!0,{text:f,x:s,y:a,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?n.push([s(Object.assign({},r,{text:t[a][0]})).text,t[a][1],t[a][2]]):n.push(s(Object.assign({},r,{text:t[a]})).text);e.text=n}else e.text=s(Object.assign({},r,{text:t})).text}])}(ZD),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(ZD.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,s,a,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),f=!1,g=0;this.__bidiEngine__={};var x=function(e){var t=e.charCodeAt(),n=t>>8,r=h[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=x(e.charAt(n))))return!1;if("R"===t)return!0}return!1},y=function(e,t,i,o){var l,c,d,A,u=t[o];switch(u){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":f=!1;break;case"N":case"AN":break;case"EN":f&&(u="AN");break;case"AL":f=!0,u="R";break;case"WS":case"BN":u="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?u="N":f&&(c="AN"),u=c===l?c:"N";break;case"ES":u="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){u="EN";break}if(f){u="N";break}for(d=o+1,A=t.length;d<A&&"ET"===t[d];)d++;u=d<A&&"EN"===t[d]?"EN":"N";break;case"NSM":if(s&&!a){for(A=t.length,d=o+1;d<A&&"NSM"===t[d];)d++;if(d<A){var h=e[o],m=h>=1425&&h<=2303||64286===h;if(l=t[d],m&&("R"===l||"AL"===l)){u="R";break}}}u=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":f=!1,n=!0,u=g;break;case"S":r=!0,u="N"}return u},v=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,s){var a,i,o,l,c,h=-1,m=e.length,p=0,b=[],v=g?A:d,w=[];for(f=!1,n=!1,r=!1,i=0;i<m;i++)w[i]=x(e[i]);for(o=0;o<m;o++){if(c=p,b[o]=y(e,w,b,o),a=240&(p=v[c][u[b[o]]]),p&=15,t[o]=l=v[p][5],a>0)if(16===a){for(i=h;i<o;i++)t[i]=1;h=-1}else h=-1;if(v[p][6])-1===h&&(h=o);else if(h>-1){for(i=h;i<o;i++)t[i]=l;h=-1}"B"===w[o]&&(t[o]=0),s.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var s=r-1;s>=0&&"WS"===e[s];s--)t[s]=g}}(w,t,m)},N=function(e,t,r,s,a){if(!(a.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var i,o,l,c,d=t.length,A=0;A<d;){if(s[A]>=e){for(l=A+1;l<d&&s[l]>=e;)l++;for(c=A,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,r&&(i=r[c],r[c]=r[o],r[o]=i);A=l}A++}}},j=function(e,t,n){var r=e.split(""),s={hiLevel:g};return n||(n=[]),w(r,n,s),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,s=0;s<e.length;s++)1===t[s]&&(r=m.indexOf(e[s]))>=0&&(e[s]=m[r+1])}(r,n,s),N(2,r,t,n,s),N(1,r,t,n,s),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===a&&(a=b(e)),void 0===o&&(o=b(e))}(e,t),s||!i||o)if(s&&i&&a^o)g=a?1:0,e=v(e,t,n);else if(!s&&i&&o)g=a?1:0,e=j(e,t,n),e=v(e,t);else if(!s||a||i||o){if(s&&!i&&a^o)e=v(e,t),a?(g=0,e=j(e,t,n)):(g=1,e=j(e,t,n),e=v(e,t));else if(s&&a&&!i&&o)g=1,e=j(e,t,n),e=v(e,t);else if(!s&&!i&&a^o){var r=l;a?(g=1,e=j(e,t,n),g=0,l=!1,e=j(e,t,n),l=r):(g=0,e=j(e,t,n),e=v(e,t),g=1,l=!1,e=j(e,t,n),l=r,e=v(e,t))}}else g=0,e=j(e,t,n);else g=a?1:0,e=j(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(s=e.isInputVisual,i=e.isOutputVisual,a=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var s=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(s=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?s.push([n.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):s.push([n.doBidiReorder(t[a])]);e.text=s}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(ZD),ZD.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new C_(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new z_(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new B_(this.contents),this.head=new k_(this),this.name=new P_(this),this.cmap=new I_(this),this.toUnicode={},this.hhea=new T_(this),this.maxp=new U_(this),this.hmtx=new O_(this),this.post=new L_(this),this.os2=new D_(this),this.loca=new V_(this),this.glyf=new R_(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,s;for(s=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],s.push(Math.round(e*this.scaleFactor));return s}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,s,a,i;for(a=0,s=0,i=(e=""+e).length;0<=i?s<i:s>i;s=0<=i?++s:--s)r=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var j_,C_=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,s,a,i,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*s+65536*a+256*i+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(this.writeByte(t));return s},e}(),B_=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,s,a,i,o,l,c,d,A,u,h,m;for(m in u=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(u)/o),a=Math.floor(d/o),c=16*u-d,(r=new C_).writeInt(this.scalarType),r.writeShort(u),r.writeShort(d),r.writeShort(a),r.writeShort(c),s=16*u,l=r.pos+s,i=null,h=[],t)for(A=t[m],r.writeString(m),r.writeInt(e(A)),r.writeInt(l),r.writeInt(A.length),h=h.concat(A),"head"===m&&(i=l),l+=A.length;l%4;)h.push(0),l++;return r.write(h),n=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,s;for(e=Q_.call(e);e.length%4;)e.push(0);for(r=new C_(e),n=0,t=0,s=e.length;t<s;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),S_={}.hasOwnProperty,E_=function(e,t){for(var n in t)S_.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};j_=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var k_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new C_).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),F_=function(){function e(e,t){var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(u=e.readUInt16(),A=u/2,e.pos+=6,s=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,m=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=f=0,x=s.length;f<x;o=++f)for(p=s[o],n=g=h=m[o];h<=p?g<=p:g>=p;n=h<=p?++g:--g)0===c[o]?a=n+l[o]:0!==(a=i[c[o]/2+(n-h)-(A-o)]||0)&&(a+=l[o]),this.codeMap[n]=65535&a}e.pos=d}return e.encode=function(e,t){var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k,F,I,T,D,L,_,P,U,O,Q,R,H,M,V,z,K,q,G;switch(k=new C_,a=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(m=0,p=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},s={},F=0,L=a.length;F<L;F++)null==g[z=e[r=a[F]]]&&(g[z]=++m),s[r]={old:e[r],new:g[e[r]]},p[r]=g[e[r]];return k.writeUInt16(1),k.writeUInt16(0),k.writeUInt32(12),k.writeUInt16(0),k.writeUInt16(262),k.writeUInt16(0),k.write(p),{charMap:s,subtable:k.data,maxGlyphID:m+1};case"unicode":for(S=[],d=[],x=0,g={},n={},f=l=null,I=0,_=a.length;I<_;I++)null==g[y=e[r=a[I]]]&&(g[y]=++x),n[r]={old:y,new:g[y]},i=g[y]-r,null!=f&&i===l||(f&&d.push(f),S.push(r),l=i),f=r;for(f&&d.push(f),d.push(65535),S.push(65535),C=2*(j=S.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),A=Math.log(N/2)/Math.LN2,w=2*j-N,o=[],v=[],u=[],h=T=0,P=S.length;T<P;h=++T){if(B=S[h],c=d[h],65535===B){o.push(0),v.push(0);break}if(B-(E=n[B].new)>=32768)for(o.push(0),v.push(2*(u.length+j-h)),r=D=B;B<=c?D<=c:D>=c;r=B<=c?++D:--D)u.push(n[r].new);else o.push(E-B),v.push(0)}for(k.writeUInt16(3),k.writeUInt16(1),k.writeUInt32(12),k.writeUInt16(4),k.writeUInt16(16+8*j+2*u.length),k.writeUInt16(0),k.writeUInt16(C),k.writeUInt16(N),k.writeUInt16(A),k.writeUInt16(w),M=0,U=d.length;M<U;M++)r=d[M],k.writeUInt16(r);for(k.writeUInt16(0),V=0,O=S.length;V<O;V++)r=S[V],k.writeUInt16(r);for(K=0,Q=o.length;K<Q;K++)i=o[K],k.writeUInt16(i);for(q=0,R=v.length;q<R;q++)b=v[q],k.writeUInt16(b);for(G=0,H=u.length;G<H;G++)m=u[G],k.writeUInt16(m);return{charMap:n,subtable:k.data,maxGlyphID:x+1}}},e}(),I_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new F_(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=F_.encode(e,t),(r=new C_).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),T_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),D_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),L_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],s=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;s=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),__=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},P_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,s,a,i,o,l,c,d,A;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},s=c=0,d=n.length;c<d;s=++c)r=n[s],e.pos=r.offset,l=e.readString(r.length),a=new __(l,r),null==o[A=r.nameID]&&(o[A]=[]),o[r.nameID].push(a);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(Vu){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),U_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),O_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,s,a,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,s;for(s=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)s.push(e.readInt16());return s}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)s=n[e],r.push(s.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Q_=[].slice,R_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,s,a,i,o,l,c,d;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),0===(r=s.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,a=(i=new C_(t.read(r))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===a?new M_(i,l,d,o,c):new H_(i,a,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,s,a,i,o;for(a=[],s=[],i=0,o=t.length;i<o;i++)r=e[t[i]],s.push(a.length),r&&(a=a.concat(r.encode(n)));return s.push(a.length),{table:a,offsets:s}},e}(),H_=function(){function e(e,t,n,r,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),M_=function(){function e(e,t,n,r,s){var a,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;i=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&i;)a.pos+=1&i?4:2,128&i?a.pos+=8:64&i?a.pos+=4:8&i&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new C_(Q_.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),V_=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return E_(e,j_),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,s=0,a=0;a<n.length;++a)if(n[a]=r,s<t.length&&t[s]==a){++s,n[a]=r;var i=this.offsets[a],o=this.offsets[a+1]-i;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),z_=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,s,a,i,o;for(r={},a=0,i=e.length;a<i;a++)r[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(null!=(n=r[s])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in o=this.glyphsFor(t))n=o[s],r[s]=n;return r},e.prototype.encode=function(e,t){var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f;for(r in n=I_.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),u={0:0},f=n.charMap)u[(o=f[r]).old]=o.new;for(h in A=n.maxGlyphID,a)h in u||(u[h]=A++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(u),d=Object.keys(c).sort(function(e,t){return e-t}),m=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)i=d[e],n.push(c[i]);return n}(),s=this.font.glyf.encode(a,m,u),l=this.font.loca.encode(s.offsets,m),p={cmap:this.font.cmap.raw(),glyf:s.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();ZD.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,s,a,i;if(Array.isArray(n))return"["+function(){var e,s,a;for(a=[],e=0,s=n.length;e<s;e++)r=n[e],a.push(t.convert(r));return a}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(s in a=["<<"],n)i=n[s],a.push("/"+s+" "+t.convert(i));return a.push(">>"),a.join("\n")}return""+n},t}();var K_=n(5239),q_=n.n(K_);const G_=async function(e){try{const t=210,n=297,r=await q_()(e,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",windowWidth:794,windowHeight:1123,width:e.scrollWidth,height:e.scrollHeight}),s=t,a=r.height*t/r.width,i=new ZD({orientation:"portrait",unit:"mm",format:"a4",compress:!0});let o=a,l=0;const c=n,d=r.toDataURL("image/jpeg",.95);for(i.addImage(d,"JPEG",0,l,s,a),o-=c;o>0;)l=o-a,i.addPage(),i.addImage(d,"JPEG",0,l,s,a),o-=c;return i.output("blob")}catch(t){throw console.error("Error generating PDF:",t),t}},W_=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{const e=r.result.split(",")[1];t(e)},r.onerror=n,r.readAsDataURL(e)}),Y_=e=>{let{trade:n,onClose:r,onUpdate:s}=e;const[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)(localStorage.getItem("dropboxAccessToken")||null),[g,x]=(0,t.useState)(localStorage.getItem("dropboxRefreshToken")||null);(0,t.useRef)();if(!n)return null;const b=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:n,e)},y=e=>{if(!e||!e.length)return(0,Rm.jsx)("div",{className:"text-gray-500",children:"No data."});const t=Object.keys(e[0]),n=t.map(e=>e.charAt(0).toUpperCase()+e.slice(1));return(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsx)("tr",{children:t.map((e,t)=>(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:n[t]},e))})}),(0,Rm.jsx)("tbody",{children:e.map((e,n)=>(0,Rm.jsx)("tr",{children:t.map(t=>(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e[t]},t))},n))})]})},v=e=>{let{trade:n}=e;const[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)("");return(0,t.useEffect)(()=>{n&&n._id&&(d(!0),u(""),nN.get("/real-estate-trust-eft/trade/".concat(n._id)).then(e=>s(e.data)).catch(()=>s([])),nN.get("/commission-trust-eft/trade/".concat(n._id)).then(e=>i(e.data)).catch(()=>i([])),d(!1))},[n]),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Real Estate Trust Payments"}),r.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"EFT #"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Recipient"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Description"})]})}),(0,Rm.jsx)("tbody",{children:r.map(e=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.eftNumber}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.amount)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.recipient}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:ZS(e.type)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.description})]},e._id))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No Real Estate Trust Payments found for this trade."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission Trust Payments"}),a.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"EFT #"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Recipient"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Description"})]})}),(0,Rm.jsx)("tbody",{children:a.map(e=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.eftNumber}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.amount)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.recipient}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:ZS(e.type)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.description})]},e._id))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No Commission Trust Payments found for this trade."})]})]})};return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,Rm.jsxs)("div",{className:"flex gap-3 absolute top-4 right-6 z-10",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(!c){d(!0);try{var e,t,r,s,a,i,o,l,A,u,h;let c=window.open("","_blank"),d=!1;c||(d=!0,c=window);const v=(new Date).toLocaleDateString();let w=[],N=[];if(n&&n._id)try{const[e,t]=await Promise.all([nN.get("/real-estate-trust-eft/trade/".concat(n._id)),nN.get("/commission-trust-eft/trade/".concat(n._id))]);w=e.data||[],N=t.data||[]}catch(x){}const j=(null===(e=n.commission)||void 0===e||null===(t=e.commissionIncomeRows)||void 0===t?void 0:t[0])||{},C="CO-OPERATING SIDE"===((null===(r=n.keyInfo)||void 0===r?void 0:r.classification)||""),B=j.listingAmount&&""!==j.listingAmount?parseFloat(j.listingAmount):0,S=j.sellingAmount&&""!==j.sellingAmount?parseFloat(j.sellingAmount):0,E=(B+S).toFixed(2),k=(.13*B).toFixed(2),F=(.13*S).toFixed(2),I=(parseFloat(k)+parseFloat(F)).toFixed(2),T=(parseFloat(E)+parseFloat(I)).toFixed(2);let D=null;(null===(s=n.commission)||void 0===s||null===(a=s.outsideBrokersRows)||void 0===a?void 0:a.length)>0?D=n.commission.outsideBrokersRows[0]:(null===(i=n.outsideBrokers)||void 0===i?void 0:i.length)>0&&(D=n.outsideBrokers[0]);let L,_,P,U,O,Q="0.00",R="0.00",H="0.00",M="0.00",V="0.00",z="";if(D){var p;const e="".concat(D.agentName||D.firstName||""," ").concat(D.lastName||"").trim(),t=D.company||D.brokerage||"";z=e&&t?"".concat(e," - ").concat(t):e||t||"Outside Broker";const r=D.sellingAmount||"0.00",s=null===(p=n.outsideBrokers)||void 0===p?void 0:p.find(e=>"".concat(e.firstName," ").concat(e.lastName).trim()===(D.agentName||D.firstName)||e.company===D.company);let a="";if(s){var f,g;a=null!==(f=s.end)&&void 0!==f&&f.toLowerCase().includes("listing")||null!==(g=s.type)&&void 0!==g&&g.toLowerCase().includes("listing")?"listing":"selling"}else{a=(D.end||D.type||"").toLowerCase().includes("listing")?"listing":"selling"}"listing"===a?(Q=r,R="0.00"):(Q="0.00",R=r),H=r,M=D.tax||"0.00",V=D.total||"0.00"}C?(L=B,_=S,P=E,U=I,O=T):(L=(parseFloat(B)-parseFloat(Q)).toFixed(2),_=(parseFloat(S)-parseFloat(R)).toFixed(2),P=(parseFloat(E)-parseFloat(H)).toFixed(2),U=(parseFloat(I)-parseFloat(M)).toFixed(2),O=(parseFloat(T)-parseFloat(V)).toFixed(2));const K=(n.agentCommissionList||[]).map(e=>{var t;const n=e.amount&&""!==e.amount?parseFloat(e.amount):0,r=e.feesDeducted&&""!==e.feesDeducted?parseFloat(e.feesDeducted):0,s=(null===(t=e.classification)||void 0===t||t.toLowerCase(),n-r),a="yes"===e.buyerRebateIncluded&&e.buyerRebateAmount&&parseFloat(e.buyerRebateAmount)||0;let i="0.00",o="0.00";C?(i="0.00",o=(s-a).toFixed(2)):(i=(s-a).toFixed(2),o="0.00");let l=(parseFloat(i)+parseFloat(o)).toFixed(2);const c=(.13*s).toFixed(2),d=(parseFloat(l)+parseFloat(c)).toFixed(2);return X(X({},e),{},{agentListing:i,agentSelling:o,agentSubTotal:l,agentHST:c,agentTotal:d})}),q=(n.agentCommissionList||[]).reduce((e,t)=>"yes"===t.buyerRebateIncluded&&t.buyerRebateAmount?e+parseFloat(t.buyerRebateAmount||0):e,0);let G,W,Y,J,Z,$,ee,te,ne,re,se="0.00",ae="0.00";if(C?ae=(q||0).toFixed(2):se=(q||0).toFixed(2),C||2!==K.length)$=K.reduce((e,t)=>e+parseFloat(t.agentListing||0),0),ee=K.reduce((e,t)=>e+parseFloat(t.agentSelling||0),0),te=K.reduce((e,t)=>e+parseFloat(t.agentSubTotal||0),0),ne=K.reduce((e,t)=>e+parseFloat(t.agentHST||0),0),re=K.reduce((e,t)=>e+parseFloat(t.agentTotal||0),0);else{const e=K[0]||{},t=K[1]||{};$=parseFloat(e.agentListing||0)-parseFloat(t.agentListing||0),ee=parseFloat(e.agentSelling||0)-parseFloat(t.agentSelling||0),te=parseFloat(e.agentSubTotal||0)-parseFloat(t.agentSubTotal||0),ne=parseFloat(e.agentHST||0)-parseFloat(t.agentHST||0),re=parseFloat(e.agentTotal||0)-parseFloat(t.agentTotal||0)}if(C||2!==K.length)G=(parseFloat(L)-$-parseFloat(se)).toFixed(2),W=(parseFloat(_)-ee-parseFloat(ae)).toFixed(2),Y=(parseFloat(P)-te-(parseFloat(se)+parseFloat(ae))).toFixed(2),J=(parseFloat(U)-ne).toFixed(2),Z=(parseFloat(O)-re-(parseFloat(se)+parseFloat(ae))).toFixed(2);else{const e=K.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0);Y=e.toFixed(2),J=(.13*e).toFixed(2),Z=(e+.13*e).toFixed(2),G=Y,W="0.00"}const ie=(null===(o=n.commission)||void 0===o||null===(l=o.outsideBrokersRows)||void 0===l?void 0:l.map(e=>({agentName:e.agentName||"-",brokerage:e.brokerage||"-",end:(e=>{var t,r,s;const a=null===(t=n.outsideBrokers)||void 0===t?void 0:t.find(t=>"".concat(t.firstName," ").concat(t.lastName).trim()===e.agentName||t.company===e.brokerage);var i,o;if(a&&(null!==(i=a.end)&&void 0!==i&&i.toLowerCase().includes("listing")||null!==(o=a.type)&&void 0!==o&&o.toLowerCase().includes("listing")))return"Listing";return null!==(r=e.end)&&void 0!==r&&r.toLowerCase().includes("listing")||null!==(s=e.type)&&void 0!==s&&s.toLowerCase().includes("listing")?"Listing":"Selling"})(e),sellingAmount:e.sellingAmount||"0.00",tax:e.tax||"0.00",total:e.total||"0.00"})))||[],oe=b(n,"keyInfo.streetNumber")||"",le=b(n,"keyInfo.streetName")||"",ce=b(n,"keyInfo.unit")||"",de=b(n,"keyInfo.city")||"",Ae=b(n,"keyInfo.province")||"",ue=b(n,"keyInfo.postalCode")||"",he=oe&&le?"".concat(oe," ").concat(le):"",me=ce||"",pe=de&&Ae?"".concat(de,", ").concat(Ae):"",fe=ue||"",ge="\n\n      <!DOCTYPE html>\n\n      <html>\n\n      <head>\n\n        <title>Trade Record Sheet - ".concat(n.tradeNumber,'</title>\n\n        <style>\n          /* A4 Optimized Styling - 210mm x 297mm */\n          * { box-sizing: border-box; margin: 0; padding: 0; }\n          \n          body { \n            font-family: Arial, sans-serif; \n            margin: 0;\n            padding: 15mm 12mm; /* A4 margins: top/bottom 15mm, left/right 12mm */\n            font-size: 10px;\n            line-height: 1.4;\n            width: 210mm; /* A4 width */\n            background: white;\n          }\n\n          .header { \n            display: flex; \n            justify-content: space-between; \n            align-items: flex-start; \n            margin-bottom: 15px;\n            width: 100%;\n          }\n\n          .logo { width: 70px; height: auto; }\n\n          .title { \n            font-size: 16px; \n            font-weight: bold; \n            text-align: center; \n            flex-grow: 1;\n            padding: 0 10px;\n          }\n\n          .date-address { \n            text-align: right; \n            font-size: 9px;\n            line-height: 1.3;\n          }\n\n          .date { font-weight: bold; margin-bottom: 4px; }\n\n          .address { line-height: 1.3; }\n\n          .section { \n            margin-bottom: 12px;\n            page-break-inside: avoid; /* Prevent sections from breaking across pages */\n          }\n\n          .section-title { \n            font-size: 12px; \n            font-weight: bold; \n            margin-bottom: 6px; \n            border-bottom: 1px solid #333; \n            padding-bottom: 2px;\n          }\n\n          .property-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr; \n            gap: 6px; \n            margin-bottom: 8px;\n          }\n\n          .property-item { \n            display: flex; \n            justify-content: space-between; \n            font-size: 9px;\n            line-height: 1.3;\n          }\n\n          .property-label { font-weight: bold; margin-right: 5px; }\n\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 8px; \n            font-size: 8px;\n            page-break-inside: auto;\n          }\n\n          tr { page-break-inside: avoid; page-break-after: auto; }\n\n          th, td { \n            border: 1px solid #ccc; \n            padding: 3px 4px; \n            text-align: left;\n            line-height: 1.2;\n          }\n\n          th { \n            background-color: #f5f5f5; \n            font-weight: bold;\n            font-size: 8px;\n          }\n\n          .financial-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr 1fr; \n            gap: 8px;\n            margin-bottom: 10px;\n          }\n\n          .financial-item { text-align: center; }\n\n          .financial-label { \n            font-weight: bold; \n            margin-bottom: 3px; \n            font-size: 9px;\n          }\n\n          .financial-value { font-size: 12px; font-weight: bold; }\n\n          /* Page break helpers */\n          .page-break { page-break-after: always; }\n          .no-break { page-break-inside: avoid; }\n\n          @media print {\n            body { \n              margin: 0;\n              padding: 15mm 12mm;\n            }\n            .no-print { display: none !important; }\n            button { display: none !important; }\n          }\n\n        </style>\n\n      </head>\n\n      <body>\n\n        <div class="header">\n\n          <div style="display: flex; flex-direction: column; align-items: flex-start;">\n\n            <img src="/logo.jpeg" alt="Logo" class="logo">\n\n            <div style="font-size: 9px; line-height: 1.2; margin-top: 5px;">\n\n                      Homelife Top Star Realty Inc., Brokerage<br>\n\n      9889 Markham Road, Suite 201 <br>\n\n      Markham, Ontario L6E OB7<br>\n\n        Phone: 905-209-1400\n\n            </div>\n\n          </div>\n\n          <div class="title">Trade Record Sheet</div>\n\n          <div class="date-address">\n\n            <div class="date">').concat(v,'</div>\n\n            <div class="address">\n\n              ').concat(he,"<br>\n\n              ").concat(me,"<br>\n\n              ").concat(pe,"<br>\n\n              ").concat(fe,'\n\n            </div>\n\n            <div style="font-size: 10px; font-weight: bold; margin-top: 5px;">\n\n              Trade Number - ').concat(b(n,"keyInfo.tradeNumber")||n.tradeNumber||"-",'\n\n            </div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Property</div>\n\n          <div class="property-grid">\n\n            <div class="property-item">\n\n              <span class="property-label">Type:</span>\n\n              <span>').concat(b(n,"keyInfo.propertyType"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Classification:</span>\n\n              <span>').concat(b(n,"keyInfo.classification"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Status:</span>\n\n              <span>').concat(b(n,"keyInfo.status"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">MLS Number:</span>\n\n              <span>').concat(b(n,"keyInfo.mlsNumber"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Offer Date:</span>\n\n              <span>').concat(b(n,"keyInfo.offerDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Entry Date:</span>\n\n              <span>').concat(b(n,"keyInfo.entryDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Firm Date:</span>\n\n              <span>').concat(b(n,"keyInfo.firmDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Close Date:</span>\n\n              <span>').concat(b(n,"keyInfo.closeDate"),'</span>\n\n            </div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Conditions</div>\n\n          ').concat(n.conditions&&n.conditions.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Condition</th>\n\n                <th>Due Date</th>\n\n                <th>Condition Met Date</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.conditions.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.conditionText||"-","</td>\n\n                  <td>").concat(e.dueDate||"-","</td>\n\n                  <td>").concat(e.conditionMetDate||"Not met","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No conditions available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Contacts</div>\n\n          ').concat(n.people&&n.people.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Type</th>\n\n                <th>First Name</th>\n\n                <th>Last Name</th>\n\n                <th>Primary Phone</th>\n\n                <th>Secondary Phone</th>\n\n                <th>Email</th>\n\n                <th>Company Name</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.people.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.type||"-","</td>\n\n                  <td>").concat(e.firstName||"-","</td>\n\n                  <td>").concat(e.lastName||"-","</td>\n\n                  <td>").concat(e.primaryPhone||"-","</td>\n\n                  <td>").concat(e.secondaryPhone||"-","</td>\n\n                  <td>").concat(e.email||"-","</td>\n\n                  <td>").concat(e.companyName||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No contacts available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Outside Brokers</div>\n\n          ').concat(n.outsideBrokers&&n.outsideBrokers.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Type</th>\n\n                <th>End</th>\n\n                <th>First Name</th>\n\n                <th>Last Name</th>\n\n                <th>Company</th>\n\n                <th>Phone Number</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.outsideBrokers.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.type||"-","</td>\n\n                  <td>").concat(e.end||"-","</td>\n\n                  <td>").concat(e.firstName||"-","</td>\n\n                  <td>").concat(e.lastName||"-","</td>\n\n                  <td>").concat(e.company||"-","</td>\n\n                  <td>").concat(e.primaryPhone||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No outside brokers available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Outside Brokers Commission Details</div>\n\n          ').concat(ie.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Agent Name</th>\n\n                <th>Brokerage</th>\n\n                <th>End</th>\n\n                <th>Selling Amount</th>\n\n                <th>Tax</th>\n\n                <th>Total</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(ie.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.agentName,"</td>\n\n                  <td>").concat(e.brokerage,"</td>\n\n                  <td>").concat(e.end,"</td>\n\n                  <td>").concat(tE(e.sellingAmount),"</td>\n\n                  <td>").concat(tE(e.tax),"</td>\n\n                  <td>").concat(tE(e.total),"</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No outside brokers commission details available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Deposit</div>\n\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>We Hold</th>\n\n                <th>Received</th>\n\n                <th>Received From</th>\n\n                <th>Held By</th>\n\n                <th>Deposit Date</th>\n\n                <th>Reference</th>\n\n                <th>Amount</th>\n\n                <th>Payment Type</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.trustRecords.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.weHold||"-","</td>\n\n                  <td>").concat(e.received||"-","</td>\n\n                  <td>").concat(e.receivedFrom||"-","</td>\n\n                  <td>").concat(e.heldBy||"-","</td>\n\n                  <td>").concat(e.depositDate||e.date||"-","</td>\n\n                  <td>").concat(e.reference||"-","</td>\n\n                  <td>").concat(tE(e.amount||0),"</td>\n\n                  <td>").concat(e.paymentType||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No deposit records available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Financial</div>\n\n          <div style="font-weight:bold; font-size:12px; margin-bottom:4px;">Financial:</div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Selling Price: <span style="font-weight:bold;">').concat(tE(j.sellPrice||(null===(A=n.keyInfo)||void 0===A?void 0:A.sellPrice)||0),'</span></div>\n\n          </div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Listing Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(u=n.keyInfo)||void 0===u?void 0:u.listCommission)||0),'%</span></div>\n\n          </div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Selling Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(h=n.keyInfo)||void 0===h?void 0:h.sellCommission)||0),'%</span></div>\n\n          </div>\n\n          <div style="display:flex; font-weight:bold; border-bottom:1px solid #ccc; padding:3px 0; border-top:1px solid #ccc; font-size:9px;">\n\n            <div style="width:25%"></div>\n\n            <div style="width:12%; text-align:center;">Listing</div>\n\n            <div style="width:12%; text-align:center;">Selling</div>\n\n            <div style="width:12%; text-align:center;">Sub-Total</div>\n\n            <div style="width:12%; text-align:center;">HST</div>\n\n            <div style="width:12%; text-align:center;">Total</div>\n\n          </div>\n\n          <div style="font-weight:bold; margin-top:6px; margin-bottom:0; font-size:10px;">Income</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Commission</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(B),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(S),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(E),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(I),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(T),"</div>\n\n          </div>\n\n          ").concat(C?'\n\n          <div style="display:flex; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Base Office Commission</div>\n\n            <div style="width:12%; text-align:center;">'.concat(tE(L),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(_),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(P),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(U),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(O),"</div>\n\n          </div>\n\n          "):'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Expenses</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">'.concat(z,'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(Q),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(R),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(H),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(M),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(V),'</div>\n\n          </div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Base Office Commission</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(L),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(_),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(P),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(U),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(O),"</div>\n\n          </div>\n\n          "),'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Agents</div>\n\n          ').concat(K.map(e=>'\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">('.concat(e.agentId||"",") ").concat(e.agentName||"",'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentListing||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentSelling||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentSubTotal||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentHST||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentTotal||"0.00"),"</div>\n\n          </div>\n\n          ")).join(""),"\n\n          \n\n          \x3c!-- Liabilities Section --\x3e\n\n          ").concat(q>0?'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Liabilities</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Buyer Rebate</div>\n\n            <div style="width:12%; text-align:center;">'.concat(tE(se),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(ae),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE((parseFloat(se)+parseFloat(ae)).toFixed(2)),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE("0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE((parseFloat(se)+parseFloat(ae)).toFixed(2)),"</div>\n\n          </div>\n\n          "):"",'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Net to Office</div>\n\n          <div style="display:flex; border-bottom:3px double #000; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%"></div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(G),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(W),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(Y),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(J),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(Z),'</div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Agent Details</div>\n\n          ').concat(n.agentCommissionList&&n.agentCommissionList.length>0?'\n\n          <table style="width:100%; border-collapse:collapse; margin-bottom:10px;">\n\n            <thead>\n\n              <tr style="background-color:#f2f2f2;">\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Name</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Number</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Payment Plan</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Base</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Plan Amount</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Buyer Rebate</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Total</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              '.concat(n.agentCommissionList.map(e=>'\n\n                <tr>\n\n                  <td style="border:1px solid #ddd; padding:4px;">'.concat(e.agentName||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(e.agentId||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat($S(e.feeInfo)||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(e.amount||0),'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(e.feesDeducted||0),'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?tE(e.buyerRebateAmount):"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(parseFloat(e.amount||0)-parseFloat(e.feesDeducted||0)-("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?parseFloat(e.buyerRebateAmount||0):0)),"</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No agent payment details available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Trust Activity</div>\n\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"<table><thead><tr>\n\n                  <th>Received From</th><th>Deposit Date</th><th>Reference</th><th>Amount</th>\n\n                </tr></thead><tbody>\n\n                ".concat(n.trustRecords.map(e=>"<tr>\n\n                      <td>".concat(e.receivedFrom||"-","</td>\n\n                      <td>").concat(e.depositDate||e.date||"-","</td>\n\n                      <td>").concat(e.reference||"-","</td>\n\n                      <td>").concat(tE(e.amount||0),"</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No trust records available.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Real Estate Trust Payments</div>\n\n          ').concat(w.length>0?"<table><thead><tr>\n\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n\n                </tr></thead><tbody>\n\n                ".concat(w.map(e=>"<tr>\n\n                      <td>".concat(e.eftNumber||"","</td>\n\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n\n                      <td>").concat(tE(e.amount||""),"</td>\n\n                      <td>").concat(e.recipient||"","</td>\n\n                      <td>").concat(ZS(e.type)||"","</td>\n\n                      <td>").concat(e.description||"","</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No Real Estate Trust Payments found for this trade.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Commission Trust Payments</div>\n\n          ').concat(N.length>0?"<table><thead><tr>\n\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n\n                </tr></thead><tbody>\n\n                ".concat(N.map(e=>"<tr>\n\n                      <td>".concat(e.eftNumber||"","</td>\n\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n\n                      <td>").concat(tE(e.amount||""),"</td>\n\n                      <td>").concat(e.recipient||"","</td>\n\n                      <td>").concat(ZS(e.type)||"","</td>\n\n                      <td>").concat(e.description||"","</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No Commission Trust Payments found for this trade.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Commission Trust Agreement</div>\n\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n\n            It is understood between all parties that this agreement shall constitute a Commission Trust Agreement as set out in the contract.\n\n          </div>\n\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n\n            To the best of my knowledge the above information is correct. Dated at Moncton on ').concat(v,'\n\n          </div>\n\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">\n\n            <div style="font-size: 10px;">\n\n              ').concat(K.length>0?"".concat(K[0].agentName||"Agent Name",", ").concat(K[0].agentId||"Agent Number"):"Agent Name, Agent Number",'\n\n            </div>\n\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n\n          </div>\n\n          <div style="display: flex; justify-content: space-between; align-items: center;">\n\n            <div style="font-size: 10px;">\n\n              Broker of Record: Homelife Top Star Realty Inc., Brokerage\n\n            </div>\n\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n\n          </div>\n\n        </div>\n      </body>\n\n      </html>\n\n    ');c.document.write(ge),c.document.close();try{const e=document.createElement("iframe");e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.border="none",document.body.appendChild(e);const t=e.contentWindow.document;t.open(),t.write(ge),t.close(),setTimeout(async()=>{try{const r=await G_(t.body,"Trade_".concat(n.tradeNumber,".pdf")),s=await W_(r);m({base64:"data:application/pdf;base64,".concat(s),fileName:"Trade_".concat(n.tradeNumber,"_").concat(Date.now(),".pdf"),size:r.size,timestamp:Date.now()}),console.log("\u2705 PDF generated and cached for Dropbox upload"),e.parentNode&&document.body.removeChild(e)}catch(r){console.error("PDF generation for cache failed:",r)}},1e3)}catch(y){console.error("Failed to cache PDF:",y)}setTimeout(()=>{try{c.print(),d||setTimeout(()=>{c.close()},1e3),d||setTimeout(()=>{alert("Print dialog opened successfully!")},100)}catch(e){console.error("Print error:",e),d||c.focus(),alert("Print dialog failed to open. The report is ready for manual printing.")}},500)}catch(v){console.error("Error generating print report:",v),alert("Error generating print report. Please try again.")}finally{d(!1)}}},disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Print"}),(0,Rm.jsx)("button",{onClick:async()=>{if(!A){if(!p){return void(window.confirm("You need to authenticate with Dropbox first. Would you like to do that now?")&&(async()=>{try{const e="".concat(window.location.origin,"/dropbox-callback");console.log("\ud83d\udd0d Dropbox Auth Debug:"),console.log("  - Current origin:",window.location.origin),console.log("  - Redirect URI:",e);const t=await nN.get("/dropbox/auth-url",{params:{redirectUri:e}});console.log("  - Auth URL received:",t.data.authUrl),console.log("  - Server using redirect URI:",t.data.redirectUri),console.log("\n\u26a0\ufe0f If you see an error, make sure this redirect URI is added to Dropbox:"),console.log("  ",t.data.redirectUri||e),t.data.success&&(localStorage.setItem("pendingDropboxUploadTradeId",n._id),alert('You will be redirected to Dropbox for authentication.\n\nIf you see "Invalid redirect_uri" error, you need to add this URL to your Dropbox App Console:\n\n'.concat(t.data.redirectUri||e,'\n\nGo to: https://www.dropbox.com/developers/apps\nAdd the URL above to "Redirect URIs" section\nClick "Submit" to save')),window.location.href=t.data.authUrl)}catch(e){console.error("Error getting Dropbox auth URL:",e),alert("Failed to initiate Dropbox authentication")}})())}u(!0);try{var e,t,r,s,a,i,o,l,c,d,h;console.log("\ud83d\udcc4 Generating PDF for Dropbox upload...");const A=document.createElement("iframe");A.style.position="absolute",A.style.width="0",A.style.height="0",A.style.border="none",document.body.appendChild(A);const k=A.contentWindow.document,F=(new Date).toLocaleDateString();let I=[],T=[];if(n&&n._id)try{const[e,t]=await Promise.all([nN.get("/real-estate-trust-eft/trade/".concat(n._id)),nN.get("/commission-trust-eft/trade/".concat(n._id))]);I=e.data||[],T=t.data||[]}catch(B){console.error("Error fetching EFTs:",B)}const D=(null===(e=n.commission)||void 0===e||null===(t=e.commissionIncomeRows)||void 0===t?void 0:t[0])||{},L="CO-OPERATING SIDE"===((null===(r=n.keyInfo)||void 0===r?void 0:r.classification)||""),_=D.listingAmount&&""!==D.listingAmount?parseFloat(D.listingAmount):0,P=D.sellingAmount&&""!==D.sellingAmount?parseFloat(D.sellingAmount):0,U=(_+P).toFixed(2),O=(.13*_).toFixed(2),Q=(.13*P).toFixed(2),R=(parseFloat(O)+parseFloat(Q)).toFixed(2),H=(parseFloat(U)+parseFloat(R)).toFixed(2);let M=null;(null===(s=n.commission)||void 0===s||null===(a=s.outsideBrokersRows)||void 0===a?void 0:a.length)>0?M=n.commission.outsideBrokersRows[0]:(null===(i=n.outsideBrokers)||void 0===i?void 0:i.length)>0&&(M=n.outsideBrokers[0]);let V,z,K,q,G,W="0.00",Y="0.00",J="0.00",Z="0.00",$="0.00",ee="";if(M){var m;const e="".concat(M.agentName||M.firstName||""," ").concat(M.lastName||"").trim(),t=M.company||M.brokerage||"";ee=e&&t?"".concat(e," - ").concat(t):e||t||"Outside Broker";const r=M.sellingAmount||"0.00",s=null===(m=n.outsideBrokers)||void 0===m?void 0:m.find(e=>"".concat(e.firstName," ").concat(e.lastName).trim()===(M.agentName||M.firstName)||e.company===M.company);let a="";if(s){var g,y;a=null!==(g=s.end)&&void 0!==g&&g.toLowerCase().includes("listing")||null!==(y=s.type)&&void 0!==y&&y.toLowerCase().includes("listing")?"listing":"selling"}else{a=(M.end||M.type||"").toLowerCase().includes("listing")?"listing":"selling"}"listing"===a?(W=r,Y="0.00"):(W="0.00",Y=r),J=r,Z=M.tax||"0.00",$=M.total||"0.00"}L?(V=_,z=P,K=U,q=R,G=H):(V=(parseFloat(_)-parseFloat(W)).toFixed(2),z=(parseFloat(P)-parseFloat(Y)).toFixed(2),K=(parseFloat(U)-parseFloat(J)).toFixed(2),q=(parseFloat(R)-parseFloat(Z)).toFixed(2),G=(parseFloat(H)-parseFloat($)).toFixed(2));const te=(n.agentCommissionList||[]).map(e=>{var t;const n=e.amount&&""!==e.amount?parseFloat(e.amount):0,r=e.feesDeducted&&""!==e.feesDeducted?parseFloat(e.feesDeducted):0,s=(null===(t=e.classification)||void 0===t||t.toLowerCase(),n-r),a="yes"===e.buyerRebateIncluded&&e.buyerRebateAmount&&parseFloat(e.buyerRebateAmount)||0;let i="0.00",o="0.00";L?(i="0.00",o=(s-a).toFixed(2)):(i=(s-a).toFixed(2),o="0.00");let l=(parseFloat(i)+parseFloat(o)).toFixed(2);const c=(.13*s).toFixed(2),d=(parseFloat(l)+parseFloat(c)).toFixed(2);return X(X({},e),{},{agentListing:i,agentSelling:o,agentSubTotal:l,agentHST:c,agentTotal:d})}),ne=(n.agentCommissionList||[]).reduce((e,t)=>"yes"===t.buyerRebateIncluded&&t.buyerRebateAmount?e+parseFloat(t.buyerRebateAmount||0):e,0);let re,se,ae,ie,oe,le,ce,de,Ae,ue,he="0.00",me="0.00";if(L?me=(ne||0).toFixed(2):he=(ne||0).toFixed(2),L||2!==te.length)le=te.reduce((e,t)=>e+parseFloat(t.agentListing||0),0),ce=te.reduce((e,t)=>e+parseFloat(t.agentSelling||0),0),de=te.reduce((e,t)=>e+parseFloat(t.agentSubTotal||0),0),Ae=te.reduce((e,t)=>e+parseFloat(t.agentHST||0),0),ue=te.reduce((e,t)=>e+parseFloat(t.agentTotal||0),0);else{const e=te[0]||{},t=te[1]||{};le=parseFloat(e.agentListing||0)-parseFloat(t.agentListing||0),ce=parseFloat(e.agentSelling||0)-parseFloat(t.agentSelling||0),de=parseFloat(e.agentSubTotal||0)-parseFloat(t.agentSubTotal||0),Ae=parseFloat(e.agentHST||0)-parseFloat(t.agentHST||0),ue=parseFloat(e.agentTotal||0)-parseFloat(t.agentTotal||0)}if(L||2!==te.length)re=(parseFloat(V)-le-parseFloat(he)).toFixed(2),se=(parseFloat(z)-ce-parseFloat(me)).toFixed(2),ae=(parseFloat(K)-de-(parseFloat(he)+parseFloat(me))).toFixed(2),ie=(parseFloat(q)-Ae).toFixed(2),oe=(parseFloat(G)-ue-(parseFloat(he)+parseFloat(me))).toFixed(2);else{const e=te.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0);ae=e.toFixed(2),ie=(.13*e).toFixed(2),oe=(e+.13*e).toFixed(2),re=ae,se="0.00"}const pe=(null===(o=n.commission)||void 0===o||null===(l=o.outsideBrokersRows)||void 0===l?void 0:l.map(e=>({agentName:e.agentName||"-",brokerage:e.brokerage||"-",end:(e=>{var t,r,s;const a=null===(t=n.outsideBrokers)||void 0===t?void 0:t.find(t=>"".concat(t.firstName," ").concat(t.lastName).trim()===e.agentName||t.company===e.brokerage);var i,o;if(a&&(null!==(i=a.end)&&void 0!==i&&i.toLowerCase().includes("listing")||null!==(o=a.type)&&void 0!==o&&o.toLowerCase().includes("listing")))return"Listing";return null!==(r=e.end)&&void 0!==r&&r.toLowerCase().includes("listing")||null!==(s=e.type)&&void 0!==s&&s.toLowerCase().includes("listing")?"Listing":"Selling"})(e),sellingAmount:e.sellingAmount||"0.00",tax:e.tax||"0.00",total:e.total||"0.00"})))||[],fe=b(n,"keyInfo.streetNumber")||"",ge=b(n,"keyInfo.streetName")||"",xe=b(n,"keyInfo.unit")||"",be=b(n,"keyInfo.city")||"",ye=b(n,"keyInfo.province")||"",ve=b(n,"keyInfo.postalCode")||"",we=fe&&ge?"".concat(fe," ").concat(ge):"",Ne=xe||"",je=be&&ye?"".concat(be,", ").concat(ye):"",Ce=ve||"",Be="\n\n      <!DOCTYPE html>\n\n      <html>\n\n      <head>\n\n        <title>Trade Record Sheet - ".concat(n.tradeNumber,'</title>\n\n        <style>\n          /* A4 Optimized Styling - 210mm x 297mm */\n          * { box-sizing: border-box; margin: 0; padding: 0; }\n          \n          body { \n            font-family: Arial, sans-serif; \n            margin: 0;\n            padding: 15mm 12mm; /* A4 margins: top/bottom 15mm, left/right 12mm */\n            font-size: 10px;\n            line-height: 1.4;\n            width: 210mm; /* A4 width */\n            background: white;\n          }\n\n          .header { \n            display: flex; \n            justify-content: space-between; \n            align-items: flex-start; \n            margin-bottom: 1px;\n            width: 100%;\n          }\n\n          .logo { width: 70px; height: auto; }\n\n          .title { \n            font-size: 16px; \n            font-weight: bold; \n            text-align: center; \n            flex-grow: 1;\n            padding: 0 10px;\n          }\n\n          .date-address { \n            text-align: right; \n            font-size: 9px;\n            line-height: 1.3;\n          }\n\n          .date { font-weight: bold; margin-bottom: 4px; }\n\n          .address { line-height: 1.3; }\n\n          .section { \n            margin-bottom: 12px;\n            page-break-inside: avoid; /* Prevent sections from breaking across pages */\n          }\n\n          .section-title { \n            font-size: 12px; \n            font-weight: bold; \n            margin-bottom: 6px; \n            border-bottom: 1px solid #333; \n            padding-bottom: 10px;\n          }\n\n          .property-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr; \n            gap: 1px; \n            margin-bottom: 8px;\n          }\n\n          .property-item { \n            display: flex; \n            justify-content: space-between; \n            font-size: 9px;\n            line-height: 1.3;\n          }\n\n          .property-label { font-weight: bold; margin-right: 5px; }\n\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 8px; \n            font-size: 8px;\n            page-break-inside: auto;\n          }\n\n          tr { page-break-inside: avoid; page-break-after: auto; }\n\n          th, td { \n            border: 1px solid #ccc; \n            padding: 6px 6px; \n            text-align: left;\n            line-height: 1.2;\n          }\n\n          th { \n            background-color: #f5f5f5; \n            font-weight: bold;\n            font-size: 8px;\n          }\n\n          .financial-grid { \n            display: grid; \n            grid-template-columns: 1fr 1fr 1fr; \n            gap: 8px;\n            margin-bottom: 10px;\n          }\n\n          .financial-item { text-align: center; }\n\n          .financial-label { \n            font-weight: bold; \n            margin-bottom: 3px; \n            font-size: 9px;\n          }\n\n          .financial-value { font-size: 12px; font-weight: bold; }\n\n          /* Page break helpers */\n          .page-break { page-break-after: always; }\n          .no-break { page-break-inside: avoid; }\n\n          @media print {\n            body { \n              margin: 0;\n              padding: 15mm 12mm;\n            }\n            .no-print { display: none !important; }\n            button { display: none !important; }\n          }\n\n        </style>\n\n      </head>\n\n      <body>\n\n        <div class="header">\n\n          <div style="display: flex; flex-direction: column; align-items: flex-start;">\n\n            <img src="/logo.jpeg" alt="Logo" class="logo">\n\n            <div style="font-size: 9px; line-height: 1.2; margin-top: 5px;">\n\n                      Homelife Top Star Realty Inc., Brokerage<br>\n\n      9889 Markham Road, Suite 201 <br>\n\n      Markham, Ontario L6E OB7<br>\n\n        Phone: 905-209-1400\n\n            </div>\n\n          </div>\n\n          <div class="title">Trade Record Sheet</div>\n\n          <div class="date-address">\n\n            <div class="date">').concat(F,'</div>\n\n            <div class="address">\n\n              ').concat(we,"<br>\n\n              ").concat(Ne,"<br>\n\n              ").concat(je,"<br>\n\n              ").concat(Ce,'\n\n            </div>\n\n            <div style="font-size: 10px; font-weight: bold; margin-top: 5px;">\n\n              Trade Number - ').concat(b(n,"keyInfo.tradeNumber")||n.tradeNumber||"-",'\n\n            </div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Property Name</div>\n\n          <div class="property-grid">\n\n            <div class="property-item">\n\n              <span class="property-label">Type:</span>\n\n              <span>').concat(b(n,"keyInfo.propertyType"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Classification:</span>\n\n              <span>').concat(b(n,"keyInfo.classification"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Status:</span>\n\n              <span>').concat(b(n,"keyInfo.status"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">MLS Number:</span>\n\n              <span>').concat(b(n,"keyInfo.mlsNumber"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Offer Date:</span>\n\n              <span>').concat(b(n,"keyInfo.offerDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Entry Date:</span>\n\n              <span>').concat(b(n,"keyInfo.entryDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Firm Date:</span>\n\n              <span>').concat(b(n,"keyInfo.firmDate"),'</span>\n\n            </div>\n\n            <div class="property-item">\n\n              <span class="property-label">Close Date:</span>\n\n              <span>').concat(b(n,"keyInfo.closeDate"),'</span>\n\n            </div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Conditions</div>\n\n          ').concat(n.conditions&&n.conditions.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Condition</th>\n\n                <th>Due Date</th>\n\n                <th>Condition Met Date</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.conditions.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.conditionText||"-","</td>\n\n                  <td>").concat(e.dueDate||"-","</td>\n\n                  <td>").concat(e.conditionMetDate||"Not met","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No conditions available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Contacts</div>\n\n          ').concat(n.people&&n.people.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Type</th>\n\n                <th>First Name</th>\n\n                <th>Last Name</th>\n\n                <th>Primary Phone</th>\n\n                <th>Secondary Phone</th>\n\n                <th>Email</th>\n\n                <th>Company Name</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.people.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.type||"-","</td>\n\n                  <td>").concat(e.firstName||"-","</td>\n\n                  <td>").concat(e.lastName||"-","</td>\n\n                  <td>").concat(e.primaryPhone||"-","</td>\n\n                  <td>").concat(e.secondaryPhone||"-","</td>\n\n                  <td>").concat(e.email||"-","</td>\n\n                  <td>").concat(e.companyName||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No contacts available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Outside Brokers</div>\n\n          ').concat(n.outsideBrokers&&n.outsideBrokers.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Type</th>\n\n                <th>End</th>\n\n                <th>First Name</th>\n\n                <th>Last Name</th>\n\n                <th>Company</th>\n\n                <th>Phone Number</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.outsideBrokers.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.type||"-","</td>\n\n                  <td>").concat(e.end||"-","</td>\n\n                  <td>").concat(e.firstName||"-","</td>\n\n                  <td>").concat(e.lastName||"-","</td>\n\n                  <td>").concat(e.company||"-","</td>\n\n                  <td>").concat(e.primaryPhone||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No outside brokers available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Outside Brokers Commission Details</div>\n\n          ').concat(pe.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>Agent Name</th>\n\n                <th>Brokerage</th>\n\n                <th>End</th>\n\n                <th>Selling Amount</th>\n\n                <th>Tax</th>\n\n                <th>Total</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(pe.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.agentName,"</td>\n\n                  <td>").concat(e.brokerage,"</td>\n\n                  <td>").concat(e.end,"</td>\n\n                  <td>").concat(tE(e.sellingAmount),"</td>\n\n                  <td>").concat(tE(e.tax),"</td>\n\n                  <td>").concat(tE(e.total),"</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No outside brokers commission details available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Deposit</div>\n\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"\n\n          <table>\n\n            <thead>\n\n              <tr>\n\n                <th>We Hold</th>\n\n                <th>Received</th>\n\n                <th>Received From</th>\n\n                <th>Held By</th>\n\n                <th>Deposit Date</th>\n\n                <th>Reference</th>\n\n                <th>Amount</th>\n\n                <th>Payment Type</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              ".concat(n.trustRecords.map(e=>"\n\n                <tr>\n\n                  <td>".concat(e.weHold||"-","</td>\n\n                  <td>").concat(e.received||"-","</td>\n\n                  <td>").concat(e.receivedFrom||"-","</td>\n\n                  <td>").concat(e.heldBy||"-","</td>\n\n                  <td>").concat(e.depositDate||e.date||"-","</td>\n\n                  <td>").concat(e.reference||"-","</td>\n\n                  <td>").concat(tE(e.amount||0),"</td>\n\n                  <td>").concat(e.paymentType||"-","</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No deposit records available.</p>",'\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Financial</div>\n\n          <div style="font-weight:bold; font-size:12px; margin-bottom:4px;">Financial:</div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Selling Price: <span style="font-weight:bold;">').concat(tE(D.sellPrice||(null===(c=n.keyInfo)||void 0===c?void 0:c.sellPrice)||0),'</span></div>\n\n          </div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Listing Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(d=n.keyInfo)||void 0===d?void 0:d.listCommission)||0),'%</span></div>\n\n          </div>\n\n          <div style="margin-bottom:4px; font-size:10px;">\n\n            <div>Selling Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(h=n.keyInfo)||void 0===h?void 0:h.sellCommission)||0),'%</span></div>\n\n          </div>\n\n          <div style="display:flex; font-weight:bold; border-bottom:1px solid #ccc; padding:10px 0; border-top:1px solid #ccc; font-size:9px;">\n\n            <div style="width:25%"></div>\n\n            <div style="width:12%; text-align:center;">Listing</div>\n\n            <div style="width:12%; text-align:center;">Selling</div>\n\n            <div style="width:12%; text-align:center;">Sub-Total</div>\n\n            <div style="width:12%; text-align:center;">HST</div>\n\n            <div style="width:12%; text-align:center;">Total</div>\n\n          </div>\n\n          <div style="font-weight:bold; margin-top:6px; margin-bottom:0; font-size:10px;">Income</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Commission</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(_),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(P),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(U),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(R),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(H),"</div>\n\n          </div>\n\n          ").concat(L?'\n\n          <div style="display:flex; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Base Office Commission</div>\n\n            <div style="width:12%; text-align:center;">'.concat(tE(V),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(z),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(K),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(q),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(G),"</div>\n\n          </div>\n\n          "):'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Expenses</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">'.concat(ee,'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(W),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(Y),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(J),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(Z),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE($),'</div>\n\n          </div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Base Office Commission</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(V),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(z),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(K),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(q),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(G),"</div>\n\n          </div>\n\n          "),'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Agents</div>\n\n          ').concat(te.map(e=>'\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">('.concat(e.agentId||"",") ").concat(e.agentName||"",'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentListing||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentSelling||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentSubTotal||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentHST||"0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(e.agentTotal||"0.00"),"</div>\n\n          </div>\n\n          ")).join(""),"\n\n          \n\n          \x3c!-- Liabilities Section --\x3e\n\n          ").concat(ne>0?'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Liabilities</div>\n\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n\n            <div style="width:25%">Buyer Rebate</div>\n\n            <div style="width:12%; text-align:center;">'.concat(tE(he),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(me),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE((parseFloat(he)+parseFloat(me)).toFixed(2)),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE("0.00"),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE((parseFloat(he)+parseFloat(me)).toFixed(2)),"</div>\n\n          </div>\n\n          "):"",'\n\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Net to Office</div>\n\n          <div style="display:flex; border-bottom:3px double #000; padding:10px 0; font-size:9px;">\n\n            <div style="width:25%"></div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(re),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(se),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(ae),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(ie),'</div>\n\n            <div style="width:12%; text-align:center;">').concat(tE(oe),'</div>\n\n          </div>\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Agent Details</div>\n\n          ').concat(n.agentCommissionList&&n.agentCommissionList.length>0?'\n\n          <table style="width:100%; border-collapse:collapse; margin-bottom:10px;">\n\n            <thead>\n\n              <tr style="background-color:#f2f2f2;">\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Name</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Number</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Payment Plan</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Base</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Plan Amount</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Buyer Rebate</th>\n\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Total</th>\n\n              </tr>\n\n            </thead>\n\n            <tbody>\n\n              '.concat(n.agentCommissionList.map(e=>'\n\n                <tr>\n\n                  <td style="border:1px solid #ddd; padding:4px;">'.concat(e.agentName||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(e.agentId||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat($S(e.feeInfo)||"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(e.amount||0),'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(e.feesDeducted||0),'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?tE(e.buyerRebateAmount):"-",'</td>\n\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(tE(parseFloat(e.amount||0)-parseFloat(e.feesDeducted||0)-("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?parseFloat(e.buyerRebateAmount||0):0)),"</td>\n\n                </tr>\n\n              ")).join(""),"\n\n            </tbody>\n\n          </table>\n\n          "):"<p>No agent payment details available.</p>",'\n\n        </div>\n\n        <br/><br/><br/><br/><br/><br/><br/>\n        <div class="section">\n\n          <div class="section-title">Trust Activity</div>\n\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"<table><thead><tr>\n\n                  <th>Received From</th><th>Deposit Date</th><th>Reference</th><th>Amount</th>\n\n                </tr></thead><tbody>\n\n                ".concat(n.trustRecords.map(e=>"<tr>\n\n                      <td>".concat(e.receivedFrom||"-","</td>\n\n                      <td>").concat(e.depositDate||e.date||"-","</td>\n\n                      <td>").concat(e.reference||"-","</td>\n\n                      <td>").concat(tE(e.amount||0),"</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No trust records available.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Real Estate Trust Payments</div>\n\n          ').concat(I.length>0?"<table><thead><tr>\n\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n\n                </tr></thead><tbody>\n\n                ".concat(I.map(e=>"<tr>\n\n                      <td>".concat(e.eftNumber||"","</td>\n\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n\n                      <td>").concat(tE(e.amount||""),"</td>\n\n                      <td>").concat(e.recipient||"","</td>\n\n                      <td>").concat(ZS(e.type)||"","</td>\n\n                      <td>").concat(e.description||"","</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No Real Estate Trust Payments found for this trade.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Commission Trust Payments</div>\n\n          ').concat(T.length>0?"<table><thead><tr>\n\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n\n                </tr></thead><tbody>\n\n                ".concat(T.map(e=>"<tr>\n\n                      <td>".concat(e.eftNumber||"","</td>\n\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n\n                      <td>").concat(tE(e.amount||""),"</td>\n\n                      <td>").concat(e.recipient||"","</td>\n\n                      <td>").concat(ZS(e.type)||"","</td>\n\n                      <td>").concat(e.description||"","</td>\n\n                    </tr>")).join(""),"\n\n                </tbody></table>"):'<div class="text-gray-500">No Commission Trust Payments found for this trade.</div>','\n\n        </div>\n\n\n\n        <div class="section">\n\n          <div class="section-title">Commission Trust Agreement</div>\n\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n\n            It is understood between all parties that this agreement shall constitute a Commission Trust Agreement as set out in the contract.\n\n          </div>\n\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n\n            To the best of my knowledge the above information is correct. Dated at Moncton on ').concat(F,'\n\n          </div>\n\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">\n\n            <div style="font-size: 10px;">\n\n              ').concat(te.length>0?"".concat(te[0].agentName||"Agent Name",", ").concat(te[0].agentId||"Agent Number"):"Agent Name, Agent Number",'\n\n            </div>\n\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n\n          </div>\n\n          <div style="display: flex; justify-content: space-between; align-items: center;">\n\n            <div style="font-size: 10px;">\n\n              Broker of Record: Homelife Top Star Realty Inc., Brokerage\n\n            </div>\n\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n          </div>\n        </div>\n      </body>\n      </html>\n\n    ');k.open(),k.write(Be),k.close(),await new Promise(e=>setTimeout(e,1e3)),console.log("\ud83d\udd04 Converting HTML to PDF...");const Se=await G_(k.body,"Trade_".concat(n.tradeNumber,".pdf"));if(console.log("\u2705 PDF generated, size:",Math.round(Se.size/1024),"KB"),A.parentNode&&document.body.removeChild(A),Se.size<500)throw new Error("PDF generated but appears to be empty");const Ee=await W_(Se),ke="data:application/pdf;base64,".concat(Ee),Fe="Trade_".concat(n.tradeNumber,"_").concat(Date.now(),".pdf");console.log("\ud83d\udce4 Uploading PDF to Dropbox...");let Ie=p;try{const e=await nN.post("/dropbox/upload-pdf-to-dropbox",{pdfBase64:ke,fileName:Fe,accessToken:Ie});if(e.data.success)return alert("\u2705 SUCCESS!\n\nPDF uploaded to Dropbox!\n\nFile: ".concat(e.data.file.name,"\nSize: ").concat(Math.round(Se.size/1024)," KB\nPath: ").concat(e.data.file.path)),void u(!1)}catch(S){var v,w,N,j,C;if(401===(null===(v=S.response)||void 0===v?void 0:v.status)||null!==(w=S.response)&&void 0!==w&&null!==(N=w.data)&&void 0!==N&&N.needsTokenRefresh){console.log("\ud83d\udd04 Token expired, refreshing...");const e=localStorage.getItem("dropboxRefreshToken");if(!e)return localStorage.removeItem("dropboxAccessToken"),f(null),alert('\u274c Session expired. Please click "Send to Dropbox" again to re-authenticate.'),void u(!1);try{const t=await nN.post("/dropbox/refresh-token",{refreshToken:e});if(t.data.success){const e=t.data.accessToken;localStorage.setItem("dropboxAccessToken",e),f(e),console.log("\u2705 Token refreshed, retrying upload...");const n=await nN.post("/dropbox/upload-pdf-to-dropbox",{pdfBase64:ke,fileName:Fe,accessToken:e});if(n.data.success)return alert("\u2705 SUCCESS!\n\nPDF uploaded to Dropbox!\n\nFile: ".concat(n.data.file.name,"\nSize: ").concat(Math.round(Se.size/1024)," KB\nPath: ").concat(n.data.file.path)),void u(!1)}}catch(E){return console.error("Token refresh failed:",E),localStorage.removeItem("dropboxAccessToken"),localStorage.removeItem("dropboxRefreshToken"),f(null),x(null),alert('\u274c Session expired. Please click "Send to Dropbox" to re-authenticate.'),void u(!1)}}console.error("Upload error:",S),alert("\u274c Upload failed: ".concat((null===(j=S.response)||void 0===j||null===(C=j.data)||void 0===C?void 0:C.message)||S.message)),u(!1)}}catch(k){console.error("PDF generation error:",k),alert("\u274c Error: ".concat(k.message||"Failed to generate PDF")),u(!1)}}},disabled:A,className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Rm.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Rm.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Rm.jsx)("path",{d:"M17.464 6.56c-.37-.33-.888-.33-1.32 0L12 10.7 7.84 6.56c-.43-.33-.95-.33-1.32 0-.37.33-.37.86 0 1.19l4.72 4.72c.18.18.43.28.68.28s.5-.1.68-.28l4.72-4.72c.37-.33.37-.86.06-1.19zM12 15.5c-2.33 0-4.47-.82-6.14-2.18l-.01.01A8.02 8.02 0 0112 4c3.87 0 7.13 2.75 7.9 6.4.13.64.2 1.3.2 1.98 0 4.42-3.58 8-8 8zm0-18C5.93-2.5.93 2.5.93 8.57c0 2.77 1.02 5.3 2.71 7.24 0 0 0 .01.01.01 1.92 2.21 4.72 3.6 7.85 3.6 5.8 0 10.5-4.7 10.5-10.5C21.93 3.08 17.43-1.42 12-1.42z"})}),"Send to Dropbox"]})}),(0,Rm.jsx)("button",{onClick:()=>l(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:"Edit"}),(0,Rm.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2",onClick:r,style:{lineHeight:1},children:"\xd7"})]}),o?(0,Rm.jsx)(oE,{trade:n,onClose:()=>l(!1),onUpdate:s}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-yellow-700 mt-8",children:["Trade Details: #",n.tradeNumber]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Address"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Street #"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.streetNumber")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Street Name"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.streetName")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Unit"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.unit")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"City"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.city")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Province"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.province")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Postal Code"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.postalCode")]})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Offer Date"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.offerDate")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Firm Date"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.firmDate")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Close Date"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.closeDate")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Entry Date"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.entryDate")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Finalized Date"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.finalizedDate")]})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Key Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Listing Number"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.listingNumber")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Sell Price"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.sellPrice")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Classification"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.classification")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Firm"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.firm")]})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-2",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"List %"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.listCommission")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Sell %"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.sellCommission")]})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Property Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Property Type"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.propertyType")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"Status"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.status")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"MLS #"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.mlsNumber")]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-500 font-normal",children:"We Manage"}),(0,Rm.jsx)("br",{}),b(n,"keyInfo.weManage")]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"People Information"}),n.people&&n.people.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Primary Phone"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Secondary Phone"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Email"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Company Name"})]})}),(0,Rm.jsx)("tbody",{children:n.people.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.type}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.primaryPhone||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.secondaryPhone||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.email||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.companyName||"-"})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No people information available."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Outside Brokers"}),n.outsideBrokers&&n.outsideBrokers.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"End"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Company"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Phone Number"})]})}),(0,Rm.jsx)("tbody",{children:n.outsideBrokers.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.type||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.end||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.company||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.primaryPhone||"-"})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No outside brokers information available."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Outside Brokers Commission Details"}),n.commission&&n.commission.outsideBrokersRows&&n.commission.outsideBrokersRows.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Brokerage"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"End"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Selling Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:n.commission.outsideBrokersRows.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.brokerage||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:(e=>{var t,r,s;const a=null===(t=n.outsideBrokers)||void 0===t?void 0:t.find(t=>"".concat(t.firstName," ").concat(t.lastName).trim()===e.agentName||t.company===e.brokerage);var i,o;if(a&&(null!==(i=a.end)&&void 0!==i&&i.toLowerCase().includes("listing")||null!==(o=a.type)&&void 0!==o&&o.toLowerCase().includes("listing")))return"Listing";return null!==(r=e.end)&&void 0!==r&&r.toLowerCase().includes("listing")||null!==(s=e.type)&&void 0!==s&&s.toLowerCase().includes("listing")?"Listing":"Selling"})(e)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.sellingAmount)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.tax)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.total)})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No outside brokers commission details available."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Trust Records"}),n.trustRecords&&n.trustRecords.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"We Hold"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Received"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Received From"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Held By"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Deposit Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Payment Type"})]})}),(0,Rm.jsx)("tbody",{children:n.trustRecords.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.weHold||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.received||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.receivedFrom||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.heldBy||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.depositDate||e.date||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.reference||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.amount||"-")}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.paymentType||"-"})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No trust records."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Conditions"}),n.conditions&&n.conditions.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Condition"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Due Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Condition Met Date"})]})}),(0,Rm.jsx)("tbody",{children:n.conditions.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.conditionText||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.dueDate||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.conditionMetDate||"Not met"})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No conditions available."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission Details"}),n.commission&&(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-1",children:"Sale Closing Rows"}),y(n.commission.saleClosingRows)]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-1",children:"Commission Income Rows"}),y(n.commission.commissionIncomeRows)]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-1",children:"Outside Brokers Rows"}),y(n.commission.outsideBrokersRows)]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Agent Commission Info"}),n.agentCommissionList&&n.agentCommissionList.length>0?(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Classification"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Net Commission"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Lead"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Fee Info"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total Fees"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:n.agentCommissionList.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.agentName}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.classification}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.amount)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.netCommission)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lead}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:$S(e.feeInfo)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.totalFees)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.tax)}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:tE(e.total)})]},t))})]}):(0,Rm.jsx)("div",{className:"text-gray-500",children:"No agent commission data."})]}),(0,Rm.jsx)(v,{trade:n})]})]})})},X_=["EFT","Cheque","Wire","Cash"],J_=e=>{var n,r,s,a,i,o,l,c,d;let{trade:A,onClose:u}=e;const h=new Date,m="".concat(h.getFullYear(),"-").concat(String(h.getMonth()+1).padStart(2,"0"),"-").concat(String(h.getDate()).padStart(2,"0"));function p(e){if(!e)return"";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)}const[f,g]=(0,t.useState)(m),[x,b]=(0,t.useState)((null===A||void 0===A||null===(n=A.keyInfo)||void 0===n?void 0:n.closeDate)||""),[y,v]=(0,t.useState)(""),[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[B,S]=(0,t.useState)(""),[E,k]=(0,t.useState)(""),[F,I]=(0,t.useState)(X_[0]),[T,D]=(0,t.useState)(""),[L,_]=(0,t.useState)([]),[P,U]=(0,t.useState)([]),[O,Q]=(0,t.useState)([]),[R,H]=(0,t.useState)(!1);(0,t.useEffect)(()=>{null!==A&&void 0!==A&&A._id&&(nN.get("/commission-trust-eft/trade/".concat(A._id)).then(e=>_(e.data)).catch(()=>_([])),nN.get("/real-estate-trust-eft/trade/".concat(A._id)).then(e=>U(e.data)).catch(()=>U([])),nN.get("/ledger?tradeId=".concat(A._id)).then(e=>Q(e.data)).catch(()=>Q([])))},[null===A||void 0===A?void 0:A._id]),(0,t.useEffect)(()=>{"No"===V()&&v("Selling Side")},[A]),(0,t.useEffect)(()=>{D("")},[null===A||void 0===A?void 0:A._id]);const M=()=>null!==A&&void 0!==A&&A.trustRecords&&A.trustRecords.length>0&&A.trustRecords[0].amount||"-",V=()=>null!==A&&void 0!==A&&A.trustRecords&&A.trustRecords.length>0&&A.trustRecords[0].weHold||"-",z=(()=>{var e;const t=(null===A||void 0===A||null===(e=A.commission)||void 0===e?void 0:e.commissionIncomeRows)||[];let n=t.find(e=>"Listing Side"===e.end),r=t.find(e=>"Selling Side"===e.end);return!n&&t.length>0&&(n=t[0]),!r&&t.length>0&&(r=t[0]),{listing:n,selling:r}})(),K=((null===A||void 0===A?void 0:A.agentCommissionList)||[])[0]||{},q=(null===A||void 0===A?void 0:A.agentCommissionList)||[],G=()=>q[0]||{},W=()=>q[1]||{},Y=()=>2===q.length,X=()=>{let e=0;var t;if("Selling Side"===y)e=parseFloat((null===(t=z.selling)||void 0===t?void 0:t.sellingAmount)||0);else if("Listing Side"===y){var n;e=parseFloat((null===(n=z.listing)||void 0===n?void 0:n.listingAmount)||0)}const r=.13*e,s=e+r;return{commission:e?e.toFixed(2):"-",tax:e?r.toFixed(2):"-",total:e?s.toFixed(2):"-"}},{commission:J,tax:Z,total:$}=X(),ee=()=>{var e,t,n,r;const s=parseFloat((null===(e=z.listing)||void 0===e?void 0:e.listingAmount)||0)+parseFloat((null===(t=z.selling)||void 0===t?void 0:t.sellingAmount)||0)+parseFloat((null===(n=z.listing)||void 0===n?void 0:n.listingTax)||0)+parseFloat((null===(r=z.selling)||void 0===r?void 0:r.sellingTax)||0);return s>0?s.toFixed(2):"-"},te=()=>{const e=(A.agentCommissionList||[]).reduce((e,t)=>"yes"===t.buyerRebateIncluded&&t.buyerRebateAmount?e+parseFloat(t.buyerRebateAmount||0):e,0);return e>0?e.toFixed(2):"-"},ne=()=>{const e=(null===A||void 0===A?void 0:A.keyInfo)||{};return"".concat(e.streetNumber||""," ").concat(e.streetName||"").trim()};(0,t.useEffect)(()=>{if(j){const e=V(),t=parseFloat(M())||0,n=parseFloat(ee())||0;if("No"===e){const e=(()=>{if(null!==A&&void 0!==A&&A.outsideBrokers&&A.outsideBrokers.length>0){const e=A.outsideBrokers.find(e=>{var t;return"Listing Broker"===e.type||(null===(t=e.end)||void 0===t?void 0:t.toLowerCase().includes("listing"))});return(null===e||void 0===e?void 0:e.company)||""}return""})();e&&!B.trim()&&S(e);const t=(()=>{var e,t;return(parseFloat((null===(e=z.selling)||void 0===e?void 0:e.sellingAmount)||0)+parseFloat((null===(t=z.selling)||void 0===t?void 0:t.sellingTax)||0)).toFixed(2)})();"0.00"===t||E.trim()||k(t)}else if("Yes"===e&&n>t){const e=(n-t).toFixed(2);"0.00"===e||E.trim()||k(e)}}},[j,A,B,E]);const re=e=>O.filter(t=>String(t.eftNumber)===String(e)),se=async()=>{try{const e=await nN.get("/eft/next-number");return e.data&&e.data.eftNumber?e.data.eftNumber:ae()}catch(e){return console.error("Error getting next EFT number from backend:",e),ae()}},ae=()=>{const e=O.filter(e=>e.eftNumber&&e.eftNumber.startsWith("EFT")).map(e=>{const t=e.eftNumber.match(/EFT(\d+)/);return t?parseInt(t[1]):0}).sort((e,t)=>t-e);return e.length>0?Math.max(...e)+1:300},ie=()=>{let e;e=A.isFinalized?O.filter(e=>e.description&&e.description.includes("Trade #: ".concat(A.tradeNumber))&&!e.description.includes("Paid to:")&&!e.description.includes("Received from:")&&!(e.description.includes("Commission Trust Payment")&&!e.description.includes("Received From:")&&!e.description.includes("Trade #:"))):(()=>{var e,t,n,r;const s=ne(),a="Trade #: ".concat(A.tradeNumber," - ").concat(s),i=f,o=x||m;console.log("=== getTransactionDetails - Date Assignment ==="),console.log("Finalized Date (Blue section):",i),console.log("Closing Date (Red section):",o);const l=parseFloat(M())||0;let c,d,u,h,p;if(Y()){const e=G(),t=W();c=parseFloat(e.netCommission||0)+parseFloat(t.netCommission||0),d=parseFloat(e.amount||0)+parseFloat(t.amount||0),u=parseFloat(e.tax||0)+parseFloat(t.tax||0),h=parseFloat(e.feesDeducted||0)+parseFloat(t.feesDeducted||0),p=(e.feesDeducted?.13*parseFloat(e.feesDeducted):0)+(t.feesDeducted?.13*parseFloat(t.feesDeducted):0)}else c=parseFloat(K.netCommission||0),d=parseFloat(K.amount||0),u=parseFloat(K.tax||0),h=parseFloat(K.feesDeducted||0),p=K.totalFees&&K.feesDeducted?parseFloat(K.totalFees)-parseFloat(K.feesDeducted):0;const g=parseFloat((null===(e=z.listing)||void 0===e?void 0:e.listingAmount)||0),b=parseFloat((null===(t=z.listing)||void 0===t?void 0:t.listingTax)||0),y=parseFloat((null===(n=z.selling)||void 0===n?void 0:n.sellingAmount)||0),v=parseFloat((null===(r=z.selling)||void 0===r?void 0:r.sellingTax)||0),w=V(),N=parseFloat(E)||0,j="Trade #: ".concat(A.tradeNumber," - Received From: ").concat(B);if("Yes"===w){console.log("=== We Hold = Yes - Creating Transaction Preview ==="),console.log("Blue section (transactions 1-9) will use date:",i),console.log("Red section (transactions 10-12) will use date:",o);let e=[];if(Y()){var C;const t=G(),n=W();e=[{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:b,credit:0,description:a,date:i},{accountNumber:"51100",accountName:"Outside Broker Commission",debit:g,credit:0,description:a,date:i},{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:y+v,description:a,date:i},..."Lease"===(null===A||void 0===A||null===(C=A.keyInfo)||void 0===C?void 0:C.dealType)?[{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:Math.abs(l-(g+y+b+v)),description:a,date:i}]:[{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:Math.abs(l-(g+y+b+v)),credit:0,description:a,date:i}],{accountNumber:"21300",accountName:"Deposit Liability",debit:l,credit:0,description:a,date:i},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:b+v,description:a,date:i},{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:g+y,description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:t.feesDeducted?.13*parseFloat(t.feesDeducted):0,description:a,date:i},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(t.feesDeducted||0),description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:v,credit:0,description:a,date:i},{accountNumber:"50100",accountName:"Agent's Commission",debit:y,credit:0,description:a,date:i},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(t.netCommission||0),description:a,date:i},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(n.netCommission||0),description:a,date:i},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(n.feesDeducted||0),description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:n.feesDeducted?.13*parseFloat(n.feesDeducted):0,description:a,date:i}]}else e=[{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:c,description:a,date:i},{accountNumber:"50100",accountName:"Agent's Commission",debit:g,credit:0,description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:u,credit:0,description:a,date:i},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:h,description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:p,description:a,date:i},{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:g+y,description:a,date:i},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:b+v,description:a,date:i},{accountNumber:"21300",accountName:"Deposit Liability",debit:l,credit:0,description:a,date:i},...l>=g+y+b+v?[{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:l-(g+y+b+v),description:a,date:i}]:[{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:g+y+b+v-l,credit:0,description:a,date:i}],{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:y+v,description:a,date:i},{accountNumber:"51100",accountName:"Outside Broker Commission",debit:y,credit:0,description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:v,credit:0,description:a,date:i}];const t=parseFloat(ee())||0;if(t>l&&(!Y()||N>0)){const n=t-l,r="Trade #: ".concat(A.tradeNumber," - ").concat(s," - Received From: ").concat(B);e.push({accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:n,credit:0,description:r,date:o}),e.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:n,description:r,date:o})}return e}{const e=X().commission,t=X().tax,n=[{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:parseFloat(e),description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(t),credit:0,description:a,date:i},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:parseFloat(t),description:a,date:i},{accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(K.amount||0),credit:0,description:a,date:i},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(K.netCommission||0),description:a,date:i},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(K.feesDeducted||0),description:a,date:i},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:parseFloat(K.totalFees&&K.feesDeducted?parseFloat(K.totalFees)-parseFloat(K.feesDeducted):0),description:a,date:i}];if(Y()){const e=W();n.push({accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(e.amount||0),credit:0,description:a,date:i}),n.push({accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(e.netCommission||0),description:a,date:i}),n.push({accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(e.feesDeducted||0),description:a,date:i}),n.push({accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:e.feesDeducted?.13*parseFloat(e.feesDeducted):0,description:a,date:i})}return N>0&&(n.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:N,credit:0,description:a,date:i}),n.push({accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:N,credit:0,description:j,date:o}),n.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:N,description:j,date:o})),n}})();let t=0,n=0;e.forEach(e=>{t+=Number(e.debit)||0,n+=Number(e.credit)||0});const r=(n-t).toFixed(2),s=O.filter(e=>("10002"===e.accountNumber||"21300"===e.accountNumber)&&e.description&&e.description.includes("Trade #: ".concat(A.tradeNumber))&&e.description.includes("Received from")).map(e=>'\n\n        <tr>\n\n          <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(eE(e.date||f||m),'</td>\n\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountNumber||"",'</td>\n\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountName||"",'</td>\n\n          <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.debit?Number(e.debit).toFixed(2):"",'</td>\n\n          <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.credit?Number(e.credit).toFixed(2):"",'</td>\n\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.description||"","</td>\n\n        </tr>\n\n      ")).join("");let a=0,i=0;O.filter(e=>("10002"===e.accountNumber||"21300"===e.accountNumber)&&e.description&&e.description.includes("Trade #: ".concat(A.tradeNumber))&&e.description.includes("Received from")).forEach(e=>{a+=Number(e.debit)||0,i+=Number(e.credit)||0});const o=(i-a).toFixed(2);let l=0,c=0;const d=L.map(e=>{const t=re(e.eftNumber);return t.length?t.map(t=>{l+=Number(t.debit)||0,c+=Number(t.credit)||0;const n=t.chequeDate||t.date||e.date||f||m;return'\n\n          <tr>\n\n            <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(eE(n),'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountNumber||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountName||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.debit?Number(t.debit).toFixed(2):"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.credit?Number(t.credit).toFixed(2):"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.description||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n\n          </tr>\n\n        ")}).join(""):""}).join(""),u=(c-l).toFixed(2);let h=0,p=0;const g=P.map(e=>{const t=re(e.eftNumber).filter(e=>e.description&&e.description.includes("Trade #: ".concat(A.tradeNumber))),n=e.date?e.date:f||m;return"CommissionTransfer"===e.type?(e.amount&&(h+=Number(e.amount)||0,p+=Number(e.amount)||0),['<tr>\n\n              <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(eE(n),'</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">10004</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">CASH - COMMISSION TRUST ACCOUNT</td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.amount?Number(e.amount).toFixed(2):"",'</td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"></td>\n\n              <td style="border: 1px solid #000; padding: 8px;">Commission Transfer for Trade #: ').concat(A.tradeNumber,'</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n\n            </tr>"),'<tr>\n\n              <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(eE(n),'</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">10002</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">CASH - TRUST</td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.amount?Number(e.amount).toFixed(2):"",'</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">Commission Transfer for Trade #: ').concat(A.tradeNumber,'</td>\n\n              <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n\n            </tr>")].join("")):(t.forEach(e=>{h+=Number(e.debit)||0,p+=Number(e.credit)||0}),t.map(t=>{const r=t.chequeDate||t.date||n;return'\n\n          <tr>\n\n            <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(eE(r),'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountNumber||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountName||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.debit?Number(t.debit).toFixed(2):"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.credit?Number(t.credit).toFixed(2):"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.description||"",'</td>\n\n            <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n\n          </tr>\n\n        ")}).join(""))}).join(""),b=(p-h).toFixed(2),y=(null===A||void 0===A?void 0:A.keyInfo)||{},v="".concat(y.streetNumber||""," ").concat(y.streetName||"").trim(),w=y.postalCode||"",N=y.city||"",j=y.province||"",C=window.open("","","width=900,height=700"),S='\n\n      <html>\n\n      <head>\n\n        <title>Transaction Details</title>\n\n        <style>\n\n          body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n\n          h2 { margin-bottom: 20px; }\n\n          h3 { margin-top: 30px; margin-bottom: 10px; font-size: 15px; }\n\n          .header { margin-bottom: 30px; }\n\n          .header div { margin-bottom: 2px; }\n\n          table { border-collapse: collapse; width: 100%; margin-bottom: 20px; font-size: 12px; }\n\n          th, td { border: 1px solid #ccc; padding: 6px 10px; text-align: left; }\n\n          th { background: #f5f5f5; }\n\n          @media print { .no-print { display: none !important; } }\n\n        </style>\n\n      </head>\n\n      <body>\n\n        <div class="header">\n\n          <div><b>HOMELIFE TOP STAR REALTY INC., BROKERAGE</b></div>\n\n          <div>Trade #: '.concat(A.tradeNumber,"</div>\n\n          <div>").concat(v).concat(v&&(N||j||w)?",":""," ").concat(N).concat(N&&j?",":""," ").concat(j," ").concat(w,"</div>\n\n        </div>\n\n        <h2>Transaction Details for Trade #").concat(A.tradeNumber,'</h2>\n\n        <table style="width: 100%; border-collapse: collapse;">\n\n          <thead>\n\n            <tr>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n\n            </tr>\n\n          </thead>\n\n          <tbody>\n\n            ').concat(e.map((e,t)=>'\n\n                  <tr>\n\n                    <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(e.date||f||m,'</td>\n\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountNumber,'</td>\n\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountName,'</td>\n\n                    <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(0!==e.debit?e.debit.toFixed(2):"",'</td>\n\n                    <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(0!==e.credit?e.credit.toFixed(2):"",'</td>\n\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.description,"</td>\n\n                  </tr>\n\n                ")).join(""),'\n\n          </tbody>\n\n          <tfoot>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(t.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(n.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px;"></td>\n\n            </tr>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(r,"</b></td>\n\n            </tr>\n\n          </tfoot>\n\n        </table>\n\n        ").concat(s||d||g?'<div style="page-break-inside: avoid;">\n\n                '.concat(s?'<h3>Trust Deposit Transactions</h3>\n\n        <table style="width: 100%; border-collapse: collapse;">\n\n          <thead>\n\n            <tr>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n\n            </tr>\n\n          </thead>\n\n          <tbody>\n\n            '.concat(s,'\n\n          </tbody>\n\n          <tfoot>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(a.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(i.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px;"></td>\n\n            </tr>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(o,"</b></td>\n\n            </tr>\n\n          </tfoot>\n\n        </table>"):"","\n\n                ").concat(d?'<h3>Commission Trust Payments</h3>\n\n        <table style="width: 100%; border-collapse: collapse;">\n\n          <thead>\n\n            <tr>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">EFT #</th>\n\n            </tr>\n\n          </thead>\n\n          <tbody>\n\n            '.concat(d,'\n\n          </tbody>\n\n          <tfoot>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(l.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(c.toFixed(2),'</b></td>\n\n              <td colspan="2" style="border: 1px solid #000; padding: 8px;"></td>\n\n            </tr>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n\n              <td colspan="4" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(u,"</b></td>\n\n            </tr>\n\n          </tfoot>\n\n        </table>"):"","\n\n                ").concat(g?'<h3>Real Estate Trust Payments</h3>\n\n        <table style="width: 100%; border-collapse: collapse;">\n\n          <thead>\n\n            <tr>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">EFT #</th>\n\n            </tr>\n\n          </thead>\n\n          <tbody>\n\n            '.concat(g,'\n\n          </tbody>\n\n          <tfoot>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(h.toFixed(2),'</b></td>\n\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(p.toFixed(2),'</b></td>\n\n              <td colspan="2" style="border: 1px solid #000; padding: 8px;"></td>\n\n            </tr>\n\n            <tr>\n\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n\n              <td colspan="4" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(b,"</b></td>\n\n            </tr>\n\n          </tfoot>\n\n        </table>"):"","\n\n              </div>"):"",'\n\n        <button onclick="window.print()" class="no-print" style="padding:10px 20px;font-size:16px;">Print</button>\n\n      </body>\n\n      </html>\n\n    ');C.document.write(S),C.document.close()};return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl",onClick:()=>{D(""),u&&u()},children:"\xd7"}),(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Finalize Trade"}),"Yes"===V()?(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:f,onChange:e=>g(e.target.value)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 ".concat(x||"Yes"!==V()?"bg-gray-50":"bg-red-50 border-red-300"),children:p(x)}),!x&&"Yes"===V()&&(0,Rm.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Closing date is required when We Hold = Yes"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Deposit Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:M()})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"We Hold"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:V()})]}),Y()?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Net Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Net Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 HST Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().tax||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 HST Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().tax||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Listing Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(r=z.listing)||void 0===r?void 0:r.listingAmount)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Listing Tax"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(s=z.listing)||void 0===s?void 0:s.listingTax)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Selling Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(a=z.selling)||void 0===a?void 0:a.sellingAmount)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Selling Tax"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(i=z.selling)||void 0===i?void 0:i.sellingTax)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Total Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:ee()})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Tax on Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().feesDeducted?(.13*parseFloat(G().feesDeducted)).toFixed(2):"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Tax on Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().feesDeducted?(.13*parseFloat(W().feesDeducted)).toFixed(2):"-"})]})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent Net"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent HST"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.tax||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Listing Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(o=z.listing)||void 0===o?void 0:o.listingAmount)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Listing Tax"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(l=z.listing)||void 0===l?void 0:l.listingTax)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Selling Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(c=z.selling)||void 0===c?void 0:c.sellingAmount)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Selling Tax"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(d=z.selling)||void 0===d?void 0:d.sellingTax)||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Total Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:ee()})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Tax on Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.totalFees&&K.feesDeducted?(parseFloat(K.totalFees)-parseFloat(K.feesDeducted)).toFixed(2):"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Buyer Rebate"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:te()})]})]})]}):(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:f,onChange:e=>g(e.target.value)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:x,onChange:e=>b(e.target.value)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"End"}),(0,Rm.jsxs)("select",{className:"border rounded px-2 py-1 w-full",value:"No"===V()?"Selling Side":y,onChange:e=>v(e.target.value),disabled:"No"===V(),children:[(0,Rm.jsx)("option",{value:"",children:"Select"}),(0,Rm.jsx)("option",{value:"Listing Side",children:"Listing Side"}),(0,Rm.jsx)("option",{value:"Selling Side",children:"Selling Side"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Deposit Amount"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:M()})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"We Hold"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:V()})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:J})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Tax"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:Z})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Total"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:$})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Total Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:ee()})]}),Y()?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Net"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Net"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 1 Tax for Deduction"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G().feesDeducted?(.13*parseFloat(G().feesDeducted)).toFixed(2):"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent 2 Tax for Deduction"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W().feesDeducted?(.13*parseFloat(W().feesDeducted)).toFixed(2):"-"})]})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent Commission"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.amount||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Agent Net"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.netCommission||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Fees Deducted"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.feesDeducted||"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Tax For Deduction"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:K.totalFees&&K.feesDeducted?(parseFloat(K.totalFees)-parseFloat(K.feesDeducted)).toFixed(2):"-"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Buyer Rebate"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:te()})]})]})]}),(0,Rm.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"fallenThru",checked:R,onChange:e=>H(e.target.checked),className:"mr-2"}),(0,Rm.jsx)("label",{htmlFor:"fallenThru",className:"font-medium",children:"Fallen Thru"})]}),(0,Rm.jsxs)("div",{className:"flex gap-2",children:[(0,Rm.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:ie,disabled:w,children:"Print Details"}),(0,Rm.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:async()=>{if(A.isFinalized)return void bp.error("This trade is already finalized.");if(!f)return void bp.error("Please enter the finalized date.");const e=V();if("Yes"===e&&!x)return void bp.error("Please ensure the closing date is set when 'We Hold = Yes'.");if(R){try{const e=await nN.post("/trades/finalize/".concat(A.tradeNumber),{fallenThru:!0,finalizedDate:f});e.data&&e.data.success?(bp.success("Trade marked as Fallen Thru. No transactions processed."),D(""),u&&u()):bp.error(e.data.message||"Failed to mark trade as Fallen Thru.")}catch(l){l.response&&l.response.data&&l.response.data.message?bp.error(l.response.data.message):bp.error("An error occurred while marking trade as Fallen Thru.")}return}const t=parseFloat(M())||0,n=parseFloat(ee())||0;if("No"===e||n>t)se().then(e=>{console.log("Generated EFT number:",e),D(e),C(!0)}).catch(e=>{console.error("Error generating EFT number:",e);const t=ae();console.log("Using local EFT number:",t),D(t),C(!0)});else try{var r,s,a,i;const e=ne(),t="Trade #: ".concat(A.tradeNumber," - ").concat(e),n=f,c=x||m,d=parseFloat(M())||0;let h,p,g,b,y;if(Y()){const e=G(),t=W();h=parseFloat(e.netCommission||0)+parseFloat(t.netCommission||0),p=parseFloat(e.awardAmount||0)+parseFloat(t.awardAmount||0),g=parseFloat(e.tax||0)+parseFloat(t.tax||0),b=parseFloat(e.feesDeducted||0)+parseFloat(t.feesDeducted||0);const n=e.feesDeducted?.13*parseFloat(e.feesDeducted):0;y=n+(t.feesDeducted?.13*parseFloat(t.feesDeducted):0)}else h=parseFloat(K.netCommission||0),p=parseFloat(K.amount||0),g=parseFloat(K.tax||0),b=parseFloat(K.feesDeducted||0),y=K.totalFees&&K.feesDeducted?parseFloat(K.totalFees)-parseFloat(K.feesDeducted):0;const v=parseFloat((null===(r=z.listing)||void 0===r?void 0:r.listingAmount)||0),w=parseFloat((null===(s=z.listing)||void 0===s?void 0:s.listingTax)||0),N=parseFloat((null===(a=z.selling)||void 0===a?void 0:a.sellingAmount)||0),j=parseFloat((null===(i=z.selling)||void 0===i?void 0:i.sellingTax)||0);console.log("=== WE HOLD = YES - Starting ledger transactions ==="),console.log("Commission Description:",t),console.log("Commission Date (Blue section):",n),console.log("Closing Date (Red section):",c),console.log("Trade Number:",A.tradeNumber),console.log("Address:",e);try{if(Y()){var o;console.log("=== POSTING DUAL AGENT TRANSACTIONS ===");const r=G(),s=W(),a=[{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:w,credit:0,description:t,date:n},{accountNumber:"51100",accountName:"Outside Broker Commission",debit:v,credit:0,description:t,date:n},{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:N+j,description:t,date:n},..."Lease"===(null===A||void 0===A||null===(o=A.keyInfo)||void 0===o?void 0:o.dealType)?[{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:Math.abs(d-(v+N+w+j)),description:t,date:n}]:[{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:Math.abs(d-(v+N+w+j)),credit:0,description:t,date:n}],{accountNumber:"21300",accountName:"Deposit Liability",debit:d,credit:0,description:t,date:n},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:w+j,description:t,date:n},{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:v+N,description:t,date:n},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:r.feesDeducted?.13*parseFloat(r.feesDeducted):0,description:t,date:n},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(r.feesDeducted||0),description:t,date:n},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:j,credit:0,description:t,date:n},{accountNumber:"50100",accountName:"Agent's Commission",debit:N,credit:0,description:t,date:n},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(r.netCommission||0),description:t,date:n},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(s.netCommission||0),description:t,date:n},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(s.feesDeducted||0),description:t,date:n},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:s.feesDeducted?.13*parseFloat(s.feesDeducted):0,description:t,date:n}];for(let e=0;e<a.length;e++){const t=a[e];console.log("Posting transaction ".concat(e+1,": ").concat(t.accountNumber," - ").concat(t.accountName," with date: ").concat(t.date)),await nN.post("/ledger",t),console.log("Transaction ".concat(e+1," posted successfully"))}console.log("=== ALL DUAL AGENT TRANSACTIONS POSTED SUCCESSFULLY ===");const i=parseFloat(E)||0,l="Trade #: ".concat(A.tradeNumber," - ").concat(e," - Received From: ").concat(B);console.log("Posting payment transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",c),await nN.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:i,credit:0,description:l,date:c,eftNumber:T}),console.log("Posting payment transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",c),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:i,description:l,date:c,eftNumber:T}),console.log("=== PAYMENT POPUP TRANSACTIONS POSTED SUCCESSFULLY ===")}else{console.log("=== POSTING SINGLE AGENT TRANSACTIONS ==="),console.log("=== POSTING BLUE SECTION (Transactions 1-9) ==="),console.log("Using finalized date for all blue section transactions:",n),console.log("Posting transaction 1: 21500 - Commission Payable (credit) with date:",n),await nN.post("/ledger",{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:h,description:t,date:n}),console.log("Posting transaction 2: 50100 - Agent's Commission (debit) with date:",n),await nN.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:v,credit:0,description:t,date:n}),console.log("Posting transaction 3: 23001 - HST Input Tax Credit (debit) with date:",n),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:w,credit:0,description:t,date:n}),console.log("Posting transaction 4: 44100 - Fee Deducted Income (credit) with date:",n),await nN.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:b,description:t,date:n}),console.log("Posting transaction 5: 23001 - HST Input Tax Credit (credit) with date:",n),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:y,description:t,date:n}),console.log("Posting transaction 6: 40100 - Commission Income (credit) with date:",n),await nN.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:v+N,description:t,date:n}),console.log("Posting transaction 7: 23000 - HST Collected (credit) with date:",n),await nN.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:w+j,description:t,date:n}),console.log("Posting transaction 8: 21300 - Deposit Liability (debit) with date:",n),await nN.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:d,credit:0,description:t,date:n});const r=v+N+w+j;if(d>=r?(console.log("Posting transaction 9: 21300 - Deposit Liability (credit) with date:",n),await nN.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:d-r,description:t,date:n})):(console.log("Posting transaction 9: 12200 - A/R - Commission From Deals (debit) with date:",n),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:r-d,credit:0,description:t,date:n})),d<r){const t=r-d,n="Trade #: ".concat(A.tradeNumber," - ").concat(e," - Received From: ").concat(B);console.log("Posting final transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",c),await nN.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:t,credit:0,description:n,date:c,eftNumber:T}),console.log("Posting final transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",c),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:t,description:n,date:c,eftNumber:T})}console.log("=== POSTING RED SECTION (Transactions 10-12) ==="),console.log("Using finalized date for all red section transactions:",n),console.log("Posting transaction 10: 21100 - Outside Broker Payable (credit) with date:",n),await nN.post("/ledger",{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:N+j,description:t,date:n}),console.log("Posting transaction 11: 51100 - Outside Broker Commission (debit) with date:",n),await nN.post("/ledger",{accountNumber:"51100",accountName:"Outside Broker Commission",debit:N,credit:0,description:t,date:n}),console.log("Posting transaction 12: 23001 - HST Input Tax Credit (debit) with date:",n),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:j,credit:0,description:t,date:n}),console.log("=== ALL SINGLE AGENT TRANSACTIONS POSTED SUCCESSFULLY ===")}}catch(l){throw console.error("Error posting We Hold = Yes transactions:",l),l}const C=await nN.post("/trades/finalize/".concat(A.tradeNumber),{finalizedDate:f});C.data&&C.data.success?(bp.success("Trade finalized and posted to ledger successfully!"),D(""),u&&u(),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"))):bp.error(C.data.message||"Failed to finalize trade.")}catch(l){l.response&&l.response.data&&l.response.data.message?bp.error(l.response.data.message):bp.error("An error occurred while finalizing the trade.")}},disabled:w,children:w?"Finalizing...":"Finalize Trade"})]})]}),j&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",onClick:()=>{C(!1)},children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",onClick:e=>e.stopPropagation(),children:[(0,Rm.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl",onClick:()=>C(!1),children:"\xd7"}),(0,Rm.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirm Payment"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:f,onChange:e=>g(e.target.value)})]}),"Yes"===V()&&(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,Rm.jsx)("div",{className:"border rounded px-2 py-1 ".concat(x?"bg-gray-50":"bg-red-50 border-red-300"),children:p(x)}),!x&&(0,Rm.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Closing date is required when We Hold = Yes"})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Received From"}),(0,Rm.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full",value:B,onChange:e=>S(e.target.value)})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Amount"}),(0,Rm.jsx)("input",{type:"number",className:"border rounded px-2 py-1 w-full",value:E,onChange:e=>k(e.target.value),step:"0.01"})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"Payment Type"}),(0,Rm.jsx)("select",{className:"border rounded px-2 py-1 w-full",value:F,onChange:e=>I(e.target.value),children:X_.map(e=>(0,Rm.jsx)("option",{value:e,children:e},e))})]}),(()=>{const e=parseFloat(M())||0;return(parseFloat(ee())||0)>e?(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block font-medium mb-1",children:"EFT#"}),(0,Rm.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full bg-gray-50",value:T,readOnly:!0})]}):null})(),(0,Rm.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Rm.jsx)("button",{className:"px-6 py-2 bg-gray-500 text-white font-semibold rounded hover:bg-gray-600 disabled:opacity-60",onClick:()=>C(!1),disabled:w,children:"Cancel"}),(0,Rm.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:ie,disabled:w,children:"Print Details"}),(0,Rm.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:async()=>{if(A.isFinalized)return void bp.error("This trade is already finalized.");if(!f)return void bp.error("Please enter the finalized date.");if("Yes"===V()&&!x)return void bp.error("Please ensure the closing date is set when 'We Hold = Yes'.");if(!B.trim())return void bp.error("Please enter who the payment was received from.");if(!E||parseFloat(E)<=0)return void bp.error("Please enter a valid payment amount.");const e=parseFloat(M())||0;if((parseFloat(ee())||0)>e&&!T)bp.error("EFT number is required when deposit amount is less than total commission.");else{N(!0);try{var t,n,r,s;const e=ne(),i="Trade #: ".concat(A.tradeNumber," - ").concat(e),o=f,l=x||m,c=parseFloat(M())||0;let d,h,p,g,b;if(Y()){const e=G(),t=W();d=parseFloat(e.netCommission||0)+parseFloat(t.netCommission||0),h=parseFloat(e.awardAmount||0)+parseFloat(t.awardAmount||0),p=parseFloat(e.tax||0)+parseFloat(t.tax||0),g=parseFloat(e.feesDeducted||0)+parseFloat(t.feesDeducted||0);const n=e.feesDeducted?.13*parseFloat(e.feesDeducted):0;b=n+(t.feesDeducted?.13*parseFloat(t.feesDeducted):0)}else d=parseFloat(K.netCommission||0),h=parseFloat(K.amount||0),p=parseFloat(K.tax||0),g=parseFloat(K.feesDeducted||0),b=K.totalFees&&K.feesDeducted?parseFloat(K.totalFees)-parseFloat(K.feesDeducted):0;const y=parseFloat((null===(t=z.listing)||void 0===t?void 0:t.listingAmount)||0),v=parseFloat((null===(n=z.listing)||void 0===n?void 0:n.listingTax)||0),w=parseFloat((null===(r=z.selling)||void 0===r?void 0:r.sellingAmount)||0),N=parseFloat((null===(s=z.selling)||void 0===s?void 0:s.sellingTax)||0);if("Yes"===V()){console.log("=== WE HOLD = YES - Starting ledger transactions ==="),console.log("Commission Description:",i),console.log("Commission Date (Blue section):",o),console.log("Closing Date (Red section):",l),console.log("Trade Number:",A.tradeNumber),console.log("Address:",e);try{if(Y()){console.log("=== POSTING DUAL AGENT TRANSACTIONS ===");const t=G(),n=W(),r=[{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:v,credit:0,description:i,date:o},{accountNumber:"51100",accountName:"Outside Broker Commission",debit:y,credit:0,description:i,date:o},{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:w+N,description:i,date:o},{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:Math.abs(c-(y+w+v+N)),credit:0,description:i,date:o},{accountNumber:"21300",accountName:"Deposit Liability",debit:c,credit:0,description:i,date:o},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:v+N,description:i,date:o},{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:y+w,description:i,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:t.feesDeducted?.13*parseFloat(t.feesDeducted):0,description:i,date:o},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(t.feesDeducted||0),description:i,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:N,credit:0,description:i,date:o},{accountNumber:"50100",accountName:"Agent's Commission",debit:w,credit:0,description:i,date:o},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(t.netCommission||0),description:i,date:o},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(n.netCommission||0),description:i,date:o},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(n.feesDeducted||0),description:i,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:n.feesDeducted?.13*parseFloat(n.feesDeducted):0,description:i,date:o}];for(let e=0;e<r.length;e++){const t=r[e];console.log("Posting transaction ".concat(e+1,": ").concat(t.accountNumber," - ").concat(t.accountName," with date: ").concat(t.date)),await nN.post("/ledger",t),console.log("Transaction ".concat(e+1," posted successfully"))}console.log("=== ALL DUAL AGENT TRANSACTIONS POSTED SUCCESSFULLY ===");const s=parseFloat(E)||0,a="Trade #: ".concat(A.tradeNumber," - ").concat(e," - Received From: ").concat(B);console.log("Posting payment transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",l),await nN.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:s,credit:0,description:a,date:l,eftNumber:T}),console.log("Posting payment transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",l),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:s,description:a,date:l,eftNumber:T}),console.log("=== PAYMENT POPUP TRANSACTIONS POSTED SUCCESSFULLY ===")}else{console.log("=== POSTING SINGLE AGENT TRANSACTIONS ==="),console.log("=== POSTING BLUE SECTION (Transactions 1-9) ==="),console.log("Using finalized date for all blue section transactions:",o),console.log("Posting transaction 1: 21500 - Commission Payable (credit) with date:",o),await nN.post("/ledger",{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:d,description:i,date:o}),console.log("Posting transaction 2: 50100 - Agent's Commission (debit) with date:",o),await nN.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:y,credit:0,description:i,date:o}),console.log("Posting transaction 3: 23001 - HST Input Tax Credit (debit) with date:",o),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:v,credit:0,description:i,date:o}),console.log("Posting transaction 4: 44100 - Fee Deducted Income (credit) with date:",o),await nN.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:g,description:i,date:o}),console.log("Posting transaction 5: 23001 - HST Input Tax Credit (credit) with date:",o),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:b,description:i,date:o}),console.log("Posting transaction 6: 40100 - Commission Income (credit) with date:",o),await nN.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:y+w,description:i,date:o}),console.log("Posting transaction 7: 23000 - HST Collected (credit) with date:",o),await nN.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:v+N,description:i,date:o}),console.log("Posting transaction 8: 21300 - Deposit Liability (debit) with date:",o),await nN.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:c,credit:0,description:i,date:o});const t=y+w+v+N;if(c>=t?(console.log("Posting transaction 9: 21300 - Deposit Liability (credit) with date:",o),await nN.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:c-t,description:i,date:o})):(console.log("Posting transaction 9: 12200 - A/R - Commission From Deals (debit) with date:",o),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:t-c,credit:0,description:i,date:o})),c<t){const n=t-c,r="Trade #: ".concat(A.tradeNumber," - ").concat(e," - Received From: ").concat(B);console.log("Posting final transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",l),await nN.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:n,credit:0,description:r,date:l,eftNumber:T}),console.log("Posting final transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",l),await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:n,description:r,date:l,eftNumber:T})}console.log("=== POSTING RED SECTION (Transactions 10-12) ==="),console.log("Using finalized date for all red section transactions:",o),console.log("Posting transaction 10: 21100 - Outside Broker Payable (credit) with date:",o),await nN.post("/ledger",{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:w+N,description:i,date:o}),console.log("Posting transaction 11: 51100 - Outside Broker Commission (debit) with date:",o),await nN.post("/ledger",{accountNumber:"51100",accountName:"Outside Broker Commission",debit:w,credit:0,description:i,date:o}),console.log("Posting transaction 12: 23001 - HST Input Tax Credit (debit) with date:",o),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:N,credit:0,description:i,date:o}),console.log("=== ALL SINGLE AGENT TRANSACTIONS POSTED SUCCESSFULLY ===")}}catch(a){throw console.error("Error posting We Hold = Yes transactions:",a),a}}else{const e=parseFloat(E)||0,t="Trade #: ".concat(A.tradeNumber," - Received From: ").concat(B);if(await nN.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:parseFloat(J),description:i,date:o}),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(Z),credit:0,description:i,date:o}),await nN.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:parseFloat(Z),description:i,date:o}),await nN.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(K.amount||0),credit:0,description:i,date:o}),await nN.post("/ledger",{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(K.netCommission||0),description:i,date:o}),await nN.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(K.feesDeducted||0),description:i,date:o}),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:parseFloat(K.totalFees&&K.feesDeducted?parseFloat(K.totalFees)-parseFloat(K.feesDeducted):0),description:i,date:o}),Y()){const e=W();await nN.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(e.amount||0),credit:0,description:i,date:o}),await nN.post("/ledger",{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(e.netCommission||0),description:i,date:o}),await nN.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(e.feesDeducted||0),description:i,date:o}),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:e.feesDeducted?.13*parseFloat(e.feesDeducted):0,description:i,date:o})}e>0&&await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:e,credit:0,description:i,date:o,eftNumber:T}),e>0&&await nN.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:e,credit:0,description:t,date:l,eftNumber:T}),e>0&&await nN.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:e,description:t,date:l,eftNumber:T});const n=parseFloat(te())||0;n>0&&await nN.post("/ledger",{accountNumber:"52100",accountName:"Referral Fees",debit:0,credit:n,description:"Trade #: ".concat(A.tradeNumber," - Buyer Rebate"),date:o})}const j=await nN.post("/trades/finalize/".concat(A.tradeNumber),{finalizedDate:f});j.data&&j.data.success?(bp.success("Trade finalized and posted to ledger successfully!"),C(!1),D(""),u&&u(),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"))):bp.error(j.data.message||"Failed to finalize trade.")}catch(i){bp.error("Error finalizing trade. Please try again.")}finally{N(!1)}}},disabled:w,children:w?"Processing...":"Confirm Payment"})]})]})})]})})},Z_=e=>{let{trades:n,onTradeFinalized:r}=e;const[s,a]=(0,t.useState)(null),[i,o]=(0,t.useState)(!1),l=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString()};return(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Finalize Trade"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,Rm.jsx)("tbody",{children:n.map(e=>{var t,n,r,s,i,c,d,A,u,h,m;return(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{a(e),o(!0)})(e),children:[(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(s=e.keyInfo)||void 0===s?void 0:s.mlsNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(i=e.keyInfo)&&void 0!==i&&i.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(c=e.keyInfo)||void 0===c?void 0:c.propertyType)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(d=e.keyInfo)||void 0===d?void 0:d.status)?"bg-green-100 text-green-800":"PENDING"===(null===(A=e.keyInfo)||void 0===A?void 0:A.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(u=e.keyInfo)||void 0===u?void 0:u.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(h=e.keyInfo)||void 0===h?void 0:h.status)||"Available"})}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(m=e.keyInfo)&&void 0!==m&&m.finalizedDate?l(e.keyInfo.finalizedDate):"-"})]},e._id)})})]})}),i&&(0,Rm.jsx)(J_,{trade:s,onClose:()=>{o(!1),r&&r()}})]})},$_=e=>{var n,r;let{user:s}=e;const[a,i]=(0,t.useState)("list"),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[A,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)(""),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),[v,w]=(0,t.useState)(""),[N,j]=(0,t.useState)("lease"),[C,B]=(0,t.useState)("all"),[S,E]=(0,t.useState)([]),k=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString()},F=o.filter(e=>{var t,n;const r=null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(v),s=Boolean(null===(n=e.keyInfo)||void 0===n?void 0:n.finalizedDate);return"open"===C?r&&!s:"closed"===C?r&&s:r});(0,t.useEffect)(()=>{(async()=>{try{const e=await nN.get("/listings");u(e.data)}catch(e){console.error("Error fetching listings:",e)}})()},[]),(0,t.useEffect)(()=>{(async()=>{d(!0);try{const e=await nN.get("/trades");console.log("Fetched trades:",e.data),l(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{d(!1)}})()},[]);const I=()=>(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Trades"}),(0,Rm.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:v,onChange:e=>w(e.target.value),className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"}),(0,Rm.jsx)(Tm,{className:"absolute left-3 top-3 text-gray-400"})]}),(0,Rm.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:"open"===C,onChange:()=>B("open"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Open Deals"})]}),(0,Rm.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:"closed"===C,onChange:()=>B("closed"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Closed Deals"})]})]})]}),c?(0,Rm.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===F.length?(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:v?"No trades found matching your search.":"No trades found. Create a new trade using the Key Info form."}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),"closed"===C&&(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,Rm.jsx)("tbody",{children:F.map(e=>{var t,n,r,s,a,i,o,l,c,d,A;const u=(e.agentCommissionList||[]).find(e=>e.agentName),h=u?u.agentName:"-";return(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{y(e),x(!0)})(e),children:[(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(s=e.keyInfo)||void 0===s?void 0:s.mlsNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:h}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(a=e.keyInfo)&&void 0!==a&&a.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(i=e.keyInfo)||void 0===i?void 0:i.propertyType)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(o=e.keyInfo)||void 0===o?void 0:o.status)?"bg-green-100 text-green-800":"PENDING"===(null===(l=e.keyInfo)||void 0===l?void 0:l.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(d=e.keyInfo)||void 0===d?void 0:d.status)||"Available"})}),"closed"===C&&(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(A=e.keyInfo)&&void 0!==A&&A.finalizedDate?k(e.keyInfo.finalizedDate):"-"})]},e._id)})})]})})]}),[T,D]=(0,t.useState)([]),[L,_]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),[P,U]=(0,t.useState)(""),[O,Q]=(0,t.useState)(null),[R,H]=(0,t.useState)(!1),[M,V]=(0,t.useState)(null),[z,K]=(0,t.useState)([]),[q,G]=(0,t.useState)({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),[W,Y]=(0,t.useState)(""),[J,Z]=(0,t.useState)(null),[$,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(null),[re,se]=(0,t.useState)(!1),[ae,ie]=(0,t.useState)(""),[oe,le]=(0,t.useState)(""),[ce,de]=(0,t.useState)(0),[Ae,ue]=(0,t.useState)(!1),[he,me]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)({}),[ge,xe]=(0,t.useState)({}),[be,ye]=(0,t.useState)([]),[ve,we]=((0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useState)("")),[Ne,je]=(0,t.useState)(!1),Ce=async()=>{je(!0);try{const e=await nN.get("/trades/next-number");e.data&&e.data.nextNumber?we(e.data.nextNumber.toString()):we("200")}catch(e){console.error("Error fetching next trade number:",e),we("200")}finally{je(!1)}};(0,t.useEffect)(()=>{Ce()},[]);const[Be,Se]=(0,t.useState)({tradeNumber:"",listingNumber:"",status:"AVAILABLE",streetNumber:"",streetName:"",unit:"",city:"",province:"",postalCode:"",offerDate:"",firmDate:"",closeDate:"",entryDate:"",finalizedDate:"",sellPrice:"",mlsNumber:"",type:"",weManage:"Yes",classification:"LISTING SIDE",firm:"Yes",listCommission:"",sellCommission:"",conditions:[]});(0,t.useEffect)(()=>{Be.closeDate&&Ie(Be.closeDate)},[Be.closeDate]),(0,t.useEffect)(()=>{void 0!==Be.listCommission&&Ue(Be.listCommission),void 0!==Be.sellCommission&&Qe(Be.sellCommission)},[Be.listCommission,Be.sellCommission]);const Ee=()=>{"key-info"===a?i("people"):"people"===a?i("outside-brokers"):"outside-brokers"===a?i("trust"):"trust"===a?i("commission"):"commission"===a&&i("agent-info")},ke=()=>{"people"===a?i("key-info"):"outside-brokers"===a?i("people"):"trust"===a?i("outside-brokers"):"commission"===a?i("trust"):"agent-info"===a&&i("commission")},[Fe,Ie]=(0,t.useState)(""),[Te,De]=(0,t.useState)("Active"),[Le,_e]=(0,t.useState)(""),[Pe,Ue]=(0,t.useState)(""),[Oe,Qe]=(0,t.useState)(""),[Re,He]=(0,t.useState)([]),[Me,Ve]=(0,t.useState)([]),[ze,Ke]=(0,t.useState)([]),[qe,Ge]=(0,t.useState)(null),[We,Ye]=(0,t.useState)(null),[Xe,Je]=(0,t.useState)(null),[Ze,$e]=(0,t.useState)(""),[et,tt]=(0,t.useState)(""),[nt,rt]=(0,t.useState)(""),[st,at]=(0,t.useState)(""),[it,ot]=(0,t.useState)(""),[lt,ct]=(0,t.useState)({listingAmount:"0.00",sellingAmount:"0.00",listingTax:"0.00",sellingTax:"0.00"});(0,t.useEffect)(()=>{(()=>{const e=parseFloat(Be.sellPrice)||0,t=parseFloat(Pe)||0,n=parseFloat(Oe)||0,r=(e*t/100).toFixed(2),s=(e*n/100).toFixed(2),a=(.13*parseFloat(r)).toFixed(2),i=(.13*parseFloat(s)).toFixed(2);ct({listingAmount:r,sellingAmount:s,listingTax:a,sellingTax:i})})()},[Be.sellPrice,Pe,Oe]);const[dt,At]=(0,t.useState)({agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",total:"",totalFees:"",netCommission:"",lead:""}),[ut,ht]=(0,t.useState)([]),[mt,pt]=(0,t.useState)(null),[ft,gt]=(0,t.useState)(!1),[xt,bt]=(0,t.useState)(null),[yt,vt]=(0,t.useState)(!1),[wt,Nt]=(0,t.useState)("no"),[jt,Ct]=(0,t.useState)(""),[Bt,St]=(0,t.useState)(null),[Et,kt]=(0,t.useState)({}),[Ft,It]=(0,t.useState)([]),[Tt,Dt]=(0,t.useState)({date:"",amount:"",payer:"",payee:"",notes:""}),[Lt,_t]=(0,t.useState)(null),[Pt,Ut]=(0,t.useState)(!1),[Ot,Qt]=(0,t.useState)(null),[Rt,Ht]=(0,t.useState)("lawyer"),[Mt,Vt]=(0,t.useState)(""),[zt,Kt]=(0,t.useState)(null),[qt,Gt]=(0,t.useState)(3e4),[Wt,Yt]=(0,t.useState)({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"LEASE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:""}),[Xt,Jt]=(0,t.useState)({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"PURCHASE AND SALE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:"",totalCommission:"",tradeClassification:""}),[Zt,$t]=(0,t.useState)(4e3),[en,tn]=(0,t.useState)([]),[nn,rn]=(0,t.useState)([]),sn=o.map(e=>{var t,n;return{value:e.tradeNumber,label:"#".concat(e.tradeNumber," - ").concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").trim(),trade:e}}),[an,on]=(0,t.useState)(3e4);(0,t.useEffect)(()=>{const e=localStorage.getItem("nextBrokerageReferenceNumber");e&&on(parseInt(e,10))},[]);const ln=b||o.find(e=>e.tradeNumber===Be.tradeNumber)||{},cn=ln.keyInfo||{},dn=ln.outsideBrokers||[],An=dn.length>0?dn[0]:{},un=(ln.commission||{}).outsideBrokersRows||[],hn=un.length>0?un[0]:{};(new Date).toLocaleDateString();(0,t.useEffect)(()=>{"brokerage"===Rt&&Yt(e=>X(X({},e),{},{re:"lease"===N?"AGREEMENT TO LEASE":"AGREEMENT TO RENT"}))},[N,Rt]);const mn=e=>{const{name:t,value:n}=e.target;Jt(e=>X(X({},e),{},{[t]:n}))},pn=e=>{Vt(e);const t=Zt+1;$t(t),Jt({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"PURCHASE AND SALE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:t.toString(),totalCommission:"",tradeClassification:""})};(0,t.useEffect)(()=>{const e=localStorage.getItem("nextReferenceNumber");e&&$t(parseInt(e,10))},[]);const fn=()=>{const e=parseFloat(Xt.deposit)||0;return((parseFloat(Xt.totalCommission)||0)-e).toFixed(2)},gn=()=>parseFloat(fn())>0?"Balance to Brokerage":"Balance to Vendor",[xn,bn]=(0,t.useState)("");(0,t.useEffect)(()=>{const e=Ft.reduce((e,t)=>e+(parseFloat(t.amount)||0),0);if("LISTING SIDE"===Be.classification){if(Ft.some(e=>"Yes"===e.weHold)){const t=e-parseFloat(it||0);_e(t.toFixed(2))}else _e(it)}else"CO-OPERATING SIDE"===Be.classification&&_e(it)},[Be.classification,it,xn,Ft]);const yn="LEASE"===(cn.dealType||"").toUpperCase()?"LEASE":"SALE",vn=cn.classification||"";let wn="";return"SALE"===yn&&("LISTING SIDE"===vn?wn=cn.listingCommission||"":"SELLING SIDE"===vn&&(wn=cn.sellingCommission||"")),(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b",children:(0,Rm.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("list"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("list"),children:"List"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("key-info"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("key-info"),children:"Key Info"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("people"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("people"),children:"People"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("outside-brokers"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("outside-brokers"),children:"Outside Brokers"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("trust"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("trust"),children:"Trust"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("commission"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("commission"),children:"Commission"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("agent-info"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("agent-info"),children:"Agent Info"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("invoice"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("invoice"),children:"Invoice"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("finalize-trade"===a?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("finalize-trade"),children:"Finalize Trade"})]})})}),(0,Rm.jsxs)("div",{className:"max-w-screen-2xl mx-auto py-6 px-4",children:["list"===a&&(0,Rm.jsx)(I,{}),"key-info"===a&&(0,Rm.jsx)(zS,{keyInfoData:Be,handleKeyInfoChange:e=>{const{name:t,value:n}=e.target;console.log("handleKeyInfoChange called with:",{name:t,value:n}),console.log("Current keyInfoData before update:",Be),Se(e=>{const r=X(X({},e),{},{[t]:n});return console.log("Updated keyInfoData:",r),r})},goToNextSection:Ee,lookupSuccess:oe,lookupError:ae,isLoading:re,isLoadingTradeNumber:Ne,nextTradeNumber:ve,listings:A,setKeyInfoData:Se,onListingSelected:e=>{e&&(console.log("handleListingSelected called with:",e),console.log("selectedListing.agent:",e.agent),console.log("selectedListing.agents:",e.agents),console.log("selectedListing keys:",Object.keys(e)),m(e),e.people&&Array.isArray(e.people)&&D(e.people.map(e=>X(X({},e),{},{type:"Lease"===Be.dealType?"Landlord":"Seller"}))))},trades:o,currentTradeNumber:ve}),"people"===a&&(0,Rm.jsx)(qS,{people:T,person:L,setPerson:_,setPeople:D,selectedPersonType:P,setSelectedPersonType:U,editingPersonIndex:O,setEditingPersonIndex:Q,showDeletePersonConfirm:R,setShowDeletePersonConfirm:H,personToDelete:M,setPersonToDelete:V,handlePersonInputChange:e=>{const{name:t,value:n}=e.target;_(e=>X(X({},e),{},{[t]:n})),console.log("Field ".concat(t," updated to: ").concat(n))},handlePersonTypeSelect:e=>{U(e),_(t=>X(X({},t),{},{type:e}))},handlePersonSubmit:e=>{if(e.preventDefault(),null!==O){const e=[...T];e[O]=X(X({},L),{},{companyName:L.companyName||""}),D(e),Q(null)}else D([...T,X(X({},L),{},{companyName:L.companyName||""})]);_({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),U("")},handlePersonEdit:e=>{const t=T[e];_(t),U(t.type),Q(e)},handlePersonDelete:e=>{V(e),H(!0)},confirmDeletePerson:()=>{null!==M&&(D(T.filter((e,t)=>t!==M)),H(!1),V(null))},cancelDeletePerson:()=>{H(!1),V(null)},goToNextSection:Ee,goToPreviousSection:ke,listingNumber:Be.listingNumber,dealType:Be.dealType,weManage:Be.weManage}),"outside-brokers"===a&&(0,Rm.jsx)(GS,{outsideBrokers:z,setOutsideBrokers:K,broker:q,setBroker:G,selectedBrokerType:W,setSelectedBrokerType:Y,editingBrokerIndex:J,setEditingBrokerIndex:Z,showDeleteBrokerConfirm:$,setShowDeleteBrokerConfirm:ee,brokerToDelete:te,setBrokerToDelete:ne,handleBrokerInputChange:e=>{const{name:t,value:n}=e.target;G(e=>X(X({},e),{},{[t]:n}))},handleBrokerTypeSelect:e=>{Y(e),G(t=>X(X({},t),{},{type:e}))},handleBrokerSubmit:e=>{e.preventDefault();const t=parseFloat(q.sellingAmount)||0,n=(.13*t).toFixed(2),r=(t+parseFloat(n)).toFixed(2),s=X(X({},q),{},{tax:n,total:r});if(null!==J){const e=[...z];e[J]=s,K(e),Z(null)}else K([...z,s]);G({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:"",sellingAmount:""}),Y("")},handleBrokerEdit:e=>{const t=z[e];G(t),Y(t.type),Z(e)},handleBrokerDelete:e=>{ne(e),ee(!0)},confirmDeleteBroker:async()=>{if(null!==te){const t=z[te];try{t._id&&await nN.delete("/outside-brokers/".concat(t._id)),K(z.filter((e,t)=>t!==te)),ee(!1),ne(null),bp.success("Broker deleted successfully")}catch(e){console.error("Error deleting broker:",e),bp.error("Failed to delete broker")}}},cancelDeleteBroker:()=>{ee(!1),ne(null)},goToNextSection:Ee,goToPreviousSection:ke,listingNumber:Be.listingNumber,weManage:Be.weManage,dealType:Be.dealType}),"trust"===a&&(0,Rm.jsx)(YS,{trustRecords:Ft,setTrustRecords:It,trust:Tt,setTrust:Dt,editingTrustIndex:Lt,setEditingTrustIndex:_t,showDeleteTrustConfirm:Pt,setShowDeleteTrustConfirm:Ut,trustToDelete:Ot,setTrustToDelete:Qt,handleTrustInputChange:e=>{const{name:t,value:n}=e.target;Dt(e=>X(X({},e),{},{[t]:n}))},handleTrustSubmit:e=>{if(e.preventDefault(),null!==Lt){const e=[...Ft];e[Lt]=Tt,It(e),_t(null)}else It([...Ft,Tt]);Dt({date:"",amount:"",payer:"",payee:"",notes:""})},handleTrustEdit:e=>{Dt(Ft[e]),_t(e)},handleTrustDelete:e=>{Qt(e),Ut(!0)},confirmDeleteTrust:()=>{if(null!==Ot){const e=Ft.filter((e,t)=>t!==Ot);It(e),Ut(!1),Qt(null)}},cancelDeleteTrust:()=>{Ut(!1),Qt(null)},goToNextSection:Ee,goToPreviousSection:ke,tradeNumber:Be.tradeNumber||ve,userName:(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.email)||""}),"commission"===a&&(0,Rm.jsx)(VS,{sellPrice:Be.sellPrice,closingDate:Fe,status:Te,ar:Le,onClosingDateChange:e=>Ie(e.target.value),onStatusChange:e=>De(e.target.value),onARChange:e=>_e(e.target.value),listingCommission:Pe,sellingCommission:Oe,onListingCommissionChange:e=>Ue(e.target.value),onSellingCommissionChange:e=>Qe(e.target.value),goToNextSection:Ee,goToPreviousSection:ke,tradeNumber:ve,saleClosingRows:Re,commissionIncomeRows:Me,outsideBrokersRows:ze,editingSaleClosingIdx:qe,editingCommissionIncomeIdx:We,editingOutsideBrokerIdx:Xe,brokerAgentName:Ze,brokerBrokerage:et,brokerSellingAmount:nt,brokerEnd:st,onBrokerAgentNameChange:e=>$e(e.target.value),onBrokerBrokerageChange:e=>tt(e.target.value),onBrokerSellingAmountChange:e=>rt(e.target.value),onBrokerEndChange:e=>at(e.target.value),onAddCommissionInfo:e=>{let{type:t,data:n}=e;switch(t){case"saleClosing":if(null!==qe){const e=[...Re];e[qe]=n,He(e),Ge(null)}else He([...Re,n]);break;case"commissionIncome":if(null!==We){const e=[...Me];e[We]=n,Ve(e),Ye(null)}else Ve([...Me,n]);break;case"outsideBroker":if(null!==Xe){const e=[...ze];e[Xe]=n,Ke(e),Je(null)}else Ke([...ze,n]);$e(""),tt(""),rt(""),at("")}},onEditSaleClosing:()=>{if(Re.length>0){const e=Re[0];Ge(0),Se(t=>X(X({},t),{},{sellPrice:e.sellPrice})),Ie(e.closingDate),De(e.status),_e(e.ar)}},onDeleteSaleClosing:()=>{He([]),Ge(null)},onEditCommissionIncome:()=>{if(Me.length>0){const e=Me[0];Ye(0);const t=(100*parseFloat(e.listingAmount)/parseFloat(Be.sellPrice)).toFixed(2),n=(100*parseFloat(e.sellingAmount)/parseFloat(Be.sellPrice)).toFixed(2);Ue(t),Qe(n)}},onDeleteCommissionIncome:()=>{Ve([]),Ye(null)},onEditOutsideBroker:()=>{if(ze.length>0){const e=ze[0];Je(0),$e(e.agentName),tt(e.brokerage),rt(e.sellingAmount),at(e.end||"")}},onDeleteOutsideBroker:()=>{Ke([]),Je(null),$e(""),tt(""),rt(""),at("")},outsideBrokers:z,onCommissionTotalChange:ot,onBrokerTotalChange:bn}),"agent-info"===a&&(0,Rm.jsx)(iE,{goToNextSection:Ee,goToPreviousSection:ke,agent:dt,setAgent:At,agents:ut,setAgents:ht,editingIndex:mt,setEditingIndex:pt,showDeleteModal:ft,setShowDeleteModal:gt,deletingIndex:xt,setDeletingIndex:bt,showBuyerRebateModal:yt,setShowBuyerRebateModal:vt,buyerRebateIncluded:wt,setBuyerRebateIncluded:Nt,buyerRebateAmount:jt,setBuyerRebateAmount:Ct,pendingAgent:Bt,setPendingAgent:St,validationErrors:Et,setValidationErrors:kt,onSaveTrade:async()=>{if(!Ae&&!he)try{ue(!0);const e={tradeNumber:ve.toString(),keyInfo:X(X({},Be),{},{tradeNumber:ve.toString()}),people:T,outsideBrokers:z,trustRecords:Ft,commission:{saleClosingRows:Re,commissionIncomeRows:Me,outsideBrokersRows:ze},agentCommissionList:ut,conditions:Be.conditions||[]};console.log("Frontend - Trade data to send:",JSON.stringify(e,null,2)),console.log("Frontend - Conditions data:",Be.conditions);await nN.post("/trades/full",e);bp.success("Trade saved successfully!"),me(!0),await Ce()}catch(n){var e,t;bp.error("Error saving trade: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{ue(!1)}},commissionTotal:it,classification:Be.classification,commissionData:lt,selectedListing:h,isEditingExistingTrade:!1}),"invoice"===a&&(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-3xl mx-auto mt-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Invoice"}),(0,Rm.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-md font-medium mb-2",children:"Select Invoice Type:"}),(0,Rm.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Rm.jsxs)("label",{className:"inline-flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",name:"invoiceType",value:"lawyer",checked:"lawyer"===Rt,onChange:e=>Ht("lawyer"),className:"form-radio text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Invoice Lawyer"})]}),(0,Rm.jsxs)("label",{className:"inline-flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",name:"invoiceType",value:"brokerage",checked:"brokerage"===Rt,onChange:e=>Ht("brokerage"),className:"form-radio text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Listing Brokerage"})]})]})]}),"brokerage"===Rt&&(0,Rm.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Select Trade"}),(0,Rm.jsx)(MS,{options:sn,onChange:e=>{if(!e)return y(null),Yt(e=>X(X({},e),{},{re:"",commissionType:"half month",commissionPercentage:"",referenceNumber:an.toString()})),void on(e=>{const t=e+1;return localStorage.setItem("nextBrokerageReferenceNumber",t),t});y(e.trade),Yt(e=>X(X({},e),{},{re:"",commissionType:"half month",commissionPercentage:"",referenceNumber:an.toString()})),on(e=>{const t=e+1;return localStorage.setItem("nextBrokerageReferenceNumber",t),t})},value:ln?sn.find(e=>e.value===ln.tradeNumber):null,placeholder:"Type or select trade number/address...",isClearable:!0,className:"w-full"})]}),(0,Rm.jsx)("div",{className:"mb-4",children:(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"})}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,Rm.jsx)("input",{type:"date",name:"date",value:Wt.date,onChange:e=>{const{name:t,value:n}=e.target;Yt(e=>X(X({},e),{},{[t]:n}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Trade #"}),(0,Rm.jsx)("input",{type:"text",value:ln.tradeNumber||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Brokerage Name"}),(0,Rm.jsx)("input",{type:"text",value:An.company||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,Rm.jsx)("input",{type:"text",value:An.address||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Re"}),(0,Rm.jsx)("input",{type:"text",value:"SALE"===yn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Property Address"}),(0,Rm.jsx)("input",{type:"text",value:"".concat(cn.streetNumber||""," ").concat(cn.streetName||"").trim(),readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To our commission"}),(0,Rm.jsx)("input",{type:"text",value:"SALE"===yn?"Commission Percentage":"Half Month",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Co-operating Commission"}),(0,Rm.jsx)("input",{type:"text",value:"SALE"===yn&&cn.sellCommission||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),"LEASE"===yn&&(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Lease Amount"}),(0,Rm.jsx)("input",{type:"text",value:cn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),"RENT"===yn&&(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Sell Price"}),(0,Rm.jsx)("input",{type:"text",value:cn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"MLS Fees"}),(0,Rm.jsx)("input",{type:"text",value:hn.sellingAmount||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Total"}),(0,Rm.jsx)("input",{type:"text",value:hn.total||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Closing Date"}),(0,Rm.jsx)("input",{type:"text",value:cn.closeDate||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Reference Number"}),(0,Rm.jsx)("input",{type:"text",value:Wt.referenceNumber,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Sale Price"}),(0,Rm.jsx)("input",{type:"text",value:cn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Property Type"}),(0,Rm.jsx)("input",{type:"text",value:yn,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Classification"}),(0,Rm.jsx)("input",{type:"text",value:vn,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]})]}),(0,Rm.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,Rm.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e={date:Wt.date,brokerageName:An.company||"",brokerageAddress:An.address||"",re:"SALE"===yn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",tradeNumber:ln.tradeNumber||"",propertyAddress:"".concat(cn.streetNumber||""," ").concat(cn.streetName||"").trim(),commissionType:"SALE"===yn?"commission percentage":"half month",commissionPercentage:Wt.commissionPercentage,leaseAmount:cn.sellPrice||"",sellPrice:cn.sellPrice||"",mlsFees:hn.sellingAmount||"",hst:hn.tax||"",total:hn.total||"",closingDate:cn.closeDate||"",referenceNumber:ln.tradeNumber||""};let t="";"half month"===e.commissionType?t="half month":"commission percentage"===e.commissionType&&(t="".concat(cn.sellCommission||"","%"));let n="";"SALE"===yn?n="AT A SALE PRICE OF $".concat(Number(cn.sellPrice||0).toLocaleString()):"LEASE"===yn&&(n="AT A RENT AMOUNT OF $".concat(Number(cn.sellPrice||0).toLocaleString()));const r=window.open("","_blank","width=800,height=900");r.document.write('\n      <html><head><title>Invoice</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        .header { text-align: center; }\n        .header img { width: 120px; margin-bottom: 10px; }\n        .bank-details { margin-top: 24px; }\n        .bank-details b { display: inline-block; min-width: 120px; }\n        .amount-table { margin-top: 24px; margin-bottom: 24px; }\n        .amount-table td { padding: 2px 8px; }\n        .amount-table .desc { min-width: 220px; }\n        .amount-table .right { text-align: right; min-width: 100px; }\n        .amount-table .bold { font-weight: bold; }\n        .amount-table .balance { font-weight: bold; }\n        .footer { margin-top: 32px; }\n      </style>\n      </head><body>\n        <div class="header">\n          <img src="/logo.jpeg" alt="Homelife Top Star Realty Inc. Logo" onerror="console.log(\'Logo failed to load: \' + this.src); this.style.display=\'none\';" />\n                  <div style="font-size: 20px; font-weight: bold; margin-top: 8px;">Homelife Top Star Realty Inc., Brokerage</div>\n        <div>9889 Markham Road, Suite 201 <br/> Markham, Ontario L6E OB7</div>\n        <div>Phone: 905-209-1400 &nbsp; Fax: 905-209-1403</div>\n        </div>\n        <br/>\n        <div>'.concat(e.date,'</div>\n        <br/>\n        <div style="font-weight: bold;">').concat(e.brokerageName,"</div>\n        <div>").concat(e.brokerageAddress,"</div>\n        <br/>\n        <div><b>Re:</b> ").concat(e.re,"</div>\n        <div>").concat(e.tradeNumber?"Trade #".concat(e.tradeNumber,", "):"").concat(e.propertyAddress,"</div>\n        <br/>\n        <div>To our commission of <b>").concat(t,"</b></div>\n        <div>").concat(n,'</div>\n        <br/>\n        <table class="amount-table">\n          <tr>\n            <td class="desc">Less share of MLS fees</td>\n            <td class="right">$').concat(Number(e.mlsFees).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n          </tr>\n                      <tr>\n              <td class="desc">HST # 804667350RT</td>\n              <td class="right">$').concat(Number(e.hst).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n          <tr class="balance">\n            <td class="desc">Balance Due on Closing</td>\n            <td class="right">$').concat(Number(e.total).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n          </tr>\n        </table>\n        <div>Closing Scheduled for ").concat(e.closingDate,".</div>\n        <div>Our reference number is ").concat(e.referenceNumber,'.</div>\n        <br/>\n        <div style="font-weight: bold;">Please make cheque payable to Homelife Top Star Realty Inc., Brokerage or adding by EFT using the Bank Details below:</div>\n        <div class="bank-details">\n          <b>Bank:</b> The Toronoto Dominion Bank<br/>\n          <b>Institution:</b> 004<br/>\n          <b>Transit:</b> 13132<br/>\n          <b>Account:</b> 520-6067<br/>\n        </div>\n        <div class="footer">\n          Please feel free to contact our Deals department should you require more information/clarification. 905-209-1400. Or E-mail administrator@homelifetopstar.com\xa0\n.<br/><br/>\n          Sincerely,<br/>\n          Daphney Roy<br/>\n          Administrator\n        </div>\n      </body></html>\n    ')),r.document.close(),setTimeout(()=>{r.print()},500),Gt(e=>e+1)})()},className:"bg-blue-900 text-white px-6 py-2 rounded font-semibold hover:bg-blue-800 transition-colors",children:"Print Invoice"}),(0,Rm.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(async()=>{const e=An.email;if(e)try{const t={date:Wt.date,brokerageName:An.company||"",brokerageAddress:An.address||"",re:"SALE"===yn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",tradeNumber:ln.tradeNumber||"",propertyAddress:"".concat(cn.streetNumber||""," ").concat(cn.streetName||"").trim(),commissionDesc:"SALE"===yn?"".concat(cn.sellCommission||"","%"):"half month",atAmountDesc:"SALE"===yn?"AT A SALE PRICE OF $".concat(Number(cn.sellPrice||0).toLocaleString()):"AT A RENT AMOUNT OF $".concat(Number(cn.sellPrice||0).toLocaleString()),mlsFees:hn.sellingAmount||"",hst:hn.tax||"",total:hn.total||"",closingDate:cn.closeDate||"",referenceNumber:ln.tradeNumber||""};bp.info("Generating and sending PDF invoice..."),await nN.post("/email/send-invoice-pdf",{recipientEmail:e,invoiceData:t,invoiceType:"brokerage"}),bp.success("Invoice PDF sent successfully to ".concat(e)),Gt(e=>e+1)}catch(r){var t,n;console.error("Error sending invoice PDF:",r),bp.error("Failed to send invoice PDF: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||r.message))}else bp.error("No email address found for this broker")})()},className:"bg-green-600 text-white px-6 py-2 rounded font-semibold hover:bg-green-700 transition-colors flex items-center gap-2",disabled:!An.email,children:[(0,Rm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,Rm.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,Rm.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Email PDF"]})]})]}),"lawyer"===Rt&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Lawyer Type:"}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",name:"lawyerType",value:"seller",checked:"seller"===Mt,onChange:e=>pn(e.target.value),className:"mr-2"}),"Seller Lawyer"]}),(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",name:"lawyerType",value:"buyer",checked:"buyer"===Mt,onChange:e=>pn(e.target.value),className:"mr-2"}),"Buyer Lawyer"]})]}),Mt&&(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Rm.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Lawyer Invoice Form"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)(MS,{value:zt?{value:zt.tradeNumber,label:"".concat(zt.tradeNumber," - ").concat((null===(n=zt.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=zt.keyInfo)||void 0===r?void 0:r.streetName)||"").trim()||"No Address"}:null,onChange:e=>{if(!e)return Kt(null),Jt(e=>X(X({},e),{},{trade:"",propertyAddress:"",sellPrice:"",leasePrice:"",deposit:"",closingDate:"",listingCommissionPercent:"",sellingCommissionPercent:"",listingCommissionAmount:"",sellingCommissionAmount:"",listingHSTAmount:"",sellingHSTAmount:"",balanceToVendor:"",totalCommission:it,referenceNumber:Zt.toString(),tradeClassification:"",lawyerName:"",address:"",propertyType:"PURCHASE AND SALE"})),void $t(e=>{const t=e+1;return localStorage.setItem("nextReferenceNumber",t),t});const t=o.find(t=>t.tradeNumber===e.value);if(Kt(t),t){var n,r;const e=t.keyInfo||{},s=t.trustRecords||[],a=(t.commission||{}).commissionIncomeRows||[],i=a.reduce((e,t)=>e+(parseFloat(t.total)||0),0).toFixed(2),o=t.people||[],l=s.length>0?s[0].amount:"";let c="",d="";if("seller"===Mt){const e=o.find(e=>"Seller Lawyer"===e.type);c=e?"".concat(e.firstName," ").concat(e.lastName):"",d=(null===e||void 0===e?void 0:e.address)||""}else if("buyer"===Mt){const e=o.find(e=>"Buyer Lawyer"===e.type);c=e?"".concat(e.firstName," ").concat(e.lastName):"",d=(null===e||void 0===e?void 0:e.address)||""}const A=e.classification||"";let u=a.find(e=>"Listing Side"===e.end),h=a.find(e=>"Selling Side"===e.end);!u&&a.length>0&&(u=a[0]),!h&&a.length>0&&(h=a[0]);const m=parseFloat(e.leasePrice||e.sellPrice||0),p=parseFloat((null===(n=u)||void 0===n?void 0:n.listingAmount)||0),f=parseFloat((null===(r=h)||void 0===r?void 0:r.sellingAmount)||0),g=m?(p/m*100).toFixed(2):"",x=m?(f/m*100).toFixed(2):"";Jt(n=>{var r,s,a,o;return X(X({},n),{},{trade:t.tradeNumber,propertyAddress:"".concat(e.streetNumber||""," ").concat(e.streetName||"").trim(),sellPrice:e.sellPrice||e.leasePrice||"",leasePrice:e.leasePrice||e.sellPrice||"",deposit:l,closingDate:e.closeDate||"",lawyerName:c,address:d,re:"AGREEMENT OF PURCHASE AND SALE",listingCommissionPercent:g,sellingCommissionPercent:x,listingCommissionAmount:(null===(r=u)||void 0===r?void 0:r.listingAmount)||"",sellingCommissionAmount:(null===(s=h)||void 0===s?void 0:s.sellingAmount)||"",listingHSTAmount:(null===(a=u)||void 0===a?void 0:a.listingTax)||"",sellingHSTAmount:(null===(o=h)||void 0===o?void 0:o.sellingTax)||"",totalCommission:i,referenceNumber:Zt.toString(),tradeClassification:A,propertyType:"PURCHASE AND SALE"})}),$t(e=>{const t=e+1;return localStorage.setItem("nextReferenceNumber",t),t})}},options:o.map(e=>{var t,n;return{value:e.tradeNumber,label:"".concat(e.tradeNumber," - ").concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").trim()||"No Address"}}),isClearable:!0,placeholder:"Search and select trade...",className:"w-full"})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,Rm.jsx)("input",{type:"text",name:"propertyType",value:"PURCHASE AND SALE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,Rm.jsx)("input",{type:"date",name:"date",value:Xt.date,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade"}),(0,Rm.jsx)("input",{type:"text",value:Xt.trade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),(0,Rm.jsx)("input",{type:"text",name:"referenceNumber",value:Xt.referenceNumber,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lawyer Name"}),(0,Rm.jsx)("input",{type:"text",name:"lawyerName",value:Xt.lawyerName,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:Xt.address,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Re"}),(0,Rm.jsx)("input",{type:"text",value:"LEASE"===Xt.propertyType?"AGREEMENT OF LEASE":"AGREEMENT OF PURCHASE AND SALE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Address"}),(0,Rm.jsx)("input",{type:"text",name:"propertyAddress",value:Xt.propertyAddress,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LEASE"===Xt.propertyType?"Lease Price":"Sell Price"}),(0,Rm.jsx)("input",{type:"text",name:"LEASE"===Xt.propertyType?"leasePrice":"sellPrice",value:"LEASE"===Xt.propertyType?Xt.leasePrice:Xt.sellPrice,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit"}),(0,Rm.jsx)("input",{type:"text",name:"deposit",value:Xt.deposit,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(()=>{const e=parseFloat(Xt.deposit)||0,t=Xt.tradeClassification||"";let n=0,r=0;return"LISTING SIDE"===t?(n=parseFloat(Xt.listingCommissionAmount)||0,r=parseFloat(Xt.listingHSTAmount)||0):"SELLING SIDE"===t?(n=parseFloat(Xt.sellingCommissionAmount)||0,r=parseFloat(Xt.sellingHSTAmount)||0):(n=parseFloat(Xt.totalCommission)||0,r=(parseFloat(Xt.listingHSTAmount)||0)+(parseFloat(Xt.sellingHSTAmount)||0)),n+r>e?"Balance to Brokerage":"Balance to Vendor"})()}),(0,Rm.jsx)("input",{type:"text",name:"balanceToVendor",value:fn(),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Closing Date"}),(0,Rm.jsx)("input",{type:"text",name:"closingDate",value:Xt.closingDate,onChange:mn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Commission"}),(0,Rm.jsx)("input",{type:"text",name:"totalCommission",value:Xt.totalCommission,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side Commission (%)"}),(0,Rm.jsx)("input",{type:"text",name:"listingCommissionPercent",value:Xt.listingCommissionPercent||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side Commission (%)"}),(0,Rm.jsx)("input",{type:"text",name:"sellingCommissionPercent",value:Xt.sellingCommissionPercent||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side Commission Amount"}),(0,Rm.jsx)("input",{type:"text",name:"listingCommissionAmount",value:Xt.listingCommissionAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side Commission Amount"}),(0,Rm.jsx)("input",{type:"text",name:"sellingCommissionAmount",value:Xt.sellingCommissionAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side HST Amount"}),(0,Rm.jsx)("input",{type:"text",name:"listingHSTAmount",value:Xt.listingHSTAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side HST Amount"}),(0,Rm.jsx)("input",{type:"text",name:"sellingHSTAmount",value:Xt.sellingHSTAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Classification"}),(0,Rm.jsx)("input",{type:"text",name:"tradeClassification",value:Xt.tradeClassification||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Rm.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e=window.open("","_blank"),t=fn(),n=gn(),r="LEASE"===Xt.propertyType,s=r?Xt.leasePrice:Xt.sellPrice,a=((parseFloat(Xt.listingCommissionPercent)||0)+(parseFloat(Xt.sellingCommissionPercent)||0)).toFixed(2),i=((parseFloat(Xt.listingCommissionAmount)||0)+(parseFloat(Xt.sellingCommissionAmount)||0)).toFixed(2),o=((parseFloat(Xt.listingHSTAmount)||0)+(parseFloat(Xt.sellingHSTAmount)||0)).toFixed(2),l=Xt.deposit,c=Xt.closingDate,d=Xt.trade,A=Xt.propertyAddress,u=Xt.re,h=Xt.lawyerName,m=Xt.address,p=Xt.date,f="To our commission of ".concat(a,"% + HST");e.document.write('\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Lawyer Invoice</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 40px; }\n          .header { text-align: center; margin-bottom: 30px; }\n          .header img { width: 120px; margin-bottom: 10px; }\n          .company-title { font-size: 20px; font-weight: bold; margin-top: 8px; }\n          .company-address { margin-bottom: 8px; }\n          .section { margin-bottom: 24px; }\n          .label { font-weight: bold; display: inline-block; min-width: 120px; }\n          .value { display: inline-block; }\n          .amount-table { margin-top: 24px; margin-bottom: 24px; }\n          .amount-table td { padding: 2px 8px; }\n          .amount-table .desc { min-width: 220px; }\n          .amount-table .right { text-align: right; min-width: 100px; }\n          .amount-table .bold { font-weight: bold; }\n          .amount-table .balance { font-weight: bold; }\n          .footer { margin-top: 32px; }\n          .bank-details { margin-top: 16px; font-size: 15px; font-weight: 500; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <img src="/logo.jpeg" alt="Homelife Top Star Realty Inc. Logo" onerror="console.log(\'Logo failed to load: \' + this.src); this.style.display=\'none\';" />\n                  <div class="company-title">Homelife Top Star Realty Inc., Brokerage</div>\n        <div class="company-address">9889 Markham Road, Suite 201 Markham, Ontario L6E OB7</div>\n          <div>Office: 905-209-1400 | Fax: 905-209-1403</div>\n        </div>\n        <div class="section">\n          <div>'.concat(p,"</div>\n          <br/>\n          <div>").concat(h,"</div>\n          <div>").concat(m,"</div>\n          <br/>\n          <div>Re: ").concat(u,"</div>\n          <div>").concat(A,'</div>\n        </div>\n        <div class="section">\n          <div><b>').concat(f,"</b></div>\n          <div>At a ").concat(r?"lease":"sale"," price of <b>$").concat(Number(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</b></div>\n          <table class="amount-table">\n            <tr>\n              <td class="desc">Commission payable</td>\n              <td class="right">$').concat(Number(i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr>\n              <td class="desc">HST # 804667350RT</td>\n              <td class="right">$').concat(Number(o).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr>\n              <td class="desc">Less: Deposit</td>\n              <td class="right">$').concat(Number(l).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr class="balance">\n              <td class="desc">').concat(n,'</td>\n              <td class="right">$').concat(Number(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n            </tr>\n          </table>\n          <div>Closing Date: <b>").concat(c,"</b></div>\n          <div>Reference Number: <b>").concat(d,"</b></div>\n          ").concat("Balance to Brokerage"===n?'\n          <div class="bank-details">\n            <br/>\n            <b>Please make cheque payable to Homelife Top Star Realty Inc., Brokerage or adding by EFT using the Bank Details below:</b><br/>\n            Bank: TD Canada Trust<br/>\n            Institution: 004<br/>\n            Transit: 12892<br/>\n            Account: 521-9966\n          </div>\n          ':"",'\n        </div>\n        <div class="footer">\n          Please feel free to contact our deals department should you require more information/clarification. 905-209-1400. Or E-mail administrator@homelifetopstar.com\xa0\n.<br/><br/>\n          Sincerely,<br/>\n          Administrator<br/>\n                  Homelife Top Star Realty Inc., Brokerage<br/>\n       9889 Markham Road, Suite 201<br/>\n        Markham, Ontario L6E OB7<br/>\n                  Office:905-209-1400<br/>\n        Fax: 905-209-1403<br/>\n          admin@homelifetopstar.com \n        </div>\n      </body>\n      </html>\n    ')),e.document.close(),setTimeout(()=>{e.print()},500)})()},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Print Invoice"}),(0,Rm.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(async()=>{if(console.log("Email PDF button clicked"),!zt)return void bp.error("Please select a trade first");if(!Mt)return void bp.error("Please select lawyer type (Seller or Buyer)");let e="",t=null;var n,r;if("seller"===Mt)t=null===(n=zt.people)||void 0===n?void 0:n.find(e=>"Seller Lawyer"===e.type),e=(null===(r=t)||void 0===r?void 0:r.email)||"";else if("buyer"===Mt){var s,a;t=null===(s=zt.people)||void 0===s?void 0:s.find(e=>"Buyer Lawyer"===e.type),e=(null===(a=t)||void 0===a?void 0:a.email)||""}if(console.log("Lawyer type:",Mt),console.log("Lawyer info:",t),console.log("Lawyer email:",e),e)try{"LEASE"===Xt.propertyType?Xt.leasePrice:Xt.sellPrice;const t=((parseFloat(Xt.listingCommissionPercent)||0)+(parseFloat(Xt.sellingCommissionPercent)||0)).toFixed(2),n=((parseFloat(Xt.listingCommissionAmount)||0)+(parseFloat(Xt.sellingCommissionAmount)||0)).toFixed(2),r=((parseFloat(Xt.listingHSTAmount)||0)+(parseFloat(Xt.sellingHSTAmount)||0)).toFixed(2),s=fn(),a=gn(),i={date:Xt.date,lawyerName:Xt.lawyerName,address:Xt.address,re:Xt.re,propertyAddress:Xt.propertyAddress,propertyType:Xt.propertyType,sellPrice:Xt.sellPrice,leasePrice:Xt.leasePrice,commissionDescription:"To our commission of ".concat(t,"% + HST"),totalCommissionAmount:n,hstAmount:r,deposit:Xt.deposit,balanceToVendor:s,balanceLabel:a,closingDate:Xt.closingDate,referenceNumber:Xt.trade,tradeNumber:zt.tradeNumber||""};console.log("Sending lawyer invoice data:",i),bp.info("Generating and sending lawyer invoice PDF...");const o=await nN.post("/email/send-invoice-pdf",{recipientEmail:e,invoiceData:i,invoiceType:"lawyer"});console.log("Email response:",o.data),bp.success("Lawyer invoice PDF sent successfully to ".concat(e))}catch(c){var i,o,l;console.error("Error sending lawyer invoice PDF:",c),console.error("Error details:",null===(i=c.response)||void 0===i?void 0:i.data);let e="Failed to send lawyer invoice PDF";null!==(o=c.response)&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&l.message?e+=": "+c.response.data.message:c.message&&(e+=": "+c.message),bp.error(e)}else bp.error("No email address found for ".concat(Mt," lawyer. Please add an email address in the trade's people section."))})()},className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center gap-2",disabled:!zt||!Mt,children:[(0,Rm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,Rm.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,Rm.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Email PDF"]})]})]})]})]})]}),"finalize-trade"===a&&(0,Rm.jsx)(Z_,{trades:o,onTradeFinalized:()=>{(async()=>{try{const e=await nN.get("/trades");l(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]}),g&&b&&(0,Rm.jsx)(Y_,{trade:b,onClose:()=>x(!1),onUpdate:e=>{y(e);(async()=>{try{const e=await nN.get("/trades");l(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]})},eP=e=>{let{onSubmitSuccess:n,listingToEdit:r,onCancel:s}=e;const[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),A=e=>e?new Date(e).toISOString().split("T")[0]:"",u=e=>{if(!e)return null;const[t,n,r]=e.split("-");return new Date(parseInt(t),parseInt(n)-1,parseInt(r))},h={streetNumber:"",streetName:"",unit:"",city:"",province:"",postalCode:"",sellerFirstName:"",sellerLastName:"",sellerPhone:"",listCommission:"",sellCommission:"",propertyType:"",dealType:"",status:"",agentNo:"",agentOffice:"",agentLead:"",listingDate:"",entryDate:"",expiryDate:"",soldDate:"",lastEdit:(new Date).toISOString().split("T")[0],listedPrice:"",soldPrice:"",mlsNumber:"",weManage:"",listingNumber:""},[m,p]=(0,t.useState)(h);(0,t.useEffect)(()=>{var e,t,n,s,a,i,o,c,d,u,m,f,g,b,y,v,w,N,C,B,S,E,k,F,I,T,D;r?(l(!0),p({streetNumber:((null===(e=r.address)||void 0===e?void 0:e.streetNumber)||"").trim(),streetName:((null===(t=r.address)||void 0===t?void 0:t.streetName)||"").trim(),unit:((null===(n=r.address)||void 0===n?void 0:n.unit)||"").trim(),city:((null===(s=r.address)||void 0===s?void 0:s.city)||"").trim(),province:(null===(a=r.address)||void 0===a?void 0:a.province)||"",postalCode:((null===(i=r.address)||void 0===i?void 0:i.postalCode)||"").trim(),sellerFirstName:(null===(o=r.seller)||void 0===o||null===(c=o.name)||void 0===c?void 0:c.split(" ")[0])||"",sellerLastName:(null===(d=r.seller)||void 0===d||null===(u=d.name)||void 0===u?void 0:u.split(" ").slice(1).join(" "))||"",sellerPhone:((null===(m=r.seller)||void 0===m?void 0:m.phoneNumber)||"").trim(),listCommission:(null===(f=r.commission)||void 0===f||null===(g=f.list)||void 0===g?void 0:g.toString())||"",sellCommission:(null===(b=r.commission)||void 0===b||null===(y=b.sell)||void 0===y?void 0:y.toString())||"",propertyType:r.propertyType||"",status:r.status||"",agentNo:((null===(v=r.agent)||void 0===v?void 0:v.employeeNo)||"").trim(),agentOffice:((null===(w=r.agent)||void 0===w?void 0:w.officeNumber)||"").trim(),agentLead:null!==(N=r.agent)&&void 0!==N&&N.isLead?"Yes":"No",listingDate:A(null===(C=r.dates)||void 0===C?void 0:C.listing),entryDate:A(null===(B=r.dates)||void 0===B?void 0:B.entry),expiryDate:A(null===(S=r.dates)||void 0===S?void 0:S.expiry),soldDate:A(null===(E=r.dates)||void 0===E?void 0:E.sold),lastEdit:A(null===(k=r.dates)||void 0===k?void 0:k.lastEdit),listedPrice:(null===(F=r.prices)||void 0===F||null===(I=F.listed)||void 0===I?void 0:I.toString())||"",soldPrice:(null===(T=r.prices)||void 0===T||null===(D=T.sold)||void 0===D?void 0:D.toString())||"",mlsNumber:(r.mlsNumber||"").trim(),weManage:r.weManage?"Yes":"No",listingNumber:r.listingNumber||"",dealType:r.dealType||""}),r.people&&r.people.length>0&&x(r.people),r.agents&&r.agents.length>0&&j(r.agents)):(l(!1),p(h),x([]),j([]))},[r]);const f=e=>{const{name:t,value:n,type:r,checked:s}=e.target;let a="checkbox"===r?s:n;"string"===typeof a&&"weManage"!==t&&"agentLead"!==t&&"propertyType"!==t&&"status"!==t&&"province"!==t&&"sellerFirstName"!==t&&"streetName"!==t&&(a=a.trim()),p(e=>{const n=X(X({},e),{},{[t]:a,lastEdit:(new Date).toISOString().split("T")[0]});if("sellerFirstName"===t||"sellerLastName"===t||"sellerPhone"===t){const n="sellerFirstName"===t?a:e.sellerFirstName,r="sellerLastName"===t?a:e.sellerLastName,s="sellerPhone"===t?a:e.sellerPhone,i=g.filter(e=>"Seller"!==e.type);if(x(i),n&&n.trim()&&r&&r.trim()){const e={type:"Seller",firstName:n.trim(),lastName:r.trim(),phone:s||"",address:"",end:"Listing End",email:"",primaryPhone:"",cellPhone:s||"",companyName:""};x(t=>[...t,e])}}return n}),"status"===t&&"Available"===n&&p(e=>X(X({},e),{},{soldDate:"",soldPrice:"",[t]:n}))},[g,x]=(0,t.useState)([]),[b,y]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:""}),[v,w]=(0,t.useState)(null),[N,j]=(0,t.useState)([]),[C,B]=(0,t.useState)([]),[S,E]=(0,t.useState)({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),[k,F]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{const e=await nN.get("/agents");console.log("Fetched agents:",e.data),B(e.data)}catch(e){console.error("Error fetching agents:",e)}})()},[]);const I=e=>{const{name:t,value:n}=e.target;y(X(X({},b),{},{[t]:n}))},T=e=>{const{name:t,value:n}=e.target;E(X(X({},S),{},{[t]:n}))},D=e=>{const t=e.target.value;if(d(t),!t)return void E(e=>X(X({},e),{},{agentNo:"",firstName:"",lastName:"",officeNo:""}));const n=C.find(e=>e._id===t);n&&E(e=>{var t;return X(X({},e),{},{agentNo:(null===(t=n.employeeNo)||void 0===t?void 0:t.toString())||"",firstName:n.firstName||"",lastName:n.lastName||"",officeNo:n.officeNo||""})})};return(0,t.useEffect)(()=>{(async()=>{try{console.log("Checking server health...");const e=await nN.get("/health");return console.log("Server health:",e.data),"connected"!==e.data.mongo.status&&(console.error("MongoDB is not connected! Status:",e.data.mongo.status),bp("Warning: MongoDB is not connected. Status: ".concat(e.data.mongo.status))),e.data}catch(e){return console.error("Server health check failed:",e),bp("Server health check failed. The server might be down."),null}})(),(async()=>{try{console.log("Testing API endpoint...");const e=await nN.get("/complete-listings/test");return console.log("API test endpoint response:",e.data),!0}catch(e){return console.error("API test endpoint failed:",e),!1}})()},[]),(0,t.useEffect)(()=>{r&&0===g.length&&m.sellerFirstName&&m.sellerLastName&&x([{firstName:m.sellerFirstName,lastName:m.sellerLastName,address:m.city?"".concat(m.city,", ").concat(m.province):"",phone:m.sellerPhone||""}])},[r,g.length,m.sellerFirstName,m.sellerLastName,m.city,m.province,m.sellerPhone]),(0,t.useEffect)(()=>{if(r&&0===N.length&&m.agentNo&&m.agentNo.trim()&&""!==m.agentNo&&void 0!==m.agentNo&&null!==m.agentNo&&"Auto-generated after save"!==m.agentNo){let e="",t="";if(c){const n=C.find(e=>e._id===c);n&&(e=n.firstName||"",t=n.lastName||"")}j([{agentNo:m.agentNo,firstName:e,lastName:t,officeNo:m.agentOffice||"",lead:m.agentLead||"",sendPage:"",expense:"",amount:"",cooperation:S.cooperation||m.cooperation||""}])}},[r,N.length,m.agentNo,m.agentOffice,m.agentLead,S.cooperation,m.cooperation,c,C]),(0,Rm.jsxs)("div",{className:"space-y-8",children:[(0,Rm.jsxs)("form",{id:"listingForm",onSubmit:async e=>{if(e.preventDefault(),m.streetNumber&&m.streetName?m.city?m.sellerFirstName&&m.sellerLastName?m.status?m.propertyType?m.listedPrice?"Sold"!==m.status||m.soldDate&&m.soldPrice?m.dealType||(bp.error("Deal type is required"),0):(bp.error("Sold date and sold price are required when status is Sold"),0):(bp.error("Listed price is required"),0):(bp.error("Property type is required"),0):(bp.error("Status is required"),0):(bp.error("Seller first name and last name are required"),0):(bp.error("City is required"),0):(bp.error("Street number and street name are required"),0))try{console.log("Submitting form...");const e={address:{streetNumber:m.streetNumber||"",streetName:m.streetName||"",unit:m.unit||"",city:m.city||"",province:m.province||"",postalCode:m.postalCode||""},seller:{name:"".concat(m.sellerFirstName||""," ").concat(m.sellerLastName||"").trim(),phoneNumber:m.sellerPhone||""},commission:{list:parseFloat(m.listCommission)||0,sell:parseFloat(m.sellCommission)||0},propertyType:m.propertyType||"",dealType:m.dealType||"",status:m.status||"Available",agent:{employeeNo:m.agentNo||"",officeNumber:m.agentOffice||"",isLead:"Yes"===m.agentLead},mlsNumber:m.mlsNumber||"",dates:{listing:m.listingDate?u(m.listingDate):null,entry:m.entryDate?u(m.entryDate):null,expiry:m.expiryDate?u(m.expiryDate):null,sold:m.soldDate?u(m.soldDate):null,lastEdit:new Date},weManage:"Yes"===m.weManage,prices:{listed:parseFloat(m.listedPrice)||0,sold:m.soldPrice?parseFloat(m.soldPrice):null},people:g,agents:N};let t;console.log("Data being sent:",e),t=o&&null!==r&&void 0!==r&&r._id?await nN.put("/listings/".concat(r._id),e):await nN.post("/listings",e),console.log("Response:",t.data),bp.success("Listing ".concat(o?"updated":"created"," successfully!")),n&&n()}catch(a){var t,s;console.error("Error ".concat(o?"updating":"creating"," listing:"),a);let e="Error ".concat(o?"updating":"creating"," listing. ");null!==(t=a.response)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.message?e+=a.response.data.message:a.message?e+=a.message:e+="Please try again.",bp.error(e)}},className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 bg-white rounded-lg shadow",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[" ",(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Address"})," ",(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[" ",(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Street #"]}),(0,Rm.jsx)("input",{type:"text",name:"streetNumber",value:m.streetNumber,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Street Name"]}),(0,Rm.jsx)("input",{type:"text",name:"streetName",value:m.streetName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Unit"]}),(0,Rm.jsx)("input",{type:"text",name:"unit",value:m.unit,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:m.city,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,Rm.jsxs)("select",{name:"province",value:m.province,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan","Northwest Territories","Nunavut","Yukon"].map(e=>(0,Rm.jsx)("option",{value:e,children:e},e))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:m.postalCode,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seller Detail"})," ",(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[" "," ",(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"sellerFirstName",value:m.sellerFirstName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"sellerLastName",value:m.sellerLastName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Cellular Phone #"]}),(0,Rm.jsx)("input",{type:"tel",name:"sellerPhone",value:m.sellerPhone,onChange:e=>KS(e,p),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Commission"})," ",(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[" ",(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","List %"]}),(0,Rm.jsx)("input",{type:"number",step:"0.01",name:"listCommission",value:m.listCommission,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sell %"]}),(0,Rm.jsx)("input",{type:"number",step:"0.01",name:"sellCommission",value:m.sellCommission,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Property Type"]}),(0,Rm.jsxs)("select",{name:"propertyType",value:m.propertyType,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select Type"}),(0,Rm.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,Rm.jsx)("option",{value:"Residential",children:"Residential"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Status"]}),(0,Rm.jsxs)("select",{name:"status",value:m.status,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select Status"}),(0,Rm.jsx)("option",{value:"Sold",children:"Sold"}),(0,Rm.jsx)("option",{value:"Available",children:"Available"}),(0,Rm.jsx)("option",{value:"Terminated",children:"Terminated"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deal Type"}),(0,Rm.jsxs)("select",{name:"dealType",value:m.dealType||"",onChange:f,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Deal Type"}),(0,Rm.jsx)("option",{value:"Sale",children:"Sale"}),(0,Rm.jsx)("option",{value:"Lease",children:"Lease"})]})]}),(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Agent Detail"})," ",(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[" ",(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Number"}),(0,Rm.jsx)("input",{type:"text",name:"agentNo",value:m.agentNo,onChange:f,readOnly:!0,className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,Rm.jsxs)("select",{name:"selectedAgent",value:c,onChange:D,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select Agent"}),C.map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},e._id))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Office #"}),(0,Rm.jsx)("input",{type:"tel",name:"agentOffice",value:m.agentOffice,onChange:e=>KS(e,p),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lead"}),(0,Rm.jsxs)("select",{name:"agentLead",value:m.agentLead,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select"}),(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Listing Number"}),(0,Rm.jsx)("input",{type:"text",name:"listingNumber",value:m.listingNumber,readOnly:!0,placeholder:o?m.listingNumber?"":"Not available":"Auto-generated after save",className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","MLS Number"]}),(0,Rm.jsx)("input",{type:"text",name:"mlsNumber",value:m.mlsNumber,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Listing Date"]}),(0,Rm.jsx)("input",{type:"date",name:"listingDate",value:m.listingDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Entry Date"]}),(0,Rm.jsx)("input",{type:"date",name:"entryDate",value:m.entryDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Expiry Date"]}),(0,Rm.jsx)("input",{type:"date",name:"expiryDate",value:m.expiryDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),"Sold"===m.status&&(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sold Date"]}),(0,Rm.jsx)("input",{type:"date",name:"soldDate",value:m.soldDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sold Price"]}),(0,Rm.jsx)("input",{type:"number",step:"0.01",name:"soldPrice",value:m.soldPrice,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Last Edit"]}),(0,Rm.jsx)("input",{type:"date",name:"lastEdit",value:m.lastEdit,readOnly:!0,className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","We Manage"]}),(0,Rm.jsxs)("select",{name:"weManage",value:m.weManage,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,Rm.jsx)("option",{value:"",children:"Select"}),(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Listed Price"]}),(0,Rm.jsx)("input",{type:"number",step:"0.01",name:"listedPrice",value:m.listedPrice,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[" ",s&&(0,Rm.jsx)("button",{type:"button",onClick:s,disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700",children:"Cancel"})]})]}),(0,Rm.jsxs)("div",{className:"mt-12",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Additional Information"}),(0,Rm.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,Rm.jsxs)("div",{className:"w-full flex flex-col",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-4",children:"People Details"}),(0,Rm.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log("Submitting person:",b),console.log("Current editing index:",v),null!==v){const e=[...g];e[v]=X({},b),console.log("Updating person at index:",v),console.log("Updated people array:",e),x(e),w(null),bp.success("Person updated successfully!")}else console.log("Adding new person"),x([...g,X({},b)]),bp.success("Person added successfully!");y({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:"",phone:""})},className:"space-y-4 p-4 border rounded-lg",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:b.firstName,onChange:I,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",id:"lastName",value:b.lastName,onChange:I,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",required:!0})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",id:"address",value:b.address,onChange:I,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Cellular Phone #"}),(0,Rm.jsx)("input",{type:"tel",name:"phone",id:"phone",value:b.phone,onChange:e=>KS(e,y),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"end",className:"block text-sm font-medium text-gray-700",children:"End"}),(0,Rm.jsxs)("select",{name:"end",id:"end",value:b.end,onChange:I,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"",children:"Select the end"}),(0,Rm.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,Rm.jsx)("option",{value:"Selling End",children:"Selling End"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Rm.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-900 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==v?"Update Person":"Add Person"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{y({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:"",phone:""}),w(null)},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"})]})]}),(0,Rm.jsxs)("div",{className:"mt-8",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"People List"}),(0,Rm.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-blue-900",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"End"}),(0,Rm.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"First Name"}),(0,Rm.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Last Name"}),(0,Rm.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Cell Phone #"}),(0,Rm.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Address"}),(0,Rm.jsx)("th",{className:"relative px-6 py-3",children:(0,Rm.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.end}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firstName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.lastName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.address}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Rm.jsx)("button",{onClick:()=>(e=>{y(g[e]),w(e)})(t),className:"text-blue-900 hover:text-blue-700",children:"Edit"})})]},t))})]})})]})]}),(0,Rm.jsxs)("div",{className:"w-full flex flex-col mt-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Agent Details"}),(0,Rm.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log("Submitting agent:",S),console.log("Current editing agent index:",k),console.log("Current agents array:",N),S.agentNo&&S.firstName&&S.lastName){if(null!==k){const e=[...N];e[k]=X({},S),console.log("Updating agent at index:",k),console.log("Updated agents array:",e),j(e),F(null),bp.success("Agent updated successfully!")}else{console.log("Adding new agent");const e=[...N,X({},S)];console.log("New agents array:",e),j(e),bp.success("Agent added successfully!")}E({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),d("")}else bp.error("Please select an agent and fill in required fields")},className:"space-y-4 p-4 border rounded-lg",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"agentNo",className:"block text-sm font-medium text-gray-700",children:"Agent #"}),(0,Rm.jsx)("input",{type:"text",name:"agentNo",id:"agentNo",value:S.agentNo||"",onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"agentFullName",className:"block text-sm font-medium text-gray-700",children:"Agent Full Name"}),(0,Rm.jsxs)("select",{name:"agentFullName",id:"agentFullName",onChange:D,value:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"",children:"Select an agent"}),C.map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},e._id))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"officeNo",className:"block text-sm font-medium text-gray-700",children:"Office #"}),(0,Rm.jsx)("input",{type:"tel",name:"officeNo",id:"officeNo",value:S.officeNo,onChange:e=>KS(e,E),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"sendPage",className:"block text-sm font-medium text-gray-700",children:"Send Page"}),(0,Rm.jsxs)("select",{name:"sendPage",id:"sendPage",value:S.sendPage,onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"lead",className:"block text-sm font-medium text-gray-700",children:"Lead"}),(0,Rm.jsxs)("select",{name:"lead",id:"lead",value:S.lead,onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"cooperation",className:"block text-sm font-medium text-gray-700",children:"Co-Operation"}),(0,Rm.jsxs)("select",{name:"cooperation",id:"cooperation",value:S.cooperation,onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"expense",className:"block text-sm font-medium text-gray-700",children:"Expense %"}),(0,Rm.jsx)("input",{type:"text",name:"expense",id:"expense",value:S.expense,onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,Rm.jsx)("input",{type:"text",name:"amount",id:"amount",value:S.amount,onChange:T,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,Rm.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-900 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==k?"Update Agent":"Add Agent"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{E({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),d(""),F(null)},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Clear"})]})]}),(0,Rm.jsxs)("div",{className:"mt-8",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Agent List"}),(0,Rm.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-blue-900",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Agent No"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Office No"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Lead"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Co-Op"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Expense"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"relative px-4 py-2",children:(0,Rm.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.agentNo}),(0,Rm.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:[e.firstName," ",e.lastName]}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.officeNo}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lead}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.cooperation}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.expense}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.amount}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:(0,Rm.jsxs)("div",{className:"flex space-x-2 justify-end",children:[(0,Rm.jsx)("button",{onClick:()=>(e=>{console.log("Editing agent at index:",e),console.log("Agent data:",N[e]);const t=N[e];if(E(t),F(e),t.firstName&&t.lastName){const e=C.find(e=>e.firstName===t.firstName&&e.lastName===t.lastName);e&&d(e._id)}})(t),className:"text-blue-900 hover:text-blue-700",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this agent?")){const t=N.filter((t,n)=>n!==e);j(t),bp.success("Agent deleted successfully!")}})(t),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},t))})]})})]})]})]})]}),(0,Rm.jsx)("div",{className:"mt-8 flex justify-center",children:(0,Rm.jsx)("button",{type:"submit",form:"listingForm",disabled:a,className:"px-8 py-4 text-lg font-medium text-white bg-blue-900 hover:bg-blue-800 border border-transparent rounded-md shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700",children:a?o?"Updating...":"Saving...":o?"Update Listing":"Save Listing"})})]})},tP=e=>{let{label:t,value:n}=e;return(0,Rm.jsxs)("div",{className:"mb-3",children:[(0,Rm.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,Rm.jsx)("p",{className:"text-base text-gray-900",children:n||"-"})]})},nP=e=>{var n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g;let{listing:x,onClose:b,onListingUpdated:y,showAdminActions:v=!1}=e;const[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[B,S]=(0,t.useState)(""),[E,k]=(0,t.useState)(""),[F,I]=(0,t.useState)(!1),[T,D]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("Modal listing data:",x),console.log("People data:",null===x||void 0===x?void 0:x.people),console.log("Agents data:",null===x||void 0===x?void 0:x.agents),x&&x._id&&(I(!0),nN.get("/listings/".concat(x._id,"/note")).then(e=>{S(e.data.note||""),k(e.data.note||"")}).catch(()=>{S(""),k("")}).finally(()=>I(!1)))},[x]);const L=()=>{N(!1),b()},_=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString("en-US")};return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,Rm.jsx)("button",{onClick:L,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-2xl","aria-label":"Close modal",children:(0,Rm.jsx)(Dm,{})}),(0,Rm.jsx)("button",{onClick:()=>C(e=>!e),className:"absolute top-4 right-16 bg-blue-800 hover:bg-blue-900 text-white font-semibold px-4 py-1 rounded shadow","aria-label":"Show Note",children:"Note"}),j&&(0,Rm.jsxs)("div",{className:"absolute top-16 right-4 bg-yellow-50 border border-yellow-300 rounded-lg p-4 w-80 shadow-lg z-50",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Rm.jsx)("span",{className:"font-semibold text-yellow-700",children:"Note"}),!T&&(0,Rm.jsx)("button",{onClick:()=>D(!0),className:"text-xs text-blue-600 hover:underline ml-2",children:B?"Edit":"Add"}),T&&(0,Rm.jsx)("button",{onClick:()=>{D(!1),k(B)},className:"text-xs text-gray-500 hover:underline ml-2",children:"Cancel"})]}),F?(0,Rm.jsx)("div",{className:"text-sm text-gray-500",children:"Loading..."}):T?(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("textarea",{className:"w-full border rounded p-1 text-sm",rows:4,value:E,onChange:e=>k(e.target.value),disabled:F}),(0,Rm.jsx)("button",{onClick:()=>{I(!0),nN.put("/listings/".concat(x._id,"/note"),{note:E}).then(e=>{S(e.data.note),D(!1),bp.success("Note saved successfully!")}).catch(()=>{bp.error("Failed to save note.")}).finally(()=>I(!1))},className:"mt-2 px-3 py-1 bg-blue-900 text-white rounded text-sm hover:bg-blue-800",disabled:F,children:"Save"})]}):(0,Rm.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap min-h-[2rem]",children:B||(0,Rm.jsx)("span",{className:"text-gray-400",children:"No note yet."})})]}),(0,Rm.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-900 border-b pb-3",children:[w?"Edit Listing":"Listing Details",": #",x.listingNumber]}),w?(0,Rm.jsx)(eP,{listingToEdit:x,onSubmitSuccess:()=>{N(!1),y&&y()},onCancel:()=>N(!1)}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:[(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Address"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6",children:[(0,Rm.jsx)(tP,{label:"Street #",value:null===(n=x.address)||void 0===n?void 0:n.streetNumber}),(0,Rm.jsx)(tP,{label:"Street Name",value:null===(r=x.address)||void 0===r?void 0:r.streetName}),(0,Rm.jsx)(tP,{label:"Unit",value:null===(s=x.address)||void 0===s?void 0:s.unit}),(0,Rm.jsx)(tP,{label:"City",value:null===(a=x.address)||void 0===a?void 0:a.city}),(0,Rm.jsx)(tP,{label:"Province",value:null===(i=x.address)||void 0===i?void 0:i.province}),(0,Rm.jsx)(tP,{label:"Postal Code",value:null===(o=x.address)||void 0===o?void 0:o.postalCode})]})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Seller Details"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-6",children:((e,t)=>{const n=((null===(e=x.seller)||void 0===e?void 0:e.name)||"").trim().split(" "),r=n.pop()||"",s=n.join(" ")||"";return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(tP,{label:"First Name",value:s}),(0,Rm.jsx)(tP,{label:"Last Name",value:r}),(0,Rm.jsx)(tP,{label:"Home Phone #",value:null===(t=x.seller)||void 0===t?void 0:t.phoneNumber})]})})()})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Commission"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6",children:[(0,Rm.jsx)(tP,{label:"List %",value:null===(l=x.commission)||void 0===l?void 0:l.list}),(0,Rm.jsx)(tP,{label:"Sell %",value:null===(c=x.commission)||void 0===c?void 0:c.sell})]})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Property Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6",children:[(0,Rm.jsx)(tP,{label:"Property Type",value:x.propertyType}),(0,Rm.jsx)(tP,{label:"Status",value:x.status}),(0,Rm.jsx)(tP,{label:"MLS #",value:x.mlsNumber}),(0,Rm.jsx)(tP,{label:"We Manage",value:x.weManage?"Yes":"No"})]})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Agent Details"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-6",children:(()=>{if(x.agents&&x.agents.length>0){const e=x.agents[0];return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(tP,{label:"First Name",value:e.firstName||""}),(0,Rm.jsx)(tP,{label:"Last Name",value:e.lastName||""}),(0,Rm.jsx)(tP,{label:"Office #",value:e.officeNo||""}),(0,Rm.jsx)(tP,{label:"Lead",value:e.lead||"No"})]})}if(x.agent&&x.agent.name){const e=x.agent.name.trim().split(" "),t=e.pop()||"",n=e.join(" ")||"";return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(tP,{label:"First Name",value:n}),(0,Rm.jsx)(tP,{label:"Last Name",value:t}),(0,Rm.jsx)(tP,{label:"Office #",value:x.agent.officeNumber||""}),(0,Rm.jsx)(tP,{label:"Lead",value:x.agent.isLead?"Yes":"No"})]})}return(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(tP,{label:"First Name",value:"-"}),(0,Rm.jsx)(tP,{label:"Last Name",value:"-"}),(0,Rm.jsx)(tP,{label:"Office #",value:"-"}),(0,Rm.jsx)(tP,{label:"Lead",value:"-"})]})})()})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6",children:[(0,Rm.jsx)(tP,{label:"Listing Date",value:_(null===(d=x.dates)||void 0===d?void 0:d.listing)}),(0,Rm.jsx)(tP,{label:"Entry Date",value:_(null===(A=x.dates)||void 0===A?void 0:A.entry)}),(0,Rm.jsx)(tP,{label:"Expiry Date",value:_(null===(u=x.dates)||void 0===u?void 0:u.expiry)}),(0,Rm.jsx)(tP,{label:"Sold Date",value:_(null===(h=x.dates)||void 0===h?void 0:h.sold)}),(null===(m=x.dates)||void 0===m?void 0:m.lastEdit)&&(0,Rm.jsx)(tP,{label:"Last Edited",value:_(null===(p=x.dates)||void 0===p?void 0:p.lastEdit)})]})]}),(0,Rm.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Pricing"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6",children:[(0,Rm.jsx)(tP,{label:"Listed Price",value:null!==(f=x.prices)&&void 0!==f&&f.listed?"$".concat(x.prices.listed.toLocaleString()):"N/A"}),"Sold"===x.status&&(0,Rm.jsx)(tP,{label:"Sold Price",value:null!==(g=x.prices)&&void 0!==g&&g.sold?"$".concat(x.prices.sold.toLocaleString()):"N/A"})]})]})]}),x.people&&x.people.length>0&&(0,Rm.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"People Details"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.people.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.firstName}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lastName}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.address}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.phone}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.end||"-"})]},t))})]})})]}),x.agents&&x.agents.length>0&&(0,Rm.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Agent Details"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent No"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office #"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Send Page"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expense"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.agents.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.agentNo}),(0,Rm.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:[e.firstName," ",e.lastName]}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.officeNo}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lead}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.sendPage}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.expense}),(0,Rm.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.amount})]},t))})]})})]}),(0,Rm.jsxs)("div",{className:"mt-8 pt-4 border-t flex justify-between items-center",children:[(0,Rm.jsx)("div",{children:(0,Rm.jsxs)("button",{onClick:()=>N(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center mr-3",children:[(0,Rm.jsx)(pm,{className:"mr-2"})," Edit"]})}),(0,Rm.jsxs)("div",{className:"flex items-center",children:[v&&(0,Rm.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this listing?"))try{await nN.delete("/listings/".concat(x._id)),bp.success("Listing deleted successfully!"),y&&y(),L()}catch(n){var e,t;console.error("Error deleting listing:",n),bp.error("Failed to delete listing: ".concat((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}},className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 flex items-center mr-3",children:[(0,Rm.jsx)(Lm,{className:"mr-2"})," Delete"]}),(0,Rm.jsx)("button",{onClick:L,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Close"})]})]})]})]})})},rP=e=>{let{showAdminActions:n=!1}=e;const[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),[A,u]=(0,t.useState)(null),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)("all"),g=async()=>{l(!0);try{const e=(await nN.get("/listings")).data.sort((e,t)=>t.listingNumber-e.listingNumber);s(e);const t=e.filter(e=>{const t=!c||e.listingNumber.toString().includes(c.trim()),n="all"===p||e.status.toLowerCase()===p;return t&&n});return i(t),e}catch(e){return console.error("Error fetching listings:",e),bp.error("Failed to fetch listings"),[]}finally{l(!1)}};(0,t.useEffect)(()=>{g()},[]);const x=e=>{f(e);const t=r.filter(t=>{const n=!c.trim()||t.listingNumber.toString().includes(c.trim()),r="all"===e||t.status.toLowerCase()===e;return n&&r});i(t)};return o?(0,Rm.jsx)("div",{className:"flex justify-center items-center h-[100vh]",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):(0,Rm.jsxs)("div",{className:"min-h-[100vh] w-full p-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Listings"}),(0,Rm.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-2.5 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Enter Listing #",value:c,onChange:e=>{const t=e.target.value;d(t);const n=r.filter(e=>{const n=!t.trim()||e.listingNumber.toString().includes(t.trim()),r="all"===p||e.status.toLowerCase()===p;return n&&r});i(n)},className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,Rm.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:"available"===p,onChange:()=>x("available"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Available"})]}),(0,Rm.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:"sold"===p,onChange:()=>x("sold"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,Rm.jsx)("span",{className:"ml-2",children:"Sold"})]})]})]}),(0,Rm.jsx)("div",{children:(0,Rm.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg table-fixed",children:[(0,Rm.jsx)("thead",{className:"bg-blue-900",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Listing #"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[26%]",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[11%]",children:"City"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[11%]",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[18%]",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[12%]",children:"Price"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[10%]",children:"Type"}),(0,Rm.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[10%]",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{u(e),m(!0)})(e),children:[(0,Rm.jsxs)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:["#",e.listingNumber]}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.streetNumber}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis",children:e.address.streetName}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.unit||"-"}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.city||"-"}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.mlsNumber||"-"}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis",children:e.agents&&e.agents.length>0?e.agents.map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", "):e.agent&&e.agent.name?e.agent.name:"-"}),(0,Rm.jsxs)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:["$",e.prices.listed.toLocaleString()]}),(0,Rm.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.propertyType}),(0,Rm.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("Sold"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e._id))})]})}),h&&A&&(0,Rm.jsx)(nP,{listing:A,onClose:()=>{m(!1),u(null)},onListingUpdated:async()=>{const e=await g();if(A&&e.length>0){const t=e.find(e=>e._id===A._id);t&&u(t)}},showAdminActions:n})]})},sP=()=>{const[e,n]=(0,t.useState)("list");return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b",children:(0,Rm.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4",children:(0,Rm.jsx)("nav",{className:"flex space-x-8",children:["List","Info","Details"].map(t=>(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat(e===t.toLowerCase()?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>n(t.toLowerCase()),children:t},t.toLowerCase()))})})}),(0,Rm.jsxs)("div",{className:"max-w-screen-2xl mx-auto py-6",children:["list"===e&&(0,Rm.jsx)(rP,{}),"info"===e&&(0,Rm.jsx)(eP,{onSubmitSuccess:()=>n("list")}),"details"===e&&(0,Rm.jsx)("div",{children:"Details Content"})]})]})},aP=["_id","__v","createdAt","updatedAt"],iP=()=>{console.log("LedgerDB component mounted");const e=eu(),n=ZA(),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0),c=["ARCommissionEarned","APGeneralCommissionExpense","AROtherDebit","unpaidFileTrustReceivable","commissionReceivablePayable","heldFundsReceivableAgent","heldFundsPayableAgent","suspense","unpaidExpensesManagement","unpaidExpensesNonMgmt","payrollAgent"],d=["_id","__v","createdAt","updatedAt","agentDisbursement"],A=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());(0,t.useEffect)(()=>{console.log("Fetching ledger data..."),u()},[n]);const u=async()=>{try{const e=await nN.get("/general-ledger-setup");console.log("Received ledger data:",e.data),s(e.data)}catch(e){console.error("Error fetching ledger data:",e),i(e.message)}finally{l(!1)}},h=e=>{console.log("\n=== Rendering Fields for Entry ==="),console.log("Entry ID:",e._id),console.log("All entry fields:",Object.keys(e));const t=[];c.forEach(n=>{console.log("Adding default field:",n),void 0!==e[n]&&t.push({key:n,value:e[n],isCustom:!1})});const n=Object.keys(e).filter(e=>!c.includes(e)&&!d.includes(e));return console.log("Found custom field keys:",n),n.forEach(n=>{console.log("Adding custom field:",n),t.push({key:n,value:e[n],isCustom:!0})}),"agentDisbursement"in e&&t.push({key:"agentDisbursement",value:e.agentDisbursement,isCustom:!1}),console.log("Final fields to render:",t),t};return a?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load ledger data: ",a]})]}):o?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"container mx-auto my-6 px-4",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Ledger Entries"}),(0,Rm.jsx)("div",{className:"space-y-6",children:r.map(t=>(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,Rm.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>e("/edit-ledger/".concat(t._id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{await nN.delete("/general-ledger-setup/".concat(e)),s(r.filter(t=>t._id!==e))}catch(t){alert("Error deleting entry: "+t.message)}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{try{const t=(await nN.get("/general-ledger-setup/".concat(e))).data,{_id:n,__v:r,createdAt:s,updatedAt:a}=t,i=Mm(t,aP),o=window.open("","_blank");if(!o)return;const l=Object.entries(i).map(e=>{let[t,n]=e;const r=A(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")}).join("");o.document.write('\n        <html>\n          <head>\n            <title>Ledger Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(Qm,'" alt="Company Logo" />\n            <h2 class="title">Ledger Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),o.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),(0,Rm.jsx)("div",{className:"mt-12 space-y-4",children:h(t).map(e=>(0,Rm.jsxs)("div",{className:"flex border-b border-gray-200 pb-3",children:[(0,Rm.jsx)("div",{className:"w-1/3 text-sm font-medium text-gray-600",children:A(e.key)}),(0,Rm.jsx)("div",{className:"w-2/3 font-medium",children:"boolean"===typeof e.value?e.value?"Yes":"No":e.value})]},e.key))})]},t._id))})]})]})},oP=["_id","__v","createdAt","updatedAt"],lP=()=>{const e=eu(),n=ZA(),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(null),[o,l]=(0,t.useState)(!0),c=["lastListing","lastTrade","compassDirection","cdaAddress","multipleOffices","mainOfficeNumber","hstNumber","payrollNumber","expStmtAddress","openingBalanceFormat"],d=["_id","__v","createdAt","updatedAt"],A=e=>e.toLowerCase().includes("hst")?e.replace(/hst/i,"HST"):e.toLowerCase().includes("cda")?e.replace(/cda/i,"CDA"):e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase());(0,t.useEffect)(()=>{u()},[n]);const u=async()=>{try{const e=await nN.get("/misc-settings");s(e.data)}catch(e){console.error("Error fetching miscellaneous settings:",e),i(e.message)}finally{l(!1)}},h=e=>{const t=[];c.forEach(n=>{void 0!==e[n]&&t.push({key:n,value:e[n],isCustom:!1})});return Object.keys(e).filter(e=>!c.includes(e)&&!d.includes(e)).forEach(n=>{t.push({key:n,value:e[n],isCustom:!0})}),t};return a?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load miscellaneous settings: ",a]})]}):o?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"container mx-auto my-6 px-4",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Miscellaneous Settings Entries"}),(0,Rm.jsx)("div",{className:"space-y-6",children:r.map(t=>(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,Rm.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>e("/edit-misc/".concat(t._id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{await nN.delete("/misc-settings/".concat(e)),s(r.filter(t=>t._id!==e))}catch(t){alert("Error deleting entry: "+t.message)}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{try{const t=(await nN.get("/misc-settings/".concat(e))).data,{_id:n,__v:r,createdAt:s,updatedAt:a}=t,i=Mm(t,oP),o=window.open("","_blank");if(!o)return;const l=Object.entries(i).map(e=>{let[t,n]=e;const r=A(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")}).join("");o.document.write('\n        <html>\n          <head>\n            <title>Miscellaneous Settings Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(Qm,'" alt="Company Logo" />\n            <h2 class="title">Miscellaneous Settings Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),o.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),(0,Rm.jsx)("div",{className:"mt-12 space-y-4",children:h(t).map(e=>(0,Rm.jsxs)("div",{className:"flex border-b border-gray-200 pb-3",children:[(0,Rm.jsx)("div",{className:"w-1/3 text-sm font-medium text-gray-600",children:A(e.key)}),(0,Rm.jsx)("div",{className:"w-2/3 font-medium",children:"boolean"===typeof e.value?e.value?"Yes":"No":e.value})]},e.key))})]},t._id))})]})]})},cP=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),A=eu(),u=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString()},h=e.filter(e=>{var t;return null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(a)});(0,t.useEffect)(()=>{(async()=>{s(!0);try{const e=await nN.get("/trades");console.log("Fetched trades:",e.data),n(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{s(!1)}})()},[]);return(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>A("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Trade Database"}),(0,Rm.jsx)("div",{className:"mb-6 relative",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:a,onChange:e=>i(e.target.value),className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"}),(0,Rm.jsx)(Tm,{className:"absolute left-3 top-3 text-gray-400"})]})}),r?(0,Rm.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===h.length?(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:a?"No trades found matching your search.":"No trades found in the database."}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,Rm.jsx)("tbody",{children:h.map(e=>{var t,n,r,s,a,i,o,c,A,h,m;const p=(e.agentCommissionList||[]).find(e=>e.agentName),f=p?p.agentName:"-";return(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{d(e),l(!0)})(e),children:[(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(s=e.keyInfo)||void 0===s?void 0:s.mlsNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:f}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(a=e.keyInfo)&&void 0!==a&&a.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(i=e.keyInfo)||void 0===i?void 0:i.propertyType)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(o=e.keyInfo)||void 0===o?void 0:o.status)?"bg-green-100 text-green-800":"PENDING"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(A=e.keyInfo)||void 0===A?void 0:A.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(h=e.keyInfo)||void 0===h?void 0:h.status)||"Available"})}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(m=e.keyInfo)&&void 0!==m&&m.finalizedDate?u(e.keyInfo.finalizedDate):"-"})]},e._id)})})]})}),o&&(0,Rm.jsx)(Y_,{trade:c,onClose:()=>{l(!1),d(null)},onUpdate:e=>{d(e);(async()=>{try{const e=await nN.get("/trades");n(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]})]})},dP=()=>(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Miscellaneous Entries Database"}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,Rm.jsx)("p",{className:"text-gray-600",children:"This feature is currently under development. Please check back later."})})]})})]}),AP=["_id","__v","createdAt","updatedAt"],uP=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)({fee:"",selectionOption:"",mlsFeeTaxApplicable:"",postToAP:""}),A=async()=>{try{const e=await nN.get("/mls-fees");n(e.data),s(!1)}catch(e){i("Failed to fetch MLS fees"),s(!1)}};(0,t.useEffect)(()=>{A()},[]);const u=e=>{const{name:t,value:n}=e.target;d(e=>X(X({},e),{},{[t]:n}))};return r?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):a?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load MLS fees: ",a]})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,Rm.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"MLS Fee Database"})}),(0,Rm.jsx)("div",{className:"space-y-6",children:e.map(t=>(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,Rm.jsx)("div",{className:"flex justify-between items-center",children:(0,Rm.jsxs)("div",{className:"space-y-4 w-full",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,Rm.jsx)("span",{className:"font-semibold text-gray-700",children:"Fee:"}),(0,Rm.jsx)("span",{children:o===t._id?(0,Rm.jsx)("input",{type:"number",name:"fee",value:c.fee,onChange:u,className:"border rounded px-2 py-1"}):t.fee})]}),(0,Rm.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,Rm.jsx)("span",{className:"font-semibold text-gray-700",children:"Selection Option:"}),(0,Rm.jsx)("span",{children:o===t._id?(0,Rm.jsxs)("select",{name:"selectionOption",value:c.selectionOption,onChange:u,className:"border rounded px-2 py-1",children:[(0,Rm.jsx)("option",{value:"% of Sell Price",children:"% of Sell Price"}),(0,Rm.jsx)("option",{value:"Flat Amount",children:"Flat Amount"})]}):t.selectionOption})]}),(0,Rm.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,Rm.jsx)("span",{className:"font-semibold text-gray-700",children:"Tax Applicable:"}),(0,Rm.jsx)("span",{children:o===t._id?(0,Rm.jsxs)("select",{name:"mlsFeeTaxApplicable",value:c.mlsFeeTaxApplicable,onChange:u,className:"border rounded px-2 py-1",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]}):t.mlsFeeTaxApplicable})]}),(0,Rm.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,Rm.jsx)("span",{className:"font-semibold text-gray-700",children:"Post to A/P:"}),(0,Rm.jsx)("span",{children:o===t._id?(0,Rm.jsxs)("select",{name:"postToAP",value:c.postToAP,onChange:u,className:"border rounded px-2 py-1",children:[(0,Rm.jsx)("option",{value:"Yes Post to A/P",children:"Yes, Post to A/P"}),(0,Rm.jsx)("option",{value:"No dont post to A/P",children:"No, dont post to A/P"})]}):t.postToAP})]})]})}),(0,Rm.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:o===t._id?(0,Rm.jsx)("button",{onClick:()=>(async e=>{try{await nN.put("/mls-fees/".concat(e),c),l(null),A()}catch(t){alert("Failed to update MLS fee: "+t.message)}})(t._id),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Save"}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)("button",{onClick:()=>(async e=>{try{const t=(await nN.get("/mls-fees/".concat(e))).data,{_id:n,__v:r,createdAt:s,updatedAt:a}=t,i=Mm(t,AP),o=window.open("","_blank");if(!o)return;const l=Object.entries(i).map(e=>{let[t,n]=e;const r=(e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()))(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")}).join("");o.document.write('\n        <html>\n          <head>\n            <title>MLS Fee Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(Qm,'" alt="Company Logo" />\n            <h2 class="title">MLS Fee Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),o.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded",children:"Print"}),(0,Rm.jsx)("button",{onClick:()=>(e=>{l(e._id),d({fee:e.fee,selectionOption:e.selectionOption,mlsFeeTaxApplicable:e.mlsFeeTaxApplicable,postToAP:e.postToAP})})(t),className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-3 rounded",children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this MLS fee?"))try{await nN.delete("/mls-fees/".concat(t)),n(e.filter(e=>e._id!==t))}catch(r){alert("Error deleting entry: "+r.message)}})(t._id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Delete"})]})})]})},t._id))})]})]})},hP=["_id","__v","createdAt","updatedAt"],mP=()=>{const e=eu(),{id:n}=tu(),[r,s]=(0,t.useState)({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1}),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{o()},[n]);const o=async()=>{try{const e=await nN.get("/ledger/".concat(n));if(e.data){const t=e.data,{_id:n,__v:r,createdAt:a,updatedAt:i}=t,o=Mm(t,hP);s(o)}i(!1)}catch(e){bp.error("Failed to fetch ledger entry"),i(!1)}},l=e=>{const{name:t,value:n,type:r,checked:a}=e.target;s(e=>X(X({},e),{},{[t]:"checkbox"===r?a:n}))};return a?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit General Ledger Account"}),(0,Rm.jsx)("button",{onClick:()=>e("/ledger-db"),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);try{console.log("Submitting form data:",r);const t=await nN.put("/ledger/".concat(n),r);console.log("Server response:",t.data),bp.success("Ledger entry updated successfully!"),await new Promise(e=>setTimeout(e,1e3)),e("/ledger-db")}catch(s){console.error("Submission error:",s),bp.error(s.message||"Failed to update ledger entry")}finally{i(!1)}},className:"space-y-4",children:[[{label:"A/R - Commission Earned",name:"ARCommissionEarned"},{label:"A/P - General & Commission Expense",name:"APGeneralCommissionExpense"},{label:"A/R - Other Debit",name:"AROtherDebit"},{label:"Unpaid File Trust Receivable",name:"unpaidFileTrustReceivable"},{label:"Commission Receivable Payable",name:"commissionReceivablePayable"},{label:"Held Funds Receivable (Agent)",name:"heldFundsReceivableAgent"},{label:"Held Funds Payable (Agent)",name:"heldFundsPayableAgent"},{label:"Suspense",name:"suspense"},{label:"Unpaid Expenses - Management",name:"unpaidExpensesManagement"},{label:"Unpaid Expenses - Non Mgmt",name:"unpaidExpensesNonMgmt"},{label:"Payroll - Agent",name:"payrollAgent"}].map(e=>(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"text",id:e.name,name:e.name,value:r[e.name],onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name)),(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"agentDisbursement",name:"agentDisbursement",checked:r.agentDisbursement,onChange:l,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,Rm.jsx)("label",{htmlFor:"agentDisbursement",className:"ml-2 block text-sm text-gray-700",children:"Agent Disbursement"})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:a?"Updating...":"Update"})})]})]})]})},pP=()=>{const{id:e}=tu(),n=eu(),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)({lastListing:"",lastTrade:"",compassDirection:"",cdaAddress:"",multipleOffices:"No",mainOfficeNumber:"",hstNumber:"",payrollNumber:"",expStmtAddress:"",openingBalanceFormat:""});(0,t.useEffect)(()=>{(async()=>{try{const t=await nN.get("/misc-settings/".concat(e)),n=await nN.get("/trades");let r=0;n.data&&n.data.length>0&&(r=Math.max(...n.data.map(e=>e.tradeNumber||0)));const s=t.data.lastTrade||0,a=Math.max(s,r);i(X(X({},t.data),{},{lastTrade:a.toString()}))}catch(t){bp.error("Failed to fetch miscellaneous settings"),console.error(t)}finally{s(!1)}})()},[e]);const o=e=>{const{name:t,value:n}=e.target;i(e=>X(X({},e),{},{[t]:n}))};return r?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Miscellaneous Settings"}),(0,Rm.jsx)("button",{onClick:()=>n("/miscellaneous-db"),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,Rm.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await nN.put("/misc-settings/".concat(e),a),bp.success("Miscellaneous settings updated successfully!"),n("/miscellaneous-db")}catch(r){bp.error("Failed to update miscellaneous settings"),console.error(r)}},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,Rm.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Listing"}),(0,Rm.jsx)("input",{type:"number",name:"lastListing",value:a.lastListing,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Trade"}),(0,Rm.jsx)("input",{type:"number",name:"lastTrade",value:a.lastTrade,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),(0,Rm.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Should reflect the current highest trade number from the database"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Compass Direction"}),(0,Rm.jsxs)("select",{name:"compassDirection",value:a.compassDirection,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"CDA Address"}),(0,Rm.jsxs)("select",{name:"cdaAddress",value:a.cdaAddress,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Multiple Offices"}),(0,Rm.jsxs)("select",{name:"multipleOffices",value:a.multipleOffices,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Office Number"}),(0,Rm.jsx)("input",{type:"number",name:"mainOfficeNumber",value:a.mainOfficeNumber,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"HST Number"}),(0,Rm.jsx)("input",{type:"number",name:"hstNumber",value:a.hstNumber,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payroll Number"}),(0,Rm.jsx)("input",{type:"number",name:"payrollNumber",value:a.payrollNumber,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Expense Statement Address"}),(0,Rm.jsxs)("select",{name:"expStmtAddress",value:a.expStmtAddress,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Opening Balance Format"}),(0,Rm.jsxs)("select",{name:"openingBalanceFormat",value:a.openingBalanceFormat,onChange:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,Rm.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,Rm.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]}),(0,Rm.jsx)("div",{className:"flex items-center justify-end",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Changes"})})]})]})})]})},fP=()=>{const e=eu();return(0,Rm.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,Rm.jsx)(Fp,{})," ",(0,Rm.jsxs)("div",{className:"flex-grow p-4 sm:p-6 md:p-8",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>e("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("header",{className:"mb-6 md:mb-8",children:(0,Rm.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Listing Information Database"})}),(0,Rm.jsx)("main",{children:(0,Rm.jsx)(rP,{showAdminActions:!0})})]})]})},gP=e=>{let{formData:n,setFormData:r,handleSubmit:s,fetchNextEmployeeNo:a,combinedFormData:i,onTabChange:o}=e;const[l,c]=(0,t.useState)({employeeNo:"",firstName:"",middleName:"",lastName:"",legalName:"",nickname:"",spouseName:"",status:"",gender:"",streetNumber:"",streetName:"",unitNumber:"",city:"",province:"",postalCode:"",email:"",website:"",homePhone:"",cellPhone:"",fax:"",birthDate:"",startDate:"",contactAnniversary:"",franchiseAnniversary:"",terminationDate:"",lastPayDate:"",bondExpiryDate:"",incorporatedDate:"",unincorporatedDate:""});(0,t.useEffect)(()=>{if(i.basicInfo&&Object.keys(i.basicInfo).length>0)c(i.basicInfo);else{const e=async()=>{const e=await a();c(t=>X(X({},t),{},{employeeNo:e}))};e()}},[i.basicInfo]);const d=e=>{const{name:t,value:n}=e.target;c(e=>X(X({},e),{},{[t]:n}))};return(0,t.useEffect)(()=>{const e=setTimeout(()=>{Object.keys(l).length>0&&r(l)},500);return()=>clearTimeout(e)},[l]),(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Basic Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee #"}),(0,Rm.jsx)("input",{type:"text",name:"employeeNo",value:l.employeeNo||"",className:"w-full p-2 bg-gray-100 border rounded-md",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:l.firstName||"",onChange:d,className:"w-full p-2 border rounded-md",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Name"}),(0,Rm.jsx)("input",{type:"text",name:"middleName",value:l.middleName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:l.lastName||"",onChange:d,className:"w-full p-2 border rounded-md",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,Rm.jsx)("input",{type:"text",name:"legalName",value:l.legalName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),(0,Rm.jsx)("input",{type:"text",name:"nickname",value:l.nickname||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Name"}),(0,Rm.jsx)("input",{type:"text",name:"spouseName",value:l.spouseName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Rm.jsxs)("select",{name:"status",value:l.status||"",onChange:d,className:"w-full p-2 border rounded-md",children:[(0,Rm.jsx)("option",{value:"",children:"Select Status"}),(0,Rm.jsx)("option",{value:"Active",children:"Active"}),(0,Rm.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Rm.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,Rm.jsx)("option",{value:"Terminated",children:"Terminated"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,Rm.jsxs)("select",{name:"gender",value:l.gender||"",onChange:d,className:"w-full p-2 border rounded-md",children:[(0,Rm.jsx)("option",{value:"",children:"Select Gender"}),(0,Rm.jsx)("option",{value:"Male",children:"Male"}),(0,Rm.jsx)("option",{value:"Female",children:"Female"}),(0,Rm.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Contact Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street #"}),(0,Rm.jsx)("input",{type:"text",name:"streetNumber",value:l.streetNumber||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name"}),(0,Rm.jsx)("input",{type:"text",name:"streetName",value:l.streetName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit #"}),(0,Rm.jsx)("input",{type:"text",name:"unitNumber",value:l.unitNumber||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:l.city||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:l.province||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:l.postalCode||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"email",name:"email",value:l.email||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,Rm.jsx)("input",{type:"text",name:"website",value:l.website||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Home Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"homePhone",value:l.homePhone||"",onChange:e=>KS(e,c),className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"cellPhone",value:l.cellPhone||"",onChange:e=>KS(e,c),className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fax"}),(0,Rm.jsx)("input",{type:"tel",name:"fax",value:l.fax||"",onChange:e=>KS(e,c),className:"w-full p-2 border rounded-md"})]})]}),(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Date"}),(0,Rm.jsx)("input",{type:"date",name:"birthDate",value:l.birthDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,Rm.jsx)("input",{type:"date",name:"startDate",value:l.startDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Anniversary"}),(0,Rm.jsx)("input",{type:"date",name:"contactAnniversary",value:l.contactAnniversary||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Franchise Anniversary"}),(0,Rm.jsx)("input",{type:"date",name:"franchiseAnniversary",value:l.franchiseAnniversary||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Termination Date"}),(0,Rm.jsx)("input",{type:"date",name:"terminationDate",value:l.terminationDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Pay Date"}),(0,Rm.jsx)("input",{type:"date",name:"lastPayDate",value:l.lastPayDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bond Expiry Date"}),(0,Rm.jsx)("input",{type:"date",name:"bondExpiryDate",value:l.bondExpiryDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incorporated Date"}),(0,Rm.jsx)("input",{type:"date",name:"incorporatedDate",value:l.incorporatedDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unincorporated Date"}),(0,Rm.jsx)("input",{type:"date",name:"unincorporatedDate",value:l.unincorporatedDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-end"})]})},xP=e=>{var n,r;let{licenses:s,setLicenses:a,handleSubmit:i,combinedFormData:o,setCombinedFormData:l,setActiveTab:c}=e;const[d,A]=(0,t.useState)((null===(n=o.basicInfo)||void 0===n?void 0:n.hstNumber)||"");(0,t.useEffect)(()=>{var e;s&&0!==s.length||!a||a([{licenseNumber:"",licenseType:"",issueDate:"",expiryDate:"",status:"Active"}]),o.licenseInfo&&o.licenseInfo.length>0&&a(o.licenseInfo),void 0!==(null===(e=o.basicInfo)||void 0===e?void 0:e.hstNumber)&&A(o.basicInfo.hstNumber)},[o.licenseInfo,null===(r=o.basicInfo)||void 0===r?void 0:r.hstNumber]);const u=(e,t,n)=>{const r=[...s];r[e][t]=n,a(r)};return(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Additional Information"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST #"}),(0,Rm.jsx)("input",{type:"text",value:d,onChange:e=>{A(e.target.value),l(t=>X(X({},t),{},{basicInfo:X(X({},t.basicInfo),{},{hstNumber:e.target.value})}))},className:"w-full p-2 border rounded-md"})]})}),(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"License Information"}),s.map((e,t)=>(0,Rm.jsx)("div",{className:"mb-8 p-4 border rounded-lg",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Number"}),(0,Rm.jsx)("input",{type:"text",value:e.licenseNumber,onChange:e=>u(t,"licenseNumber",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Type"}),(0,Rm.jsxs)("select",{value:e.licenseType,onChange:e=>u(t,"licenseType",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,Rm.jsx)("option",{value:"",children:"Select License Type"}),(0,Rm.jsx)("option",{value:"Real Estate Agent",children:"Real Estate Agent"}),(0,Rm.jsx)("option",{value:"Broker",children:"Broker"}),(0,Rm.jsx)("option",{value:"Property Manager",children:"Property Manager"}),(0,Rm.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,Rm.jsx)("input",{type:"date",value:e.issueDate,onChange:e=>u(t,"issueDate",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,Rm.jsx)("input",{type:"date",value:e.expiryDate,onChange:e=>u(t,"expiryDate",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Rm.jsxs)("select",{value:e.status,onChange:e=>u(t,"status",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,Rm.jsx)("option",{value:"Active",children:"Active"}),(0,Rm.jsx)("option",{value:"Expired",children:"Expired"}),(0,Rm.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,Rm.jsx)("option",{value:"Pending",children:"Pending"})]})]})]})},t)),(0,Rm.jsx)("div",{className:"flex justify-between mt-4",children:(0,Rm.jsx)("button",{type:"button",onClick:()=>{a([...s,{licenseNumber:"",licenseType:"",issueDate:"",expiryDate:"",status:"Active"}])},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add License"})})]})},bP=e=>{let{employeeNo:n="",payrollData:r={},onSubmit:s=()=>{}}=e;const[a,i]=(0,t.useState)({employeeNo:n,position:"",hourlyRate:"",hoursWorked:"",grossPay:"",deductions:"",netPay:""});(0,t.useEffect)(()=>{i(e=>X(X({},e),{},{employeeNo:n}))},[n]),(0,t.useEffect)(()=>{r&&Object.keys(r).length>0&&i(e=>X(X({},e),{},{position:r.position||"",hourlyRate:r.hourlyRate?r.hourlyRate.toString():"",hoursWorked:r.hoursWorked?r.hoursWorked.toString():"",grossPay:r.grossPay?r.grossPay.toString():"",deductions:r.deductions?r.deductions.toString():"",netPay:r.netPay?r.netPay.toString():""}))},[r]);const o=e=>{const{name:t,value:n}=e.target;i(e=>X(X({},e),{},{[t]:n})),s(X(X({},a),{},{[t]:n}))};return(0,Rm.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Payroll Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Employee No"}),(0,Rm.jsx)("input",{type:"text",name:"employeeNo",value:a.employeeNo,className:"w-full p-2 bg-gray-100 border rounded-md",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Position"}),(0,Rm.jsx)("input",{type:"text",name:"position",value:a.position,onChange:o,className:"w-full p-2 border rounded-md"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Hourly Rate"}),(0,Rm.jsx)("input",{type:"number",name:"hourlyRate",value:a.hourlyRate,onChange:o,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Hours Worked"}),(0,Rm.jsx)("input",{type:"number",name:"hoursWorked",value:a.hoursWorked,onChange:o,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Gross Pay"}),(0,Rm.jsx)("input",{type:"number",name:"grossPay",value:a.grossPay,onChange:o,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Deductions"}),(0,Rm.jsx)("input",{type:"number",name:"deductions",value:a.deductions,onChange:o,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Net Pay"}),(0,Rm.jsx)("input",{type:"number",name:"netPay",value:a.netPay,onChange:o,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-end"})]})},yP=[{value:"flatFee",label:"Flat Fee"},{value:"garnishment",label:"Garnishment"},{value:"plan250",label:"Plan 250"},{value:"plan500",label:"Plan 500"},{value:"plan9010",label:"Plan 90/10"},{value:"plan955",label:"Plan 95/5"},{value:"plan8515",label:"Plan 85/15"},{value:"plan5050",label:"Plan 50/50"},{value:"plan8020",label:"Plan 80/20"},{value:"plan150",label:"Plan 150"},{value:"buyerRebate",label:"Buyer Rebate"},{value:"noFee",label:"No Fee"}],vP=e=>{let{selectedFee:n,setSelectedFee:r,handleSubmit:s,combinedFormData:a,onSave:i,isLoading:o=!1}=e;(0,t.useEffect)(()=>{a.feeInfo&&r(a.feeInfo)},[a.feeInfo]);const l=e=>{r(e.target.value),s(e.target.value)};return(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Fee Information"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:yP.map(e=>(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"radio",id:e.value,name:"feeOption",value:e.value,checked:n===e.value,onChange:l,className:"h-5 w-5 text-blue-900"}),(0,Rm.jsx)("label",{htmlFor:e.value,className:"ml-2 text-gray-700",children:e.label})]},e.value))}),(0,Rm.jsx)("div",{className:"flex justify-end",children:(0,Rm.jsx)("button",{onClick:i,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"Saving...":"Save Agent Information"})})]})},wP=e=>{let{agent:n,onClose:r,onUpdate:s}=e;const[a,i]=(0,t.useState)({basicInfo:{},licenseInfo:[],payroll:{},feeInfo:""}),[o,l]=(0,t.useState)("info1"),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(""),[h,m]=(0,t.useState)([]),[p,f]=(0,t.useState)("");(0,t.useEffect)(()=>{n&&(i({basicInfo:n.basicInfo||n,licenseInfo:n.licenseInfo||[],payroll:n.payroll||{},feeInfo:n.feeInfo||""}),m(n.licenseInfo||[]),f(n.feeInfo||""))},[n]);const g=()=>{r()};return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl w-full relative max-h-[95vh] overflow-hidden",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,Rm.jsxs)("h2",{className:"text-2xl font-bold text-blue-900",children:["Edit Agent: #",n.employeeNo]}),(0,Rm.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700",onClick:g,children:"\xd7"})]}),(0,Rm.jsx)("div",{className:"flex space-x-1 mb-6 border-b",children:[{id:"info1",label:"Info 1"},{id:"info2",label:"Info 2"},{id:"payroll",label:"Payroll"},{id:"fee",label:"Fee"}].map(e=>(0,Rm.jsx)("button",{onClick:()=>l(e.id),className:"px-4 py-2 rounded-t-lg font-medium transition-colors ".concat(o===e.id?"bg-blue-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.label},e.id))}),A&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:A}),(0,Rm.jsxs)("div",{className:"overflow-y-auto max-h-[60vh] pr-2",children:["info1"===o&&(0,Rm.jsx)(gP,{formData:a.basicInfo,setFormData:e=>i(t=>X(X({},t),{},{basicInfo:e})),handleSubmit:e=>{i(t=>X(X({},t),{},{basicInfo:e}))},combinedFormData:a,fetchNextEmployeeNo:async()=>n.employeeNo}),"info2"===o&&(0,Rm.jsx)(xP,{licenses:a.licenseInfo,setLicenses:e=>{i(t=>X(X({},t),{},{licenseInfo:e})),m(e)},handleSubmit:e=>{i(t=>X(X({},t),{},{licenseInfo:e})),m(e)},combinedFormData:a,setCombinedFormData:i,setActiveTab:l}),"payroll"===o&&(0,Rm.jsx)(bP,{employeeNo:n.employeeNo,payrollData:a.payroll,onSubmit:e=>{i(t=>X(X({},t),{},{payroll:e}))}}),"fee"===o&&(0,Rm.jsx)(vP,{selectedFee:a.feeInfo,setSelectedFee:e=>{i(t=>X(X({},t),{},{feeInfo:e})),f(e)},handleSubmit:e=>{i(t=>X(X({},t),{},{feeInfo:e})),f(e)},combinedFormData:a})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 mt-6 pt-4 border-t",children:[(0,Rm.jsx)("button",{onClick:g,className:"px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",disabled:c,children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{d(!0),u(""),console.log("Current combinedFormData:",JSON.stringify(a,null,2));try{var e,t;const i=a.basicInfo,o=[];if(null!==i&&void 0!==i&&null!==(e=i.firstName)&&void 0!==e&&e.trim()||o.push("First Name"),null!==i&&void 0!==i&&null!==(t=i.lastName)&&void 0!==t&&t.trim()||o.push("Last Name"),null!==i&&void 0!==i&&i.employeeNo||o.push("Employee Number"),o.length>0)return u("Missing required fields: ".concat(o.join(", "),". Please complete the basic information form first.")),void d(!1);const l={employeeNo:Number(i.employeeNo),firstName:i.firstName.trim(),middleName:i.middleName||"",lastName:i.lastName.trim(),legalName:i.legalName||"",nickname:i.nickname||"",spouseName:i.spouseName||"",gender:i.gender||"",email:i.email||"",website:i.website||"",homePhone:i.homePhone||"",cellPhone:i.cellPhone||"",fax:i.fax||"",streetNumber:i.streetNumber||"",streetName:i.streetName||"",unitNumber:i.unitNumber||"",city:i.city||"",province:i.province||"",postalCode:i.postalCode||"",hstNumber:i.hstNumber||"",dateOfBirth:i.birthDate||null,startDate:i.startDate||null,endDate:i.terminationDate||null,contactAnniversary:i.contactAnniversary||null,franchiseAnniversary:i.franchiseAnniversary||null,lastPayDate:i.lastPayDate||null,bondExpiryDate:i.bondExpiryDate||null,incorporatedDate:i.incorporatedDate||null,unincorporatedDate:i.unincorporatedDate||null,status:i.status||"Active",licenses:a.licenseInfo||[],payroll:a.payroll||{},feeInfo:a.feeInfo||""};console.log("Saving agent data:",JSON.stringify(l,null,2));const c=await nN.put("/agents/".concat(n._id),l);console.log("Response from server:",JSON.stringify(c.data,null,2)),s&&(console.log("Calling onUpdate with:",JSON.stringify(c.data,null,2)),s(c.data)),r()}catch(l){var i,o;console.error("Error updating agent:",l),u((null===(i=l.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Error updating agent")}finally{d(!1)}},className:"px-6 py-2 bg-blue-900 text-white rounded hover:bg-blue-800 transition-colors disabled:opacity-50",disabled:c,children:c?"Saving...":"Save Changes"})]})]})}):null},NP=e=>{let{agent:n,onClose:r,onEdit:s,onDelete:a}=e;const[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(n);t.useEffect(()=>{n&&(console.log("Agent data in modal:",JSON.stringify(n,null,2)),c(n))},[n]);const d=e=>e?new Date(e).toLocaleDateString():"";return l?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,Rm.jsxs)("div",{className:"flex gap-3 absolute top-4 right-4 z-10",children:[(0,Rm.jsx)("button",{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded shadow transition-colors",children:"Edit"}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 text-2xl px-2",style:{lineHeight:1},children:(0,Rm.jsx)(Dm,{})})]}),(0,Rm.jsxs)("h1",{className:"text-2xl font-bold text-blue-900 mb-6 mt-8",children:["Agent Details: #",l.employeeNo]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Basic Information"}),(0,Rm.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Employee No"}),(0,Rm.jsx)("div",{children:l.employeeNo||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"First Name"}),(0,Rm.jsx)("div",{children:l.firstName||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Middle Name"}),(0,Rm.jsx)("div",{children:l.middleName||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Last Name"}),(0,Rm.jsx)("div",{children:l.lastName||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Legal Name"}),(0,Rm.jsx)("div",{children:l.legalName||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Nickname"}),(0,Rm.jsx)("div",{children:l.nickname||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Spouse Name"}),(0,Rm.jsx)("div",{children:l.spouseName||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Gender"}),(0,Rm.jsx)("div",{children:l.gender||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Status"}),(0,Rm.jsx)("div",{children:l.status||""})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Contact Information"}),(0,Rm.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Street #"}),(0,Rm.jsx)("div",{children:l.streetNumber||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Street Name"}),(0,Rm.jsx)("div",{children:l.streetName||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Unit #"}),(0,Rm.jsx)("div",{children:l.unitNumber||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"City"}),(0,Rm.jsx)("div",{children:l.city||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Province"}),(0,Rm.jsx)("div",{children:l.province||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Postal Code"}),(0,Rm.jsx)("div",{children:l.postalCode||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Email"}),(0,Rm.jsx)("div",{children:l.email||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Website"}),(0,Rm.jsx)("div",{children:l.website||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"HST #"}),(0,Rm.jsx)("div",{children:l.hstNumber||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Home Phone"}),(0,Rm.jsx)("div",{children:l.homePhone||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Cell Phone"}),(0,Rm.jsx)("div",{children:l.cellPhone||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Fax"}),(0,Rm.jsx)("div",{children:l.fax||""})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Date of Birth"}),(0,Rm.jsx)("div",{children:d(l.dateOfBirth)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Start Date"}),(0,Rm.jsx)("div",{children:d(l.startDate)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"End Date"}),(0,Rm.jsx)("div",{children:d(l.endDate)})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Contact Anniversary"}),(0,Rm.jsx)("div",{children:d(l.contactAnniversary)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Franchise Anniversary"}),(0,Rm.jsx)("div",{children:d(l.franchiseAnniversary)})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Last Pay Date"}),(0,Rm.jsx)("div",{children:d(l.lastPayDate)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Bond Expiry Date"}),(0,Rm.jsx)("div",{children:d(l.bondExpiryDate)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Incorporated Date"}),(0,Rm.jsx)("div",{children:d(l.incorporatedDate)})]})]}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 gap-y-4 mt-4",children:(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Unincorporated Date"}),(0,Rm.jsx)("div",{children:d(l.unincorporatedDate)})]})})]})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"License Information"}),(0,Rm.jsx)("div",{className:"border-t border-gray-200 pt-4",children:l.licenses&&l.licenses.length>0?l.licenses.map((e,t)=>(0,Rm.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"License Type"}),(0,Rm.jsx)("div",{children:e.licenseType||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"License Number"}),(0,Rm.jsx)("div",{children:e.licenseNumber||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Status"}),(0,Rm.jsx)("div",{children:e.status||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Issue Date"}),(0,Rm.jsx)("div",{children:d(e.issueDate)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Expiry Date"}),(0,Rm.jsx)("div",{children:d(e.expiryDate)})]})]})]},t)):(0,Rm.jsx)("div",{className:"text-gray-500 italic",children:"No license information available"})})]}),l.feeInfo&&(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Fee Information"}),(0,Rm.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,Rm.jsx)("div",{className:"grid grid-cols-1 gap-y-4",children:(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Fee Plan"}),(0,Rm.jsxs)("div",{children:["flatFee"===l.feeInfo&&"Flat Fee","garnishment"===l.feeInfo&&"Garnishment","plan250"===l.feeInfo&&"Plan 250","plan500"===l.feeInfo&&"Plan 500","plan9010"===l.feeInfo&&"Plan 90/10","plan955"===l.feeInfo&&"Plan 95/5","plan8515"===l.feeInfo&&"Plan 85/15","plan5050"===l.feeInfo&&"Plan 50/50","plan8020"===l.feeInfo&&"Plan 80/20","plan150"===l.feeInfo&&"Plan 150","buyerRebate"===l.feeInfo&&"Buyer Rebate","noFee"===l.feeInfo&&"No Fee",""===l.feeInfo&&"No fee plan selected"]})]})})})]}),l.payroll&&(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Payroll Information"}),(0,Rm.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Position"}),(0,Rm.jsx)("div",{children:l.payroll.position||""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Hourly Rate"}),(0,Rm.jsx)("div",{children:l.payroll.hourlyRate?"$".concat(l.payroll.hourlyRate):""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Hours Worked"}),(0,Rm.jsx)("div",{children:l.payroll.hoursWorked||""})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Gross Pay"}),(0,Rm.jsx)("div",{children:l.payroll.grossPay?"$".concat(l.payroll.grossPay):""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Deductions"}),(0,Rm.jsx)("div",{children:l.payroll.deductions?"$".concat(l.payroll.deductions):""})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"text-gray-600",children:"Net Pay"}),(0,Rm.jsx)("div",{children:l.payroll.netPay?"$".concat(l.payroll.netPay):""})]})]})]})]}),(0,Rm.jsx)("div",{className:"mt-8 flex justify-end space-x-4",children:(0,Rm.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition",children:"Close"})}),i&&(0,Rm.jsx)(wP,{agent:l,onClose:()=>o(!1),onUpdate:e=>{o(!1),c(e)}})]})}):null},jP=["_id"],CP=()=>{var e;const[n,r]=(0,t.useState)("list"),[s,a]=(0,t.useState)([]),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[f,g]=(0,t.useState)({basicInfo:{},licenseInfo:[],payrollInfo:{}}),[x,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),[w,N]=(0,t.useState)(""),j=(0,t.useCallback)(e=>{g(t=>X(X({},t),{},{basicInfo:e}))},[]);(0,t.useEffect)(()=>{C()},[]);const C=async()=>{try{o(!0);const e=await nN.get("/agents");a(e.data),A(e.data),o(!1)}catch(e){console.error("Error fetching agents:",e),o(!1)}},B=()=>{if(!l.trim()){const e=[...s].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));return void A(e)}const e=l.toLowerCase().trim(),t=s.filter(t=>{var n,r;const s=t.employeeNo.toString().includes(e.replace("#","")),a=null===(n=t.firstName)||void 0===n?void 0:n.toLowerCase().includes(e),i=null===(r=t.lastName)||void 0===r?void 0:r.toLowerCase().includes(e),o="".concat(t.firstName||""," ").concat(t.lastName||"").toLowerCase().includes(e),l="".concat(t.lastName||""," ").concat(t.firstName||"").toLowerCase().includes(e);return s||a||i||o||l}).sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));A(t)},S=()=>{b(!1),v(null)};return(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"border-b border-gray-200",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rm.jsxs)("div",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("list"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("list"),children:"List"}),(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info1"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info1"),children:"Info 1"}),(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info2"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info2"),children:"Info 2"}),(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("payroll"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("payroll"),children:"Payroll"}),(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("fee"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("fee"),children:"Fee"})]})})}),(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["list"===n&&(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsx)("div",{className:"flex-1 max-w-md",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",placeholder:"Search by agent name or employee number...",value:l,onChange:e=>{const t=e.target.value;if(c(t),!t.trim()){const e=[...s].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));return void A(e)}const n=t.toLowerCase().trim(),r=s.filter(e=>{var t,r;const s=e.employeeNo.toString().includes(n.replace("#","")),a=null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(n),i=null===(r=e.lastName)||void 0===r?void 0:r.toLowerCase().includes(n),o="".concat(e.firstName||""," ").concat(e.lastName||"").toLowerCase().includes(n),l="".concat(e.lastName||""," ").concat(e.firstName||"").toLowerCase().includes(n);return s||a||i||o||l}).sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));A(r)},onKeyPress:e=>{"Enter"===e.key&&B()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,Rm.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Rm.jsx)(Tm,{className:"h-4 w-4 text-gray-400"})})]})}),(0,Rm.jsx)("button",{onClick:B,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,Rm.jsx)("button",{onClick:()=>{c(""),A([...s].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]}),l&&(0,Rm.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Showing ",d.length," of ",s.length," agents"]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Agent #"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"First Name"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Last Name"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.length>0?d.sort((e,t)=>Number(String(e.employeeNo).replace(/\D/g,""))-Number(String(t.employeeNo).replace(/\D/g,""))).map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>{v(e),b(!0)},children:[(0,Rm.jsxs)("td",{className:"py-3 px-4",children:["#",e.employeeNo]}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:e.firstName}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:e.lastName}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:(0,Rm.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.status?"bg-green-100 text-green-800":"Inactive"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})})]},e._id)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-500",children:l?"No agents found matching your search.":"No agents available."})})})]})})]}),"info1"===n&&(0,Rm.jsx)(gP,{formData:f.basicInfo,setFormData:j,handleSubmit:e=>{g(t=>X(X({},t),{},{basicInfo:e})),r("info2")},fetchNextEmployeeNo:async()=>{try{return(await nN.get("/agents/next-employee-no")).data.nextEmployeeNo}catch(e){return console.error("Error fetching next employee number:",e),100}},combinedFormData:f,setCombinedFormData:g,setActiveTab:r,onTabChange:e=>{}}),"info2"===n&&(0,Rm.jsx)(xP,{licenses:f.licenseInfo,setLicenses:e=>g(t=>X(X({},t),{},{licenseInfo:e})),handleSubmit:e=>{g(t=>X(X({},t),{},{licenseInfo:e})),r("payroll")},combinedFormData:f,setCombinedFormData:g,setActiveTab:r}),"payroll"===n&&(0,Rm.jsx)(bP,{employeeNo:(null===(e=f.basicInfo)||void 0===e?void 0:e.employeeNo)||"",payrollData:f.payrollInfo||{},onSubmit:e=>{g(t=>X(X({},t),{},{payrollInfo:e})),r("fee")}}),"fee"===n&&(0,Rm.jsx)(vP,{selectedFee:f.feeInfo,setSelectedFee:e=>g(t=>X(X({},t),{},{feeInfo:e})),handleSubmit:e=>{const t=X(X({},f),{},{feeInfo:e});g(t)},combinedFormData:f,onSave:async()=>{var e,t,n,s,a;if(null===(e=f.basicInfo)||void 0===e||null===(t=e.firstName)||void 0===t||!t.trim()||null===(n=f.basicInfo)||void 0===n||null===(s=n.lastName)||void 0===s||!s.trim()||null===(a=f.basicInfo)||void 0===a||!a.employeeNo)return bp.error("Please complete the basic information (Info 1) form before saving. First Name, Last Name, and Employee Number are required."),void r("info1");try{o(!0),await(async e=>{try{var t,n;o(!0),console.log("Data being passed to saveAgentData:",e),console.log("Basic info:",e.basicInfo);const{basicInfo:r,licenseInfo:s,payrollInfo:a,feeInfo:i}=e,l=Array.isArray(s)?s.map(e=>{let{_id:t}=e;return X({},Mm(e,jP))}):[],c=a?{position:a.position||"",hourlyRate:a.hourlyRate?Number(a.hourlyRate):0,hoursWorked:a.hoursWorked?Number(a.hoursWorked):0,grossPay:a.grossPay?Number(a.grossPay):0,deductions:a.deductions?Number(a.deductions):0,netPay:a.netPay?Number(a.netPay):0}:null,d=i||"",A=[];if(null!==r&&void 0!==r&&null!==(t=r.firstName)&&void 0!==t&&t.trim()||A.push("First Name"),null!==r&&void 0!==r&&null!==(n=r.lastName)&&void 0!==n&&n.trim()||A.push("Last Name"),null!==r&&void 0!==r&&r.employeeNo||A.push("Employee Number"),A.length>0){const e="Missing required fields: ".concat(A.join(", "),". Please complete the basic information form first.");throw bp.error(e),o(!1),new Error("Missing required fields: ".concat(A.join(", ")))}const h={employeeNo:Number(r.employeeNo),firstName:r.firstName.trim(),middleName:r.middleName||"",lastName:r.lastName.trim(),legalName:r.legalName||"",nickname:r.nickname||"",spouseName:r.spouseName||"",gender:r.gender||"",email:r.email||"",website:r.website||"",homePhone:r.homePhone||"",cellPhone:r.cellPhone||"",fax:r.fax||"",streetNumber:r.streetNumber||"",streetName:r.streetName||"",unitNumber:r.unitNumber||"",city:r.city||"",province:r.province||"",postalCode:r.postalCode||"",hstNumber:r.hstNumber||"",dateOfBirth:r.birthDate||null,startDate:r.startDate||null,endDate:r.terminationDate||null,contactAnniversary:r.contactAnniversary||null,franchiseAnniversary:r.franchiseAnniversary||null,lastPayDate:r.lastPayDate||null,bondExpiryDate:r.bondExpiryDate||null,incorporatedDate:r.incorporatedDate||null,unincorporatedDate:r.unincorporatedDate||null,status:r.status||"Active",licenses:l,payroll:c,feeInfo:d};let p;return console.log("Final agent data being sent to server:",h),p=u&&m?await nN.put("/agents/".concat(m),h):await nN.post("/agents",h),o(!1),p.data}catch(r){throw console.error("Error saving agent data:",r),r.message.includes("Missing required fields")?(o(!1),r):(bp.error("Failed to save agent information. Please try again."),o(!1),r)}})(f),bp.success("Agent information saved successfully!"),r("list"),C()}catch(i){i.message.includes("Missing required fields")?r("info1"):bp.error("Error saving agent information. Please try again.")}finally{o(!1)}},isLoading:i})]}),x&&(0,Rm.jsx)(NP,{agent:y,onClose:S,onEdit:e=>{console.log("onEdit called with updated agent:",JSON.stringify(e,null,2)),console.log("Current agents before update:",s.length),a(t=>{const n=t.map(t=>t._id===e._id?e:t);return console.log("Updated agents array:",n.length),n}),A(t=>{const n=t.map(t=>t._id===e._id?e:t);return console.log("Updated filtered agents array:",n.length),n}),v(e),console.log("Updated selectedAgent"),S()}})]})},BP=["licenses","payroll","feeInfo","_id","__v","createdAt","updatedAt"],SP=()=>{var e,n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k,F,I,T,D,L,_,P,U,O,Q,R,H,M,V,z,K,q;const[G,W]=(0,t.useState)([]),[Y,J]=(0,t.useState)(!0),[Z,$]=(0,t.useState)(""),[ee,te]=(0,t.useState)([]),[ne,re]=(0,t.useState)(null),[se,ae]=(0,t.useState)(!1),[ie,oe]=(0,t.useState)(!1),[le,ce]=(0,t.useState)({}),de=eu();(0,t.useEffect)(()=>{Ae()},[]);const Ae=async()=>{try{J(!0);const e=[...(await nN.get("/agents")).data].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));W(e),te(e),J(!1)}catch(e){console.error("Error fetching agents:",e),J(!1)}},ue=()=>{if(!Z.trim()){const e=[...G].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));return void te(e)}const e=Z.toLowerCase().trim(),t=G.filter(t=>{var n,r,s;const a=null===(n=t.employeeNo)||void 0===n?void 0:n.toString().includes(e.replace("#","")),i=null===(r=t.firstName)||void 0===r?void 0:r.toLowerCase().includes(e),o=null===(s=t.lastName)||void 0===s?void 0:s.toLowerCase().includes(e),l="".concat(t.firstName||""," ").concat(t.lastName||"").toLowerCase().includes(e),c="".concat(t.lastName||""," ").concat(t.firstName||"").toLowerCase().includes(e);return a||i||o||l||c}).sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));te(t)},he=(e,t)=>{const{name:n,value:r,type:s,checked:a}=e.target,i="checkbox"===s?a:r;ce(e=>X(X({},e),{},{[t]:X(X({},e[t]||{}),{},{[n]:i})}))},me=(e,t,n)=>{const r=[...le.licenseInfo];r[e]=X(X({},r[e]),{},{[t]:n}),ce(e=>X(X({},e),{},{licenseInfo:r}))},pe=()=>{ae(!1),re(null),oe(!1)},fe=e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(Tu){return""}};return(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>de("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Agent Information Database"}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsx)("div",{className:"flex-1 max-w-md",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",placeholder:"Search by agent name or employee number...",value:Z,onChange:e=>{const t=e.target.value;if($(t),!t.trim()){const e=[...G].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));return void te(e)}const n=t.toLowerCase().trim(),r=G.filter(e=>{var t,r,s;const a=null===(t=e.employeeNo)||void 0===t?void 0:t.toString().includes(n.replace("#","")),i=null===(r=e.firstName)||void 0===r?void 0:r.toLowerCase().includes(n),o=null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(n),l="".concat(e.firstName||""," ").concat(e.lastName||"").toLowerCase().includes(n),c="".concat(e.lastName||""," ").concat(e.firstName||"").toLowerCase().includes(n);return a||i||o||l||c}).sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo));te(r)},onKeyPress:e=>{"Enter"===e.key&&ue()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,Rm.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Rm.jsx)(Tm,{className:"h-4 w-4 text-gray-400"})})]})}),(0,Rm.jsx)("button",{onClick:ue,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,Rm.jsx)("button",{onClick:()=>{$(""),te([...G].sort((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]}),Z&&(0,Rm.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Showing ",ee.length," of ",G.length," agents"]})]}),Y?(0,Rm.jsx)("p",{className:"text-center py-4",children:"Loading agents..."}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Agent #"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"First Name"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Last Name"}),(0,Rm.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"divide-y divide-gray-200",children:ee.length>0?ee.sort((e,t)=>Number(String(e.employeeNo).replace(/\D/g,""))-Number(String(t.employeeNo).replace(/\D/g,""))).map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{re(e),ae(!0),oe(!1)})(e),children:[(0,Rm.jsxs)("td",{className:"py-3 px-4",children:["#",e.employeeNo]}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:e.firstName}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:e.lastName}),(0,Rm.jsx)("td",{className:"py-3 px-4",children:(0,Rm.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.status?"bg-green-100 text-green-800":"Inactive"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})})]},e._id)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-500",children:Z?"No agents found matching your search.":"No agents available."})})})]})})]}),se&&ne&&!ie&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold",children:"Agent Details"}),(0,Rm.jsx)("button",{onClick:pe,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Rm.jsx)(NP,{agent:ne,onClose:pe,onEdit:()=>{oe(!0);const{licenses:e,payroll:t,feeInfo:n,_id:r,__v:s,createdAt:a,updatedAt:i}=ne,o=Mm(ne,BP),l={};if(n&&"string"===typeof n){["flatFee","garnishment","plan250","plan500","plan9010","plan955","plan8515","plan5050","plan8020","plan150","buyerRebate","noFee"].forEach(e=>{l[e]=n===e})}ce({basicInfo:o,licenseInfo:e||[],payrollInfo:t||{},feeInfo:l})},onDelete:async()=>{if(window.confirm("Are you sure you want to delete this agent?"))try{await nN.delete("/agents/".concat(ne._id)),Ae(),ae(!1),alert("Agent deleted successfully!")}catch(e){console.error("Error deleting agent:",e),alert("Failed to delete agent")}}})]})}),se&&ie&&le&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold",children:"Edit Agent"}),(0,Rm.jsx)("button",{onClick:pe,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Basic Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent #"}),(0,Rm.jsx)("input",{type:"text",name:"employeeNo",value:(null===(e=le.basicInfo)||void 0===e?void 0:e.employeeNo)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Rm.jsxs)("select",{name:"status",value:(null===(n=le.basicInfo)||void 0===n?void 0:n.status)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,Rm.jsx)("option",{value:"Active",children:"Active"}),(0,Rm.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Rm.jsx)("option",{value:"Pending",children:"Pending"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:(null===(r=le.basicInfo)||void 0===r?void 0:r.firstName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Middle Name"}),(0,Rm.jsx)("input",{type:"text",name:"middleName",value:(null===(s=le.basicInfo)||void 0===s?void 0:s.middleName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:(null===(a=le.basicInfo)||void 0===a?void 0:a.lastName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Rm.jsx)("input",{type:"email",name:"email",value:(null===(i=le.basicInfo)||void 0===i?void 0:i.email)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:(null===(o=le.basicInfo)||void 0===o?void 0:o.address)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:(null===(l=le.basicInfo)||void 0===l?void 0:l.city)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:(null===(c=le.basicInfo)||void 0===c?void 0:c.province)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:(null===(d=le.basicInfo)||void 0===d?void 0:d.postalCode)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Legal Name"}),(0,Rm.jsx)("input",{type:"text",name:"legalName",value:(null===(A=le.basicInfo)||void 0===A?void 0:A.legalName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nickname"}),(0,Rm.jsx)("input",{type:"text",name:"nickname",value:(null===(u=le.basicInfo)||void 0===u?void 0:u.nickname)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Spouse Name"}),(0,Rm.jsx)("input",{type:"text",name:"spouseName",value:(null===(h=le.basicInfo)||void 0===h?void 0:h.spouseName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),(0,Rm.jsxs)("select",{name:"gender",value:(null===(m=le.basicInfo)||void 0===m?void 0:m.gender)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,Rm.jsx)("option",{value:"",children:"Select Gender"}),(0,Rm.jsx)("option",{value:"Male",children:"Male"}),(0,Rm.jsx)("option",{value:"Female",children:"Female"}),(0,Rm.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,Rm.jsx)("input",{type:"text",name:"website",value:(null===(p=le.basicInfo)||void 0===p?void 0:p.website)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Home Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"homePhone",value:(null===(f=le.basicInfo)||void 0===f?void 0:f.homePhone)||"",onChange:e=>KS(e,e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce(e=>X(X({},e),{},{basicInfo:X(X({},e.basicInfo),t)}))}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cell Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"cellPhone",value:(null===(g=le.basicInfo)||void 0===g?void 0:g.cellPhone)||"",onChange:e=>KS(e,e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce(e=>X(X({},e),{},{basicInfo:X(X({},e.basicInfo),t)}))}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fax"}),(0,Rm.jsx)("input",{type:"tel",name:"fax",value:(null===(x=le.basicInfo)||void 0===x?void 0:x.fax)||"",onChange:e=>KS(e,e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce(e=>X(X({},e),{},{basicInfo:X(X({},e.basicInfo),t)}))}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Birth Date"}),(0,Rm.jsx)("input",{type:"date",name:"dateOfBirth",value:fe(null===(b=le.basicInfo)||void 0===b?void 0:b.dateOfBirth),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,Rm.jsx)("input",{type:"date",name:"startDate",value:fe(null===(y=le.basicInfo)||void 0===y?void 0:y.startDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Termination Date"}),(0,Rm.jsx)("input",{type:"date",name:"endDate",value:fe(null===(v=le.basicInfo)||void 0===v?void 0:v.endDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Anniversary"}),(0,Rm.jsx)("input",{type:"date",name:"contactAnniversary",value:fe(null===(w=le.basicInfo)||void 0===w?void 0:w.contactAnniversary),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Franchise Anniversary"}),(0,Rm.jsx)("input",{type:"date",name:"franchiseAnniversary",value:fe(null===(N=le.basicInfo)||void 0===N?void 0:N.franchiseAnniversary),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Pay Date"}),(0,Rm.jsx)("input",{type:"date",name:"lastPayDate",value:fe(null===(j=le.basicInfo)||void 0===j?void 0:j.lastPayDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bond Expiry Date"}),(0,Rm.jsx)("input",{type:"date",name:"bondExpiryDate",value:fe(null===(C=le.basicInfo)||void 0===C?void 0:C.bondExpiryDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Incorporated Date"}),(0,Rm.jsx)("input",{type:"date",name:"incorporatedDate",value:fe(null===(B=le.basicInfo)||void 0===B?void 0:B.incorporatedDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unincorporated Date"}),(0,Rm.jsx)("input",{type:"date",name:"unincorporatedDate",value:fe(null===(S=le.basicInfo)||void 0===S?void 0:S.unincorporatedDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"License Information"}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[null===(E=le.licenseInfo)||void 0===E?void 0:E.map((e,t)=>(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"License Type"}),(0,Rm.jsx)("input",{type:"text",name:"licenseType",value:e.licenseType||"",onChange:e=>me(t,"licenseType",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),(0,Rm.jsx)("input",{type:"text",name:"licenseNumber",value:e.licenseNumber||"",onChange:e=>me(t,"licenseNumber",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),(0,Rm.jsx)("input",{type:"date",name:"expiryDate",value:fe(e.expiryDate),onChange:e=>me(t,"expiryDate",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Date"}),(0,Rm.jsx)("input",{type:"date",name:"issueDate",value:fe(e.issueDate),onChange:e=>me(t,"issueDate",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Rm.jsxs)("select",{name:"status",value:e.status||"Active",onChange:e=>me(t,"status",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,Rm.jsx)("option",{value:"Active",children:"Active"}),(0,Rm.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Rm.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),(0,Rm.jsx)("div",{className:"col-span-3",children:(0,Rm.jsx)("button",{onClick:()=>(e=>{const t=[...le.licenseInfo];t.splice(e,1),ce(e=>X(X({},e),{},{licenseInfo:t}))})(t),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Remove License"})})]},t)),(0,Rm.jsx)("div",{className:"col-span-3",children:(0,Rm.jsx)("button",{onClick:()=>{ce(e=>X(X({},e),{},{licenseInfo:[...e.licenseInfo,{licenseType:"",licenseNumber:"",issueDate:"",expiryDate:"",status:"Active"}]}))},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Add License"})})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Payroll Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,Rm.jsx)("input",{type:"text",name:"position",value:(null===(k=le.payrollInfo)||void 0===k?void 0:k.position)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly Rate"}),(0,Rm.jsx)("input",{type:"number",name:"hourlyRate",value:(null===(F=le.payrollInfo)||void 0===F?void 0:F.hourlyRate)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hours Worked"}),(0,Rm.jsx)("input",{type:"number",name:"hoursWorked",value:(null===(I=le.payrollInfo)||void 0===I?void 0:I.hoursWorked)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Pay"}),(0,Rm.jsx)("input",{type:"number",name:"grossPay",value:(null===(T=le.payrollInfo)||void 0===T?void 0:T.grossPay)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Deductions"}),(0,Rm.jsx)("input",{type:"number",name:"deductions",value:(null===(D=le.payrollInfo)||void 0===D?void 0:D.deductions)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Pay"}),(0,Rm.jsx)("input",{type:"number",name:"netPay",value:(null===(L=le.payrollInfo)||void 0===L?void 0:L.netPay)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Fee Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Flat Fee"}),(0,Rm.jsx)("input",{type:"checkbox",name:"flatFee",checked:(null===(_=le.feeInfo)||void 0===_?void 0:_.flatFee)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Garnishment"}),(0,Rm.jsx)("input",{type:"checkbox",name:"garnishment",checked:(null===(P=le.feeInfo)||void 0===P?void 0:P.garnishment)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 250"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan250",checked:(null===(U=le.feeInfo)||void 0===U?void 0:U.plan250)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 500"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan500",checked:(null===(O=le.feeInfo)||void 0===O?void 0:O.plan500)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 9010"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan9010",checked:(null===(Q=le.feeInfo)||void 0===Q?void 0:Q.plan9010)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 955"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan955",checked:(null===(R=le.feeInfo)||void 0===R?void 0:R.plan955)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 8515"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan8515",checked:(null===(H=le.feeInfo)||void 0===H?void 0:H.plan8515)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 50/50"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan5050",checked:(null===(M=le.feeInfo)||void 0===M?void 0:M.plan5050)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 80/20"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan8020",checked:(null===(V=le.feeInfo)||void 0===V?void 0:V.plan8020)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 150"}),(0,Rm.jsx)("input",{type:"checkbox",name:"plan150",checked:(null===(z=le.feeInfo)||void 0===z?void 0:z.plan150)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer Rebate"}),(0,Rm.jsx)("input",{type:"checkbox",name:"buyerRebate",checked:(null===(K=le.feeInfo)||void 0===K?void 0:K.buyerRebate)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"No Fee"}),(0,Rm.jsx)("input",{type:"checkbox",name:"noFee",checked:(null===(q=le.feeInfo)||void 0===q?void 0:q.noFee)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Rm.jsx)("button",{onClick:async()=>{try{const{basicInfo:e,licenseInfo:t,payrollInfo:n,feeInfo:r}=le;let s="";if(r){const e=["flatFee","garnishment","plan250","plan500","plan9010","plan955","plan8515","plan5050","plan8020","plan150","buyerRebate","noFee"];for(const t of e)if(!0===r[t]){s=t;break}}const a=X(X({},e),{},{licenses:t,payroll:n,feeInfo:s});await nN.put("/agents/".concat(ne._id),a),Ae(),oe(!1),ae(!1),alert("Agent updated successfully!")}catch(e){console.error("Error updating agent:",e),alert("Failed to update agent")}},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Save Changes"}),(0,Rm.jsx)("button",{onClick:()=>oe(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"})]})]})})]})},EP=()=>{const[e,n]=(0,t.useState)("main"),r=eu();(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isFinanceAdmin")||r("/")},[r]);const s=[{id:"journal-entry",title:"JOURNAL ENTRY",icon:om},{id:"disbursements-journals",title:"DISBURSEMENTS JOURNALS",icon:bm},{id:"trust-journal",title:"TRUST JOURNAL",icon:om},{id:"trade-ar-journal",title:"TRADE A/R JOURNAL",icon:om},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:Bm},{id:"real-estate-trust-ledger",title:"REAL ESTATE TRUST LEDGER",icon:om},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:wm},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:om},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:ym},{id:"reconcile-real-estate-trust",title:"RECONCILING REAL ESTATE TRUST",icon:Am},{id:"reconcile-commission-trust",title:"RECONCILING COMMISSION TRUST",icon:Am},{id:"reconcile-general-account",title:"RECONCILING GENERAL ACCOUNT",icon:Am},{id:"accounts-receivable",title:"ACCOUNTS RECEIVABLE",icon:Um},{id:"agent-payment-info",title:"AGENT PAYMENT INFO",icon:_m},{id:"agent-payment-summary",title:"AGENT PAYMENT SUMMARY",icon:_m}],a=[{id:"chart-accounts",title:"Chart of Accounts Menu",icon:cm,description:"Manage and view your chart of accounts",color:"bg-blue-500"},{id:"trial-balance",title:"Trial Balance - Detail Balance",icon:am,description:"View detailed trial balance reports",color:"bg-green-500"},{id:"finance-statements",title:"Finance Statements",icon:Fm,description:"Generate income and balance statements",color:"bg-purple-500"},{id:"hst-report",title:"HST Report",icon:Fm,description:"Generate and view HST reports",color:"bg-orange-500"}],i=["chart-accounts","trial-balance","hst-report","trust-payments","commission-trust","commission-trust-ledger","general-account"].includes(e);return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen",children:[i&&(0,Rm.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Rm.jsxs)("button",{onClick:()=>n("main"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Finance"]})}),(0,Rm.jsx)("nav",{className:"p-4",children:(0,Rm.jsx)("ul",{className:"space-y-2",children:s.map(t=>(0,Rm.jsx)("li",{children:(0,Rm.jsx)("button",{onClick:()=>{var e;"chart-accounts"===(e=t.id)?r("/chart-of-accounts"):"trial-balance"===e?r("/trial-balance"):"finance-statements"===e?r("/finance-statements"):"hst-report"===e?r("/hst-report"):"journal-entry"===e?r("/journal-entry"):"disbursements-journals"===e?r("/disbursements-journals"):"trust-journal"===e?r("/trust-journal"):"trade-ar-journal"===e?r("/trade-ar-journal"):"trust-payments"===e?r("/real-estate-trust-payments"):"real-estate-trust-ledger"===e?r("/real-estate-trust-ledger"):"commission-trust"===e?r("/commission-trust-payments"):"commission-trust-ledger"===e?r("/commission-trust-ledger"):"general-account"===e?r("/general-account-payments"):"reconcile-real-estate-trust"===e?r("/reconcile-real-estate-trust"):"reconcile-commission-trust"===e?r("/reconcile-commission-trust"):"reconcile-general-account"===e?r("/reconcile-general-account"):"accounts-receivable"===e?r("/accounts-receivable"):"agent-payment-info"===e?r("/agent-payment-info"):"agent-payment-summary"===e?r("/agent-payment-summary"):n(e)},className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===t.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(t.icon,{className:"mr-3"}),(0,Rm.jsx)("span",{className:"text-sm font-medium",children:t.title})]})})},t.id))})})]}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(()=>{switch(e){case"chart-accounts":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Chart of Accounts Menu"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage your chart of accounts, add new accounts, and organize your financial structure."}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Asset Accounts"}),(0,Rm.jsxs)("ul",{className:"text-sm text-gray-600",children:[(0,Rm.jsx)("li",{children:"\u2022 Cash and Cash Equivalents"}),(0,Rm.jsx)("li",{children:"\u2022 Accounts Receivable"}),(0,Rm.jsx)("li",{children:"\u2022 Prepaid Expenses"}),(0,Rm.jsx)("li",{children:"\u2022 Fixed Assets"})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Liability Accounts"}),(0,Rm.jsxs)("ul",{className:"text-sm text-gray-600",children:[(0,Rm.jsx)("li",{children:"\u2022 Accounts Payable"}),(0,Rm.jsx)("li",{children:"\u2022 Accrued Expenses"}),(0,Rm.jsx)("li",{children:"\u2022 Bank Loans"}),(0,Rm.jsx)("li",{children:"\u2022 HST Payable"})]})]})]})]});case"trial-balance":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Trial Balance - Detail Balance"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed trial balance reports with account balances and adjustments."}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,Rm.jsxs)("tbody",{children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Cash"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Receivable"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Payable"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"($15,000)"})]})]})]})})]});case"hst-report":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"HST Report"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate and view HST (Harmonized Sales Tax) reports for tax filing."}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-3 text-blue-600",children:"HST Collected"}),(0,Rm.jsxs)("div",{className:"space-y-2",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Total Sales (HST Included):"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$100,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"HST Collected (13%):"}),(0,Rm.jsx)("span",{className:"font-semibold text-green-600",children:"$13,000"})]})]})]}),(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-3 text-red-600",children:"HST Paid"}),(0,Rm.jsxs)("div",{className:"space-y-2",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"Total Purchases (HST Included):"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$50,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{children:"HST Paid (13%):"}),(0,Rm.jsx)("span",{className:"font-semibold text-red-600",children:"$6,500"})]})]})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Net HST Owing"}),(0,Rm.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"$6,500 (HST Collected - HST Paid)"})]})]});case"trust-payments":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage real estate trust account payments and transactions."}),(0,Rm.jsx)("div",{className:"space-y-4",children:(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Trust Account Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Current Balance:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$150,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Pending Payments:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$25,000"})]})]})]})})]});case"commission-trust":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage commission trust account payments and distributions."}),(0,Rm.jsx)("div",{className:"space-y-4",children:(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Commission Trust Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commissions:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$75,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Paid to Agents:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$60,000"})]})]})]})})]});case"commission-trust-ledger":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Ledger"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed ledger entries for the commission trust account."}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,Rm.jsxs)("tbody",{children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-10-20"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Commission Payment to Agent A"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$10,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$10,000"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-10-25"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Commission Payment to Agent B"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]})]})]})})]});case"general-account":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage accounts payable and general expense payments."}),(0,Rm.jsx)("div",{className:"space-y-4",children:(0,Rm.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-2",children:"Accounts Payable Summary"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Outstanding:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:"$45,000"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Overdue Amount:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2 text-red-600",children:"$12,000"})]})]})]})})]});default:return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Finance Dashboard"}),(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map(e=>(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{var t;"chart-accounts"===(t=e.id)?r("/chart-of-accounts"):"trial-balance"===t?r("/trial-balance"):"finance-statements"===t?r("/finance-statements"):"hst-report"===t?r("/hst-report"):n(t)},children:[(0,Rm.jsx)(e.icon,{className:"text-4xl text-blue-900 mb-2"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:e.title})]},e.id))})]})}})()})]})]})},kP=()=>{const e=eu(),t=ZA(),n=[{id:"chart-accounts",title:"CHART OF ACCOUNTS MENU",icon:cm,path:"/chart-of-accounts"},{id:"trial-balance",title:"TRIAL BALANCE - DETAIL BALANCE",icon:am,path:"/trial-balance"},{id:"finance-statements",title:"FINANCE STATEMENTS",icon:hm,path:"/finance-statements"},{id:"hst-report",title:"HST REPORT",icon:Fm,path:"/hst-report"},{id:"journal-entry",title:"JOURNAL ENTRY",icon:om,path:"/journal-entry"},{id:"disbursements-journals",title:"DISBURSEMENTS JOURNALS",icon:bm,path:"/disbursements-journals"},{id:"trust-journal",title:"TRUST JOURNAL",icon:om,path:"/trust-journal"},{id:"trade-ar-journal",title:"TRADE A/R JOURNAL",icon:om,path:"/trade-ar-journal"},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:Bm,path:"/real-estate-trust-payments"},{id:"real-estate-trust-ledger",title:"REAL ESTATE TRUST LEDGER",icon:om,path:"/real-estate-trust-ledger"},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:wm,path:"/commission-trust-payments"},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:om,path:"/commission-trust-ledger"},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:ym,path:"/general-account-payments"},{id:"reconcile-real-estate-trust",title:"RECONCILING REAL ESTATE TRUST",icon:Am,path:"/reconcile-real-estate-trust"},{id:"reconcile-commission-trust",title:"RECONCILING COMMISSION TRUST",icon:Am,path:"/reconcile-commission-trust"},{id:"reconcile-general-account",title:"RECONCILING GENERAL ACCOUNT",icon:Am,path:"/reconcile-general-account"},{id:"accounts-receivable",title:"ACCOUNTS RECEIVABLE",icon:Um,path:"/accounts-receivable"},{id:"agent-payment-info",title:"AGENT PAYMENT INFO",icon:_m,path:"/agent-payment-info"},{id:"agent-payment-summary",title:"AGENT PAYMENT SUMMARY",icon:_m,path:"/agent-payment-summary"}];return(0,Rm.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen",children:[(0,Rm.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,Rm.jsxs)("button",{onClick:()=>e("/finance"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Finance"]})}),(0,Rm.jsx)("nav",{className:"p-4",children:(0,Rm.jsx)("ul",{className:"space-y-2",children:n.map(n=>{return(0,Rm.jsx)("li",{children:(0,Rm.jsx)("button",{onClick:()=>{return t=n.path,void e(t);var t},className:"w-full text-left p-3 rounded-lg transition-colors ".concat((r=n.path,t.pathname===r?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100")),children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)(n.icon,{className:"mr-3"}),(0,Rm.jsx)("span",{className:"text-sm font-medium",children:n.title})]})})},n.id);var r})})})]})};var FP=n(4926);const IP=e=>{let{data:t,onClose:n,hideTradeSellerBuyer:r}=e;const s="Homelife Top Star Realty Inc., Brokerage",a="9889 Markham Road, Suite 201",i="Markham, Ontario L6E OB7",o="905-209-1400";if(!t)return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-white flex justify-center items-center z-50 p-4",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg max-w-md w-full text-center",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-6",children:"No receipt data available."}),(0,Rm.jsx)("button",{onClick:n,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600",children:"Close"})]})});const{eftNumber:l,paidTo:c,trade:d,notes:A,amount:u,seller:h,buyer:m,firstPartyLabel:p="Seller",secondPartyLabel:f="Buyer",payTo:g,orderOf:x,note:b,chequeDate:y}=t,v=Number(u)||0,w=(e=>{const t=Math.floor(e),n=Math.round(100*(e-t));let r="";return t>0&&(r=(0,FP.toWords)(t).replace(/,/g,"").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")+" Dollars"),n>0&&(r&&(r+=" and "),r+="".concat(n,"/100")),r||(r="Zero Dollars"),r+" Only"})(v),N=(new Date).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"}),j=y?(()=>{let e;if(y.includes("/")){const[t,n,r]=y.split("/");e="".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00")}else e=y+"T00:00:00";return new Date(e).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"})})():N,C=()=>"string"===typeof c?c:c&&"object"===typeof c&&c.name||"N/A";return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-white flex justify-center items-center z-50 p-4",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-4xl w-full relative mx-auto",id:"receipt-content",children:[(0,Rm.jsxs)("div",{className:"border-2 border-gray-500 p-8 bg-white",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-start",children:[(0,Rm.jsx)("img",{src:Qm,alt:"Homelife Top Star Realty Inc. Logo",className:"h-20 mr-6"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h1",{className:"font-bold text-lg mb-1",children:s}),(0,Rm.jsx)("p",{className:"text-sm mb-1",children:a}),(0,Rm.jsx)("p",{className:"text-sm mb-1",children:i}),(0,Rm.jsxs)("p",{className:"text-sm",children:["Phone: ",o]})]})]}),(0,Rm.jsxs)("div",{className:"text-right",children:[(0,Rm.jsxs)("p",{className:"font-bold text-base mb-1",children:["EFT # ",l]}),(0,Rm.jsxs)("p",{className:"text-sm",children:["Date: ",j]})]})]}),(0,Rm.jsxs)("div",{className:"mb-4 flex items-start",children:[(0,Rm.jsx)("span",{className:"font-bold pr-2 w-24 flex-shrink-0",children:"Paid To:"}),(0,Rm.jsx)("div",{children:(0,Rm.jsx)("p",{className:"my-0 font-semibold",children:C()})})]}),!r&&(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("div",{className:"mb-1",children:[(0,Rm.jsx)("span",{className:"font-bold w-24 inline-block",children:"Trade:"})," ",d]}),(0,Rm.jsxs)("div",{className:"mb-1",children:[(0,Rm.jsxs)("span",{className:"font-bold w-24 inline-block",children:[p,":"]})," ",h]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsxs)("span",{className:"font-bold w-24 inline-block",children:[f,":"]})," ",m]})]}),(0,Rm.jsxs)("div",{className:"mb-1",children:[(0,Rm.jsx)("span",{className:"font-bold w-24 inline-block",children:"Notes:"})," ",A]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("span",{className:"font-bold w-24 inline-block",children:"Amount:"})," $",v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Rm.jsxs)("div",{className:"border-t border-b border-gray-400 py-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-bold inline-block w-20",children:"PAY"}),(0,Rm.jsx)("span",{children:w})]}),(0,Rm.jsxs)("div",{className:"text-right",children:[(0,Rm.jsxs)("p",{children:["Date: ",j]}),(0,Rm.jsx)("p",{className:"font-bold mt-1",children:"AMOUNT"}),(0,Rm.jsxs)("p",{className:"font-bold",children:["*$",v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"*"]})]})]}),(0,Rm.jsxs)("div",{className:"mt-4 flex",children:[(0,Rm.jsxs)("div",{className:"font-bold w-20 flex-shrink-0",children:[(0,Rm.jsx)("p",{className:"mb-1",children:"TO THE"}),(0,Rm.jsx)("p",{className:"mb-1",children:"ORDER"}),(0,Rm.jsx)("p",{className:"mb-1",children:"OF"}),(0,Rm.jsx)("p",{className:"mb-1",children:"NOTE"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("p",{className:"mb-1",children:g}),(0,Rm.jsx)("p",{className:"mb-1",children:null===x||void 0===x?void 0:x.address}),(0,Rm.jsx)("p",{className:"mb-1",children:null===x||void 0===x?void 0:x.cityProvincePostal}),(0,Rm.jsx)("p",{className:"mb-1",children:b})]})]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 mt-6 no-print",children:[(0,Rm.jsx)("button",{onClick:()=>{const e=window.open("","_blank");document.getElementById("receipt-content").innerHTML;e.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>EFT Receipt - ".concat(l,'</title>\n          <style>\n            @media print {\n              @page {\n                margin: 0.5in;\n                size: letter;\n              }\n              body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                font-size: 12px;\n                line-height: 1.2;\n                background: white;\n              }\n              .receipt-container {\n                width: 100%;\n                max-width: 100%;\n                margin: 0;\n                padding: 0;\n                page-break-after: avoid;\n                page-break-before: avoid;\n                page-break-inside: avoid;\n                background: white;\n              }\n              .receipt-border {\n                border: 2px solid #808080;\n                padding: 0.4in;\n                margin: 0;\n                box-sizing: border-box;\n                background: white;\n                border-radius: 0;\n              }\n              .header-section {\n                margin-bottom: 0.3in;\n              }\n              .logo {\n                height: 0.8in;\n                margin-right: 0.25in;\n                display: inline-block;\n              }\n              .company-info {\n                display: inline-block;\n                vertical-align: top;\n              }\n              .company-name {\n                font-size: 14px;\n                font-weight: bold;\n                margin-bottom: 0.05in;\n                color: black;\n              }\n              .company-address {\n                font-size: 10px;\n                margin-bottom: 0.02in;\n                color: black;\n              }\n              .eft-header {\n                text-align: right;\n                font-size: 12px;\n                color: black;\n              }\n              .eft-number {\n                font-weight: bold;\n                margin-bottom: 0.05in;\n                color: black;\n              }\n              .content-section {\n                margin-bottom: 0.2in;\n                font-size: 11px;\n                color: black;\n              }\n              .label {\n                font-weight: bold;\n                display: inline-block;\n                width: 0.8in;\n                margin-right: 0.1in;\n                color: black;\n              }\n              .main-section {\n                border-top: 1px solid #808080;\n                border-bottom: 1px solid #808080;\n                padding: 0.25in 0;\n                margin: 0.25in 0;\n              }\n              .amount-section {\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                margin-bottom: 0.2in;\n              }\n              .amount-words {\n                flex: 1;\n                color: black;\n              }\n              .amount-right {\n                text-align: right;\n                min-width: 1.5in;\n                color: black;\n              }\n              .order-section {\n                display: flex;\n                margin-top: 0.2in;\n              }\n              .order-labels {\n                font-weight: bold;\n                width: 0.8in;\n                margin-right: 0.1in;\n                color: black;\n              }\n              .order-content {\n                flex: 1;\n                color: black;\n              }\n              .no-print {\n                display: none;\n              }\n              .pay-label {\n                font-weight: bold;\n                display: inline-block;\n                width: 0.5in;\n                margin-right: 0.08in;\n              }\n              .amount-asterisk {\n                font-weight: bold;\n              }\n            }\n            @media screen {\n              .receipt-container {\n                width: 8.5in;\n                margin: 0 auto;\n                padding: 0.5in;\n              }\n              .receipt-border {\n                border: 2px solid #808080;\n                padding: 0.4in;\n                background: white;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="receipt-container">\n            <div class="receipt-border">\n              <div class="header-section">\n                <div style="display: flex; justify-content: space-between; align-items: flex-start;">\n                  <div style="display: flex; align-items: flex-start;">\n                    <img src="').concat(Qm,'" alt="Homelife Top Star Realty Inc. Logo" class="logo" />\n                    <div class="company-info">\n                      <div class="company-name">').concat(s,'</div>\n                      <div class="company-address">').concat(a,'</div>\n                      <div class="company-address">').concat(i,'</div>\n                      <div class="company-address">Phone: ').concat(o,'</div>\n                    </div>\n                  </div>\n                  <div class="eft-header">\n                    <div class="eft-number">EFT # ').concat(l,"</div>\n                    <div>Date: ").concat(j,'</div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="content-section">\n                <div style="margin-bottom: 0.08in;"><span class="label">Paid To:</span>').concat(C(),"</div>\n                ").concat(r?"":'\n                  <div style="margin-bottom: 0.04in;"><span class="label">Trade:</span>'.concat(d||"N/A",'</div>\n                  <div style="margin-bottom: 0.04in;"><span class="label">').concat(p,":</span>").concat(h||"N/A",'</div>\n                  <div style="margin-bottom: 0.1in;"><span class="label">').concat(f,":</span>").concat(m||"N/A","</div>\n                "),'\n                <div style="margin-bottom: 0.04in;"><span class="label">Notes:</span>').concat(A||"N/A",'</div>\n                <div style="margin-bottom: 0.1in;"><span class="label">Amount:</span>$').concat(v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),'</div>\n              </div>\n\n              <div class="main-section">\n                <div class="amount-section">\n                  <div class="amount-words">\n                    <span class="pay-label">PAY</span>').concat(w,'\n                  </div>\n                  <div class="amount-right">\n                    <div>Date: ').concat(j,'</div>\n                    <div style="font-weight: bold; margin-top: 0.03in;">AMOUNT</div>\n                    <div class="amount-asterisk">*$').concat(v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),'*</div>\n                  </div>\n                </div>\n                <div class="order-section">\n                  <div class="order-labels">\n                    <div style="margin-bottom: 0.04in;">TO THE</div>\n                    <div style="margin-bottom: 0.04in;">ORDER</div>\n                    <div style="margin-bottom: 0.04in;">OF</div>\n                    <div style="margin-bottom: 0.04in;">NOTE</div>\n                  </div>\n                  <div class="order-content">\n                    <div style="margin-bottom: 0.04in;">').concat(g||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat((null===x||void 0===x?void 0:x.address)||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat((null===x||void 0===x?void 0:x.cityProvincePostal)||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat(b||"N/A","</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </body>\n      </html>\n    ")),e.document.close(),e.focus(),e.onload=function(){e.print(),e.close()}},className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700",children:"Print"}),(0,Rm.jsx)("button",{onClick:n,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600",children:"Close"})]})]})})},TP=()=>{const[e,n]=(0,t.useState)("main"),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),[v,w]=(0,t.useState)(null),[N,j]=(0,t.useState)({commissionTransfer:!1,balanceOfDeposit:!1,refundOfDeposit:!1}),[C,B]=(0,t.useState)({chequeType:"Transfer to General/Commission Trust",tradeNumber:"",selectedTrade:null}),[S,E]=(0,t.useState)({chequeType:"Balance of Deposit",tradeNumber:"",selectedTrade:null}),[k,F]=(0,t.useState)({chequeType:"Refund of Deposit",tradeNumber:"",selectedTrade:null});(0,t.useEffect)(()=>{I()},[]);const I=async()=>{try{const e=await nN.get("/trades");s(e.data)}catch(e){console.error("Error fetching trades:",e)}},T=e=>{var n,r,s,a,i,o;let{trade:l,onBack:c}=e;const d=(null===(n=l.commission)||void 0===n||null===(r=n.commissionIncomeRows)||void 0===r?void 0:r.reduce((e,t)=>e+parseFloat(t.total||0),0))||0,A=(null===(s=l.trustRecords)||void 0===s?void 0:s.reduce((e,t)=>e+parseFloat(t.amount||0),0))||0,u=A<d?A:d,h="".concat((null===(a=l.keyInfo)||void 0===a?void 0:a.streetNumber)||""," ").concat((null===(i=l.keyInfo)||void 0===i?void 0:i.streetName)||"").concat(null!==(o=l.keyInfo)&&void 0!==o&&o.unit?" ".concat(l.keyInfo.unit):""),m=new Date,p=e=>e.toString().padStart(2,"0"),f="".concat(p(m.getMonth()+1),"/").concat(p(m.getDate()),"/").concat(m.getFullYear()),[g,b]=(0,t.useState)({chequeDate:f}),[v,B]=(0,t.useState)(!1),S=[{acct:"10004",name:"CASH - COMMISSION TRUST ACCOUNT",debit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),credit:""},{acct:"10002",name:"CASH - TRUST",debit:"",credit:u.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}];return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Trust Cheques 1-Transfer to General/Commission Trust"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDateCommission",checked:v,onChange:e=>B(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDateCommission",className:"text-sm text-gray-600",children:"Override Date"})]}),v?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:g.chequeDate.includes("/")?(()=>{const[e,t,n]=g.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():g.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());b(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:g.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",value:"Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsx)("div",{className:"bg-gray-200 p-4 rounded-md mb-4",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Trade #:"})," ",l.tradeNumber]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Today's Date:"})," ",f]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Address:"})," ",h]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Trust Amount:"})," ",A.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Total Commission:"})," ",d.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Cheque Amount:"})," ",u.toLocaleString("en-US",{style:"currency",currency:"USD"})]})]})}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount of Cheque"}),(0,Rm.jsx)("input",{type:"text",value:u.toFixed(2),readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Written To"}),(0,Rm.jsx)("input",{type:"text",value:"Homelife Top Star Realty Inc., Brokerage",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",value:"9889 Markham Road, Suite 201",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Rm.jsx)("input",{type:"text",value:"Markham",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,Rm.jsx)("input",{type:"text",value:"Ontario",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",value:"L6E OB7",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",value:"Transfer funds to Commission Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsx)("div",{className:"text-center font-bold text-red-600 my-4",children:"FUNDS MUST BE DEPOSITED IN THE COMMISSION TRUST ACCOUNT"}),(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border mb-4",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Acct #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"General Ledger Account Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Debit (+)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit (-)"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.acct}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.name}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 border-r",children:e.debit}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:e.credit})]},t))})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{var t,n,r;if(!C.selectedTrade)return void alert("No trade selected.");const s=C.selectedTrade,a=(null===(t=s.commission)||void 0===t||null===(n=t.commissionIncomeRows)||void 0===n?void 0:n.reduce((e,t)=>e+parseFloat(t.total||0),0))||0,i=(null===(r=s.trustRecords)||void 0===r?void 0:r.reduce((e,t)=>e+parseFloat(t.amount||0),0))||0,o=i<a?i:a;try{const t=await nN.post("/real-estate-trust-eft/commission-transfer",{tradeId:s._id,amount:o,recipient:"Homelife Top Star Realty Inc., Brokerage",chequeDate:e.chequeDate});if(t.data.eftNumber){var l,c,d;qh.success("Transaction posted to Chart of Accounts and Ledger successfully!");const n=nE(s),r=n.firstParty,a=n.secondParty,i="".concat((null===(l=s.keyInfo)||void 0===l?void 0:l.streetNumber)||""," ").concat((null===(c=s.keyInfo)||void 0===c?void 0:c.streetName)||"").concat(null!==(d=s.keyInfo)&&void 0!==d&&d.unit?" ".concat(s.keyInfo.unit):"").trim(),A={eftNumber:t.data.eftNumber,paidTo:{name:"Homelife Top Star Realty Inc., Brokerage",address:"9889 Markham Road, Suite 201"},trade:i,notes:"TRANSFER FUNDS TO COMMISSION TRUST (From: Trust)",amount:o,seller:r,buyer:a,firstPartyLabel:n.firstPartyLabel,secondPartyLabel:n.secondPartyLabel,payTo:"Homelife Top Star Realty Inc., Brokerage",orderOf:{address:"9889 Markham Road, Suite 201",cityProvincePostal:"Markham, Ontario L6E OB7"},note:"".concat(s.tradeNumber," ").concat(i),chequeDate:e.chequeDate};w(A),y(t.data.eftNumber),x(!0),j(e=>X(X({},e),{},{commissionTransfer:!0}))}else alert("Failed to get EFT number.")}catch(A){console.error("Error creating EFT record:",A),alert("Error creating EFT record. Please check the console for details.")}})(g),disabled:N.commissionTransfer,className:"py-2 px-6 rounded-md transition-colors ".concat(N.commissionTransfer?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:N.commissionTransfer?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:c,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},D=e=>{var n,r,s,a,i,o,l,c,d,A,u;let{trade:h,onBack:m}=e;const p=(null===(n=h.trustRecords)||void 0===n?void 0:n.reduce((e,t)=>e+parseFloat(t.amount||0),0))||0,f=(null===(r=h.commission)||void 0===r||null===(s=r.commissionIncomeRows)||void 0===s?void 0:s.reduce((e,t)=>e+parseFloat(t.total||0),0))||0,g=p-f,b=nE(h).firstParty,v=b||"N/A",C="".concat((null===(a=h.keyInfo)||void 0===a?void 0:a.streetNumber)||""," ").concat((null===(i=h.keyInfo)||void 0===i?void 0:i.streetName)||"").concat(null!==(o=h.keyInfo)&&void 0!==o&&o.unit?" ".concat(h.keyInfo.unit):""),B=new Date,E=e=>e.toString().padStart(2,"0"),k="".concat(E(B.getMonth()+1),"/").concat(E(B.getDate()),"/").concat(B.getFullYear()),[F,I]=(0,t.useState)({chequeNumber:"",chequeDate:k,address:null!==(l=h.keyInfo)&&void 0!==l&&l.streetName?"".concat(h.keyInfo.streetNumber," ").concat(h.keyInfo.streetName).concat(null!==(c=h.keyInfo)&&void 0!==c&&c.unit?" ".concat(h.keyInfo.unit):""):"",city:(null===(d=h.keyInfo)||void 0===d?void 0:d.city)||"",province:(null===(A=h.keyInfo)||void 0===A?void 0:A.province)||"",postalCode:(null===(u=h.keyInfo)||void 0===u?void 0:u.postalCode)||"",country:"Canada",noteOnStub:"Refund of Balance of Deposit"}),[T,D]=(0,t.useState)(!1),L=e=>{const{name:t,value:n}=e.target;I(e=>X(X({},e),{},{[t]:n}))},_=[{acct:"21300",name:"LIABILITY FOR TRUST FUNDS HELD",debit:g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),credit:""},{acct:"10002",name:"CASH - TRUST",debit:"",credit:g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}];return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Trust Cheques 2-Balance of Deposit"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDate",checked:T,onChange:e=>D(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDate",className:"text-sm text-gray-600",children:"Override Date"})]}),T?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:F.chequeDate.includes("/")?(()=>{const[e,t,n]=F.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():F.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());I(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:k,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",value:"Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque #"}),(0,Rm.jsx)("input",{type:"text",name:"chequeNumber",value:F.chequeNumber,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"bg-gray-200 p-4 rounded-md mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Trade #:"})," ",h.tradeNumber," ",(0,Rm.jsx)("span",{className:"font-semibold ml-4",children:"Status:"})," Closed",(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Address:"})," ",C]})]}),(0,Rm.jsxs)("div",{className:"text-right",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Today's Date:"})," ",k]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Balance:"})," ",g.toLocaleString("en-US",{style:"currency",currency:"USD"})]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount of Cheque"}),(0,Rm.jsx)("input",{type:"text",value:g.toFixed(2),readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Written To"}),(0,Rm.jsx)("input",{type:"text",value:v,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:F.address,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:F.city,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:F.province,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:F.postalCode,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",name:"noteOnStub",value:F.noteOnStub,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border mb-4",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Acct #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"General Ledger Account Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Debit (+)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit (-)"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.acct}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.name}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 border-r",children:e.debit}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:e.credit})]},t))})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{var t,n,r;if(!S.selectedTrade)return void alert("No trade selected.");const s=S.selectedTrade,a=(null===(t=s.trustRecords)||void 0===t?void 0:t.reduce((e,t)=>e+parseFloat(t.amount||0),0))||0,i=(null===(n=s.commission)||void 0===n||null===(r=n.commissionIncomeRows)||void 0===r?void 0:r.reduce((e,t)=>e+parseFloat(t.total||0),0))||0,o=a-i,l=nE(s),c=l.firstParty;try{const t=await nN.post("/real-estate-trust-eft/balance-deposit",{tradeId:s._id,amount:o,recipient:c,description:e.noteOnStub,chequeDate:e.chequeDate});if(t.data.eftNumber){var d,A,u;const n="Trade #: ".concat(s.tradeNumber,", Paid to: ").concat(c),[r,a,i]=e.chequeDate.split("/"),h=new Date("".concat(i,"-").concat(r.padStart(2,"0"),"-").concat(a.padStart(2,"0"),"T00:00:00"));await nN.post("/transactions",{date:h,reference:"EFT#".concat(t.data.eftNumber),description:n,debitAccount:"LIABILITY FOR TRUST FUNDS HELD",creditAccount:"CASH - TRUST",amount:o,tradeId:s._id}),await nN.post("/finance-transactions",{type:"BalanceOfDeposit",chequeDate:h,amount:o,chequeWrittenTo:c,tradeId:s._id}),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!"),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"));const m=l.secondParty,p="".concat((null===(d=s.keyInfo)||void 0===d?void 0:d.streetNumber)||""," ").concat((null===(A=s.keyInfo)||void 0===A?void 0:A.streetName)||"").concat(null!==(u=s.keyInfo)&&void 0!==u&&u.unit?" ".concat(s.keyInfo.unit):"").trim(),f={eftNumber:t.data.eftNumber,paidTo:{name:c,address:e.address},trade:p,notes:e.noteOnStub,amount:o,seller:c,buyer:m,firstPartyLabel:l.firstPartyLabel,secondPartyLabel:l.secondPartyLabel,payTo:c,orderOf:{address:e.address,cityProvincePostal:"".concat(e.city,", ").concat(e.province,", ").concat(e.postalCode)},note:"".concat(s.tradeNumber," ").concat(p),chequeDate:e.chequeDate};w(f),y(t.data.eftNumber),x(!0),j(e=>X(X({},e),{},{balanceOfDeposit:!0}))}else alert("Failed to get EFT number.")}catch(h){console.error("Error creating EFT record:",h),alert("Error creating EFT record. Please check the console for details.")}})(X(X({},F),{},{chequeWrittenTo:b})),disabled:N.balanceOfDeposit,className:"py-2 px-6 rounded-md transition-colors ".concat(N.balanceOfDeposit?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:N.balanceOfDeposit?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:m,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},L=e=>{var n,r,s,a,i,o;let{trade:l,onBack:c}=e;const d=nE(l),A=d.secondParty,u=d.firstParty,h="".concat((null===(n=l.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=l.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=l.keyInfo)&&void 0!==s&&s.unit?" ".concat(l.keyInfo.unit):"").trim(),m=new Date,p=e=>e.toString().padStart(2,"0"),f="".concat(p(m.getMonth()+1),"/").concat(p(m.getDate()),"/").concat(m.getFullYear()),[g,b]=(0,t.useState)({chequeDate:f,paidTo:u&&"N/A"!==u?u:"",address:h,city:(null===(a=l.keyInfo)||void 0===a?void 0:a.city)||"",province:(null===(i=l.keyInfo)||void 0===i?void 0:i.province)||"",postalCode:(null===(o=l.keyInfo)||void 0===o?void 0:o.postalCode)||"",noteOnStub:"Transfer Refund",netCheque:"5000",buyer:A||"",seller:u||""}),[v,C]=(0,t.useState)(!1),B=e=>{const{name:t,value:n}=e.target;b(e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Refund of Deposit Cheques"}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h4",{className:"font-semibold mb-4 text-md",children:"Refund of Deposit Cheques Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:l.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",value:"Real Estate Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,Rm.jsx)("input",{type:"text",value:"5000",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:g.city,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:g.province,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",name:"noteOnStub",value:g.noteOnStub,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer"}),(0,Rm.jsx)("input",{type:"text",name:"buyer",value:g.buyer,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDateRefund",checked:v,onChange:e=>C(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDateRefund",className:"text-sm text-gray-600",children:"Override Date"})]}),v?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:g.chequeDate.includes("/")?(()=>{const[e,t,n]=g.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():g.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());b(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:g.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Paid To ",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"text",name:"paidTo",value:g.paidTo,onChange:B,placeholder:"Enter recipient name",required:!0,className:"mt-1 block w-full rounded-md shadow-sm ".concat(g.paidTo&&""!==g.paidTo.trim()?"border-gray-300 focus:border-blue-500 focus:ring-blue-500":"border-red-300 focus:border-red-500 focus:ring-red-500")}),(!g.paidTo||""===g.paidTo.trim())&&(0,Rm.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Recipient name is required"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:g.address,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:g.postalCode,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Net Cheque ",(0,Rm.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Rm.jsx)("input",{type:"number",name:"netCheque",value:g.netCheque,onChange:B,placeholder:"Enter amount",min:"0.01",step:"0.01",required:!0,className:"mt-1 block w-full rounded-md shadow-sm ".concat(!g.netCheque||isNaN(parseFloat(g.netCheque))||parseFloat(g.netCheque)<=0?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),(!g.netCheque||isNaN(parseFloat(g.netCheque))||parseFloat(g.netCheque)<=0)&&(0,Rm.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Please enter a valid amount greater than 0"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Seller"}),(0,Rm.jsx)("input",{type:"text",name:"seller",value:g.seller,onChange:B,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{if(!k.selectedTrade)return void alert("No trade selected.");const t=k.selectedTrade,n=nE(t),r=n.firstParty,s=n.secondParty,a=e.paidTo||r;if(!a||"N/A"===a||""===a.trim())return void alert("Please enter a valid recipient name. The trade does not have seller information or the recipient field is empty.");const i=parseFloat(e.netCheque)||5e3;if(isNaN(i)||i<=0)alert("Please enter a valid amount greater than 0.");else{console.log("Sending refund deposit request:",{tradeId:t._id,amount:i,recipient:a,description:e.noteOnStub||"Transfer Refund",chequeDate:e.chequeDate});try{const d=await nN.post("/real-estate-trust-eft/refund-deposit",{tradeId:t._id,amount:i,recipient:a,description:e.noteOnStub||"Transfer Refund",chequeDate:e.chequeDate});if(d.data.eftNumber){var o,l,c;const a="Trade #: ".concat(t.tradeNumber,", Paid to: ").concat(e.paidTo||r),[i,A,u]=e.chequeDate.split("/"),h=new Date("".concat(u,"-").concat(i.padStart(2,"0"),"-").concat(A.padStart(2,"0"),"T00:00:00"));await nN.post("/transactions",{date:h,reference:"EFT#".concat(d.data.eftNumber),description:a,debitAccount:"LIABILITY FOR TRUST FUNDS HELD",creditAccount:"CASH - TRUST",amount:parseFloat(e.netCheque)||5e3,tradeId:t._id}),await nN.post("/finance-transactions",{type:"RefundOfDeposit",chequeDate:h,amount:parseFloat(e.netCheque)||5e3,chequeWrittenTo:e.paidTo||r,tradeId:t._id}),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!"),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"));const m="".concat((null===(o=t.keyInfo)||void 0===o?void 0:o.streetNumber)||""," ").concat((null===(l=t.keyInfo)||void 0===l?void 0:l.streetName)||"").concat(null!==(c=t.keyInfo)&&void 0!==c&&c.unit?" ".concat(t.keyInfo.unit):"").trim(),p={eftNumber:d.data.eftNumber,paidTo:{name:e.paidTo||r,address:e.address},trade:m,notes:e.noteOnStub||"Transfer Refund",amount:parseFloat(e.netCheque)||5e3,seller:e.seller||r,buyer:e.buyer||s,firstPartyLabel:n.firstPartyLabel,secondPartyLabel:n.secondPartyLabel,payTo:e.paidTo||r,orderOf:{address:e.address,cityProvincePostal:"".concat(e.city,", ").concat(e.province,", ").concat(e.postalCode)},note:"".concat(t.tradeNumber," ").concat(m),chequeDate:e.chequeDate};w(p),y(d.data.eftNumber),x(!0),j(e=>X(X({},e),{},{refundOfDeposit:!0}))}else alert("Failed to get EFT number.")}catch(d){console.error("Error creating EFT record:",d),alert("Error creating EFT record. Please check the console for details.")}}})(g),disabled:N.refundOfDeposit,className:"py-2 px-6 rounded-md transition-colors ".concat(N.refundOfDeposit?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:N.refundOfDeposit?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:c,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-transfer"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-transfer"),children:"Commission transfer"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("balance-deposit"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("balance-deposit"),children:"Balance of Deposit"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("refund-deposit"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("refund-deposit"),children:"Refund of Deposit"})]})}),"commission-transfer"===e&&(0,Rm.jsx)("div",{className:"space-y-4",children:A?(0,Rm.jsx)(T,{trade:C.selectedTrade,onBack:()=>u(!1)}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Commission Transfer Form"}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C.selectedTrade?(console.log("Commission Transfer Form Data:",C),u(!0)):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,Rm.jsx)("input",{type:"text",value:C.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:C.tradeNumber,onChange:e=>(e=>{if(B(t=>X(X({},t),{},{tradeNumber:e})),""===e.trim())return i([]),void l(!1);const t=r.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});i(t),l(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),o&&a.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:a.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await JS(e._id,"CommissionTransfer");if(t.exists)return qh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(eE(t.date)," for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{commissionTransfer:!0}));B(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:e})),l(!1)}catch(a){console.error("Error checking existing EFT:",a),qh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"balance-deposit"===e&&(0,Rm.jsx)("div",{className:"space-y-4",children:h?(0,Rm.jsx)(D,{trade:S.selectedTrade,onBack:()=>m(!1)}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Balance of Deposit Form"}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S.selectedTrade?m(!0):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,Rm.jsx)("input",{type:"text",value:S.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:S.tradeNumber,onChange:e=>(e=>{if(E(t=>X(X({},t),{},{tradeNumber:e})),""===e.trim())return i([]),void d(!1);const t=r.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});i(t),d(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),c&&a.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:a.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await JS(e._id,"BalanceOfDeposit");if(t.exists)return qh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(eE(t.date)," for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{balanceOfDeposit:!0}));E(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:e})),d(!1)}catch(a){console.error("Error checking existing EFT:",a),qh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"refund-deposit"===e&&(0,Rm.jsx)("div",{className:"space-y-4",children:p?(0,Rm.jsx)(L,{trade:k.selectedTrade,onBack:()=>f(!1)}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Refund of Deposit Cheques"}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:k.tradeNumber,onChange:e=>(e=>{if(F(t=>X(X({},t),{},{tradeNumber:e})),""===e.trim())return i([]),void l(!1);const t=r.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});i(t),l(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),o&&a.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:a.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await JS(e._id,"RefundOfDeposit");if(t.exists)return qh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(eE(t.date)," for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{refundOfDeposit:!0}));F(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:e})),l(!1),f(!0)}catch(a){console.error("Error checking existing EFT:",a),qh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{onClick:()=>{k.selectedTrade?f(!0):alert("Please select a trade first.")},className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"main"===e&&(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,Rm.jsx)("p",{children:"Select a tab above to view specific information."})}),g&&v&&(0,Rm.jsx)(IP,{data:v,onClose:()=>x(!1)})]})})]})]})},DP=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)({fromDate:"",toDate:""}),o=(e,t)=>{i(n=>X(X({},n),{},{[e]:t}))};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 print:hidden",children:"Real Estate Trust Ledger"}),e.length>0&&(0,Rm.jsxs)("button",{onClick:()=>{0!==e.length?window.print():bp.error("No data to print. Please search for ledger entries first.")},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,Rm.jsx)(km,{}),"Print Report"]})]}),(0,Rm.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:hidden",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Select Date Range"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:a.fromDate,onChange:e=>o("fromDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:a.toDate,onChange:e=>o("toDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsx)("div",{className:"flex items-end",children:(0,Rm.jsx)("button",{onClick:()=>{a.fromDate&&a.toDate?new Date(a.fromDate)>new Date(a.toDate)?bp.error("From date cannot be after to date"):(async()=>{try{s(!0);const e=await nN.get("/ledger/account/10002",{params:{fromDate:a.fromDate,toDate:a.toDate}});n(e.data)}catch(e){console.error("Error fetching ledger entries:",e),bp.error("Failed to fetch ledger entries")}finally{s(!1)}})():bp.error("Please select both from and to dates")},disabled:r,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Loading...":"Search"})})]})]}),(0,Rm.jsxs)("div",{className:"hidden print:block print:mb-6",children:[(0,Rm.jsx)("div",{className:"mb-4",children:(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Real Estate Trust Ledger"})}),(0,Rm.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Homelife Top Star Realty Inc. Logo",className:"w-12 h-12 mr-3"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Real Estate Trust Ledger Report"})]})]}),(0,Rm.jsxs)("div",{className:"text-right",children:[(0,Rm.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Report Date: ",(new Date).toLocaleDateString()]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",a.fromDate," to ",a.toDate]})]})]})]}),e.length>0&&(0,Rm.jsxs)("div",{className:"hidden print:block",children:[(0,Rm.jsxs)("table",{className:"w-full border-collapse border border-gray-400 text-xs",children:[(0,Rm.jsxs)("colgroup",{children:[(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"7%"}}),(0,Rm.jsx)("col",{style:{width:"45%"}}),(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"10%"}}),(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"14%"}})]}),(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Reference"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Type"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Amount"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Trade Number"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Payee"})]})}),(0,Rm.jsx)("tbody",{children:e.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:e.reference||"N/A"}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-center",children:e.type}),(0,Rm.jsxs)("td",{className:"border border-gray-400 px-2 py-1 text-right",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-center",children:e.tradeNumber||"N/A"}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received from:\s*([^-]+)/);if(t)return t[1].trim()}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/);if(t)return t[1].trim()}return"N/A"})()})]},t))})]}),(0,Rm.jsx)("div",{className:"mt-4 text-sm",children:(0,Rm.jsxs)("div",{className:"flex justify-start space-x-8",children:[(0,Rm.jsxs)("span",{className:"font-semibold",children:["Total Debits: $",e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]}),(0,Rm.jsxs)("span",{className:"font-semibold",children:["Total Credits: $",e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]})})]}),e.length>0&&(0,Rm.jsxs)("div",{className:"space-y-4 print:hidden",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Ledger Entries"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table table-fixed",children:[(0,Rm.jsxs)("colgroup",{children:[(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"7%"}})," ",(0,Rm.jsx)("col",{style:{width:"45%"}})," ",(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"10%"}})," ",(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"14%"}})," "]}),(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Date"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Description"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Type"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Trade Number"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b",children:"Payee"})]})}),(0,Rm.jsx)("tbody",{children:e.map((e,t)=>(0,Rm.jsxs)("tr",{className:"border-b hover:bg-gray-50 align-top",children:[(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:e.reference||"N/A"}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r whitespace-pre-line break-words",children:e.description}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-center border-r",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-gray-100 text-black type-badge",children:e.type})}),(0,Rm.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-center border-r tabular-nums",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-center border-r",children:e.tradeNumber||"N/A"}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left break-words",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received from:\s*([^-]+)/);if(t)return t[1].trim()}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/);if(t)return t[1].trim()}return"N/A"})()})]},t))})]})}),(0,Rm.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Total Debits: "}),(0,Rm.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Total Credits: "}),(0,Rm.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]})]})})]}),0===e.length&&!r&&(0,Rm.jsx)("div",{className:"text-center py-8",children:(0,Rm.jsx)("p",{className:"text-gray-500 text-lg",children:"No ledger entries found. Please select a date range and search."})}),(0,Rm.jsx)("div",{className:"hidden print:block print:mt-8 print:pt-4 print:border-t print:border-gray-300",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[(0,Rm.jsx)("div",{children:(0,Rm.jsx)("p",{children:"https://homelifetopstar.brokeragelead.ca/real-estate-trust-ledger"})}),(0,Rm.jsx)("div",{children:(0,Rm.jsx)("p",{children:"1/1"})})]})})]})})]})]})},LP=()=>{var e,n,r,s;eu();const[a,i]=(0,t.useState)("outside-brokers"),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[g,x]=(0,t.useState)(null),[b,y]=(0,t.useState)(null),[v,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)({agentCommission:!1,outsideBrokersCommission:!1,ourBrokerageCommission:!1}),[C,B]=(0,t.useState)({name:"Agent Commission transfer form",chequeType:"lorem ipsum",tradeNumber:"",selectedTrade:null,selectedAgentId:""}),[S,E]=(0,t.useState)({name:"Outside Brokers Commission Transfer Form",type:"EFT",tradeNumber:"",selectedTrade:null,selectedOutsideBroker:null}),[k,F]=(0,t.useState)(!1),[I,T]=(0,t.useState)({chequeDate:(new Date).toISOString().split("T")[0],bankAccount:"Commission Trust",outsideBrokerName:"",outsideBrokerCompany:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to outside broker"}),[D,L]=(0,t.useState)(!1),[_,P]=(0,t.useState)(null),[U,O]=(0,t.useState)({tradeNumber:"",selectedTrade:null}),[Q,R]=(0,t.useState)(!1);(0,t.useEffect)(()=>{H()},[]);const H=async()=>{try{const e=await nN.get("/trades");l(e.data)}catch(e){console.error("Error fetching trades:",e)}},M=()=>{const e=new Date,t=e=>e.toString().padStart(2,"0");return"".concat(t(e.getMonth()+1),"/").concat(t(e.getDate()),"/").concat(e.getFullYear())},V=e=>{let{trade:n,selectedAgentId:r,onBack:s}=e;const[a,i]=(0,t.useState)({chequeDate:M(),bankAccount:"Commission Trust",agentNumber:"",agentName:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to agent"}),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(n&&r){var e,t,s,a;const o=(null===(e=n.agentCommissionList)||void 0===e?void 0:e.find(e=>e.agentId===r))||{},l=parseFloat(o.netCommission||0),c="".concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(s=n.keyInfo)||void 0===s?void 0:s.streetName)||"").concat(null!==(a=n.keyInfo)&&void 0!==a&&a.unit?" ".concat(n.keyInfo.unit):"").trim();i({chequeDate:M(),bankAccount:"Commission Trust",agentNumber:o.agentId||"",agentName:o.agentName||"",tradeNumber:n.tradeNumber,address:c,netCommission:l.toFixed(2),netCheque:l.toFixed(2),noteOnStub:"Transfer commission to agent"})}},[n,r]);return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Agent Commission Cheque Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDate",checked:o,onChange:e=>l(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDate",className:"text-sm text-gray-600",children:"Override Date"})]}),o?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:a.chequeDate.includes("/")?(()=>{const[e,t,n]=a.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():a.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());i(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:a.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",name:"bankAccount",value:a.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Number"}),(0,Rm.jsx)("input",{type:"text",name:"agentNumber",value:a.agentNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,Rm.jsx)("input",{type:"text",name:"agentName",value:a.agentName,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade #"}),(0,Rm.jsx)("input",{type:"text",name:"tradeNumber",value:a.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:a.address,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Commission"}),(0,Rm.jsx)("input",{type:"text",name:"netCommission",value:a.netCommission,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Cheque"}),(0,Rm.jsx)("input",{type:"text",name:"netCheque",value:a.netCheque,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",name:"noteOnStub",value:a.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,Rm.jsx)("button",{onClick:()=>(async e=>{var t;if(!C.selectedTrade||!C.selectedAgentId)return void alert("No trade or agent selected.");const n=C.selectedTrade,r=null===(t=n.agentCommissionList)||void 0===t?void 0:t.find(e=>e.agentId===C.selectedAgentId);if(r)try{var s,a,i;console.log("Selected agent:",r),console.log("Agent ID:",r.agentId),console.log("Fetching company profile...");let t=null;try{t=(await nN.get("/company-profile")).data,console.log("Company info:",t)}catch(A){var o;if(404!==(null===(o=A.response)||void 0===o?void 0:o.status))throw A;console.log("Company profile not found, using default values"),t={companyName:"Homelife Top Star Realty Inc., Brokerage",address:"9889 Markham Road, Suite 201",city:"Markham",province:"Ontario",postalCode:"L6E OB7",phone:"905-209-1400",fax:"Fax",email:"email@company.com"}}console.log("Fetching agent details for employee number:",r.agentId);const l=(await nN.get("/agents/employee/".concat(r.agentId))).data;console.log("Agent details:",l);const c=parseFloat(r.netCommission||0);console.log("Creating EFT for amount:",c);const d=(await nN.post("/commission-trust-eft/agent-commission",{tradeId:n._id,amount:c,recipient:r.agentName,agentId:r.agentId,agentName:r.agentName,chequeDate:e.chequeDate})).data.eftNumber;console.log("EFT created with number:",d),console.log("Posting transaction..."),await nN.post("/transactions",{date:(()=>{const[t,n,r]=e.chequeDate.split("/");return new Date("".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00"))})(),reference:"EFT#".concat(d),description:"Agent Commission Payment",debitAccount:"A/P - GENERAL & COMMISSION EXPENSE",creditAccount:"CASH - COMMISSION TRUST ACCOUNT",amount:c,tradeId:n._id}),await nN.post("/finance-transactions",{type:"AgentCommissionPayment",chequeDate:(()=>{const[t,n,r]=e.chequeDate.split("/");return new Date("".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00"))})(),amount:c,chequeWrittenTo:r.agentName,tradeId:n._id});const u=nE(n),h=u.firstParty,m=u.secondParty,p="".concat((null===(s=n.keyInfo)||void 0===s?void 0:s.streetNumber)||""," ").concat((null===(a=n.keyInfo)||void 0===a?void 0:a.streetName)||"").concat(null!==(i=n.keyInfo)&&void 0!==i&&i.unit?" ".concat(n.keyInfo.unit):"").trim(),g="".concat(l.streetNumber||""," ").concat(l.streetName||"").trim(),x=l.unit?" Unit ".concat(l.unit):"",b="".concat(l.city||"",", ").concat(l.province||"",", ").concat(l.postalCode||"").trim(),v={companyInfo:t,eftNumber:d,paidTo:{name:r.agentName,address:g},trade:p,notes:"Transfer commission to agent",amount:c,seller:h,buyer:m,firstPartyLabel:u.firstPartyLabel,secondPartyLabel:u.secondPartyLabel,payTo:r.agentName,orderOf:{address:"".concat(g).concat(x),cityProvincePostal:b},note:"".concat(n.tradeNumber," ").concat(p),chequeDate:e.chequeDate};y(v),w(!1),f(!0),j(e=>X(X({},e),{},{agentCommission:!0})),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(u){var l,c,d;console.error("Error during EFT process:",u),console.error("Error response:",null===(l=u.response)||void 0===l?void 0:l.data),console.error("Error status:",null===(c=u.response)||void 0===c?void 0:c.status),404===(null===(d=u.response)||void 0===d?void 0:d.status)?qh.error("Required data not found. Please ensure all required information is set up."):qh.error("Failed to complete EFT process. Please try again.")}else alert("Selected agent not found.")})(a),disabled:N.agentCommission,className:"py-2 px-6 rounded-md transition-colors ".concat(N.agentCommission?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:N.agentCommission?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:s,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},z=e=>{let{trade:n,selectedOutsideBroker:r,onBack:s,eftCreated:a}=e;const[i,o]=(0,t.useState)({chequeDate:M(),bankAccount:"Commission Trust",outsideBrokerName:"",outsideBrokerCompany:"",outsideBrokerAddress:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to outside broker",seller:"",buyer:""}),[l,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(n&&r){var e,t,s,a,i;const l=(null===(e=n.commission)||void 0===e||null===(t=e.outsideBrokersRows)||void 0===t?void 0:t.find(e=>e.agentName===r.agentName||"".concat(r.firstName," ").concat(r.lastName)===e.agentName))||{},c=parseFloat(l.total||0),d="".concat((null===(s=n.keyInfo)||void 0===s?void 0:s.streetNumber)||""," ").concat((null===(a=n.keyInfo)||void 0===a?void 0:a.streetName)||"").concat(null!==(i=n.keyInfo)&&void 0!==i&&i.unit?" ".concat(n.keyInfo.unit):"").trim(),A=nE(n),u=A.firstParty,h=A.secondParty;o({chequeDate:M(),bankAccount:"Commission Trust",outsideBrokerName:r.agentName||"".concat(r.firstName," ").concat(r.lastName),outsideBrokerCompany:r.company||"",outsideBrokerAddress:r.address||"",tradeNumber:n.tradeNumber,address:d,netCommission:c.toFixed(2),netCheque:c.toFixed(2),noteOnStub:"Transfer commission to outside broker",seller:u,buyer:h})}},[n,r]);return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Outside Brokers Commission Cheque Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDateOutside",checked:l,onChange:e=>c(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDateOutside",className:"text-sm text-gray-600",children:"Override Date"})]}),l?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:i.chequeDate.includes("/")?(()=>{const[e,t,n]=i.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():i.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());o(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:i.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",name:"bankAccount",value:i.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Name"}),(0,Rm.jsx)("input",{type:"text",name:"outsideBrokerName",value:i.outsideBrokerName,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Company"}),(0,Rm.jsx)("input",{type:"text",name:"outsideBrokerCompany",value:i.outsideBrokerCompany,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Address"}),(0,Rm.jsx)("input",{type:"text",name:"outsideBrokerAddress",value:i.outsideBrokerAddress,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",name:"tradeNumber",value:i.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:i.address,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Commission"}),(0,Rm.jsx)("input",{type:"text",name:"netCommission",value:i.netCommission,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Cheque"}),(0,Rm.jsx)("input",{type:"text",name:"netCheque",value:i.netCheque,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Seller"}),(0,Rm.jsx)("input",{type:"text",name:"seller",value:i.seller,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer"}),(0,Rm.jsx)("input",{type:"text",name:"buyer",value:i.buyer,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",name:"noteOnStub",value:i.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,Rm.jsx)("button",{onClick:async()=>{var e,t,r;const s="".concat((null===(e=n.keyInfo)||void 0===e?void 0:e.streetNumber)||""," ").concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetName)||"").concat(null!==(r=n.keyInfo)&&void 0!==r&&r.unit?" ".concat(n.keyInfo.unit):"").trim(),a=nE(n),o=a.firstParty,l=a.secondParty;try{console.log("Creating EFT for outside broker commission..."),console.log("Trade ID:",n._id),console.log("Amount:",i.netCommission),console.log("Recipient:",i.outsideBrokerName);let e=null;try{e=(await nN.get("/company-profile")).data}catch(u){var c;if(404!==(null===(c=u.response)||void 0===c?void 0:c.status))throw u;console.log("Company profile not found, using default values"),e={companyName:"Homelife Top Star Realty Inc., Brokerage",address:"9889 Markham Road, Suite 201",city:"Markham",province:"Ontario",postalCode:"L6E OB7",phone:"905-209-1400",fax:"Fax",email:"email@company.com"}}const t=await nN.post("/commission-trust-eft/outside-broker",{tradeId:n._id,amount:Number(i.netCommission),recipient:i.outsideBrokerCompany?"".concat(i.outsideBrokerName," - ").concat(i.outsideBrokerCompany):i.outsideBrokerName,description:"Transfer commission to outside broker",chequeDate:i.chequeDate});console.log("EFT Response:",t.data);const r=t.data.eftNumber;P({companyInfo:e,eftNumber:r,chequeDate:i.chequeDate,paidTo:i.outsideBrokerCompany,trade:"".concat(n.tradeNumber," ").concat(s),notes:"Transfer commission to outside broker",amount:i.netCommission,seller:o,buyer:l,firstPartyLabel:a.firstPartyLabel,secondPartyLabel:a.secondPartyLabel,payTo:i.outsideBrokerCompany,orderOf:{address:i.outsideBrokerAddress,cityProvincePostal:""},note:"".concat(n.tradeNumber," ").concat(s)}),L(!0),j(e=>X(X({},e),{},{outsideBrokersCommission:!0})),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(h){var d,A;console.error("Error creating EFT record:",h),console.error("Error response:",null===(d=h.response)||void 0===d?void 0:d.data),console.error("Error status:",null===(A=h.response)||void 0===A?void 0:A.status),console.error("Error message:",h.message),alert("Error creating EFT record. Please try again.")}},disabled:a,className:"py-2 px-6 rounded-md transition-colors ".concat(a?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:a?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:s,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},K=e=>{let{trade:n,onBack:r,eftCreated:s}=e;const[a,i]=(0,t.useState)({chequeDate:M(),bankAccount:"Commission Trust",tradeNumber:(null===n||void 0===n?void 0:n.tradeNumber)||"",amount:"",noteOnStub:"Transfer Office Share"}),[o,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(n){const e=(n.agentCommissionList||[]).reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0),t=e+.13*e,r=(n.agentCommissionList||[]).reduce((e,t)=>e+parseFloat(t.buyerRebateAmount||0),0),s=t+r;i(e=>X(X({},e),{},{tradeNumber:n.tradeNumber,amount:s.toFixed(2),noteOnStub:r>0?"Transfer Office Share (includes buyer rebates)":"Transfer Office Share"}))}},[n]);return(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Our Brokerage Commission Cheque Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomDateOurBrokerage",checked:o,onChange:e=>l(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomDateOurBrokerage",className:"text-sm text-gray-600",children:"Override Date"})]}),o?(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:a.chequeDate.includes("/")?(()=>{const[e,t,n]=a.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():a.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());i(e=>X(X({},e),{},{chequeDate:n}))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,Rm.jsx)("input",{type:"text",name:"chequeDate",value:a.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",name:"bankAccount",value:a.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade #"}),(0,Rm.jsx)("input",{type:"text",name:"tradeNumber",value:a.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,Rm.jsx)("input",{type:"text",name:"amount",value:a.amount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(()=>{const e=((null===n||void 0===n?void 0:n.agentCommissionList)||[]).reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0),t=e+.13*e,r=((null===n||void 0===n?void 0:n.agentCommissionList)||[]).reduce((e,t)=>e+parseFloat(t.buyerRebateAmount||0),0);return r>0?(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Breakdown"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md text-sm",children:[(0,Rm.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,Rm.jsx)("span",{children:"Fees + Tax:"}),(0,Rm.jsxs)("span",{children:["$",t.toFixed(2)]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,Rm.jsx)("span",{children:"Buyer Rebates:"}),(0,Rm.jsxs)("span",{children:["$",r.toFixed(2)]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-1",children:[(0,Rm.jsx)("span",{children:"Total:"}),(0,Rm.jsxs)("span",{children:["$",(t+r).toFixed(2)]})]})]})]}):null})(),(0,Rm.jsxs)("div",{className:"col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,Rm.jsx)("input",{type:"text",name:"noteOnStub",value:a.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,Rm.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,Rm.jsx)("button",{onClick:async()=>{var e,t,r;if(!n)return;const s="".concat((null===(e=n.keyInfo)||void 0===e?void 0:e.streetNumber)||""," ").concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetName)||"").concat(null!==(r=n.keyInfo)&&void 0!==r&&r.unit?" ".concat(n.keyInfo.unit):"").trim(),i=a.amount;try{const e=(await nN.post("/commission-trust-eft/our-brokerage",{tradeId:n._id,amount:Number(i),recipient:"Homelife Top Star Realty  Inc., Brokerage ",description:"Transfer Office Share",chequeDate:a.chequeDate})).data.eftNumber;await nN.post("/transactions",{date:(()=>{const[e,t,n]=a.chequeDate.split("/");return new Date("".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"),"T00:00:00"))})(),reference:"EFT#".concat(e),description:"Our Brokerage Commission Transfer",debitAccount:"CASH - CURRENT ACCOUNT",creditAccount:"CASH - COMMISSION TRUST ACCOUNT",amount:Number(i),tradeId:n._id});const t=(n.agentCommissionList||[]).reduce((e,t)=>e+parseFloat(t.buyerRebateAmount||0),0),r={eftNumber:e,paidTo:"Homelife Top Star Realty  Inc., Brokerage ",trade:"".concat(n.tradeNumber," ").concat(s),notes:t>0?"Transfer Office Share (includes buyer rebates)":"Transfer Office Share",amount:i,payTo:"Homelife Top Star Realty Inc., Brokerage",orderOf:{address:"9889 Markham Road, Suite 201",cityProvincePostal:"Markham, Ontario L6E OB7"},note:"".concat(n.tradeNumber," ").concat(s),chequeDate:a.chequeDate};y(r),w(!0),f(!0),j(e=>X(X({},e),{},{ourBrokerageCommission:!0})),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(o){console.error("Error during EFT process:",o),qh.error("Failed to complete EFT process. Please try again. (Check if backend endpoint exists)")}},disabled:s,className:"py-2 px-6 rounded-md transition-colors ".concat(s?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:s?"EFT Created":"E.F.T."}),(0,Rm.jsx)("button",{onClick:r,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("outside-brokers"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>i("outside-brokers"),children:"Outside Brokers Commission Cheques"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("agent-commission"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>i("agent-commission"),children:"Agent Commission Cheques"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("our-brokerage"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>i("our-brokerage"),children:"Our Brokerage Commission"})]})}),"outside-brokers"===a&&(0,Rm.jsx)("div",{className:"space-y-4",children:k?(0,Rm.jsx)(z,{trade:S.selectedTrade,selectedOutsideBroker:S.selectedOutsideBroker,onBack:()=>F(!1),eftCreated:N.outsideBrokersCommission}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Outside Brokers Commission Transfer Form"}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S.selectedTrade&&S.selectedOutsideBroker?F(!0):S.selectedTrade?alert("Please select an outside broker to proceed."):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,Rm.jsx)("input",{type:"text",value:S.name,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,Rm.jsx)("input",{type:"text",value:S.type,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:S.tradeNumber,onChange:e=>(e=>{if(E(t=>X(X({},t),{},{tradeNumber:e,selectedTrade:null,selectedOutsideBroker:null})),""===e.trim())return d([]),void u(!1);const t=o.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});d(t),u(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),A&&c.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await XS(e._id,"OutsideBrokerCommission");if(t.exists)return qh.error("Payment already completed for Trade #".concat(e.tradeNumber,"! \n          EFT #").concat(t.eftNumber," was created on ").concat(eE(t.date)," \n          for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{outsideBrokersCommission:!0}));const n=(await nN.get("/trades/".concat(e._id))).data;E(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:n,selectedOutsideBroker:null})),u(!1)}catch(a){console.error("Error fetching full trade details:",a),qh.error("Could not load trade details. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outside Broker"}),(0,Rm.jsxs)("select",{name:"selectedOutsideBroker",value:S.selectedOutsideBroker?"".concat(S.selectedOutsideBroker.firstName," ").concat(S.selectedOutsideBroker.lastName):"",onChange:e=>{const t=e.target.value;if(t){var n,r;const e=null===(n=S.selectedTrade)||void 0===n||null===(r=n.outsideBrokers)||void 0===r?void 0:r.find(e=>"".concat(e.firstName," ").concat(e.lastName)===t);E(t=>X(X({},t),{},{selectedOutsideBroker:e}))}else E(e=>X(X({},e),{},{selectedOutsideBroker:null}))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",required:!0,disabled:!S.selectedTrade,children:[(0,Rm.jsx)("option",{value:"",disabled:!0,children:S.selectedTrade?"Select an outside broker":"Select a trade first"}),null===(e=S.selectedTrade)||void 0===e||null===(n=e.outsideBrokers)||void 0===n?void 0:n.map((e,t)=>(0,Rm.jsxs)("option",{value:"".concat(e.firstName," ").concat(e.lastName),children:[e.firstName," ",e.lastName," -"," ",e.company]},t))]})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"agent-commission"===a&&(0,Rm.jsx)("div",{className:"space-y-4",children:h?(0,Rm.jsx)(V,{trade:C.selectedTrade,selectedAgentId:C.selectedAgentId,onBack:()=>m(!1)}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Agent Commission Transfer Form"}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C.selectedTrade&&C.selectedAgentId?m(!0):C.selectedTrade?alert("Please select an agent to proceed."):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,Rm.jsx)("input",{type:"text",value:C.name,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,Rm.jsx)("input",{type:"text",value:C.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:C.tradeNumber,onChange:e=>(e=>{if(B(t=>X(X({},t),{},{tradeNumber:e,selectedTrade:null,selectedAgentId:""})),""===e.trim())return d([]),void u(!1);const t=o.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});d(t),u(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),A&&c.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await XS(e._id,"AgentCommissionTransfer");if(t.exists&&t.count>=2)return qh.error("Maximum 2 payments allowed for Trade #".concat(e.tradeNumber,"! \n          ").concat(t.count," EFT(s) already created for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{agentCommission:!0}));const n=(await nN.get("/trades/".concat(e._id))).data;B(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:n,selectedAgentId:""})),u(!1)}catch(a){console.error("Error fetching full trade details:",a),qh.error("Could not load trade details. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent"}),(0,Rm.jsxs)("select",{name:"selectedAgentId",value:C.selectedAgentId,onChange:e=>B(t=>X(X({},t),{},{selectedAgentId:e.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",required:!0,disabled:!C.selectedTrade,children:[(0,Rm.jsx)("option",{value:"",disabled:!0,children:C.selectedTrade?"Select an agent":"Select a trade first"}),null===(r=C.selectedTrade)||void 0===r||null===(s=r.agentCommissionList)||void 0===s?void 0:s.map((e,t)=>(0,Rm.jsxs)("option",{value:e.agentId,children:[e.agentName," (",e.agentId,")"]},t))]})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"our-brokerage"===a&&(0,Rm.jsx)("div",{className:"space-y-4",children:Q?(0,Rm.jsx)(K,{trade:U.selectedTrade,onBack:()=>R(!1),eftCreated:N.ourBrokerageCommission}):(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Our Brokerage Commission Transfer Form"}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),U.selectedTrade?R(!0):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,Rm.jsx)("input",{type:"text",value:U.tradeNumber,onChange:e=>(e=>{if(O(t=>X(X({},t),{},{tradeNumber:e,selectedTrade:null})),""===e.trim())return d([]),void u(!1);const t=o.filter(t=>{var n,r,s;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(s=t.keyInfo)&&void 0!==s&&s.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())});d(t),u(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),A&&c.length>0&&(0,Rm.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map(e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,Rm.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const s="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await XS(e._id,"OurBrokerageCommission");if(t.exists)return qh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(eE(t.date)," for ").concat(ZS(t.type),"."),{duration:6e3}),void j(e=>X(X({},e),{},{ourBrokerageCommission:!0}));const n=(await nN.get("/trades/".concat(e._id))).data;O(t=>X(X({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(s),selectedTrade:n})),u(!1)}catch(a){console.error("Error fetching full trade details:",a),qh.error("Could not load trade details. Please try again.")}})(e),children:[(0,Rm.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:s})]},e._id)})})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})})]})})]}),p&&b&&(0,Rm.jsx)(IP,{data:b,hideTradeSellerBuyer:v,onClose:()=>{f(!1),y(null),x(null),w(!1)}}),D&&_&&(0,Rm.jsx)(IP,{data:_,onClose:()=>{L(!1),P(null)}})]})},_P=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)({fromDate:"",toDate:""}),o=(e,t)=>{i(n=>X(X({},n),{},{[e]:t}))};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 print:hidden",children:"Commission Trust Ledger"}),e.length>0&&(0,Rm.jsxs)("button",{onClick:()=>{0!==e.length?window.print():bp.error("No data to print. Please search for ledger entries first.")},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,Rm.jsx)(km,{}),"Print Report"]})]}),(0,Rm.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:hidden",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Select Date Range"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:a.fromDate,onChange:e=>o("fromDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:a.toDate,onChange:e=>o("toDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsx)("div",{className:"flex items-end",children:(0,Rm.jsx)("button",{onClick:()=>{a.fromDate&&a.toDate?new Date(a.fromDate)>new Date(a.toDate)?bp.error("From date cannot be after to date"):(async()=>{try{s(!0),console.log("Searching for ledger entries with params:",{fromDate:a.fromDate,toDate:a.toDate,accountNumber:"10004"});const e=await nN.get("/ledger/account/10004",{params:{fromDate:a.fromDate,toDate:a.toDate}});console.log("Response received:",e.data),console.log("Number of entries found:",e.data.length);const t=e.data.filter((e,t,n)=>{if(e.description&&e.description.includes("Trade #:"))return!0;if(e.description&&e.description.match(/^EFT#\d+\s*-\s*.+$/)){const t=e.description.match(/^EFT#(\d+)/);if(t){const e=t[1];return!n.some(t=>t.description&&t.description.includes("Trade #:")&&t.reference==="EFT#".concat(e))}}return!0});console.log("Filtered entries:",t.length),console.log("Sample filtered entries:",t.slice(0,3).map(e=>({description:e.description,reference:e.reference,amount:e.amount}))),n(t)}catch(t){var e;console.error("Error fetching ledger entries:",t),console.error("Error details:",null===(e=t.response)||void 0===e?void 0:e.data),bp.error("Failed to fetch ledger entries")}finally{s(!1)}})():bp.error("Please select both from and to dates")},disabled:r,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Loading...":"Search"})})]})]}),(0,Rm.jsxs)("div",{className:"hidden print:block print:mb-6",children:[(0,Rm.jsx)("div",{className:"mb-4",children:(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Commission Trust Ledger"})}),(0,Rm.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Homelife Top Star Realty Inc. Logo",className:"w-12 h-12 mr-3"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Commission Trust Ledger Report"})]})]}),(0,Rm.jsxs)("div",{className:"text-right",children:[(0,Rm.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Report Date: ",(new Date).toLocaleDateString()]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",a.fromDate," to ",a.toDate]})]})]})]}),e.length>0&&(0,Rm.jsxs)("div",{className:"hidden print:block",children:[(0,Rm.jsxs)("table",{className:"w-full border-collapse border border-gray-400 text-xs",children:[(0,Rm.jsxs)("colgroup",{children:[(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"7%"}}),(0,Rm.jsx)("col",{style:{width:"45%"}}),(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"10%"}}),(0,Rm.jsx)("col",{style:{width:"8%"}}),(0,Rm.jsx)("col",{style:{width:"14%"}})]}),(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Reference"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Type"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Amount"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Trade Number"}),(0,Rm.jsx)("th",{className:"border border-gray-400 px-2 py-1 text-center font-bold",children:"Payee"})]})}),(0,Rm.jsx)("tbody",{children:e.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:e.reference||"N/A"}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:(()=>{let t=e.description||"";return t=t.replace(/\s*-\s*Commission Trust\s*-\s*[^-]+$/g,""),t=t.replace(/\s*-\s*[^-]+Street[^-]*$/g,""),t=t.replace(/\s*-\s*([^-]+)\s*-\s*\1\s*$/g," - $1"),t})()}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-center",children:e.type}),(0,Rm.jsxs)("td",{className:"border border-gray-400 px-2 py-1 text-right",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-center",children:(()=>{if(e.tradeNumber)return e.tradeNumber;if(e.description){const t=e.description.match(/Trade #:\s*(\d+)/i);if(t)return t[1]}return"N/A"})()}),(0,Rm.jsx)("td",{className:"border border-gray-400 px-2 py-1 text-left",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received From:\s*([^-]+)/i);if(t)return t[1].trim();const n=e.description.match(/EFT#\d+\s*-\s*(.+)$/);if(n)return n[1].trim()}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/i);if(t)return t[1].trim()}return"N/A"})()})]},t))})]}),(0,Rm.jsx)("div",{className:"mt-4 text-sm",children:(0,Rm.jsxs)("div",{className:"flex justify-start space-x-8",children:[(0,Rm.jsxs)("span",{className:"font-semibold",children:["Total Debits: $",e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]}),(0,Rm.jsxs)("span",{className:"font-semibold",children:["Total Credits: $",e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]})})]}),e.length>0&&(0,Rm.jsxs)("div",{className:"space-y-4 print:hidden",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Ledger Entries"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table table-fixed",children:[(0,Rm.jsxs)("colgroup",{children:[(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"10%"}})," ",(0,Rm.jsx)("col",{style:{width:"38%"}})," ",(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"12%"}})," ",(0,Rm.jsx)("col",{style:{width:"8%"}})," ",(0,Rm.jsx)("col",{style:{width:"16%"}})," "]}),(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Date"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Description"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Type"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Trade Number"}),(0,Rm.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b",children:"Payee"})]})}),(0,Rm.jsx)("tbody",{children:e.map((e,t)=>(0,Rm.jsxs)("tr",{className:"border-b hover:bg-gray-50 align-top",children:[(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:e.reference||"N/A"}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r whitespace-pre-line break-words",children:(()=>{let t=e.description||"";return t=t.replace(/\s*-\s*Commission Trust\s*-\s*[^-]+$/g,""),t=t.replace(/\s*-\s*[^-]+Street[^-]*$/g,""),t=t.replace(/\s*-\s*([^-]+)\s*-\s*\1\s*$/g," - $1"),t})()}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-center border-r",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-gray-100 text-black type-badge",children:e.type})}),(0,Rm.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-center border-r tabular-nums",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-center border-r",children:(()=>{if(e.tradeNumber)return e.tradeNumber;if(e.description){const t=e.description.match(/Trade #:\s*(\d+)/i);if(t)return t[1]}return"N/A"})()}),(0,Rm.jsx)("td",{className:"px-3 py-2 text-sm text-left break-words",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received From:\s*([^-]+)/i);if(t)return t[1].trim();const n=e.description.match(/EFT#\d+\s*-\s*(.+)$/);if(n)return n[1].trim()}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/i);if(t)return t[1].trim();{const t=e.description.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);if(t)return t[1].trim()}}return"N/A"})()})]},t))})]})}),(0,Rm.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Total Debits: "}),(0,Rm.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Total Credits: "}),(0,Rm.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0).toFixed(2)]})]})]})})]}),0===e.length&&!r&&(0,Rm.jsx)("div",{className:"text-center py-8",children:(0,Rm.jsx)("p",{className:"text-gray-500 text-lg",children:"No ledger entries found. Please select a date range and search."})}),(0,Rm.jsx)("div",{className:"hidden print:block print:mt-8 print:pt-4 print:border-t print:border-gray-300",children:(0,Rm.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[(0,Rm.jsx)("div",{children:(0,Rm.jsx)("p",{children:"https://homelifetopstar.brokeragelead.ca/commission-trust-ledger"})}),(0,Rm.jsx)("div",{children:(0,Rm.jsx)("p",{children:"1/1"})})]})})]})})]})]})},PP=()=>{const e=localStorage.getItem("lastAPNumber");let t=2e3;if(e){const n=e.match(/AP(\d+)/);n&&(t=parseInt(n[1])+1)}const n="AP".concat(t);return localStorage.setItem("lastAPNumber",n),n},UP=()=>{const[e,n]=(0,t.useState)("ap-expense"),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)({apNumber:"",date:(new Date).toISOString().slice(0,10),eftNumber:"",postDate:(new Date).toISOString().slice(0,10),dueDate:"",amount:"",hst:0,glAccount:"",chequeDate:(new Date).toISOString().slice(0,10)}),[p,f]=(0,t.useState)({vendorId:"",selectedVendor:null,amount:"",expenseCategory:"",description:"",invoiceNumber:"",companyName:""}),[g,x]=(0,t.useState)({recipient:"",amount:"",expenseCategory:"",description:""}),[b,y]=(0,t.useState)([]),[v,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(!1),[C,B]=(0,t.useState)(!1);(0,t.useEffect)(()=>{S()},[]);const S=async()=>{try{const e=await nN.get("/vendors");s(e.data)}catch(e){console.error("Error fetching vendors:",e)}};(0,t.useEffect)(()=>{c&&nN.get("/general-account-eft").then(e=>{const t=e.data.reduce((e,t)=>t.eftNumber>e?t.eftNumber:e,0);m(e=>X(X({},e),{},{eftNumber:t+1}))})},[c]),(0,t.useEffect)(()=>{m(e=>X(X({},e),{},{hst:e.amount?(.13*parseFloat(e.amount)).toFixed(2):0}))},[h.amount]);const E=e=>{const{name:t,value:n}=e.target;m(e=>X(X({},e),{},{[t]:n}))},[k,F]=(0,t.useState)(!1),[I,T]=(0,t.useState)(null);(0,t.useEffect)(()=>{D()},[]);const D=async()=>{try{const e=await nN.get("/general-account-eft/"),t=e.data.filter(e=>"APExpense"===e.type).sort((e,t)=>{const n=new Date(e.date);return new Date(t.date)-n});y(t)}catch(e){console.error("Error fetching AP transactions:",e)}},L=e=>{if(!e)return"";const t=new Date(e),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),s=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(s)},_=e=>{var n,r,s,a,o,c,d,A;let{transaction:u,onClose:h}=e;const[m,p]=t.useState({vendorNumber:(null===(n=u.vendorId)||void 0===n?void 0:n.vendorNumber)||"",vendorName:u.vendorId?"".concat(u.vendorId.firstName," ").concat(u.vendorId.lastName):u.recipient||"",chequeDate:u.date?new Date(u.date).toISOString().slice(0,10):"",address:null!==(r=u.vendorId)&&void 0!==r&&r.streetNumber&&null!==(s=u.vendorId)&&void 0!==s&&s.streetName?"".concat(u.vendorId.streetNumber,", ").concat(u.vendorId.streetName):(null===(a=u.vendorId)||void 0===a?void 0:a.address)||"",city:(null===(o=u.vendorId)||void 0===o?void 0:o.city)||"",province:(null===(c=u.vendorId)||void 0===c?void 0:c.province)||"",postalCode:(null===(d=u.vendorId)||void 0===d?void 0:d.postalCode)||"",invoiceNumber:u.invoiceNumber||u.eftNumber,bankAccount:"General",hst:u.hst||""}),[f,g]=t.useState(!1),[x,b]=t.useState(u.amount&&u.hst?(parseFloat(u.amount)+parseFloat(m.hst)).toFixed(2):u.amount);t.useEffect(()=>{u.amount&&m.hst?b((parseFloat(u.amount)+parseFloat(m.hst)).toFixed(2)):b(u.amount)},[m.hst,u.amount]);const y=()=>{var e;return null!==(e=u.vendorId)&&void 0!==e&&e.companyName&&""!==u.vendorId.companyName.trim()?u.vendorId.companyName:u.vendorId?"".concat(u.vendorId.firstName," ").concat(u.vendorId.lastName):u.recipient||""},v=()=>{var e,t,n;return null!==(e=u.vendorId)&&void 0!==e&&e.streetNumber&&null!==(t=u.vendorId)&&void 0!==t&&t.streetName?"".concat(u.vendorId.streetNumber,", ").concat(u.vendorId.streetName):(null===(n=u.vendorId)||void 0===n?void 0:n.address)||m.address||""},w=()=>{var e;return(null===(e=u.vendorId)||void 0===e?void 0:e.city)||m.city||""},N=()=>{var e;return(null===(e=u.vendorId)||void 0===e?void 0:e.province)||m.province||""},j=()=>{var e;return(null===(e=u.vendorId)||void 0===e?void 0:e.postalCode)||m.postalCode||""},C=()=>{var e;return(null===(e=u.vendorId)||void 0===e?void 0:e.vendorNumber)||m.vendorNumber||""},B=e=>{const{name:t,value:n}=e.target;p(e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Rm.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-40",onClick:h}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-3xl w-full p-8 relative z-50",onClick:e=>e.stopPropagation(),children:[(0,Rm.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Payment Summary"}),(0,Rm.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor #"}),(0,Rm.jsx)("input",{type:"text",name:"vendorNumber",value:m.vendorNumber,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Name"}),(0,Rm.jsx)("input",{type:"text",name:"vendorName",value:m.vendorName,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice #"}),(0,Rm.jsx)("input",{type:"text",name:"invoiceNumber",value:m.invoiceNumber,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque Date"}),(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:m.chequeDate,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account"}),(0,Rm.jsx)("input",{type:"text",name:"bankAccount",value:m.bankAccount,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Rm.jsx)("input",{type:"text",name:"address",value:v(),onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:m.city,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,Rm.jsx)("input",{type:"text",name:"province",value:m.province,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:m.postalCode,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",min:"0",name:"hst",value:m.hst,onChange:B,className:"block w-full rounded-md border-gray-300 shadow-sm",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,Rm.jsx)("input",{type:"text",name:"total",value:x,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Rm.jsx)("input",{type:"text",name:"companyName",value:(null===(A=u.vendorId)||void 0===A?void 0:A.companyName)||u.companyName||"",className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]})]}),(0,Rm.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full table-fixed bg-white border border-gray-200",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Invoice"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Cheque Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Due Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"HST"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"})]})}),(0,Rm.jsx)("tbody",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:u.invoiceNumber||u.eftNumber}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:m.chequeDate?new Date(m.chequeDate+"T00:00:00").toLocaleDateString():""}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:u.dueDate?new Date(u.dueDate).toLocaleDateString():""}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:m.hst||""}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:x}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-center",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(u.eftCreated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:u.eftCreated?"Paid":"Pending"})})]})})]})}),(0,Rm.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,Rm.jsx)("button",{className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",onClick:async()=>{try{u.hst=m.hst,u._id&&m.hst!==u.hst&&await nN.put("/general-account-eft/".concat(u._id),{hst:m.hst}),u.vendorId&&(u.vendorId.city=m.city,u.vendorId.province=m.province,u.vendorId.postalCode=m.postalCode,u.vendorId.address=m.address),qh.success("Changes saved successfully!"),h()}catch(e){console.error("Error saving changes:",e),qh.error("Failed to save changes. Please try again.")}},children:"Save"}),(0,Rm.jsx)("button",{className:"bg-gray-300 text-gray-800 py-2 px-4 rounded hover:bg-gray-400".concat(f||u.eftCreated?" opacity-50 cursor-not-allowed":""),onClick:async()=>{if(u.eftCreated)qh.error("EFT has already been created for this invoice number!");else{g(!0);try{const e=await nN.get("/general-account-eft");let t=299;for(const i of e.data)i.eftNumber>t&&(t=i.eftNumber);const n=t+1;await nN.put("/general-account-eft/".concat(u._id),{eftCreated:!0,eftNumber:n,chequeDate:m.chequeDate});const r=y(),s="EFT#".concat(n," - ").concat(r),a=parseFloat(x);await nN.post("/ledger",{accountNumber:"21000",accountName:"A/P - Suppliers",debit:a,credit:0,description:s,eftNumber:n,chequeDate:new Date(m.chequeDate+"T00:00:00")}),await nN.post("/ledger",{accountNumber:"10001",accountName:"Cash - Current Account",debit:0,credit:a,description:s,eftNumber:n,chequeDate:new Date(m.chequeDate+"T00:00:00")});const o={eftNumber:n,paidTo:{name:y(),address:v()},notes:"Vendor Payment Transaction",amount:a,payTo:y(),orderOf:{address:v(),cityProvincePostal:"".concat(w(),", ").concat(N(),", ").concat(j())},note:"".concat(y(),", Vendor #").concat(C()),chequeDate:m.chequeDate,trade:void 0,seller:void 0,buyer:void 0};l(o),i(!0),qh.success("EFT transaction and receipt generated!");const c=await nN.get("/general-account-eft/".concat(u._id));Object.assign(u,c.data),D()}catch(n){var e,t;qh.error("Failed to process EFT: "+((null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{g(!1)}}},disabled:f||u.eftCreated,children:u.eftCreated?"EFT Created":"EFT"}),(0,Rm.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",onClick:h,children:"Exit"})]}),(0,Rm.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl",onClick:h,children:"\xd7"})]})]})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mb-6 border-b pb-2",children:[(0,Rm.jsx)("button",{className:"px-4 py-2 font-medium rounded-t focus:outline-none ".concat("ap-expense"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>{n("ap-expense"),d(!1),F(!1)},children:"A/P Expense"}),(0,Rm.jsx)("button",{className:"px-4 py-2 font-medium rounded-t focus:outline-none ".concat("accounts-payable"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>{n("accounts-payable"),d(!1),F(!1)},children:"Accounts Payable"})]}),"ap-expense"===e&&(0,Rm.jsxs)(Rm.Fragment,{children:[!c&&!k&&(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Select Vendor"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor"}),(0,Rm.jsxs)("select",{value:p.vendorId||"",onChange:e=>(e=>{const t=r.find(t=>t._id===e);t&&f(e=>X(X({},e),{},{vendorId:t._id,selectedVendor:t,companyName:t.companyName||""}))})(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select a vendor..."}),r.map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," (#",e.vendorNumber,")"]},e._id))]})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"button",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",onClick:()=>{m(e=>X(X({},e),{},{apNumber:PP()})),d(!0)},disabled:!p.selectedVendor,children:"Proceed"})}),p.selectedVendor&&(0,Rm.jsxs)("div",{className:"mt-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),(0,Rm.jsx)("input",{type:"text",value:p.companyName,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]})]}),c&&(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=h.amount&&h.hst?(parseFloat(h.amount)+parseFloat(h.hst)).toFixed(2):h.amount,t=(()=>{var e;return null!==(e=p.selectedVendor)&&void 0!==e&&e.companyName&&""!==p.selectedVendor.companyName.trim()?p.selectedVendor.companyName:p.selectedVendor?"".concat(p.selectedVendor.firstName," ").concat(p.selectedVendor.lastName):""})();await nN.post("/general-account-eft/ap-expense",{vendorId:p.vendorId,amount:parseFloat(h.amount),recipient:p.selectedVendor?"".concat(p.selectedVendor.firstName," ").concat(p.selectedVendor.lastName):"",expenseCategory:h.glAccount||"",description:"",invoiceNumber:h.eftNumber,hst:h.hst,dueDate:h.dueDate,chequeDate:L(A?h.chequeDate:h.date)});D(),await nN.post("/ledger",{accountNumber:h.glAccount||"70102",accountName:p.expenseCategory||"Payroll Exp. - Salaries",debit:parseFloat(h.amount),credit:0,description:"".concat(t," - G/A Expense"),date:new Date(h.postDate),apNumber:h.apNumber}),await nN.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(h.hst),credit:0,description:"".concat(t," - G/A Expense"),date:new Date(h.postDate),apNumber:h.apNumber}),await nN.post("/ledger",{accountNumber:"21000",accountName:"A/P - Suppliers",debit:0,credit:parseFloat(e),description:"".concat(t," - G/A Expense"),date:new Date(h.postDate),apNumber:h.apNumber}),T({vendor:p.selectedVendor,companyName:p.companyName,eftNumber:h.eftNumber,chequeDate:h.postDate,dueDate:h.dueDate,amount:h.amount,payment:"Completed"}),d(!1),F(!0),m(e=>X(X({},e),{},{apNumber:""})),qh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(t){qh.error("Error creating EFT record.")}},className:"p-6 border border-gray-200 rounded-lg space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,Rm.jsx)("input",{type:"date",name:"date",value:h.date,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Date Override"}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Rm.jsx)("input",{type:"checkbox",id:"useCustomChequeDate",checked:A,onChange:e=>u(e.target.checked),className:"rounded border-gray-300"}),(0,Rm.jsx)("label",{htmlFor:"useCustomChequeDate",className:"text-sm text-gray-600",children:"Override Cheque Date"})]}),A&&(0,Rm.jsx)("input",{type:"date",name:"chequeDate",value:h.chequeDate,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AP Number"}),(0,Rm.jsx)("input",{type:"text",name:"apNumber",value:h.apNumber,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice #"}),(0,Rm.jsx)("input",{type:"text",name:"eftNumber",value:h.eftNumber,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0,onBlur:async e=>{const t=e.target.value.trim();if(!t)return;const n=await(async e=>{try{return(await nN.get("/general-account-eft/check-invoice/".concat(e))).data}catch(t){return bp.error("Error checking invoice number"),{exists:!1}}})(t);n.exists&&(qh.error("Payment already done for Invoice #".concat(t," on ").concat(n.paymentDate?new Date(n.paymentDate).toLocaleDateString():"",". Amount: $").concat(n.amount)),m(e=>X(X({},e),{},{eftNumber:""})))}})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"G/L Account"}),(0,Rm.jsxs)("select",{name:"glAccount",value:h.glAccount||"",onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select G/L Account"}),[{value:"40100",label:"40100 Commission Income"},{value:"43100",label:"43100 Other Income"},{value:"44100",label:"44100 Fee Deducted Income"},{value:"50100",label:"50100 Agent's Commission"},{value:"51100",label:"51100 Outside Broker Commission"},{value:"52100",label:"52100 Referral Fees"},{value:"62101",label:"62101 Rent & Occ. - Rent Expense"},{value:"62102",label:"62102 Rent & Occ. - Common Area"},{value:"62103",label:"62103 Rent & Occ. - Utilities"},{value:"62104",label:"62104 Rent & Occ. - Repairs & Maint"},{value:"62105",label:"62105 Rent & Occ. - Prop./Bus. Taxes"},{value:"63102",label:"63102 Lic. & Ins. - Office Contents"},{value:"63103",label:"63103 Lic. & Ins. - Licenses"},{value:"63199",label:"63199 Lic. & Ins. - Misc."},{value:"69101",label:"69101 Franchise Costs - Realty Executives"},{value:"70101",label:"70101 Payroll Exp. - Mgmt. Salaries"},{value:"70103",label:"70103 Payroll Exp. - Part-Time"},{value:"70104",label:"70104 Payroll Exp. - Payroll"},{value:"70105",label:"70105 Payroll Exp. - Group Insurance"},{value:"70199",label:"70199 Payroll Exp. - Misc."},{value:"71102",label:"71102 Bank Charges - Loan Interest"},{value:"71104",label:"71104 Bank Charges - Service Charges"},{value:"71199",label:"71199 Bank Charges - Misc."},{value:"72101",label:"72101 Commun. Exp. - Telephone Lines"},{value:"72102",label:"72102 Commun. Exp. - Internet Service"},{value:"72103",label:"72103 Commun. Exp. - Pagers"},{value:"72199",label:"72199 Commun. Exp. - Misc."},{value:"75102",label:"75102 Office Exp. - Office Supplies"},{value:"75103",label:"75103 Office Exp. - Printing"},{value:"75104",label:"75104 Office Exp. - Postage"},{value:"75105",label:"75105 Office Exp. - Misc."},{value:"75117",label:"75117 Office Exp. - Computer Supplies"},{value:"75199",label:"75199 Office Exp. - Misc."},{value:"76103",label:"76103 Professional Fees - Legal"},{value:"79101",label:"79101 Travel & Entertainment - Meals"},{value:"90101",label:"90101 Miscellaneous - Other"}].map(e=>(0,Rm.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Date"}),(0,Rm.jsx)("input",{type:"date",name:"postDate",value:h.postDate,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,Rm.jsx)("input",{type:"date",name:"dueDate",value:h.dueDate,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,Rm.jsx)("input",{type:"number",name:"amount",value:h.amount,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HST"}),(0,Rm.jsx)("input",{type:"text",name:"hst",value:h.hst,onChange:E,className:"block w-full rounded-md border-gray-300 shadow-sm ".concat(h.amount&&h.hst&&Math.abs(parseFloat(h.hst)-.13*parseFloat(h.amount))>.01?"border-blue-500 bg-blue-50":""),placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total"}),(0,Rm.jsx)("input",{type:"text",name:"total",value:h.amount&&h.hst?(parseFloat(h.amount)+parseFloat(h.hst)).toFixed(2):h.amount,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,Rm.jsx)("div",{className:"pt-4",children:(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Submit Payment"})})]})]}),"accounts-payable"===e&&(0,Rm.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Accounts Payable"}),(0,Rm.jsxs)("table",{className:"min-w-full table-fixed bg-white border border-gray-200 mb-6",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Invoice #"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Vendor Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Due Date"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"HST"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"}),(0,Rm.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"})]})}),(0,Rm.jsx)("tbody",{children:0===b.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"8",className:"px-4 py-2 text-center text-gray-500",children:"No accounts payable entries."})}):b.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>w(e),children:[(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.invoiceNumber||e.eftNumber}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.vendorId?e.vendorId.companyName&&""!==e.vendorId.companyName.trim()?e.vendorId.companyName:"".concat(e.vendorId.firstName," ").concat(e.vendorId.lastName):e.recipient}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.date?new Date(e.date).toLocaleDateString():""}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.dueDate?new Date(e.dueDate).toLocaleDateString():""}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.amount?parseFloat(e.amount).toFixed(2):""}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.hst?parseFloat(e.hst).toFixed(2):""}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.total?parseFloat(e.total).toFixed(2):e.amount&&void 0!==e.hst&&null!==e.hst?(parseFloat(e.amount)+parseFloat(e.hst)).toFixed(2):e.amount?parseFloat(e.amount).toFixed(2):""}),(0,Rm.jsx)("td",{className:"px-4 py-2 border-b text-center",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.eftCreated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.eftCreated?"Paid":"Pending"})})]},e._id||t))})]}),v&&(0,Rm.jsx)(_,{transaction:v,onClose:()=>w(null)})]}),a&&o&&(0,Rm.jsx)(IP,{data:o,hideTradeSellerBuyer:!0,onClose:()=>{i(!1),l(null)}})]})})]})]})},OP=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(()=>localStorage.getItem("reconcileRealEstateTrust_statementAmount")||""),[p,f]=(0,t.useState)(new Set),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),v=async t=>{try{const n=await nN.get("/reconciliation-settings/10002",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map(e=>e.ledgerId)),r=new Set;t.forEach((t,n)=>{e.has(t._id)&&r.add(n)}),f(r)}const s=localStorage.getItem("reconcileRealEstateTrust_statementAmount");s?m(s):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&m(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},w=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},N=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),j=(()=>{if(0===a.length)return{book:0,open:0,misc:0};const e=a.filter((e,t)=>!p.has(t)),t=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),n=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),r=e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),s=e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),i=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),o=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0);return{book:i-o,open:r+s,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling Real Estate Trust"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:r,onChange:e=>s(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await nN.get("/ledger/account/10002",{params:{fromDate:e,toDate:r}});i(t.data),d(!0),await v(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:o,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:o?"Loading...":"Retrieve Data"}),(0,Rm.jsxs)("button",{onClick:()=>{if(!c||0===a.length)return void alert("Please retrieve data first before printing.");const e=a.filter((e,t)=>!p.has(t)),t=e.reduce((e,t)=>e+(t.amount||0),0),n=(parseFloat(h)||0)-t,s=window.open("","","width=900,height=700");s.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage Real Estate Trust Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Homelife Top Star Realty Inc. Logo" class="logo">\n            <div class="company-name">Homelife Top Star Realty Inc., Brokerage</div>\n            <div class="report-title">Real Estate Trust XXXX6067 GL#10002 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?N(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map(e=>{const t=e.description||e.narration||"";let n="-";const r=t.match(/Ref: [^,]+ - (.+)$/);if(r)n=r[1].trim();else{const e=t.match(/Paid to: [^-]+ - (.+)$/);if(e)n=e[1].trim();else{const e=t.match(/Received from: [^-]+ - (.+)$/);if(e)n=e[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*[^-]+\s*-\s*(.+)$/);if(e)n=e[1].trim();else{const e=t.match(/EFT#[^-]+ - [^-]+ - (.+)$/);if(e)n=e[1].trim();else{const e=t.match(/- ([^-]+)$/);e&&(n=e[1].trim())}}}}}let s=e.payee||"-";if("-"===s){const t=e.description||e.narration||"",n=t.match(/Received from: ([^,]+?)(?:\s*,\s*Ref|$)/);if(n)s=n[1].trim();else{const e=t.match(/Paid to: ([^-]+?)(?:\s*-\s*Commission Trust)?$/);if(e)s=e[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);e&&(s=e[1].trim())}}}if("-"!==s){"Credit"===e.type?s.toLowerCase().includes("paid to:")||(s="Paid to: ".concat(s)):s.toLowerCase().includes("received from:")||(s="Received from: ".concat(s))}let a=e.tradeNumber||"-";return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(s,"</td>\n                        <td>").concat(w(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(N(e.amount||0),"</td>\n                      </tr>\n                    ")}).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(N(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(N(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Real Estate Trust Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),s.document.close(),s.focus(),s.print(),s.close()},disabled:!c||0===a.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,Rm.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.book)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.open)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.misc)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,Rm.jsx)("button",{onClick:()=>{u(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?N(parseFloat(h)):"Click to enter"})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,Rm.jsxs)("span",{children:["Book: ",N(j.book)]}),(0,Rm.jsx)("span",{children:"+"}),(0,Rm.jsxs)("span",{children:["Open: ",N(j.open)]}),(0,Rm.jsx)("span",{children:"-"}),(0,Rm.jsxs)("span",{children:["Misc: ",N(j.misc)]}),(0,Rm.jsx)("span",{children:"="}),(0,Rm.jsxs)("span",{children:["Bank:"," ",N(j.book+j.open-j.misc)]})]}),h&&(0,Rm.jsxs)("div",{className:"mt-4 text-center",children:[(0,Rm.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,Rm.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(j.book+j.open-j.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:N(j.book+j.open-j.misc-parseFloat(h))})]})]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Trust Account Transactions (10002)"}),a.length>0&&(0,Rm.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-red-600",children:N(j.chequesCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-green-600",children:N(j.depositsCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a.length})]})]})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{y(X(X({},e),{},{index:t})),x(!0)})(e,t),children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(e.date||e.transactionDate)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rm.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N(Math.abs(e.amount||0))}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.has(t)?(0,Rm.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,Rm.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>m(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{try{await nN.put("/reconciliation-settings/10002/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileRealEstateTrust_statementAmount",h),u(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&b&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:p.has(b.index)?"Unclear Transaction":"Clear Transaction"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:p.has(b.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Rm.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",N(Math.abs(b.amount||0))]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",b.description||b.narration||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:()=>(async t=>{if(b){const s=new Set(p);t?s.add(b.index):s.delete(b.index),f(s);try{await nN.put("/reconciliation-settings/10002/cleared-transactions",{fromDate:e,toDate:r,ledgerId:b._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?s.delete(b.index):s.add(b.index),f(s),alert("Error saving transaction status. Please try again.")}}x(!1),y(null)})(!p.has(b.index)),className:"px-4 py-2 text-white rounded-md ".concat(p.has(b.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:p.has(b.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},QP=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(()=>localStorage.getItem("reconcileCommissionTrust_statementAmount")||""),[p,f]=(0,t.useState)(new Set),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),v=async t=>{try{const n=await nN.get("/reconciliation-settings/10004",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map(e=>e.ledgerId)),r=new Set;t.forEach((t,n)=>{e.has(t._id)&&r.add(n)}),f(r)}const s=localStorage.getItem("reconcileCommissionTrust_statementAmount");s?m(s):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&m(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},w=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},N=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),j=(()=>{if(0===a.length)return{book:0,open:0,misc:0};const e=a.filter((e,t)=>!p.has(t)),t=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),n=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),r=e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),s=e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),i=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),o=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0);return{book:i-o,open:r+s,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling Commission Trust"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:r,onChange:e=>s(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await nN.get("/ledger/account/10004",{params:{fromDate:e,toDate:r}});i(t.data),d(!0),await v(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:o,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:o?"Loading...":"Retrieve Data"}),(0,Rm.jsxs)("button",{onClick:()=>{if(!c||0===a.length)return void alert("Please retrieve data first before printing.");const e=a.filter((e,t)=>!p.has(t)),t=e.reduce((e,t)=>e+(t.amount||0),0),n=(parseFloat(h)||0)-t,s=window.open("","","width=900,height=700");s.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage Commission Trust Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" class="logo">\n            <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n            <div class="report-title">Commission Trust XXXX6067 GL#10004 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?N(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map(e=>{const t=e.description||e.narration||"";let n="-";const r=t.match(/- ([^-]+)$/);if(r)n=r[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*[^-]+\s*-\s*([^-]+)$/);e&&(n=e[1].trim())}let s=e.payee||"-";if("-"===s){const e=t.match(/Received from:\s*([^-]+)/);if(e)s=e[1].trim();else{const e=t.match(/Paid to:\s*([^-]+)/);if(e)s=e[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);e&&(s=e[1].trim())}}}if("-"!==s){const t="Credit"===e.type,n="Debit"===e.type;t?s.toLowerCase().includes("paid to:")||(s="Paid to: ".concat(s)):n&&(s.toLowerCase().includes("received from:")||(s="Received from: ".concat(s)))}let a="-";if(t){const e=t.match(/Trade #:?\s*(\d+)/);e&&(a=e[1])}return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(s,"</td>\n                        <td>").concat(w(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(N(e.amount||0),"</td>\n                      </tr>\n                    ")}).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(N(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(N(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Commission Trust Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),s.document.close(),s.focus(),s.print(),s.close()},disabled:!c||0===a.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,Rm.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.book)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.open)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.misc)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,Rm.jsx)("button",{onClick:()=>{u(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?N(parseFloat(h)):"Click to enter"})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,Rm.jsxs)("span",{children:["Book: ",N(j.book)]}),(0,Rm.jsx)("span",{children:"+"}),(0,Rm.jsxs)("span",{children:["Open: ",N(j.open)]}),(0,Rm.jsx)("span",{children:"-"}),(0,Rm.jsxs)("span",{children:["Misc: ",N(j.misc)]}),(0,Rm.jsx)("span",{children:"="}),(0,Rm.jsxs)("span",{children:["Bank:"," ",N(j.book+j.open-j.misc)]})]}),h&&(0,Rm.jsxs)("div",{className:"mt-4 text-center",children:[(0,Rm.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,Rm.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(j.book+j.open-j.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:N(j.book+j.open-j.misc-parseFloat(h))})]})]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Commission Trust Account Transactions (10004)"}),a.length>0&&(0,Rm.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-red-600",children:N(j.chequesCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-green-600",children:N(j.depositsCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a.length})]})]})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{y(X(X({},e),{},{index:t})),x(!0)})(e,t),children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(e.date||e.transactionDate)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rm.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N(Math.abs(e.amount||0))}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.has(t)?(0,Rm.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,Rm.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>m(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{try{await nN.put("/reconciliation-settings/10004/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileCommissionTrust_statementAmount",h),u(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&b&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:p.has(b.index)?"Unclear Transaction":"Clear Transaction"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:p.has(b.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Rm.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",N(Math.abs(b.amount||0))]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",b.description||b.narration||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:()=>(async t=>{if(b){const s=new Set(p);t?s.add(b.index):s.delete(b.index),f(s);try{await nN.put("/reconciliation-settings/10004/cleared-transactions",{fromDate:e,toDate:r,ledgerId:b._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?s.delete(b.index):s.add(b.index),f(s),alert("Error saving transaction status. Please try again.")}}x(!1),y(null)})(!p.has(b.index)),className:"px-4 py-2 text-white rounded-md ".concat(p.has(b.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:p.has(b.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},RP=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(()=>localStorage.getItem("reconcileGeneralAccount_statementAmount")||""),[p,f]=(0,t.useState)(new Set),[g,x]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),v=async t=>{try{const n=await nN.get("/reconciliation-settings/10001",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map(e=>e.ledgerId)),r=new Set;t.forEach((t,n)=>{e.has(t._id)&&r.add(n)}),f(r)}const s=localStorage.getItem("reconcileGeneralAccount_statementAmount");s?m(s):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&m(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},w=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},N=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),j=(()=>{if(0===a.length)return{book:0,open:0,misc:0};const e=a.filter((e,t)=>!p.has(t)),t=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),n=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),r=e.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),s=e.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),i=a.filter(e=>"Debit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0),o=a.filter(e=>"Credit"===e.type).reduce((e,t)=>e+Math.abs(t.amount||0),0);return{book:i-o,open:r+s,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling General Account"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:r,onChange:e=>s(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await nN.get("/ledger/account/10001",{params:{fromDate:e,toDate:r}});i(t.data),d(!0),await v(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:o,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:o?"Loading...":"Retrieve Data"}),(0,Rm.jsxs)("button",{onClick:()=>{if(!c||0===a.length)return void alert("Please retrieve data first before printing.");const e=a.filter((e,t)=>!p.has(t)),t=e.reduce((e,t)=>e+(t.amount||0),0),n=(parseFloat(h)||0)-t,s=window.open("","","width=900,height=700");s.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage General Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Bestway Real Estate Ltd. Logo" class="logo">\n            <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n            <div class="report-title">Current Account XXXX6067 GL#10001 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?N(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map(e=>{const t=e.description||e.narration||"";let n="-";const r=t.match(/Paid to: [^-]+ - (.+)$/);if(r)n=r[1].trim();else{const e=t.match(/Received from: [^-]+ - (.+)$/);if(e)n=e[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*[^-]+\s*-\s*(.+)$/);if(e)n=e[1].trim();else{const e=t.match(/- ([^-]+)$/);e&&(n=e[1].trim())}}}let s=e.payee||"-";if("-"===s){const e=t.match(/Received from:\s*([^-]+)/);if(e)s=e[1].trim();else{const e=t.match(/Paid to:\s*([^-]+)/);if(e)s=e[1].trim();else{const e=t.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);e&&(s=e[1].trim())}}}if("-"!==s){const n=t.toLowerCase().includes("paid to:"),r=t.toLowerCase().includes("received from:");if(n&&!s.toLowerCase().includes("paid to:"))s="Paid to: ".concat(s);else if(r&&!s.toLowerCase().includes("received from:"))s="Received from: ".concat(s);else if(!n&&!r){s="Credit"===e.type?"Paid to: ".concat(s):"Received from: ".concat(s)}}let a=e.tradeNumber||"-";return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(s,"</td>\n                        <td>").concat(w(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(N(e.amount||0),"</td>\n                      </tr>\n                    ")}).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(N(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(N(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Current Account Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(N(j.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(N(j.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),s.document.close(),s.focus(),s.print(),s.close()},disabled:!c||0===a.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,Rm.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.book)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.open)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N(j.misc)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,Rm.jsx)("button",{onClick:()=>{u(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?N(parseFloat(h)):"Click to enter"})]})]}),(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,Rm.jsxs)("span",{children:["Book: ",N(j.book)]}),(0,Rm.jsx)("span",{children:"+"}),(0,Rm.jsxs)("span",{children:["Open: ",N(j.open)]}),(0,Rm.jsx)("span",{children:"-"}),(0,Rm.jsxs)("span",{children:["Misc: ",N(j.misc)]}),(0,Rm.jsx)("span",{children:"="}),(0,Rm.jsxs)("span",{children:["Bank:"," ",N(j.book+j.open-j.misc)]})]}),h&&(0,Rm.jsxs)("div",{className:"mt-4 text-center",children:[(0,Rm.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,Rm.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(j.book+j.open-j.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:N(j.book+j.open-j.misc-parseFloat(h))})]})]})]})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Current Account Transactions (10001)"}),a.length>0&&(0,Rm.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-red-600",children:N(j.chequesCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-green-600",children:N(j.depositsCleared)})]}),(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,Rm.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:a.length})]})]})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{y(X(X({},e),{},{index:t})),x(!0)})(e,t),children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(e.date||e.transactionDate)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Rm.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N(Math.abs(e.amount||0))}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.has(t)?(0,Rm.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,Rm.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>m(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{try{await nN.put("/reconciliation-settings/10001/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileGeneralAccount_statementAmount",h),u(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&b&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:p.has(b.index)?"Unclear Transaction":"Clear Transaction"}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:p.has(b.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,Rm.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",N(Math.abs(b.amount||0))]}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",b.description||b.narration||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:()=>(async t=>{if(b){const s=new Set(p);t?s.add(b.index):s.delete(b.index),f(s);try{await nN.put("/reconciliation-settings/10001/cleared-transactions",{fromDate:e,toDate:r,ledgerId:b._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?s.delete(b.index):s.add(b.index),f(s),alert("Error saving transaction status. Please try again.")}}x(!1),y(null)})(!p.has(b.index)),className:"px-4 py-2 text-white rounded-md ".concat(p.has(b.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:p.has(b.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},HP=()=>{const e=localStorage.getItem("lastARNumber");let t=1e3;if(e){const n=e.match(/AR(\d+)/);n&&(t=parseInt(n[1])+1)}const n="AR".concat(t);return localStorage.setItem("lastARNumber",n),n},MP=()=>{eu();const[e,n]=(0,t.useState)("overview"),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)({arNumber:"",chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]}),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(null),[h,m]=(0,t.useState)(null),[p,f]=(0,t.useState)({accountNumber:"",accountName:"",amount:"",description:"",note:""}),g=()=>{const e=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]").filter(e=>"Cash Receipt"===e.type);e.sort((e,t)=>new Date(t.date)-new Date(e.date)),i(e)};(0,t.useEffect)(()=>{g()},[]);const x=()=>{l({arNumber:HP(),chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]}),s(!0)},b=["40100","43100","44100","50100","51100","52100","62101","62102","62103","62104","62105","63102","63103","63199","69101","70101","70103","70104","70105","70199","71102","71104","71199","72101","72102","72103","72199","75102","75103","75104","75105","75117","75199","76103","79101","90101"],y=Ip.filter(e=>b.includes(e.acct)).map(e=>({accountNumber:e.acct,accountName:e.description}));return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(()=>{switch(e){case"overview":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Accounts Receivable Overview"}),(0,Rm.jsx)("div",{className:"mb-6",children:(0,Rm.jsx)("button",{onClick:x,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold shadow-md",children:"Cash Receipt"})}),(0,Rm.jsxs)("div",{className:"mt-8",children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"AR Transactions"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"AR Number"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Type"})]})}),(0,Rm.jsx)("tbody",{children:a.length>0?a.map((e,t)=>(0,Rm.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(e=>{if(!e)return"-";const[t,n,r]=e.split("-");return t&&n&&r?new Date(parseInt(t),parseInt(n)-1,parseInt(r)).toLocaleDateString():new Date(e).toLocaleDateString()})(e.date)}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.reference||"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,Rm.jsxs)("div",{className:"text-sm",children:[(0,Rm.jsx)("div",{className:"font-medium",children:e.accountNumber}),(0,Rm.jsx)("div",{className:"text-gray-600",children:e.accountName})]})}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.debit>0?"$".concat(e.debit.toFixed(2)):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.credit>0?"$".concat(e.credit.toFixed(2)):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,Rm.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:e.type})})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:"No AR transactions found. Create a cash receipt to get started."})})})]})})]})]});case"invoices":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage Invoices"}),(0,Rm.jsx)("div",{className:"mb-6",children:(0,Rm.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create New Invoice"})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Invoice #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Client"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Issue Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Due Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Amount"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Status"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"INV-001"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"ABC Properties Ltd."}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Dec 15, 2024"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Jan 15, 2025"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$5,250.00"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,Rm.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs",children:"Pending"})}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:[(0,Rm.jsx)("button",{className:"text-blue-600 hover:text-blue-800 mr-2",children:"Edit"}),(0,Rm.jsx)("button",{className:"text-green-600 hover:text-green-800 mr-2",children:"Send"}),(0,Rm.jsx)("button",{className:"text-red-600 hover:text-red-800",children:"Delete"})]})]})})]})})]});case"payments":return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Payment Tracking"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Payment Methods"}),(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"Bank Transfer"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$35,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"Credit Card"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$8,500"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"Check"}),(0,Rm.jsx)("span",{className:"font-semibold",children:"$1,500"})]})]})]}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Payment Schedule"}),(0,Rm.jsxs)("div",{className:"space-y-3",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"This Week"}),(0,Rm.jsx)("span",{className:"font-semibold text-green-600",children:"$12,000"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"Next Week"}),(0,Rm.jsx)("span",{className:"font-semibold text-blue-600",children:"$8,500"})]}),(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("span",{children:"This Month"}),(0,Rm.jsx)("span",{className:"font-semibold text-purple-600",children:"$45,000"})]})]})]})]})]});default:return(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Accounts Receivable Dashboard"}),(0,Rm.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage your accounts receivable, track invoices, and monitor payments."}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("overview"),children:[(0,Rm.jsx)("div",{className:"text-4xl text-blue-900 mb-2",children:"\ud83d\udcca"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Overview"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"View summary and recent activity"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("invoices"),children:[(0,Rm.jsx)("div",{className:"text-4xl text-green-900 mb-2",children:"\ud83d\udcc4"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Manage Invoices"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Create and manage invoices"})]}),(0,Rm.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("payments"),children:[(0,Rm.jsx)("div",{className:"text-4xl text-purple-900 mb-2",children:"\ud83d\udcb0"}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Payment Tracking"}),(0,Rm.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Track payments and methods"})]})]})]})}})()})]}),r&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-4/5 max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsxs)("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"A/R Account Cheque Posting"}),(0,Rm.jsxs)("div",{className:"text-sm text-gray-600",children:["Today's Date: ",(new Date).toLocaleDateString()]})]}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-800",children:"Miscellaneous Cash Receipt"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AR Number:"}),(0,Rm.jsx)("input",{type:"text",value:o.arNumber,readOnly:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque Received From:"}),(0,Rm.jsx)("input",{type:"text",value:o.chequeReceivedFrom,onChange:e=>l(t=>X(X({},t),{},{chequeReceivedFrom:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter who the cheque was from"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque #:"}),(0,Rm.jsx)("input",{type:"text",value:o.chequeNumber,onChange:e=>l(t=>X(X({},t),{},{chequeNumber:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type:"}),(0,Rm.jsxs)("select",{value:o.paymentType,onChange:e=>l(t=>X(X({},t),{},{paymentType:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rm.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,Rm.jsx)("option",{value:"EFT",children:"EFT"}),(0,Rm.jsx)("option",{value:"Wire Transfer",children:"Wire Transfer"}),(0,Rm.jsx)("option",{value:"Bank Draft",children:"Bank Draft"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount:"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:o.amount,onChange:e=>(e=>{const t=(parseFloat(e)||0)+(parseFloat(o.taxIncluded)||0);l(n=>X(X({},n),{},{amount:e,accountAllocations:[X(X({},n.accountAllocations[0]),{},{amount:t.toFixed(2)}),X(X({},n.accountAllocations[1]),{},{amount:n.taxIncluded})]}))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Included:"}),(0,Rm.jsx)("input",{type:"number",step:"0.01",value:o.taxIncluded,onChange:e=>(e=>{const t=parseFloat(e)||0,n=(parseFloat(o.amount)||0)+t;l(r=>X(X({},r),{},{taxIncluded:e,accountAllocations:[X(X({},r.accountAllocations[0]),{},{amount:n.toFixed(2)}),X(X({},r.accountAllocations[1]),{},{amount:t.toFixed(2)})]}))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Receipt:"}),(0,Rm.jsx)("input",{type:"date",value:o.dateOfReceipt,onChange:e=>l(t=>X(X({},t),{},{dateOfReceipt:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account:"}),(0,Rm.jsx)("input",{type:"text",value:"General",readOnly:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"G/L Note:"}),(0,Rm.jsx)("input",{type:"text",value:o.glNote,onChange:e=>l(t=>X(X({},t),{},{glNote:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Rm.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:(0,Rm.jsx)("p",{className:"text-red-700 text-sm font-medium",children:"*** Funds Must Be Deposited In The General Bank Account ***"})})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h4",{className:"text-md font-semibold mb-3 text-gray-800",children:"General Ledger Account Allocations"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Acct #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"General Ledger Account Name"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Amount"})]})}),(0,Rm.jsx)("tbody",{children:o.accountAllocations.map((e,t)=>(0,Rm.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50 ".concat(0===t?"bg-blue-50":""," ").concat(h===t?"bg-yellow-100":""),onClick:()=>(e=>{m(e)})(t),children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.accountNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.accountName}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:(0,Rm.jsx)("input",{type:"number",step:"0.01",value:e.amount,readOnly:!0,className:"w-full text-right bg-transparent border-none focus:outline-none"})})]},t))})]})}),(0,Rm.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,Rm.jsx)("button",{onClick:()=>{null!==h&&(e=>{if(e<0||e>=o.accountAllocations.length)return void console.error("Invalid account index:",e);u(e);const t=o.accountAllocations[e];f({accountNumber:t.accountNumber,accountName:t.accountName,amount:t.amount,description:t.description||"",note:t.note||""}),d(!0)})(h)},disabled:null===h,className:"px-4 py-2 rounded-md font-medium ".concat(null!==h?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-gray-200 cursor-not-allowed"),children:"Edit"}),(0,Rm.jsx)("button",{onClick:()=>{u(null),f({accountNumber:"",accountName:"",amount:"",description:"",note:""}),d(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 font-medium",children:"Add"})]})]})]}),(0,Rm.jsx)("div",{className:"bg-gray-100 px-6 py-4 border-t border-gray-200 flex justify-end",children:(0,Rm.jsxs)("div",{className:"flex space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>{try{if(!o.chequeReceivedFrom||!o.amount)return void wh.error("Please fill in all required fields");const e=parseFloat(o.amount)||0;let t=0;if(o.accountAllocations.forEach((e,n)=>{n>1&&e.amount&&parseFloat(e.amount)>0&&(t+=parseFloat(e.amount))}),Math.abs(t-e)>.01)return void wh.error("Invalid amount: Total of user-added amounts must equal the main amount");const n=[],r=parseFloat(o.amount)||0,a=parseFloat(o.taxIncluded)||0,i=r+a;n.push({accountNumber:"10001",accountName:"Cash - Current Account",debit:i,credit:0,description:"Cash receipt from ".concat(o.chequeReceivedFrom),date:o.dateOfReceipt,reference:o.arNumber,type:"Cash Receipt"}),n.push({accountNumber:"23000",accountName:"HST Collected",debit:0,credit:a,description:"HST collected on cash receipt from ".concat(o.chequeReceivedFrom),date:o.dateOfReceipt,reference:o.arNumber,type:"Cash Receipt"}),o.accountAllocations.forEach((e,t)=>{t>1&&e.amount&&parseFloat(e.amount)>0&&n.push({accountNumber:e.accountNumber,accountName:e.accountName,debit:0,credit:parseFloat(e.amount),description:e.description||"Allocation from cash receipt",date:o.dateOfReceipt,reference:o.arNumber,type:"Cash Receipt"})});const c=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),d=[...n,...c];localStorage.setItem("trialBalanceTransactions",JSON.stringify(d)),console.log("Cash Receipt Transactions:",n),wh.success("Cash receipt of $".concat(i.toFixed(2)," successfully processed!")),g(),s(!1),l({arNumber:"",chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]})}catch(e){console.error("Error processing cash receipt:",e),wh.error("Error processing cash receipt. Please try again.")}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 font-medium",children:"Store"}),(0,Rm.jsx)("button",{onClick:()=>s(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium",children:"Exit"})]})})]})}),c&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-gray-100 rounded-lg shadow-xl w-96",children:[(0,Rm.jsx)("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,Rm.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Adding a Misc. Cash Receipt"})}),(0,Rm.jsx)("div",{className:"bg-white p-6",children:(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account:"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsxs)("select",{value:p.accountNumber,onChange:e=>(e=>{const t=y.find(t=>t.accountNumber===e);f(n=>X(X({},n),{},{accountNumber:e,accountName:t?t.accountName:""}))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rm.jsx)("option",{value:"",children:"Select Account"}),y.map(e=>(0,Rm.jsxs)("option",{value:e.accountNumber,children:[e.accountNumber," ",e.accountName]},e.accountNumber))]}),(0,Rm.jsx)("div",{className:"absolute right-3 top-2.5",children:(0,Rm.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description:"}),(0,Rm.jsx)("textarea",{value:p.description,onChange:e=>f(t=>X(X({},t),{},{description:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",rows:"3",placeholder:"Enter description"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount:"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"number",step:"0.01",value:p.amount,onChange:e=>f(t=>X(X({},t),{},{amount:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"}),(0,Rm.jsx)("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:"+/-"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note:"}),(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("textarea",{value:p.note,onChange:e=>f(t=>X(X({},t),{},{note:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Enter note"}),(0,Rm.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,Rm.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})}),(0,Rm.jsxs)("div",{className:"bg-white px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>{if(null!==A){const e=[...o.accountAllocations];if(e[A]=X(X({},p),{},{description:p.description,note:p.note}),0===A){const t=parseFloat(p.amount)||0,n=(.13*t).toFixed(2);l(r=>X(X({},r),{},{amount:t.toFixed(2),taxIncluded:n,accountAllocations:[X(X({},e[0]),{},{amount:t.toFixed(2)}),X(X({},e[1]),{},{amount:n})]}))}else l(t=>X(X({},t),{},{accountAllocations:e}))}else l(e=>X(X({},e),{},{accountAllocations:[...e.accountAllocations,X(X({},p),{},{description:p.description,note:p.note})]}));d(!1),u(null),m(null)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium underline",children:"Apply"}),(0,Rm.jsx)("button",{onClick:()=>d(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium underline",children:"Cancel"})]})]})})]})},VP=n.p+"static/media/logo1.0965a68ba8ed7cef07c6.jpg",zP=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)({}),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(""),h=(0,t.useRef)(),m=eu(),p=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,s]=e.split("-");t=n&&r&&s?new Date(parseInt(n),parseInt(r)-1,parseInt(s)):new Date(e)}return t.toLocaleDateString()};(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isFinanceAdmin")||m("/")},[m]);const f=async(e,t)=>{d(!0),u("");try{var r,a;const i=await nN.get("/ledger",{params:e&&t?{from:e,to:t}:{}});console.log("=== Trial Balance Debug ==="),console.log("Backend response:",i.data),console.log("Sample ledger entry:",i.data[0]),console.log("Sample entry date field:",null===(r=i.data[0])||void 0===r?void 0:r.date),console.log("Sample entry createdAt field:",null===(a=i.data[0])||void 0===a?void 0:a.createdAt);const o=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let l=o;if(e&&t){const n=new Date(e);n.setUTCHours(0,0,0,0);const r=new Date(t);r.setUTCHours(23,59,59,999),l=o.filter(e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=n&&t<=r})}const c=[...l,...i.data];c.sort((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n}),n(c);const d={};c.forEach(e=>{d[e.accountNumber]||(d[e.accountNumber]={debit:0,credit:0,transactions:[]}),d[e.accountNumber].debit+=e.debit||0,d[e.accountNumber].credit+=e.credit||0,d[e.accountNumber].transactions.push(e)}),Object.keys(d).forEach(e=>{d[e].transactions.sort((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n})}),s(d),e&&t&&bp.success("Trial balance loaded for ".concat(c.length," entries"))}catch(l){var i,o;n([]),s({});const e=(null===(i=l.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Failed to fetch ledger data";u(e),bp.error(e),console.error("Error fetching ledger:",l)}d(!1)};(0,t.useEffect)(()=>{f()},[]),(0,t.useEffect)(()=>{const e=()=>{console.log("Received refreshTrialBalance event, refreshing trial balance..."),f()};return window.addEventListener("refreshTrialBalance",e),()=>{window.removeEventListener("refreshTrialBalance",e)}},[]);return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"print:hidden",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"hidden print:block print:mb-6",children:[(0,Rm.jsx)("img",{src:VP,alt:"Company Logo",className:"mx-auto mb-2",style:{maxWidth:80,maxHeight:80}}),(0,Rm.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-1 text-center",children:"Bestway Real Estate Ltd., Brokerage"}),(0,Rm.jsx)("div",{className:"text-base font-semibold mb-1",children:"Trial Balance - Detail Balance"}),a&&o&&(0,Rm.jsxs)("div",{className:"text-gray-700 mb-2 text-sm",children:["From"," ",(0,Rm.jsx)("span",{className:"font-semibold",children:new Date(a).toLocaleDateString()})," ","to"," ",(0,Rm.jsx)("span",{className:"font-semibold",children:new Date(o).toLocaleDateString()})]})]}),(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4 mb-6 print:hidden",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:a,onChange:e=>i(e.target.value)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:o,onChange:e=>l(e.target.value)})]}),(0,Rm.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{a&&o?f(a,o):bp.error("Please select both from and to dates")},disabled:c||!a||!o,children:c?"Loading...":"Check Trial Balance"}),(0,Rm.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{window.print()},style:{marginLeft:8},children:"Print Report"})]}),A&&(0,Rm.jsx)("div",{className:"text-red-600 mb-4 print:hidden",children:A}),(0,Rm.jsx)("div",{className:"overflow-x-auto",ref:h,children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",children:"Account Number"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"200px",width:"200px"},children:"Account Name"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"80px",width:"80px"},children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"80px",width:"80px"},children:"Reference #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"300px",width:"300px"},children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Balance"})]})}),(0,Rm.jsx)("tbody",{children:Ip.map((e,n)=>{const s=r[e.acct]||{debit:0,credit:0,transactions:[]},a=0+s.debit-s.credit,i=s.transactions.length>0;return(0,Rm.jsxs)(t.Fragment,{children:[(0,Rm.jsxs)("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",children:e.acct}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"200px",width:"200px"},children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"300px",width:"300px"}}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==s.debit?s.debit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==s.credit?s.credit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==a?a.toFixed(2):"-"})]}),i&&(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"200px",width:"200px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs font-semibold",children:"Opening Balance"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"})]}),s.transactions.map(e=>(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"},children:(console.log("Transaction for date display:",e),console.log("Transaction date field:",e.date),console.log("Transaction createdAt field:",e.createdAt),console.log("Transaction type:",e.type),"Cash Receipt"===e.type?e.date?p(e.date):"-":e.apNumber&&e.date?(console.log("Using tx.date for AP transaction:",e.date),p(e.date)):e.chequeDate?(console.log("Using tx.chequeDate for display:",e.chequeDate),p(e.chequeDate)):e.date?(console.log("Using tx.date for display:",e.date),p(e.date)):(console.log("Using tx.createdAt as fallback:",e.createdAt),e.createdAt?p(e.createdAt):"-"))}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"},children:(()=>{if("Cash Receipt"===e.type)return e.reference&&"null"!==e.reference?e.reference:"-";if(e.apNumber)return e.apNumber;if("Journal Entry"===e.type)return console.log("Journal Entry found:",e),e.reference||"-";if(e.reference&&"Manual Journal Entry"!==e.reference)return e.reference;if(e.eftNumber)return"EFT#".concat(e.eftNumber);if(e.description&&e.description.includes("Trade #:")){const t=e.description.match(/Trade #:\s*(\d+)/i);if(t)return t[1]}return"-"})()}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"300px",width:"300px"},children:e.description}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs",children:e.debit?e.debit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs",children:e.credit?e.credit.toFixed(2):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"})]},e._id)),(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"300px",width:"300px"}}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-xs font-semibold",children:"Closing Balance"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"}),(0,Rm.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:0!==a?a.toFixed(2):"-"})]})]})]},e.acct)})})]})})]})})]})]})},KP=["23000","23001"],qP=["45100","43100","44100"],GP=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),A=(0,t.useRef)(),u=e=>{const t=a.filter(t=>e.includes(t.accountNumber));return console.log("HST Report - Filtering for accounts ".concat(e.join(", "),":"),{totalEntries:a.length,filteredCount:t.length,sampleEntries:t.slice(0,3)}),t},h=e=>{let t=0,n=0,r=0;return e.forEach(e=>{t+=e.debit||0,n+=e.credit||0,r+=(e.debit||0)-(e.credit||0)}),{debit:t,credit:n,net:r}},m=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(c){return console.error("Error formatting date:",e,c),e||"-"}},p=e=>{const t=e.date||e.createdAt||e.updatedAt||null;return console.log("getEntryDate for entry:",{accountNumber:e.accountNumber,description:e.description,date:e.date,createdAt:e.createdAt,selectedDate:t}),t};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:e,onChange:e=>n(e.target.value)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:e=>s(e.target.value)})]}),(0,Rm.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:async()=>{l(!0),d("");try{const t=await nN.get("/ledger",{params:{from:e,to:r}}),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let s=n;if(e&&r){const t=new Date(e);t.setUTCHours(0,0,0,0);const a=new Date(r);a.setUTCHours(23,59,59,999),s=n.filter(e=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return n>=t&&n<=a})}const a=[...s,...t.data];console.log("HST Report Debug:"),console.log("Backend data count:",t.data.length),console.log("LocalStorage transactions count:",n.length),console.log("Filtered localStorage transactions count:",s.length),console.log("Total allEntries count:",a.length),console.log("Sample backend entry:",t.data[0]),console.log("Sample localStorage entry:",s[0]),console.log("Date range:",{fromDate:e,toDate:r}),console.log("Sample entries with dates:",a.slice(0,5).map(e=>({accountNumber:e.accountNumber,description:e.description,date:e.date,createdAt:e.createdAt,formattedDate:m(p(e))}))),a.sort((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n}),i(a)}catch(t){d("Failed to fetch ledger data"),i([]),console.error("Error fetching ledger data:",t)}l(!1)},disabled:o||!e||!r,children:o?"Loading...":"Check HST Report"}),(0,Rm.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{window.print()},style:{marginLeft:8},children:"Print Report"})]}),c&&(0,Rm.jsx)("div",{className:"text-red-600 mb-4",children:c}),(0,Rm.jsxs)("div",{ref:A,className:"printable-hst-report",children:[(0,Rm.jsxs)("div",{className:"print-header mb-6 text-center",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Company Logo",className:"mx-auto mb-2",style:{maxWidth:120,maxHeight:120}}),(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Homelife Top Star Realty  Inc., Brokerage"}),(0,Rm.jsx)("div",{className:"text-lg font-semibold mb-1",children:"HST Report"}),e&&r&&(0,Rm.jsxs)("div",{className:"text-gray-700 mb-2",children:["From"," ",(0,Rm.jsx)("span",{className:"font-semibold",children:m(e)})," ","to"," ",(0,Rm.jsx)("span",{className:"font-semibold",children:m(r)})]})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("div",{className:"font-semibold mb-2",children:"HST Collected & Input Tax Credit"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border px-2 py-1",children:"Description"}),(0,Rm.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Net"})]})}),(0,Rm.jsxs)("tbody",{children:[u(KP).map((e,t)=>{var n,r;return(0,Rm.jsxs)("tr",{className:"text-sm",children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.description}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:m(p(e))}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(n=e.debit)||void 0===n?void 0:n.toFixed(2))||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(r=e.credit)||void 0===r?void 0:r.toFixed(2))||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:((e.debit||0)-(e.credit||0)).toFixed(2)})]},e._id||t)}),(0,Rm.jsxs)("tr",{className:"font-semibold bg-gray-100",children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",colSpan:2,children:"Totals"}),(()=>{const e=h(u(KP));return[(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.debit.toFixed(2)},"debit"),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.credit.toFixed(2)},"credit"),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.net.toFixed(2)},"net")]})()]})]})]})})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("div",{className:"font-semibold mb-2",children:"Desk Fee & Other Income"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border px-2 py-1",children:"Description"}),(0,Rm.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Debit"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Credit"}),(0,Rm.jsx)("th",{className:"border px-2 py-1 text-right",children:"Net"})]})}),(0,Rm.jsxs)("tbody",{children:[u(qP).map((e,t)=>{var n,r;return(0,Rm.jsxs)("tr",{className:"text-sm",children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.description}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:m(p(e))}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(n=e.debit)||void 0===n?void 0:n.toFixed(2))||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(r=e.credit)||void 0===r?void 0:r.toFixed(2))||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:((e.debit||0)-(e.credit||0)).toFixed(2)})]},e._id||t)}),(0,Rm.jsxs)("tr",{className:"font-semibold bg-gray-100",children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",colSpan:2,children:"Totals"}),(()=>{const e=h(u(qP));return[(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.debit.toFixed(2)},"debit"),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.credit.toFixed(2)},"credit"),(0,Rm.jsx)("td",{className:"border px-2 py-1 text-right",children:e.net.toFixed(2)},"net")]})()]})]})]})})]})]}),(0,Rm.jsx)("style",{children:"\n              @media print {\n                body * {\n                  visibility: hidden;\n                }\n                .printable-hst-report, .printable-hst-report * {\n                  visibility: visible;\n                }\n                .printable-hst-report {\n                  position: absolute;\n                  left: 0;\n                  top: 0;\n                  width: 100vw;\n                  background: white;\n                  padding: 0;\n                  margin: 0;\n                }\n                nav, .FinanceSidebar, .bg-white.p-6.rounded-lg.shadow-md > div:not(.printable-hst-report) {\n                  display: none !important;\n                }\n                .bg-white.p-6.rounded-lg.shadow-md {\n                  box-shadow: none !important;\n                  padding: 0 !important;\n                }\n                .print-header { display: block !important; }\n              }\n              .print-header { display: none; }\n            "})]})})]})]})},WP=()=>{const[e,n]=(0,t.useState)("real-estate-trust-payments"),[r,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),A=eu();(0,t.useEffect)(()=>{(async()=>{try{const e=(await nN.get("/finance-transactions")).data;s(e.filter(e=>"CommissionTransfer"===e.type)),i(e.filter(e=>"BalanceOfDeposit"===e.type))}catch(e){console.error("Error fetching finance transactions:",e)}})(),(async()=>{try{const e=await nN.get("/commission-trust-eft");l(e.data)}catch(e){console.error("Error fetching commission trust EFTs:",e)}})(),(async()=>{try{const e=await nN.get("/general-account-eft");d(e.data)}catch(e){console.error("Error fetching general account EFTs:",e)}})()},[]);const u=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>A("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Finance Database"}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("real-estate-trust-payments"),children:"Real Estate Trust Payments"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-trust-payments"),children:"Commission Trust Payments"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust-ledger"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-trust-ledger"),children:"Commission Trust Ledger"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("general-account-payments"),children:"General Account Payments (A/P) Expenses"})]})}),(()=>{switch(e){case"real-estate-trust-payments":return(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Real Estate Trust Payments"}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Transfer to General/Commission Trust"}),(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Date"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount of Cheque"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Written To"})]})}),(0,Rm.jsx)("tbody",{children:r.map(e=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:u(e.chequeDate)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.amount.toFixed(2)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.chequeWrittenTo})]},e._id))})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Balance of Deposit"}),(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Date"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount of Cheque"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Written To"})]})}),(0,Rm.jsx)("tbody",{children:a.map(e=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:u(e.chequeDate)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.amount.toFixed(2)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.chequeWrittenTo})]},e._id))})]})]})]});case"commission-trust-payments":return(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Commission Trust Payments"}),(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Description"})]})}),(0,Rm.jsx)("tbody",{children:0===o.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No Commission Trust Payments found."})}):o.map(e=>{var t,n;return(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:u(e.date)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:ZS(e.type)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient||e.agentName||"-"}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:(null===(n=e.tradeId)||void 0===n?void 0:n.tradeNumber)||"-"}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"})]},e._id)})})]})]});case"commission-trust-ledger":return(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Commission Trust Ledger"}),(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Description"})]})}),(0,Rm.jsx)("tbody",{children:0===o.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No Commission Trust Ledger found."})}):o.map(e=>{var t,n;return(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:u(e.date)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:ZS(e.type)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient||e.agentName||"-"}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:(null===(n=e.tradeId)||void 0===n?void 0:n.tradeNumber)||"-"}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"})]},e._id)})})]})]});case"general-account-payments":return(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"General Account Payments (A/P) Expenses"}),(0,Rm.jsxs)("table",{className:"min-w-full bg-white",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Expense Category"}),(0,Rm.jsx)("th",{className:"py-2 px-4 border-b",children:"Invoice #"})]})}),(0,Rm.jsx)("tbody",{children:0===c.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No General Account Payments found."})}):c.map(e=>{var t;return(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:u(e.date)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:ZS(e.type)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.expenseCategory||"-"}),(0,Rm.jsx)("td",{className:"py-2 px-4 border-b",children:e.invoiceNumber||"-"})]},e._id)})})]})]});default:return null}})()]})]})]})},YP=[{value:"AB",label:"Alberta"},{value:"BC",label:"British Columbia"},{value:"MB",label:"Manitoba"},{value:"NB",label:"New Brunswick"},{value:"NL",label:"Newfoundland and Labrador"},{value:"NS",label:"Nova Scotia"},{value:"NT",label:"Northwest Territories"},{value:"NU",label:"Nunavut"},{value:"ON",label:"Ontario"},{value:"PE",label:"Prince Edward Island"},{value:"QC",label:"Quebec"},{value:"SK",label:"Saskatchewan"},{value:"YT",label:"Yukon"}],XP=e=>{let{onVendorAdded:n,onClose:r,editingVendor:s}=e;const[a,i]=(0,t.useState)({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[A,u]=(0,t.useState)("");(0,t.useEffect)(()=>{s?i({vendorNumber:s.vendorNumber,firstName:s.firstName,lastName:s.lastName,streetNumber:s.streetNumber||"",streetName:s.streetName||"",unit:s.unit||"",postalCode:s.postalCode||"",city:s.city||"",province:s.province||"",phoneNumber:s.phoneNumber,companyName:s.companyName||""}):h()},[s]);const h=async()=>{try{const e=await nN.get("/vendors/next-vendor-no");i(t=>X(X({},t),{},{vendorNumber:e.data.nextVendorNo}))}catch(c){console.error("Error fetching next vendor number:",c),bp.error("Failed to fetch vendor number")}},m=e=>{const{name:t,value:n}=e.target;i(e=>X(X({},e),{},{[t]:n}))},p=()=>{r&&r()};return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:s?"Edit Vendor Info":"Add Vendor Info"}),(0,Rm.jsx)("button",{onClick:p,className:"text-gray-500 hover:text-gray-700",children:(0,Rm.jsx)(Dm,{size:20})})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0),d(""),u("");try{let e;s?(e=await nN.put("/vendors/".concat(s._id),a),bp.success("Vendor updated successfully!")):(e=await nN.post("/vendors",a),bp.success("Vendor added successfully!")),n&&n(e.data),setTimeout(()=>{r&&r()},2e3)}catch(c){var t,i;console.error("Error saving vendor:",c),bp.error((null===(t=c.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Failed to save vendor")}finally{l(!1)}},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Number"}),(0,Rm.jsx)("input",{type:"number",name:"vendorNumber",value:a.vendorNumber,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!s})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Rm.jsx)("input",{type:"text",name:"companyName",value:a.companyName,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street # *"}),(0,Rm.jsx)("input",{type:"text",name:"streetNumber",value:a.streetNumber,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name *"}),(0,Rm.jsx)("input",{type:"text",name:"streetName",value:a.streetName,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Rm.jsx)("input",{type:"text",name:"unit",value:a.unit,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:a.postalCode,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:a.city,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),(0,Rm.jsxs)("select",{name:"province",value:a.province,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rm.jsx)("option",{value:"",children:"Select a province"}),YP.map(e=>(0,Rm.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,Rm.jsx)("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:e=>KS(e,i),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,Rm.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?"Saving...":(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Im,{className:"mr-2"}),s?"Update Vendor":"Save Vendor"]})}),(0,Rm.jsx)("button",{type:"button",onClick:p,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})})},JP=e=>{let{onVendorAdded:n,editingVendor:r}=e;const[s,a]=(0,t.useState)({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),[i,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{r?a({vendorNumber:r.vendorNumber,firstName:r.firstName,lastName:r.lastName,streetNumber:r.streetNumber||"",streetName:r.streetName||"",unit:r.unit||"",postalCode:r.postalCode||"",city:r.city||"",province:r.province||"",phoneNumber:r.phoneNumber,companyName:r.companyName||""}):l()},[r]);const l=async()=>{try{const e=await nN.get("/vendors/next-vendor-no");a(t=>X(X({},t),{},{vendorNumber:e.data.nextVendorNo}))}catch(e){console.error("Error fetching next vendor number:",e),bp.error("Failed to fetch vendor number")}},c=e=>{const{name:t,value:n}=e.target;a(e=>X(X({},e),{},{[t]:n}))};return(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{let e;r?(e=await nN.put("/vendors/".concat(r._id),s),bp.success("Vendor updated successfully!")):(e=await nN.post("/vendors",s),bp.success("Vendor added successfully!")),n&&n(e.data),r||(a({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),await l())}catch(c){var t,i;console.error("Error saving vendor:",c),bp.error((null===(t=c.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Failed to save vendor")}finally{o(!1)}},className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Number"}),(0,Rm.jsx)("input",{type:"number",name:"vendorNumber",value:s.vendorNumber,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!r})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Rm.jsx)("input",{type:"text",name:"companyName",value:s.companyName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:s.firstName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:s.lastName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street # *"}),(0,Rm.jsx)("input",{type:"text",name:"streetNumber",value:s.streetNumber,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name *"}),(0,Rm.jsx)("input",{type:"text",name:"streetName",value:s.streetName,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,Rm.jsx)("input",{type:"text",name:"unit",value:s.unit,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,Rm.jsx)("input",{type:"text",name:"postalCode",value:s.postalCode,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,Rm.jsx)("input",{type:"text",name:"city",value:s.city,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),(0,Rm.jsxs)("select",{name:"province",value:s.province,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rm.jsx)("option",{value:"",children:"Select a province"}),YP.map(e=>(0,Rm.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,Rm.jsx)("input",{type:"tel",name:"phoneNumber",value:s.phoneNumber,onChange:e=>KS(e,a),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsx)("div",{})]}),(0,Rm.jsx)("div",{className:"flex space-x-3 pt-4",children:(0,Rm.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?"Saving...":(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsx)(Im,{className:"mr-2"}),r?"Update Vendor":"Save Vendor"]})})})]})},ZP=()=>{var e;const[n,r]=(0,t.useState)("list"),[s,a]=(0,t.useState)([]),[i,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(null),[f,g]=(0,t.useState)(null),[x,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>{y()},[]);const y=async()=>{try{o(!0);const e=(await nN.get("/vendors")).data.sort((e,t)=>e.vendorNumber-t.vendorNumber);a(e),A(e),o(!1)}catch(e){console.error("Error fetching vendors:",e),o(!1),bp.error("Failed to fetch vendors")}},v=()=>{if(!l.trim())return void A([...s].sort((e,t)=>e.vendorNumber-t.vendorNumber));const e=s.filter(e=>e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.vendorNumber.toString().includes(l)||e.phoneNumber.includes(l)||e.companyName&&e.companyName.toLowerCase().includes(l.toLowerCase())||e.city&&e.city.toLowerCase().includes(l.toLowerCase())||e.streetName&&e.streetName.toLowerCase().includes(l.toLowerCase()));A(e)},w=e=>{if(m)a(s.map(t=>t._id===m._id?e:t)),A(d.map(t=>t._id===m._id?e:t)),p(null);else{const t=[...s,e].sort((e,t)=>e.vendorNumber-t.vendorNumber);a(t),A(t)}h(!1),bp.success(m?"Vendor updated successfully!":"Vendor added successfully!")};return(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"border-b border-gray-200",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Rm.jsxs)("div",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("list"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("list"),children:"List"}),(0,Rm.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info"),children:"Info Form"})]})})}),(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["list"===n&&(0,Rm.jsxs)("div",{className:"p-6",children:[(0,Rm.jsx)("div",{className:"mb-6",children:(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsx)("div",{className:"flex-1 max-w-md",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)("input",{type:"text",placeholder:"Search by vendor name, number, or phone...",value:l,onChange:e=>{c(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&v()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,Rm.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Rm.jsx)(Tm,{className:"h-4 w-4 text-gray-400"})})]})}),(0,Rm.jsx)("button",{onClick:v,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,Rm.jsx)("button",{onClick:()=>{c(""),A([...s].sort((e,t)=>e.vendorNumber-t.vendorNumber))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]})}),(0,Rm.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{style:{backgroundColor:"#1e3a8a"},className:"text-white",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Vendor #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Company Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"City"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Phone Number"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"Loading vendors..."})}):0===d.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l?"No vendors found matching your search.":"No vendors found."})}):d.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>g(e),children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.vendorNumber}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.companyName||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firstName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.lastName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.city}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phoneNumber})]},e._id))})]})})})]}),"info"===n&&(0,Rm.jsx)("div",{className:"p-6",children:(0,Rm.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add New Vendor"}),(0,Rm.jsx)("div",{className:"w-full",children:(0,Rm.jsx)(JP,{onVendorAdded:w,editingVendor:null})})]})})]}),f&&!u&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 relative",children:[(0,Rm.jsx)("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:()=>g(null),children:(0,Rm.jsx)(Dm,{size:20})}),(0,Rm.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Vendor Details"}),(0,Rm.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Vendor Number:"})," ",f.vendorNumber]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Company Name:"})," ",f.companyName||"N/A"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"First Name:"})," ",f.firstName]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Last Name:"})," ",f.lastName]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Street #:"})," ",f.streetNumber]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Street Name:"})," ",f.streetName]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Unit:"})," ",f.unit||"N/A"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"City:"})," ",f.city]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Province:"})," ",(null===(e=YP.find(e=>e.value===f.province))||void 0===e?void 0:e.label)||f.province]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Postal Code:"})," ",f.postalCode]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("strong",{children:"Phone Number:"})," ",f.phoneNumber]})]}),(0,Rm.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,Rm.jsxs)("button",{className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",onClick:()=>(p(f),h(!0),void g(null)),children:[(0,Rm.jsx)(pm,{className:"inline mr-2"})," Edit"]}),(0,Rm.jsxs)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>b(!0),children:[(0,Rm.jsx)(Lm,{className:"inline mr-2"})," Delete"]})]}),x&&(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded",children:[(0,Rm.jsx)("div",{className:"mb-2 text-red-700 font-semibold",children:"Are you sure you want to delete this vendor?"}),(0,Rm.jsxs)("div",{className:"flex space-x-2",children:[(0,Rm.jsx)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>(async e=>{try{await nN.delete("/vendors/".concat(e));const t=s.filter(t=>t._id!==e);a(t),A(t),g(null),b(!1),bp.success("Vendor deleted successfully!")}catch(t){console.error("Error deleting vendor:",t),bp.error("Failed to delete vendor")}})(f._id),children:"Yes, Delete"}),(0,Rm.jsx)("button",{className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",onClick:()=>b(!1),children:"Cancel"})]})]})]})}),u&&(0,Rm.jsx)(XP,{onVendorAdded:w,onClose:()=>{h(!1),p(null)},editingVendor:m})]})},$P=()=>{var e;const[n,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),x=eu();(0,t.useEffect)(()=>{b()},[]);const b=async()=>{try{a(!0);const e=await nN.get("/vendors");r(e.data),o("")}catch(i){console.error("Error fetching vendors:",i),o("Failed to fetch vendors")}finally{a(!1)}},y=n.filter(e=>e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.vendorNumber.toString().includes(l)||e.phoneNumber.includes(l)||e.companyName&&e.companyName.toLowerCase().includes(l.toLowerCase())||e.city&&e.city.toLowerCase().includes(l.toLowerCase())||e.streetName&&e.streetName.toLowerCase().includes(l.toLowerCase()));return s?(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Rm.jsx)("div",{className:"text-xl text-gray-600",children:"Loading vendors..."})})]}):(0,Rm.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,Rm.jsx)("div",{className:"flex justify-end mb-4",children:(0,Rm.jsx)("button",{onClick:()=>x("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,Rm.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:"Vendor Information Database"}),(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Vendors"}),(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,Rm.jsxs)("div",{className:"relative w-full md:w-1/3",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Search vendors by name, number, or phone...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[(0,Rm.jsx)(Sm,{className:"mr-2"}),"Add Vendor"]})]}),i&&(0,Rm.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:i}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,Rm.jsx)("thead",{style:{backgroundColor:"#1e3a8a"},className:"text-white",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Vendor #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Company Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"First Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Last Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"City"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Phone Number"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===y.length?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l?"No vendors found matching your search.":"No vendors found."})}):y.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>p(e),children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-b",children:e.vendorNumber}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.companyName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.firstName}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.lastName}),(0,Rm.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 border-b",children:(0,Rm.jsx)("div",{className:"max-w-xs truncate",title:e.city,children:e.city})}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.phoneNumber})]},e._id))})]})})]})]}),m&&!d&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 relative",children:[(0,Rm.jsx)("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:()=>p(null),children:(0,Rm.jsx)(Dm,{size:20})}),(0,Rm.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Vendor Details"}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Vendor Number:"})," ",m.vendorNumber]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Company Name:"})," ",m.companyName]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"First Name:"})," ",m.firstName]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Last Name:"})," ",m.lastName]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Street #:"})," ",m.streetNumber]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Street Name:"})," ",m.streetName]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Unit:"})," ",m.unit||"N/A"]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"City:"})," ",m.city]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Province:"})," ",(null===(e=YP.find(e=>e.value===m.province))||void 0===e?void 0:e.label)||m.province]}),(0,Rm.jsxs)("div",{className:"mb-2",children:[(0,Rm.jsx)("strong",{children:"Postal Code:"})," ",m.postalCode]}),(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("strong",{children:"Phone Number:"})," ",m.phoneNumber]}),(0,Rm.jsxs)("div",{className:"flex space-x-4",children:[(0,Rm.jsxs)("button",{className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",onClick:()=>(h(m),A(!0),void p(null)),children:[(0,Rm.jsx)(pm,{className:"inline mr-2"})," Edit"]}),(0,Rm.jsxs)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>g(!0),children:[(0,Rm.jsx)(Lm,{className:"inline mr-2"})," Delete"]})]}),f&&(0,Rm.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded",children:[(0,Rm.jsx)("div",{className:"mb-2 text-red-700 font-semibold",children:"Are you sure you want to delete this vendor?"}),(0,Rm.jsxs)("div",{className:"flex space-x-2",children:[(0,Rm.jsx)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>(async e=>{try{await nN.delete("/vendors/".concat(e)),r(n.filter(t=>t._id!==e)),p(null),g(!1)}catch(i){console.error("Error deleting vendor:",i),alert("Failed to delete vendor")}})(m._id),children:"Yes, Delete"}),(0,Rm.jsx)("button",{className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",onClick:()=>g(!1),children:"Cancel"})]})]})]})}),d&&(0,Rm.jsx)(XP,{onVendorAdded:e=>{u?(r(n.map(t=>t._id===u._id?e:t)),h(null)):r([...n,e]),A(!1)},onClose:()=>{A(!1),h(null)},editingVendor:u})]})},eU=[{id:"income",label:"Income Statement"},{id:"balance",label:"Balance Sheet"}];function tU(){const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),A=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(e||0);return(0,Rm.jsxs)("div",{children:[!a&&(0,Rm.jsxs)("form",{className:"flex items-end space-x-4 mb-6",onSubmit:async t=>{if(t.preventDefault(),e&&r){d(!0);try{const t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),n=new Date(e);n.setUTCHours(0,0,0,0);const s=new Date(r);s.setUTCHours(23,59,59,999);const a=t.filter(e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=n&&t<=s});console.log("Income Statement Frontend Debug:"),console.log("Total localStorage transactions:",t.length),console.log("Filtered localStorage transactions:",a.length),console.log("Date range:",e,"to",r),console.log("Sample localStorage transaction:",t[0]);const o=await nN.post("/transactions/income-statement",{localStorageTransactions:a},{params:{from:e,to:r}});console.log("Fetched income statement:",o.data),console.log("Statement items:",o.data.statement),console.log("Subtotal items:",o.data.statement.filter(e=>"subtotal"===e.type)),l(o.data),i(!0)}catch(n){console.error("Error fetching income statement:",n)}finally{d(!1)}}},children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:e=>s(e.target.value),required:!0})]}),(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",disabled:c,children:c?"Loading...":"Proceed"})]}),a&&o&&(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4 no-print",children:[(0,Rm.jsx)("button",{onClick:()=>i(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u2190 Back"}),(0,Rm.jsx)("button",{onClick:()=>{const t=window.open("","_blank"),n=o.statement.filter(e=>"header"===e.type||("subtotal"===e.type||("line"!==e.type||0!==e.value&&null!==e.value&&void 0!==e.value))),s='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Income Statement - Homelife Top Star Realty Inc., Brokerage</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.6;\n              color: #000000;\n              font-size: 9px;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 50px;\n              height: 50px;\n              margin-bottom: 8px;\n            }\n            .company-name {\n              font-size: 16px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .report-title {\n              font-size: 14px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 8px;\n            }\n            .period-info {\n              font-size: 11px;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n              font-size: 9px;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 6px 8px;\n              text-align: left;\n              line-height: 1.4;\n              word-spacing: 0.1em;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n              font-size: 9px;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .header-row {\n              font-weight: bold;\n              background-color: #f0f0f0;\n              font-size: 10px;\n              padding: 8px;\n            }\n            .subtotal-row {\n              font-weight: bold;\n              border-top: 1px solid #000000;\n              font-size: 10px;\n              padding: 6px 8px;\n            }\n            .subtotal-row td {\n              border-top: 1px solid #000000;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n                font-size: 9px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n              table {\n                font-size: 9px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">HOMELIFE TOP STAR REALTY INC., BROKERAGE</div>\n            <div class="report-title">Income Statement</div>\n            <div class="period-info">Period: '.concat(e," to ").concat(r,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Acct. #</th>\n                  <th>Description</th>\n                  <th class="amount-column">Amount</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(n.map((e,t)=>"header"===e.type?'\n                        <tr class="header-row">\n                          <td colspan="3" style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.label,"\n                          </td>\n                        </tr>\n                      "):"line"===e.type?'\n                        <tr>\n                          <td style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.acct,'\n                          </td>\n                          <td style="padding-left: 8px;">').concat(e.label,'</td>\n                          <td class="amount-column">').concat(A(e.value),"</td>\n                        </tr>\n                      "):"subtotal"===e.type?'\n                        <tr class="subtotal-row">\n                          <td colspan="2" style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.label,'\n                          </td>\n                          <td class="amount-column">').concat(A(e.value),"</td>\n                        </tr>\n                      "):"").join(""),"\n              </tbody>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(s),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},500)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Print Statement"})]}),(0,Rm.jsx)("img",{src:Qm,alt:"Company Logo",className:"print-logo"}),(0,Rm.jsxs)("div",{className:"text-center mb-2",children:[(0,Rm.jsx)("div",{className:"text-2xl font-bold",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("div",{className:"text-lg font-semibold mt-1",children:"Income Statement"}),(0,Rm.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e," to ",r]})]}),(0,Rm.jsxs)("table",{className:"w-full text-left border-t border-b border-gray-300 mt-6",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-2 w-32",children:"Acct. #"}),(0,Rm.jsx)("th",{className:"py-2 px-2",children:"Description"}),(0,Rm.jsx)("th",{className:"py-2 px-2 w-32 text-right",children:"Amount"})]})}),(0,Rm.jsx)("tbody",{className:"text-sm",children:(()=>{const e=o.statement.filter(e=>"header"===e.type||("subtotal"===e.type||("line"!==e.type||0!==e.value&&null!==e.value&&void 0!==e.value)));return console.log("Filtered items for rendering:",e.length),console.log("Filtered subtotals:",e.filter(e=>"subtotal"===e.type)),e.map((e,t)=>"header"===e.type?(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:3,style:{paddingLeft:"".concat(16*(e.indent||0),"px"),fontWeight:"bold"},children:e.label})},t):"line"===e.type?(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{style:{paddingLeft:"".concat(16*(e.indent||0),"px")},children:e.acct}),(0,Rm.jsx)("td",{children:e.label}),(0,Rm.jsx)("td",{className:"text-right",children:A(e.value)})]},t):"subtotal"===e.type?(0,Rm.jsxs)("tr",{style:{fontWeight:"bold"},children:[(0,Rm.jsx)("td",{colSpan:2,style:{paddingLeft:"".concat(16*(e.indent||0),"px")},children:e.label}),(0,Rm.jsx)("td",{className:"text-right",children:A(e.value)})]},t):null)})()})]})]})]})}function nU(){const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)({}),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(""),h=e=>void 0===e||null===e?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),m=e=>{const t=o[e];return t?h(t.balance):"-"},p=e=>e.reduce((e,t)=>{const n=o[t];return n?e+n.balance:e},0);return(0,Rm.jsxs)("div",{children:[!a&&(0,Rm.jsxs)("form",{className:"flex items-end space-x-4 mb-6",onSubmit:async t=>{if(t.preventDefault(),e&&r){d(!0),u("");try{const t=await nN.get("/ledger",{params:{from:e,to:r}}),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),s=new Date(e);s.setUTCHours(0,0,0,0);const a=new Date(r);a.setUTCHours(23,59,59,999);const o=n.filter(e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=s&&t<=a}),c=[...o,...t.data];console.log("Balance Sheet Debug:"),console.log("Backend entries:",t.data.length),console.log("LocalStorage entries:",o.length),console.log("Total entries:",c.length),console.log("Sample entries:",c.slice(0,5));const d={};c.forEach(e=>{const t=e.accountNumber;d[t]||(d[t]={debit:0,credit:0,balance:0}),d[t].debit+=e.debit||0,d[t].credit+=e.credit||0}),Object.keys(d).forEach(e=>{d[e].balance=d[e].debit-d[e].credit}),console.log("Calculated account balances:",d),l(d),i(!0)}catch(n){u("Failed to fetch balance data"),console.error("Error fetching balance data:",n)}finally{d(!1)}}},children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To"}),(0,Rm.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:e=>s(e.target.value),required:!0})]}),(0,Rm.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:c,children:c?"Loading...":"Proceed"})]}),A&&(0,Rm.jsx)("div",{className:"text-red-600 mb-4",children:A}),a&&(0,Rm.jsxs)("div",{children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4 no-print",children:[(0,Rm.jsx)("button",{onClick:()=>i(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u2190 Back"}),(0,Rm.jsx)("button",{onClick:()=>{const t=window.open("","_blank"),n='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Balance Sheet - Homelife Top Star Realty Inc., Brokerage</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.6;\n              color: #000000;\n              font-size: 9px;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 50px;\n              height: 50px;\n              margin-bottom: 8px;\n            }\n            .company-name {\n              font-size: 16px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .report-title {\n              font-size: 14px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 8px;\n            }\n            .period-info {\n              font-size: 11px;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n              font-size: 9px;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 6px 8px;\n              text-align: left;\n              line-height: 1.4;\n              word-spacing: 0.1em;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n              font-size: 9px;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .header-row {\n              font-weight: bold;\n              background-color: #f0f0f0;\n              font-size: 10px;\n              padding: 8px;\n            }\n            .subtotal-row {\n              font-weight: bold;\n              border-top: 1px solid #000000;\n              font-size: 10px;\n              padding: 6px 8px;\n            }\n            .subtotal-row td {\n              border-top: 1px solid #000000;\n            }\n            .page-break {\n              page-break-before: always;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n                font-size: 9px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n              table {\n                font-size: 9px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">HOMELIFE TOP STAR REALTY INC., BROKERAGE</div>\n            <div class="report-title">Balance Sheet</div>\n            <div class="period-info">Period: '.concat(e," to ").concat(r,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Acct. #</th>\n                  <th>Description</th>\n                  <th class="amount-column">Amount</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat((()=>{const e=e=>{const t=o[e];return t?h(t.balance):"-"},t=e=>e.reduce((e,t)=>{const n=o[t];return n?e+n.balance:e},0);return'\n                    \x3c!-- ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">ASSETS</td>\n                    </tr>\n                    \x3c!-- CURRENT ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">CURRENT ASSETS</td>\n                    </tr>\n                    \x3c!-- CASH --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">CASH</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10001</td>\n                      <td style="padding-left: 8px;">CASH - CURRENT ACCOUNT</td>\n                      <td class="amount-column">'.concat(e("10001"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10004</td>\n                      <td style="padding-left: 8px;">CASH - COMMISSION TRUST ACCOUNT</td>\n                      <td class="amount-column">').concat(e("10004"),'</td>\n                    </tr>\n                    \x3c!-- NOTES RECEIVABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">NOTES RECEIVABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">11000</td>\n                      <td style="padding-left: 8px;">NOTES RECEIVABLES</td>\n                      <td class="amount-column">').concat(e("11000"),'</td>\n                    </tr>\n                    \x3c!-- ACCOUNTS RECEIVABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">ACCOUNTS RECEIVABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12100</td>\n                      <td style="padding-left: 8px;">A/R - AGT\'S RECOVERABLE- GEN EXP</td>\n                      <td class="amount-column">').concat(e("12100"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12500</td>\n                      <td style="padding-left: 8px;">A/R - OTHER</td>\n                      <td class="amount-column">').concat(e("12500"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12600</td>\n                      <td style="padding-left: 8px;">LOAN - HOMELIFE TOP STAR</td>\n                      <td class="amount-column">').concat(e("12600"),'</td>\n                    </tr>\n                    \x3c!-- PREPAID EXPENSES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">PREPAID EXPENSES</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">15000</td>\n                      <td style="padding-left: 8px;">PREPAID EXPENSES</td>\n                      <td class="amount-column">').concat(e("15000"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL CURRENT ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL CURRENT ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["10001","10004","11000","12100","12500","12600","12300","15000"])),'</td>\n                    </tr>\n                    \x3c!-- FIXED ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">FIXED ASSETS</td>\n                    </tr>\n                    \x3c!-- OFFICE EQUIPMENT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">OFFICE EQUIPMENT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16030</td>\n                      <td style="padding-left: 8px;">OFFICE FURNITURE</td>\n                      <td class="amount-column">').concat(e("16030"),'</td>\n                    </tr>\n                    \x3c!-- COMPUTER EQUIPMENT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">COMPUTER EQUIPMENT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16060</td>\n                      <td style="padding-left: 8px;">COMPUTER SOFTWARE</td>\n                      <td class="amount-column">').concat(e("16060"),'</td>\n                    </tr>\n                    \x3c!-- LEASEHOLD IMPROVEMENTS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">LEASEHOLD IMPROVEMENTS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16080</td>\n                      <td style="padding-left: 8px;">SIGNS</td>\n                      <td class="amount-column">').concat(e("16080"),'</td>\n                    </tr>\n                    \x3c!-- FRANCHISE COSTS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">FRANCHISE COSTS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16090</td>\n                      <td style="padding-left: 8px;">FRANCHISE COST</td>\n                      <td class="amount-column">').concat(e("16090"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL FIXED ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL FIXED ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["16060","16080","16090","16030"])),'</td>\n                    </tr>\n                    \x3c!-- ACCUMULATED DEPRECIATION --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">ACCUMULATED DEPRECIATION</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17060</td>\n                      <td style="padding-left: 8px;">ACC. DEPR. - COMP. SOFTWARE</td>\n                      <td class="amount-column">').concat(e("17060"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17080</td>\n                      <td style="padding-left: 8px;">ACC. DEPR. - SIGNS</td>\n                      <td class="amount-column">').concat(e("17080"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17090</td>\n                      <td style="padding-left: 8px;">ACC. AMOR. - FRANCHISE COSTS</td>\n                      <td class="amount-column">').concat(e("17090"),'</td>\n                    </tr>\n                    \x3c!-- NET FIXED ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">NET FIXED ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["16060","16080","16090","16030"])-t(["17060","17080","17090"])),'</td>\n                    </tr>\n                    \x3c!-- NET TRUST FUNDS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">NET TRUST FUNDS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10002</td>\n                      <td style="padding-left: 8px;">CASH - TRUST</td>\n                      <td class="amount-column">').concat(e("10002"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21300</td>\n                      <td style="padding-left: 8px;">LIABILITY FOR TRUST FUNDS HELD</td>\n                      <td class="amount-column">').concat(e("21300"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["10001","10004","11000","12100","12500","12600","12300","15000"])+t(["16060","16080","16090"])-t(["17060","17080","17090"])+t(["10002","21300"])),'</td>\n                    </tr>\n                    \x3c!-- Page break for liabilities/equity --\x3e\n                    <tr class="page-break">\n                      <td colspan="3"></td>\n                    </tr>\n                    \x3c!-- LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">LIABILITIES</td>\n                    </tr>\n                    \x3c!-- CURRENT LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">CURRENT LIABILITIES</td>\n                    </tr>\n                    \x3c!-- BANK OVERDRAFT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">BANK OVERDRAFT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">20000</td>\n                      <td style="padding-left: 8px;">BANK OPERATING LINE</td>\n                      <td class="amount-column">').concat(e("20000"),'</td>\n                    </tr>\n                    \x3c!-- ACCOUNTS PAYABLE & ACCRUALS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">ACCOUNTS PAYABLE & ACCRUALS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21000</td>\n                      <td style="padding-left: 8px;">ACCOUNTS PAYABLE</td>\n                      <td class="amount-column">').concat(e("21000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">22000</td>\n                      <td style="padding-left: 8px;">ACCRUED EXPENSES</td>\n                      <td class="amount-column">').concat(e("22000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23000</td>\n                      <td style="padding-left: 8px;">HST COLLECTED</td>\n                      <td class="amount-column">').concat(e("23000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23001</td>\n                      <td style="padding-left: 8px;">HST INPUT TAX CREDIT</td>\n                      <td class="amount-column">').concat(e("23001"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23004</td>\n                      <td style="padding-left: 8px;">HST NET PAYABLE</td>\n                      <td class="amount-column">').concat(e("23004"),'</td>\n                    </tr>\n                    \x3c!-- COMMISSIONS PAYABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">COMMISSIONS PAYABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21500</td>\n                      <td style="padding-left: 8px;">COMMISSION PAYABLE</td>\n                      <td class="amount-column">').concat(e("21500"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21600</td>\n                      <td style="padding-left: 8px;">BROKERS COMMISSION</td>\n                      <td class="amount-column">').concat(e("21600"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL CURRENT LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL CURRENT LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])),'</td>\n                    </tr>\n                    \x3c!-- LONG-TERM LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">LONG-TERM LIABILITIES</td>\n                    </tr>\n                    \x3c!-- SHAREHOLDER LOANS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">SHAREHOLDER LOANS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28000</td>\n                      <td style="padding-left: 8px;">SHAREHOLDER LOAN - SRI</td>\n                      <td class="amount-column">').concat(e("28000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28010</td>\n                      <td style="padding-left: 8px;">SHAREHOLDER LOAN - #2</td>\n                      <td class="amount-column">').concat(e("28010"),'</td>\n                    </tr>\n                    \x3c!-- LOAN PAYABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">LOAN PAYABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21450</td>\n                      <td style="padding-left: 8px;">LOAN PAYABLE - 2199435 ONT INC</td>\n                      <td class="amount-column">').concat(e("21450"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28050</td>\n                      <td style="padding-left: 8px;">LOAN PAYABLE - Executive Mortgage</td>\n                      <td class="amount-column">').concat(e("28050"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LONG-TERM LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL LONG-TERM LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["28000","28010","21450","28050"])),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])+t(["28000","28010","21450","28050"])),'</td>\n                    </tr>\n                    \x3c!-- SHAREHOLDER\'S EQUITY --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">SHAREHOLDER\'S EQUITY</td>\n                    </tr>\n                    \x3c!-- COMMON STOCK --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">COMMON STOCK</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">30010</td>\n                      <td style="padding-left: 8px;">COMMON STOCK</td>\n                      <td class="amount-column">').concat(e("30010"),'</td>\n                    </tr>\n                    \x3c!-- RETAINED EARNINGS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">RETAINED EARNINGS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">39999</td>\n                      <td style="padding-left: 8px;">RETAINED EARNINGS - Y.T.D.</td>\n                      <td class="amount-column">').concat(e("39999"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL EQUITY --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL EQUITY</td>\n                      <td class="amount-column">').concat(h(t(["30010","39999"])),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LIABILITIES & EQUITY --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL LIABILITIES & EQUITY</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])+t(["28000","28010","21450","28050"])+t(["30010","39999"])),"</td>\n                    </tr>\n                  ")})(),"\n              </tbody>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(n),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},500)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Print Statement"})]}),(0,Rm.jsx)("img",{src:Qm,alt:"Company Logo",className:"print-logo"}),(0,Rm.jsxs)("div",{className:"text-center mb-2",children:[(0,Rm.jsx)("div",{className:"text-2xl font-bold",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("div",{className:"text-lg font-semibold mt-1",children:"Balance Sheet"}),(0,Rm.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e," to ",r]})]}),(0,Rm.jsxs)("table",{className:"w-full text-left border-t border-b border-gray-300 mt-6",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"py-2 px-2 w-32",children:"Acct. #"}),(0,Rm.jsx)("th",{className:"py-2 px-2",children:"Description"}),(0,Rm.jsx)("th",{className:"py-2 px-2 w-32 text-right",children:"Amount"})]})}),(0,Rm.jsxs)("tbody",{className:"text-sm",children:[(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"ASSETS"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"CURRENT ASSETS"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"CASH"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"10001"}),(0,Rm.jsx)("td",{children:"CASH - CURRENT ACCOUNT"}),(0,Rm.jsx)("td",{className:"text-right",children:m("10001")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"10004"}),(0,Rm.jsx)("td",{children:"CASH - COMMISSION TRUST ACCOUNT"}),(0,Rm.jsx)("td",{className:"text-right",children:m("10004")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"NOTES RECEIVABLE"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"11000"}),(0,Rm.jsx)("td",{children:"NOTES RECEIVABLES"}),(0,Rm.jsx)("td",{className:"text-right",children:m("11000")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"ACCOUNTS RECEIVABLE"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"12100"}),(0,Rm.jsx)("td",{children:"A/R - AGT'S RECOVERABLE- GEN EXP"}),(0,Rm.jsx)("td",{className:"text-right",children:m("12100")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"12500"}),(0,Rm.jsx)("td",{children:"A/R - OTHER"}),(0,Rm.jsx)("td",{className:"text-right",children:m("12500")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"12600"}),(0,Rm.jsx)("td",{children:"LOAN - HOMELIFE TOP STAR"}),(0,Rm.jsx)("td",{className:"text-right",children:m("12600")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"PREPAID EXPENSES"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"15000"}),(0,Rm.jsx)("td",{children:"PREPAID EXPENSES"}),(0,Rm.jsx)("td",{className:"text-right",children:m("15000")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL CURRENT ASSETS"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["10001","10004","11000","12100","12500","12600","12300","15000"]))})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"FIXED ASSETS"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"OFFICE EQUIPMENT"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"16030"}),(0,Rm.jsx)("td",{children:"OFFICE FURNITURE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("16030")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"COMPUTER EQUIPMENT"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"16060"}),(0,Rm.jsx)("td",{children:"COMPUTER SOFTWARE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("16060")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"LEASEHOLD IMPROVEMENTS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"16080"}),(0,Rm.jsx)("td",{children:"SIGNS"}),(0,Rm.jsx)("td",{className:"text-right",children:m("16080")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"FRANCHISE COSTS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"16090"}),(0,Rm.jsx)("td",{children:"FRANCHISE COST"}),(0,Rm.jsx)("td",{className:"text-right",children:m("16090")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL FIXED ASSETS"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["16060","16080","16090","16030"]))})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"ACCUMULATED DEPRECIATION"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"17060"}),(0,Rm.jsx)("td",{children:"ACC. DEPR. - COMP. SOFTWARE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("17060")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"17080"}),(0,Rm.jsx)("td",{children:"ACC. DEPR. - SIGNS"}),(0,Rm.jsx)("td",{className:"text-right",children:m("17080")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"17090"}),(0,Rm.jsx)("td",{children:"ACC. AMOR. - FRANCHISE COSTS"}),(0,Rm.jsx)("td",{className:"text-right",children:m("17090")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"NET FIXED ASSETS"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["16060","16080","16090","16030"])-p(["17060","17080","17090"]))})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"NET TRUST FUNDS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"10002"}),(0,Rm.jsx)("td",{children:"CASH - TRUST"}),(0,Rm.jsx)("td",{className:"text-right",children:m("10002")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"21300"}),(0,Rm.jsx)("td",{children:"LIABILITY FOR TRUST FUNDS HELD"}),(0,Rm.jsx)("td",{className:"text-right",children:m("21300")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL ASSETS"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["10001","10004","11000","12100","12500","12600","12300","15000"])+p(["16060","16080","16090"])-p(["17060","17080","17090"])+p(["10002","21300"]))})]}),(0,Rm.jsx)("tr",{className:"print-break",children:(0,Rm.jsx)("td",{colSpan:3})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-8 pb-1",children:"LIABILITIES"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"CURRENT LIABILITIES"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"BANK OVERDRAFT"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"20000"}),(0,Rm.jsx)("td",{children:"BANK OPERATING LINE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("20000")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"ACCOUNTS PAYABLE & ACCRUALS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"21000"}),(0,Rm.jsx)("td",{children:"ACCOUNTS PAYABLE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("21000")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"22000"}),(0,Rm.jsx)("td",{children:"ACCRUED EXPENSES"}),(0,Rm.jsx)("td",{className:"text-right",children:m("22000")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"23000"}),(0,Rm.jsx)("td",{children:"HST COLLECTED"}),(0,Rm.jsx)("td",{className:"text-right",children:m("23000")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"23001"}),(0,Rm.jsx)("td",{children:"HST INPUT TAX CREDIT"}),(0,Rm.jsx)("td",{className:"text-right",children:m("23001")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"23004"}),(0,Rm.jsx)("td",{children:"HST NET PAYABLE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("23004")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"COMMISSIONS PAYABLE"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"21500"}),(0,Rm.jsx)("td",{children:"COMMISSION PAYABLE"}),(0,Rm.jsx)("td",{className:"text-right",children:m("21500")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"21600"}),(0,Rm.jsx)("td",{children:"BROKERS COMMISSION"}),(0,Rm.jsx)("td",{className:"text-right",children:m("21600")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL CURRENT LIABILITIES"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["20000","21000","22000","23000","23001","23004","21500","21600"]))})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"LONG-TERM LIABILITIES"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"SHAREHOLDER LOANS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"28000"}),(0,Rm.jsx)("td",{children:"SHAREHOLDER LOAN - SRI"}),(0,Rm.jsx)("td",{className:"text-right",children:m("28000")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"28010"}),(0,Rm.jsx)("td",{children:"SHAREHOLDER LOAN - #2"}),(0,Rm.jsx)("td",{className:"text-right",children:m("28010")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"LOAN PAYABLE"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"21450"}),(0,Rm.jsx)("td",{children:"LOAN PAYABLE - 2199435 ONT INC"}),(0,Rm.jsx)("td",{className:"text-right",children:m("21450")})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"28050"}),(0,Rm.jsx)("td",{children:"LOAN PAYABLE - Executive Mortgage"}),(0,Rm.jsx)("td",{className:"text-right",children:m("28050")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LONG-TERM LIABILITIES"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["28000","28010","21450","28050"]))})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LIABILITIES"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["20000","21000","22000","23000","23001","23004","21500","21600"])+p(["28000","28010","21450","28050"]))})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-8 pb-1",children:"SHAREHOLDER'S EQUITY"})}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"COMMON STOCK"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"30010"}),(0,Rm.jsx)("td",{children:"COMMON STOCK"}),(0,Rm.jsx)("td",{className:"text-right",children:m("30010")})]}),(0,Rm.jsx)("tr",{className:"font-bold",children:(0,Rm.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"RETAINED EARNINGS"})}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{children:"39999"}),(0,Rm.jsx)("td",{children:"RETAINED EARNINGS - Y.T.D."}),(0,Rm.jsx)("td",{className:"text-right",children:m("39999")})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL EQUITY"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["30010","39999"]))})]}),(0,Rm.jsxs)("tr",{className:"font-bold",children:[(0,Rm.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LIABILITIES & EQUITY"}),(0,Rm.jsx)("td",{className:"text-right font-bold",children:h(p(["20000","21000","22000","23000","23001","23004","21500","21600"])+p(["28000","28010","21450","28050"])+p(["30010","39999"]))})]})]})]})]})]})}const rU=()=>{const[e,n]=(0,t.useState)("income");return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("style",{children:"\n  @media print {\n    .no-print { display: none !important; }\n    .print-logo { display: block !important; margin: 0 auto 12px auto; max-width: 120px; }\n    body { margin: 0; padding: 20px; }\n    .print-break { page-break-before: always; }\n    table, th, td { font-size: 10px !important; }\n    .print-header, .print-logo + div, .print-logo + div .text-2xl, .print-logo + div .text-lg { font-size: 13px !important; }\n  }\n  .print-logo { display: none; }\n"}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsxs)("div",{className:"flex-1 p-6",children:[(0,Rm.jsx)("div",{className:"flex space-x-4 mb-6 border-b pb-2 no-print",children:eU.map(t=>(0,Rm.jsx)("button",{onClick:()=>n(t.id),className:"px-4 py-2 rounded-t font-medium transition-colors focus:outline-none ".concat(e===t.id?"bg-blue-100 text-blue-700 border-b-2 border-blue-700":"text-gray-600 hover:bg-gray-100"),children:t.label},t.id))}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md min-h-[300px]",children:["income"===e&&(0,Rm.jsx)("div",{children:(0,Rm.jsx)(tU,{})}),"balance"===e&&(0,Rm.jsx)("div",{children:(0,Rm.jsx)(nU,{})})]})]})]})]})},sU=e=>{let{isOpen:n,onClose:r,onPrint:s}=e;const[a,i]=(0,t.useState)([]),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[A,u]=(0,t.useState)(""),[h,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&p()},[n]);const p=async()=>{try{const e=(await nN.get("/agents")).data.sort((e,t)=>"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName)));i(e)}catch(e){console.error("Error fetching agents:",e)}},f=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",plan5050:"Plan 50/50",plan8020:"Plan 80/20",plan150:"Plan 150",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e};return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Print Agent Report"}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Name"}),(0,Rm.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Rm.jsx)("option",{value:"",children:"Select an agent"}),a.map(e=>(0,Rm.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id))]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:A,onChange:e=>u(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Rm.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{if(o&&c&&A){m(!0);try{var e;const t=(await nN.get("/commission-trust-eft")).data.filter(e=>"AgentCommissionTransfer"===e.type),n=a.find(e=>e._id===o),i=n?"".concat(n.firstName," ").concat(n.lastName):"",l=null===n||void 0===n||null===(e=n.employeeNo)||void 0===e?void 0:e.toString(),d=t.filter(e=>{const t=new Date(e.date),r=new Date(c),s=new Date(A);return(e.agentId===l||e.agentId===o||e.agentName===i||e.agentName===(null===n||void 0===n?void 0:n.firstName)+" "+(null===n||void 0===n?void 0:n.lastName))&&(t>=r&&t<=s)}),u=(await nN.get("/agents")).data,h=d.map(e=>{var t,n,r;const s=u.find(t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId}),a=e.tradeId;let i=null;null!==a&&void 0!==a&&a.agentCommissionList&&a.agentCommissionList.length>0&&(i=a.agentCommissionList.find(t=>t.agentId===e.agentId),i||(i=a.agentCommissionList.find(t=>t.agentName===e.agentName)),!i&&null!==s&&void 0!==s&&s.employeeNo&&(i=a.agentCommissionList.find(e=>e.agentId===s.employeeNo.toString())),i||1!==a.agentCommissionList.length||(i=a.agentCommissionList[0]));let o="0.00";if((null===(t=i)||void 0===t||!t.totalFees)&&null!==s&&void 0!==s&&s.feeInfo){let t=0;switch(s.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;default:t=0}o=(t+.13*t).toFixed(2)}return{agentId:(null===s||void 0===s?void 0:s.employeeNo)||e.agentId,agentName:e.agentName||(null===s||void 0===s?void 0:s.firstName)+" "+(null===s||void 0===s?void 0:s.lastName),eftNumber:e.eftNumber,tradeNumber:null===a||void 0===a?void 0:a.tradeNumber,planInfo:f((null===s||void 0===s?void 0:s.feeInfo)||(null===(n=i)||void 0===n?void 0:n.feeInfo)),netCommission:e.amount,feesDeducted:(null===(r=i)||void 0===r?void 0:r.totalFees)||o,date:e.date,tradeAddress:null!==a&&void 0!==a&&a.keyInfo?"".concat(a.keyInfo.streetNumber||""," ").concat(a.keyInfo.streetName||"").trim():""}});h.sort((e,t)=>new Date(t.date)-new Date(e.date));s(h,i||"Unknown Agent",c,A),r()}catch(t){console.error("Error generating report:",t),alert("Error generating report. Please try again.")}finally{m(!1)}}else alert("Please select an agent and both date fields")},disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Processing...":"Proceed"})]})]})}):null},aU=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(!1);(0,t.useEffect)(()=>{o()},[]);const o=async()=>{try{s(!0);const e=(await nN.get("/commission-trust-eft")).data.filter(e=>"AgentCommissionTransfer"===e.type),t=(await nN.get("/agents")).data,r=e.map(e=>{var n,r,s,a;const i=t.find(t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId}),o=e.tradeId;let c=null;null!==o&&void 0!==o&&o.agentCommissionList&&o.agentCommissionList.length>0&&(c=o.agentCommissionList.find(t=>t.agentId===e.agentId),c||(c=o.agentCommissionList.find(t=>t.agentName===e.agentName)),!c&&null!==i&&void 0!==i&&i.employeeNo&&(c=o.agentCommissionList.find(e=>e.agentId===i.employeeNo.toString())),c||1!==o.agentCommissionList.length||(c=o.agentCommissionList[0])),console.log("EFT Data:",{eftNumber:e.eftNumber,agentId:e.agentId,agentName:e.agentName,tradeNumber:null===o||void 0===o?void 0:o.tradeNumber,agentCommissionList:null===o||void 0===o?void 0:o.agentCommissionList,agentCommission:c,totalFees:null===(n=c)||void 0===n?void 0:n.totalFees,agentEmployeeNo:null===i||void 0===i?void 0:i.employeeNo});let d="0.00";if((null===(r=c)||void 0===r||!r.totalFees)&&null!==i&&void 0!==i&&i.feeInfo){let t=0;switch(i.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.15*parseFloat(e.amount);break;default:t=0}d=(t+.13*t).toFixed(2)}return{agentId:(null===i||void 0===i?void 0:i.employeeNo)||e.agentId,agentName:e.agentName||(null===i||void 0===i?void 0:i.firstName)+" "+(null===i||void 0===i?void 0:i.lastName),eftNumber:e.eftNumber,tradeNumber:null===o||void 0===o?void 0:o.tradeNumber,planInfo:l((null===i||void 0===i?void 0:i.feeInfo)||(null===(s=c)||void 0===s?void 0:s.feeInfo)),netCommission:e.amount,feesDeducted:(null===(a=c)||void 0===a?void 0:a.totalFees)||d,date:e.chequeDate||e.date,tradeAddress:null!==o&&void 0!==o&&o.keyInfo?"".concat(o.keyInfo.streetNumber||""," ").concat(o.keyInfo.streetName||"").trim():""}});r.sort((e,t)=>new Date(t.date)-new Date(e.date)),n(r),s(!1)}catch(e){console.error("Error fetching EFT data:",e),s(!1)}},l=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e},c=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",d=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Agent Payment Information"}),(0,Rm.jsxs)("button",{onClick:()=>{i(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors print:hidden",children:[(0,Rm.jsx)(km,{}),"Print Report"]})]}),(0,Rm.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Complete Agent Commission Information - All Trades"})}),r?(0,Rm.jsxs)("div",{className:"p-8 text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment data..."})]}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"EFT #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Info"}),(0,Rm.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Office Total Fees",(0,Rm.jsx)("br",{}),(0,Rm.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,Rm.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Net Commission",(0,Rm.jsx)("br",{}),(0,Rm.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.eftNumber?"EFT-".concat(e.eftNumber):"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(e.date)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.planInfo}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c(e.feesDeducted)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:c(e.netCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c((parseFloat(e.netCommission||0)*(.13/1.13)).toFixed(2))})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),e.length>0&&(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Records:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:e.length})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Office Total Fees:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total HST:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commission Paid WITHOUT HST:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce((e,t)=>e+parseFloat(t.netCommission||0),0)-e.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce((e,t)=>e+parseFloat(t.netCommission||0),0))})]})]})})]})]})})]}),(0,Rm.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "}),(0,Rm.jsx)(sU,{isOpen:a,onClose:()=>i(!1),onPrint:(e,t,n,r)=>{const s=window.open("","_blank"),a=(new Date).toLocaleDateString(),i=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",o=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})},l=e.reduce((e,t)=>e+parseFloat(t.netCommission||0),0),c=e.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0),d=e.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0),A="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Report - ".concat(t,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="logo-container">\n            <img src="/logo.jpeg" alt="Bestway Real Estate Ltd. Logo" style="max-width: 120px; height: auto; margin-bottom: 10px;">\n          </div>\n          <div class="company-name">Homelife Top Star Realty Inc., Brokerage</div>\n          <div class="report-title">Agent Payment Report</div>\n          <div class="report-subtitle">Complete Agent Commission Information - All Trades</div>\n          <div class="report-info">\n            Agent: ').concat(t," | Period: ").concat(o(n)," to ").concat(o(r)," | Generated: ").concat(a,"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>EFT #</th>\n              <th>Trade #</th>\n              <th>Date Issued</th>\n              <th>Plan Info</th>\n              <th>Office Total Fees<br /><small>*HST Included</small></th>\n              <th>Net Commission<br /><small>*HST Included</small></th>\n              <th>HST</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map((e,t)=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.eftNumber?"EFT-".concat(e.eftNumber):"N/A","</td>\n                  <td>").concat(e.tradeNumber||"N/A","</td>\n                  <td>").concat(o(e.date),"</td>\n                  <td>").concat(e.planInfo,'</td>\n                  <td class="red-text">').concat(i(e.feesDeducted),'</td>\n                  <td class="green-text">').concat(i(e.netCommission),'</td>\n                  <td class="red-text">').concat(i(parseFloat(e.netCommission||0)*(.13/1.13)),"</td>\n                </tr>\n              ")).join(""):'<tr><td colspan="9" style="text-align: center; padding: 20px;">No data available for the selected period.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Records:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Office Total Fees (HST INCLUDED):</span>\n            <span class="red-text">').concat(i(c),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total HST:</span>\n            <span class="red-text">').concat(i(d),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission Paid WITHOUT HST:</span>\n            <span class="green-text">').concat(i(l-d),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span class="green-text">').concat(i(l),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');s.document.write(A),s.document.close()}})]})},iU=e=>{let{isOpen:n,onClose:r}=e;const[s,a]=(0,t.useState)({fromDate:"",toDate:""}),[i,o]=(0,t.useState)(!1),l=e=>{const{name:t,value:n}=e.target;a(e=>X(X({},e),{},{[t]:n}))},c=e=>{const t=new Date;let n,r;switch(e){case"today":n=r=t.toISOString().split("T")[0];break;case"yesterday":const e=new Date(t);e.setDate(e.getDate()-1),n=r=e.toISOString().split("T")[0];break;case"thisWeek":const s=new Date(t);s.setDate(t.getDate()-t.getDay()),n=s.toISOString().split("T")[0],r=t.toISOString().split("T")[0];break;case"thisMonth":n=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],r=t.toISOString().split("T")[0];break;case"lastMonth":n=new Date(t.getFullYear(),t.getMonth()-1,1).toISOString().split("T")[0],r=new Date(t.getFullYear(),t.getMonth(),0).toISOString().split("T")[0];break;default:return}a({fromDate:n,toDate:r})},d=(e,t,n)=>{const r=window.open("","_blank"),s='\n       <!DOCTYPE html>\n       <html>\n         <head>\n           <title>Journal Entries Report - Homelife Top Star Realty  Inc., Brokerage </title>\n           <style>\n             body {\n               font-family: Arial, sans-serif;\n               margin: 20px;\n               line-height: 1.6;\n               color: #000000;\n             }\n             .header {\n               text-align: center;\n               margin-bottom: 30px;\n               border-bottom: 2px solid #000000;\n               padding-bottom: 10px;\n             }\n                           .company-info {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                margin-bottom: 20px;\n              }\n                             .company-logo {\n                 width: 120px;\n                 height: 120px;\n                 margin-bottom: 15px;\n                 object-fit: contain;\n               }\n             .company-name {\n               font-size: 24px;\n               font-weight: bold;\n               color: #000000;\n             }\n             .report-title {\n               font-size: 28px;\n               font-weight: bold;\n               color: #000000;\n               margin-top: 10px;\n             }\n             .date-range {\n               text-align: center;\n               margin-bottom: 20px;\n               font-size: 14px;\n               color: #000000;\n             }\n             .journal-entry {\n               margin-bottom: 30px;\n               border: 1px solid #000000;\n               border-radius: 5px;\n               overflow: hidden;\n             }\n             .entry-header {\n               background-color: #f5f5f5;\n               padding: 10px;\n               border-bottom: 1px solid #000000;\n             }\n             .entry-details {\n               display: flex;\n               justify-content: space-between;\n               margin-bottom: 5px;\n               color: #000000;\n             }\n             .entry-table {\n               width: 100%;\n               border-collapse: collapse;\n             }\n             .entry-table th,\n             .entry-table td {\n               border: 1px solid #000000;\n               padding: 8px;\n               text-align: left;\n               color: #000000;\n             }\n             .entry-table th {\n               background-color: #f0f0f0;\n               font-weight: bold;\n               color: #000000;\n             }\n             .totals {\n               background-color: #f5f5f5;\n               padding: 10px;\n               border-top: 1px solid #000000;\n               font-weight: bold;\n               color: #000000;\n             }\n             .debit {\n               color: #000000;\n             }\n             .credit {\n               color: #000000;\n             }\n             .period-summary {\n               background-color: #f8f9fa;\n               padding: 15px;\n               margin-bottom: 20px;\n               border-radius: 5px;\n               border: 1px solid #000000;\n             }\n             .period-summary h3 {\n               margin: 0 0 10px 0;\n               color: #000000;\n             }\n             .period-summary div {\n               display: flex;\n               justify-content: space-between;\n               font-size: 14px;\n               color: #000000;\n             }\n             .footer {\n               margin-top: 30px;\n               text-align: center;\n               font-size: 12px;\n               color: #000000;\n             }\n             @media print {\n               body { margin: 0; }\n               .no-print { display: none; }\n             }\n           </style>\n         </head>\n         <body>\n           <div class="header">\n             <div class="company-info">\n               <img src="/logo.jpeg" alt="Homelife Top Star Realty Inc. Logo" class="company-logo" onerror="this.style.display=\'none\'">\n               <div class="company-name">Homelife Top Star Realty Inc., Brokerage</div>\n             </div>\n             <div class="report-title">Journal Entries Report</div>\n           </div>\n          \n          <div class="date-range">\n            <strong>Period:</strong> '.concat(new Date(t.fromDate).toLocaleDateString()," to ").concat(new Date(t.toDate).toLocaleDateString(),'\n          </div>\n\n          <div class="period-summary">\n            <h3>Period Summary</h3>\n            <div>\n              <span><strong>Total Journal Entries:</strong> ').concat(n.entryCount,"</span>\n              <span><strong>Total Debits:</strong> $").concat(n.totalDebits.toFixed(2),"</span>\n              <span><strong>Total Credits:</strong> $").concat(n.totalCredits.toFixed(2),"</span>\n            </div>\n          </div>\n\n          ").concat(Object.entries(e).map(e=>{let[t,n]=e;const r=n.reduce((e,t)=>e+(t.debit||0),0),s=n.reduce((e,t)=>e+(t.credit||0),0);return'\n                <div class="journal-entry">\n                  <div class="entry-header">\n                    <div class="entry-details">\n                      <strong>Reference:</strong> '.concat(t,'\n                    </div>\n                    <div class="entry-details">\n                      <strong>Date:</strong> ').concat((()=>{const e=n[0],t=e.chequeDate||e.date||e.createdAt;return new Date(t).toLocaleDateString()})(),'\n                    </div>\n                    <div class="entry-details">\n                      <strong>Description:</strong> ').concat(n[0].description||"N/A",'\n                    </div>\n                  </div>\n                  \n                  <table class="entry-table">\n                    <thead>\n                      <tr>\n                        <th>Account Number</th>\n                        <th>Account Name</th>\n                        <th>Debit</th>\n                        <th>Credit</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      ').concat(n.map(e=>"\n                        <tr>\n                          <td>".concat(e.accountNumber,"</td>\n                          <td>").concat(e.accountName,'</td>\n                          <td class="debit">').concat(e.debit>0?"$"+e.debit.toFixed(2):"",'</td>\n                          <td class="credit">').concat(e.credit>0?"$"+e.credit.toFixed(2):"","</td>\n                        </tr>\n                      ")).join(""),'\n                    </tbody>\n                  </table>\n                  \n                  <div class="totals">\n                    <span>Total Debits: $').concat(r.toFixed(2),'</span>\n                    <span style="margin-left: 20px;">Total Credits: $').concat(s.toFixed(2),"</span>\n                  </div>\n                </div>\n              ")}).join(""),'\n\n          <div class="footer">\n            <p>Report generated on ').concat((new Date).toLocaleString(),"</p>\n          </div>\n        </body>\n      </html>\n    ");r.document.write(s),r.document.close(),r.focus(),setTimeout(()=>{r.print(),r.close()},500)};return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Print Journal Entries Report"}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Select"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>c("today"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"Today"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>c("yesterday"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"Yesterday"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>c("thisWeek"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"This Week"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>c("thisMonth"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"This Month"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",name:"fromDate",value:s.fromDate,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",name:"toDate",value:s.toDate,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Rm.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{if(s.fromDate&&s.toDate)if(new Date(s.fromDate)>new Date(s.toDate))bp.error("Start date cannot be after end date");else{o(!0);try{const e=(await nN.get("/ledger?from=".concat(s.fromDate,"&to=").concat(s.toDate))).data.filter(e=>"Journal Entry"===e.type);if(0===e.length)return bp.info("No journal entries found for the selected period"),void o(!1);const t={};e.forEach(e=>{t[e.reference]||(t[e.reference]=[]),t[e.reference].push(e)});const n={totalDebits:0,totalCredits:0,entryCount:Object.keys(t).length};Object.values(t).forEach(e=>{e.forEach(e=>{n.totalDebits+=e.debit||0,n.totalCredits+=e.credit||0})}),d(t,s,n),r(),bp.success("Report generated successfully!")}catch(e){console.error("Error fetching journal entries:",e),bp.error("Failed to generate report")}finally{o(!1)}}else bp.error("Please select both start and end dates")},disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Generating...":"Generate Report"})]})]})]})}):null},oU=e=>{let{isOpen:n,onClose:r,onRetrieve:s}=e;const[a,i]=(0,t.useState)({fromDate:"",toDate:""});return n?(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Retrieve Journal Entries"}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,Rm.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Rm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.fromDate&&a.toDate?new Date(a.fromDate)>new Date(a.toDate)?alert("From date cannot be after to date"):(s(a),r()):alert("Please select both from and to dates")},className:"space-y-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:a.fromDate,onChange:e=>i(t=>X(X({},t),{},{fromDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:a.toDate,onChange:e=>i(t=>X(X({},t),{},{toDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,Rm.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retrieve Data"})]})]})]})}):null},lU=e=>{let{entries:t,dateRange:n,onClose:r}=e;if(!t||0===t.length)return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Journal Entries (",n.fromDate," to ",n.toDate,")"]}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,Rm.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Rm.jsx)("div",{className:"text-center py-8",children:(0,Rm.jsx)("p",{className:"text-gray-500 text-lg",children:"No journal entries found for the selected date range."})}),(0,Rm.jsx)("div",{className:"flex justify-end",children:(0,Rm.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})});const s=t.reduce((e,t)=>(e[t.reference]||(e[t.reference]=[]),e[t.reference].push(t),e),{});return(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Rm.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Journal Entries (",n.fromDate," to ",n.toDate,")"]}),(0,Rm.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,Rm.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Rm.jsx)("div",{className:"space-y-6",children:Object.entries(s).map(e=>{let[t,n]=e;const r=n[0],s=n.reduce((e,t)=>e+(parseFloat(t.debit)||0),0),a=n.reduce((e,t)=>e+(parseFloat(t.credit)||0),0);return(0,Rm.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Date: "}),new Date(r.date).toLocaleDateString()]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Reference: "}),r.reference]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Description: "}),r.description||"N/A"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"font-semibold",children:"Type: "}),r.type||"Journal Entry"]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Number"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Debit"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Credit"})]})}),(0,Rm.jsx)("tbody",{children:n.map((e,t)=>(0,Rm.jsxs)("tr",{className:"border-b",children:[(0,Rm.jsx)("td",{className:"px-4 py-2 text-sm",children:e.accountNumber}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-sm",children:e.accountName}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-sm",children:parseFloat(e.debit)>0?"$".concat(parseFloat(e.debit).toFixed(2)):"$0.00"}),(0,Rm.jsx)("td",{className:"px-4 py-2 text-sm",children:parseFloat(e.credit)>0?"$".concat(parseFloat(e.credit).toFixed(2)):"$0.00"})]},t))})]})}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 text-sm font-semibold mt-4 pt-2 border-t",children:[(0,Rm.jsxs)("span",{children:["Total Debits: $",s.toFixed(2)]}),(0,Rm.jsxs)("span",{children:["Total Credits: $",a.toFixed(2)]})]})]},t)})}),(0,Rm.jsx)("div",{className:"flex justify-end mt-6",children:(0,Rm.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})},cU=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(()=>({date:(new Date).toISOString().split("T")[0],reference:"JE1000",description:"",entries:[{accountNumber:"",accountName:"",debit:"",credit:""},{accountNumber:"",accountName:"",debit:"",credit:""}]})),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)([]),[p,f]=(0,t.useState)({}),g=async()=>{try{const e=await nN.get("/ledger");n(e.data)}catch(e){console.error("Error fetching journal entries:",e),bp.error("Failed to fetch journal entries")}},x=async()=>{try{return(await nN.get("/ledger/next-reference/dummy")).data.nextReference}catch(e){return console.error("Error fetching next JE reference:",e),"JE1000"}};(0,t.useEffect)(()=>{g();(async()=>{const e=await x();s(t=>X(X({},t),{},{reference:e}))})()},[]);const b=e=>{const{name:t,value:n}=e.target;s(e=>X(X({},e),{},{[t]:n}))},y=(e,t,n)=>{s(r=>X(X({},r),{},{entries:r.entries.map((r,s)=>s===e?X(X({},r),{},{[t]:n}):r)}))},v=(e,t)=>{const n=(e=>{const t=Ip.find(t=>t.acct===e);return t?t.description:""})(t);y(e,"accountNumber",t),y(e,"accountName",n)};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Journal Entry"}),(0,Rm.jsxs)("div",{className:"flex space-x-3",children:[(0,Rm.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[(0,Rm.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),(0,Rm.jsx)("span",{children:"Retrieve Data"})]}),(0,Rm.jsxs)("button",{type:"button",onClick:()=>l(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center space-x-2",children:[(0,Rm.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Rm.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),(0,Rm.jsx)("span",{children:"Print Report"})]})]})]}),(0,Rm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{if(r.entries.length<2)return bp.error("At least 2 entries are required"),!1;if(r.entries.some(e=>!e.accountNumber))return bp.error("All entries must have account numbers"),!1;const e=r.entries.reduce((e,t)=>e+(parseFloat(t.debit)||0),0),t=r.entries.reduce((e,t)=>e+(parseFloat(t.credit)||0),0);if(Math.abs(e-t)>.01)return bp.error("Total debits must equal total credits"),!1;const n=r.entries.some(e=>parseFloat(e.debit)>0),s=r.entries.some(e=>parseFloat(e.credit)>0);return!(!n||!s)||(bp.error("At least one debit and one credit entry are required"),!1)})()){i(!0);try{const e=r.entries.map(e=>parseFloat(e.debit)>0||parseFloat(e.credit)>0?nN.post("/ledger",{accountNumber:e.accountNumber,accountName:e.accountName,debit:parseFloat(e.debit)||0,credit:parseFloat(e.credit)||0,description:r.description,date:r.date,reference:r.reference,type:"Journal Entry"}):Promise.resolve());await Promise.all(e),bp.success("Journal entry posted successfully!");const t=new Date,n=await x();s({date:t.toISOString().split("T")[0],reference:n,description:"",entries:[{accountNumber:"",accountName:"",debit:"",credit:""},{accountNumber:"",accountName:"",debit:"",credit:""}]}),g()}catch(t){console.error("Error posting journal entry:",t),bp.error("Failed to post journal entry")}finally{i(!1)}}},className:"space-y-6",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,Rm.jsx)("input",{type:"date",name:"date",value:r.date,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference"}),(0,Rm.jsx)("input",{type:"text",name:"reference",value:r.reference,readOnly:!0,placeholder:"Auto-generated JE Reference",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Rm.jsx)("input",{type:"text",name:"description",value:r.description,onChange:b,placeholder:"Journal Entry Description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,Rm.jsxs)("div",{className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Journal Entries"}),(0,Rm.jsx)("button",{type:"button",onClick:()=>{s(e=>X(X({},e),{},{entries:[...e.entries,{accountNumber:"",accountName:"",debit:"",credit:""}]}))},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Add Entry"})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Number"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Name"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Debit"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Credit"}),(0,Rm.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Action"})]})}),(0,Rm.jsx)("tbody",{children:r.entries.map((e,t)=>(0,Rm.jsxs)("tr",{className:"border-b",children:[(0,Rm.jsx)("td",{className:"px-4 py-2",children:(0,Rm.jsxs)("select",{value:e.accountNumber,onChange:e=>v(t,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Rm.jsx)("option",{value:"",children:"Select Account"}),Ip.map(t=>(0,Rm.jsx)("option",{value:t.acct,children:e.accountNumber===t.acct?t.acct:"".concat(t.acct," - ").concat(t.description)},t.acct))]})}),(0,Rm.jsx)("td",{className:"px-4 py-2",children:(0,Rm.jsx)("input",{type:"text",value:e.accountName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})}),(0,Rm.jsx)("td",{className:"px-4 py-2",children:(0,Rm.jsx)("input",{type:"number",step:"0.01",value:e.debit,onChange:e=>y(t,"debit",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,Rm.jsx)("td",{className:"px-4 py-2",children:(0,Rm.jsx)("input",{type:"number",step:"0.01",value:e.credit,onChange:e=>y(t,"credit",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,Rm.jsx)("td",{className:"px-4 py-2",children:r.entries.length>2&&(0,Rm.jsx)("button",{type:"button",onClick:()=>(e=>{r.entries.length>2&&s(t=>X(X({},t),{},{entries:t.entries.filter((t,n)=>n!==e)}))})(t),className:"bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700 text-sm",children:"Remove"})})]},t))})]})}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-4 text-lg font-semibold",children:[(0,Rm.jsxs)("span",{children:["Total Debits: $",r.entries.reduce((e,t)=>e+(parseFloat(t.debit)||0),0).toFixed(2)]}),(0,Rm.jsxs)("span",{children:["Total Credits: $",r.entries.reduce((e,t)=>e+(parseFloat(t.credit)||0),0).toFixed(2)]})]})]}),(0,Rm.jsx)("div",{className:"flex justify-end",children:(0,Rm.jsx)("button",{type:"submit",disabled:a,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:a?"Posting...":"Post Journal Entry"})})]})]})})]}),(0,Rm.jsx)(iU,{isOpen:o,onClose:()=>l(!1)}),(0,Rm.jsx)(oU,{isOpen:c,onClose:()=>d(!1),onRetrieve:async e=>{try{i(!0);const t=(await nN.get("/ledger",{params:{from:e.fromDate,to:e.toDate}})).data.filter(e=>"Journal Entry"===e.type);m(t),f(e),u(!0)}catch(t){console.error("Error retrieving journal entries:",t),bp.error("Failed to retrieve journal entries")}finally{i(!1)}}}),A&&p.fromDate&&p.toDate&&(0,Rm.jsx)(lU,{entries:h,dateRange:p,onClose:()=>u(!1)})]})},dU=()=>{eu();const[e,n]=(0,t.useState)("real-estate-trust"),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)([]),[A,u]=(0,t.useState)(!1),h=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US")}return new Date(e).toLocaleDateString("en-US")}catch(t){return console.error("Error formatting date:",e,t),e||"-"}},m={"real-estate-trust":{name:"Real Estate Trust Account",accountNumber:"10002",accountName:"Cash - Trust"},"commission-trust":{name:"Commission Trust Account",accountNumber:"10004",accountName:"Cash - Commission Trust Account"},"general-account":{name:"General Account",accountNumber:"10001",accountName:"Cash - Current Account"}},p=()=>c.reduce((e,t)=>e+t.amount,0);return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"general-account"===e?"AR & Disbursements Journal":"Disbursements Journals"}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("real-estate-trust"),l(!1),d([])},children:"Real Estate Trust Account"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("commission-trust"),l(!1),d([])},children:"Commission Trust Account"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("general-account"),l(!1),d([])},children:"General Account"})]})}),(0,Rm.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,Rm.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("label",{htmlFor:"fromDate",className:"text-sm font-medium text-gray-700",children:"From Date:"}),(0,Rm.jsx)("input",{type:"date",id:"fromDate",value:r,onChange:e=>s(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Rm.jsx)("label",{htmlFor:"toDate",className:"text-sm font-medium text-gray-700",children:"To Date:"}),(0,Rm.jsx)("input",{type:"date",id:"toDate",value:a,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsx)("button",{onClick:async()=>{if(r&&a){u(!0);try{const t=await nN.get("/ledger"),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let s=n;if(r&&a){const e=new Date(r);e.setUTCHours(0,0,0,0);const t=new Date(a);t.setUTCHours(23,59,59,999),console.log("Date range filtering:",{fromDate:r,toDate:a,startDate:e,endDate:t}),s=n.filter(n=>{const r=n.chequeDate||n.date||n.transactionDate||n.eftDate||n.paymentDate||n.processedDate||n.createdAt,s=new Date(r),a=s>=e&&s<=t;return a||console.log("Entry filtered out by date:",{entryDate:r,parsedDate:s,startDate:e,endDate:t,description:n.description}),a})}let i=t.data;if(r&&a){const n=new Date(r);n.setUTCHours(0,0,0,0);const s=new Date(a);s.setUTCHours(23,59,59,999),i=t.data.filter(t=>{const r=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt,a=new Date(r),i=a>=n&&a<=s;return i||t.accountNumber!==m[e].accountNumber||console.log("Backend entry filtered out by date:",{entryDate:r,parsedDate:a,startDate:n,endDate:s,description:t.description,accountNumber:t.accountNumber}),i})}const o=[...s,...i];console.log("=== Disbursements Journals Debug ==="),console.log("All entries count:",o.length),console.log("Backend response count:",t.data.length),console.log("Filtered backend data count:",i.length),console.log("LocalStorage transactions count:",s.length),console.log("Active section:",e),console.log("Account number:",m[e].accountNumber),console.log("Sample entries:",o.slice(0,3));const c=[...new Set(o.map(e=>e.accountNumber))];console.log("Unique account numbers in data:",c);const A=o.filter(t=>t.accountNumber===m[e].accountNumber);console.log("Entries for account ".concat(m[e].accountNumber,":"),A.length);const u=A.slice(0,5).map(e=>({description:e.description,date:e.date,createdAt:e.createdAt,chequeDate:e.chequeDate,transactionDate:e.transactionDate,allDateFields:Object.keys(e).filter(e=>e.toLowerCase().includes("date")||e.toLowerCase().includes("time")),allFields:Object.keys(e),parsedDate:e.date?new Date(e.date):new Date(e.createdAt||0)}));console.log("Sample dates for debugging:",u);const p=A.find(e=>{var t;return(null===(t=e.description)||void 0===t?void 0:t.includes("EFT#1015"))||"1015"===e.eftNumber||"1015"===e.referenceNumber});p&&console.log("EFT#1015 entry details:",p);const f=A.slice(0,3).map(e=>({description:e.description,tradeNumber:e.tradeNumber,tradeId:e.tradeId,allTradeFields:Object.keys(e).filter(e=>e.toLowerCase().includes("trade")||e.toLowerCase().includes("number")),allFields:Object.keys(e)}));console.log("Trade fields for debugging:",f);const g=o.filter(t=>{const n=t.accountNumber===m[e].accountNumber;let r;return r="general-account"===e&&t.debit>0||t.credit>0,n||console.log("Entry filtered out by account number:",{entryAccountNumber:t.accountNumber,expectedAccountNumber:m[e].accountNumber,description:t.description}),n&&!r&&console.log("Entry filtered out - no valid amount:",{description:t.description,debit:t.debit,credit:t.credit,activeSection:e}),n&&r});console.log("Filtered account transactions count:",g.length),console.log("Account transactions:",g);const x=g.map(t=>{var n;let r="N/A";if(t.eftNumber)r="EFT#".concat(t.eftNumber);else if(t.description&&t.description.includes("EFT")){const e=t.description.match(/EFT#?(\d+)/i);e&&(r="EFT#".concat(e[1]))}let s="N/A";if(t.payee)s=t.payee;else if(t.description){const e=[/Paid to:\s*([^,]+)/i,/Received from:\s*([^,]+)/i,/Payee:\s*([^,]+)/i,/To:\s*([^,]+)/i,/From:\s*([^,]+)/i];for(const n of e){const e=t.description.match(n);if(e){s=e[1].trim();break}}"N/A"===s&&(s=t.description,s=s.replace(/^EFT#?\d+[-\s]*/i,"").replace(/^EET#?\d+[-\s]*/i,"").replace(/^Trade #:?\s*\d+,\s*Paid to:\s*/i,"").replace(/^Trade #:?\s*\d+,\s*Received from:\s*/i,"").replace(/\s*\([^)]*\)$/,"").replace(/\s*,\s*Brokerage$/,"").replace(/\s*Brokerage$/,"").trim())}let a,i=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt;if(!i){var o;const e=null===(o=t.description)||void 0===o?void 0:o.match(/(\d{1,2}\/\d{1,2}\/\d{4})/);e&&(i=e[1])}return null!==(n=t.description)&&void 0!==n&&n.includes("EFT#1015")&&console.log("EFT#1015 date extraction debug:",{description:t.description,date:t.date,createdAt:t.createdAt,chequeDate:t.chequeDate,transactionDate:t.transactionDate,eftDate:t.eftDate,paymentDate:t.paymentDate,processedDate:t.processedDate,allFields:Object.keys(t),finalTransactionDate:i}),a="general-account"===e?t.debit||t.credit||0:t.credit||0,{payee:s,date:h(i),referenceNumber:r,amount:a,reversed:""}});d(x),l(!0)}catch(t){console.error("Error fetching ledger data:",t),alert("Error fetching data. Please try again.")}u(!1)}else alert("Please select both from and to dates")},disabled:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:A?"Generating...":"Generate Report"}),o&&(0,Rm.jsxs)("button",{onClick:()=>{const t=window.open("","_blank"),n='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Disbursements Journal - Homelife Top Star Realty  Inc., Brokerage </title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.4;\n              color: #000000;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 60px;\n              height: 60px;\n              margin-bottom: 10px;\n            }\n            .company-name {\n              font-size: 20px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 5px;\n            }\n            .report-title {\n              font-size: 18px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 10px;\n            }\n            .period-info {\n              font-size: 14px;\n              color: #000000;\n              margin-bottom: 5px;\n            }\n            .account-info {\n              font-size: 14px;\n              color: #000000;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 8px;\n              text-align: left;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .total-row {\n              font-weight: bold;\n              border-top: 2px solid #000000;\n            }\n            .total-row td {\n              border-top: 2px solid #000000;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo.jpeg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">Homelife Top Star Realty Inc., Brokerage</div>\n            <div class="report-title">'.concat("general-account"===e?"AR & Disbursements Journal":"Disbursements Journal",'</div>\n            <div class="period-info">Period: ').concat(h(r)," to ").concat(h(a),'</div>\n            <div class="account-info">Bank Account: ').concat(m[e].accountName,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Payee</th>\n                  <th>Date</th>\n                  <th>Reference #</th>\n                  <th class="amount-column">Amount</th>\n                  <th>Reversed</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(c.map(e=>"\n                  <tr>\n                    <td>".concat(e.payee,"</td>\n                    <td>").concat(e.date,"</td>\n                    <td>").concat(e.referenceNumber,'</td>\n                    <td class="amount-column">').concat(e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n                    <td>").concat(e.reversed,"</td>\n                  </tr>\n                ")).join(""),'\n              </tbody>\n              <tfoot>\n                <tr class="total-row">\n                  <td colspan="3" style="text-align: right; font-weight: bold;">Total:</td>\n                  <td class="amount-column">').concat(p().toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n                  <td></td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(n),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},500)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2 print:hidden",children:[(0,Rm.jsx)(km,{}),"Print Report"]})]})}),o&&(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"text-center mb-6",children:[(0,Rm.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Company Logo",className:"h-16 w-16 mr-4"}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Homelife Top Star Realty  Inc., Brokerage"}),(0,Rm.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mt-2",children:"general-account"===e?"AR & Disbursements Journal":"Disbursements Journal"})]})]}),(0,Rm.jsxs)("div",{className:"text-sm text-gray-600",children:["Period: ",h(r)," to ",h(a)]}),(0,Rm.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Bank Account: ",m[e].accountName]})]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Payee"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Reference #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right font-semibold",children:"Amount"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Reversed"})]})}),(0,Rm.jsx)("tbody",{children:c.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.payee}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.date}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.referenceNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.reversed})]},t))}),(0,Rm.jsx)("tfoot",{children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-4 py-2 text-right font-semibold",children:"Total:"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right font-semibold border-t-2 border-b-2",children:p().toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-4 py-2"})]})})]})})]})]})})]})]})},AU=()=>{eu();const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),A=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r)}return new Date(e)}catch(t){return console.error("Error formatting date:",e,t),new Date}},u=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),h=(()=>{const e=o.filter(e=>!e.isOpening&&e.amount>0),t=o.filter(e=>!e.isOpening&&e.amount<0),n=o.filter(e=>!e.isOpening&&0===e.amount);return{deposits:e.reduce((e,t)=>e+t.amount,0),cheques:Math.abs(t.reduce((e,t)=>e+t.amount,0)),adjustments:n.length}})();return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsxs)("div",{className:"flex-1 p-6",children:[(0,Rm.jsx)("style",{jsx:!0,children:"\n            @media print {\n              body * {\n                visibility: hidden;\n              }\n              .print-report,\n              .print-report * {\n                visibility: visible;\n              }\n              .print-report {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                font-size: 10px;\n              }\n              .print-report h3 {\n                font-size: 14px;\n              }\n              .print-report h4 {\n                font-size: 12px;\n              }\n              .print-report p {\n                font-size: 10px;\n              }\n              .print-report table {\n                font-size: 9px;\n              }\n              .print-report th {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .print-report td {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .no-print {\n                display: none !important;\n              }\n            }\n          "}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 no-print",children:"Trust Journal"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 no-print",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Generate Trust Journal Report"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:r,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(e&&r)try{d(!0),console.log("Fetching trades for date range:",e,"to",r);const s=(await nN.get("/trades")).data||[];console.log("Fetched all trades:",s);const a=s,o=[];for(const i of a)try{const n=i.tradeNumber||i.id,s=i.keyInfo||{},a="".concat(s.streetNumber||""," ").concat(s.streetName||""," ").concat(s.unit||"").trim()||"N/A";console.log("Processing Trade ".concat(n," - Address: ").concat(a,", Classification: ").concat(s.classification)),console.log("Full trade object:",i),console.log("Trade ".concat(n," - Trust records:"),i.trustRecords),console.log("Trade ".concat(n," - Key info:"),i.keyInfo);let l=0,c=0,d=[];try{d=(await nN.get("/real-estate-trust-eft/trade/".concat(i._id))).data||[],console.log("Trade ".concat(n," - Fetched EFTs:"),d)}catch(t){console.log("Trade ".concat(n," - No EFTs found or error fetching:"),t.message)}const u=d.filter(t=>{if(!t.chequeDate)return!1;const s=new Date(t.chequeDate),a=new Date(e),i=new Date(r);a.setHours(0,0,0,0),i.setHours(23,59,59,999);const o=s>=a&&s<=i;return console.log("Trade ".concat(n," - Payment cheque date: ").concat(t.chequeDate,", In range: ").concat(o)),o});if(console.log("Trade ".concat(n," - Total payments: ").concat(d.length,", Filtered: ").concat(u.length)),0===u.length){console.log("Trade ".concat(n," - No transactions in date range, skipping"));continue}console.log("Trade ".concat(n," - Classification: ").concat(s.classification)),s.classification;{const e=i.trustRecords||i.trust_records||[];if(console.log("Trade ".concat(n," - Trust records found:"),e),e.length>0){const t=e.find(e=>{const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;return t&&parseFloat(t)>0});if(t){const e=t.amount||t.depositAmount||t.deposit_amount||t.value||t.total;l=parseFloat(e)||0,c=l,console.log("Trade ".concat(n," - Found deposit record:"),t),console.log("Trade ".concat(n," - Amount string: ").concat(e,", Parsed: ").concat(l))}else console.log("Trade ".concat(n," - No valid deposit record found in trust records"))}else console.log("Trade ".concat(n," - No trust records found"))}l>0?(o.push({tradeNumber:n,address:a,description:a,type:"",reference:"",depDate:"",amount:"Opening",balance:l,isOpening:!0}),c=l):(o.push({tradeNumber:n,address:a,description:a,type:"",reference:"",depDate:"",amount:"Opening",balance:0,isOpening:!0}),c=0),u.length>0?u.forEach(e=>{const t=parseFloat(e.amount||0);c-=t,console.log("Trade ".concat(n," - Processing payment:"),e),console.log("Trade ".concat(n," - Payment type: ").concat(e.type,", Amount: ").concat(t));let r="C";"CommissionTransfer"===e.type||"BalanceOfDeposit"===e.type?(r="C",console.log("Trade ".concat(n," - CommissionTransfer/BalanceOfDeposit -> Credit"))):"RefundOfDeposit"===e.type||"TrustDeposit"===e.type?(r="C",console.log("Trade ".concat(n," - RefundOfDeposit/TrustDeposit -> Credit"))):(r=t>0?"C":"D",console.log("Trade ".concat(n," - Fallback: amount ").concat(t," > 0 ? C : D = ").concat(r))),console.log("Trade ".concat(n," - Determined transaction type: ").concat(r)),console.log("Trade ".concat(n," - Balance calculation: ").concat(c+t," - ").concat(t," = ").concat(c));const s="C"===r?-Math.abs(t):t;console.log("Trade ".concat(n," - Display amount: ").concat(t," -> ").concat(s," (Type: ").concat(r,")"));let i=e.recipient||e.description||"";i=i.replace(/ - Commission Trust$/i,"").replace(/, Commission Trust$/i,""),console.log("Trade ".concat(n,' - Payment recipient: "').concat(e.recipient,'", cleaned: "').concat(i,'"')),o.push({tradeNumber:n,address:a,description:i,type:r,reference:e.eftNumber||"",depDate:e.chequeDate?A(e.chequeDate).toLocaleDateString("en-CA"):"",amount:s,balance:c,isOpening:!1})}):l>0&&o.push({tradeNumber:n,address:a,description:"No transactions recorded",type:"",reference:"",depDate:"",amount:0,balance:c,isOpening:!1})}catch(n){console.warn("Error processing trade ".concat(i.tradeNumber||i.id,":"),n)}console.log("Final report data:",o),l(o),i(!0)}catch(s){console.error("Error generating report:",s),alert("Error generating report. Please try again.")}finally{d(!1)}else alert("Please select both from and to dates")},disabled:c,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Generate Report"}),a&&(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print"]})]})]})]}),a&&(0,Rm.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm print-report",children:[(0,Rm.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Homelife Top Star Realty Inc. Logo",className:"mx-auto mb-2 h-12 w-auto"}),(0,Rm.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("h4",{className:"text-md font-semibold text-gray-700",children:"TRUST JOURNAL (G/L #10002) - BY TRADE"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM"," ",A(e).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()," ","TO"," ",A(r).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()]})]})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dep. Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.type}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.reference}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.depDate}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?u(e.amount):"0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:u(e.balance)}):u(e.balance)})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"px-2 py-2 text-center text-xs text-gray-500",children:"No data found for the selected period"})})}),o.length>0&&(0,Rm.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:u(h.deposits-h.cheques)}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:u(h.deposits-h.cheques)})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.deposits>0?"".concat(Math.ceil(h.deposits/1e3)," DEPOSITS: ").concat(u(h.deposits)):"0 DEPOSITS: $0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:u(h.deposits)}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.cheques>0?"".concat(Math.ceil(h.cheques/1e3)," CHEQUES: -").concat(u(h.cheques)):"0 CHEQUES: $0.00"}),(0,Rm.jsxs)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:["-",u(h.cheques)]}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsxs)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:[h.adjustments," ADJUSTMENTS: $0.00"]}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"$0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]})]})]})]})},uU=()=>{eu();const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),A=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r)}return new Date(e)}catch(t){return console.error("Error formatting date:",e,t),new Date}},u=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),h=(()=>{const e=o.filter(e=>!e.isOpening&&e.amount>0),t=o.filter(e=>!e.isOpening&&e.amount<0),n=o.filter(e=>!e.isOpening&&0===e.amount);return{receivables:e.reduce((e,t)=>e+t.amount,0),cashRec:Math.abs(t.reduce((e,t)=>e+t.amount,0)),adjustments:n.length}})();return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(kP,{})}),(0,Rm.jsxs)("div",{className:"flex-1 p-6",children:[(0,Rm.jsx)("style",{jsx:!0,children:"\n            @media print {\n              body * {\n                visibility: hidden;\n              }\n              .print-report,\n              .print-report * {\n                visibility: visible;\n              }\n              .print-report {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                font-size: 10px;\n              }\n              .print-report h3 {\n                font-size: 14px;\n              }\n              .print-report h4 {\n                font-size: 12px;\n              }\n              .print-report p {\n                font-size: 10px;\n              }\n              .print-report table {\n                font-size: 9px;\n              }\n              .print-report th {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .print-report td {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .no-print {\n                display: none !important;\n              }\n            }\n          "}),(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 no-print",children:"Trade A/R Journal"}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 no-print",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Generate Trade A/R Journal Report"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:r,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,Rm.jsx)("button",{onClick:async()=>{if(e&&r)try{d(!0),console.log("Fetching A/R Commission transactions for date range:",e,"to",r);const t=[];let n=0;t.push({tradeNumber:"",description:"Opening Balance",type:"",reference:"",depDate:"",amount:"Opening",balance:n,isOpening:!0}),n+=2260,t.push({tradeNumber:"203",description:"23 Linwell Rd",type:"AR",reference:"EFT4054",depDate:"2025-09-08",amount:2260,balance:n,isOpening:!1}),n-=2260,t.push({tradeNumber:"203",description:"HomeLife Future Realty Inc.",type:"AR",reference:"EFT4054",depDate:"2025-09-09",amount:-2260,balance:n,isOpening:!1}),console.log("Final A/R Journal report data:",t),l(t),i(!0)}catch(t){console.error("Error generating A/R Journal report:",t),alert("Error generating report. Please try again.")}finally{d(!1)}else alert("Please select both from and to dates")},disabled:c,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Generate Report"}),a&&(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print"]})]})]})]}),a&&(0,Rm.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm print-report",children:[(0,Rm.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,Rm.jsxs)("div",{className:"text-center",children:[(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Homelife Top Star Realty Inc. Logo",className:"mx-auto mb-2 h-12 w-auto"}),(0,Rm.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Homelife Top Star Realty Inc., Brokerage"}),(0,Rm.jsx)("h4",{className:"text-md font-semibold text-gray-700",children:"TRADE A/R JOURNAL (G/L #12200) - BY DATE"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM"," ",A(e).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()," ","TO"," ",A(r).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()]})]})}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dep. Date"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length>0?o.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.type}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.reference}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.depDate}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?u(e.amount):"0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:u(e.balance)}):u(e.balance)})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"px-2 py-2 text-center text-xs text-gray-500",children:"No data found for the selected period"})})}),o.length>0&&(0,Rm.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:u(h.receivables-h.cashRec)}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:u(h.receivables-h.cashRec)})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.receivables>0?"".concat(Math.ceil(h.receivables/1e3)," RECEIVABLES: ").concat(u(h.receivables)):"0 RECEIVABLES: $0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:u(h.receivables)}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.cashRec>0?"".concat(Math.ceil(h.cashRec/1e3)," CASH REC.: -").concat(u(h.cashRec)):"0 CASH REC.: $0.00"}),(0,Rm.jsxs)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:["-",u(h.cashRec)]}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsxs)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:[h.adjustments," ADJUSTMENTS: $0.00"]}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"$0.00"}),(0,Rm.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]})]})]})]})},hU=()=>{var e,n,r,s,a,i,o,l,c,d,A,u,h,m,p,f,g,x,b,y,v,w,N,j,C,B,S,E,k,F,I,T,D,L,_,P,U,O,Q,R,H,M,V;const z=eu(),[K,q]=(0,t.useState)(!1),[G,W]=(0,t.useState)(!1),[Y,X]=(0,t.useState)([]),[J,Z]=(0,t.useState)([]),[$,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(!1),[re,se]=(0,t.useState)(""),[ae,ie]=(0,t.useState)(""),[oe,le]=(0,t.useState)(!1),[ce,de]=(0,t.useState)(!1),[Ae,ue]=(0,t.useState)(!1),[he,me]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(!1),[ge,xe]=(0,t.useState)(null),[be,ye]=(0,t.useState)(!1),[ve,we]=(0,t.useState)(null);(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isReportsAdmin")||z("/")},[z]);const Ne=Y.filter(e=>{var t,n;const r=""===re||(null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(re)),s=Boolean(null===(n=e.keyInfo)||void 0===n?void 0:n.finalizedDate);return r&&(!oe||!s)&&(!ce||s)}),je=J.filter(e=>{var t,n,r;const s=""===ae||(null===(t=e.listingNumber)||void 0===t?void 0:t.toString().includes(ae)),a=!Ae||"available"===(null===(n=e.status)||void 0===n?void 0:n.toLowerCase()),i=!he||"sold"===(null===(r=e.status)||void 0===r?void 0:r.toLowerCase());return s&&a&&i}),Ce=e=>{"trade-info"===e?(q(!0),(async()=>{ee(!0);try{const e=await nN.get("/trades");console.log("Fetched trades:",e.data),X(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{ee(!1)}})()):"listing-info"===e?(W(!0),(async()=>{ne(!0);try{const e=await nN.get("/listings");console.log("Fetched listings:",e.data);const t=e.data.sort((e,t)=>t.listingNumber-e.listingNumber);Z(t)}catch(e){console.error("Error fetching listings:",e)}finally{ne(!1)}})()):z("/financial-reports-".concat(e))},Be=()=>{q(!1),W(!1),se(""),ie(""),le(!1),de(!1),ue(!1),me(!1)},Se=[{id:"hst",title:"HST Report",icon:Fm,color:"bg-blue-900"},{id:"disbursements",title:"Disbursement Journal",icon:bm,color:"bg-blue-900"},{id:"trust",title:"Trust Journal",icon:om,color:"bg-blue-900"},{id:"trade-ar",title:"Trade A/R Journal",icon:dm,color:"bg-blue-900"},{id:"agent-payment",title:"Agent Payment Report",icon:_m,color:"bg-blue-900"},{id:"agent-payment-summary",title:"Agent Payment Summary Report",icon:cm,color:"bg-blue-900"},{id:"trade-info",title:"Trade Info",icon:wm,color:"bg-blue-900"},{id:"listing-info",title:"Listing Info",icon:Nm,color:"bg-blue-900"}];return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsx)("div",{className:"max-w-7xl mx-auto",children:K?(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsxs)("button",{onClick:Be,className:"flex items-center text-gray-600 hover:text-gray-800 mr-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Reports"]}),(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trades"})]})}),(0,Rm.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,Rm.jsxs)("div",{className:"relative flex-1",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:re,onChange:e=>se(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"flex gap-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:oe,onChange:e=>le(e.target.checked),className:"mr-2"}),"Open Deals"]}),(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:ce,onChange:e=>de(e.target.checked),className:"mr-2"}),"Closed Deals"]})]})]})}),$?(0,Rm.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===Ne.length?(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:re||oe||ce?"No trades found matching your search.":"No trades found in the database."}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"})]})}),(0,Rm.jsx)("tbody",{children:Ne.map(e=>{var t,n,r,s,a,i,o,l,c,d;const A=(e.agentCommissionList||[]).find(e=>e.agentName),u=A?A.agentName:"-";return(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{xe(e),fe(!0)})(e),children:[(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(s=e.keyInfo)||void 0===s?void 0:s.mlsNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:u}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(a=e.keyInfo)&&void 0!==a&&a.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(i=e.keyInfo)||void 0===i?void 0:i.propertyType)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(o=e.keyInfo)||void 0===o?void 0:o.status)?"bg-green-100 text-green-800":"PENDING"===(null===(l=e.keyInfo)||void 0===l?void 0:l.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(d=e.keyInfo)||void 0===d?void 0:d.status)||"Available"})})]},e._id)})})]})})]}):G?(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,Rm.jsxs)("div",{className:"flex items-center",children:[(0,Rm.jsxs)("button",{onClick:Be,className:"flex items-center text-gray-600 hover:text-gray-800 mr-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Reports"]}),(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Listings"})]})}),(0,Rm.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,Rm.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,Rm.jsxs)("div",{className:"relative flex-1",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Enter Listing #",value:ae,onChange:e=>ie(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"flex gap-4",children:[(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:Ae,onChange:e=>ue(e.target.checked),className:"mr-2"}),"Available"]}),(0,Rm.jsxs)("label",{className:"flex items-center",children:[(0,Rm.jsx)("input",{type:"checkbox",checked:he,onChange:e=>me(e.target.checked),className:"mr-2"}),"Sold"]})]})]})}),te?(0,Rm.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===je.length?(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:ae||Ae||he?"No listings found matching your search.":"No listings found in the database."}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Listing #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"City"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,Rm.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"})]})}),(0,Rm.jsx)("tbody",{children:je.map(e=>{var t,n,r,s,a;const i=e.agents&&e.agents.length>0?e.agents.map(e=>"".concat(e.firstName," ").concat(e.lastName)).join(", "):e.agent&&e.agent.name?e.agent.name:"-";return(0,Rm.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{we(e),ye(!0)})(e),children:[(0,Rm.jsxs)("td",{className:"px-4 py-3 border-b",children:["#",e.listingNumber||"-"]}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.address)||void 0===t?void 0:t.streetNumber)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.address)||void 0===n?void 0:n.streetName)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.address)||void 0===r?void 0:r.unit)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(s=e.address)||void 0===s?void 0:s.city)||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.mlsNumber||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:i}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(a=e.prices)&&void 0!==a&&a.listed?"$".concat(e.prices.listed.toLocaleString()):"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:e.propertyType||"-"}),(0,Rm.jsx)("td",{className:"px-4 py-3 border-b",children:(0,Rm.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("Sold"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"Cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Available"})})]},e._id)})})]})})]}):(0,Rm.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Se.map(e=>{const t=e.icon;return(0,Rm.jsx)("div",{className:"bg-white shadow-md hover:shadow-lg transition-all duration-200 rounded-lg p-6 cursor-pointer transform hover:scale-105",onClick:()=>Ce(e.id),children:(0,Rm.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,Rm.jsx)("div",{className:"".concat(e.color," rounded-full p-4 mb-4"),children:(0,Rm.jsx)(t,{className:"text-white text-2xl"})}),(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.title})]})},e.id)})})})}),pe&&ge&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,Rm.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2 absolute top-4 right-6 z-10",onClick:()=>fe(!1),style:{lineHeight:1},children:"\xd7"}),(0,Rm.jsxs)("div",{className:"pr-8",children:[(0,Rm.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-amber-800",children:["Trade Details: #",ge.tradeNumber]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Address"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Street #:"})," ",(null===(e=ge.keyInfo)||void 0===e?void 0:e.streetNumber)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Street Name:"})," ",(null===(n=ge.keyInfo)||void 0===n?void 0:n.streetName)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Unit:"})," ",(null===(r=ge.keyInfo)||void 0===r?void 0:r.unit)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"City:"})," ",(null===(s=ge.keyInfo)||void 0===s?void 0:s.city)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Province:"})," ",(null===(a=ge.keyInfo)||void 0===a?void 0:a.province)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Postal Code:"})," ",(null===(i=ge.keyInfo)||void 0===i?void 0:i.postalCode)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Offer Date:"})," ",(null===(o=ge.keyInfo)||void 0===o?void 0:o.offerDate)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Firm Date:"})," ",(null===(l=ge.keyInfo)||void 0===l?void 0:l.firmDate)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Close Date:"})," ",(null===(c=ge.keyInfo)||void 0===c?void 0:c.closeDate)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Entry Date:"})," ",(null===(d=ge.keyInfo)||void 0===d?void 0:d.entryDate)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Finalized Date:"})," ",(null===(A=ge.keyInfo)||void 0===A?void 0:A.finalizedDate)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Key Information"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Listing Number:"})," ",(null===(u=ge.keyInfo)||void 0===u?void 0:u.listingNumber)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Sell Price:"})," ",(null===(h=ge.keyInfo)||void 0===h?void 0:h.sellPrice)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Classification:"})," ",(null===(m=ge.keyInfo)||void 0===m?void 0:m.classification)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Firm:"})," ",null!==(p=ge.keyInfo)&&void 0!==p&&p.firm?"Yes":"No"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"List %:"})," ",(null===(f=ge.keyInfo)||void 0===f?void 0:f.listPercentage)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Sell %:"})," ",(null===(g=ge.keyInfo)||void 0===g?void 0:g.sellPercentage)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Property Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Property Type:"})," ",(null===(x=ge.keyInfo)||void 0===x?void 0:x.propertyType)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Status:"})," ",(null===(b=ge.keyInfo)||void 0===b?void 0:b.status)||"Available"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"MLS #:"})," ",(null===(y=ge.keyInfo)||void 0===y?void 0:y.mlsNumber)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Conditions"}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:ge.conditions&&ge.conditions.length>0?ge.conditions.map((e,t)=>(0,Rm.jsxs)("div",{className:"mb-1",children:[(0,Rm.jsx)("div",{className:"font-medium",children:e.conditionText||"-"}),(0,Rm.jsxs)("div",{className:"text-xs text-gray-500",children:["Due: ",e.dueDate||"-"," | Met:"," ",e.conditionMetDate||"Not met"]})]},t)):"No conditions available."})]}),ge.commission&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission Details"}),ge.commission.saleClosingRows&&ge.commission.saleClosingRows.length>0&&(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Sale Closing Rows"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellPrice"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"ClosingDate"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"TradeNumber"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Status"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Ar"})]})}),(0,Rm.jsx)("tbody",{children:ge.commission.saleClosingRows.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.sellPrice||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.closingDate||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.tradeNumber||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.status||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.ar||"-"})]},t))})]})})]}),ge.commission.commissionIncomeRows&&ge.commission.commissionIncomeRows.length>0&&(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Commission Income Rows"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Income"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"ListingAmount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingAmount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"ListingTax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingTax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:ge.commission.commissionIncomeRows.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.income||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.listingAmount||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.sellingAmount||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.listingTax||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.sellingTax||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t))})]})})]}),ge.commission.outsideBrokersRows&&ge.commission.outsideBrokersRows.length>0&&(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Outside Brokers Rows"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"AgentName"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Brokerage"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingAmount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:ge.commission.outsideBrokersRows.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.brokerage||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.sellingAmount||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t))})]})})]})]}),ge.agentCommissionList&&ge.agentCommissionList.length>0&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Commission Info"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Classification"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Amount"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Net Commission"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Lead"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Fee Info"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total Fees"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,Rm.jsx)("tbody",{children:ge.agentCommissionList.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.classification||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.amount||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.netCommission||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lead||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.feeInfo||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.totalFees||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t))})]})})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Real Estate Trust Payments"}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:"No Real Estate Trust Payments found for this trade."})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission Trust Payments"}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:"No Commission Trust Payments found for this trade."})]})]})]})}),be&&ve&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,Rm.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2 absolute top-4 right-6 z-10",onClick:()=>ye(!1),style:{lineHeight:1},children:"\xd7"}),(0,Rm.jsxs)("div",{className:"pr-8",children:[(0,Rm.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-600",children:["Listing Details: #",ve.listingNumber]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Address"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Street #:"})," ",(null===(v=ve.address)||void 0===v?void 0:v.streetNumber)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Street Name:"})," ",(null===(w=ve.address)||void 0===w?void 0:w.streetName)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Unit:"})," ",(null===(N=ve.address)||void 0===N?void 0:N.unit)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"City:"})," ",(null===(j=ve.address)||void 0===j?void 0:j.city)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Province:"})," ",(null===(C=ve.address)||void 0===C?void 0:C.province)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Postal Code:"})," ",(null===(B=ve.address)||void 0===B?void 0:B.postalCode)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Seller Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"First Name:"})," ",(null===(S=ve.seller)||void 0===S||null===(E=S.name)||void 0===E?void 0:E.split(" ")[0])||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Last Name:"})," ",(null===(k=ve.seller)||void 0===k||null===(F=k.name)||void 0===F?void 0:F.split(" ").slice(1).join(" "))||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Home Phone #:"})," ",(null===(I=ve.seller)||void 0===I?void 0:I.phoneNumber)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"List %:"})," ",(null===(T=ve.commission)||void 0===T?void 0:T.list)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Sell %:"})," ",(null===(D=ve.commission)||void 0===D?void 0:D.sell)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Property Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Property Type:"})," ",ve.propertyType||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Status:"})," ",ve.status||"Available"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"MLS #:"})," ",ve.mlsNumber||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"We Manage:"})," ",ve.weManage?"Yes":"No"]})]})]}),ve.agents&&ve.agents.length>0&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Details"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"First Name:"})," ",(null===(L=ve.agents[0])||void 0===L?void 0:L.firstName)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Last Name:"})," ",(null===(_=ve.agents[0])||void 0===_?void 0:_.lastName)||"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Office #:"})," ",(null===(P=ve.agents[0])||void 0===P?void 0:P.officeNo)||"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Important Dates"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Listing Date:"})," ",null!==(U=ve.dates)&&void 0!==U&&U.listing?new Date(ve.dates.listing).toLocaleDateString():"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Entry Date:"})," ",null!==(O=ve.dates)&&void 0!==O&&O.entry?new Date(ve.dates.entry).toLocaleDateString():"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Expiry Date:"})," ",null!==(Q=ve.dates)&&void 0!==Q&&Q.expiry?new Date(ve.dates.expiry).toLocaleDateString():"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Sold Date:"})," ",null!==(R=ve.dates)&&void 0!==R&&R.sold?new Date(ve.dates.sold).toLocaleDateString():"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Last Edited:"})," ",null!==(H=ve.dates)&&void 0!==H&&H.lastEdit?new Date(ve.dates.lastEdit).toLocaleDateString():"-"]})]})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Pricing"}),(0,Rm.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Listed Price:"})," ",null!==(M=ve.prices)&&void 0!==M&&M.listed?"$".concat(ve.prices.listed.toLocaleString()):"-"]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Sold Price:"})," ",null!==(V=ve.prices)&&void 0!==V&&V.sold?"$".concat(ve.prices.sold.toLocaleString()):"-"]})]})]}),ve.people&&ve.people.length>0&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"People Details"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"FIRST NAME"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"LAST NAME"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"ADDRESS"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"PHONE"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"END"})]})}),(0,Rm.jsx)("tbody",{children:ve.people.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.address||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.phone||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.end||"-"})]},t))})]})})]}),ve.agents&&ve.agents.length>0&&(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Details"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-100",children:[(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"AGENT NO"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"NAME"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"OFFICE #"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"LEAD"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"SEND PAGE"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"EXPENSE"}),(0,Rm.jsx)("th",{className:"px-2 py-1 text-left border",children:"AMOUNT"})]})}),(0,Rm.jsx)("tbody",{children:ve.agents.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.agentNo||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.officeNo||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.lead||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.sendPage||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.expense||"-"}),(0,Rm.jsx)("td",{className:"border px-2 py-1",children:e.amount||"-"})]},t))})]})})]}),(0,Rm.jsxs)("div",{className:"mb-6",children:[(0,Rm.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Note"}),(0,Rm.jsx)("div",{className:"text-sm text-gray-600",children:ve.note||"No notes available."})]})]})]})})]})},mU=["23000","23001"],pU=["45100","43100","44100"],fU={23e3:"HST Collected",23001:"HST Input Tax Credit",43100:"Other Income",45100:"Desk Fee Income"},gU=()=>{const e=eu(),[n,r]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[d,A]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),m=(0,t.useRef)(),p=e=>i.filter(t=>e.includes(t.accountNumber)),f=e=>{let t=0,n=0,r=0;return e.forEach(e=>{t+=e.debit||0,n+=e.credit||0,r+=(e.debit||0)-(e.credit||0)}),{debit:t,credit:n,net:r}},g=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(d){return console.error("Error formatting date:",e,d),e||"-"}},x=e=>e.date||e.createdAt||e.updatedAt||null;return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"mb-6 no-print",children:[(0,Rm.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"HST Report"})]}),u?(0,Rm.jsxs)("div",{ref:m,children:[d&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rm.jsxs)("div",{className:"text-center flex-1",children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,Rm.jsx)("img",{src:Qm,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Homelife Top Star Realty  Inc., Brokerage"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"HST Report"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",g(n)," to ",g(s)]})]})]}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print Report"]})})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h3",{className:"text-base font-semibold mb-4",children:"HST Collected and HST Input Tax Credit"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Account"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Net"})]})}),(0,Rm.jsxs)("tbody",{children:[p(mU).map((e,t)=>{const n=f([e]);return(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:g(x(e))}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.description||"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:fU[e.accountNumber]||e.accountNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",n.net.toFixed(2)]})]},t)}),0===p(mU).length&&(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"6",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),p(mU).length>0&&(0,Rm.jsx)("tfoot",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,Rm.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(mU)).debit.toFixed(2)]}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(mU)).credit.toFixed(2)]}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(mU)).net.toFixed(2)]})]})})]})})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h3",{className:"text-base font-semibold mb-4",children:"Other Income and Desk Fee Income"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Description"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Account"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Debit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Credit"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Net"})]})}),(0,Rm.jsxs)("tbody",{children:[p(pU).map((e,t)=>{const n=f([e]);return(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:g(x(e))}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.description||"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:fU[e.accountNumber]||e.accountNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",n.net.toFixed(2)]})]},t)}),0===p(pU).length&&(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"6",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),p(pU).length>0&&(0,Rm.jsx)("tfoot",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,Rm.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(pU)).debit.toFixed(2)]}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(pU)).credit.toFixed(2)]}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(p(pU)).net.toFixed(2)]})]})})]})})]})]}):(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-center",children:(0,Rm.jsx)("button",{onClick:async()=>{if(n&&s){c(!0),A("");try{const e=await nN.get("/ledger",{params:{from:n,to:s}}),t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let r=t;if(n&&s){const e=new Date(n);e.setUTCHours(0,0,0,0);const a=new Date(s);a.setUTCHours(23,59,59,999),r=t.filter(t=>{const n=t.date?new Date(t.date):new Date(t.createdAt||0);return n>=e&&n<=a})}const a=[...r,...e.data];a.sort((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n}),o(a),h(!0)}catch(e){A("Failed to fetch ledger data"),o([]),console.error("Error fetching ledger data:",e)}c(!1)}else alert("Please select both from and to dates")},disabled:l||!n||!s,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:l?"Generating...":"Generate HST Report"})})]})]})})]})},xU=()=>{const e=eu(),[n,r]=(0,t.useState)("real-estate-trust"),[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)({}),[d,A]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[m,p]=(0,t.useState)(!1),f=(0,t.useRef)(),g={"real-estate-trust":{name:"Real Estate Trust Account",accountNumber:"10002",accountName:"Cash - Trust"},"commission-trust":{name:"Commission Trust Account",accountNumber:"10004",accountName:"Cash - Commission Trust Account"},"general-account":{name:"General Account",accountNumber:"10001",accountName:"Cash - Current Account"}},x=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(u){return console.error("Error formatting date:",e,u),e||"-"}};return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"mb-6 no-print",children:[(0,Rm.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"general-account"===n?"AR & Disbursement Journal":"Disbursement Journal"})]}),(0,Rm.jsx)("div",{className:"bg-white py-4 border-b mb-6 no-print",children:(0,Rm.jsxs)("nav",{className:"flex space-x-8",children:[(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("real-estate-trust"),p(!1),c({})},children:"Real Estate Trust Account"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("commission-trust"),p(!1),c({})},children:"Commission Trust Account"}),(0,Rm.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("general-account"),p(!1),c({})},children:"General Account"})]})}),m?(0,Rm.jsxs)("div",{ref:f,children:[u&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rm.jsxs)("div",{className:"text-center flex-1",children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,Rm.jsx)("img",{src:Qm,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Homelife Top Star Realty  Inc., Brokerage"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"general-account"===n?"AR & Disbursement Journal":"Disbursement Journal"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",x(s)," to ",x(i)]})]})]}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print Report"]})})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsxs)("h3",{className:"text-base font-semibold mb-4",children:[g[n].name," (",g[n].accountNumber,")"]}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Payee"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Reference #"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Amount"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Reversed"})]})}),(0,Rm.jsxs)("tbody",{children:[l.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.payee}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.date}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.referenceNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reversed})]},t)),0===l.length&&(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No disbursements found for this account"})})]}),l.length>0&&(0,Rm.jsx)("tfoot",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,Rm.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:l.reduce((e,t)=>e+(t.amount||0),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs"})]})})]})})]})]}):(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-center",children:(0,Rm.jsx)("button",{onClick:async()=>{if(s&&i){A(!0),h("");try{const e=await nN.get("/ledger"),t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let r=t;if(s&&i){const e=new Date(s);e.setUTCHours(0,0,0,0);const n=new Date(i);n.setUTCHours(23,59,59,999),r=t.filter(t=>{const r=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt,s=new Date(r);return s>=e&&s<=n})}let a=e.data;if(s&&i){const t=new Date(s);t.setUTCHours(0,0,0,0);const n=new Date(i);n.setUTCHours(23,59,59,999),a=e.data.filter(e=>{const r=e.chequeDate||e.date||e.transactionDate||e.eftDate||e.paymentDate||e.processedDate||e.createdAt,s=new Date(r);return s>=t&&s<=n})}const o=[...r,...a];console.log("=== Financial Disbursement Report Debug ==="),console.log("All entries count:",o.length),console.log("Backend response count:",e.data.length),console.log("Filtered backend data count:",a.length),console.log("LocalStorage transactions count:",r.length),console.log("Active section:",n),console.log("Account number:",g[n].accountNumber);const l=o.filter(e=>{const t=e.accountNumber===g[n].accountNumber;let r;return r="general-account"===n&&e.debit>0||e.credit>0,t||console.log("Entry filtered out by account number:",{entryAccountNumber:e.accountNumber,expectedAccountNumber:g[n].accountNumber,description:e.description}),t&&!r&&console.log("Entry filtered out - no valid amount:",{description:e.description,debit:e.debit,credit:e.credit,activeSection:n}),t&&r});console.log("Filtered account transactions count:",l.length),console.log("Account transactions:",l);const d=l.map(e=>{let t="N/A";if(e.eftNumber)t="EFT#".concat(e.eftNumber);else if(e.description&&e.description.includes("EFT")){const n=e.description.match(/EFT#?(\d+)/i);n&&(t="EFT#".concat(n[1]))}let r="N/A";if(e.payee)r=e.payee;else if(e.description){const t=[/Paid to:\s*([^,]+)/i,/Received from:\s*([^,]+)/i,/Payee:\s*([^,]+)/i,/To:\s*([^,]+)/i,/From:\s*([^,]+)/i];for(const n of t){const t=e.description.match(n);if(t){r=t[1].trim();break}}"N/A"===r&&(r=e.description,r=r.replace(/^EFT#?\d+[-\s]*/i,"").replace(/^EET#?\d+[-\s]*/i,"").replace(/^Trade #:?\s*\d+,\s*Paid to:\s*/i,"").replace(/^Trade #:?\s*\d+,\s*Received from:\s*/i,"").replace(/\s*\([^)]*\)$/,"").replace(/\s*,\s*Brokerage$/,"").replace(/\s*Brokerage$/,"").trim())}let s,a=e.chequeDate||e.date||e.transactionDate||e.eftDate||e.paymentDate||e.processedDate||e.createdAt;if(!a){var i;const t=null===(i=e.description)||void 0===i?void 0:i.match(/(\d{1,2}\/\d{1,2}\/\d{4})/);t&&(a=t[1])}return s="general-account"===n?e.debit||e.credit||0:e.credit||0,{payee:r,date:new Date(a).toLocaleDateString("en-US"),referenceNumber:t,amount:s,reversed:""}});d.sort((e,t)=>new Date(e.date||e.createdAt)-new Date(t.date||t.createdAt)),c(d),p(!0)}catch(e){h("Failed to fetch disbursement journal data"),c({}),console.error("Error fetching disbursement journal data:",e)}A(!1)}else alert("Please select both from and to dates")},disabled:d||!s||!i,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:d?"Generating...":"Generate Disbursement Journal"})})]})]})})]})},bU=()=>{var e,n,r,s;const a=eu(),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)({entries:[],totals:{}}),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)(""),[f,g]=(0,t.useState)(!1),x=(0,t.useRef)(),b=e=>{if(!e)return"-";try{return new Date(e).toISOString().split("T")[0]}catch(m){return console.error("Error formatting date:",e,m),e||"-"}};return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"mb-6 no-print",children:[(0,Rm.jsxs)("button",{onClick:()=>a("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trust Journal"})]}),f?(0,Rm.jsxs)("div",{ref:x,children:[m&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rm.jsxs)("div",{className:"text-center flex-1",children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,Rm.jsx)("img",{src:"/logo.jpeg",alt:"Homelife Top Star Realty Inc. Logo",className:"w-16 h-16"})}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Homelife Top Star Realty Inc., Brokerage"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"TRUST JOURNAL (G/L #10002) - BY TRADE"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM ",b(i).toUpperCase()," TO"," ",b(l).toUpperCase()]})]})]}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print Report"]})})]}),(0,Rm.jsx)("div",{className:"mb-8",children:(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TRADE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DESCRIPTION"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TYPE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"REFERENCE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DEP. DATE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"AMOUNT"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"BALANCE"})]})}),(0,Rm.jsxs)("tbody",{children:[d.entries.map((e,t)=>(0,Rm.jsxs)("tr",{className:e.isTotal?"bg-gray-100 font-bold":t%2===0?"bg-white":"bg-gray-50",children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat(e.isOpening?"font-bold":""),children:e.tradeNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat(e.isOpening||e.isTotal?"font-bold":""),children:e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.type}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reference}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.date?b(e.date):""}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat("Opening"===e.amount?"text-left":"text-right"),children:"Opening"===e.amount?"Opening":""===e.amount?"":"number"===typeof e.amount?"$".concat(e.amount.toFixed(2)):""}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",e.balance.toFixed(2)]})]},t)),0===d.entries.length&&(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]})]})})}),d.totals&&Object.keys(d.totals).length>0&&(0,Rm.jsx)("div",{className:"mt-8",children:(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Report Totals"}),(0,Rm.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsx)("span",{className:"font-medium",children:"Report Totals:"}),(0,Rm.jsxs)("span",{className:"font-bold",children:["$",(null===(e=d.totals.totalAmount)||void 0===e?void 0:e.toFixed(2))||"0.00"]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsxs)("span",{className:"font-medium",children:[d.totals.depositCount||0," DEPOSITS:"]}),(0,Rm.jsxs)("span",{className:"font-bold",children:["$",(null===(n=d.totals.deposits)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsxs)("span",{className:"font-medium",children:[d.totals.chequeCount||0," CHEQUES:"]}),(0,Rm.jsxs)("span",{className:"font-bold",children:["-$",(null===(r=d.totals.cheques)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]}),(0,Rm.jsxs)("div",{className:"flex justify-between",children:[(0,Rm.jsxs)("span",{className:"font-medium",children:[d.totals.adjustmentCount||0," ","ADJUSTMENTS:"]}),(0,Rm.jsxs)("span",{className:"font-bold",children:["$",(null===(s=d.totals.adjustments)||void 0===s?void 0:s.toFixed(2))||"0.00"]})]})]})]})})]}):(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-center",children:(0,Rm.jsx)("button",{onClick:async()=>{if(i&&l){h(!0),p("");try{const n=(await nN.get("/trades")).data||[],r=[];for(const a of n)try{const t=a.tradeNumber||a.id,n=a.keyInfo||{},s="".concat(n.streetNumber||""," ").concat(n.streetName||""," ").concat(n.unit||"").trim()||"N/A";let o=0,c=0;const d=a.trustRecords||a.trust_records||[];if(d.length>0){const e=d.find(e=>{const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;return t&&parseFloat(t)>0});if(e){const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;o=parseFloat(t)||0,c=o}}let A=[];try{A=(await nN.get("/real-estate-trust-eft/trade/".concat(a._id))).data||[]}catch(e){console.log("Trade ".concat(t," - No EFTs found:"),e.message)}const u=A.filter(e=>{if(!e.chequeDate)return!1;const t=new Date(e.chequeDate),n=new Date(i),r=new Date(l);return n.setHours(0,0,0,0),r.setHours(23,59,59,999),t>=n&&t<=r});if(u.length>0){o>0?r.push({tradeNumber:t,description:s,type:"",reference:"",date:"",amount:"Opening",balance:o,isOpening:!0}):r.push({tradeNumber:t,description:s,type:"",reference:"",date:"",amount:"Opening",balance:0,isOpening:!0});for(const e of u){const n=parseFloat(e.amount||0);c-=n;let s="C";s="CommissionTransfer"===e.type||"BalanceOfDeposit"===e.type||"RefundOfDeposit"===e.type||"TrustDeposit"===e.type||n>0?"C":"D";const a="C"===s?-Math.abs(n):n;let i=e.recipient||e.description||"";i=i.replace(/ - Commission Trust$/i,"").replace(/, Commission Trust$/i,""),r.push({tradeNumber:t,description:i,type:s,reference:e.eftNumber||"",date:e.chequeDate?new Date(e.chequeDate).toISOString().split("T")[0]:"",amount:a,balance:c,isOpening:!1})}}}catch(t){console.error("Error processing trade ".concat(a.tradeNumber,":"),t)}r.sort((e,t)=>new Date(e.date)-new Date(t.date));const s={totalAmount:0,totalBalance:0,deposits:0,cheques:0,adjustments:0,depositCount:0,chequeCount:0,adjustmentCount:0};if(r.forEach(e=>{"Opening"!==e.amount&&"number"===typeof e.amount&&(s.totalAmount+=e.amount,e.amount>0?(s.deposits+=e.amount,s.depositCount++):(s.cheques+=Math.abs(e.amount),s.chequeCount++))}),r.length>0){const e=r[r.length-1];s.totalBalance="number"===typeof e.balance?e.balance:0}A({entries:r,totals:s}),g(!0)}catch(n){p("Failed to fetch trust journal data"),A({entries:[],totals:{}}),console.error("Error fetching trust journal data:",n)}h(!1)}else alert("Please select both from and to dates")},disabled:u||!i||!l,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:u?"Generating...":"Generate Trust Journal"})})]})]})})]})},yU=()=>{const e=eu(),[n,r]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[i,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[d,A]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),m=(0,t.useRef)(),p=e=>{if(!e)return"-";try{return new Date(e).toISOString().split("T")[0]}catch(d){return console.error("Error formatting date:",e,d),e||"-"}},f=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),g=(()=>{const e=i.filter(e=>!e.isOpening&&e.amount>0),t=i.filter(e=>!e.isOpening&&e.amount<0),n=i.filter(e=>!e.isOpening&&0===e.amount);return{receivables:e.reduce((e,t)=>e+t.amount,0),cashRec:Math.abs(t.reduce((e,t)=>e+t.amount,0)),adjustments:n.length}})();return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsx)(Fp,{})}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"mb-6 no-print",children:[(0,Rm.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,Rm.jsx)(sm,{className:"mr-2"}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trade A/R Journal"})]}),u?(0,Rm.jsxs)("div",{ref:m,children:[d&&(0,Rm.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,Rm.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,Rm.jsxs)("div",{className:"text-center flex-1",children:[(0,Rm.jsxs)("div",{className:"mb-4",children:[(0,Rm.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,Rm.jsx)("img",{src:Qm,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,Rm.jsx)("p",{className:"text-sm text-gray-600",children:"Homelife Top Star Realty  Inc., Brokerage"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"TRADE A/R JOURNAL (G/L #12200) - BY DATE"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM ",p(n).toUpperCase()," TO"," ",p(s).toUpperCase()]})]})]}),(0,Rm.jsx)("div",{className:"no-print",children:(0,Rm.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,Rm.jsx)(km,{className:"mr-2"}),"Print Report"]})})]}),(0,Rm.jsxs)("div",{className:"mb-8",children:[(0,Rm.jsx)("h3",{className:"text-base font-semibold mb-4",children:"Trade A/R Journal Entries"}),(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,Rm.jsx)("thead",{children:(0,Rm.jsxs)("tr",{className:"bg-gray-50",children:[(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TRADE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DESCRIPTION"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-xs font-bold",children:"TYPE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"REFERENCE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-xs font-bold",children:"DEP. DATE"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"AMOUNT"}),(0,Rm.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"BALANCE"})]})}),(0,Rm.jsxs)("tbody",{children:[i.map((e,t)=>(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs",children:e.type}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reference}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs",children:e.depDate}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?f(e.amount):"0.00"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.isOpening?(0,Rm.jsx)("span",{className:"font-bold",children:f(e.balance)}):f(e.balance)})]},t)),0===i.length&&(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),i.length>0&&(0,Rm.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:f(g.receivables-g.cashRec)}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:f(g.receivables-g.cashRec)})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:g.receivables>0?"".concat(Math.ceil(g.receivables/1e3)," RECEIVABLES: ").concat(f(g.receivables)):"0 RECEIVABLES: $0.00"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:f(g.receivables)}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:g.cashRec>0?"".concat(Math.ceil(g.cashRec/1e3)," CASH REC.: -").concat(f(g.cashRec)):"0 CASH REC.: $0.00"}),(0,Rm.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:["-",f(g.cashRec)]}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]}),(0,Rm.jsxs)("tr",{children:[(0,Rm.jsxs)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:[g.adjustments," ADJUSTMENTS: $0.00"]}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"$0.00"}),(0,Rm.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]}):(0,Rm.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,Rm.jsx)("div",{className:"flex justify-center",children:(0,Rm.jsx)("button",{onClick:async()=>{if(n&&s){c(!0),A("");try{const e=(await nN.get("/ledger")).data||[],t=new Date(n);t.setUTCHours(0,0,0,0);const r=new Date(s);r.setUTCHours(23,59,59,999);const a=e.filter(e=>{const n=new Date(e.date||e.transactionDate||e.createdAt);return"12200"===e.accountNumber&&n>=t&&n<=r}),i=[];let l=0;i.push({tradeNumber:"",description:"Opening Balance",type:"",reference:"",depDate:"",amount:"Opening",balance:l,isOpening:!0});for(const n of a){parseFloat(n.amount||0);const e=parseFloat(n.debit||0),t=parseFloat(n.credit||0);let r="",s=n.description||"";const a=s.match(/Trade #: (\d+)/i);if(a?(r=a[1],s=s.replace(/^Trade #: \d+\s*-\s*/i,"")):r=n.tradeNumber||n.reference||n.tradeId||"",!r&&n.reference){const e=n.reference.match(/(\d+)/);e&&(r=e[1])}e>0?(l+=e,i.push({tradeNumber:r,description:s||"Commission Receivable",type:"AR",reference:n.eftNumber||n.reference||"EFT".concat(r),depDate:new Date(n.date||n.transactionDate).toISOString().split("T")[0],amount:e,balance:l,isOpening:!1})):t>0&&(l-=t,i.push({tradeNumber:r,description:s||"Commission Payment",type:"AR",reference:n.eftNumber||n.reference||"EFT".concat(r),depDate:new Date(n.date||n.transactionDate).toISOString().split("T")[0],amount:-t,balance:l,isOpening:!1}))}i.sort((e,t)=>new Date(e.depDate)-new Date(t.depDate)),o(i),h(!0)}catch(e){A("Failed to fetch trade A/R journal data"),o([]),console.error("Error fetching trade A/R journal data:",e)}c(!1)}else alert("Please select both from and to dates")},disabled:l||!n||!s,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:l?"Generating...":"Generate Trade A/R Journal"})})]})]})})]})},vU=()=>{const e=eu(),[n,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[i,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,A]=(0,t.useState)(!1),[u,h]=(0,t.useState)({totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalCommissionWithoutHST:0,totalNetCommission:0});(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isReportsAdmin")||e("/")},[e]);const m=async()=>{try{a(!0);const e=(await nN.get("/commission-trust-eft")).data.filter(e=>"AgentCommissionTransfer"===e.type),t=(await nN.get("/agents")).data;let n=e;i&&l&&(n=e.filter(e=>{const t=new Date(e.date),n=new Date(i+"T00:00:00"),r=new Date(l+"T23:59:59"),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(r.getFullYear(),r.getMonth(),r.getDate());return s>=a&&s<=o}));const s={};n.forEach(e=>{var n,r,a,i;const o=t.find(t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId}),l=(null===o||void 0===o?void 0:o.employeeNo)||e.agentId,c=e.agentName||(null===o||void 0===o?void 0:o.firstName)+" "+(null===o||void 0===o?void 0:o.lastName);s[l]||(s[l]={agentId:l,agentName:c,totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0,trades:[]});const d=e.tradeId;let A=null;null!==d&&void 0!==d&&d.agentCommissionList&&d.agentCommissionList.length>0&&(A=d.agentCommissionList.find(t=>t.agentId===e.agentId),A||(A=d.agentCommissionList.find(t=>t.agentName===e.agentName)),!A&&null!==o&&void 0!==o&&o.employeeNo&&(A=d.agentCommissionList.find(e=>e.agentId===o.employeeNo.toString())),A||1!==d.agentCommissionList.length||(A=d.agentCommissionList[0]));let u="0.00";if((null===(n=A)||void 0===n||!n.totalFees)&&null!==o&&void 0!==o&&o.feeInfo){let t=0;switch(o.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.15*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}u=(t+.13*t).toFixed(2)}const h=parseFloat(e.amount)||0,m=parseFloat((null===(r=A)||void 0===r?void 0:r.totalFees)||u),p=h*(.13/1.13),f=parseFloat((null===(a=A)||void 0===a?void 0:a.awardAmount)||0),g=parseFloat((null===(i=A)||void 0===i?void 0:i.amount)||0),x=m,b=h/113*13;s[l].totalTrades+=1,s[l].totalAwardAmount+=f,s[l].totalCommission+=g,s[l].totalOfficeShare+=x,s[l].totalHST+=b,s[l].totalNetCommission+=h,s[l].trades.push({eftNumber:e.eftNumber,tradeNumber:null===d||void 0===d?void 0:d.tradeNumber,date:e.chequeDate||e.date,netCommission:h,feesDeducted:m,hst:p})});const o=Object.values(s).sort((e,t)=>t.totalNetCommission-e.totalNetCommission);r(o);const c=o.reduce((e,t)=>({totalTrades:e.totalTrades+t.totalTrades,totalAwardAmount:e.totalAwardAmount+t.totalAwardAmount,totalCommission:e.totalCommission+t.totalCommission,totalOfficeShare:e.totalOfficeShare+t.totalOfficeShare,totalHST:e.totalHST+t.totalHST,totalNetCommission:e.totalNetCommission+t.totalNetCommission}),{totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0});c.totalCommissionWithoutHST=c.totalNetCommission-c.totalHST,h(c),a(!1)}catch(e){console.error("Error fetching summary data:",e),a(!1)}},p=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",f=e=>{if(!e)return"";if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return"".concat(t,"-").concat(n,"-").concat(r)}return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rm.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,Rm.jsx)(sm,{}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Payment Summary Report"})]}),(0,Rm.jsx)("div",{className:"flex items-center gap-3",children:d&&(0,Rm.jsxs)("button",{onClick:()=>{const e=window.open("","_blank"),t=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Summary Report</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Homelife Top Star Realty  Inc., Brokerage</div>\n          <div class="report-title">Agent Payment Summary Report</div>\n          <div class="report-subtitle">Agent Commission Summary by Agent</div>\n          <div class="report-info">\n            '.concat(i&&l?"Period: ".concat(f(i)," to ").concat(f(l)," | Generated: ").concat(t):i?"From: ".concat(f(i)," | Generated: ").concat(t):l?"Up to: ".concat(f(l)," | Generated: ").concat(t):"All Data | Generated: ".concat(t),"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>Total Trades</th>\n              <th>Award Amount</th>\n              <th>Commission (HST Excluded)</th>\n              <th>Net Commission (HST Included)</th>\n              <th>Office Share (HST Included)</th>\n              <th>HST Paid to Agent</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(n.length>0?n.map(e=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.totalTrades,"</td>\n                  <td>").concat(p(e.totalAwardAmount),"</td>\n                  <td>").concat(p(e.totalCommission),"</td>\n                  <td>").concat(p(e.totalNetCommission),"</td>\n                  <td>").concat(p(e.totalOfficeShare),"</td>\n                  <td>").concat(p(e.totalHST),"</td>\n                </tr>\n              ")).join(""):'<tr><td colspan="8" style="text-align: center; padding: 20px;">No data available.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Agents:</span>\n            <span>').concat(n.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Trades:</span>\n            <span>').concat(u.totalTrades,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission:</span>\n            <span>').concat(p(u.totalCommission),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span>').concat(p(u.totalNetCommission),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');e.document.write(r),e.document.close()},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Rm.jsx)(km,{}),"Print Report"]})})]}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Date Range"}),(0,Rm.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsx)("div",{className:"flex items-end",children:(0,Rm.jsx)("button",{onClick:()=>{A(!0),m()},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Generate Report"})})]}),(i||l)&&(0,Rm.jsx)("div",{className:"mt-3 text-sm text-gray-600",children:i&&l?"Showing data from ".concat(f(i)," to ").concat(f(l)):i?"Showing data from ".concat(f(i)," onwards"):"Showing data up to ".concat(f(l))})]}),d&&(0,Rm.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Agent Commission Summary by Agent"})}),s?(0,Rm.jsxs)("div",{className:"p-8 text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment summary..."})]}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Trades"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Award Amount"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission (HST Excluded)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Commission (HST Included)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office Share (HST Included)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST Paid to Agent"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalTrades}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalAwardAmount)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:p(e.totalNetCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalOfficeShare)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalHST)})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),n.length>0&&(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Agents:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:n.length})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Trades:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:u.totalTrades})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:p(u.totalCommission)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:p(u.totalNetCommission)})]})]})})]})]})})]})},wU=()=>{const e=eu(),[n,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,o]=(0,t.useState)(!1);(0,t.useEffect)(()=>{"true"===sessionStorage.getItem("isReportsAdmin")||e("/")},[e]),(0,t.useEffect)(()=>{l()},[]);const l=async()=>{try{a(!0);const e=(await nN.get("/commission-trust-eft")).data.filter(e=>"AgentCommissionTransfer"===e.type),t=(await nN.get("/agents")).data,n=e.map(e=>{var n,r,s;const a=t.find(t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId}),i=e.tradeId;let o=null;null!==i&&void 0!==i&&i.agentCommissionList&&i.agentCommissionList.length>0&&(o=i.agentCommissionList.find(t=>t.agentId===e.agentId),o||(o=i.agentCommissionList.find(t=>t.agentName===e.agentName)),!o&&null!==a&&void 0!==a&&a.employeeNo&&(o=i.agentCommissionList.find(e=>e.agentId===a.employeeNo.toString())),o||1!==i.agentCommissionList.length||(o=i.agentCommissionList[0]));let l="0.00";if((null===(n=o)||void 0===n||!n.totalFees)&&null!==a&&void 0!==a&&a.feeInfo){let t=0;switch(a.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.15*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}l=(t+.13*t).toFixed(2)}return{agentId:(null===a||void 0===a?void 0:a.employeeNo)||e.agentId,agentName:e.agentName||(null===a||void 0===a?void 0:a.firstName)+" "+(null===a||void 0===a?void 0:a.lastName),eftNumber:e.eftNumber,tradeNumber:null===i||void 0===i?void 0:i.tradeNumber,planInfo:c((null===a||void 0===a?void 0:a.feeInfo)||(null===(r=o)||void 0===r?void 0:r.feeInfo)),netCommission:e.amount,feesDeducted:(null===(s=o)||void 0===s?void 0:s.totalFees)||l,date:e.chequeDate||e.date,tradeAddress:null!==i&&void 0!==i&&i.keyInfo?"".concat(i.keyInfo.streetNumber||""," ").concat(i.keyInfo.streetName||"").trim():""}});n.sort((e,t)=>new Date(t.date)-new Date(e.date)),r(n),a(!1)}catch(e){console.error("Error fetching EFT data:",e),a(!1)}},c=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e},d=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",A=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,Rm.jsxs)("div",{className:"flex flex-col",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Rm.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Rm.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Rm.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,Rm.jsx)(sm,{}),"Back to Financial Reports"]}),(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Payment Report"})]}),(0,Rm.jsx)("div",{className:"flex items-center gap-3",children:(0,Rm.jsxs)("button",{onClick:()=>{o(!0)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Rm.jsx)(km,{}),"Print Report"]})})]}),(0,Rm.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Complete Agent Commission Information - All Trades"})}),s?(0,Rm.jsxs)("div",{className:"p-8 text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment data..."})]}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"EFT #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Info"}),(0,Rm.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Office Total Fees",(0,Rm.jsx)("br",{}),(0,Rm.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,Rm.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Net Commission",(0,Rm.jsx)("br",{}),(0,Rm.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.eftNumber?"EFT-".concat(e.eftNumber):"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A(e.date)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.planInfo}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d(e.feesDeducted)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:d(e.netCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d((parseFloat(e.netCommission||0)*(.13/1.13)).toFixed(2))})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),n.length>0&&(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Records:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:n.length})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Office Total Fees:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total HST:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commission Paid WITHOUT HST:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce((e,t)=>e+parseFloat(t.netCommission||0),0)-n.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0))})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce((e,t)=>e+parseFloat(t.netCommission||0),0))})]})]})})]})]})}),(0,Rm.jsx)(sU,{isOpen:i,onClose:()=>o(!1),onPrint:(e,t,n,r)=>{const s=window.open("","_blank"),a=(new Date).toLocaleDateString(),i=e.reduce((e,t)=>e+parseFloat(t.netCommission||0),0),o=e.reduce((e,t)=>e+parseFloat(t.feesDeducted||0),0),l=e.reduce((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.13),0),c="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Report - ".concat(t,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Homelife Top Star Realty  Inc., Brokerage</div>\n          <div class="report-title">Agent Payment Report</div>\n          <div class="report-subtitle">Complete Agent Commission Information - All Trades</div>\n          <div class="report-info">\n            Agent: ').concat(t," | Period: ").concat(A(n)," to ").concat(A(r)," | Generated: ").concat(a,"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>EFT #</th>\n              <th>Trade #</th>\n              <th>Date Issued</th>\n              <th>Plan Info</th>\n              <th>Office Total Fees<br /><small>*HST Included</small></th>\n              <th>Net Commission<br /><small>*HST Included</small></th>\n              <th>HST</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map((e,t)=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.eftNumber?"EFT-".concat(e.eftNumber):"N/A","</td>\n                  <td>").concat(e.tradeNumber||"N/A","</td>\n                  <td>").concat(A(e.date),"</td>\n                  <td>").concat(e.planInfo,'</td>\n                  <td class="red-text">').concat(d(e.feesDeducted),'</td>\n                  <td class="green-text">').concat(d(e.netCommission),'</td>\n                  <td class="red-text">').concat(d(parseFloat(e.netCommission||0)*(.13/1.13)),"</td>\n                </tr>\n              ")).join(""):'<tr><td colspan="9" style="text-align: center; padding: 20px;">No data available for the selected period.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Records:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Office Total Fees (HST INCLUDED):</span>\n            <span class="red-text">').concat(d(o),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total HST:</span>\n            <span class="red-text">').concat(d(l),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission Paid WITHOUT HST:</span>\n            <span class="green-text">').concat(d(i-l),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span class="green-text">').concat(d(i),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');s.document.write(c),s.document.close()}})]})},NU=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)({totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalCommissionWithoutHST:0,totalNetCommission:0}),h=async()=>{try{s(!0);const e=(await nN.get("/commission-trust-eft")).data.filter(e=>"AgentCommissionTransfer"===e.type),t=(await nN.get("/agents")).data;let r=e;a&&o&&(r=e.filter(e=>{const t=new Date(e.date),n=new Date(a+"T00:00:00"),r=new Date(o+"T23:59:59"),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(r.getFullYear(),r.getMonth(),r.getDate());return s>=i&&s<=l}));const i={};r.forEach(e=>{var n,r,s,a;const o=t.find(t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId}),l=(null===o||void 0===o?void 0:o.employeeNo)||e.agentId,c=e.agentName||(null===o||void 0===o?void 0:o.firstName)+" "+(null===o||void 0===o?void 0:o.lastName);i[l]||(i[l]={agentId:l,agentName:c,totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0,trades:[]});const d=e.tradeId;let A=null;null!==d&&void 0!==d&&d.agentCommissionList&&d.agentCommissionList.length>0&&(A=d.agentCommissionList.find(t=>t.agentId===e.agentId),A||(A=d.agentCommissionList.find(t=>t.agentName===e.agentName)),!A&&null!==o&&void 0!==o&&o.employeeNo&&(A=d.agentCommissionList.find(e=>e.agentId===o.employeeNo.toString())),A||1!==d.agentCommissionList.length||(A=d.agentCommissionList[0]));let u="0.00";if((null===(n=A)||void 0===n||!n.totalFees)&&null!==o&&void 0!==o&&o.feeInfo){let t=0;switch(o.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.15*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}u=(t+.13*t).toFixed(2)}const h=parseFloat(e.amount)||0,m=parseFloat((null===(r=A)||void 0===r?void 0:r.totalFees)||u),p=h*(.13/1.13),f=parseFloat((null===(s=A)||void 0===s?void 0:s.awardAmount)||0),g=parseFloat((null===(a=A)||void 0===a?void 0:a.amount)||0),x=m,b=h/113*13;i[l].totalTrades+=1,i[l].totalAwardAmount+=f,i[l].totalCommission+=g,i[l].totalOfficeShare+=x,i[l].totalHST+=b,i[l].totalNetCommission+=h,i[l].trades.push({eftNumber:e.eftNumber,tradeNumber:null===d||void 0===d?void 0:d.tradeNumber,date:e.chequeDate||e.date,netCommission:h,feesDeducted:m,hst:p})});const l=Object.values(i).sort((e,t)=>t.totalNetCommission-e.totalNetCommission);n(l);const c=l.reduce((e,t)=>({totalTrades:e.totalTrades+t.totalTrades,totalAwardAmount:e.totalAwardAmount+t.totalAwardAmount,totalCommission:e.totalCommission+t.totalCommission,totalOfficeShare:e.totalOfficeShare+t.totalOfficeShare,totalHST:e.totalHST+t.totalHST,totalNetCommission:e.totalNetCommission+t.totalNetCommission}),{totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0});c.totalCommissionWithoutHST=c.totalNetCommission-c.totalHST,u(c),s(!1)}catch(e){console.error("Error fetching summary data:",e),s(!1)}},m=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",p=e=>{if(!e)return"";if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return"".concat(t,"-").concat(n,"-").concat(r)}return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,Rm.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"flex",children:[(0,Rm.jsx)(kP,{}),(0,Rm.jsx)("div",{className:"flex-1 p-6",children:(0,Rm.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Agent Payment Summary"}),c&&(0,Rm.jsxs)("button",{onClick:()=>{const t=window.open("","_blank"),n=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Summary Report</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Homelife Top Star Realty Inc., Brokerage</div>\n          <div class="report-title">Agent Payment Summary Report</div>\n          <div class="report-subtitle">Agent Commission Summary by Agent</div>\n          <div class="report-info">\n            '.concat(a&&o?"Period: ".concat(p(a)," to ").concat(p(o)," | Generated: ").concat(n):a?"From: ".concat(p(a)," | Generated: ").concat(n):o?"Up to: ".concat(p(o)," | Generated: ").concat(n):"All Data | Generated: ".concat(n),"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>Total Trades</th>\n              <th>Award Amount</th>\n              <th>Commission (HST Excluded)</th>\n              <th>Net Commission (HST Included)</th>\n              <th>Office Share (HST Included)</th>\n              <th>HST Paid to Agent</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map(e=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.totalTrades,"</td>\n                  <td>").concat(m(e.totalAwardAmount),"</td>\n                  <td>").concat(m(e.totalCommission),"</td>\n                  <td>").concat(m(e.totalNetCommission),"</td>\n                  <td>").concat(m(e.totalOfficeShare),"</td>\n                  <td>").concat(m(e.totalHST),"</td>\n                </tr>\n              ")).join(""):'<tr><td colspan="8" style="text-align: center; padding: 20px;">No data available.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Agents:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Trades:</span>\n            <span>').concat(A.totalTrades,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission:</span>\n            <span>').concat(m(A.totalCommission),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span>').concat(m(A.totalNetCommission),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close()},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors print:hidden",children:[(0,Rm.jsx)(km,{}),"Print Report"]})]}),(0,Rm.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Date Range"}),(0,Rm.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,Rm.jsx)("input",{type:"date",value:a,onChange:e=>i(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsxs)("div",{className:"flex-1",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,Rm.jsx)("input",{type:"date",value:o,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Rm.jsx)("div",{className:"flex items-end",children:(0,Rm.jsx)("button",{onClick:()=>{d(!0),h()},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Generate Report"})})]}),(a||o)&&(0,Rm.jsx)("div",{className:"mt-3 text-sm text-gray-600",children:a&&o?"Showing data from ".concat(p(a)," to ").concat(p(o)):a?"Showing data from ".concat(p(a)," onwards"):"Showing data up to ".concat(p(o))})]}),c&&(0,Rm.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Rm.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Agent Commission Summary by Agent"})}),r?(0,Rm.jsxs)("div",{className:"p-8 text-center",children:[(0,Rm.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Rm.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment summary..."})]}):(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Trades"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Award Amount"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission (HST Excluded)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Commission (HST Included)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office Share (HST Included)"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST Paid to Agent"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map((e,t)=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalTrades}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m(e.totalAwardAmount)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m(e.totalCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:m(e.totalNetCommission)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m(e.totalOfficeShare)}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m(e.totalHST)})]},t)):(0,Rm.jsx)("tr",{children:(0,Rm.jsx)("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),e.length>0&&(0,Rm.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,Rm.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Agents:"}),(0,Rm.jsx)("span",{className:"font-semibold ml-2",children:e.length})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Trades:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:A.totalTrades})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:m(A.totalCommission)})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,Rm.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:m(A.totalNetCommission)})]})]})})]})]})})]}),(0,Rm.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "})]})},jU=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),p=eu(),[f,g]=(0,t.useState)({type:"Listing Broker",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),x=e.filter(e=>"".concat(e.firstName," ").concat(e.lastName," ").concat(e.company," ").concat(e.email).toLowerCase().includes(a.toLowerCase()));(0,t.useEffect)(()=>{b()},[]);const b=async()=>{s(!0);try{const e=await nN.get("/outside-brokers");n(e.data)}catch(e){console.error("Error fetching brokers:",e),bp.error("Failed to fetch brokers")}finally{s(!1)}},y=e=>{const{name:t,value:n}=e.target;g(e=>X(X({},e),{},{[t]:n,end:"type"===t?"Listing Broker"===n?"Listing End":"Selling End":e.end}))},v=()=>{g({type:"Listing Broker",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""})};return r?(0,Rm.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"p-8",children:(0,Rm.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Rm.jsx)("div",{className:"text-lg",children:"Loading brokers..."})})})]}):(0,Rm.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-8",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Outside Brokers Database"}),(0,Rm.jsxs)("div",{className:"flex gap-3",children:[(0,Rm.jsxs)("button",{onClick:()=>p("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[(0,Rm.jsx)(sm,{})," Back to Database"]}),(0,Rm.jsxs)("button",{onClick:()=>{l(null),v(),d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,Rm.jsx)(Sm,{})," Add New Broker"]})]})]}),(0,Rm.jsx)("div",{className:"mb-6",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Search brokers...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay Broker"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,Rm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.company||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primaryPhone||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.payBroker}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Rm.jsxs)("div",{className:"flex space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>(e=>{l(e),g({type:e.type,firstName:e.firstName,lastName:e.lastName,company:e.company||"",email:e.email||"",payBroker:e.payBroker,end:e.end,primaryPhone:e.primaryPhone||"",chargedHST:e.chargedHST,address:e.address||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,Rm.jsx)(pm,{})}),(0,Rm.jsx)("button",{onClick:()=>(e=>{m(e),u(!0)})(e),className:"text-red-600 hover:text-red-900",children:(0,Rm.jsx)(Lm,{})})]})})]},e._id))})]})})}),0===x.length&&(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:a?"No brokers found matching your search.":"No brokers found."})]}),c&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4",children:o?"Edit Broker":"Add New Broker"}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o?(await nN.put("/outside-brokers/".concat(o._id),f),bp.success("Broker updated successfully")):(await nN.post("/outside-brokers",f),bp.success("Broker added successfully")),d(!1),l(null),v(),b()}catch(t){console.error("Error saving broker:",t),bp.error("Failed to save broker")}},className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,Rm.jsxs)("select",{name:"type",value:f.type,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Rm.jsx)("option",{value:"Listing Broker",children:"Listing Broker"}),(0,Rm.jsx)("option",{value:"Cooperating Broker",children:"Cooperating Broker"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Broker"}),(0,Rm.jsxs)("select",{name:"payBroker",value:f.payBroker,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:f.firstName,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:f.lastName,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),(0,Rm.jsx)("input",{type:"text",name:"company",value:f.company,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"email",name:"email",value:f.email,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"primaryPhone",value:f.primaryPhone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charged HST"}),(0,Rm.jsxs)("select",{name:"chargedHST",value:f.chargedHST,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Rm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Rm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Rm.jsx)("textarea",{name:"address",value:f.address,onChange:y,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>{d(!1),l(null),v()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Rm.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[o?"Update":"Add"," Broker"]})]})]})]})}),A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Are you sure you want to delete ",null===h||void 0===h?void 0:h.firstName," ",null===h||void 0===h?void 0:h.lastName,"? This action cannot be undone."]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{try{await nN.delete("/outside-brokers/".concat(h._id)),bp.success("Broker deleted successfully"),b()}catch(e){console.error("Error deleting broker:",e),bp.error("Failed to delete broker")}finally{u(!1),m(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},CU=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(""),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[A,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),p=eu(),[f,g]=(0,t.useState)({type:"Seller Lawyer",firstName:"",lastName:"",companyName:"",email:"",end:"Listing End",primaryPhone:"",cellPhone:"",address:""}),x=e.filter(e=>"".concat(e.firstName," ").concat(e.lastName," ").concat(e.companyName," ").concat(e.email).toLowerCase().includes(a.toLowerCase()));(0,t.useEffect)(()=>{b()},[]);const b=async()=>{s(!0);try{const e=await nN.get("/lawyers");n(e.data)}catch(e){console.error("Error fetching lawyers:",e),bp.error("Failed to fetch lawyers")}finally{s(!1)}},y=e=>{const{name:t,value:n}=e.target;g(e=>X(X({},e),{},{[t]:n,end:"type"===t?"Seller Lawyer"===n||"Buyer Lawyer"===n?"Selling End":"Listing End":e.end}))},v=()=>{g({type:"Seller Lawyer",firstName:"",lastName:"",companyName:"",email:"",end:"Listing End",primaryPhone:"",cellPhone:"",address:""})};return r?(0,Rm.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsx)("div",{className:"p-8",children:(0,Rm.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Rm.jsx)("div",{className:"text-lg",children:"Loading lawyers..."})})})]}):(0,Rm.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,Rm.jsx)(Fp,{}),(0,Rm.jsxs)("div",{className:"p-8",children:[(0,Rm.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Rm.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Lawyers Database"}),(0,Rm.jsxs)("div",{className:"flex gap-3",children:[(0,Rm.jsxs)("button",{onClick:()=>p("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[(0,Rm.jsx)(sm,{})," Back to Database"]}),(0,Rm.jsxs)("button",{onClick:()=>{l(null),v(),d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,Rm.jsx)(Sm,{})," Add New Lawyer"]})]})]}),(0,Rm.jsx)("div",{className:"mb-6",children:(0,Rm.jsxs)("div",{className:"relative",children:[(0,Rm.jsx)(Tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Rm.jsx)("input",{type:"text",placeholder:"Search lawyers...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,Rm.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Rm.jsx)("div",{className:"overflow-x-auto",children:(0,Rm.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Rm.jsx)("thead",{className:"bg-gray-50",children:(0,Rm.jsxs)("tr",{children:[(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary Phone"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cell Phone"}),(0,Rm.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Rm.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,Rm.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,Rm.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.companyName||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primaryPhone||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.cellPhone||"-"}),(0,Rm.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Rm.jsxs)("div",{className:"flex space-x-2",children:[(0,Rm.jsx)("button",{onClick:()=>(e=>{l(e),g({type:e.type,firstName:e.firstName,lastName:e.lastName,companyName:e.companyName||"",email:e.email||"",end:e.end,primaryPhone:e.primaryPhone||"",cellPhone:e.cellPhone||"",address:e.address||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,Rm.jsx)(pm,{})}),(0,Rm.jsx)("button",{onClick:()=>(e=>{m(e),u(!0)})(e),className:"text-red-600 hover:text-red-900",children:(0,Rm.jsx)(Lm,{})})]})})]},e._id))})]})})}),0===x.length&&(0,Rm.jsx)("div",{className:"text-center py-8 text-gray-500",children:a?"No lawyers found matching your search.":"No lawyers found."})]}),c&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Rm.jsx)("h2",{className:"text-2xl font-bold mb-4",children:o?"Edit Lawyer":"Add New Lawyer"}),(0,Rm.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o?(await nN.put("/lawyers/".concat(o._id),f),bp.success("Lawyer updated successfully")):(await nN.post("/lawyers",f),bp.success("Lawyer added successfully")),d(!1),l(null),v(),b()}catch(t){console.error("Error saving lawyer:",t),bp.error("Failed to save lawyer")}},className:"space-y-4",children:[(0,Rm.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,Rm.jsxs)("select",{name:"type",value:f.type,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Rm.jsx)("option",{value:"Tenant",children:"Tenant"}),(0,Rm.jsx)("option",{value:"Landlord",children:"Landlord"}),(0,Rm.jsx)("option",{value:"Seller",children:"Seller"}),(0,Rm.jsx)("option",{value:"Buyer",children:"Buyer"}),(0,Rm.jsx)("option",{value:"Seller Lawyer",children:"Seller Lawyer"}),(0,Rm.jsx)("option",{value:"Buyer Lawyer",children:"Buyer Lawyer"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,Rm.jsxs)("select",{name:"end",value:f.end,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Rm.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,Rm.jsx)("option",{value:"Selling End",children:"Selling End"})]})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,Rm.jsx)("input",{type:"text",name:"firstName",value:f.firstName,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,Rm.jsx)("input",{type:"text",name:"lastName",value:f.lastName,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Rm.jsx)("input",{type:"text",name:"companyName",value:f.companyName,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Rm.jsx)("input",{type:"email",name:"email",value:f.email,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"primaryPhone",value:f.primaryPhone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone"}),(0,Rm.jsx)("input",{type:"tel",name:"cellPhone",value:f.cellPhone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Rm.jsxs)("div",{className:"md:col-span-2",children:[(0,Rm.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Rm.jsx)("textarea",{name:"address",value:f.address,onChange:y,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Rm.jsx)("button",{type:"button",onClick:()=>{d(!1),l(null),v()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Rm.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[o?"Update":"Add"," Lawyer"]})]})]})]})}),A&&(0,Rm.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Rm.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Rm.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,Rm.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Are you sure you want to delete ",null===h||void 0===h?void 0:h.firstName," ",null===h||void 0===h?void 0:h.lastName,"? This action cannot be undone."]}),(0,Rm.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Rm.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Rm.jsx)("button",{onClick:async()=>{try{await nN.delete("/lawyers/".concat(h._id)),bp.success("Lawyer deleted successfully"),b()}catch(e){console.error("Error deleting lawyer:",e),bp.error("Failed to delete lawyer")}finally{u(!1),m(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})};const BU=function(){const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const e=function(e,t,n,r){return _(e).onAuthStateChanged(t,n,r)}(nA,e=>{n(e),s(!0)});return()=>e()},[]),r?(0,Rm.jsxs)(Rm.Fragment,{children:[(0,Rm.jsxs)(Cu,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[(0,Rm.jsx)(Kh,{position:"top-center",reverseOrder:!1}),(0,Rm.jsxs)(bu,{children:[(0,Rm.jsx)(gu,{path:"/",element:e?(0,Rm.jsx)(dN,{}):(0,Rm.jsx)(Lp,{setUser:n})}),(0,Rm.jsx)(gu,{path:"/database",element:e?(0,Rm.jsx)(hN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/database/reminders",element:e?(0,Rm.jsx)(mN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/database/company-info-db",element:e?(0,Rm.jsx)(pN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/company-profile-db",element:e?(0,Rm.jsx)(fN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/edit-company-profile",element:e?(0,Rm.jsx)(gN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/company-info",element:e?(0,Rm.jsx)(NN,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/trade-info",element:e?(0,Rm.jsx)($_,{user:e}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/listing-info",element:e?(0,Rm.jsx)(sP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/ledger-db",element:e?(0,Rm.jsx)(iP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/miscellaneous-db",element:e?(0,Rm.jsx)(lP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/trade-db",element:e?(0,Rm.jsx)(cP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/miscellaneous-entries-db",element:e?(0,Rm.jsx)(dP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/mls-fee-db",element:e?(0,Rm.jsx)(uP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/edit-ledger/:id",element:e?(0,Rm.jsx)(mP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/edit-misc/:id",element:e?(0,Rm.jsx)(pP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/listing-info-db",element:e?(0,Rm.jsx)(fP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/agent-info",element:e?(0,Rm.jsx)(CP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/agent-info-db",element:e?(0,Rm.jsx)(SP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/finance",element:e?(0,Rm.jsx)(EP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/real-estate-trust-payments",element:e?(0,Rm.jsx)(TP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/real-estate-trust-ledger",element:e?(0,Rm.jsx)(DP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/commission-trust-payments",element:e?(0,Rm.jsx)(LP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/commission-trust-ledger",element:e?(0,Rm.jsx)(_P,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/general-account-payments",element:e?(0,Rm.jsx)(UP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/chart-of-accounts",element:e?(0,Rm.jsx)(Tp,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/trial-balance",element:e?(0,Rm.jsx)(zP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/hst-report",element:e?(0,Rm.jsx)(GP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/people-form",element:e?(0,Rm.jsx)(qS,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/finance-db",element:e?(0,Rm.jsx)(WP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/vendor-info",element:e?(0,Rm.jsx)(ZP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/vendor-info-db",element:e?(0,Rm.jsx)($P,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/finance-statements",element:e?(0,Rm.jsx)(rU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/reconcile-real-estate-trust",element:e?(0,Rm.jsx)(OP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/reconcile-commission-trust",element:e?(0,Rm.jsx)(QP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/reconcile-general-account",element:e?(0,Rm.jsx)(RP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/accounts-receivable",element:e?(0,Rm.jsx)(MP,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/agent-payment-info",element:e?(0,Rm.jsx)(aU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/agent-payment-summary",element:e?(0,Rm.jsx)(NU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/journal-entry",element:e?(0,Rm.jsx)(cU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/disbursements-journals",element:e?(0,Rm.jsx)(dU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/trust-journal",element:e?(0,Rm.jsx)(AU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/trade-ar-journal",element:e?(0,Rm.jsx)(uU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports",element:e?(0,Rm.jsx)(hU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-hst",element:e?(0,Rm.jsx)(gU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-disbursements",element:e?(0,Rm.jsx)(xU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-trust",element:e?(0,Rm.jsx)(bU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-trade-ar",element:e?(0,Rm.jsx)(yU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-agent-payment",element:e?(0,Rm.jsx)(wU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/financial-reports-agent-payment-summary",element:e?(0,Rm.jsx)(vU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/outside-brokers-db",element:e?(0,Rm.jsx)(jU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})}),(0,Rm.jsx)(gu,{path:"/lawyers-db",element:e?(0,Rm.jsx)(CU,{}):(0,Rm.jsx)(fu,{to:"/",replace:!0})})]})]}),(0,Rm.jsx)(kp,{position:"top-right",autoClose:3e3})]}):(0,Rm.jsx)("div",{children:"Loading..."})},SU=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:a,getTTFB:i}=t;n(e),r(e),s(e),a(e),i(e)})};s.createRoot(document.getElementById("root")).render((0,Rm.jsx)(t.StrictMode,{children:(0,Rm.jsx)(BU,{})})),SU()})()})();
//# sourceMappingURL=main.0292f25f.js.map