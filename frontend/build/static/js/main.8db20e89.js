/*! For license information please see main.8db20e89.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},149:(e,t,n)=>{"use strict";var r=n(897).default;const a=(e,t,n,r)=>{if("length"===n||"prototype"===n)return;if("arguments"===n||"caller"===n)return;const a=Object.getOwnPropertyDescriptor(e,n),o=Object.getOwnPropertyDescriptor(t,n);!s(a,o)&&r||Object.defineProperty(e,n,o)},s=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},o=(e,t)=>"/* Wrapped ".concat(e,"*/\n").concat(t),i=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),l=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");e.exports=function(e,t){let{ignoreNonConfigurable:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{name:s}=e;for(const r of Reflect.ownKeys(t))a(e,t,r,n);return((e,t)=>{const n=Object.getPrototypeOf(t);n!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,n)})(e,t),((e,t,n)=>{const a=""===n?"":"with ".concat(n.trim(),"() "),s=o.bind(null,a,t.toString());Object.defineProperty(s,"name",l),Object.defineProperty(e,"toString",r(r({},i),{},{value:s}))})(e,t,s),e}},153:(e,t,n)=>{"use strict";var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:i.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,x(v,g.prototype),v.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,s={},o=null,i=null;if(null!=t)for(a in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(o=""+t.key),t)j.call(t,a)&&!S.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:i,props:s,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,s,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,N(o)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),A(o,t,a,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",N(e))for(var c=0;c<e.length;c++){var d=s+T(i=e[c],c);l+=A(i,t,a,d,o)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)l+=A(i=i.value,t,a,d=s+T(i,c++),o);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=x({},e.props),s=e.key,o=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,i=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:a,_owner:i}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},219:(e,t,n)=>{"use strict";var r=n(763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function l(e){return r.isMemo(e)?o:i[e.$$typeof]||a}i[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[r.Memo]=o;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=d(n);u&&(o=o.concat(u(n)));for(var i=l(t),x=l(n),f=0;f<o.length;++f){var g=o[f];if(!s[g]&&(!r||!r[g])&&(!x||!x[g])&&(!i||!i[g])){var b=m(n,g);try{c(t,g,b)}catch(y){}}}}return t}},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var i=2*(r+1)-1,l=e[i],c=i+1,d=e[c];if(0>s(l,n))c<a&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[i]=n,r=i);else{if(!(c<a&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function N(e){if(f=!1,v(e),!x)if(null!==r(c))x=!0,O(j);else{var t=r(d);null!==t&&L(N,t.startTime-e)}}function j(e,n){x=!1,f&&(f=!1,b(k),k=-1),p=!0;var s=h;try{for(v(n),m=r(c);null!==m&&(!(m.expirationTime>n)||e&&!A());){var o=m.callback;if("function"===typeof o){m.callback=null,h=m.priorityLevel;var i=o(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof i?m.callback=i:m===r(c)&&a(c),v(n)}else a(c);m=r(c)}if(null!==m)var l=!0;else{var u=r(d);null!==u&&L(N,u.startTime-n),l=!1}return l}finally{m=null,h=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,C=null,k=-1,E=5,T=-1;function A(){return!(t.unstable_now()-T<E)}function I(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?w():(S=!1,C=null)}}else S=!1}if("function"===typeof y)w=function(){y(I)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=I,w=function(){P.postMessage(null)}}else w=function(){g(I,0)};function O(e){C=e,S||(S=!0,w())}function L(e,n){k=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,O(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(f?(b(k),k=-1):f=!0,L(N,s-o))):(e.sortIndex=i,n(c,e),x||p||(x=!0,O(j))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/logo1.0965a68ba8ed7cef07c6.jpg"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},440:e=>{"use strict";var t=function(){};e.exports=t},457:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}},497:(e,t,n)=>{"use strict";var r=n(218);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,s,o){if(o!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(153)},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},730:(e,t,n)=>{"use strict";var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)o.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function x(e,t,n,r,a,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new x(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new x(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new x(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new x(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new x(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var a=f.hasOwnProperty(t)?f[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,_=Object.assign;function M(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),o=a.length-1,i=s.length-1;1<=o&&0<=i&&a[o]!==s[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==s[i]){if(1!==o||1!==i)do{if(o--,0>--i||a[o]!==s[i]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function H(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return _({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return _({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function fe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=_({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Se=null;function Ce(e){if(e=ya(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=Na(t),je(e.stateNode,e.type,t))}}function ke(e){we?Se?Se.push(e):Se=[e]:we=e}function Ee(){if(we){var e=we,t=Se;if(Se=we=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Ae(){}var Ie=!1;function De(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==we||null!==Se)&&(Ae(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Na(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Oe=!1}function Re(e,t,n,r,a,s,o,i,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Fe=!1,_e=null,Me=!1,Be=null,Ue={onError:function(e){Fe=!0,_e=e}};function He(e,t,n,r,a,s,o,i,l){Fe=!1,_e=null,Re.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return qe(a),e;if(o===r)return qe(a),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,$e=a.unstable_requestPaint,Qe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/lt|0)|0},it=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var i=o&~a;0!==i?r=ut(i):0!==(s&=o)&&(r=ut(s))}else 0!==(o=n&~a)?r=ut(o):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,jt,wt,St,Ct,kt=!1,Et=[],Tt=null,At=null,It=null,Dt=new Map,Pt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ft(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ya(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function _t(e){var t=ba(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Bt(e,t,n){Mt(e)&&n.delete(t)}function Ut(){kt=!1,null!==Tt&&Mt(Tt)&&(Tt=null),null!==At&&Mt(At)&&(At=null),null!==It&&Mt(It)&&(It=null),Dt.forEach(Bt),Pt.forEach(Bt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Ht(t,e)}if(0<Et.length){Ht(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ht(Tt,e),null!==At&&Ht(At,e),null!==It&&Ht(It,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)_t(n),null===n.blockedOn&&Ot.shift()}var Vt=v.ReactCurrentBatchConfig,qt=!0;function Wt(e,t,n,r){var a=yt,s=Vt.transition;Vt.transition=null;try{yt=1,Gt(e,t,n,r)}finally{yt=a,Vt.transition=s}}function Yt(e,t,n,r){var a=yt,s=Vt.transition;Vt.transition=null;try{yt=4,Gt(e,t,n,r)}finally{yt=a,Vt.transition=s}}function Gt(e,t,n,r){if(qt){var a=Xt(e,t,n,r);if(null===a)qr(e,t,r,Kt,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,a),!0;case"dragenter":return At=Ft(At,e,t,n,r,a),!0;case"mouseover":return It=Ft(It,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Dt.set(s,Ft(Dt.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,Ft(Pt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==a;){var s=ya(a);if(null!==s&&Nt(s),null===(s=Xt(e,t,n,r))&&qr(e,t,r,Kt,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Xt(e,t,n,r){if(Kt=null,null!==(e=ba(e=Ne(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=_({},cn,{view:0,detail:0}),mn=an(un),hn=_({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(hn),xn=an(_({},hn,{dataTransfer:0})),fn=an(_({},un,{relatedTarget:0})),gn=an(_({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=_({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),vn=an(_({},cn,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Cn(){return Sn}var kn=_({},un,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(kn),Tn=an(_({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(_({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=an(_({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=_({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),On=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var Fn=d&&"TextEvent"in window&&!Rn,_n=d&&(!Ln||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Yr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Gn=null;function Kn(e){Mr(e,0)}function Xn(e){if(G(va(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Gn=Yn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Wn(t,Gn,e,Ne(e)),De(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function sr(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!ir(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=mr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=dr(n,s);var o=dr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xr=d&&"documentMode"in document&&11>=document.documentMode,fr=null,gr=null,br=null,yr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==fr||fr!==K(r)||("selectionStart"in(r=fr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Yr(gr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionend:Nr("Transition","TransitionEnd")},wr={},Sr={};function Cr(e){if(wr[e])return wr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return wr[e]=n[t];return e}d&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var kr=Cr("animationend"),Er=Cr("animationiteration"),Tr=Cr("animationstart"),Ar=Cr("transitionend"),Ir=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ir.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Lr=Dr[Or];Pr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Er,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function _r(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,i,l,c){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(s(198));var d=_e;Fe=!1,_e=null,Me||(Me=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],l=i.instance,c=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;_r(a,i,c),s=l}else for(o=0;o<r.length;o++){if(l=(i=r[o]).instance,c=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;_r(a,i,c),s=l}}}if(Me)throw e=Be,Me=!1,Be=null,e}function Br(e,t){var n=t[xa];void 0===n&&(n=t[xa]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Hr]){e[Hr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var a=Wt;break;case 4:a=Yt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var i=r.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==i;){if(null===(o=ba(i)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}i=i.parentNode}}r=r.return}De((function(){var r=s,a=Ne(n),o=[];e:{var i=Ir.get(e);if(void 0!==i){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=fn;break;case"focusout":c="blur",l=fn;break;case"beforeblur":case"afterblur":l=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=xn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Er:case Tr:l=gn;break;case Ar:l=In;break;case"scroll":l=mn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==i?i+"Capture":null:i;d=[];for(var h,p=r;null!==p;){var x=(h=p).stateNode;if(5===h.tag&&null!==x&&(h=x,null!==m&&(null!=(x=Pe(p,m))&&d.push(Wr(p,x,h)))),u)break;p=p.return}0<d.length&&(i=new l(i,c,null,n,a),o.push({event:i,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!ba(c)&&!c[pa])&&(l||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ba(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=pn,x="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,x="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==l?i:va(l),h=null==c?i:va(c),(i=new d(x,p+"leave",l,n,a)).target=u,i.relatedTarget=h,x=null,ba(a)===r&&((d=new d(m,p+"enter",c,n,a)).target=h,d.relatedTarget=u,x=d),u=x,l&&c)e:{for(m=c,p=0,h=d=l;h;h=Gr(h))p++;for(h=0,x=m;x;x=Gr(x))h++;for(;0<p-h;)d=Gr(d),p--;for(;0<h-p;)m=Gr(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Gr(d),m=Gr(m)}d=null}else d=null;null!==l&&Kr(o,i,l,d,!1),null!==c&&null!==u&&Kr(o,u,c,d,!0)}if("select"===(l=(i=r?va(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var f=$n;else if(qn(i))if(Qn)f=or;else{f=ar;var g=rr}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(f=sr);switch(f&&(f=f(e,r))?Wn(o,f,n,a):(g&&g(e,i,r),"focusout"===e&&(g=i._wrapperState)&&g.controlled&&"number"===i.type&&ee(i,"number",i.value)),g=r?va(r):window,e){case"focusin":(qn(g)||"true"===g.contentEditable)&&(fr=g,gr=r,br=null);break;case"focusout":br=gr=fr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,vr(o,n,a);break;case"selectionchange":if(xr)break;case"keydown":case"keyup":vr(o,n,a)}var b;if(Ln)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(_n&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Jt="value"in(Qt=a)?Qt.value:Qt.textContent,zn=!0)),0<(g=Yr(r,y)).length&&(y=new vn(y,e,null,n,a),o.push({event:y,listeners:g}),b?y.data=b:null!==(b=Hn(n))&&(y.data=b))),(b=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),Zt=Jt=Qt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(a=new vn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=b))}Mr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,a)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var s=t._reactName,o=[];null!==n&&n!==r;){var i=n,l=i.alternate,c=i.stateNode;if(null!==l&&l===r)break;5===i.tag&&null!==c&&(i=c,a?null!=(l=Pe(n,s))&&o.unshift(Wr(n,l,i)):a||null!=(l=Pe(n,s))&&o.push(Wr(n,l,i))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(ia)}:ra;function ia(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ma="__reactFiber$"+ua,ha="__reactProps$"+ua,pa="__reactContainer$"+ua,xa="__reactEvents$"+ua,fa="__reactListeners$"+ua,ga="__reactHandles$"+ua;function ba(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ma])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[ma]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function va(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Na(e){return e[ha]||null}var ja=[],wa=-1;function Sa(e){return{current:e}}function Ca(e){0>wa||(e.current=ja[wa],ja[wa]=null,wa--)}function ka(e,t){wa++,ja[wa]=e.current,e.current=t}var Ea={},Ta=Sa(Ea),Aa=Sa(!1),Ia=Ea;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Aa),Ca(Ta)}function La(e,t,n){if(Ta.current!==Ea)throw Error(s(168));ka(Ta,t),ka(Aa,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,V(e)||"Unknown",a));return _({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ia=Ta.current,ka(Ta,e),ka(Aa,Aa.current),!0}function _a(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ra(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=e,Ca(Aa),Ca(Ta),ka(Ta,e)):Ca(Aa),ka(Aa,n)}var Ma=null,Ba=!1,Ua=!1;function Ha(e){null===Ma?Ma=[e]:Ma.push(e)}function za(){if(!Ua&&null!==Ma){Ua=!0;var e=0,t=yt;try{var n=Ma;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ma=null,Ba=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),Ge(Ze,za),a}finally{yt=t,Ua=!1}}return null}var Va=[],qa=0,Wa=null,Ya=0,Ga=[],Ka=0,Xa=null,$a=1,Qa="";function Ja(e,t){Va[qa++]=Ya,Va[qa++]=Wa,Wa=e,Ya=t}function Za(e,t,n){Ga[Ka++]=$a,Ga[Ka++]=Qa,Ga[Ka++]=Xa,Xa=e;var r=$a;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var s=32-ot(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,$a=1<<32-ot(t)+a|n<<a|r,Qa=s+e}else $a=1<<s|n<<a|r,Qa=e}function es(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function ts(e){for(;e===Wa;)Wa=Va[--qa],Va[qa]=null,Ya=Va[--qa],Va[qa]=null;for(;e===Xa;)Xa=Ga[--Ka],Ga[Ka]=null,Qa=Ga[--Ka],Ga[Ka]=null,$a=Ga[--Ka],Ga[Ka]=null}var ns=null,rs=null,as=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function is(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xa?{id:$a,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=rs;if(t){var n=t;if(!is(e,t)){if(ls(e))throw Error(s(418));t=ca(n.nextSibling);var r=ns;t&&is(e,t)?os(r,n):(e.flags=-4097&e.flags|2,as=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ms(),Error(s(418));for(;t;)os(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ca(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=rs;e;)e=ca(e.nextSibling)}function hs(){rs=ns=null,as=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var xs=v.ReactCurrentBatchConfig;function fs(e,t){if(e&&e.defaultProps){for(var n in t=_({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gs=Sa(null),bs=null,ys=null,vs=null;function Ns(){vs=ys=bs=null}function js(e){var t=gs.current;Ca(gs),e._currentValue=t}function ws(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){bs=e,vs=ys=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vi=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(vs!==e)if(e={context:e,memoizedValue:t,next:null},null===ys){if(null===bs)throw Error(s(308));ys=e,bs.dependencies={lanes:0,firstContext:e}}else ys=ys.next=e;return t}var ks=null;function Es(e){null===ks?ks=[e]:ks.push(e)}function Ts(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Es(t)):(n.next=a.next,a.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Is=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ls(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,As(e,n)}return null===(a=r.interleaved)?(t.next=t,Es(r)):(t.next=a.next,a.next=t),r.interleaved=t,As(e,n)}function Rs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Fs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _s(e,t,n,r){var a=e.updateQueue;Is=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==o&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(o=0,d=c=l=null,i=s;;){var m=i.lane,h=i.eventTime;if((r&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,x=i;switch(m=t,h=n,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=x.payload)?p.call(h,u,m):p)||void 0===m)break e;u=_({},u,m);break e;case 2:Is=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(m=a.effects)?a.effects=[i]:m.push(i))}else h={eventTime:h,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=h,l=u):d=d.next=h,o|=m;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(m=i).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);_l|=o,e.lanes=o,e.memoizedState=u}}function Ms(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Bs=(new r.Component).refs;function Us(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:_({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Hs={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),s=Os(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ls(e,s,a))&&(rc(t,e,a,r),Rs(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),s=Os(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ls(e,s,a))&&(rc(t,e,a,r),Rs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Os(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ls(e,a,r))&&(rc(t,e,r,n),Rs(t,e,r))}};function zs(e,t,n,r,a,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,s))}function Vs(e,t,n){var r=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(a=Pa(t)?Ia:Ta.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ea),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function qs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Bs,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Cs(s):(s=Pa(t)?Ia:Ta.current,a.context=Da(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Us(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Hs.enqueueReplaceState(a,a.state,null),_s(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Bs&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===w?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Ks(s)===t.type)?((r=a(t,n.props)).ref=Ys(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ys(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ys(e,null,t),n.return=e,n;case j:return(t=Bc(t,e.mode,n)).return=e,t;case P:return m(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===a?c(e,t,n,r):null;case j:return n.key===a?d(e,t,n,r):null;case P:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:u(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case j:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return u(t,e=e.get(n)||null,r,a,null);Gs(t,r)}return null}function x(a,s,i,l){for(var c=null,d=null,u=s,x=s=0,f=null;null!==u&&x<i.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=h(a,u,i[x],l);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(a,u),s=o(g,s,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===i.length)return n(a,u),as&&Ja(a,x),c;if(null===u){for(;x<i.length;x++)null!==(u=m(a,i[x],l))&&(s=o(u,s,x),null===d?c=u:d.sibling=u,d=u);return as&&Ja(a,x),c}for(u=r(a,u);x<i.length;x++)null!==(f=p(u,a,x,i[x],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),s=o(f,s,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach((function(e){return t(a,e)})),as&&Ja(a,x),c}function f(a,i,l,c){var d=R(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,x=i,f=i=0,g=null,b=l.next();null!==x&&!b.done;f++,b=l.next()){x.index>f?(g=x,x=null):g=x.sibling;var y=h(a,x,b.value,c);if(null===y){null===x&&(x=g);break}e&&x&&null===y.alternate&&t(a,x),i=o(y,i,f),null===u?d=y:u.sibling=y,u=y,x=g}if(b.done)return n(a,x),as&&Ja(a,f),d;if(null===x){for(;!b.done;f++,b=l.next())null!==(b=m(a,b.value,c))&&(i=o(b,i,f),null===u?d=b:u.sibling=b,u=b);return as&&Ja(a,f),d}for(x=r(a,x);!b.done;f++,b=l.next())null!==(b=p(x,a,f,b.value,c))&&(e&&null!==b.alternate&&x.delete(null===b.key?f:b.key),i=o(b,i,f),null===u?d=b:u.sibling=b,u=b);return e&&x.forEach((function(e){return t(a,e)})),as&&Ja(a,f),d}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case N:e:{for(var c=o.key,d=s;null!==d;){if(d.key===c){if((c=o.type)===w){if(7===d.tag){n(r,d.sibling),(s=a(d,o.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ks(c)===d.type){n(r,d.sibling),(s=a(d,o.props)).ref=Ys(r,d,o),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}o.type===w?((s=Fc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Rc(o.type,o.key,o.props,null,r.mode,l)).ref=Ys(r,s,o),l.return=r,r=l)}return i(r);case j:e:{for(d=o.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=a(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Bc(o,r.mode,l)).return=r,r=s}return i(r);case P:return e(r,s,(d=o._init)(o._payload),l)}if(te(o))return x(r,s,o,l);if(R(o))return f(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,o)).return=r,r=s):(n(r,s),(s=Mc(o,r.mode,l)).return=r,r=s),i(r)):n(r,s)}}var $s=Xs(!0),Qs=Xs(!1),Js={},Zs=Sa(Js),eo=Sa(Js),to=Sa(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(ka(to,t),ka(eo,e),ka(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Zs),ka(Zs,t)}function ao(){Ca(Zs),Ca(eo),Ca(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ka(eo,e),ka(Zs,n))}function oo(e){eo.current===e&&(Ca(Zs),Ca(eo))}var io=Sa(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var mo=v.ReactCurrentDispatcher,ho=v.ReactCurrentBatchConfig,po=0,xo=null,fo=null,go=null,bo=!1,yo=!1,vo=0,No=0;function jo(){throw Error(s(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ir(e[n],t[n]))return!1;return!0}function So(e,t,n,r,a,o){if(po=o,xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mo.current=null===e||null===e.memoizedState?ii:li,e=n(r,a),yo){o=0;do{if(yo=!1,vo=0,25<=o)throw Error(s(301));o+=1,go=fo=null,t.updateQueue=null,mo.current=ci,e=n(r,a)}while(yo)}if(mo.current=oi,t=null!==fo&&null!==fo.next,po=0,go=fo=xo=null,bo=!1,t)throw Error(s(300));return e}function Co(){var e=0!==vo;return vo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?xo.memoizedState=go=e:go=go.next=e,go}function Eo(){if(null===fo){var e=xo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===go?xo.memoizedState:go.next;if(null!==t)go=t,fo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===go?xo.memoizedState=go=e:go=go.next=e}return go}function To(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=fo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((po&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=m,i=r):c=c.next=m,xo.lanes|=u,_l|=u}d=d.next}while(null!==d&&d!==o);null===c?i=r:c.next=l,ir(r,t.memoizedState)||(vi=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,xo.lanes|=o,_l|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);ir(o,t.memoizedState)||(vi=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=xo,r=Eo(),a=t(),o=!ir(r.memoizedState,a);if(o&&(r.memoizedState=a,vi=!0),r=r.queue,qo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Bo(9,Lo.bind(null,n,r,a,t),void 0,null),null===Il)throw Error(s(349));0!==(30&po)||Oo(n,t,a)}return a}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xo.updateQueue)?(t={lastEffect:null,stores:null},xo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Lo(e,t,n,r){t.value=n,t.getSnapshot=r,Fo(t)&&_o(e)}function Ro(e,t,n){return n((function(){Fo(t)&&_o(e)}))}function Fo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ir(e,n)}catch(r){return!0}}function _o(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Mo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ni.bind(null,xo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=xo.updateQueue)?(t={lastEffect:null,stores:null},xo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return Eo().memoizedState}function Ho(e,t,n,r){var a=ko();xo.flags|=e,a.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var a=Eo();r=void 0===r?null:r;var s=void 0;if(null!==fo){var o=fo.memoizedState;if(s=o.destroy,null!==r&&wo(r,o.deps))return void(a.memoizedState=Bo(t,n,s,r))}xo.flags|=e,a.memoizedState=Bo(1|t,n,s,r)}function Vo(e,t){return Ho(8390656,8,e,t)}function qo(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Yo(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Xo(){}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,vi=!0),e.memoizedState=n):(ir(n,t)||(n=xt(),xo.lanes|=n,_l|=n,e.baseState=!0),t)}function Zo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{yt=n,ho.transition=r}}function ei(){return Eo().memoizedState}function ti(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ri(e))ai(t,n);else if(null!==(n=Ts(e,t,n,r))){rc(n,e,r,tc()),si(n,t,r)}}function ni(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ri(e))ai(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,i=s(o,n);if(a.hasEagerState=!0,a.eagerState=i,ir(i,o)){var l=t.interleaved;return null===l?(a.next=a,Es(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ts(e,t,a,r))&&(rc(n,e,r,a=tc()),si(n,t,r))}}function ri(e){var t=e.alternate;return e===xo||null!==t&&t===xo}function ai(e,t){yo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function si(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var oi={readContext:Cs,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useInsertionEffect:jo,useLayoutEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useMutableSource:jo,useSyncExternalStore:jo,useId:jo,unstable_isNewReconciler:!1},ii={readContext:Cs,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ho(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ti.bind(null,xo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Mo,useDebugValue:Xo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xo,a=ko();if(as){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Il)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Vo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Lo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Il.identifierPrefix;if(as){var n=Qa;t=":"+t+"R"+(n=($a&~(1<<32-ot($a)-1)).toString(32)+n),0<(n=vo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=No++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},li={readContext:Cs,useCallback:$o,useContext:Cs,useEffect:qo,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Ao,useRef:Uo,useState:function(){return Ao(To)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Eo(),fo.memoizedState,e)},useTransition:function(){return[Ao(To)[0],Eo().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ei,unstable_isNewReconciler:!1},ci={readContext:Cs,useCallback:$o,useContext:Cs,useEffect:qo,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Yo,useMemo:Qo,useReducer:Io,useRef:Uo,useState:function(){return Io(To)},useDebugValue:Xo,useDeferredValue:function(e){var t=Eo();return null===fo?t.memoizedState=e:Jo(t,fo.memoizedState,e)},useTransition:function(){return[Io(To)[0],Eo().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:ei,unstable_isNewReconciler:!1};function di(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function ui(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function mi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hi="function"===typeof WeakMap?WeakMap:Map;function pi(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Yl=r),mi(0,t)},n}function xi(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){mi(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){mi(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fi(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hi;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function gi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bi(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ls(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yi=v.ReactCurrentOwner,vi=!1;function Ni(e,t,n,r){t.child=null===e?Qs(t,null,n,r):$s(t,e.child,n,r)}function ji(e,t,n,r,a){n=n.render;var s=t.ref;return Ss(t,a),r=So(e,t,n,r,s,a),n=Co(),null===e||vi?(as&&n&&es(t),t.flags|=1,Ni(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wi(e,t,a))}function wi(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Si(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wi(e,t,a)}return t.flags|=1,(e=Lc(s,r)).ref=t.ref,e.return=t,t.child=e}function Si(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(vi=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Wi(e,t,a);0!==(131072&e.flags)&&(vi=!0)}}return Ei(e,t,n,r,a)}function Ci(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ka(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ka(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ka(Ll,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ka(Ll,Ol),Ol|=r;return Ni(e,t,a,n),t.child}function ki(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,n,r,a){var s=Pa(n)?Ia:Ta.current;return s=Da(t,s),Ss(t,a),n=So(e,t,n,r,s,a),r=Co(),null===e||vi?(as&&r&&es(t),t.flags|=1,Ni(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wi(e,t,a))}function Ti(e,t,n,r,a){if(Pa(n)){var s=!0;Fa(t)}else s=!1;if(Ss(t,a),null===t.stateNode)qi(e,t),Vs(t,n,r),Ws(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,i=t.memoizedProps;o.props=i;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Cs(c):c=Da(t,c=Pa(n)?Ia:Ta.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==r||l!==c)&&qs(t,o,r,c),Is=!1;var m=t.memoizedState;o.state=m,_s(t,r,o,a),l=t.memoizedState,i!==r||m!==l||Aa.current||Is?("function"===typeof d&&(Us(t,n,d,r),l=t.memoizedState),(i=Is||zs(t,n,i,r,m,l,c))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=i):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:fs(t.type,i),o.props=c,u=t.pendingProps,m=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Da(t,l=Pa(n)?Ia:Ta.current);var h=n.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==u||m!==l)&&qs(t,o,r,l),Is=!1,m=t.memoizedState,o.state=m,_s(t,r,o,a);var p=t.memoizedState;i!==u||m!==p||Aa.current||Is?("function"===typeof h&&(Us(t,n,h,r),p=t.memoizedState),(c=Is||zs(t,n,c,r,m,p,l)||!1)?(d||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ai(e,t,n,r,s,a)}function Ai(e,t,n,r,a,s){ki(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&_a(t,n,!1),Wi(e,t,s);r=t.stateNode,yi.current=t;var i=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,i,s)):Ni(e,t,i,s),t.memoizedState=r.state,a&&_a(t,n,!0),t.child}function Ii(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),ro(e,t.containerInfo)}function Di(e,t,n,r,a){return hs(),ps(a),t.flags|=256,Ni(e,t,n,r),t.child}var Pi,Oi,Li,Ri,Fi={dehydrated:null,treeContext:null,retryLane:0};function _i(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mi(e,t,n){var r,a=t.pendingProps,o=io.current,i=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ka(io,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,i?(a=t.mode,i=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=_c(l,a,0,null),e=Fc(e,a,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=_i(n),t.memoizedState=Fi,e):Bi(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,i){if(n)return 256&t.flags?(t.flags&=-257,Ui(e,t,i,r=ui(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=_c({mode:"visible",children:r.children},a,0,null),(o=Fc(o,a,i,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,i),t.child.memoizedState=_i(i),t.memoizedState=Fi,o);if(0===(1&t.mode))return Ui(e,t,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Ui(e,t,i,r=ui(o=Error(s(419)),r,void 0))}if(l=0!==(i&e.childLanes),vi||l){if(null!==(r=Il)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==o.retryLane&&(o.retryLane=a,As(e,a),rc(r,e,a,-1))}return fc(),Ui(e,t,i,r=ui(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,rs=ca(a.nextSibling),ns=t,as=!0,ss=null,null!==e&&(Ga[Ka++]=$a,Ga[Ka++]=Qa,Ga[Ka++]=Xa,$a=e.id,Qa=e.overflow,Xa=t),t=Bi(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,o,n);if(i){i=a.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?i=Lc(r,i):(i=Fc(i,l,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,l=null===(l=e.child.memoizedState)?_i(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Fi,a}return e=(i=e.child).sibling,a=Lc(i,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bi(e,t){return(t=_c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ui(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Bi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hi(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ws(e.return,t,n)}function zi(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Vi(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(Ni(e,t,r.children,n),0!==(2&(r=io.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hi(e,n,t);else if(19===e.tag)Hi(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ka(io,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),zi(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===lo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zi(t,!0,n,null,s);break;case"together":zi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wi(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_l|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yi(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ki(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(t),null;case 1:case 17:return Pa(t.type)&&Oa(),Gi(t),null;case 3:return r=t.stateNode,ao(),Ca(Aa),Ca(Ta),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Oi(e,t),Gi(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Li(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Gi(t),null}if(e=no(Zs.current),us(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ma]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Br(Rr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":$(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ae(r,o),Br("invalid",r)}for(var l in be(n,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":Y(r),Z(r,o,!0);break;case"textarea":Y(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ma]=t,e[ha]=r,Pi(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Br(Rr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":$(e,r),a=X(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=_({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(o in be(n,a),c=a)if(c.hasOwnProperty(o)){var d=c[o];"style"===o?fe(e,d):"dangerouslySetInnerHTML"===o?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===o?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=d&&"onScroll"===o&&Br("scroll",e):null!=d&&y(e,o,d,l))}switch(n){case"input":Y(e),Z(e,r,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gi(t),null;case 6:if(e&&null!=t.stateNode)Ri(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[ma]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ma]=t,t.stateNode=r}return Gi(t),null;case 13:if(Ca(io),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ms(),hs(),t.flags|=98560,o=!1;else if(o=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[ma]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gi(t),o=!1}else null!==ss&&(ic(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Gi(t),null);case 4:return ao(),Oi(e,t),null===e&&zr(t.stateNode.containerInfo),Gi(t),null;case 10:return js(t.type._context),Gi(t),null;case 19:if(Ca(io),null===(o=t.memoizedState))return Gi(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Yi(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Yi(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ka(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Yi(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Yi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!as)return Gi(t),null}else 2*Qe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Yi(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=io.current,ka(io,r?1&n|2:1&n),t):(Gi(t),null);case 22:case 23:return mc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Gi(t),6&t.subtreeFlags&&(t.flags|=8192)):Gi(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xi(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Ca(Aa),Ca(Ta),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ca(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(io),null;case 4:return ao(),null;case 10:return js(t.type._context),null;case 22:case 23:return mc(),null;default:return null}}Pi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oi=function(){},Li=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":a=X(e,a),r=X(e,r),o=[];break;case"select":a=_({},a,{value:void 0}),r=_({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in be(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}},Ri=function(e,t,n,r){n!==r&&(t.flags|=4)};var $i=!1,Qi=!1,Ji="function"===typeof WeakSet?WeakSet:Set,Zi=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&tl(t,n,s)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[ha],delete t[xa],delete t[fa],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var ul=null,ml=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(i){}switch(n.tag){case 5:Qi||el(n,t);case 6:var r=ul,a=ml;ul=null,hl(e,t,n),ml=a,null!==(ul=r)&&(ml?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(ml?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),zt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=ml,ul=n.stateNode.containerInfo,ml=!0,hl(e,t,n),ul=r,ml=a;break;case 0:case 11:case 14:case 15:if(!Qi&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Qi&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Cc(n,t,i)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qi=(r=Qi)||null!==n.memoizedState,hl(e,t,n),Qi=r):hl(e,t,n);break;default:hl(e,t,n)}}function xl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ji),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,l=i;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,ml=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,ml=!0;break e}l=l.return}if(null===ul)throw Error(s(160));pl(o,i,a),ul=null,ml=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Cc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),bl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(f){Cc(e,e.return,f)}try{rl(5,e,e.return)}catch(f){Cc(e,e.return,f)}}break;case 1:fl(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(fl(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{me(a,"")}catch(f){Cc(e,e.return,f)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,i=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(a,o),ye(l,i);var d=ye(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];"style"===u?fe(a,m):"dangerouslySetInnerHTML"===u?ue(a,m):"children"===u?me(a,m):y(a,u,m,d)}switch(l){case"input":J(a,o);break;case"textarea":se(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(f){Cc(e,e.return,f)}}break;case 6:if(fl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(f){Cc(e,e.return,f)}}break;case 3:if(fl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(f){Cc(e,e.return,f)}break;case 4:default:fl(t,e),bl(e);break;case 13:fl(t,e),bl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(zl=Qe())),4&r&&xl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qi=(d=Qi)||u,fl(t,e),Qi=d):fl(t,e),bl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zi=e,u=e.child;null!==u;){for(m=Zi=u;null!==Zi;){switch(p=(h=Zi).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:el(h,h.return);var x=h.stateNode;if("function"===typeof x.componentWillUnmount){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){Cc(r,n,f)}}break;case 5:el(h,h.return);break;case 22:if(null!==h.memoizedState){jl(m);continue}}null!==p?(p.return=h,Zi=p):jl(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{a=m.stateNode,d?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=m.stateNode,i=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=xe("display",i))}catch(f){Cc(e,e.return,f)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Cc(e,e.return,f)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(t,e),bl(e),4&r&&xl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(me(a,""),r.flags&=-33),dl(e,ll(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(i){Cc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zi=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Zi;){var a=Zi,s=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||$i;if(!o){var i=a.alternate,l=null!==i&&null!==i.memoizedState||Qi;i=$i;var c=Qi;if($i=o,(Qi=l)&&!c)for(Zi=a;null!==Zi;)l=(o=Zi).child,22===o.tag&&null!==o.memoizedState?wl(a):null!==l?(l.return=o,Zi=l):wl(a);for(;null!==s;)Zi=s,vl(s,t,n),s=s.sibling;Zi=a,$i=i,Qi=c}Nl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Zi=s):Nl(e)}}function Nl(e){for(;null!==Zi;){var t=Zi;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qi||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qi)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:fs(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ms(t,o,r);break;case 3:var i=t.updateQueue;if(null!==i){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ms(t,i,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&zt(m)}}}break;default:throw Error(s(163))}Qi||512&t.flags&&sl(t)}catch(h){Cc(t,t.return,h)}}if(t===e){Zi=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zi=n;break}Zi=t.return}}function jl(e){for(;null!==Zi;){var t=Zi;if(t===e){Zi=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zi=n;break}Zi=t.return}}function wl(e){for(;null!==Zi;){var t=Zi;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Cc(t,a,l)}}var s=t.return;try{sl(t)}catch(l){Cc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Zi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Zi=i;break}Zi=t.return}}var Sl,Cl=Math.ceil,kl=v.ReactCurrentDispatcher,El=v.ReactCurrentOwner,Tl=v.ReactCurrentBatchConfig,Al=0,Il=null,Dl=null,Pl=0,Ol=0,Ll=Sa(0),Rl=0,Fl=null,_l=0,Ml=0,Bl=0,Ul=null,Hl=null,zl=0,Vl=1/0,ql=null,Wl=!1,Yl=null,Gl=null,Kl=!1,Xl=null,$l=0,Ql=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Qe():-1!==Zl?Zl:Zl=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==xs.transition?(0===ec&&(ec=xt()),ec):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));gt(e,n,r),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(Ml|=n),4===Rl&&lc(e,Pl)),ac(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Qe()+500,Ba&&za()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),i=1<<o,l=a[o];-1===l?0!==(i&n)&&0===(i&r)||(a[o]=ht(i,t)):l<=t&&(e.expiredLanes|=i),s&=~i}}(e,t);var r=mt(e,e===Il?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ba=!0,Ha(e)}(cc.bind(null,e)):Ha(cc.bind(null,e)),oa((function(){0===(6&Al)&&za()})),n=null;else{switch(vt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=mt(e,e===Il?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Al;Al|=2;var o=xc();for(Il===e&&Pl===t||(ql=null,Vl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ns(),kl.current=o,Al=a,null!==Dl?t=0:(Il=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Fl,hc(e,0),lc(e,r),ac(e,Qe()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!ir(s(),a))return!1}catch(i){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Fl,hc(e,0),lc(e,r),ac(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:jc(e,Hl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Qe())){if(0!==mt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(jc.bind(null,e,Hl,ql),t);break}jc(e,Hl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-ot(r);o=1<<i,(i=t[i])>a&&(a=i),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ra(jc.bind(null,e,Hl,ql),r);break}jc(e,Hl,ql);break;default:throw Error(s(329))}}}return ac(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Hl,Hl=n,null!==t&&ic(t)),e}function ic(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Bl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(s(327));wc();var t=mt(e,0);if(0===(1&t))return ac(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Fl,hc(e,0),lc(e,t),ac(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Hl,ql),ac(e,Qe()),null}function dc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Qe()+500,Ba&&za())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var n=Tl.transition,r=yt;try{if(Tl.transition=null,yt=1,e)return e()}finally{yt=r,Tl.transition=n,0===(6&(Al=t))&&za()}}function mc(){Ol=Ll.current,Ca(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:ao(),Ca(Aa),Ca(Ta),uo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ca(io);break;case 10:js(r.type._context);break;case 22:case 23:mc()}n=n.return}if(Il=e,Dl=e=Lc(e.current,null),Pl=Ol=t,Rl=0,Fl=null,Bl=Ml=_l=0,Hl=Ul=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=a,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(Ns(),mo.current=oi,bo){for(var r=xo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}bo=!1}if(po=0,go=fo=xo=null,yo=!1,vo=0,El.current=null,null===n||null===n.return){Rl=1,Fl=t,Dl=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gi(i);if(null!==p){p.flags&=-257,bi(p,i,l,0,t),1&p.mode&&fi(o,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){fi(o,d,t),fc();break e}c=Error(s(426))}else if(as&&1&l.mode){var g=gi(i);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),bi(g,i,l,0,t),ps(di(c,l));break e}}o=c=di(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[o]:Ul.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,pi(0,c,t));break e;case 1:l=c;var b=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Fs(o,xi(o,l,t));break e}}o=o.return}while(null!==o)}Nc(n)}catch(v){t=v,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function xc(){var e=kl.current;return kl.current=oi,null===e?oi:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&_l)&&0===(268435455&Ml)||lc(Il,Pl)}function gc(e,t){var n=Al;Al|=2;var r=xc();for(Il===e&&Pl===t||(ql=null,hc(e,t));;)try{bc();break}catch(a){pc(e,a)}if(Ns(),Al=n,kl.current=r,null!==Dl)throw Error(s(261));return Il=null,Pl=0,Rl}function bc(){for(;null!==Dl;)vc(Dl)}function yc(){for(;null!==Dl&&!Xe();)vc(Dl)}function vc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Nc(e):Dl=t,El.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ki(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Xi(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function jc(e,t,n){var r=yt,a=Tl.transition;try{Tl.transition=null,yt=1,function(e,t,n,r){do{wc()}while(null!==Xl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,o),e===Il&&(Dl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ic(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var i=yt;yt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ea=qt,hr(e=mr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(N){n=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==n||0!==a&&3!==m.nodeType||(l=i+a),m!==o||0!==r&&3!==m.nodeType||(c=i+r),3===m.nodeType&&(i+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===n&&++d===a&&(l=i),h===o&&++u===r&&(c=i),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},qt=!1,Zi=t;null!==Zi;)if(e=(t=Zi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zi=e;else for(;null!==Zi;){t=Zi;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:fs(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(s(163))}}catch(N){Cc(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Zi=e;break}Zi=t.return}x=nl,nl=!1}(e,n),gl(n,e),pr(ta),qt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),$e(),Al=l,yt=i,Tl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Xl=e,$l=a),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Yl,Yl=null,e;0!==(1&$l)&&0!==e.tag&&wc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,za()}(e,t,n,r)}finally{Tl.transition=a,yt=r}return null}function wc(){if(null!==Xl){var e=vt($l),t=Tl.transition,n=yt;try{if(Tl.transition=null,yt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,$l=0,0!==(6&Al))throw Error(s(331));var a=Al;for(Al|=4,Zi=e.current;null!==Zi;){var o=Zi,i=o.child;if(0!==(16&Zi.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zi=d;null!==Zi;){var u=Zi;switch(u.tag){case 0:case 11:case 15:rl(8,u,o)}var m=u.child;if(null!==m)m.return=u,Zi=m;else for(;null!==Zi;){var h=(u=Zi).sibling,p=u.return;if(ol(u),u===d){Zi=null;break}if(null!==h){h.return=p,Zi=h;break}Zi=p}}}var x=o.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Zi=o}}if(0!==(2064&o.subtreeFlags)&&null!==i)i.return=o,Zi=i;else e:for(;null!==Zi;){if(0!==(2048&(o=Zi).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Zi=b;break e}Zi=o.return}}var y=e.current;for(Zi=y;null!==Zi;){var v=(i=Zi).child;if(0!==(2064&i.subtreeFlags)&&null!==v)v.return=i,Zi=v;else e:for(i=y;null!==Zi;){if(0!==(2048&(l=Zi).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(j){Cc(l,l.return,j)}if(l===i){Zi=null;break e}var N=l.sibling;if(null!==N){N.return=l.return,Zi=N;break e}Zi=l.return}}if(Al=a,za(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(j){}r=!0}return r}finally{yt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Ls(e,t=pi(0,t=di(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ac(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ls(t,e=xi(t,e=di(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ac(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Qe()-zl?hc(e,0):Bl|=n),ac(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=tc();null!==(e=As(e,t))&&(gt(e,t,n),ac(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ec(e,n)}function Ic(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,o){var i=2;if(r=e,"function"===typeof e)Oc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case w:return Fc(n.children,a,o,t);case S:i=8,a|=8;break;case C:return(e=Pc(12,n,t,2|a)).elementType=C,e.lanes=o,e;case A:return(e=Pc(13,n,t,a)).elementType=A,e.lanes=o,e;case I:return(e=Pc(19,n,t,a)).elementType=I,e.lanes=o,e;case O:return _c(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:i=10;break e;case E:i=9;break e;case T:i=11;break e;case D:i=14;break e;case P:i=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(i,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function _c(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,a,s,o,i,l){return e=new Uc(e,t,n,i,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function zc(e){if(!e)return Ea;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Ra(e,n,t)}return t}function Vc(e,t,n,r,a,s,o,i,l){return(e=Hc(n,r,!0,e,0,s,0,i,l)).context=zc(null),n=e.current,(s=Os(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Ls(n,s,a),e.current.lanes=a,gt(e,a,r),ac(e,r),e}function qc(e,t,n,r){var a=t.current,s=tc(),o=nc(a);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ls(a,t,o))&&(rc(e,a,o,s),Rs(e,a,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)vi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vi=!1,function(e,t,n){switch(t.tag){case 3:Ii(t),hs();break;case 5:so(t);break;case 1:Pa(t.type)&&Fa(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ka(gs,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ka(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mi(e,t,n):(ka(io,1&io.current),null!==(e=Wi(e,t,n))?e.sibling:null);ka(io,1&io.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vi(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),ka(io,io.current),r)break;return null;case 22:case 23:return t.lanes=0,Ci(e,t,n)}return Wi(e,t,n)}(e,t,n);vi=0!==(131072&e.flags)}else vi=!1,as&&0!==(1048576&t.flags)&&Za(t,Ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qi(e,t),e=t.pendingProps;var a=Da(t,Ta.current);Ss(t,n),a=So(null,t,r,e,a,n);var o=Co();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(o=!0,Fa(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=Hs,t.stateNode=a,a._reactInternals=t,Ws(t,r,e,n),t=Ai(null,t,r,!0,o,n)):(t.tag=0,as&&o&&es(t),Ni(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===D)return 14}return 2}(r),e=fs(r,e),a){case 0:t=Ei(null,t,r,e,n);break e;case 1:t=Ti(null,t,r,e,n);break e;case 11:t=ji(null,t,r,e,n);break e;case 14:t=wi(null,t,r,fs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ei(e,t,r,a=t.elementType===r?a:fs(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ti(e,t,r,a=t.elementType===r?a:fs(r,a),n);case 3:e:{if(Ii(t),null===e)throw Error(s(387));r=t.pendingProps,a=(o=t.memoizedState).element,Ps(e,t),_s(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Di(e,t,r,n,a=di(Error(s(423)),t));break e}if(r!==a){t=Di(e,t,r,n,a=di(Error(s(424)),t));break e}for(rs=ca(t.stateNode.containerInfo.firstChild),ns=t,as=!0,ss=null,n=Qs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hs(),r===a){t=Wi(e,t,n);break e}Ni(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,na(r,a)?i=null:null!==o&&na(r,o)&&(t.flags|=32),ki(e,t),Ni(e,t,i,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Mi(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):Ni(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ji(e,t,r,a=t.elementType===r?a:fs(r,a),n);case 7:return Ni(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ni(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,ka(gs,r._currentValue),r._currentValue=i,null!==o)if(ir(o.value,i)){if(o.children===a.children&&!Aa.current){t=Wi(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){i=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var d=o.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ws(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)i=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(s(341));i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ws(i,n,t),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===t){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}Ni(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ss(t,n),r=r(a=Cs(a)),t.flags|=1,Ni(e,t,r,n),t.child;case 14:return a=fs(r=t.type,t.pendingProps),wi(e,t,r,a=fs(r.type,a),n);case 15:return Si(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:fs(r,a),qi(e,t),t.tag=1,Pa(r)?(e=!0,Fa(t)):e=!1,Ss(t,n),Vs(t,r,a),Ws(t,r,a,n),Ai(null,t,r,!0,e,n);case 19:return Vi(e,t,n);case 22:return Ci(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function ed(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof a){var i=a;a=function(){var e=Wc(o);i.call(e)}}qc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pa]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var i=r;r=function(){var e=Wc(l);i.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pa]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,a,r);return Wc(o)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pa]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&_t(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),ac(t,Qe()),0===(6&Al)&&(Vl=Qe()+500,za()))}break;case 13:uc((function(){var t=As(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},jt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},wt=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},je=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Na(r);if(!a)throw Error(s(90));G(r),J(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=dc,Ae=uc;var td={usingClientEntryPoint:!1,Events:[ya,va,Na,ke,Ee,dc]},nd={findFiberByHostInstance:ba,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rd={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{at=ad.inject(rd),st=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=td,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return ed(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",i=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(i=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,o,i),e[pa]=t.current,zr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return ed(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){ed(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ed(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},736:(e,t,n)=>{var r=n(738).default,a=n(45);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},763:(e,t,n)=>{"use strict";e.exports=n(983)},788:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function i(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,i)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(n(457));function o(e){let t,n,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"maxAge";const i=()=>r(this,void 0,void 0,(function*(){if(void 0!==t)return;const i=i=>r(this,void 0,void 0,(function*(){a=s.default();const r=i[1][o]-Date.now();return r<=0?(e.delete(i[0]),void a.resolve()):(t=i[0],n=setTimeout((()=>{e.delete(i[0]),a&&a.resolve()}),r),"function"===typeof n.unref&&n.unref(),a.promise)}));try{for(const t of e)yield i(t)}catch(l){}t=void 0})),l=e.set.bind(e);return e.set=(r,s)=>{e.has(r)&&e.delete(r);const o=l(r,s);return t&&t===r&&(t=void 0,void 0!==n&&(clearTimeout(n),n=void 0),void 0!==a&&(a.reject(void 0),a=void 0)),i(),o},i(),e}t.default=o,e.exports=o,e.exports.default=o},853:(e,t,n)=>{"use strict";e.exports=n(234)},897:(e,t,n)=>{var r=n(693);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},922:(e,t,n)=>{"use strict";const r=n(149),a=n(788),s=new WeakMap,o=new WeakMap,i=function(e){let{cacheKey:t,cache:n=new Map,maxAge:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"number"===typeof s&&a(n);const i=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];const i=t?t(a):a[0],l=n.get(i);if(l)return l.data;const c=e.apply(this,a);return n.set(i,{data:c,maxAge:s?Date.now()+s:Number.POSITIVE_INFINITY}),c};return r(i,e,{ignoreNonConfigurable:!0}),o.set(i,n),i};i.decorator=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n,r)=>{const a=t[n];if("function"!==typeof a)throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!s.has(this)){const t=i(a,e);return s.set(this,t),t}return s.get(this)}}},i.clear=e=>{const t=o.get(e);if(!t)throw new TypeError("Can't clear a function that was not memoized!");if("function"!==typeof t.clear)throw new TypeError("The cache Map can't be cleared!");t.clear()},e.exports=i},926:(e,t,n)=>{!function(){"use strict";"object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g;function r(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}function a(e){return"number"==typeof e&&Math.abs(e)<=9007199254740991}var s=/(hundred|thousand|(m|b|tr|quadr)illion)$/,o=/teen$/,i=/y$/,l=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,c={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function d(e){return s.test(e)||o.test(e)?e+"th":i.test(e)?e.replace(i,"ieth"):l.test(e)?e.replace(l,u):e}function u(e,t){return c[t]}var m=1e3,h=1e6,p=1e9,x=1e12,f=1e15,g=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],b=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function y(e,t){var n,s=parseInt(e,10);if(!r(s))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!a(s))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");return n=function e(t){var n,r,a=arguments[1];return 0===t?a?a.join(" ").replace(/,$/,""):"zero":(a||(a=[]),t<0&&(a.push("minus"),t=Math.abs(t)),t<20?(n=0,r=g[t]):t<100?(n=t%10,r=b[Math.floor(t/10)],n&&(r+="-"+g[n],n=0)):t<m?(n=t%100,r=e(Math.floor(t/100))+" hundred"):t<h?(n=t%m,r=e(Math.floor(t/m))+" thousand,"):t<p?(n=t%h,r=e(Math.floor(t/h))+" million,"):t<x?(n=t%p,r=e(Math.floor(t/p))+" billion,"):t<f?(n=t%x,r=e(Math.floor(t/x))+" trillion,"):t<=9007199254740992&&(n=t%f,r=e(Math.floor(t/f))+" quadrillion,"),a.push(r),e(n,a))}(s),t?d(n):n}var v={toOrdinal:function(e){var t=parseInt(e,10);if(!r(t))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!a(t))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");var n=String(t),s=Math.abs(t%100),o=11<=s&&s<=13,i=n.charAt(n.length-1);return n+(o?"th":"1"===i?"st":"2"===i?"nd":"3"===i?"rd":"th")},toWords:y,toWordsOrdinal:function(e){return d(y(e))}};e.exports&&(t=e.exports=v),t.numberToWords=v}()},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,d=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,m=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,x=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function N(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case d:case u:case s:case i:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case m:case f:case x:case l:return e;default:return t}}case a:return t}}}function j(e){return N(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=m,t.Fragment=s,t.Lazy=f,t.Memo=x,t.Portal=a,t.Profiler=i,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return j(e)||N(e)===d},t.isConcurrentMode=j,t.isContextConsumer=function(e){return N(e)===c},t.isContextProvider=function(e){return N(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return N(e)===m},t.isFragment=function(e){return N(e)===s},t.isLazy=function(e){return N(e)===f},t.isMemo=function(e){return N(e)===x},t.isPortal=function(e){return N(e)===a},t.isProfiler=function(e){return N(e)===i},t.isStrictMode=function(e){return N(e)===o},t.isSuspense=function(e){return N(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===u||e===i||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===x||e.$$typeof===l||e.$$typeof===c||e.$$typeof===m||e.$$typeof===b||e.$$typeof===y||e.$$typeof===v||e.$$typeof===g)},t.typeOf=N}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&r;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".8ab44547.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,a,s,o)=>{if(e[r])e[r].push(a);else{var i,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+s),i.src=r),e[r]=[a];var m=(t,n)=>{i.onerror=i.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=s);var o=n.p+n.u(t),i=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",i.name="ChunkLoadError",i.type=s,i.request=o,a[1](i)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,s,o=r[0],i=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>hN,hasStandardBrowserEnv:()=>xN,hasStandardBrowserWebWorkerEnv:()=>fN,navigator:()=>pN,origin:()=>gN});var t=n(43),r=n.t(t,2),a=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const t=e[a],s=a+1<e.length,o=s?e[a+1]:0,i=a+2<e.length,l=i?e[a+2]:0,c=t>>2,d=(3&t)<<4|o>>4;let u=(15&o)<<2|l>>6,m=63&l;i||(m=64,s||(u=64)),r.push(n[c],n[d],n[u],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const t=n[e.charAt(a++)],s=a<e.length?n[e.charAt(a)]:0;++a;const o=a<e.length?n[e.charAt(a)]:64;++a;const l=a<e.length?n[e.charAt(a)]:64;if(++a,null==t||null==s||null==o||null==l)throw new i;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(dm){console.error("base64Decode failed: ",dm)}return null};function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return d().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(dm){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(dm){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(dm))}},m=e=>{var t,n;return null===(n=null===(t=u())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(e){return e.endsWith(".cloudworkstations.dev")}async function g(e){return(await fetch(e,{credentials:"include"})).ok}const b={};let y=!1;function v(e,t){if("undefined"===typeof window||"undefined"===typeof document||!f(window.location.host)||b[e]===t||b[e]||y)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",a=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{y=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),i=n("learnmore"),l=document.getElementById(i)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,i);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,o,l,n),document.body.appendChild(t)}a?(o.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function N(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function j(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(dm){return!1}}function w(){return!j()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){try{return"object"===typeof indexedDB}catch(dm){return!1}}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new C(n,s,t)}}const E=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],s=t[a];if(A(n)&&A(s)){if(!T(n,s))return!1}else if(n!==s)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function I(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function P(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(dm){}})),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(dm){"undefined"!==typeof console&&console.error&&console.error(dm)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function L(){}function R(e){return e&&e._delegate?e._delegate:e}class F{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const _="[DEFAULT]";class M{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(dm){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(dm){if(r)return null;throw dm}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:_})}catch(dm){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(dm){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(a)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);const s=this.instances.get(r);return s&&e(s,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(ef){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(ef){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;return this.component?this.component.multipleInstances?e:_:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function B(e){return e===_?void 0:e}class U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new M(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const H=[];var z;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(z||(z={}));const V={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},q=z.INFO,W={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},Y=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=W[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class G{constructor(e){this.name=e,this._logLevel=q,this._logHandler=Y,this._userLogHandler=null,H.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...t),this._logHandler(this,z.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...t),this._logHandler(this,z.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.INFO,...t),this._logHandler(this,z.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.WARN,...t),this._logHandler(this,z.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.ERROR,...t),this._logHandler(this,z.ERROR,...t)}}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}function $(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,ae=new WeakMap,se=new WeakMap;let oe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ie(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(de(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(de(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const s=e.call(de(this),t,...r);return re.set(s,t.sort?t.sort():[t]),ce(s)}}function le(e){return"function"===typeof e?ie(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)}));ne.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,oe):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(ce(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&te.set(t,e)})).catch((()=>{})),se.set(t,e),t}(e);if(ae.has(e))return ae.get(e);const t=le(e);return t!==e&&(ae.set(e,t),se.set(t,e)),t}const de=e=>se.get(e);const ue=["get","getKey","getAll","getAllKeys","count"],me=["put","add","delete","clear"],he=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(he.get(t))return he.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=me.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!ue.includes(n))return;const s=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,i=new Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];return r&&(s=s.index(i.shift())),(await Promise.all([s[n](...i),a&&t.done]))[0]};return he.set(t,s),s}oe=(e=>J(J({},e),{},{get:(t,n,r)=>pe(t,n)||e.get(t,n,r),has:(t,n)=>!!pe(t,n)||e.has(t,n)}))(oe);class xe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const fe="@firebase/app",ge="0.13.0",be=new G("@firebase/app"),ye="@firebase/app-compat",ve="@firebase/analytics-compat",Ne="@firebase/analytics",je="@firebase/app-check-compat",we="@firebase/app-check",Se="@firebase/auth",Ce="@firebase/auth-compat",ke="@firebase/database",Ee="@firebase/data-connect",Te="@firebase/database-compat",Ae="@firebase/functions",Ie="@firebase/functions-compat",De="@firebase/installations",Pe="@firebase/installations-compat",Oe="@firebase/messaging",Le="@firebase/messaging-compat",Re="@firebase/performance",Fe="@firebase/performance-compat",_e="@firebase/remote-config",Me="@firebase/remote-config-compat",Be="@firebase/storage",Ue="@firebase/storage-compat",He="@firebase/firestore",ze="@firebase/ai",Ve="@firebase/firestore-compat",qe="firebase",We="[DEFAULT]",Ye={[fe]:"fire-core",[ye]:"fire-core-compat",[Ne]:"fire-analytics",[ve]:"fire-analytics-compat",[we]:"fire-app-check",[je]:"fire-app-check-compat",[Se]:"fire-auth",[Ce]:"fire-auth-compat",[ke]:"fire-rtdb",[Ee]:"fire-data-connect",[Te]:"fire-rtdb-compat",[Ae]:"fire-fn",[Ie]:"fire-fn-compat",[De]:"fire-iid",[Pe]:"fire-iid-compat",[Oe]:"fire-fcm",[Le]:"fire-fcm-compat",[Re]:"fire-perf",[Fe]:"fire-perf-compat",[_e]:"fire-rc",[Me]:"fire-rc-compat",[Be]:"fire-gcs",[Ue]:"fire-gcs-compat",[He]:"fire-fst",[Ve]:"fire-fst-compat",[ze]:"fire-vertex","fire-js":"fire-js",[qe]:"fire-js-all"},Ge=new Map,Ke=new Map,Xe=new Map;function $e(e,t){try{e.container.addComponent(t)}catch(dm){be.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),dm)}}function Qe(e){const t=e.name;if(Xe.has(t))return be.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);for(const n of Ge.values())$e(n,e);for(const n of Ke.values())$e(n,e);return!0}function Je(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="11.8.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:We,automaticDataCollectionEnabled:!0},t),a=r.name;if("string"!==typeof a||!a)throw et.create("bad-app-name",{appName:String(a)});if(n||(n=h()),!n)throw et.create("no-options");const s=Ge.get(a);if(s){if(T(n,s.options)&&T(r,s.config))return s;throw et.create("duplicate-app",{appName:a})}const o=new U(a);for(const l of Xe.values())o.addComponent(l);const i=new tt(n,r,o);return Ge.set(a,i),i}function at(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;const t=Ge.get(e);if(!t&&e===We&&h())return rt();if(!t)throw et.create("no-app",{appName:e});return t}function st(e,t,n){var r;let a=null!==(r=Ye[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));const s=a.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void be.warn(e.join(" "))}Qe(new F("".concat(a,"-version"),(()=>({library:a,version:t})),"VERSION"))}const ot="firebase-heartbeat-store";let it=null;function lt(){return it||(it=function(e,t){let{blocked:n,upgrade:r,blocking:a,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),i=ce(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ce(o.result),e.oldVersion,e.newVersion,ce(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),i.then((e=>{s&&e.addEventListener("close",(()=>s())),a&&e.addEventListener("versionchange",(e=>a(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ot)}catch(dm){console.warn(dm)}}}).catch((e=>{throw et.create("idb-open",{originalErrorMessage:e.message})}))),it}async function ct(e,t){try{const n=(await lt()).transaction(ot,"readwrite"),r=n.objectStore(ot);await r.put(t,dt(e)),await n.done}catch(dm){if(dm instanceof C)be.warn(dm.message);else{const t=et.create("idb-set",{originalErrorMessage:null===dm||void 0===dm?void 0:dm.message});be.warn(t.message)}}}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ut{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ht(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(dm){be.warn(dm)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=mt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const a of e){const e=n.find((e=>e.agent===a.agent));if(e){if(e.dates.push(a.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),a=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(dm){return be.warn(dm),""}}}function mt(){return(new Date).toISOString().substring(0,10)}class ht{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!S()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await lt()).transaction(ot),n=await t.objectStore(ot).get(dt(e));return await t.done,n}catch(dm){if(dm instanceof C)be.warn(dm.message);else{const t=et.create("idb-get",{originalErrorMessage:null===dm||void 0===dm?void 0:dm.message});be.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var xt;xt="",Qe(new F("platform-logger",(e=>new xe(e)),"PRIVATE")),Qe(new F("heartbeat",(e=>new ut(e)),"PRIVATE")),st(fe,ge,xt),st(fe,ge,"esm2017"),st("fire-js","");function ft(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function gt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bt=gt,yt=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vt=new G("@firebase/auth");function Nt(e){if(vt.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vt.error("Auth (".concat(nt,"): ").concat(e),...n)}}function jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Et(e,...n)}function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Et(e,...n)}function St(e,t,n){const r=Object.assign(Object.assign({},bt()),{[t]:n});return new k("auth","Firebase",r).create(t,{appName:e.name})}function Ct(e){return St(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&jt(e,"argument-error"),St(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yt.create(e,...n)}function Tt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw Et(t,...r)}}function At(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nt(t),new Error(t)}function It(e,t){e||At(t)}function Dt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Lt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Pt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Rt{constructor(e,t){this.shortDelay=e,this.longDelay=t,It(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Lt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ft(e,t){It(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class _t{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void At("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void At("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void At("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ut=new Rt(3e4,6e4);function Ht(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zt(e,t,n,r){return Vt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let a={},s={};r&&("GET"===t?s=r:a={body:JSON.stringify(r)});const o=I(Object.assign({key:e.config.apiKey},s)).slice(1),i=await e._getAdditionalHeaders();i["Content-Type"]="application/json",e.languageCode&&(i["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:i},a);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&f(e.emulatorConfig.host)&&(l.credentials="include"),_t.fetch()(await Wt(e,e.config.apiHost,n,o),l)}))}async function Vt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mt),t);try{const t=new Gt(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Kt(e,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const t=a.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Kt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Kt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Kt(e,"user-disabled",s);const i=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw St(e,i,o);jt(e,i)}}catch(dm){if(dm instanceof C)throw dm;jt(e,"network-request-failed",{message:String(dm)})}}async function qt(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await zt(e,t,n,r,a);return"mfaPendingCredential"in s&&jt(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Wt(e,t,n,r){const a="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Ft(e.config,a):"".concat(e.config.apiScheme,"://").concat(a);if(Bt.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Yt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(wt(this.auth,"network-request-failed"))),Ut.get())}))}}function Kt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=wt(e,t,r);return a.customData._tokenResponse=n,a}function Xt(e){return void 0!==e&&void 0!==e.enterprise}class $t{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qt(e,t){return zt(e,"GET","/v2/recaptchaConfig",Ht(e,t))}async function Jt(e,t){return zt(e,"POST","/v1/accounts:lookup",t)}function Zt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(dm){}}function en(e){return 1e3*Number(e)}function tn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(Nt("Failed to decode base64 JWT payload"),null)}catch(dm){return Nt("Caught error parsing JWT payload as JSON",null===dm||void 0===dm?void 0:dm.toString()),null}}function nn(e){const t=tn(e);return Tt(t,"internal-error"),Tt("undefined"!==typeof t.exp,"internal-error"),Tt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function rn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(dm){throw dm instanceof C&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(dm)&&e.auth.currentUser===e&&await e.auth.signOut(),dm}}class an{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(dm){return void((null===dm||void 0===dm?void 0:dm.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class sn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zt(this.lastLoginAt),this.creationTime=Zt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function on(e){var t;const n=e.auth,r=await e.getIdToken(),a=await rn(e,Jt(n,{idToken:r}));Tt(null===a||void 0===a?void 0:a.users.length,n,"internal-error");const s=a.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ln(s.providerUserInfo):[],i=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===i||void 0===i?void 0:i.length),d=!!l&&c,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new sn(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,u)}function ln(e){return e.map((e=>{var{providerId:t}=e,n=ft(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt("undefined"!==typeof e.idToken,"internal-error"),Tt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):nn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tt(0!==e.length,"internal-error");const t=nn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await async function(e,t){const n=await Vt(e,{},(async()=>{const n=I({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,s=await Wt(e,r,"/v1/token","key=".concat(a)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",_t.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,s=new cn;return n&&(Tt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Tt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),a&&(Tt("number"===typeof a,"internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return At("not implemented")}}function dn(e,t){Tt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class un{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,a=ft(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new an(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new sn(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await rn(this,this.stsTokenManager.getToken(this.auth,e));return Tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R(e),r=await n.getIdToken(t),a=tn(r);Tt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const s="object"===typeof a.firebase?a.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:a,token:r,authTime:Zt(en(a.auth_time)),issuedAtTime:Zt(en(a.iat)),expirationTime:Zt(en(a.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=R(e);await on(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new un(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await on(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(Ct(this.auth));const e=await this.getIdToken();return await rn(this,async function(e,t){return zt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,a,s,o,i,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(r=t.email)&&void 0!==r?r:void 0,m=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,h=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,x=null!==(i=t._redirectEventId)&&void 0!==i?i:void 0,f=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:y,isAnonymous:v,providerData:N,stsTokenManager:j}=t;Tt(b&&j,e,"internal-error");const w=cn.fromJSON(this.name,j);Tt("string"===typeof b,e,"internal-error"),dn(d,e.name),dn(u,e.name),Tt("boolean"===typeof y,e,"internal-error"),Tt("boolean"===typeof v,e,"internal-error"),dn(m,e.name),dn(h,e.name),dn(p,e.name),dn(x,e.name),dn(f,e.name),dn(g,e.name);const S=new un({uid:b,auth:e,email:u,emailVerified:y,displayName:d,isAnonymous:v,photoURL:h,phoneNumber:m,tenantId:p,stsTokenManager:w,createdAt:f,lastLoginAt:g});return N&&Array.isArray(N)&&(S.providerData=N.map((e=>Object.assign({},e)))),x&&(S._redirectEventId=x),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new cn;r.updateFromServerResponse(t);const a=new un({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await on(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Tt(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?ln(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),o=new cn;o.updateFromIdToken(n);const i=new un({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new sn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length)};return Object.assign(i,l),i}}const mn=new Map;function hn(e){It(e instanceof Function,"Expected a class definition");let t=mn.get(e);return t?(It(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mn.set(e,t),t)}class pn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pn.type="NONE";const xn=pn;function fn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class gn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=fn(this.userKey,r.apiKey,a),this.fullPersistenceKey=fn("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Jt(this.auth,{idToken:e}).catch((()=>{}));return t?un._fromGetAccountInfoResponse(this.auth,t,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new gn(hn(xn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let a=r[0]||hn(xn);const s=fn(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await Jt(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await un._fromGetAccountInfoResponse(e,r,t)}else n=un._fromJSON(e,t);l!==a&&(o=n),a=l;break}}catch(ef){}const i=r.filter((e=>e._shouldAllowMigration));return a._shouldAllowMigration&&i.length?(a=i[0],o&&await a._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==a)try{await e._remove(s)}catch(ef){}}))),new gn(a,e,n)):new gn(a,e,n)}}function bn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Sn(t))return"Blackberry";if(Cn(t))return"Webos";if(vn(t))return"Safari";if((t.includes("chrome/")||Nn(t))&&!t.includes("edge/"))return"Chrome";if(wn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/firefox\//i.test(e)}function vn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:N()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/crios\//i.test(e)}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/iemobile/i.test(e)}function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/android/i.test(e)}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/blackberry/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/webos/i.test(e)}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function En(){return function(){const e=N();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return kn(e)||wn(e)||Cn(e)||Sn(e)||/windows phone/i.test(e)||jn(e)}function An(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=bn(N());break;case"Worker":t="".concat(bn(N()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class In{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(dm){r(dm)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(dm){t.reverse();for(const n of t)try{n()}catch(ch){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===dm||void 0===dm?void 0:dm.message})}}}class Dn{constructor(e){var t,n,r,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,a,s,o;const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=null===(t=i.meetsMinPasswordLength)||void 0===t||t),i.isValid&&(i.isValid=null===(n=i.meetsMaxPasswordLength)||void 0===n||n),i.isValid&&(i.isValid=null===(r=i.containsLowercaseLetter)||void 0===r||r),i.isValid&&(i.isValid=null===(a=i.containsUppercaseLetter)||void 0===a||a),i.isValid&&(i.isValid=null===(s=i.containsNumericCharacter)||void 0===s||s),i.isValid&&(i.isValid=null===(o=i.containsNonAlphanumericCharacter)||void 0===o||o),i}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Pn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ln(this),this.idTokenSubscription=new Ln(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hn(t)),this._initializationPromise=this.queue((async()=>{var n,r,a;if(!this._deleted&&(this.persistenceManager=await gn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(dm){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(a=this.currentUser)||void 0===a?void 0:a.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Jt(this,{idToken:e}),n=await un._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(dm){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(dm)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(dm){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await on(e)}catch(dm){if((null===dm||void 0===dm?void 0:dm.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(Ct(this));const t=e?R(e):null;return t&&Tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ze(this.app)?Promise.reject(Ct(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(Ct(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(hn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return zt(e,"GET","/v2/passwordPolicy",Ht(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Dn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return zt(e,"POST","/v2/accounts:revokeToken",Ht(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hn(e)||this._popupRedirectResolver;Tt(t,this,"argument-error"),this.redirectPersistenceManager=await gn.create(this,[hn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(o,this,"internal-error"),o.then((()=>{s||a(this.currentUser)})),"function"===typeof t){const a=e.addObserver(t,n,r);return()=>{s=!0,a()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=An(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(vt.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vt.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function On(e){return R(e)}class Ln{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new O(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fn(e){return Rn.loadJS(e)}function _n(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Mn{constructor(){this.enterprise=new Bn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Bn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Un="NO_RECAPTCHA";class Hn{constructor(e){this.type="recaptcha-enterprise",this.auth=On(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const a=window.grecaptcha;Xt(a)?a.enterprise.ready((()=>{a.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Un)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Mn).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Qt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new $t(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((a=>{if(!t&&Xt(window.grecaptcha))n(a,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Rn.recaptchaEnterpriseScript;0!==t.length&&(t+=a),Fn(t).then((()=>{n(a,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function zn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Hn(e);let o;if(a)o=Un;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const i=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.recaptchaToken;Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.recaptchaToken;Object.assign(i,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return i}return r?Object.assign(i,{captchaResp:o}):Object.assign(i,{captchaResponse:o}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Vn(e,t,n,r,a){var s,o;if("EMAIL_PASSWORD_PROVIDER"===a){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await zn(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch((async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await zn(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)}))}if("PHONE_PROVIDER"===a){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const a=await zn(e,t,n);return r(e,a).catch((async a=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(a.code==="auth/".concat("missing-recaptcha-token")||a.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const a=await zn(e,t,n,!1,!0);return r(e,a)}return Promise.reject(a)}))}{const a=await zn(e,t,n,!1,!0);return r(e,a)}}return Promise.reject(a+" provider is not supported.")}async function qn(e){const t=On(e),n=await Qt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $t(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Hn(t).verify()}}function Wn(e,t,n){const r=On(e);Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Yn(t),{host:o,port:i}=function(e){const t=Yn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:Gn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gn(t)}}}(t),l=null===i?"":":".concat(i),c={url:"".concat(s,"//").concat(o).concat(l,"/")},d=Object.freeze({host:o,port:i,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator)return Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Tt(T(c,r.config.emulator)&&T(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,f(o)?(g("".concat(s,"//").concat(o).concat(l)),v("Auth",!0)):a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Kn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return At("not implemented")}_getIdTokenResponse(e){return At("not implemented")}_linkToIdToken(e,t){return At("not implemented")}_getReauthenticationResolver(e){return At("not implemented")}}async function Xn(e,t){return zt(e,"POST","/v1/accounts:signUp",t)}async function $n(e,t){return qt(e,"POST","/v1/accounts:signInWithPassword",Ht(e,t))}class Qn extends Kn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qn(e,t,"password")}static _fromEmailAndCode(e,t){return new Qn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Vn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$n,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return qt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Vn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return qt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jn(e,t){return qt(e,"POST","/v1/accounts:signInWithIdp",Ht(e,t))}class Zn extends Kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,a=ft(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Zn(n,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return Jn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=I(t)}return e}}async function er(e,t){return zt(e,"POST","/v1/accounts:sendVerificationCode",Ht(e,t))}const tr={USER_NOT_FOUND:"user-not-found"};class nr extends Kn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t));if(n.temporaryProof)throw Kt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return qt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),tr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new nr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class rr{constructor(e){var t,n,r,a,s,o;const i=D(P(e)),l=null!==(t=i.apiKey)&&void 0!==t?t:null,c=null!==(n=i.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=i.mode)&&void 0!==r?r:null);Tt(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=null!==(a=i.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=i.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=i.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=D(P(e)).link,n=t?D(P(t)).deep_link_id:null,r=D(P(e)).deep_link_id;return(r?D(P(r)).link:null)||r||n||t||e}(e);try{return new rr(t)}catch(ef){return null}}}class ar{constructor(){this.providerId=ar.PROVIDER_ID}static credential(e,t){return Qn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=rr.parseLink(t);return Tt(n,"argument-error"),Qn._fromEmailAndCode(e,n.code,n.tenantId)}}ar.PROVIDER_ID="password",ar.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ar.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class or extends sr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ir extends or{constructor(){super("facebook.com")}static credential(e){return Zn._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ir.credential(t.oauthAccessToken)}catch(ef){return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com",ir.PROVIDER_ID="facebook.com";class lr extends or{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zn._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return lr.credential(n,r)}catch(ef){return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com",lr.PROVIDER_ID="google.com";class cr extends or{constructor(){super("github.com")}static credential(e){return Zn._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch(ef){return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com",cr.PROVIDER_ID="github.com";class dr extends or{constructor(){super("twitter.com")}static credential(e,t){return Zn._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return dr.credential(n,r)}catch(ef){return null}}}async function ur(e,t){return qt(e,"POST","/v1/accounts:signUp",Ht(e,t))}dr.TWITTER_SIGN_IN_METHOD="twitter.com",dr.PROVIDER_ID="twitter.com";class mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await un._fromIdTokenResponse(e,n,r),s=hr(n);return new mr({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hr(n);return new mr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class pr extends C{constructor(e,t,n,r){var a;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pr.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pr(e,t,n,r)}}function xr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw pr._fromErrorAndOperation(e,n,t,r);throw n}))}async function fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await rn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mr._forOperation(e,"link",r)}async function gr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(Ct(r));const a="reauthenticate";try{const s=await rn(e,xr(r,a,t,e),n);Tt(s.idToken,r,"internal-error");const o=tn(s.idToken);Tt(o,r,"internal-error");const{sub:i}=o;return Tt(e.uid===i,r,"user-mismatch"),mr._forOperation(e,a,s)}catch(dm){throw(null===dm||void 0===dm?void 0:dm.code)==="auth/".concat("user-not-found")&&jt(r,"user-mismatch"),dm}}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Ct(e));const r="signIn",a=await xr(e,r,t),s=await mr._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(s.user),s}async function yr(e,t){return br(On(e),t)}async function vr(e){const t=On(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Nr(e,t,n){if(Ze(e.app))return Promise.reject(Ct(e));const r=On(e),a=Vn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ur,"EMAIL_PASSWORD_PROVIDER"),s=await a.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vr(e),t})),o=await mr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function jr(e,t){return zt(e,"POST","/v2/accounts/mfaEnrollment:start",Ht(e,t))}new WeakMap;const wr="__sak";class Sr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wr,"1"),this.storage.removeItem(wr),Promise.resolve(!0)):Promise.resolve(!1)}catch(ef){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Cr extends Sr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},a=this.storage.getItem(n);En()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cr.type="LOCAL";const kr=Cr;function Er(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(a))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Tr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Ar{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Tr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Er(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Tr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Tr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Er(n);const a=setInterval((()=>{const e=Er(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(a)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ar.type="COOKIE";class Ir extends Sr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ir.type="SESSION";const Dr=Ir;class Pr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Pr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,a))),i=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:i})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Pr.receivers=[];class Lr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,s;return new Promise(((o,i)=>{const l=Or("",20);r.port1.start();const c=setTimeout((()=>{i(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout((()=>{i(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),o(t.data.response);break;default:clearTimeout(c),clearTimeout(a),i(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Rr(){return window}function Fr(){return"undefined"!==typeof Rr().WorkerGlobalScope&&"function"===typeof Rr().importScripts}const _r="firebaseLocalStorageDb",Mr="firebaseLocalStorage",Br="fbase_key";class Ur{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Hr(e,t){return e.transaction([Mr],t?"readwrite":"readonly").objectStore(Mr)}function zr(){const e=indexedDB.open(_r,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Mr,{keyPath:Br})}catch(dm){n(dm)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Mr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(_r);return new Ur(e).toPromise()}(),t(await zr()))}))}))}async function Vr(e,t,n){const r=Hr(e,!0).put({[Br]:t,value:n});return new Ur(r).toPromise()}function qr(e,t){const n=Hr(e,!0).delete(t);return new Ur(n).toPromise()}class Wr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await zr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(dm){if(t++>3)throw dm;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pr._getInstance(Fr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Lr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(ef){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zr();return await Vr(e,wr,"1"),await qr(e,wr),!0}catch(ef){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Vr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Hr(e,!1).get(t),r=await new Ur(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Hr(e,!1).getAll();return new Ur(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Wr.type="LOCAL";const Yr=Wr;function Gr(e,t){return zt(e,"POST","/v2/accounts/mfaSignIn:start",Ht(e,t))}_n("rcb"),new Rt(3e4,6e4);const Kr="recaptcha";async function Xr(e,t,n){var r;if(!e._getRecaptchaConfig())try{await qn(e)}catch(a){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){Tt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Vn(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Un){Tt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return jr(e,await $r(e,t,n))}return jr(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{Tt("signin"===t.type,e,"internal-error");const s=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;Tt(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},i=Vn(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Un){Tt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return Gr(e,await $r(e,t,n))}return Gr(e,t)}),"PHONE_PROVIDER");return(await i.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Vn(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Un){Tt((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return er(e,await $r(e,t,n))}return er(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $r(e,t,n){Tt(n.type===Kr,e,"argument-error");const r=await n.verify();Tt("string"===typeof r,e,"argument-error");const a=Object.assign({},t);if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.captchaResponse,n=a.phoneEnrollmentInfo.clientType,s=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),a}if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.captchaResponse,t=a.phoneSignInInfo.clientType,n=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),a}return Object.assign(a,{recaptchaToken:r}),a}class Qr{constructor(e){this.providerId=Qr.PROVIDER_ID,this.auth=On(e)}verifyPhoneNumber(e,t){return Xr(this.auth,e,R(t))}static credential(e,t){return nr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qr.credentialFromTaggedObject(t)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?nr._fromTokenResponse(n,r):null}}function Jr(e,t){return t?hn(t):(Tt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qr.PROVIDER_ID="phone",Qr.PHONE_SIGN_IN_METHOD="phone";class Zr extends Kn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ea(e){return br(e.auth,new Zr(e),e.bypassAuthState)}function ta(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),gr(n,new Zr(e),e.bypassAuthState)}async function na(e){const{auth:t,user:n}=e;return Tt(n,t,"internal-error"),fr(n,new Zr(e),e.bypassAuthState)}class ra{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(dm){this.reject(dm)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:s,type:o}=e;if(s)return void this.reject(s);const i={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(i))}catch(dm){this.reject(dm)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ea;case"linkViaPopup":case"linkViaRedirect":return na;case"reauthViaPopup":case"reauthViaRedirect":return ta;default:jt(this.auth,"internal-error")}}resolve(e){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aa=new Rt(2e3,1e4);class sa extends ra{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){It(1===this.filter.length,"Popup operations only handle one event");const e=Or();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(wt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(wt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,aa.get())};e()}}sa.currentPopupAction=null;const oa=new Map;class ia extends ra{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=oa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=da(t),r=ca(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(dm){e=()=>Promise.reject(dm)}oa.set(this.auth._key(),e)}return this.bypassAuthState||oa.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function la(e,t){oa.set(e._key(),t)}function ca(e){return hn(e._redirectPersistence)}function da(e){return fn("pendingRedirect",e.config.apiKey,e.name)}async function ua(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Ct(e));const r=On(e),a=Jr(r,t),s=new ia(r,a,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class ma{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pa(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ha(e))}saveEventToCache(e){this.cachedEventUids.add(ha(e)),this.lastProcessedEventTime=Date.now()}}function ha(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function pa(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const xa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fa=/^https?/;async function ga(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return zt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ba(n))return}catch(ef){}jt(e,"unauthorized-domain")}function ba(e){const t=Dt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!fa.test(n))return!1;if(xa.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const ya=new Rt(3e4,6e4);function va(){const e=Rr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Na(e){return new Promise(((t,n)=>{var r,a,s;function o(){va(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{va(),n(wt(e,"network-request-failed"))},timeout:ya.get()})}if(null===(a=null===(r=Rr().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Rr().gapi)||void 0===s?void 0:s.load)){const t=_n("iframefcb");return Rr()[t]=()=>{gapi.load?o():n(wt(e,"network-request-failed"))},Fn("".concat(Rn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ja=null,e}))}let ja=null;const wa=new Rt(5e3,15e3),Sa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ca=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ka(e){const t=e.config;Tt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ft(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},a=Ca.get(e.config.apiHost);a&&(r.eid=a);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(I(r).slice(1))}async function Ea(e){const t=await function(e){return ja=ja||Na(e),ja}(e),n=Rr().gapi;return Tt(n,e,"internal-error"),t.open({where:document.body,url:ka(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=wt(e,"network-request-failed"),s=Rr().setTimeout((()=>{r(a)}),wa.get());function o(){Rr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(a)}))}))))}const Ta={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Aa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(dm){}}}function Ia(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let i="";const l=Object.assign(Object.assign({},Ta),{width:r.toString(),height:a.toString(),top:s,left:o}),c=N().toLowerCase();n&&(i=Nn(c)?"_blank":n),yn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return kn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:N())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==i)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",i),new Aa(null);const u=window.open(t||"",i,d);Tt(u,e,"popup-blocked");try{u.focus()}catch(dm){}return new Aa(u)}const Da="__/auth/handler",Pa="emulator/auth/handler",Oa=encodeURIComponent("fac");async function La(e,t,n,r,a,s){Tt(e.config.authDomain,e,"auth-domain-config-required"),Tt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:a};if(t instanceof sr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof or){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const i=o;for(const d of Object.keys(i))void 0===i[d]&&delete i[d];const l=await e._getAppCheckToken(),c=l?"#".concat(Oa,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Da);return Ft(t,Pa)}(e),"?").concat(I(i).slice(1)).concat(c)}const Ra="webStorageSupport";const Fa=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dr,this._completeRedirectFn=ua,this._overrideRedirectResult=la}async _openPopup(e,t,n,r){var a;It(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return Ia(e,await La(e,t,n,Dt(),r),Or())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rr().location.href=e}(await La(e,t,n,Dt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(It(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ea(e),n=new ma(e);return t.register("authEvent",(t=>{Tt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ra,{type:Ra},(n=>{var r;const a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ra];void 0!==a&&t(!!a),jt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ga(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tn()||vn()||kn()}};var _a="@firebase/auth",Ma="1.10.6";class Ba{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ua=p("authIdTokenMaxAge")||300;let Ha=null;var za;!function(e){Rn=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=wt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),za="Browser",Qe(new F("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:i}=r.options;Tt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:i,clientPlatform:za,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:An(za)},c=new Pn(r,a,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Qe(new F("auth-internal",(e=>(e=>new Ba(e))(On(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),st(_a,Ma,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(za)),st(_a,Ma,"esm2017");st("firebase","11.8.1","app");var Va,qa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wa={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var a=0;16>a;++a)r[a]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(a=0;16>a;++a)r[a]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],a=e.g[2];var s=e.g[3],o=t+(s^n&(a^s))+r[0]+3614090360&4294967295;o=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=(n=(a=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(a^t&(n^a))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=a+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^a&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(a^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(a^t&(n^a))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=a+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^a&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(a^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(a^t&(n^a))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=a+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^a&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(a^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(a^t&(n^a))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=a+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^a&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^s&(n^a))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^a&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=a+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(a^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(a^s&(n^a))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^a&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=a+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(a^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(a^s&(n^a))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^a&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=a+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(a^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(a^s&(n^a))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^a&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=a+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(a^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^a^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^a)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=a+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(a^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^a^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^a)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=a+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(a^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^a^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^a)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=a+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(a^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^a^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^a)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=a+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(a^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(a^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~a))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=a+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(a|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(a^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~a))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=a+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(a|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(a^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~a))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=a+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(a|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(a^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~a))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((a=s+((o=a+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(a+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+a&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,a=e.length-1;0<=a;a--){var s=0|e[a];r&&s==t||(n[a]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,a=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(a[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,a),s=0;break}}else for(;o<t;)if(a[s++]=e[o++],s==this.blockSize){n(this,a),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function s(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return i;if(0>e)return m(o(-e));for(var t=[],n=1,a=0;e>=n;a++)t[a]=e/n|0,n*=4294967296;return new r(t,0)}var i=s(0),l=s(1),c=s(16777216);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],a=0;a<t;a++)n[a]=~e.g[a];return new r(n,~e.h).add(l)}function h(e,t){return e.add(m(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function x(e,t){this.g=e,this.h=t}function f(e,t){if(d(t))throw Error("division by zero");if(d(e))return new x(i,i);if(u(e))return t=f(m(e),t),new x(m(t.g),m(t.h));if(u(t))return t=f(e,m(t)),new x(m(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=g(n),r=g(r);var a=b(n,1),s=b(r,1);for(r=b(r,2),n=b(n,2);!d(r);){var c=s.add(r);0>=c.l(e)&&(a=a.add(n),s=c),r=b(r,1),n=b(n,1)}return t=h(e,a.j(t)),new x(a,t)}for(a=i;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);u(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);d(s)&&(s=l),a=a.add(s),e=h(e,c)}return new x(a,e)}function g(e){for(var t=e.g.length+1,n=[],a=0;a<t;a++)n[a]=e.i(a)<<1|e.i(a-1)>>>31;return new r(n,e.h)}function b(e,t){var n=t>>5;t%=32;for(var a=e.g.length-n,s=[],o=0;o<a;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(u(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(u(this))return"-"+m(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var a=f(n,t).g,s=((0<(n=h(n,a.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(d(n=a))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=h(this,e))?-1:d(e)?0:1},e.abs=function(){return u(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0,s=0;s<=t;s++){var o=a+(65535&this.i(s))+(65535&e.i(s)),i=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);a=i>>>16,o&=65535,i&=65535,n[s]=i<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(d(this)||d(e))return i;if(u(this))return u(e)?m(this).j(m(e)):m(m(this).j(e));if(u(e))return m(this.j(m(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var s=0;s<e.g.length;s++){var l=this.i(a)>>>16,h=65535&this.i(a),x=e.i(s)>>>16,f=65535&e.i(s);n[2*a+2*s]+=h*f,p(n,2*a+2*s),n[2*a+2*s+1]+=l*f,p(n,2*a+2*s+1),n[2*a+2*s+1]+=h*x,p(n,2*a+2*s+1),n[2*a+2*s+2]+=l*x,p(n,2*a+2*s+2)}for(a=0;a<t;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=t;a<2*t;a++)n[a]=0;return new r(n,0)},e.A=function(e){return f(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)&e.i(a);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)|e.i(a);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)^e.i(a);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Wa.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),a=i,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),a=a.j(l).add(o(c))):a=(a=a.j(r)).add(o(c))}return a},Va=Wa.Integer=r}).apply("undefined"!==typeof qa?qa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ya,Ga,Ka,Xa,$a,Qa,Ja,Za,es="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ts={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof es&&es];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var a=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in a))break e;a=a[o]}(r=r(s=a[e=e[e.length-1]]))!=s&&null!=r&&t(a,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,(function(e,t){return t}))}}));var r=r||{},a=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function i(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:l).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return t.prototype[n].apply(e,a)}}function m(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function h(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let a=0;a<r;a++)e[n+a]=t[a]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function x(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function f(e){return f[" "](e),e}f[" "]=function(){};var g=-1!=x().indexOf("Gecko")&&!(-1!=x().toLowerCase().indexOf("webkit")&&-1==x().indexOf("Edge"))&&!(-1!=x().indexOf("Trident")||-1!=x().indexOf("MSIE"))&&-1==x().indexOf("Edge");function b(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function y(e){const t={};for(const n in e)t[n]=e[n];return t}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(e,t){let n,r;for(let a=1;a<arguments.length;a++){for(n in r=arguments[a],r)e[n]=r[n];for(let t=0;t<v.length;t++)n=v[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function w(e){a.setTimeout((()=>{throw e}),0)}function S(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,T=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=a.Promise.resolve(void 0);E=()=>{e.then(D)}};var D=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(fm){w(fm)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(fm){}return e}();function R(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(g){e:{try{f(t.nodeName);var a=!0;break e}catch(Nm){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:F[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}u(R,O);var F={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _="closure_listenable_"+(1e6*Math.random()|0),M=0;function B(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++M,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function H(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],s=Array.prototype.indexOf.call(a,t,void 0);(r=0<=s)&&Array.prototype.splice.call(a,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(var a=0;a<e.length;++a){var s=e[a];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return a}return-1}H.prototype.add=function(e,t,n,r,a){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=V(e,t,r,a);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new B(t,this.src,s,!!r,a)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),W={};function Y(e,t,n,r,a){if(r&&r.once)return K(e,t,n,r,a);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,r,a);return null}return n=te(n),e&&e[_]?e.K(t,n,o(r)?!!r.capture:!!r,a):G(e,t,n,!1,r,a)}function G(e,t,n,r,a,s){if(!t)throw Error("Invalid event type");var i=o(a)?!!a.capture:!!a,l=Z(e);if(l||(e[q]=l=new H(e)),(n=l.add(t,n,r,i,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(a=i),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,a){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,a);return null}return n=te(n),e&&e[_]?e.L(t,n,o(r)?!!r.capture:!!r,a):G(e,t,n,!0,r,a)}function X(e,t,n,r,a){if(Array.isArray(t))for(var s=0;s<t.length;s++)X(e,t[s],n,r,a);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[_]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=V(s=e.g[t],n,r,a))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,a)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[_])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function Q(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof H?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new H(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var a=t;N(t=new O(r,e),a)}if(a=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];a=ae(o,r,!0,t)&&a}if(a=ae(o=t.g=e,r,!0,t)&&a,a=ae(o,r,!1,t)&&a,n)for(s=0;s<n.length;s++)a=ae(o=t.g=n[s],r,!1,t)&&a}function ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var i=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),a=!1!==i.call(l,r)&&a}}return a&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ne,P),ne.prototype[_]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}u(le,P);var ce=[];function de(e){b(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),de(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ue=a.JSON.stringify,me=a.JSON.parse,he=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function pe(){}function xe(e){return e.h||(e.h=e.i())}function fe(){}pe.prototype.h=null;var ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function be(){O.call(this,"d")}function ye(){O.call(this,"c")}u(be,O),u(ye,O);var ve={},Ne=null;function je(){return Ne=Ne||new ne}function we(e){O.call(this,ve.La,e)}function Se(e){const t=je();re(t,new we(t))}function Ce(e,t){O.call(this,ve.STAT_EVENT,e),this.stat=t}function ke(e){const t=je();re(t,new Ce(t,e))}function Ee(e,t){O.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ie(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var s=a[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<a.length;o++)a[o]=""}}}return ue(n)}catch(i){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",u(we,O),ve.STAT_EVENT="statevent",u(Ce,O),ve.Ma="timingevent",u(Ee,O),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var De,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}u(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},De=new Le;var _e={},Me={};function Be(e,t,n){e.L=1,e.v=ut(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Ve(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Fe,e.g=mn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var a="readystatechange";Array.isArray(a)||(a&&(ce[0]=a.toString()),a=ce);for(var s=0;s<a.length;s++){var o=Y(n,a[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,a,s){e.info((function(){if(e.g)if(s)for(var o="",i=s.split("&"),l=0;l<i.length;l++){var c=i[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");o=2<=u.length&&"type"==u[1]?o+(d+"=")+c+"&":o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function He(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?_e:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function Ye(e){0==e.j.G||e.J||on(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,de(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(mm){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Xt(n)}nn(n),ke(18)}}else n.za=a[1],0<n.za-n.T&&37500>a[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(mm){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(a=n.Da.g.parse(t),t=0;t<a.length;t++){let c=a[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const a=c[4];null!=a&&(n.Aa=a,n.j.info("SVER="+n.Aa));const d=c[5];null!=d&&"number"===typeof d&&0<d&&(r=1.5*d,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,dt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var i=o,l=r.L;l&&(i.I=l),i.B&&(We(i),Ve(i)),r.g=o}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(mm){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const m=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>m)&&(3!=m||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=m||7==t||Se(),We(this);var n=this.g.Z();this.X=n;t:if(He(this)){var r=Wt(this.g);e="";var s=r.length,o=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ye(this);var i="";break t}this.h.i=new a.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,i=this.h.g}else i=this.g.oa();if(this.o=200==n,function(e,t,n,r,a,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,m,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var d=l;break t}}d=null}if(!(n=d)){this.o=!1,this.s=3,ke(12),Ge(this),Ye(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<i.length;){if(e=ze(this,i),e==Me){4==m&&(this.s=4,ke(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==_e){this.s=4,ke(15),Ie(this.i,this.l,i,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),Ke(this,e)}if(He(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=m||0!=i.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<i.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),rn(u),u.M=!0,ke(11))}}else Ie(this.i,this.l,i,"[Invalid Chunked Response]"),Ge(this),Ye(this)}else Ie(this.i,this.l,i,null),Ke(this,i);4==m&&Ge(this),this.o&&!this.J&&(4==m?on(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=j(e[r]);const a=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[a]||[];t[a]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<i.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),Ye(this)}}}catch(PC){}},Re.prototype.cancel=function(){this.J=!0,Ge(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),ke(17)),Ge(this),this.s=2,Ye(this)):qe(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return m(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,o=0;o<a;o++)t.call(void 0,r[o],n&&n[o],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var at=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(at))?(this.h=!1,it(this,t[1]||"",!0),this.o=mt(t[2]||""),this.g=mt(t[3]||"",!0),lt(this,t[4]),this.l=mt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=mt(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function ot(e){return new st(e)}function it(e,t,n){e.j=n?mt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(jt(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,bt)),e.i=new vt(t,e.h))}function dt(e,t,n){e.i.set(t,n)}function ut(e){return dt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function mt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,xt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:ft,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var xt=/[#\/\?@]/g,ft=/[#\?:]/g,gt=/[#\?]/g,bt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var s=e[n].substring(0,r);a=e[n].substring(r+1)}else s=e[n];t(s,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function jt(e,t){Nt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return Nt(e),t=Ct(e,t),e.g.has(t)}function St(e,t,n){jt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),m(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),r(n)}catch(Nm){}}function Et(){this.g=new he}function Tt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let a=e;o(e)&&(a=ue(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(dm){throw t.push(r+"type="+encodeURIComponent("_badmap")),dm}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function It(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return b(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):dt(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){Nt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const a=e[r];for(let e=0;e<a.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)wt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,wt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var a=s;""!==o[r]&&(a+="="+encodeURIComponent(String(o[r]))),e.push(a)}}return this.i=e.join("&")},u(At,pe),At.prototype.g=function(){return new It(this.l,this.j)},At.prototype.i=function(e){return function(){return e}}({}),u(It,ne),(e=It.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(It.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Ft,ne);var _t=/^https?$/i,Mt=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),zt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Ht(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(at)[1]||null;!o&&a.self&&a.self.location&&(o=a.self.location.protocol.slice(0,-1)),s=!_t.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var i=2<qt(e)?e.g.statusText:""}catch(l){i=""}e.l=i+" ["+e.Z()+"]",Ut(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){Vt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(dm){}}}function Vt(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yt("baseRetryDelayMs",5e3,e),this.cb=Yt("retryDelaySeedMs",1e4,e),this.Wa=Yt("forwardChannelMaxRetries",2,e),this.wa=Yt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new Et,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(dt(n,"SID",e.K),dt(n,"RID",t),dt(n,"TYPE","terminate"),Zt(e,n),(t=new Re(e,e.j,t)).L=2,t.v=ut(ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(vm){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=mn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}dn(e)}function Xt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function $t(e){Xt(e),e.u&&(a.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&a.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||I(),T||(E(),T=!0),A.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);dt(r,"SID",e.K),dt(r,"RID",n),dt(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Rt(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function Zt(e,t){e.H&&b(e.H,(function(e,n){dt(t,n,e)})),e.l&&rt({},(function(e,n){dt(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=a[o].g;const i=a[o].map;if(n-=t,0>n)t=Math.max(0,a[o].g-100),s=!1;else try{Tt(i,e,"req"+n+"_")}catch(PC){r&&r(i)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||I(),T||(E(),T=!0),A.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);dt(t,"RID","rpc"),dt(t,"SID",e.K),dt(t,"AID",e.T),dt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&dt(t,"TO",e.ja),dt(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Rt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ut(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function on(e,t){var n=null;if(e.g==t){sn(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var a=e.B;re(r=je(),new Ee(r,n)),Qt(e)}else tn(e);else if(3==(a=t.s)||0==a&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||it(r,"https"),ut(r),t?function(e,t){const n=new Ae;if(a.Image){const r=new Image;r.onload=d(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=d(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=d(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(kt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),dn(e),$t(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(h(e.ka,t),h(e.ka,e.i),e.h.i.length=0,m(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=a.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&it(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&dt(r,n,t),dt(r,"VER",e.la),Zt(e,r),r}function mn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new At({eb:n})):new Ft(e.pa)).Ha(e.J),t}function hn(){}function pn(){}function xn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function fn(e){be.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function bn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?xe(this.o):xe(De),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Nm){return void Bt(this,Nm)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vt(this),this.u=!0,this.g.send(e),this.u=!1}catch(Nm){Bt(this,Nm)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ht(this):this.bb())},e.bb=function(){Ht(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(hm){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(hm){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),me(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const a=new Re(this,this.j,e);let s=this.o;if(this.S&&(s?(s=y(s),N(s,this.S)):s=this.S),null!==this.m||this.O||(a.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,a,t),dt(n=ot(this.I),"RID",e),dt(n,"CVER",22),this.D&&dt(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Rt(n,this.m,s)),et(this.h,a),this.Ua&&dt(n,"TYPE","init"),this.P?(dt(n,"$req",t),dt(n,"SID","null"),a.T=!0,Be(a,n,null)):Be(a,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),nn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new xn(e,t)},u(xn,ne),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Kt(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ue(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&Qt(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,xn.aa.N.call(this)},u(fn,be),u(gn,ye),u(bn,hn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new fn(e))},bn.prototype.sa=function(e){re(this.g,new gn)},bn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Za=ts.createWebChannelTransport=function(){return new pn},Ja=ts.getStatEventTarget=function(){return je()},Qa=ts.Event=ve,$a=ts.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,Xa=ts.ErrorCode=Pe,Oe.COMPLETE="complete",Ka=ts.EventType=Oe,fe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ga=ts.WebChannel=fe,ts.FetchXmlHttpFactory=At,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Ya=ts.XhrIo=Ft}).apply("undefined"!==typeof es?es:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ns="@firebase/firestore",rs="4.7.16";class as{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let ss="11.8.1";const os=new G("@firebase/firestore");function is(){return os.logLevel}function ls(e){if(os.logLevel<=z.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(us);os.debug("Firestore (".concat(ss,"): ").concat(e),...a)}}function cs(e){if(os.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(us);os.error("Firestore (".concat(ss,"): ").concat(e),...a)}}function ds(e){if(os.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(us);os.warn("Firestore (".concat(ss,"): ").concat(e),...a)}}function us(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(um){return e}}function ms(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,hs(e,r,n)}function hs(e,t,n){let r="FIRESTORE (".concat(ss,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw cs(r),new Error(r)}function ps(e,t,n,r){let a="Unexpected state";"string"==typeof n?a=n:r=n,e||hs(t,a,r)}function xs(e,t){return e}const fs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gs extends C{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ys{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class vs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(as.UNAUTHENTICATED)))}shutdown(){}}class Ns{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class js{constructor(e){this.t=e,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ps(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let a=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bs,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=a;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bs)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ps("string"==typeof t.accessToken,31837,{l:t}),new ys(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ps(null===e||"string"==typeof e,2055,{h:e}),new as(e)}}class ws{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=as.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ss{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ws(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(as.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ks{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ps(void 0===this.o,3512);const n=e=>{null!=e.error&&ls("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ls("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cs(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ps("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Cs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Es(){return new TextEncoder}function Ts(e,t){return e<t?-1:e>t?1:0}function As(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Ts(r,a);{const s=Es(),o=Ds(s.encode(Is(e,n)),s.encode(Is(t,n)));return 0!==o?o:Ts(r,a)}}n+=r>65535?2:1}return Ts(e.length,t.length)}function Is(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Ds(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ts(e[n],t[n]);return Ts(e.length,t.length)}function Ps(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Os=-62135596800,Ls=1e6;class Rs{static now(){return Rs.fromMillis(Date.now())}static fromDate(e){return Rs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ls);return new Rs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gs(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gs(fs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Os)throw new gs(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gs(fs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ls}_compareTo(e){return this.seconds===e.seconds?Ts(this.nanoseconds,e.nanoseconds):Ts(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Os;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fs{static fromTimestamp(e){return new Fs(e)}static min(){return new Fs(new Rs(0,0))}static max(){return new Fs(new Rs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const _s="__name__";class Ms{constructor(e,t,n){void 0===t?t=0:t>e.length&&ms(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ms(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ms.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ms.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ts(e.length,t.length)}static compareSegments(e,t){const n=Ms.isNumericId(e),r=Ms.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ms.extractNumericId(e).compare(Ms.extractNumericId(t)):As(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Va.fromString(e.substring(4,e.length-2))}}class Bs extends Ms{construct(e,t,n){return new Bs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n){if(a.indexOf("//")>=0)throw new gs(fs.INVALID_ARGUMENT,"Invalid segment (".concat(a,"). Paths must not contain // in them."));e.push(...a.split("/").filter((e=>e.length>0)))}return new Bs(e)}static emptyPath(){return new Bs([])}}const Us=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hs extends Ms{construct(e,t,n){return new Hs(e,t,n)}static isValidIdentifier(e){return Us.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===_s}static keyField(){return new Hs([_s])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(0===n.length)throw new gs(fs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new gs(fs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new gs(fs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(a(),r++)}if(a(),s)throw new gs(fs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hs(t)}static emptyPath(){return new Hs([])}}class zs{constructor(e){this.path=e}static fromPath(e){return new zs(Bs.fromString(e))}static fromName(e){return new zs(Bs.fromString(e).popFirst(5))}static empty(){return new zs(Bs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zs(new Bs(e.slice()))}}const Vs=-1;class qs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qs.UNKNOWN_ID=-1;function Ws(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Fs.fromTimestamp(1e9===r?new Rs(n+1,0):new Rs(n,r));return new Gs(a,zs.empty(),t)}function Ys(e){return new Gs(e.readTime,e.key,Vs)}class Gs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Gs(Fs.min(),zs.empty(),Vs)}static max(){return new Gs(Fs.max(),zs.empty(),Vs)}}function Ks(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zs.comparator(e.documentKey,t.documentKey),0!==n?n:Ts(e.largestBatchId,t.largestBatchId))}class Xs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class $s{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ms(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $s(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $s?t:$s.resolve(t)}catch(e){return $s.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$s.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$s.reject(t)}static resolve(e){return new $s(((t,n)=>{t(e)}))}static reject(e){return new $s(((t,n)=>{n(e)}))}static waitFor(e){return new $s(((t,n)=>{let r=0,a=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++a,s&&a===r&&t()}),(e=>n(e)))})),s=!0,a===r&&t()}))}static or(e){let t=$s.resolve(!1);for(const n of e)t=t.next((e=>e?$s.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new $s(((n,r)=>{const a=e.length,s=new Array(a);let o=0;for(let i=0;i<a;i++){const l=i;t(e[l]).next((e=>{s[l]=e,++o,o===a&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new $s(((n,r)=>{const a=()=>{!0===e()?t().next((()=>{a()}),r):n()};a()}))}}function Qs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Js(e){return"IndexedDbTransactionError"===e.name}class Zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Zs.le=-1;const eo=-1;function to(e){return null==e}function no(e){return 0===e&&1/e==-1/0}const ro="remoteDocuments",ao="owner",so="mutationQueues",oo="mutations";const io="documentMutations",lo="remoteDocumentsV14",co="remoteDocumentGlobal",uo="targets",mo="targetDocuments",ho="targetGlobal",po="collectionParents",xo="clientMetadata",fo="bundles",go="namedQueries",bo="indexConfiguration",yo="indexState",vo="indexEntries",No="documentOverlays",jo="globals",wo=[so,oo,io,ro,uo,ao,ho,mo,xo,co,po,fo,go],So=[so,oo,io,lo,uo,ao,ho,mo,xo,co,po,fo,go,No],Co=So,ko=[...Co,bo,yo,vo];function Eo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function To(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ao(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Io{constructor(e,t){this.comparator=e,this.root=t||Po.EMPTY}insert(e,t){return new Io(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Po.BLACK,null,null))}remove(e){return new Io(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Po.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Do(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Do(this.root,e,this.comparator,!1)}getReverseIterator(){return new Do(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Do(this.root,e,this.comparator,!0)}}class Do{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Po{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=null!=n?n:Po.RED,this.left=null!=r?r:Po.EMPTY,this.right=null!=a?a:Po.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new Po(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Po.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Po.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ms(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ms(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ms(27949);return e+(this.isRed()?0:1)}}Po.EMPTY=null,Po.RED=!0,Po.BLACK=!1,Po.EMPTY=new class{constructor(){this.size=0}get key(){throw ms(57766)}get value(){throw ms(16141)}get color(){throw ms(16727)}get left(){throw ms(29726)}get right(){throw ms(36894)}copy(e,t,n,r,a){return this}insert(e,t,n){return new Po(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Oo{constructor(e){this.comparator=e,this.data=new Io(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lo(this.data.getIterator())}getIteratorFrom(e){return new Lo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Oo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Oo(this.comparator);return t.data=e,t}}class Lo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ro{constructor(e){this.fields=e,e.sort(Hs.comparator)}static empty(){return new Ro([])}unionWith(e){let t=new Oo(Hs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ro(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ps(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Fo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _o{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fo("Invalid base64 string: "+e):e}}(e);return new _o(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _o(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ts(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_o.EMPTY_BYTE_STRING=new _o("");const Mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(e){if(ps(!!e,39018),"string"==typeof e){let t=0;const n=Mo.exec(e);if(ps(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Uo(e.seconds),nanos:Uo(e.nanos)}}function Uo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ho(e){return"string"==typeof e?_o.fromBase64String(e):_o.fromUint8Array(e)}const zo="server_timestamp",Vo="__type__",qo="__previous_value__",Wo="__local_write_time__";function Yo(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Vo])||void 0===n?void 0:n.stringValue)===zo}function Go(e){const t=e.mapValue.fields[qo];return Yo(t)?Go(t):t}function Ko(e){const t=Bo(e.mapValue.fields[Wo].timestampValue);return new Rs(t.seconds,t.nanos)}const Xo="(default)";class $o{constructor(e,t){this.projectId=e,this.database=t||Xo}static empty(){return new $o("","")}get isDefaultDatabase(){return this.database===Xo}isEqual(e){return e instanceof $o&&e.projectId===this.projectId&&e.database===this.database}}const Qo="__type__",Jo="__max__",Zo={mapValue:{fields:{__type__:{stringValue:Jo}}}},ei="__vector__",ti="value";function ni(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yo(e)?4:xi(e)?9007199254740991:hi(e)?10:11:ms(28295,{value:e})}function ri(e,t){if(e===t)return!0;const n=ni(e);if(n!==ni(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ko(e).isEqual(Ko(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bo(e.timestampValue),r=Bo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ho(e.bytesValue).isEqual(Ho(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Uo(e.geoPointValue.latitude)===Uo(t.geoPointValue.latitude)&&Uo(e.geoPointValue.longitude)===Uo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Uo(e.integerValue)===Uo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Uo(e.doubleValue),r=Uo(t.doubleValue);return n===r?no(n)===no(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ps(e.arrayValue.values||[],t.arrayValue.values||[],ri);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Eo(n)!==Eo(r))return!1;for(const a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!ri(n[a],r[a])))return!1;return!0}(e,t);default:return ms(52216,{left:e})}}function ai(e,t){return void 0!==(e.values||[]).find((e=>ri(e,t)))}function si(e,t){if(e===t)return 0;const n=ni(e),r=ni(t);if(n!==r)return Ts(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ts(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Uo(e.integerValue||e.doubleValue),r=Uo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return oi(e.timestampValue,t.timestampValue);case 4:return oi(Ko(e),Ko(t));case 5:return As(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ho(e),r=Ho(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let a=0;a<n.length&&a<r.length;a++){const e=Ts(n[a],r[a]);if(0!==e)return e}return Ts(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ts(Uo(e.latitude),Uo(t.latitude));return 0!==n?n:Ts(Uo(e.longitude),Uo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ii(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,a,s;const o=e.fields||{},i=t.fields||{},l=null===(n=o[ti])||void 0===n?void 0:n.arrayValue,c=null===(r=i[ti])||void 0===r?void 0:r.arrayValue,d=Ts((null===(a=null==l?void 0:l.values)||void 0===a?void 0:a.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==d?d:ii(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Zo.mapValue&&t===Zo.mapValue)return 0;if(e===Zo.mapValue)return 1;if(t===Zo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),a=t.fields||{},s=Object.keys(a);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=As(r[o],s[o]);if(0!==e)return e;const t=si(n[r[o]],a[s[o]]);if(0!==t)return t}return Ts(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ms(23264,{Pe:n})}}function oi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ts(e,t);const n=Bo(e),r=Bo(t),a=Ts(n.seconds,r.seconds);return 0!==a?a:Ts(n.nanos,r.nanos)}function ii(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const e=si(n[a],r[a]);if(e)return e}return Ts(n.length,r.length)}function li(e){return ci(e)}function ci(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ho(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ci(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const a of t)r?r=!1:n+=",",n+="".concat(a,":").concat(ci(e.fields[a]));return n+"}"}(e.mapValue):ms(61005,{value:e})}function di(e){return!!e&&"integerValue"in e}function ui(e){return!!e&&"arrayValue"in e}function mi(e){return!!e&&"mapValue"in e}function hi(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Qo])||void 0===n?void 0:n.stringValue)===ei}function pi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return To(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=pi(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=pi(e.arrayValue.values[n]);return t}return Object.assign({},e)}function xi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Jo}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pi(t)}setAll(e){let t=Hs.emptyPath(),n={},r=[];e.forEach(((e,a)=>{if(!t.isImmediateParentOf(a)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=a.popLast()}e?n[a.lastSegment()]=pi(e):r.push(a.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());mi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){To(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new fi(pi(this.value))}}class gi{constructor(e,t,n,r,a,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new gi(e,0,Fs.min(),Fs.min(),Fs.min(),fi.empty(),0)}static newFoundDocument(e,t,n,r){return new gi(e,1,t,Fs.min(),n,r,0)}static newNoDocument(e,t){return new gi(e,2,t,Fs.min(),Fs.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new gi(e,3,t,Fs.min(),Fs.min(),fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class bi{constructor(e,t){this.position=e,this.inclusive=t}}function yi(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const s=t[a],o=e.position[a];if(r=s.field.isKeyField()?zs.comparator(zs.fromName(o.referenceValue),n.key):si(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ri(e.position[n],t.position[n]))return!1;return!0}class Ni{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ji(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wi{}class Si extends wi{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Pi(e,t,n):"array-contains"===t?new Fi(e,n):"in"===t?new _i(e,n):"not-in"===t?new Mi(e,n):"array-contains-any"===t?new Bi(e,n):new Si(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Oi(e,n):new Li(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(si(t,this.value)):null!==t&&ni(this.value)===ni(t)&&this.matchesComparison(si(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ms(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends wi{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Ci(e,t)}matches(e){return ki(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ki(e){return"and"===e.op}function Ei(e){return Ti(e)&&ki(e)}function Ti(e){for(const t of e.filters)if(t instanceof Ci)return!1;return!0}function Ai(e){if(e instanceof Si)return e.field.canonicalString()+e.op.toString()+li(e.value);if(Ei(e))return e.filters.map((e=>Ai(e))).join(",");{const t=e.filters.map((e=>Ai(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ii(e,t){return e instanceof Si?function(e,t){return t instanceof Si&&e.op===t.op&&e.field.isEqual(t.field)&&ri(e.value,t.value)}(e,t):e instanceof Ci?function(e,t){return t instanceof Ci&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ii(n,t.filters[r])),!0)}(e,t):void ms(19439)}function Di(e){return e instanceof Si?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(li(e.value))}(e):e instanceof Ci?function(e){return e.op.toString()+" {"+e.getFilters().map(Di).join(" ,")+"}"}(e):"Filter"}class Pi extends Si{constructor(e,t,n){super(e,t,n),this.key=zs.fromName(n.referenceValue)}matches(e){const t=zs.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oi extends Si{constructor(e,t){super(e,"in",t),this.keys=Ri("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Li extends Si{constructor(e,t){super(e,"not-in",t),this.keys=Ri("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ri(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>zs.fromName(e.referenceValue)))}class Fi extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ui(t)&&ai(t.arrayValue,this.value)}}class _i extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ai(this.value.arrayValue,t)}}class Mi extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(ai(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ai(this.value.arrayValue,t)}}class Bi extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ui(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ai(this.value.arrayValue,e)))}}class Ui{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=s,this.endAt=o,this.Ie=null}}function Hi(e){return new Ui(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function zi(e){const t=xs(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ai(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),to(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>li(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>li(e))).join(",")),t.Ie=e}return t.Ie}function Vi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ji(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ii(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vi(e.startAt,t.startAt)&&vi(e.endAt,t.endAt)}class qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=i,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Wi(e,t,n,r,a,s,o,i){return new qi(e,t,n,r,a,s,o,i)}function Yi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Gi(e){return null!==e.collectionGroup}function Ki(e){const t=xs(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ee.push(a),e.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Oo(Hs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Ni(r,n))})),e.has(Hs.keyField().canonicalString())||t.Ee.push(new Ni(Hs.keyField(),n))}return t.Ee}function Xi(e){const t=xs(e);return t.de||(t.de=$i(t,Ki(e))),t.de}function $i(e,t){if("F"===e.limitType)return Hi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Ni(e.field,t)}));const n=e.endAt?new bi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bi(e.startAt.position,e.startAt.inclusive):null;return Hi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Qi(e,t,n){return new qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ji(e,t){return Vi(Xi(e),Xi(t))&&e.limitType===t.limitType}function Zi(e){return"".concat(zi(Xi(e)),"|lt:").concat(e.limitType)}function el(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Di(e))).join(", "),"]")),to(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>li(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>li(e))).join(",")),"Target(".concat(t,")")}(Xi(e)),"; limitType=").concat(e.limitType,")")}function tl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ki(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yi(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ki(e),t))&&!(e.endAt&&!function(e,t,n){const r=yi(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ki(e),t))}(e,t)}function nl(e){return(t,n)=>{let r=!1;for(const a of Ki(e)){const e=rl(a,t,n);if(0!==e)return e;r=r||a.field.isKeyField()}return 0}}function rl(e,t,n){const r=e.field.isKeyField()?zs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?si(r,a):ms(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ms(19790,{direction:e.dir})}}class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,a]of n)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,((t,n)=>{for(const[r,a]of n)e(r,a)}))}isEmpty(){return Ao(this.inner)}size(){return this.innerSize}}const sl=new Io(zs.comparator);function ol(){return sl}const il=new Io(zs.comparator);function ll(){let e=il;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.insert(a.key,a);return e}function cl(e){let t=il;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function dl(){return ml()}function ul(){return ml()}function ml(){return new al((e=>e.toString()),((e,t)=>e.isEqual(t)))}new Io(zs.comparator);const hl=new Oo(zs.comparator);function pl(){let e=hl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.add(a);return e}const xl=new Oo(Ts);function fl(){return xl}function gl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(t)?"-0":t}}function bl(e){return{integerValue:""+e}}class yl{constructor(){this._=void 0}}function vl(e,t,n){return e instanceof wl?function(e,t){const n={fields:{[Vo]:{stringValue:zo},[Wo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yo(t)&&(t=Go(t)),t&&(n.fields[qo]=t),{mapValue:n}}(n,t):e instanceof Sl?Cl(e,t):e instanceof kl?El(e,t):function(e,t){const n=jl(e,t),r=Al(n)+Al(e.Re);return di(n)&&di(e.Re)?bl(r):gl(e.serializer,r)}(e,t)}function Nl(e,t,n){return e instanceof Sl?Cl(e,t):e instanceof kl?El(e,t):n}function jl(e,t){return e instanceof Tl?function(e){return di(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class wl extends yl{}class Sl extends yl{constructor(e){super(),this.elements=e}}function Cl(e,t){const n=Il(t);for(const r of e.elements)n.some((e=>ri(e,r)))||n.push(r);return{arrayValue:{values:n}}}class kl extends yl{constructor(e){super(),this.elements=e}}function El(e,t){let n=Il(t);for(const r of e.elements)n=n.filter((e=>!ri(e,r)));return{arrayValue:{values:n}}}class Tl extends yl{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Al(e){return Uo(e.integerValue||e.doubleValue)}function Il(e){return ui(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Dl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dl}static exists(e){return new Dl(void 0,e)}static updateTime(e){return new Dl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ol{}function Ll(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vl(e.key,Dl.none()):new Ml(e.key,e.data,Dl.none());{const n=e.data,r=fi.empty();let a=new Oo(Hs.comparator);for(let e of t.fields)if(!a.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),a=a.add(e)}return new Bl(e.key,r,new Ro(a.toArray()),Dl.none())}}function Rl(e,t,n){e instanceof Ml?function(e,t,n){const r=e.value.clone(),a=Hl(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bl?function(e,t,n){if(!Pl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Hl(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Ul(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fl(e,t,n,r){return e instanceof Ml?function(e,t,n,r){if(!Pl(e.precondition,t))return n;const a=e.value.clone(),s=zl(e.fieldTransforms,r,t);return a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof Bl?function(e,t,n,r){if(!Pl(e.precondition,t))return n;const a=zl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ul(e)),s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Pl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _l(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ps(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Sl&&t instanceof Sl||e instanceof kl&&t instanceof kl?Ps(e.elements,t.elements,ri):e instanceof Tl&&t instanceof Tl?ri(e.Re,t.Re):e instanceof wl&&t instanceof wl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ml extends Ol{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bl extends Ol{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ul(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Hl(e,t,n){const r=new Map;ps(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const s=e[a],o=s.transform,i=t.data.field(s.field);r.set(s.field,Nl(o,i,n[a]))}return r}function zl(e,t,n){const r=new Map;for(const a of e){const e=a.transform,s=n.data.field(a.field);r.set(a.field,vl(e,s,t))}return r}class Vl extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ql{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ul();return this.mutations.forEach((r=>{const a=e.get(r.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=t.has(r.key)?null:o;const i=Ll(s,o);null!==i&&n.set(r.key,i),s.isValidDocument()||s.convertToNoDocument(Fs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pl())}isEqual(e){return this.batchId===e.batchId&&Ps(this.mutations,e.mutations,((e,t)=>_l(e,t)))&&Ps(this.baseMutations,e.baseMutations,((e,t)=>_l(e,t)))}}class Wl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var Yl,Gl;function Kl(e){if(void 0===e)return cs("GRPC error has no .code"),fs.UNKNOWN;switch(e){case Yl.OK:return fs.OK;case Yl.CANCELLED:return fs.CANCELLED;case Yl.UNKNOWN:return fs.UNKNOWN;case Yl.DEADLINE_EXCEEDED:return fs.DEADLINE_EXCEEDED;case Yl.RESOURCE_EXHAUSTED:return fs.RESOURCE_EXHAUSTED;case Yl.INTERNAL:return fs.INTERNAL;case Yl.UNAVAILABLE:return fs.UNAVAILABLE;case Yl.UNAUTHENTICATED:return fs.UNAUTHENTICATED;case Yl.INVALID_ARGUMENT:return fs.INVALID_ARGUMENT;case Yl.NOT_FOUND:return fs.NOT_FOUND;case Yl.ALREADY_EXISTS:return fs.ALREADY_EXISTS;case Yl.PERMISSION_DENIED:return fs.PERMISSION_DENIED;case Yl.FAILED_PRECONDITION:return fs.FAILED_PRECONDITION;case Yl.ABORTED:return fs.ABORTED;case Yl.OUT_OF_RANGE:return fs.OUT_OF_RANGE;case Yl.UNIMPLEMENTED:return fs.UNIMPLEMENTED;case Yl.DATA_LOSS:return fs.DATA_LOSS;default:return ms(39323,{code:e})}}(Gl=Yl||(Yl={}))[Gl.OK=0]="OK",Gl[Gl.CANCELLED=1]="CANCELLED",Gl[Gl.UNKNOWN=2]="UNKNOWN",Gl[Gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gl[Gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gl[Gl.NOT_FOUND=5]="NOT_FOUND",Gl[Gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gl[Gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gl[Gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gl[Gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gl[Gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gl[Gl.ABORTED=10]="ABORTED",Gl[Gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gl[Gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gl[Gl.INTERNAL=13]="INTERNAL",Gl[Gl.UNAVAILABLE=14]="UNAVAILABLE",Gl[Gl.DATA_LOSS=15]="DATA_LOSS";new Va([4294967295,4294967295],0);Error;class Xl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $l(e){return ps(!!e,49232),Fs.fromTimestamp(function(e){const t=Bo(e);return new Rs(t.seconds,t.nanos)}(e))}function Ql(e,t){const n=function(e){return new Bs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Jl(e){const t=Bs.fromString(e);return ps(ac(t),10190,{key:t.toString()}),t}function Zl(e){const t=Jl(e);return 4===t.length?Bs.emptyPath():ec(t)}function ec(e){return ps(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function tc(e){let t=Zl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ps(1===r,65062);const e=n.from[0];e.allDescendants?a=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=nc(e);return t instanceof Ci&&Ei(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ni(rc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let i=null;n.limit&&(i=function(e){let t;return t="object"==typeof e?e.value:e,to(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new bi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new bi(n,t)}(n.endAt)),Wi(t,a,o,s,i,"F",l,c)}function nc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rc(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=rc(e.unaryFilter.field);return Si.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rc(e.unaryFilter.field);return Si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rc(e.unaryFilter.field);return Si.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ms(61313);default:return ms(60726)}}(e):void 0!==e.fieldFilter?function(e){return Si.create(rc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ms(58110);default:return ms(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ci.create(e.compositeFilter.filters.map((e=>nc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ms(1026)}}(e.compositeFilter.op))}(e):ms(30097,{filter:e})}function rc(e){return Hs.fromServerFormat(e.fieldPath)}function ac(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class sc{constructor(e){this.wt=e}}function oc(e){const t=tc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qi(t,t.limit,"L"):t}class ic{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Uo(e.integerValue));else if("doubleValue"in e){const n=Uo(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),no(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Bo(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Ho(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?xi(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):hi(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ms(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const a=e.fields||{};this.Mt(t,53);const s=ti,o=(null===(r=null===(n=a[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Uo(o)),this.Nt(s,t),this.Ct(a[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),zs.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}ic.Wt=new ic;class lc{constructor(){this.Cn=new cc}addToCollectionParentIndex(e,t){return this.Cn.add(t),$s.resolve()}getCollectionParents(e,t){return $s.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $s.resolve()}deleteFieldIndex(e,t){return $s.resolve()}deleteAllFieldIndexes(e){return $s.resolve()}createTargetIndexes(e,t){return $s.resolve()}getDocumentsMatchingTarget(e,t){return $s.resolve(null)}getIndexType(e,t){return $s.resolve(0)}getFieldIndexes(e,t){return $s.resolve([])}getNextCollectionGroupToUpdate(e){return $s.resolve(null)}getMinOffset(e,t){return $s.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,t){return $s.resolve(Gs.min())}updateCollectionGroup(e,t,n){return $s.resolve()}updateIndexEntries(e,t){return $s.resolve()}}class cc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Oo(Bs.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Oo(Bs.comparator)).toArray()}}new Uint8Array(0);const dc=41943040;class uc{static withCacheSize(e){return new uc(e,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}uc.DEFAULT_COLLECTION_PERCENTILE=10,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uc.DEFAULT=new uc(dc,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uc.DISABLED=new uc(-1,0,0);class mc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new mc(0)}static lr(){return new mc(-1)}}const hc=1048576;class pc{constructor(){this.changes=new al((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?$s.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fl(n.mutation,e,Ro.empty(),Rs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,pl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pl();const r=dl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ll();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=dl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,pl())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let a=ol();const s=ml(),o=ml();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Bl)?a=a.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Fl(o.mutation,t,o.mutation.getFieldMask(),Rs.now())):s.set(t.key,Ro.empty())})),this.recalculateAndSaveOverlays(e,a).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new xc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ml();let r=new Io(((e,t)=>e-t)),a=pl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const a of e)a.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ro.empty();o=a.applyToLocalView(s,o),n.set(e,o);const i=(r.get(a.batchId)||pl()).add(e);r=r.insert(a.batchId,i)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),i=r.key,l=r.value,c=ul();l.forEach((e=>{if(!a.has(e)){const r=Ll(t.get(e),n.get(e));null!==r&&c.set(e,r),a=a.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,i,c))}return $s.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((a=>{const s=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$s.resolve(dl());let o=Vs,i=a;return s.next((t=>$s.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),a.get(t)?$s.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{i=i.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,a))).next((()=>this.computeViews(e,i,t,pl()))).next((e=>({batchId:o,changes:cl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zs(t)).next((e=>{let t=ll();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let s=ll();return this.indexManager.getCollectionParents(e,a).next((o=>$s.forEach(o,(o=>{const i=function(e,t){return new qi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return this.getDocumentsMatchingCollectionQuery(e,i,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r)))).next((e=>{a.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,gi.newInvalidDocument(r)))}));let n=ll();return e.forEach(((e,r)=>{const s=a.get(e);void 0!==s&&Fl(s.mutation,r,Ro.empty(),Rs.now()),tl(t,r)&&(n=n.insert(e,r))})),n}))}}class gc{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return $s.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:$l(e.createTime)}}(t)),$s.resolve()}getNamedQuery(e,t){return $s.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:oc(e.bundledQuery),readTime:$l(e.readTime)}}(t)),$s.resolve()}}class bc{constructor(){this.overlays=new Io(zs.comparator),this.Qr=new Map}getOverlay(e,t){return $s.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dl();return $s.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),$s.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),$s.resolve()}getOverlaysForCollection(e,t,n){const r=dl(),a=t.length+1,s=new zs(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===a&&e.largestBatchId>n&&r.set(e.getKey(),e)}return $s.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new Io(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=a.get(e.largestBatchId);null===t&&(t=dl(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=dl(),i=a.getIterator();for(;i.hasNext()&&(i.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return $s.resolve(o)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Wl(t,n));let a=this.Qr.get(t);void 0===a&&(a=pl(),this.Qr.set(t,a)),this.Qr.set(t,a.add(n.key))}}class yc{constructor(){this.sessionToken=_o.EMPTY_BYTE_STRING}getSessionToken(e){return $s.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$s.resolve()}}class vc{constructor(){this.$r=new Oo(Nc.Ur),this.Kr=new Oo(Nc.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new Nc(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new Nc(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new zs(new Bs([])),n=new Nc(t,e),r=new Nc(t,e+1),a=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),a.push(e.key)})),a}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new zs(new Bs([])),n=new Nc(t,e),r=new Nc(t,e+1);let a=pl();return this.Kr.forEachInRange([n,r],(e=>{a=a.add(e.key)})),a}containsKey(e){const t=new Nc(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Nc{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return zs.comparator(e.key,t.key)||Ts(e.Zr,t.Zr)}static Wr(e,t){return Ts(e.Zr,t.Zr)||zs.comparator(e.key,t.key)}}class jc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Oo(Nc.Ur)}checkEmpty(e){return $s.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ql(a,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Xr=this.Xr.add(new Nc(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return $s.resolve(s)}lookupMutationBatch(e,t){return $s.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),a=r<0?0:r;return $s.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $s.resolve(0===this.mutationQueue.length?eo:this.nr-1)}getAllMutationBatches(e){return $s.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Nc(t,0),r=new Nc(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);a.push(t)})),$s.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Oo(Ts);return t.forEach((e=>{const t=new Nc(e,0),r=new Nc(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),$s.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;zs.isDocumentKey(a)||(a=a.child(""));const s=new Nc(new zs(a),0);let o=new Oo(Ts);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Zr)),!0)}),s),$s.resolve(this.ni(o))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ps(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return $s.forEach(t.mutations,(r=>{const a=new Nc(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new Nc(t,0),r=this.Xr.firstAfterOrEqual(n);return $s.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$s.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wc{constructor(e){this.ii=e,this.docs=new Io(zs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $s.resolve(n?n.document.mutableCopy():gi.newInvalidDocument(t))}getEntries(e,t){let n=ol();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():gi.newInvalidDocument(e))})),$s.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=ol();const s=t.path,o=new zs(s.child("__id-9223372036854775808__")),i=this.docs.getIteratorFrom(o);for(;i.hasNext();){const{key:e,value:{document:o}}=i.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ks(Ys(o),n)<=0||(r.has(o.key)||tl(t,o))&&(a=a.insert(o.key,o.mutableCopy()))}return $s.resolve(a)}getAllFromCollectionGroup(e,t,n,r){ms(9500)}si(e,t){return $s.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Sc(this)}getSize(e){return $s.resolve(this.size)}}class Sc extends pc{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),$s.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class Cc{constructor(e){this.persistence=e,this.oi=new al((e=>zi(e)),Vi),this.lastRemoteSnapshotVersion=Fs.min(),this.highestTargetId=0,this._i=0,this.ai=new vc,this.targetCount=0,this.ui=mc.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),$s.resolve()}getLastRemoteSnapshotVersion(e){return $s.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $s.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),$s.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),$s.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new mc(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,$s.resolve()}updateTargetData(e,t){return this.Tr(t),$s.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,$s.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.oi.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.oi.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),$s.waitFor(a).next((()=>r))}getTargetCount(e){return $s.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return $s.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),$s.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((t=>{a.push(r.markPotentiallyOrphaned(e,t))})),$s.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),$s.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return $s.resolve(n)}containsKey(e,t){return $s.resolve(this.ai.containsKey(t))}}class kc{constructor(e,t){this.ci={},this.overlays={},this.li=new Zs(0),this.hi=!1,this.hi=!0,this.Pi=new yc,this.referenceDelegate=e(this),this.Ti=new Cc(this),this.indexManager=new lc,this.remoteDocumentCache=function(e){return new wc(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new sc(t),this.Ei=new gc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new jc(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){ls("MemoryPersistence","Starting transaction:",e);const r=new Ec(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return $s.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class Ec extends Xs{constructor(e){super(),this.currentSequenceNumber=e}}class Tc{constructor(e){this.persistence=e,this.Vi=new vc,this.mi=null}static fi(e){return new Tc(e)}get gi(){if(this.mi)return this.mi;throw ms(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),$s.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),$s.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),$s.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $s.forEach(this.gi,(n=>{const r=zs.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,Fs.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return $s.or([()=>$s.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Ac{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=pl(),r=pl();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Ac(e,t.fromCache,n,r)}}class Ic{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Dc{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=w()?8:Qs(N())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.ws(e,t).next((e=>{a.result=e})).next((()=>{if(!a.result)return this.Ss(e,t,r,n).next((e=>{a.result=e}))})).next((()=>{if(a.result)return;const n=new Ic;return this.bs(e,t,n).next((r=>{if(a.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>a.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(is()<=z.DEBUG&&ls("QueryEngine","SDK will not create cache indexes for query:",el(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),$s.resolve()):(is()<=z.DEBUG&&ls("QueryEngine","Query:",el(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(is()<=z.DEBUG&&ls("QueryEngine","The SDK decides to create cache indexes for query:",el(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xi(t))):$s.resolve())}ws(e,t){if(Yi(t))return $s.resolve(null);let n=Xi(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Qi(t,null,"F"),n=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const a=pl(...r);return this.ys.getDocuments(e,a).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.vs(t,r);return this.Cs(t,s,a,n.readTime)?this.ws(e,Qi(t,null,"F")):this.Fs(e,s,t,n)}))))})))))}Ss(e,t,n,r){return Yi(t)||r.isEqual(Fs.min())?$s.resolve(null):this.ys.getDocuments(e,n).next((a=>{const s=this.vs(t,a);return this.Cs(t,s,n,r)?$s.resolve(null):(is()<=z.DEBUG&&ls("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),el(t)),this.Fs(e,s,t,Ws(r,Vs)).next((e=>e)))}))}vs(e,t){let n=new Oo(nl(e));return t.forEach(((t,r)=>{tl(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}bs(e,t,n){return is()<=z.DEBUG&&ls("QueryEngine","Using full collection scan to execute query:",el(t)),this.ys.getDocumentsMatchingQuery(e,t,Gs.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Pc="LocalStore";class Oc{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Io(Ts),this.Os=new al((e=>zi(e)),Vi),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fc(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function Lc(e,t,n,r){return new Oc(e,t,n,r)}async function Rc(e,t){const n=xs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((a=>(r=a,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const a=[],s=[];let o=pl();for(const e of r){a.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ks:e,removedBatchIds:a,addedBatchIds:s})))}))}))}class Fc{constructor(){this.activeTargetIds=fl()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _c{constructor(){this.xo=new Fc,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Fc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mc{No(e){}shutdown(){}}const Bc="ConnectivityMonitor";class Uc{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ls(Bc,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ls(Bc,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hc=null;function zc(){return null===Hc?Hc=268435456+Math.round(2147483648*Math.random()):Hc++,"0x"+Hc.toString(16)}const Vc="RestConnection",qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wc{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===Xo?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,a){const s=zc(),o=this.jo(e,t.toUriEncodedString());ls(Vc,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const i={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(i,r,a);const{host:l}=new URL(o),c=f(l);return this.Jo(e,o,i,n,c).then((t=>(ls(Vc,"Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ds(Vc,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Yo(e,t,n,r,a,s){return this.zo(e,t,n,r,a)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ss,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=qc[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class Yc{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Gc="WebChannelConnection";class Kc extends Wc{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,a){const s=zc();return new Promise(((a,o)=>{const i=new Ya;i.setWithCredentials(!0),i.listenOnce(Ka.COMPLETE,(()=>{try{switch(i.getLastErrorCode()){case Xa.NO_ERROR:const t=i.getResponseJson();ls(Gc,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),a(t);break;case Xa.TIMEOUT:ls(Gc,"RPC '".concat(e,"' ").concat(s," timed out")),o(new gs(fs.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const n=i.getStatus();if(ls(Gc,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",i.getResponseText()),n>0){let e=i.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fs).indexOf(t)>=0?t:fs.UNKNOWN}(t.status);o(new gs(e,t.message))}else o(new gs(fs.UNKNOWN,"Server responded with status "+i.getStatus()))}else o(new gs(fs.UNAVAILABLE,"Connection failed."));break;default:ms(9055,{l_:e,streamId:s,h_:i.getLastErrorCode(),P_:i.getLastError()})}}finally{ls(Gc,"RPC '".concat(e,"' ").concat(s," completed."))}}));const l=JSON.stringify(r);ls(Gc,"RPC '".concat(e,"' ").concat(s," sending request:"),r),i.send(t,"POST",l,n,15)}))}T_(e,t,n){const r=zc(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Za(),o=Ja(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(i.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(i.useFetchStreams=!0),this.Ho(i.initMessageHeaders,t,n),i.encodeInitMessageHeaders=!0;const c=a.join("");ls(Gc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),i);const d=s.createWebChannel(c,i);let u=!1,m=!1;const h=new Yc({Zo:t=>{m?ls(Gc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(ls(Gc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),d.open(),u=!0),ls(Gc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),d.send(t))},Xo:()=>d.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(d,Ga.EventType.OPEN,(()=>{m||(ls(Gc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),h.__())})),p(d,Ga.EventType.CLOSE,(()=>{m||(m=!0,ls(Gc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.u_())})),p(d,Ga.EventType.ERROR,(t=>{m||(m=!0,ds(Gc,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),h.u_(new gs(fs.UNAVAILABLE,"The operation could not be completed")))})),p(d,Ga.EventType.MESSAGE,(t=>{var n;if(!m){const a=t.data[0];ps(!!a,16349);const s=a,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ls(Gc,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Yl[e];if(void 0!==t)return Kl(t)}(t),a=o.message;void 0===n&&(n=fs.INTERNAL,a="Unknown error status: "+t+" with message "+o.message),m=!0,h.u_(new gs(n,a)),d.close()}else ls(Gc,"RPC '".concat(e,"' stream ").concat(r," received:"),a),h.c_(a)}})),p(o,Qa.STAT_EVENT,(t=>{t.stat===$a.PROXY?ls(Gc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$a.NOPROXY&&ls(Gc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{h.a_()}),0),h}}function Xc(){return"undefined"!=typeof document?document:null}function $c(e){return new Xl(e,!0)}class Qc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.I_=n,this.E_=r,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),n=Math.max(0,Date.now()-this.V_),r=Math.max(0,t-n);r>0&&ls("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.A_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.V_=Date.now(),e()))),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){null!==this.R_&&(this.R_.skipDelay(),this.R_=null)}cancel(){null!==this.R_&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}class Jc{}class Zc extends Jc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.na=!1}ra(){if(this.na)throw new gs(fs.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((a=>{let[s,o]=a;return this.connection.zo(e,Ql(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gs(fs.UNKNOWN,e.toString())}))}Yo(e,t,n,r,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,i]=s;return this.connection.Yo(e,Ql(t,n),r,o,i,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===fs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gs(fs.UNKNOWN,e.toString())}))}terminate(){this.na=!0,this.connection.terminate()}}class ed{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){0===this.ia&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve()))))}ca(e){"Online"===this.state?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.aa("Offline")))}set(e){this.la(),this.ia=0,"Online"===e&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.oa?(cs(t),this.oa=!1):ls("OnlineStateTracker",t)}la(){null!==this.sa&&(this.sa.cancel(),this.sa=null)}}const td="RemoteStore";class nd{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No((e=>{n.enqueueAndForget((async()=>{sd(this)&&(ls(td,"Restarting streams for network reachability change."),await async function(e){const t=xs(e);t.Ta.add(4),await ad(t),t.da.set("Unknown"),t.Ta.delete(4),await rd(t)}(this))}))})),this.da=new ed(n,r)}}async function rd(e){if(sd(e))for(const t of e.Ia)await t(!0)}async function ad(e){for(const t of e.Ia)await t(!1)}function sd(e){return 0===xs(e).Ta.size}async function od(e,t){const n=xs(e);t?(n.Ta.delete(2),await rd(n)):t||(n.Ta.add(2),await ad(n),n.da.set("Unknown"))}class id{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const s=Date.now()+n,o=new id(e,t,s,r,a);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gs(fs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class ld{constructor(){this.queries=cd(),this.onlineState="Unknown",this.ba=new Set}terminate(){!function(e,t){const n=xs(e),r=n.queries;n.queries=cd(),r.forEach(((e,n)=>{for(const r of n.ya)r.onError(t)}))}(this,new gs(fs.ABORTED,"Firestore shutting down"))}}function cd(){return new al((e=>Zi(e)),Ji)}function dd(e){e.ba.forEach((e=>{e.next()}))}var ud,md;(md=ud||(ud={})).Ca="default",md.Cache="cache";const hd="SyncEngine";class pd{constructor(e,t,n,r,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new al((e=>Zi(e)),Ji),this.cu=new Map,this.lu=new Set,this.hu=new Io(zs.comparator),this.Pu=new Map,this.Tu=new vc,this.Iu={},this.Eu=new Map,this.du=mc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return!0===this.Au}}function xd(e,t,n){const r=xs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.uu.forEach(((n,r)=>{const a=r.view.Da(t);a.snapshot&&e.push(a.snapshot)})),function(e,t){const n=xs(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const a of n.ya)a.Da(t)&&(r=!0)})),r&&dd(n)}(r.eventManager,t),e.length&&r.au.j_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fd(e,t,n){const r=xs(e),a=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach(((e,i)=>{o.push(r.Ru(i,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const a=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(i.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(i.targetId,a?"current":"not-current")}if(e){a.push(e);const t=Ac.Rs(i.targetId,e);s.push(t)}})))})),await Promise.all(o),r.au.j_(a),await async function(e,t){const n=xs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>$s.forEach(t,(t=>$s.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>$s.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Js(e))throw e;ls(Pc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,a=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,a)}}}(r.localStore,s))}async function gd(e,t){const n=xs(e);if(!n.currentUser.isEqual(t)){ls(hd,"User change. New user:",t.toKey());const e=await Rc(n.localStore,t);n.currentUser=t,function(e,t){e.Eu.forEach((e=>{e.forEach((e=>{e.reject(new gs(fs.CANCELLED,t))}))})),e.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fd(n,e.ks)}}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return Lc(this.persistence,new Dc,e.initialUser,this.serializer)}yu(e){return new kc(Tc.fi,this.serializer)}pu(e){return new _c}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class yd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gd.bind(null,this.syncEngine),await od(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ld}createDatastore(e){const t=$c(e.databaseInfo.databaseId),n=function(e){return new Kc(e)}(e.databaseInfo);return function(e,t,n,r){return new Zc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,a){return new nd(e,t,n,r,a)}(this.localStore,this.datastore,e.asyncQueue,(e=>xd(this.syncEngine,e,0)),Uc.C()?new Uc:new Mc)}createSyncEngine(e,t){return function(e,t,n,r,a,s,o){const i=new pd(e,t,n,r,a,s);return o&&(i.Au=!0),i}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=xs(e);ls(td,"RemoteStore shutting down."),t.Ta.add(5),await ad(t),t.Ea.shutdown(),t.da.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}yd.provider={build:()=>new yd};function vd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Nd=new Map;function jd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ms(12329,{type:typeof e})}function wd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gs(fs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jd(e);throw new gs(fs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}const Sd="firestore.googleapis.com",Cd=!0;class kd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new gs(fs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sd,this.ssl=Cd}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Cd;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=dc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<hc)throw new gs(fs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new gs(fs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new gs(fs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new gs(fs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new gs(fs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gs(fs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gs(fs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kd(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vs;switch(e.type){case"firstParty":return new Ss(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new gs(fs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Nd.get(e);t&&(ls("ComponentProvider","Removing Datastore"),Nd.delete(e),t.terminate())}(this),Promise.resolve()}}function Td(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var a;e=wd(e,Ed);const s=f(t),o=e._getSettings(),i=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);s&&(g("https://".concat(c)),v("Firestore",!0)),o.host!==Sd&&o.host!==c&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!T(d,i)&&(e._setSettings(d),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=as.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(a=e._app)||void 0===a?void 0:a.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new gs(fs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new as(s)}e._authCredentials=new Ns(new ys(t,n))}}const Ad="AsyncQueue";class Id{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Qc(this,"async_queue_retry"),this.ec=()=>{const e=Xc();e&&ls(Ad,"Visibility state changed to "+e.visibilityState),this.C_.p_()},this.tc=e;const t=Xc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Xc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise((()=>{}));const t=new bs;return this.rc((()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.zu.push(e),this.sc())))}async sc(){if(0!==this.zu.length){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(dm){if(!Js(dm))throw dm;ls(Ad,"Operation failed with retryable error: "+dm)}this.zu.length>0&&this.C_.f_((()=>this.sc()))}}rc(e){const t=this.tc.then((()=>(this.Yu=!0,e().catch((e=>{throw this.Ju=e,this.Yu=!1,cs("INTERNAL UNHANDLED ERROR: ",Dd(e)),e})).then((e=>(this.Yu=!1,e))))));return this.tc=t,t}enqueueAfterDelay(e,t,n){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const r=id.createAndSchedule(this,e,t,n,(e=>this.oc(e)));return this.Hu.push(r),r}nc(){this.Ju&&ms(47125,{_c:Dd(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do{e=this.tc,await e}while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then((()=>{this.Hu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Hu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ac()}))}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Dd(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Pd extends Ed{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Id,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Id(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ss=e}(nt),Qe(new F("firestore",((e,n)=>{let{instanceIdentifier:r,options:a}=n;const s=e.getProvider("app").getImmediate(),o=new Pd(new js(e.getProvider("auth-internal")),new ks(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gs(fs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $o(e.options.projectId,t)}(s,r),s);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),st(ns,rs,e),st(ns,rs,"esm2017")}();const Od=rt({apiKey:"AIzaSyDyMnOeBiZ4maqoCbdTmA66arlCcfmbLuw",authDomain:"realestateapp-ef426.firebaseapp.com",projectId:"realestateapp-ef426",storageBucket:"realestateapp-ef426.firebasestorage.app",messagingSenderId:"868965069507",appId:"1:868965069507:web:c0c354d2addd2218e56876",measurementId:"G-X9MM7BFJME"}),Ld=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();const t=Je(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Je(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(T(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;jt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Fa,persistence:[Yr,kr,Dr]}),r=p("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ua)return;const r=null===t||void 0===t?void 0:t.token;Ha!==r&&(Ha=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){R(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){R(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var a;const s=m("auth");return s&&Wn(n,"http://".concat(s)),n}(Od),Rd=new lr;!function(e,t){const n="object"==typeof e?e:at(),r="string"==typeof e?e:t||Xo,a=Je(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const e=(e=>{const t=m(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Td(a,...e)}}(Od);var Fd,_d=n(950),Md=n.t(_d,2);function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bd.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Fd||(Fd={}));const Ud="popstate";function Hd(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function zd(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(dm){}}}function Vd(e,t){return{usr:e.state,key:e.key,idx:t}}function qd(e,t,n,r){return void 0===n&&(n=null),Bd({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Yd(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Wd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Yd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Gd(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,i=Fd.Pop,l=null,c=d();function d(){return(o.state||{idx:null}).idx}function u(){i=Fd.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:i,location:h.location,delta:t})}function m(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:Wd(e);return n=n.replace(/ $/,"%20"),Hd(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(Bd({},o.state,{idx:c}),""));let h={get action(){return i},get location(){return e(a,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Ud,u),l=e,()=>{a.removeEventListener(Ud,u),l=null}},createHref:e=>t(a,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i=Fd.Push;let r=qd(h.location,e,t);n&&n(r,e),c=d()+1;let u=Vd(r,c),m=h.createHref(r);try{o.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(m)}s&&l&&l({action:i,location:h.location,delta:1})},replace:function(e,t){i=Fd.Replace;let r=qd(h.location,e,t);n&&n(r,e),c=d();let a=Vd(r,c),u=h.createHref(r);o.replaceState(a,"",u),s&&l&&l({action:i,location:h.location,delta:0})},go:e=>o.go(e)};return h}var Kd;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Kd||(Kd={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Xd(e,t,n){return void 0===n&&(n="/"),$d(e,t,n,!1)}function $d(e,t,n,r){let a=du(("string"===typeof t?Yd(t):t).pathname||"/",n);if(null==a)return null;let s=Qd(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let i=0;null==o&&i<s.length;++i){let e=cu(a);o=iu(s[i],e,r)}return o}function Qd(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(Hd(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let i=xu([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(Hd(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),Qd(e.children,t,l,i)),(null!=e.path||e.index)&&t.push({path:i,score:ou(i,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Jd(e.path))a(e,t,r);else a(e,t)})),t}function Jd(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return a?[s,""]:[s];let o=Jd(r.join("/")),i=[];return i.push(...o.map((e=>""===e?s:[s,e].join("/")))),a&&i.push(...o),i.map((t=>e.startsWith("/")&&""===t?"/":t))}const Zd=/^:[\w-]+$/,eu=3,tu=2,nu=1,ru=10,au=-2,su=e=>"*"===e;function ou(e,t){let n=e.split("/"),r=n.length;return n.some(su)&&(r+=au),t&&(r+=tu),n.filter((e=>!su(e))).reduce(((e,t)=>e+(Zd.test(t)?eu:""===t?nu:ru)),r)}function iu(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},s="/",o=[];for(let i=0;i<r.length;++i){let e=r[i],l=i===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=lu({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=lu({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:xu([s,d.pathname]),pathnameBase:fu(xu([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=xu([s,d.pathnameBase]))}return o}function lu(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);zd("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),i=a.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=i[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=i[n];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function cu(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return zd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function du(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function uu(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function mu(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function hu(e,t){let n=mu(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function pu(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=Yd(e):(a=Bd({},e),Hd(!a.pathname||!a.pathname.includes("?"),uu("?","pathname","search",a)),Hd(!a.pathname||!a.pathname.includes("#"),uu("#","pathname","hash",a)),Hd(!a.search||!a.search.includes("#"),uu("#","search","hash",a)));let s,o=""===e||""===a.pathname,i=o?"/":a.pathname;if(null==i)s=n;else{let e=t.length-1;if(!r&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?Yd(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:gu(r),hash:bu(a)}}(a,s),c=i&&"/"!==i&&i.endsWith("/"),d=(o||"."===i)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const xu=e=>e.join("/").replace(/\/\/+/g,"/"),fu=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gu=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",bu=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function yu(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const vu=["post","put","patch","delete"],Nu=(new Set(vu),["get",...vu]);new Set(Nu),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(this,arguments)}const wu=t.createContext(null);const Su=t.createContext(null);const Cu=t.createContext(null);const ku=t.createContext(null);const Eu=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Tu=t.createContext(null);function Au(){return null!=t.useContext(ku)}function Iu(){return Au()||Hd(!1),t.useContext(ku).location}function Du(e){t.useContext(Cu).static||t.useLayoutEffect(e)}function Pu(){let{isDataRoute:e}=t.useContext(Eu);return e?function(){let{router:e}=Vu(Hu.UseNavigateStable),n=Wu(zu.UseNavigateStable),r=t.useRef(!1);Du((()=>{r.current=!0}));let a=t.useCallback((function(t,a){void 0===a&&(a={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ju({fromRouteId:n},a)))}),[e,n]);return a}():function(){Au()||Hd(!1);let e=t.useContext(wu),{basename:n,future:r,navigator:a}=t.useContext(Cu),{matches:s}=t.useContext(Eu),{pathname:o}=Iu(),i=JSON.stringify(hu(s,r.v7_relativeSplatPath)),l=t.useRef(!1);Du((()=>{l.current=!0}));let c=t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void a.go(t);let s=pu(t,JSON.parse(i),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:xu([n,s.pathname])),(r.replace?a.replace:a.push)(s,r.state,r)}),[n,a,i,o,e]);return c}()}function Ou(){let{matches:e}=t.useContext(Eu),n=e[e.length-1];return n?n.params:{}}function Lu(e,n){let{relative:r}=void 0===n?{}:n,{future:a}=t.useContext(Cu),{matches:s}=t.useContext(Eu),{pathname:o}=Iu(),i=JSON.stringify(hu(s,a.v7_relativeSplatPath));return t.useMemo((()=>pu(e,JSON.parse(i),o,"path"===r)),[e,i,o,r])}function Ru(e,n,r,a){Au()||Hd(!1);let{navigator:s}=t.useContext(Cu),{matches:o}=t.useContext(Eu),i=o[o.length-1],l=i?i.params:{},c=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let d,u=Iu();if(n){var m;let e="string"===typeof n?Yd(n):n;"/"===c||(null==(m=e.pathname)?void 0:m.startsWith(c))||Hd(!1),d=e}else d=u;let h=d.pathname||"/",p=h;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=Xd(e,{pathname:p});let f=Uu(x&&x.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:xu([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:xu([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,a);return n&&f?t.createElement(ku.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Fd.Pop}},f):f}function Fu(){let e=function(){var e;let n=t.useContext(Tu),r=qu(zu.UseRouteError),a=Wu(zu.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[a]}(),n=yu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const _u=t.createElement(Fu,null);class Mu extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Eu.Provider,{value:this.props.routeContext},t.createElement(Tu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Bu(e){let{routeContext:n,match:r,children:a}=e,s=t.useContext(wu);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Eu.Provider,{value:n},a)}function Uu(e,n,r,a){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===a&&(a=null),null==e){var o;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(o=a)&&o.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let i=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=i.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||Hd(!1),i=i.slice(0,Math.min(i.length,e+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let t=0;t<i.length;t++){let e=i[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,i=d>=0?i.slice(0,d+1):[i[0]];break}}}return i.reduceRight(((e,a,s)=>{let o,u=!1,m=null,h=null;var p;r&&(o=l&&a.route.id?l[a.route.id]:void 0,m=a.route.errorElement||_u,c&&(d<0&&0===s?(p="route-fallback",!1||Yu[p]||(Yu[p]=!0),u=!0,h=null):d===s&&(u=!0,h=a.route.hydrateFallbackElement||null)));let x=n.concat(i.slice(0,s+1)),f=()=>{let n;return n=o?m:u?h:a.route.Component?t.createElement(a.route.Component,null):a.route.element?a.route.element:e,t.createElement(Bu,{match:a,routeContext:{outlet:e,matches:x,isDataRoute:null!=r},children:n})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?t.createElement(Mu,{location:r.location,revalidation:r.revalidation,component:m,error:o,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()}),null)}var Hu=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hu||{}),zu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zu||{});function Vu(e){let n=t.useContext(wu);return n||Hd(!1),n}function qu(e){let n=t.useContext(Su);return n||Hd(!1),n}function Wu(e){let n=function(){let e=t.useContext(Eu);return e||Hd(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||Hd(!1),r.route.id}const Yu={};function Gu(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function Ku(e){let{to:n,replace:r,state:a,relative:s}=e;Au()||Hd(!1);let{future:o,static:i}=t.useContext(Cu),{matches:l}=t.useContext(Eu),{pathname:c}=Iu(),d=Pu(),u=pu(n,hu(l,o.v7_relativeSplatPath),c,"path"===s),m=JSON.stringify(u);return t.useEffect((()=>d(JSON.parse(m),{replace:r,state:a,relative:s})),[d,m,s,r,a]),null}function Xu(e){Hd(!1)}function $u(e){let{basename:n="/",children:r=null,location:a,navigationType:s=Fd.Pop,navigator:o,static:i=!1,future:l}=e;Au()&&Hd(!1);let c=n.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:c,navigator:o,static:i,future:ju({v7_relativeSplatPath:!1},l)})),[c,l,o,i]);"string"===typeof a&&(a=Yd(a));let{pathname:u="/",search:m="",hash:h="",state:p=null,key:x="default"}=a,f=t.useMemo((()=>{let e=du(u,c);return null==e?null:{location:{pathname:e,search:m,hash:h,state:p,key:x},navigationType:s}}),[c,u,m,h,p,x,s]);return null==f?null:t.createElement(Cu.Provider,{value:d},t.createElement(ku.Provider,{children:r,value:f}))}function Qu(e){let{children:t,location:n}=e;return Ru(Ju(t),n)}new Promise((()=>{}));t.Component;function Ju(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,a)=>{if(!t.isValidElement(e))return;let s=[...n,a];if(e.type===t.Fragment)return void r.push.apply(r,Ju(e.props.children,s));e.type!==Xu&&Hd(!1),e.props.index&&e.props.children&&Hd(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ju(e.props.children,s)),r.push(o)})),r}function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}function em(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const tm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(dm){}new Map;const nm=r.startTransition;Md.flushSync,r.useId;function rm(e){let{basename:n,children:r,future:a,window:s}=e,o=t.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),Gd((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return qd("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Wd(t)}),null,e)}({window:s,v5Compat:!0}));let i=o.current,[l,c]=t.useState({action:i.action,location:i.location}),{v7_startTransition:d}=a||{},u=t.useCallback((e=>{d&&nm?nm((()=>c(e))):c(e)}),[c,d]);return t.useLayoutEffect((()=>i.listen(u)),[i,u]),t.useEffect((()=>Gu(a)),[a]),t.createElement($u,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:i,future:a})}const am="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,sm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,om=t.forwardRef((function(e,n){let r,{onClick:a,relative:s,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=e,h=em(e,tm),{basename:p}=t.useContext(Cu),x=!1;if("string"===typeof d&&sm.test(d)&&(r=d,am))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=du(t.pathname,p);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:x=!0}catch(dm){}let f=function(e,n){let{relative:r}=void 0===n?{}:n;Au()||Hd(!1);let{basename:a,navigator:s}=t.useContext(Cu),{hash:o,pathname:i,search:l}=Lu(e,{relative:r}),c=i;return"/"!==a&&(c="/"===i?a:xu([a,i])),s.createHref({pathname:c,search:l,hash:o})}(d,{relative:s}),g=function(e,n){let{target:r,replace:a,state:s,preventScrollReset:o,relative:i,viewTransition:l}=void 0===n?{}:n,c=Pu(),d=Iu(),u=Lu(e,{relative:i});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==a?a:Wd(d)===Wd(u);c(e,{replace:n,state:s,preventScrollReset:o,relative:i,viewTransition:l})}}),[d,c,u,a,s,r,e,o,i,l])}(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:m});return t.createElement("a",Zu({},h,{href:r||f,onClick:x||o?a:function(e){a&&a(e),e.defaultPrevented||g(e)},ref:n,target:c}))}));var im,lm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(im||(im={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(lm||(lm={}));function cm(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let dm={data:""},um=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||dm,mm=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hm=/\/\*[^]*?\*\/|  +/g,pm=/\n+/g,xm=(e,t)=>{let n="",r="",a="";for(let s in e){let o=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+o+";":r+="f"==s[1]?xm(o,s):s+"{"+xm(o,"k"==s[1]?"":t)+"}":"object"==typeof o?r+=xm(o,t?t.replace(/([^,])+/g,(e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):s):null!=o&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=xm.p?xm.p(s,o):s+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+r},fm={},gm=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+gm(e[n]);return t}return e},bm=(e,t,n,r,a)=>{let s=gm(e),o=fm[s]||(fm[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!fm[o]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=mm.exec(e.replace(hm,""));)t[4]?r.shift():t[3]?(n=t[3].replace(pm," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(pm," ").trim();return r[0]})(e);fm[o]=xm(a?{["@keyframes "+o]:t}:t,n?"":"."+o)}let i=n&&fm.g?fm.g:null;return n&&(fm.g=fm[o]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(fm[o],t,r,i),o};function ym(e){let t=this||{},n=e.call?e(t.p):e;return bm(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,a)=>{let s=t[a];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":xm(e,""):!1===e?"":e}return e+r+(null==s?"":s)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,um(t.target),t.g,t.o,t.k)}ym.bind({g:1});let vm,Nm,jm,wm=ym.bind({k:1});function Sm(e,t){let n=this||{};return function(){let r=arguments;function a(s,o){let i=Object.assign({},s),l=i.className||a.className;n.p=Object.assign({theme:Nm&&Nm()},i),n.o=/ *go\d+/.test(l),i.className=ym.apply(n,r)+(l?" "+l:""),t&&(i.ref=o);let c=e;return e[0]&&(c=i.as||e,delete i.as),jm&&c[0]&&jm(i),vm(c,i)}return t?t(a):a}}var Cm,km,Em,Tm,Am,Im,Dm,Pm,Om,Lm,Rm,Fm,_m,Mm,Bm,Um,Hm=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,zm=(()=>{let e=0;return()=>(++e).toString()})(),Vm=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qm=(e,t)=>{switch(t.type){case 0:return J(J({},e),{},{toasts:[t.toast,...e.toasts].slice(0,20)});case 1:return J(J({},e),{},{toasts:e.toasts.map((e=>e.id===t.toast.id?J(J({},e),t.toast):e))});case 2:let{toast:n}=t;return qm(e,{type:e.toasts.find((e=>e.id===n.id))?1:0,toast:n});case 3:let{toastId:r}=t;return J(J({},e),{},{toasts:e.toasts.map((e=>e.id===r||void 0===r?J(J({},e),{},{dismissed:!0,visible:!1}):e))});case 4:return void 0===t.toastId?J(J({},e),{},{toasts:[]}):J(J({},e),{},{toasts:e.toasts.filter((e=>e.id!==t.toastId))});case 5:return J(J({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return J(J({},e),{},{pausedAt:void 0,toasts:e.toasts.map((e=>J(J({},e),{},{pauseDuration:e.pauseDuration+a})))})}},Wm=[],Ym={toasts:[],pausedAt:void 0},Gm=e=>{Ym=qm(Ym,e),Wm.forEach((e=>{e(Ym)}))},Km={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Xm=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return J(J({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||zm()})}(t,e,n);return Gm({type:2,toast:r}),r.id},$m=(e,t)=>Xm("blank")(e,t);$m.error=Xm("error"),$m.success=Xm("success"),$m.loading=Xm("loading"),$m.custom=Xm("custom"),$m.dismiss=e=>{Gm({type:3,toastId:e})},$m.remove=e=>Gm({type:4,toastId:e}),$m.promise=(e,t,n)=>{let r=$m.loading(t.loading,J(J({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then((e=>{let a=t.success?Hm(t.success,e):void 0;return a?$m.success(a,J(J({id:r},n),null==n?void 0:n.success)):$m.dismiss(r),e})).catch((e=>{let a=t.error?Hm(t.error,e):void 0;a?$m.error(a,J(J({id:r},n),null==n?void 0:n.error)):$m.dismiss(r)})),e};var Qm=(e,t)=>{Gm({type:1,toast:{id:e,height:t}})},Jm=()=>{Gm({type:5,time:Date.now()})},Zm=new Map,eh=e=>{let{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,r]=(0,t.useState)(Ym),a=(0,t.useRef)(Ym);(0,t.useEffect)((()=>(a.current!==Ym&&r(Ym),Wm.push(r),()=>{let e=Wm.indexOf(r);e>-1&&Wm.splice(e,1)})),[]);let s=n.toasts.map((t=>{var n,r,a;return J(J(J(J({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Km[t.type],style:J(J(J({},e.style),null==(a=e[t.type])?void 0:a.style),t.style)})}));return J(J({},n),{},{toasts:s})}(e);(0,t.useEffect)((()=>{if(r)return;let e=Date.now(),t=n.map((t=>{if(t.duration===1/0)return;let n=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(n<0))return setTimeout((()=>$m.dismiss(t.id)),n);t.visible&&$m.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[n,r]);let a=(0,t.useCallback)((()=>{r&&Gm({type:6,time:Date.now()})}),[r]),s=(0,t.useCallback)(((e,t)=>{let{reverseOrder:r=!1,gutter:a=8,defaultPosition:s}=t||{},o=n.filter((t=>(t.position||s)===(e.position||s)&&t.height)),i=o.findIndex((t=>t.id===e.id)),l=o.filter(((e,t)=>t<i&&e.visible)).length;return o.filter((e=>e.visible)).slice(...r?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+a),0)}),[n]);return(0,t.useEffect)((()=>{n.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(Zm.has(e))return;let n=setTimeout((()=>{Zm.delete(e),Gm({type:4,toastId:e})}),t);Zm.set(e,n)}(e.id,e.removeDelay);else{let t=Zm.get(e.id);t&&(clearTimeout(t),Zm.delete(e.id))}}))}),[n]),{toasts:n,handlers:{updateHeight:Qm,startPause:Jm,endPause:a,calculateOffset:s}}},th=wm(Cm||(Cm=cm(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),nh=wm(km||(km=cm(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),rh=wm(Em||(Em=cm(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),ah=Sm("div")(Tm||(Tm=cm(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),(e=>e.primary||"#ff4b4b"),th,nh,(e=>e.secondary||"#fff"),rh),sh=wm(Am||(Am=cm(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),oh=Sm("div")(Im||(Im=cm(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),(e=>e.secondary||"#e0e0e0"),(e=>e.primary||"#616161"),sh),ih=wm(Dm||(Dm=cm(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),lh=wm(Pm||(Pm=cm(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ch=Sm("div")(Om||(Om=cm(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),(e=>e.primary||"#61d345"),ih,lh,(e=>e.secondary||"#fff")),dh=Sm("div")(Lm||(Lm=cm(["\n  position: absolute;\n"]))),uh=Sm("div")(Rm||(Rm=cm(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),mh=wm(Fm||(Fm=cm(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),hh=Sm("div")(_m||(_m=cm(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),mh),ph=e=>{let{toast:n}=e,{icon:r,type:a,iconTheme:s}=n;return void 0!==r?"string"==typeof r?t.createElement(hh,null,r):r:"blank"===a?null:t.createElement(uh,null,t.createElement(oh,J({},s)),"loading"!==a&&t.createElement(dh,null,"error"===a?t.createElement(ah,J({},s)):t.createElement(ch,J({},s))))},xh=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),fh=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),gh=Sm("div")(Mm||(Mm=cm(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),bh=Sm("div")(Bm||(Bm=cm(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),yh=t.memo((e=>{let{toast:n,position:r,style:a,children:s}=e,o=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,a]=Vm()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[xh(n),fh(n)];return{animation:t?"".concat(wm(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(wm(a)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},i=t.createElement(ph,{toast:n}),l=t.createElement(bh,J({},n.ariaProps),Hm(n.message,n));return t.createElement(gh,{className:n.className,style:J(J(J({},o),a),n.style)},"function"==typeof s?s({icon:i,message:l}):t.createElement(t.Fragment,null,i,l))}));!function(e,t,n,r){xm.p=t,vm=e,Nm=n,jm=r}(t.createElement);var vh=e=>{let{id:n,className:r,style:a,onHeightUpdate:s,children:o}=e,i=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;s(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[n,s]);return t.createElement("div",{ref:i,className:r,style:a},o)},Nh=ym(Um||(Um=cm(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),jh=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:a,gutter:s,children:o,containerStyle:i,containerClassName:l}=e,{toasts:c,handlers:d}=eh(a);return t.createElement("div",{id:"_rht_toaster",style:J({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},i),className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map((e=>{let a=e.position||r,i=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return J(J({left:0,right:0,display:"flex",position:"absolute",transition:Vm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),a)})(a,d.calculateOffset(e,{reverseOrder:n,gutter:s,defaultPosition:r}));return t.createElement(vh,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?Nh:"",style:i},"custom"===e.type?Hm(e.message,e):o?o(e):t.createElement(yh,{toast:e,position:a}))})))},wh=$m,Sh={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ch=t.createContext&&t.createContext(Sh),kh=["attr","size","title"];function Eh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Th(){return Th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Th.apply(this,arguments)}function Ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(n),!0).forEach((function(t){Dh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dh(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ph(e){return e&&e.map(((e,n)=>t.createElement(e.tag,Ih({key:n},e.attr),Ph(e.child))))}function Oh(e){return n=>t.createElement(Lh,Th({attr:Ih({},e.attr)},n),Ph(e.child))}function Lh(e){var n=n=>{var r,{attr:a,size:s,title:o}=e,i=Eh(e,kh),l=s||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",Th({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,i,{className:r,style:Ih(Ih({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==Ch?t.createElement(Ch.Consumer,null,(e=>n(e))):n(Sh)}function Rh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function Fh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256 336h-.02c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0C-2.06 328.75.02 320.33.02 336H0c0 44.18 57.31 80 128 80s128-35.82 128-80zM128 176l72 144H56l72-144zm511.98 160c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0-87.12 174.26-85.04 165.84-85.04 181.51H384c0 44.18 57.31 80 128 80s128-35.82 128-80h-.02zM440 320l72-144 72 144H440zm88 128H352V153.25c23.51-10.29 41.16-31.48 46.39-57.25H528c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H383.64C369.04 12.68 346.09 0 320 0s-49.04 12.68-63.64 32H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h129.61c5.23 25.76 22.87 46.96 46.39 57.25V448H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function _h(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function Mh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(e)}function Bh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(e)}function Uh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function Hh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function zh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(e)}function Vh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function qh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function Wh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function Yh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Gh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"},child:[]}]})(e)}function Kh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function Xh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function $h(e){return Oh({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function Qh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(e)}function Jh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504.971 199.362l-22.627-22.627c-9.373-9.373-24.569-9.373-33.941 0l-5.657 5.657L329.608 69.255l5.657-5.657c9.373-9.373 9.373-24.569 0-33.941L312.638 7.029c-9.373-9.373-24.569-9.373-33.941 0L154.246 131.48c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l5.657-5.657 39.598 39.598-81.04 81.04-5.657-5.657c-12.497-12.497-32.758-12.497-45.255 0L9.373 412.118c-12.497 12.497-12.497 32.758 0 45.255l45.255 45.255c12.497 12.497 32.758 12.497 45.255 0l114.745-114.745c12.497-12.497 12.497-32.758 0-45.255l-5.657-5.657 81.04-81.04 39.598 39.598-5.657 5.657c-9.373 9.373-9.373 24.569 0 33.941l22.627 22.627c9.373 9.373 24.569 9.373 33.941 0l124.451-124.451c9.372-9.372 9.372-24.568 0-33.941z"},child:[]}]})(e)}function Zh(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(e)}function ep(e){return Oh({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function tp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"},child:[]}]})(e)}function np(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(e)}function rp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function ap(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function sp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 54.1c63 45 104 118.6 104 201.9 0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4 7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31-41.5 30.8-68 79.6-68 134.9-.1 92.3 74.5 168.1 168 168.1 91.6 0 168.6-74.2 168-169.1-.3-51.8-24.7-101.8-68.1-134-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8zM296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24z"},child:[]}]})(e)}function op(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function ip(e){return Oh({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function lp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function cp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function dp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function up(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function mp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(e)}function hp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function pp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function xp(e){return Oh({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}var fp=n(296),gp=n(579);const bp=e=>{let{isOpen:n,onClose:r,source:a="database"}=e;const[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(!1),h=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Database Admin Login"}),c&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:c}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="Sheli2313",n="Homelife2025";return s!==t&&i!==n?(d("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isAdmin")):s!==t?(d("Invalid username. Please try again."),void sessionStorage.removeItem("isAdmin")):i!==n?(d("Incorrect password for this username."),void sessionStorage.removeItem("isAdmin")):(sessionStorage.setItem("isAdmin","true"),r(),void h("companyProfile"===a?"/company-info":"/database"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:u?"text":"password",id:"password",value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{m(!u)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null};function yp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function vp(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=vp(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Np=function(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=vp(e))&&(r&&(r+=" "),r+=t);return r},jp=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var wp=e=>"number"==typeof e&&!isNaN(e),Sp=e=>"string"==typeof e,Cp=e=>"function"==typeof e,kp=e=>Sp(e)||Cp(e)?e:null,Ep=(e,t)=>!1===e||wp(e)&&e>0?e:t,Tp=e=>(0,t.isValidElement)(e)||Sp(e)||Cp(e)||wp(e);function Ap(e){let{enter:n,exit:r,appendPosition:a=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:i,position:l,preventExitTransition:c,done:d,nodeRef:u,isIn:m,playToast:h}=e,p=a?"".concat(n,"--").concat(l):n,x=a?"".concat(r,"--").concat(l):r,f=(0,t.useRef)(0);return(0,t.useLayoutEffect)((()=>{let e=u.current,t=p.split(" "),n=r=>{r.target===u.current&&(h(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===f.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,t.useEffect)((()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:a}=e;requestAnimationFrame((()=>{a.minHeight="initial",a.height=r+"px",a.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,d,o):d()};m||(c?t():(f.current=1,e.className+=" ".concat(x),e.addEventListener("animationend",t)))}),[m]),t.createElement(t.Fragment,null,i)}}function Ip(e,t){return{content:Dp(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Dp(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,t.isValidElement)(e)&&!Sp(e.type)?(0,t.cloneElement)(e,{closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):Cp(e)?e({closeToast:n.closeToast,toastProps:n,data:n.data,isPaused:r}):e}function Pp(e){let{delay:n,isRunning:r,closeToast:a,type:s="default",hide:o,className:i,controlledProgress:l,progress:c,rtl:d,isIn:u,theme:m}=e,h=o||l&&0===c,p={animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused"};l&&(p.transform="scaleX(".concat(c,")"));let x=Np("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(m),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":d}),f=Cp(i)?i({rtl:d,type:s,defaultClassName:x}):Np(x,i),g={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{u&&a()}};return t.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},t.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(m," Toastify__progress-bar--").concat(s)}),t.createElement("div",J({role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:f,style:p},g)))}var Op=1,Lp=()=>"".concat(Op++);function Rp(e,t,n){let r=1,a=0,s=[],o=[],i=t,l=new Map,c=new Set,d=()=>{o=Array.from(l.values()),c.forEach((e=>e()))},u=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},m=e=>{if(null==e)l.forEach(u);else{let t=l.get(e);t&&u(t)}d()},h=e=>{var t,r;let{toastId:a,updateId:s}=e.props,o=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(a,e),d(),n(Ip(e,o?"added":"updated")),o&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:i,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:m,toasts:l,clearQueue:()=>{a-=s.length,s=[]},buildToast:(t,o)=>{if((t=>{let{containerId:n,toastId:r,updateId:a}=t,s=n?n!==e:1!==e,o=l.has(r)&&null==a;return s||o})(o))return;let{toastId:c,updateId:u,data:p,staleId:x,delay:f}=o,g=null==u;g&&a++;let b=J(J(J({},i),{},{style:i.toastStyle,key:r++},Object.fromEntries(Object.entries(o).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:c,updateId:u,data:p,isIn:!1,className:kp(o.className||i.toastClassName),progressClassName:kp(o.progressClassName||i.progressClassName),autoClose:!o.isLoading&&Ep(o.autoClose,i.autoClose),closeToast(e){l.get(c).removalReason=e,m(c)},deleteToast(){let e=l.get(c);if(null!=e){if(n(Ip(e,"removed")),l.delete(c),a--,a<0&&(a=0),s.length>0)return void h(s.shift());d()}}});b.closeButton=i.closeButton,!1===o.closeButton||Tp(o.closeButton)?b.closeButton=o.closeButton:!0===o.closeButton&&(b.closeButton=!Tp(i.closeButton)||i.closeButton);let y={content:t,props:b,staleId:x};i.limit&&i.limit>0&&a>i.limit&&g?s.push(y):wp(f)?setTimeout((()=>{h(y)}),f):h(y)},setProps(e){i=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}var Fp=new Map,_p=[],Mp=new Set,Bp=e=>Mp.forEach((t=>t(e))),Up=()=>Fp.size>0;function Hp(e,t){var n;if(t)return!(null==(n=Fp.get(t))||!n.isToastActive(e));let r=!1;return Fp.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function zp(e){if(Up()){if(null==e||(e=>Sp(e)||wp(e))(e))Fp.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=Fp.get(e.containerId);t?t.removeToast(e.id):Fp.forEach((t=>{t.removeToast(e.id)}))}}else _p=_p.filter((t=>null!=e&&t.options.toastId!==e))}function Vp(e,t){Tp(e)&&(Up()||_p.push({content:e,options:t}),Fp.forEach((n=>{n.buildToast(e,t)})))}function qp(e,t){Fp.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function Wp(e){let t=e.containerId||1;return{subscribe(n){let r=Rp(t,e,Bp);Fp.set(t,r);let a=r.observe(n);return _p.forEach((e=>Vp(e.content,e.options))),_p=[],()=>{a(),Fp.delete(t)}},setProps(e){var n;null==(n=Fp.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=Fp.get(t))?void 0:e.getSnapshot()}}}function Yp(e){return e&&(Sp(e.toastId)||wp(e.toastId))?e.toastId:Lp()}function Gp(e,t){return Vp(e,t),t.toastId}function Kp(e,t){return J(J({},t),{},{type:t&&t.type||e,toastId:Yp(t)})}function Xp(e){return(t,n)=>Gp(t,Kp(e,n))}function $p(e,t){return Gp(e,Kp("default",t))}function Qp(e){let[n,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(!1),o=(0,t.useRef)(null),i=(0,t.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:m}=e;function h(){r(!0)}function p(){r(!1)}function x(t){let r=o.current;if(i.canDrag&&r){i.didMove=!0,n&&p(),"x"===e.draggableDirection?i.delta=t.clientX-i.start:i.delta=t.clientY-i.start,i.start!==t.clientX&&(i.canCloseOnClick=!1);let a="x"===e.draggableDirection?"".concat(i.delta,"px, var(--y)"):"0, calc(".concat(i.delta,"px + var(--y))");r.style.transform="translate3d(".concat(a,",0)"),r.style.opacity="".concat(1-Math.abs(i.delta/i.removalDistance))}}function f(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",f);let t=o.current;if(i.canDrag&&i.didMove&&t){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=Fp.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,t.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",h),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",p)}}),[e.pauseOnFocusLoss]);let g={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){i.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",f);let n=o.current;i.canCloseOnClick=!0,i.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(i.start=t.clientX,i.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(i.start=t.clientY,i.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:a,right:s}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=a&&t.clientX<=s&&t.clientY>=n&&t.clientY<=r?p():h()}};return l&&c&&(g.onMouseEnter=p,e.stacked||(g.onMouseLeave=h)),m&&(g.onClick=e=>{u&&u(e),i.canCloseOnClick&&d(!0)}),{playToast:h,pauseToast:p,isRunning:n,preventExitTransition:a,toastRef:o,eventHandlers:g}}$p.loading=(e,t)=>Gp(e,Kp("default",J({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),$p.promise=function(e,t,n){let r,{pending:a,error:s,success:o}=t;a&&(r=Sp(a)?$p.loading(a,n):$p.loading(a.render,J(J({},n),a)));let i={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,a)=>{if(null==t)return void $p.dismiss(r);let s=J(J(J({type:e},i),n),{},{data:a}),o=Sp(t)?{render:t}:t;return r?$p.update(r,J(J({},s),o)):$p(o.render,J(J({},s),o)),a},c=Cp(e)?e():e;return c.then((e=>l("success",o,e))).catch((e=>l("error",s,e))),c},$p.success=Xp("success"),$p.info=Xp("info"),$p.error=Xp("error"),$p.warning=Xp("warning"),$p.warn=$p.warning,$p.dark=(e,t)=>Gp(e,Kp("default",J({theme:"dark"},t))),$p.dismiss=function(e){zp(e)},$p.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fp.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},$p.isActive=Hp,$p.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=Fp.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:a}=n,s=J(J(J({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Lp()});s.toastId!==e&&(s.staleId=e);let o=s.render||a;delete s.render,Gp(o,s)}},$p.done=e=>{$p.update(e,{progress:1})},$p.onChange=function(e){return Mp.add(e),()=>{Mp.delete(e)}},$p.play=e=>qp(!0,e),$p.pause=e=>qp(!1,e);var Jp="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,Zp=e=>{let{theme:n,type:r,isLoading:a}=e,s=yp(e,jp);return t.createElement("svg",J({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},s))};var ex={info:function(e){return t.createElement(Zp,J({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return t.createElement(Zp,J({},e),t.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return t.createElement(Zp,J({},e),t.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return t.createElement(Zp,J({},e),t.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return t.createElement("div",{className:"Toastify__spinner"})}};function tx(e){let{theme:n,type:r,isLoading:a,icon:s}=e,o=null,i={theme:n,type:r};return!1===s||(Cp(s)?o=s(J(J({},i),{},{isLoading:a})):(0,t.isValidElement)(s)?o=(0,t.cloneElement)(s,i):a?o=ex.spinner():(e=>e in ex)(r)&&(o=ex[r](i))),o}var nx=e=>{let{isRunning:n,preventExitTransition:r,toastRef:a,eventHandlers:s,playToast:o}=Qp(e),{closeButton:i,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:m,closeToast:h,transition:p,position:x,className:f,style:g,progressClassName:b,updateId:y,role:v,progress:N,rtl:j,toastId:w,deleteToast:S,isIn:C,isLoading:k,closeOnClick:E,theme:T,ariaLabel:A}=e,I=Np("Toastify__toast","Toastify__toast-theme--".concat(T),"Toastify__toast--".concat(u),{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":E}),D=Cp(f)?f({rtl:j,position:x,type:u,defaultClassName:I}):Np(I,f),P=tx(e),O=!!N||!c,L={closeToast:h,type:u,theme:T},R=null;return!1===i||(R=Cp(i)?i(L):(0,t.isValidElement)(i)?(0,t.cloneElement)(i,L):function(e){let{closeToast:n,theme:r,ariaLabel:a="close"}=e;return t.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:e=>{e.stopPropagation(),n(!0)},"aria-label":a},t.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},t.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),t.createElement(p,{isIn:C,done:S,position:x,preventExitTransition:r,nodeRef:a,playToast:o},t.createElement("div",J(J({id:w,tabIndex:0,onClick:d,"data-in":C,className:D},s),{},{style:g,ref:a},C&&{role:v,"aria-label":A}),null!=P&&t.createElement("div",{className:Np("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!k})},P),Dp(l,e,!n),R,!e.customProgressBar&&t.createElement(Pp,J(J({},y&&!O?{key:"p-".concat(y)}:{}),{},{rtl:j,theme:T,delay:c,isRunning:n,isIn:C,closeToast:h,hide:m,type:u,className:b,controlledProgress:O,progress:N||0}))))},rx=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},ax=Ap(rx("bounce",!0)),sx=(Ap(rx("slide",!0)),Ap(rx("zoom")),Ap(rx("flip")),{position:"top-right",transition:ax,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function ox(e){let n=J(J({},sx),e),r=e.stacked,[a,s]=(0,t.useState)(!0),o=(0,t.useRef)(null),{getToastToRender:i,isToastActive:l,count:c}=function(e){var n;let{subscribe:r,getSnapshot:a,setProps:s}=(0,t.useRef)(Wp(e)).current;s(e);let o=null==(n=(0,t.useSyncExternalStore)(r,a,a))?void 0:n.slice();return{getToastToRender:function(t){if(!o)return[];let n=new Map;return e.newestOnTop&&o.reverse(),o.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:Hp,count:null==o?void 0:o.length}}(n),{className:d,style:u,rtl:m,containerId:h,hotKeys:p}=n;function x(e){let t=Np("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":m});return Cp(d)?d({position:e,rtl:m,defaultClassName:t}):Np(t,kp(d))}function f(){r&&(s(!0),$p.play())}return Jp((()=>{var e;if(r){let t=o.current.querySelectorAll('[data-in="true"]'),r=12,s=null==(e=n.position)?void 0:e.includes("top"),i=0,l=0;Array.from(t).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(a)),n.dataset.pos||(n.dataset.pos=s?"top":"bot");let o=i*(a?.2:1)+(a?0:r*t);n.style.setProperty("--y","".concat(s?o:-1*o,"px")),n.style.setProperty("--g","".concat(r)),n.style.setProperty("--s","".concat(1-(a?l:0))),i+=n.offsetHeight,l+=.025}))}}),[a,c,r]),(0,t.useEffect)((()=>{function e(e){var t;let n=o.current;p(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),$p.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(s(!0),$p.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[p]),t.createElement("section",{ref:o,className:"Toastify",id:h,onMouseEnter:()=>{r&&(s(!1),$p.pause())},onMouseLeave:f,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":n["aria-label"]},i(((e,n)=>{let a=n.length?J({},u):J(J({},u),{},{pointerEvents:"none"});return t.createElement("div",{tabIndex:-1,className:x(e),"data-stacked":r,style:a,key:"c-".concat(e)},n.map((e=>{let{content:n,props:a}=e;return t.createElement(nx,J(J({},a),{},{stacked:r,collapseAll:f,isIn:l(a.toastId,a.containerId),key:"t-".concat(a.key)}),n)})))})))}function ix(e){let{user:n}=e;const r=Pu(),[a,s]=(0,t.useState)(!1);return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("nav",{className:"bg-white text-gray-800 px-6 py-3 flex justify-between items-center shadow-lg",children:[(0,gp.jsx)("div",{className:"flex items-center",children:(0,gp.jsx)(om,{to:"/",children:(0,gp.jsx)("img",{src:fp,alt:"Company Logo",className:"h-20 w-auto object-contain",style:{maxWidth:"200px"}})})}),(0,gp.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 text-3xl font-bold",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gp.jsx)("button",{onClick:()=>{s(!0)},className:"text-3xl hover:text-blue-900 transition-colors",title:"Database",children:(0,gp.jsx)(Wh,{})}),(0,gp.jsxs)("button",{onClick:async()=>{try{await function(e){return R(e).signOut()}(Ld),r("/")}catch(e){$p.error("Sign-out error")}},className:"bg-gray-600 hover:bg-blue-900 text-white px-4 py-2 rounded-md transition-colors duration-200 flex items-center space-x-2",title:"Sign Out",children:[(0,gp.jsx)(sp,{className:"text-lg"}),(0,gp.jsx)("span",{className:"font-medium",children:"Sign Out"})]})]})]}),(0,gp.jsx)(bp,{isOpen:a,onClose:()=>s(!1)})]})}const lx=[{acct:"10001",description:"Cash - Current Account",type:"A",line:"CASH"},{acct:"10002",description:"Cash - Trust",type:"A",line:"NET TRUST FUNDS"},{acct:"10004",description:"Cash - Commission Trust Account",type:"A",line:"CASH"},{acct:"10005",description:"Term Deposits - Buyers",type:"A",line:"NET TRUST FUNDS"},{acct:"10006",description:"Cash - General Term Deposits",type:"A",line:"CASH"},{acct:"10009",description:"Cash - Petty Cash",type:"A",line:"CASH"},{acct:"11000",description:"Notes Receivables",type:"A",line:"NOTES RECEIVABLE"},{acct:"12100",description:"A/R - Agt's Recoverable- Gen Exp",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12101",description:"A/R - Agt's Recoverable - Advert",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12200",description:"A/R - Commission From Deals",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12500",description:"A/R - Other",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12600",description:"Loan - Homelife Top Star",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12700",description:"Loan- Executive Mortgage",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"12999",description:"A/R - Allowance",type:"A",line:"ACCOUNTS RECEIVABLE"},{acct:"15000",description:"Prepaid Expenses",type:"A",line:"PREPAID EXPENSES"},{acct:"16010",description:"Land & Buildings",type:"A",line:"LAND & BUILDING"},{acct:"16020",description:"Vehicles",type:"A",line:"AUTOMOBILE"},{acct:"16030",description:"Office Furniture",type:"A",line:"OFFICE EQUIPMENT"},{acct:"16040",description:"Office Equipment",type:"A",line:"OFFICE EQUIPMENT"},{acct:"16050",description:"Computer Hardware",type:"A",line:"COMPUTER EQUIPMENT"},{acct:"16060",description:"Computer Software",type:"A",line:"COMPUTER EQUIPMENT"},{acct:"16070",description:"Leasehold Improvements",type:"A",line:"LEASEHOLD IMPROVEMENTS"},{acct:"16080",description:"Signs",type:"A",line:"LEASEHOLD IMPROVEMENTS"},{acct:"16090",description:"Franchise Cost",type:"A",line:"FRANCHISE COSTS"},{acct:"17000",description:"Incorporation Cost",type:"A",line:"FRANCHISE COSTS"},{acct:"17010",description:"Acc. Depr. - Building",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17020",description:"Acc. Depr. - Vehicles",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17030",description:"Acc. Depr. - Office Furniture",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17040",description:"Acc. Depr. - Office Equipment",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17050",description:"Acc. Depr. - Comp. Hardware",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17060",description:"Acc. Depr. - Comp. Software",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17070",description:"Acc. Amor. - Leaseholds",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17080",description:"Acc. Depr. - Signs",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"17090",description:"Acc. Amor. - Franchise Costs",type:"D",line:"ACCUMULATED DEPRECIATION"},{acct:"20000",description:"Bank Operating Line",type:"L",line:"LIABILITY"},{acct:"21000",description:"A/P - Suppliers",type:"L",line:"ACCOUNTS PAYABLE"},{acct:"21100",description:"A/P - Other Brokers & Referrals",type:"L",line:"ACCOUNTS PAYABLE"},{acct:"21200",description:"Garnishment",type:"L",line:"LIABILITY"},{acct:"21300",description:"Liability For Trust Funds",type:"L",line:"LIABILITY"},{acct:"21400",description:"Loan - Clientel",type:"L",line:"LIABILITY"},{acct:"21450",description:"Loan Payable - 2199435 Ont Inc",type:"L",line:"LIABILITY"},{acct:"21500",description:"Commission Payable",type:"L",line:"LIABILITY"},{acct:"21600",description:"Brokers Commission",type:"L",line:"LIABILITY"},{acct:"22000",description:"Accrued Expenses",type:"L",line:"LIABILITY"},{acct:"23000",description:"HST Collected",type:"L",line:"LIABILITY"},{acct:"23001",description:"HST Input Tax Credit",type:"A",line:"ASSET"},{acct:"23002",description:"Agent's HST Contra",type:"L",line:"LIABILITY"},{acct:"23004",description:"HST Net Payable",type:"L",line:"LIABILITY"},{acct:"24000",description:"F.I.T. Withheld",type:"L",line:"LIABILITY"},{acct:"24001",description:"E.I. Withheld",type:"L",line:"LIABILITY"},{acct:"24002",description:"C.P.P. Withheld",type:"L",line:"LIABILITY"},{acct:"24500",description:"Payroll Clearing",type:"L",line:"LIABILITY"},{acct:"24700",description:"Vacation Pay Payable",type:"L",line:"LIABILITY"},{acct:"26000",description:"Income Tax Payable",type:"L",line:"LIABILITY"},{acct:"27000",description:"Bank Loan #1",type:"L",line:"LIABILITY"},{acct:"27010",description:"Long Term Loan - Computers",type:"L",line:"LIABILITY"},{acct:"28000",description:"Shareholder Loan - Sri",type:"L",line:"LIABILITY"},{acct:"28010",description:"Shareholder Loan - #2",type:"L",line:"LIABILITY"},{acct:"28020",description:"Shareholder Loan - #3",type:"L",line:"LIABILITY"},{acct:"28050",description:"Loan Payable - Executive Mortgage",type:"L",line:"LIABILITY"},{acct:"29000",description:"Suspense",type:"L",line:"LIABILITY"},{acct:"30000",description:"Preferred Stock",type:"E",line:"EQUITY"},{acct:"30010",description:"Common Stock",type:"E",line:"EQUITY"},{acct:"30050",description:"Dividend",type:"E",line:"EQUITY"},{acct:"39998",description:"Retained Earnings - Open Bal.",type:"E",line:"EQUITY"},{acct:"39999",description:"Retained Earnings - Y.T.D.",type:"E",line:"EQUITY"},{acct:"40100",description:"Commission Income",type:"R",line:"REVENUE"},{acct:"42100",description:"Interest Income",type:"R",line:"REVENUE"},{acct:"43100",description:"Other Income",type:"R",line:"REVENUE"},{acct:"44100",description:"Fee Deducted Income",type:"R",line:"REVENUE"},{acct:"45100",description:"Desk Fee Income",type:"R",line:"REVENUE"},{acct:"46100",description:"Brokers Commission Split",type:"R",line:"REVENUE"},{acct:"50100",description:"Agent's Commission",type:"E",line:"EXPENSE"},{acct:"51100",description:"Commission To Other Brokers",type:"E",line:"EXPENSE"},{acct:"52100",description:"Referral Fees",type:"E",line:"EXPENSE"},{acct:"60101",description:"Equip. Rental - Computer",type:"E",line:"EXPENSE"},{acct:"60102",description:"Equip. Rental - Furniture",type:"E",line:"EXPENSE"},{acct:"60199",description:"Equip. Rental - Misc.",type:"E",line:"EXPENSE"},{acct:"62101",description:"Rent & Occ. - Rent Expense",type:"E",line:"EXPENSE"},{acct:"62102",description:"Rent & Occ. - Common Area",type:"E",line:"EXPENSE"},{acct:"62103",description:"Rent & Occ. - Utilities",type:"E",line:"EXPENSE"},{acct:"62104",description:"Rent & Occ. - Repairs & Maint",type:"E",line:"EXPENSE"},{acct:"62105",description:"Rent & Occ. - Prop./Bus. Taxes",type:"E",line:"EXPENSE"},{acct:"63101",description:"Lic. & Ins. - Errors & Ommiss.",type:"E",line:"EXPENSE"},{acct:"63102",description:"Lic. & Ins. - Office Contents",type:"E",line:"EXPENSE"},{acct:"63103",description:"Lic. & Ins. - Licenses",type:"E",line:"EXPENSE"},{acct:"63199",description:"Lic. & Ins. - Misc.",type:"E",line:"EXPENSE"},{acct:"64101",description:"Selling - Mls Fees",type:"E",line:"EXPENSE"},{acct:"64102",description:"Selling - Signs",type:"E",line:"EXPENSE"},{acct:"64103",description:"Selling - Supplies",type:"E",line:"EXPENSE"},{acct:"64104",description:"Selling - Meetings",type:"E",line:"EXPENSE"},{acct:"64199",description:"Selling - Misc.",type:"E",line:"EXPENSE"},{acct:"65101",description:"Advertising - Newspapers",type:"E",line:"EXPENSE"},{acct:"65102",description:"Advertising - Other Medium",type:"E",line:"EXPENSE"},{acct:"65103",description:"Advertising - Web Solutions",type:"E",line:"EXPENSE"},{acct:"65104",description:"Advertising - Recovered",type:"E",line:"EXPENSE"},{acct:"65105",description:"Advertising - Promotional",type:"E",line:"EXPENSE"},{acct:"65199",description:"Advertising - Misc.",type:"E",line:"EXPENSE"},{acct:"66101",description:"Recruiting Lunches",type:"E",line:"EXPENSE"},{acct:"66102",description:"Recruiting Gifts",type:"E",line:"EXPENSE"},{acct:"66103",description:"Recruiting Agency",type:"E",line:"EXPENSE"},{acct:"66111",description:"Staff Lunches",type:"E",line:"EXPENSE"},{acct:"66112",description:"Staff Gifts",type:"E",line:"EXPENSE"},{acct:"66199",description:"Misc. Recruiting",type:"E",line:"EXPENSE"},{acct:"69101",description:"Franchise Costs - Realty Executives",type:"E",line:"EXPENSE"},{acct:"69103",description:"Franchise Costs - Advertising",type:"E",line:"EXPENSE"},{acct:"69199",description:"Franchise Costs - Misc.",type:"E",line:"EXPENSE"},{acct:"70101",description:"Payroll Exp. - Mgmt. Salaries",type:"E",line:"EXPENSE"},{acct:"70102",description:"Payroll Exp. - Salaries",type:"E",line:"EXPENSE"},{acct:"70103",description:"Payroll Exp. - Part-Time",type:"E",line:"EXPENSE"},{acct:"70104",description:"Payroll Exp. - Payroll",type:"E",line:"EXPENSE"},{acct:"70105",description:"Payroll Exp. - Group Insurance",type:"E",line:"EXPENSE"},{acct:"70106",description:"Payroll Exp. - E.H.T.",type:"E",line:"EXPENSE"},{acct:"70107",description:"Payroll Exp. - Recovered",type:"E",line:"EXPENSE"},{acct:"70199",description:"Payroll Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"71101",description:"Bank Charges - Interest",type:"E",line:"EXPENSE"},{acct:"71102",description:"Bank Charges - Loan Interest",type:"E",line:"EXPENSE"},{acct:"71104",description:"Bank Charges - Service Charges",type:"E",line:"EXPENSE"},{acct:"71199",description:"Bank Charges - Misc.",type:"E",line:"EXPENSE"},{acct:"72101",description:"Commun. Exp. - Telephone Lines",type:"E",line:"EXPENSE"},{acct:"72102",description:"Commun. Exp. - Internet Service",type:"E",line:"EXPENSE"},{acct:"72103",description:"Commun. Exp. - Pagers",type:"E",line:"EXPENSE"},{acct:"72104",description:"Commun. Exp. - Cellular",type:"E",line:"EXPENSE"},{acct:"72199",description:"Commun. Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"75101",description:"Office Exp. - Computer Supplies",type:"E",line:"EXPENSE"},{acct:"75102",description:"Office Exp. - Office Supplies",type:"E",line:"EXPENSE"},{acct:"75103",description:"Office Exp. - Printing",type:"E",line:"EXPENSE"},{acct:"75104",description:"Office Exp. - Postage",type:"E",line:"EXPENSE"},{acct:"75105",description:"Office Exp. - Courier Service",type:"E",line:"EXPENSE"},{acct:"75107",description:"Office Exp. - Business Taxes",type:"E",line:"EXPENSE"},{acct:"75108",description:"Office Exp. - Security Services",type:"E",line:"EXPENSE"},{acct:"75109",description:"Office Exp. - Automobile",type:"E",line:"EXPENSE"},{acct:"75110",description:"Office Exp. - Charitable",type:"E",line:"EXPENSE"},{acct:"75111",description:"Office Exp. - Bad Debts",type:"E",line:"EXPENSE"},{acct:"75112",description:"Office Exp. - Photocopies",type:"E",line:"EXPENSE"},{acct:"75114",description:"Office Exp. -Tel.Answer Servi Ces",type:"E",line:"EXPENSE"},{acct:"75115",description:"Office Exp. - Recruiting",type:"E",line:"EXPENSE"},{acct:"75116",description:"Office Exp. - Conventions/Seminars",type:"E",line:"EXPENSE"},{acct:"75117",description:"Office Exp. - Entertainment",type:"E",line:"EXPENSE"},{acct:"75199",description:"Office Exp. - Misc.",type:"E",line:"EXPENSE"},{acct:"76101",description:"Prof. Fees - Legal",type:"E",line:"EXPENSE"},{acct:"76102",description:"Prof. Fees - Accounting",type:"E",line:"EXPENSE"},{acct:"76103",description:"Prof. Fees - Consulting",type:"E",line:"EXPENSE"},{acct:"79101",description:"Depreciation",type:"E",line:"EXPENSE"},{acct:"79102",description:"Amortization - Franchise Fees",type:"E",line:"EXPENSE"},{acct:"80101",description:"Gain Or Loss On Fixed Assets",type:"E",line:"EXPENSE"},{acct:"90101",description:"Federal Income Taxes",type:"E",line:"EXPENSE"},{acct:"90102",description:"Provincial Income Taxes",type:"E",line:"EXPENSE"}],cx=()=>{const[e,n]=(0,t.useState)("main"),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),u=Pu(),m=[{id:"chart-accounts",title:"Chart of Accounts Menu",icon:Uh},{id:"trial-balance",title:"Trial Balance - Detail Balance",icon:Fh},{id:"hst-report",title:"HST Report",icon:ip},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:rp},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:Zh},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:Mh},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:Qh}],h=()=>{window.print()};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen print:hidden",children:[(0,gp.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,gp.jsxs)("button",{onClick:()=>u("/finance"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Finance"]})}),(0,gp.jsx)("nav",{className:"p-4",children:(0,gp.jsx)("ul",{className:"space-y-2",children:m.map((t=>(0,gp.jsx)("li",{children:(0,gp.jsx)("button",{onClick:()=>{var e;"trial-balance"===(e=t.id)?u("/trial-balance"):"hst-report"===e?u("/hst-report"):"trust-payments"===e?u("/real-estate-trust-payments"):"commission-trust"===e?u("/commission-trust-payments"):"commission-trust-ledger"===e?u("/commission-trust-ledger"):"general-account"===e?u("/general-account-payments"):n(e)},className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===t.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)(t.icon,{className:"mr-3"}),(0,gp.jsx)("span",{className:"text-sm font-medium",children:t.title})]})})},t.id)))})})]}),(0,gp.jsx)("div",{className:"flex-1 p-6 print:p-0",children:(()=>{switch(e){case"chart-accounts":default:return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Chart of Accounts"}),(0,gp.jsxs)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,gp.jsx)(op,{}),"Print"]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Acct #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Type"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Line Description"})]})}),(0,gp.jsx)("tbody",{children:lx.map(((e,t)=>(0,gp.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-mono text-sm",children:e.acct}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.type}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.line})]},t)))})]})})]});case"trial-balance":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Trial Balance - Detail Balance"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed trial balance reports with account balances and adjustments."}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,gp.jsxs)("tbody",{children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Cash"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Receivable"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Payable"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"($15,000)"})]})]})]})})]});case"hst-report":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"HST Report"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate and view HST (Harmonized Sales Tax) reports for tax filing."}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-3 text-blue-600",children:"HST Collected"}),(0,gp.jsxs)("div",{className:"space-y-2",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Total Sales (HST Included):"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$100,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"HST Collected (13%):"}),(0,gp.jsx)("span",{className:"font-semibold text-green-600",children:"$13,000"})]})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-3 text-red-600",children:"HST Paid"}),(0,gp.jsxs)("div",{className:"space-y-2",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Total Purchases (HST Included):"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$50,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"HST Paid (13%):"}),(0,gp.jsx)("span",{className:"font-semibold text-red-600",children:"$6,500"})]})]})]})]}),(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Net HST Owing"}),(0,gp.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"$6,500 (HST Collected - HST Paid)"})]})]});case"trust-payments":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage real estate trust account payments and transactions."}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Trust Account Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Current Balance:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$150,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Pending Payments:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$25,000"})]})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Transactions"}),(0,gp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Deposit - Property Sale #1234"}),(0,gp.jsx)("span",{className:"text-green-600",children:"+$75,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Payment - Vendor Invoice #567"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$15,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Deposit - Earnest Money"}),(0,gp.jsx)("span",{className:"text-green-600",children:"+$5,000"})]})]})]})]})]});case"commission-trust":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage commission trust account payments and distributions."}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Commission Trust Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commissions:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$75,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Paid to Agents:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$60,000"})]})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Commission Payments"}),(0,gp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Agent Smith - Property #1234"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$12,500"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Agent Johnson - Property #5678"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$8,750"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Agent Brown - Property #9012"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$9,250"})]})]})]})]})]});case"commission-trust-ledger":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Ledger"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed transactions and balances for the commission trust account."}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,gp.jsxs)("tbody",{children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-12-31"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Initial Balance"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$150,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$150,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-15"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Smith"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$12,500"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$137,500"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-20"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Johnson"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$8,750"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$128,750"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2024-01-25"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Payment to Agent Brown"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$9,250"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$119,500"})]})]})]})})]});case"general-account":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage accounts payable and general expense payments."}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Accounts Payable Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Outstanding:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$45,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Overdue Amount:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2 text-red-600",children:"$12,000"})]})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Recent Expense Payments"}),(0,gp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Office Rent - January 2024"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$3,500"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Utilities - December 2023"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$850"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Marketing Services"}),(0,gp.jsx)("span",{className:"text-red-600",children:"-$2,200"})]})]})]})]})]})}})()})]}),(0,gp.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          .print\\:p-0 {\n            padding: 0 !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "})]})};function dx(e){return Oh({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r\n\tc0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r\n\tc0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r\n\tC34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r\n\tc-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"},child:[]},{tag:"path",attr:{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r\n\tc0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"},child:[]}]})(e)}const ux=e=>{let{setUser:n}=e;const[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),u=()=>{a(""),o("")},m=async()=>{try{const e=await async function(e,t,n){if(Ze(e.app))return Promise.reject(wt(e,"operation-not-supported-in-this-environment"));const r=On(e);kt(e,t,sr);const a=Jr(r,n);return new sa(r,"signInViaPopup",t,a).executeNotNull()}(Ld,Rd),t=e.user;n(t),d("")}catch(e){d("Error logging in with Google.")}};return(0,gp.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-200 p-4",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-80 text-center",children:[(0,gp.jsx)("img",{src:fp,alt:"Logo",className:"h-16 mx-auto mb-6"}),(0,gp.jsx)("h2",{className:"text-3xl font-semibold mb-6 text-gray-900",children:i?"Login":"Sign Up"}),c&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:c}),(0,gp.jsx)("label",{className:"block text-left font-bold mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"email",placeholder:"Enter email",value:r,onChange:e=>a(e.target.value),className:"w-full p-2 mb-4 border rounded focus:outline-yellow-400"}),(0,gp.jsx)("label",{className:"block text-left font-bold mb-1",children:"Password"}),(0,gp.jsx)("input",{type:"password",placeholder:"Enter password",value:s,onChange:e=>o(e.target.value),className:"w-full p-2 mb-6 border rounded focus:outline-yellow-400"}),i?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("button",{onClick:async()=>{try{const e=await function(e,t,n){return Ze(e.app)?Promise.reject(Ct(e)):yr(R(e),ar.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vr(e),t}))}(Ld,r,s),t=e.user;n(t),d("")}catch(e){"auth/user-not-found"===e.code?d("User not found. Please sign up first."):"auth/wrong-password"===e.code?d("Incorrect password. Please try again."):d("Login failed. Please check your credentials.")}},className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-semibold mb-4 transition",children:"Login"}),(0,gp.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 border border-gray-300 py-2 rounded hover:bg-gray-100 transition mb-4",children:[(0,gp.jsx)(dx,{size:22}),"Login with Google"]}),(0,gp.jsxs)("p",{className:"text-sm text-gray-700",children:["Don't have an account?"," ",(0,gp.jsx)("button",{onClick:()=>{l(!1),d(""),u()},className:"text-blue-900 font-semibold hover:underline",children:"Sign Up"})]})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("button",{onClick:async()=>{try{const e=(await Nr(Ld,r,s)).user;n(e),d("")}catch(e){"auth/email-already-in-use"===e.code?d("Email already in use. Please login instead."):"auth/weak-password"===e.code?d("Password too weak. Use at least 6 characters."):d("Sign up failed. Please try again.")}},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded font-semibold mb-4 transition",children:"Sign Up"}),(0,gp.jsxs)("button",{onClick:m,className:"w-full flex items-center justify-center gap-2 border border-gray-300 py-2 rounded hover:bg-gray-100 transition mb-4",children:[(0,gp.jsx)(dx,{size:22}),"Sign Up with Google"]}),(0,gp.jsxs)("p",{className:"text-sm text-gray-700",children:["Already have an account?"," ",(0,gp.jsx)("button",{onClick:()=>{l(!0),d(""),u()},className:"text-blue-900 font-semibold hover:underline",children:"Login"})]})]})]})})};var mx=n(173),hx=n(922);function px(e){return"string"===typeof e}function xx(e,t,n){return n.indexOf(e)===t}function fx(e){return-1===e.indexOf(",")?e:e.split(",")}function gx(e){if(!e)return e;if("C"===e||"posix"===e||"POSIX"===e)return"en-US";if(-1!==e.indexOf(".")){var t=e.split(".")[0];return gx(void 0===t?"":t)}if(-1!==e.indexOf("@")){var n=e.split("@")[0];return gx(void 0===n?"":n)}if(-1===e.indexOf("-")||(r=e).toLowerCase()!==r)return e;var r,a=e.split("-"),s=a[0],o=a[1],i=void 0===o?"":o;return"".concat(s,"-").concat(i.toUpperCase())}var bx=hx((function(e){var t=void 0===e?{}:e,n=t.useFallbackLocale,r=void 0===n||n,a=t.fallbackLocale,s=void 0===a?"en-US":a,o=[];if("undefined"!==typeof navigator){for(var i=[],l=0,c=navigator.languages||[];l<c.length;l++){var d=c[l];i=i.concat(fx(d))}var u=navigator.language,m=u?fx(u):u;o=o.concat(i,m)}return r&&o.push(s),o.filter(px).map(gx).filter(xx)}),{cacheKey:JSON.stringify});var yx=hx((function(e){return bx(e)[0]||null}),{cacheKey:JSON.stringify});const vx=yx;function Nx(e,t,n){return function(r,a){void 0===a&&(a=n);var s=e(r)+a;return t(s)}}function jx(e){return function(t){return new Date(e(t).getTime()-1)}}function wx(e,t){return function(n){return[e(n),t(n)]}}function Sx(e){if(e instanceof Date)return e.getFullYear();if("number"===typeof e)return e;var t=parseInt(e,10);if("string"===typeof e&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(e,"."))}function Cx(e){if(e instanceof Date)return e.getMonth();throw new Error("Failed to get month from date: ".concat(e,"."))}function kx(e){if(e instanceof Date)return e.getDate();throw new Error("Failed to get year from date: ".concat(e,"."))}function Ex(e){var t=Sx(e),n=t+(1-t)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Tx=Nx(Sx,Ex,-100),Ax=Nx(Sx,Ex,100),Ix=jx(Ax),Dx=Nx(Sx,Ix,-100),Px=(Nx(Sx,Ix,100),wx(Ex,Ix));function Ox(e){var t=Sx(e),n=t+(1-t)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Lx=Nx(Sx,Ox,-10),Rx=Nx(Sx,Ox,10),Fx=jx(Rx),_x=Nx(Sx,Fx,-10),Mx=(Nx(Sx,Fx,10),wx(Ox,Fx));function Bx(e){var t=Sx(e),n=new Date;return n.setFullYear(t,0,1),n.setHours(0,0,0,0),n}var Ux=Nx(Sx,Bx,-1),Hx=Nx(Sx,Bx,1),zx=jx(Hx),Vx=Nx(Sx,zx,-1),qx=(Nx(Sx,zx,1),wx(Bx,zx));function Wx(e,t){return function(n,r){void 0===r&&(r=t);var a=Sx(n),s=Cx(n)+r,o=new Date;return o.setFullYear(a,s,1),o.setHours(0,0,0,0),e(o)}}function Yx(e){var t=Sx(e),n=Cx(e),r=new Date;return r.setFullYear(t,n,1),r.setHours(0,0,0,0),r}var Gx=Wx(Yx,-1),Kx=Wx(Yx,1),Xx=jx(Kx),$x=Wx(Xx,-1),Qx=(Wx(Xx,1),wx(Yx,Xx));function Jx(e,t){return function(n,r){void 0===r&&(r=t);var a=Sx(n),s=Cx(n),o=kx(n)+r,i=new Date;return i.setFullYear(a,s,o),i.setHours(0,0,0,0),e(i)}}function Zx(e){var t=Sx(e),n=Cx(e),r=kx(e),a=new Date;return a.setFullYear(t,n,r),a.setHours(0,0,0,0),a}Jx(Zx,-1);var ef,tf=jx(Jx(Zx,1)),nf=(Jx(tf,-1),Jx(tf,1),wx(Zx,tf));function rf(e){return kx(Xx(e))}var af={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},sf={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},of=((ef={})[af.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],ef[af.HEBREW]=["he","he-IL"],ef[af.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],ef),lf=[0,1,2,3,4,5,6],cf=new Map;function df(e){return function(t,n){return function(e){return function(t,n){var r=t||vx();cf.has(r)||cf.set(r,new Map);var a=cf.get(r);return a.has(e)||a.set(e,new Intl.DateTimeFormat(r||void 0,e).format),a.get(e)(n)}}(e)(t,function(e){var t=new Date(e);return new Date(t.setHours(12))}(n))}}df({day:"numeric",month:"numeric",year:"numeric"});var uf=df({day:"numeric"}),mf=df({day:"numeric",month:"long",year:"numeric"}),hf=df({month:"long"}),pf=df({month:"long",year:"numeric"}),xf=df({weekday:"short"}),ff=df({weekday:"long"}),gf=df({year:"numeric"}),bf=lf[0],yf=lf[5],vf=lf[6];function Nf(e,t){void 0===t&&(t=af.ISO_8601);var n=e.getDay();switch(t){case af.ISO_8601:return(n+6)%7;case af.ISLAMIC:return(n+1)%7;case af.HEBREW:case af.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function jf(e,t){void 0===t&&(t=af.ISO_8601);var n=Sx(e),r=Cx(e),a=e.getDate()-Nf(e,t);return new Date(n,r,a)}function wf(e,t){switch(e){case"century":return Ex(t);case"decade":return Ox(t);case"year":return Bx(t);case"month":return Yx(t);case"day":return Zx(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Sf(e,t){switch(e){case"century":return Ax(t);case"decade":return Rx(t);case"year":return Hx(t);case"month":return Kx(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Cf(e,t){switch(e){case"century":return Ix(t);case"decade":return Fx(t);case"year":return zx(t);case"month":return Xx(t);case"day":return tf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function kf(e,t){switch(e){case"century":return Px(t);case"decade":return Mx(t);case"year":return qx(t);case"month":return Qx(t);case"day":return nf(t);default:throw new Error("Invalid rangeType: ".concat(e))}}function Ef(e,t,n){return void 0===t&&(t=gf),n.map((function(n){return t(e,n)})).join(" \u2013 ")}function Tf(e,t,n){return Ef(e,t,Mx(n))}function Af(e,t){void 0===t&&(t=af.ISO_8601);var n=e.getDay();switch(t){case af.ISLAMIC:case af.HEBREW:return n===yf||n===vf;case af.ISO_8601:case af.GREGORY:return n===vf||n===bf;default:throw new Error("Unsupported calendar type.")}}var If="react-calendar__navigation";function Df(e){var n=e.activeStartDate,r=e.drillUp,a=e.formatMonthYear,s=void 0===a?pf:a,o=e.formatYear,i=void 0===o?gf:o,l=e.locale,c=e.maxDate,d=e.minDate,u=e.navigationAriaLabel,m=void 0===u?"":u,h=e.navigationAriaLive,p=e.navigationLabel,x=e.next2AriaLabel,f=void 0===x?"":x,g=e.next2Label,b=void 0===g?"\xbb":g,y=e.nextAriaLabel,v=void 0===y?"":y,N=e.nextLabel,j=void 0===N?"\u203a":N,w=e.prev2AriaLabel,S=void 0===w?"":w,C=e.prev2Label,k=void 0===C?"\xab":C,E=e.prevAriaLabel,T=void 0===E?"":E,A=e.prevLabel,I=void 0===A?"\u2039":A,D=e.setActiveStartDate,P=e.showDoubleView,O=e.view,L=e.views.indexOf(O)>0,R="century"!==O,F=function(e,t){switch(e){case"century":return Tx(t);case"decade":return Lx(t);case"year":return Ux(t);case"month":return Gx(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,n),_=R?function(e,t){switch(e){case"decade":return Lx(t,-100);case"year":return Ux(t,-10);case"month":return Gx(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,n):void 0,M=Sf(O,n),B=R?function(e,t){switch(e){case"decade":return Rx(t,100);case"year":return Hx(t,10);case"month":return Kx(t,12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,n):void 0,U=function(){if(F.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"century":return Dx(t);case"decade":return _x(t);case"year":return Vx(t);case"month":return $x(t);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,n);return d&&d>=e}(),H=R&&function(){if(_.getFullYear()<0)return!0;var e=function(e,t){switch(e){case"decade":return _x(t,-100);case"year":return Vx(t,-10);case"month":return $x(t,-12);default:throw new Error("Invalid rangeType: ".concat(e))}}(O,n);return d&&d>=e}(),z=c&&c<M,V=R&&c&&c<B;function q(e){var t=function(){switch(O){case"century":return function(e,t,n){return Ef(e,t,Px(n))}(l,i,e);case"decade":return Tf(l,i,e);case"year":return i(l,e);case"month":return s(l,e);default:throw new Error("Invalid view: ".concat(O,"."))}}();return p?p({date:e,label:t,locale:l||yx()||void 0,view:O}):t}return t.createElement("div",{className:If},null!==k&&R?t.createElement("button",{"aria-label":S,className:"".concat(If,"__arrow ").concat(If,"__prev2-button"),disabled:H,onClick:function(){D(_,"prev2")},type:"button"},k):null,null!==I&&t.createElement("button",{"aria-label":T,className:"".concat(If,"__arrow ").concat(If,"__prev-button"),disabled:U,onClick:function(){D(F,"prev")},type:"button"},I),function(){var e="".concat(If,"__label");return t.createElement("button",{"aria-label":m,"aria-live":h,className:e,disabled:!L,onClick:r,style:{flexGrow:1},type:"button"},t.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--from")},q(n)),P?t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(e,"__divider")}," \u2013 "),t.createElement("span",{className:"".concat(e,"__labelText ").concat(e,"__labelText--to")},q(M))):null)}(),null!==j&&t.createElement("button",{"aria-label":v,className:"".concat(If,"__arrow ").concat(If,"__next-button"),disabled:z,onClick:function(){D(M,"next")},type:"button"},j),null!==b&&R?t.createElement("button",{"aria-label":f,className:"".concat(If,"__arrow ").concat(If,"__next2-button"),disabled:V,onClick:function(){D(B,"next2")},type:"button"},b):null)}var Pf=function(){return Pf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Pf.apply(this,arguments)},Of=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Lf(e){return"".concat(e,"%")}function Rf(e){var n=e.children,r=e.className,a=e.count,s=e.direction,o=e.offset,i=e.style,l=e.wrap,c=Of(e,["children","className","count","direction","offset","style","wrap"]);return t.createElement("div",Pf({className:r,style:Pf({display:"flex",flexDirection:s,flexWrap:l?"wrap":"nowrap"},i)},c),t.Children.map(n,(function(e,n){var r=o&&0===n?Lf(100*o/a):null;return t.cloneElement(e,Pf(Pf({},e.props),{style:{flexBasis:Lf(100/a),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:r,marginInlineStart:r,marginInlineEnd:0}}))})))}var Ff,_f=n(440);function Mf(e,t){return t[0]<=e&&t[1]>=e}function Bf(e,t){return Mf(e[0],t)||Mf(e[1],t)}function Uf(e,t,n){var r=[];if(Bf(t,e)){r.push(n);var a=Mf(e[0],t),s=Mf(e[1],t);a&&r.push("".concat(n,"Start")),s&&r.push("".concat(n,"End")),a&&s&&r.push("".concat(n,"BothEnds"))}return r}function Hf(e){if(!e)throw new Error("args is required");var t=e.value,n=e.date,r=e.hover,a="react-calendar__tile",s=[a];if(!n)return s;var o=new Date,i=function(){if(Array.isArray(n))return n;var t=e.dateType;if(!t)throw new Error("dateType is required when date is not an array of two dates");return kf(t,n)}();if(Mf(o,i)&&s.push("".concat(a,"--now")),!t||!function(e){return Array.isArray(e)?null!==e[0]&&null!==e[1]:null!==e}(t))return s;var l,c,d=function(){if(Array.isArray(t))return t;var n=e.valueType;if(!n)throw new Error("valueType is required when value is not an array of two dates");return kf(n,t)}();c=i,(l=d)[0]<=c[0]&&l[1]>=c[1]?s.push("".concat(a,"--active")):Bf(d,i)&&s.push("".concat(a,"--hasActive"));var u=Uf(d,i,"".concat(a,"--range"));s.push.apply(s,u);var m=Array.isArray(t)?t:[t];if(r&&1===m.length){var h=Uf(r>d[0]?[d[0],r]:[r,d[0]],i,"".concat(a,"--hover"));s.push.apply(s,h)}return s}var zf=((Ff={})[sf.ARABIC]=af.ISLAMIC,Ff[sf.HEBREW]=af.HEBREW,Ff[sf.ISO_8601]=af.ISO_8601,Ff[sf.US]=af.GREGORY,Ff);var Vf=!1;function qf(e){if(function(e){return void 0!==e&&e in sf}(e)){var t=zf[e];return _f(Vf,'Specifying calendarType="'.concat(e,'" is deprecated. Use calendarType="').concat(t,'" instead.')),Vf=!0,t}return e}function Wf(e){for(var n=e.className,r=e.count,a=void 0===r?3:r,s=e.dateTransform,o=e.dateType,i=e.end,l=e.hover,c=e.offset,d=e.renderTile,u=e.start,m=e.step,h=void 0===m?1:m,p=e.value,x=e.valueType,f=[],g=u;g<=i;g+=h){var b=s(g);f.push(d({classes:Hf({date:b,dateType:o,hover:l,value:p,valueType:x}),date:b}))}return t.createElement(Rf,{className:n,count:a,offset:c,wrap:!0},f)}function Yf(e){var n=e.activeStartDate,r=e.children,a=e.classes,s=e.date,o=e.formatAbbr,i=e.locale,l=e.maxDate,c=e.maxDateTransform,d=e.minDate,u=e.minDateTransform,m=e.onClick,h=e.onMouseOver,p=e.style,x=e.tileClassName,f=e.tileContent,g=e.tileDisabled,b=e.view,y=(0,t.useMemo)((function(){return"function"===typeof x?x({activeStartDate:n,date:s,view:b}):x}),[n,s,x,b]),v=(0,t.useMemo)((function(){return"function"===typeof f?f({activeStartDate:n,date:s,view:b}):f}),[n,s,f,b]);return t.createElement("button",{className:Np(a,y),disabled:d&&u(d)>s||l&&c(l)<s||g&&g({activeStartDate:n,date:s,view:b}),onClick:m?function(e){return m(s,e)}:void 0,onFocus:h?function(){return h(s)}:void 0,onMouseOver:h?function(){return h(s)}:void 0,style:p,type:"button"},o?t.createElement("abbr",{"aria-label":o(i,s)},r):r,v)}var Gf=function(){return Gf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gf.apply(this,arguments)},Kf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Xf="react-calendar__century-view__decades__decade";function $f(e){var n=e.classes,r=void 0===n?[]:n,a=e.currentCentury,s=e.formatYear,o=void 0===s?gf:s,i=Kf(e,["classes","currentCentury","formatYear"]),l=i.date,c=i.locale,d=[];return r&&d.push.apply(d,r),Xf&&d.push(Xf),Ex(l).getFullYear()!==a&&d.push("".concat(Xf,"--neighboringCentury")),t.createElement(Yf,Gf({},i,{classes:d,maxDateTransform:Fx,minDateTransform:Ox,view:"century"}),Tf(c,o,l))}var Qf=function(){return Qf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qf.apply(this,arguments)},Jf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Zf(e){var n=e.activeStartDate,r=e.hover,a=e.showNeighboringCentury,s=e.value,o=e.valueType,i=Jf(e,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=Sx(Ex(n)),c=l+(a?119:99);return t.createElement(Wf,{className:"react-calendar__century-view__decades",dateTransform:Ox,dateType:"decade",end:c,hover:r,renderTile:function(e){var r=e.date,a=Jf(e,["date"]);return t.createElement($f,Qf({key:r.getTime()},i,a,{activeStartDate:n,currentCentury:l,date:r}))},start:l,step:10,value:s,valueType:o})}var eg=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},tg=Object.values(af),ng=Object.values(sf),rg=["century","decade","year","month"],ag=mx.oneOf(eg(eg([],tg,!0),ng,!0)),sg=mx.oneOfType([mx.string,mx.arrayOf(mx.string)]),og=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var a=e.maxDate;return a&&r>a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, minDate cannot be larger than maxDate.")):null},ig=function(e,t,n){var r=e[t];if(!r)return null;if(!(r instanceof Date))return new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, expected instance of `Date`."));var a=e.minDate;return a&&r<a?new Error("Invalid prop `".concat(t,"` of type `").concat(typeof r,"` supplied to `").concat(n,"`, maxDate cannot be smaller than minDate.")):null},lg=mx.oneOfType([mx.func,mx.exact({current:mx.any})]),cg=mx.arrayOf(mx.oneOfType([mx.instanceOf(Date),mx.oneOf([null])]).isRequired),dg=mx.oneOfType([mx.instanceOf(Date),mx.oneOf([null]),cg]),ug=(mx.arrayOf(mx.oneOf(rg)),function(e,t,n){var r=e[t];return void 0===r||"string"===typeof r&&-1!==rg.indexOf(r)?null:new Error("Invalid prop `".concat(t,"` of value `").concat(r,"` supplied to `").concat(n,"`, expected one of [").concat(rg.map((function(e){return'"'.concat(e,'"')})).join(", "),"]."))});ug.isRequired=function(e,t,n,r,a){var s=e[t];return s?ug(e,t,n):new Error("The prop `".concat(t,"` is marked as required in `").concat(n,"`, but its value is `").concat(s,"`."))};var mg={activeStartDate:mx.instanceOf(Date).isRequired,hover:mx.instanceOf(Date),locale:mx.string,maxDate:ig,minDate:og,onClick:mx.func,onMouseOver:mx.func,tileClassName:mx.oneOfType([mx.func,sg]),tileContent:mx.oneOfType([mx.func,mx.node]),value:dg,valueType:mx.oneOf(["century","decade","year","month","day"]).isRequired},hg=(mx.instanceOf(Date).isRequired,mx.arrayOf(mx.string.isRequired).isRequired,mx.instanceOf(Date).isRequired,mx.string,mx.func,mx.func,mx.objectOf(mx.oneOfType([mx.string,mx.number])),mx.oneOfType([mx.func,sg]),mx.oneOfType([mx.func,mx.node]),mx.func,function(){return hg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},hg.apply(this,arguments)}),pg=function(e){return t.createElement("div",{className:"react-calendar__century-view"},t.createElement(Zf,hg({},e)))};pg.propTypes=hg(hg({},mg),{showNeighboringCentury:mx.bool});const xg=pg;var fg=function(){return fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fg.apply(this,arguments)},gg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},bg="react-calendar__decade-view__years__year";function yg(e){var n=e.classes,r=void 0===n?[]:n,a=e.currentDecade,s=e.formatYear,o=void 0===s?gf:s,i=gg(e,["classes","currentDecade","formatYear"]),l=i.date,c=i.locale,d=[];return r&&d.push.apply(d,r),bg&&d.push(bg),Ox(l).getFullYear()!==a&&d.push("".concat(bg,"--neighboringDecade")),t.createElement(Yf,fg({},i,{classes:d,maxDateTransform:zx,minDateTransform:Bx,view:"decade"}),o(c,l))}var vg=function(){return vg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vg.apply(this,arguments)},Ng=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function jg(e){var n=e.activeStartDate,r=e.hover,a=e.showNeighboringDecade,s=e.value,o=e.valueType,i=Ng(e,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=Sx(Ox(n)),c=l+(a?11:9);return t.createElement(Wf,{className:"react-calendar__decade-view__years",dateTransform:Bx,dateType:"year",end:c,hover:r,renderTile:function(e){var r=e.date,a=Ng(e,["date"]);return t.createElement(yg,vg({key:r.getTime()},i,a,{activeStartDate:n,currentDecade:l,date:r}))},start:l,value:s,valueType:o})}var wg=function(){return wg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},wg.apply(this,arguments)},Sg=function(e){return t.createElement("div",{className:"react-calendar__decade-view"},t.createElement(jg,wg({},e)))};Sg.propTypes=wg(wg({},mg),{showNeighboringDecade:mx.bool});const Cg=Sg;var kg=function(){return kg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},kg.apply(this,arguments)},Eg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Tg=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function Ag(e){var n=e.classes,r=void 0===n?[]:n,a=e.formatMonth,s=void 0===a?hf:a,o=e.formatMonthYear,i=void 0===o?pf:o,l=Eg(e,["classes","formatMonth","formatMonthYear"]),c=l.date,d=l.locale;return t.createElement(Yf,kg({},l,{classes:Tg(Tg([],r,!0),["react-calendar__year-view__months__month"],!1),formatAbbr:i,maxDateTransform:Xx,minDateTransform:Yx,view:"year"}),s(d,c))}var Ig=function(){return Ig=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ig.apply(this,arguments)},Dg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Pg(e){var n=e.activeStartDate,r=e.hover,a=e.value,s=e.valueType,o=Dg(e,["activeStartDate","hover","value","valueType"]),i=Sx(n);return t.createElement(Wf,{className:"react-calendar__year-view__months",dateTransform:function(e){var t=new Date;return t.setFullYear(i,e,1),Yx(t)},dateType:"month",end:11,hover:r,renderTile:function(e){var r=e.date,a=Dg(e,["date"]);return t.createElement(Ag,Ig({key:r.getTime()},o,a,{activeStartDate:n,date:r}))},start:0,value:a,valueType:s})}var Og=function(){return Og=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Og.apply(this,arguments)},Lg=function(e){return t.createElement("div",{className:"react-calendar__year-view"},t.createElement(Pg,Og({},e)))};Lg.propTypes=Og({},mg);const Rg=Lg;var Fg=function(){return Fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Fg.apply(this,arguments)},_g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Mg="react-calendar__month-view__days__day";function Bg(e){var n=e.calendarType,r=e.classes,a=void 0===r?[]:r,s=e.currentMonthIndex,o=e.formatDay,i=void 0===o?uf:o,l=e.formatLongDate,c=void 0===l?mf:l,d=_g(e,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=qf(n),m=d.date,h=d.locale,p=[];return a&&p.push.apply(p,a),Mg&&p.push(Mg),Af(m,u)&&p.push("".concat(Mg,"--weekend")),m.getMonth()!==s&&p.push("".concat(Mg,"--neighboringMonth")),t.createElement(Yf,Fg({},d,{classes:p,formatAbbr:c,maxDateTransform:tf,minDateTransform:Zx,view:"month"}),i(h,m))}var Ug=function(){return Ug=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ug.apply(this,arguments)},Hg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function zg(e){var n=e.activeStartDate,r=e.calendarType,a=e.hover,s=e.showFixedNumberOfWeeks,o=e.showNeighboringMonth,i=e.value,l=e.valueType,c=Hg(e,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),d=qf(r),u=Sx(n),m=Cx(n),h=s||o,p=Nf(n,d),x=h?0:p,f=1+(h?-p:0),g=function(){if(s)return f+42-1;var e=rf(n);if(o){var t=new Date;return t.setFullYear(u,m,e),t.setHours(0,0,0,0),e+(7-Nf(t,d)-1)}return e}();return t.createElement(Wf,{className:"react-calendar__month-view__days",count:7,dateTransform:function(e){var t=new Date;return t.setFullYear(u,m,e),Zx(t)},dateType:"day",hover:a,end:g,renderTile:function(e){var a=e.date,s=Hg(e,["date"]);return t.createElement(Bg,Ug({key:a.getTime()},c,s,{activeStartDate:n,calendarType:r,currentMonthIndex:m,date:a}))},offset:x,start:f,value:i,valueType:l})}var Vg="react-calendar__month-view__weekdays",qg="".concat(Vg,"__weekday");function Wg(e){for(var n,r=e.calendarType,a=e.formatShortWeekday,s=void 0===a?xf:a,o=e.formatWeekday,i=void 0===o?ff:o,l=e.locale,c=e.onMouseLeave,d=qf(r),u=Yx(new Date),m=Sx(u),h=Cx(u),p=[],x=1;x<=7;x+=1){var f=new Date(m,h,x-Nf(u,d)),g=i(l,f);p.push(t.createElement("div",{key:x,className:Np(qg,(n=f,n.getDay()===(new Date).getDay()&&"".concat(qg,"--current")),Af(f,d)&&"".concat(qg,"--weekend"))},t.createElement("abbr",{"aria-label":g,title:g},s(l,f).replace(".",""))))}return t.createElement(Rf,{className:Vg,count:7,onFocus:c,onMouseOver:c},p)}var Yg=function(){return Yg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yg.apply(this,arguments)},Gg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Kg="react-calendar__tile";function Xg(e){var n=e.onClickWeekNumber,r=e.weekNumber,a=t.createElement("span",null,r);if(n){var s=e.date,o=e.onClickWeekNumber,i=e.weekNumber,l=Gg(e,["date","onClickWeekNumber","weekNumber"]);return t.createElement("button",Yg({},l,{className:Kg,onClick:function(e){return o(i,s,e)},type:"button"}),a)}e.date,e.onClickWeekNumber,e.weekNumber,l=Gg(e,["date","onClickWeekNumber","weekNumber"]);return t.createElement("div",Yg({},l,{className:Kg}),a)}function $g(e){var n=e.activeStartDate,r=e.calendarType,a=e.onClickWeekNumber,s=e.onMouseLeave,o=e.showFixedNumberOfWeeks,i=qf(r),l=function(){if(o)return 6;var e=rf(n)-(7-Nf(n,i));return 1+Math.ceil(e/7)}(),c=function(){for(var e=Sx(n),t=Cx(n),r=kx(n),a=[],s=0;s<l;s+=1)a.push(jf(new Date(e,t,r+7*s),i));return a}(),d=c.map((function(e){return function(e,t){void 0===t&&(t=af.ISO_8601);var n,r=t===af.GREGORY?af.GREGORY:af.ISO_8601,a=jf(e,t),s=Sx(e)+1;do{n=jf(new Date(s,0,r===af.ISO_8601?4:1),t),s-=1}while(e<n);return Math.round((a.getTime()-n.getTime())/6048e5)+1}(e,i)}));return t.createElement(Rf,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:s,onMouseOver:s,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},d.map((function(e,n){var r=c[n];if(!r)throw new Error("date is not defined");return t.createElement(Xg,{key:e,date:r,onClickWeekNumber:a,weekNumber:e})})))}var Qg=function(){return Qg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qg.apply(this,arguments)},Jg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var Zg=function(e){var n=e.activeStartDate,r=e.locale,a=e.onMouseLeave,s=e.showFixedNumberOfWeeks,o=e.calendarType,i=void 0===o?function(e){if(e)for(var t=0,n=Object.entries(of);t<n.length;t++){var r=n[t],a=r[0];if(r[1].includes(e))return a}return af.ISO_8601}(r):o,l=e.formatShortWeekday,c=e.formatWeekday,d=e.onClickWeekNumber,u=e.showWeekNumbers,m=Jg(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);var h="react-calendar__month-view";return t.createElement("div",{className:Np(h,u?"".concat(h,"--weekNumbers"):"")},t.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},u?t.createElement($g,{activeStartDate:n,calendarType:i,onClickWeekNumber:d,onMouseLeave:a,showFixedNumberOfWeeks:s}):null,t.createElement("div",{style:{flexGrow:1,width:"100%"}},t.createElement(Wg,{calendarType:i,formatShortWeekday:l,formatWeekday:c,locale:r,onMouseLeave:a}),t.createElement(zg,Qg({calendarType:i},m)))))};Zg.propTypes=Qg(Qg({},mg),{calendarType:ag,formatDay:mx.func,formatLongDate:mx.func,formatShortWeekday:mx.func,formatWeekday:mx.func,onClickWeekNumber:mx.func,onMouseLeave:mx.func,showFixedNumberOfWeeks:mx.bool,showNeighboringMonth:mx.bool,showWeekNumbers:mx.bool});const eb=Zg;var tb=function(){return tb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},tb.apply(this,arguments)},nb="react-calendar",rb=["century","decade","year","month"],ab=["decade","year","month","day"],sb=new Date;sb.setFullYear(1,0,1),sb.setHours(0,0,0,0);var ob=new Date(864e13);function ib(e){return e instanceof Date?e:new Date(e)}function lb(e,t){return rb.slice(rb.indexOf(e),rb.indexOf(t)+1)}function cb(e,t,n){return e&&function(e,t,n){return-1!==lb(t,n).indexOf(e)}(e,t,n)?e:n}function db(e){var t=rb.indexOf(e);return ab[t]}function ub(e,t){var n=e.value,r=e.minDate,a=e.maxDate,s=e.maxDetail,o=function(e,t){var n=Array.isArray(e)?e[t]:e;if(!n)return null;var r=ib(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(e));return r}(n,t);if(!o)return null;var i=db(s);return function(e,t,n){return t&&t>e?t:n&&n<e?n:e}(function(){switch(t){case 0:return wf(i,o);case 1:return Cf(i,o);default:throw new Error("Invalid index value: ".concat(t))}}(),r,a)}var mb=function(e){return ub(e,0)},hb=function(e){return ub(e,1)},pb=function(e){return[mb,hb].map((function(t){return t(e)}))};function xb(e){var t=e.maxDate,n=e.maxDetail,r=e.minDate,a=e.minDetail,s=e.value;return wf(cb(e.view,a,n),mb({value:s,minDate:r,maxDate:t,maxDetail:n})||new Date)}function fb(e){return e&&(!Array.isArray(e)||1===e.length)}function gb(e,t){return e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()}var bb,yb=(0,t.forwardRef)((function(e,n){var r=e.activeStartDate,a=e.allowPartialRange,s=e.calendarType,o=e.className,i=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,d=e.formatDay,u=e.formatLongDate,m=e.formatMonth,h=e.formatMonthYear,p=e.formatShortWeekday,x=e.formatWeekday,f=e.formatYear,g=e.goToRangeStartOnSelect,b=void 0===g||g,y=e.inputRef,v=e.locale,N=e.maxDate,j=void 0===N?ob:N,w=e.maxDetail,S=void 0===w?"month":w,C=e.minDate,k=void 0===C?sb:C,E=e.minDetail,T=void 0===E?"century":E,A=e.navigationAriaLabel,I=e.navigationAriaLive,D=e.navigationLabel,P=e.next2AriaLabel,O=e.next2Label,L=e.nextAriaLabel,R=e.nextLabel,F=e.onActiveStartDateChange,_=e.onChange,M=e.onClickDay,B=e.onClickDecade,U=e.onClickMonth,H=e.onClickWeekNumber,z=e.onClickYear,V=e.onDrillDown,q=e.onDrillUp,W=e.onViewChange,Y=e.prev2AriaLabel,G=e.prev2Label,K=e.prevAriaLabel,X=e.prevLabel,$=e.returnValue,Q=void 0===$?"start":$,J=e.selectRange,Z=e.showDoubleView,ee=e.showFixedNumberOfWeeks,te=e.showNavigation,ne=void 0===te||te,re=e.showNeighboringCentury,ae=e.showNeighboringDecade,se=e.showNeighboringMonth,oe=void 0===se||se,ie=e.showWeekNumbers,le=e.tileClassName,ce=e.tileContent,de=e.tileDisabled,ue=e.value,me=e.view,he=(0,t.useState)(i),pe=he[0],xe=he[1],fe=(0,t.useState)(null),ge=fe[0],be=fe[1],ye=(0,t.useState)(Array.isArray(l)?l.map((function(e){return null!==e?ib(e):null})):null!==l&&void 0!==l?ib(l):null),ve=ye[0],Ne=ye[1],je=(0,t.useState)(c),we=je[0],Se=je[1],Ce=r||pe||function(e){var t=e.activeStartDate,n=e.defaultActiveStartDate,r=e.defaultValue,a=e.defaultView,s=e.maxDate,o=e.maxDetail,i=e.minDate,l=e.minDetail,c=e.value,d=e.view,u=cb(d,l,o),m=t||n;return m?wf(u,m):xb({maxDate:s,maxDetail:o,minDate:i,minDetail:l,value:c||r,view:d||a})}({activeStartDate:r,defaultActiveStartDate:i,defaultValue:l,defaultView:c,maxDate:j,maxDetail:S,minDate:k,minDetail:T,value:ue,view:me}),ke=function(){var e=J&&fb(ve)?ve:void 0!==ue?ue:ve;return e?Array.isArray(e)?e.map((function(e){return null!==e?ib(e):null})):null!==e?ib(e):null:null}(),Ee=db(S),Te=cb(me||we,T,S),Ae=lb(T,S),Ie=J?ge:null,De=Ae.indexOf(Te)<Ae.length-1,Pe=Ae.indexOf(Te)>0,Oe=(0,t.useCallback)((function(e){return function(){switch(Q){case"start":return mb;case"end":return hb;case"range":return pb;default:throw new Error("Invalid returnValue.")}}()({maxDate:j,maxDetail:S,minDate:k,value:e})}),[j,S,k,Q]),Le=(0,t.useCallback)((function(e,t){xe(e);var n={action:t,activeStartDate:e,value:ke,view:Te};F&&!gb(Ce,e)&&F(n)}),[Ce,F,ke,Te]),Re=(0,t.useCallback)((function(e,t){var n=function(){switch(Te){case"century":return B;case"decade":return z;case"year":return U;case"month":return M;default:throw new Error("Invalid view: ".concat(Te,"."))}}();n&&n(e,t)}),[M,B,U,z,Te]),Fe=(0,t.useCallback)((function(e,t){if(De){Re(e,t);var n=Ae[Ae.indexOf(Te)+1];if(!n)throw new Error("Attempted to drill down from the lowest view.");xe(e),Se(n);var r={action:"drillDown",activeStartDate:e,value:ke,view:n};F&&!gb(Ce,e)&&F(r),W&&Te!==n&&W(r),V&&V(r)}}),[Ce,De,F,Re,V,W,ke,Te,Ae]),_e=(0,t.useCallback)((function(){if(Pe){var e=Ae[Ae.indexOf(Te)-1];if(!e)throw new Error("Attempted to drill up from the highest view.");var t=wf(e,Ce);xe(t),Se(e);var n={action:"drillUp",activeStartDate:t,value:ke,view:e};F&&!gb(Ce,t)&&F(n),W&&Te!==e&&W(n),q&&q(n)}}),[Ce,Pe,F,q,W,ke,Te,Ae]),Me=(0,t.useCallback)((function(e,t){var n=ke;Re(e,t);var r,s=J&&!fb(n);if(J)if(s)r=wf(Ee,e);else{if(!n)throw new Error("previousValue is required");if(Array.isArray(n))throw new Error("previousValue must not be an array");r=function(e,t,n){var r=[t,n].sort((function(e,t){return e.getTime()-t.getTime()}));return[wf(e,r[0]),Cf(e,r[1])]}(Ee,n,e)}else r=Oe(e);var o=!J||s||b?xb({maxDate:j,maxDetail:S,minDate:k,minDetail:T,value:r,view:Te}):null;t.persist(),xe(o),Ne(r);var i={action:"onChange",activeStartDate:o,value:r,view:Te};if(F&&!gb(Ce,o)&&F(i),_)if(J)if(fb(r)){if(a){if(Array.isArray(r))throw new Error("value must not be an array");_([r||null,null],t)}}else _(r||null,t);else _(r||null,t)}),[Ce,a,Oe,b,j,S,k,T,F,_,Re,J,ke,Ee,Te]);function Be(e){be(e)}function Ue(){be(null)}function He(e){var n={activeStartDate:e?Sf(Te,Ce):wf(Te,Ce),hover:Ie,locale:v,maxDate:j,minDate:k,onClick:De?Fe:Me,onMouseOver:J?Be:void 0,tileClassName:le,tileContent:ce,tileDisabled:de,value:ke,valueType:Ee};switch(Te){case"century":return t.createElement(xg,tb({formatYear:f,showNeighboringCentury:re},n));case"decade":return t.createElement(Cg,tb({formatYear:f,showNeighboringDecade:ae},n));case"year":return t.createElement(Rg,tb({formatMonth:m,formatMonthYear:h},n));case"month":return t.createElement(eb,tb({calendarType:s,formatDay:d,formatLongDate:u,formatShortWeekday:p,formatWeekday:x,onClickWeekNumber:H,onMouseLeave:J?Ue:void 0,showFixedNumberOfWeeks:"undefined"!==typeof ee?ee:Z,showNeighboringMonth:oe,showWeekNumbers:ie},n));default:throw new Error("Invalid view: ".concat(Te,"."))}}(0,t.useImperativeHandle)(n,(function(){return{activeStartDate:Ce,drillDown:Fe,drillUp:_e,onChange:Me,setActiveStartDate:Le,value:ke,view:Te}}),[Ce,Fe,_e,Me,Le,ke,Te]);var ze=Array.isArray(ke)?ke:[ke];return t.createElement("div",{className:Np(nb,J&&1===ze.length&&"".concat(nb,"--selectRange"),Z&&"".concat(nb,"--doubleView"),o),ref:y},ne?t.createElement(Df,{activeStartDate:Ce,drillUp:_e,formatMonthYear:h,formatYear:f,locale:v,maxDate:j,minDate:k,navigationAriaLabel:A,navigationAriaLive:I,navigationLabel:D,next2AriaLabel:P,next2Label:O,nextAriaLabel:L,nextLabel:R,prev2AriaLabel:Y,prev2Label:G,prevAriaLabel:K,prevLabel:X,setActiveStartDate:Le,showDoubleView:Z,view:Te,views:Ae}):null,t.createElement("div",{className:"".concat(nb,"__viewContainer"),onBlur:J?Ue:void 0,onMouseLeave:J?Ue:void 0},He(),Z?He(!0):null))})),vb=mx.instanceOf(Date),Nb=mx.oneOfType([mx.string,mx.instanceOf(Date)]),jb=mx.oneOfType([Nb,(bb=Nb,mx.arrayOf(bb))]);yb.propTypes={activeStartDate:vb,allowPartialRange:mx.bool,calendarType:ag,className:sg,defaultActiveStartDate:vb,defaultValue:jb,defaultView:ug,formatDay:mx.func,formatLongDate:mx.func,formatMonth:mx.func,formatMonthYear:mx.func,formatShortWeekday:mx.func,formatWeekday:mx.func,formatYear:mx.func,goToRangeStartOnSelect:mx.bool,inputRef:lg,locale:mx.string,maxDate:ig,maxDetail:mx.oneOf(rb),minDate:og,minDetail:mx.oneOf(rb),navigationAriaLabel:mx.string,navigationAriaLive:mx.oneOf(["off","polite","assertive"]),navigationLabel:mx.func,next2AriaLabel:mx.string,next2Label:mx.node,nextAriaLabel:mx.string,nextLabel:mx.node,onActiveStartDateChange:mx.func,onChange:mx.func,onClickDay:mx.func,onClickDecade:mx.func,onClickMonth:mx.func,onClickWeekNumber:mx.func,onClickYear:mx.func,onDrillDown:mx.func,onDrillUp:mx.func,onViewChange:mx.func,prev2AriaLabel:mx.string,prev2Label:mx.node,prevAriaLabel:mx.string,prevLabel:mx.node,returnValue:mx.oneOf(["start","end","range"]),selectRange:mx.bool,showDoubleView:mx.bool,showFixedNumberOfWeeks:mx.bool,showNavigation:mx.bool,showNeighboringCentury:mx.bool,showNeighboringDecade:mx.bool,showNeighboringMonth:mx.bool,showWeekNumbers:mx.bool,tileClassName:mx.oneOfType([mx.func,sg]),tileContent:mx.oneOfType([mx.func,mx.node]),tileDisabled:mx.func,value:jb,view:ug};const wb=yb,Sb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Cb(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const kb={date:Cb({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Cb({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Cb({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Eb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Tb(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const Ab={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Tb({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Tb({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Tb({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Tb({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Tb({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Ib(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(i,(e=>e.test(o))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(i,(e=>e.test(o)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}const Db={ordinalNumber:(Pb={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Pb.matchPattern);if(!n)return null;const r=n[0],a=e.match(Pb.parsePattern);if(!a)return null;let s=Pb.valueCallback?Pb.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:Ib({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ib({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ib({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ib({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ib({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Pb;const Ob={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=Sb[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:kb,formatRelative:(e,t,n,r)=>Eb[e],localize:Ab,match:Db,options:{weekStartsOn:0,firstWeekContainsDate:1}},Lb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Rb=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Fb={p:Rb,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return Lb(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Lb(r,t)).replace("{{time}}",Rb(a,t))}},_b=/^D+$/,Mb=/^Y+$/,Bb=["D","DD","YY","YYYY"];function Ub(e){return _b.test(e)}function Hb(e){return Mb.test(e)}function zb(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),Bb.includes(e))throw new RangeError(r)}Math.pow(10,8);const Vb=6048e5,qb=Symbol.for("constructDateFrom");function Wb(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&qb in e?e[qb](t):e instanceof Date?new e.constructor(t):new Date(t)}let Yb={};function Gb(){return Yb}function Kb(){return Object.assign({},Gb())}function Xb(e,t){return Wb(t||e,e)}function $b(e,t){const n=function(e){var t;return"function"===typeof e&&(null===(t=e.prototype)||void 0===t?void 0:t.constructor)===e}(t)?new t(0):Wb(t,0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}class Qb{constructor(){$(this,"subPriority",0)}validate(e,t){return!0}}class Jb extends Qb{constructor(e,t,n,r,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Zb extends Qb{constructor(e,t){super(),$(this,"priority",10),$(this,"subPriority",-1),this.context=e||(e=>Wb(t,e))}set(e,t){return t.timestampIsSet?e:Wb(e,$b(e,this.context))}}class ey{run(e,t,n,r){const a=this.parse(e,t,n,r);return a?{setter:new Jb(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}const ty=/^(1[0-2]|0?\d)/,ny=/^(3[0-1]|[0-2]?\d)/,ry=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,ay=/^(5[0-3]|[0-4]?\d)/,sy=/^(2[0-3]|[0-1]?\d)/,oy=/^(2[0-4]|[0-1]?\d)/,iy=/^(1[0-1]|0?\d)/,ly=/^(1[0-2]|0?\d)/,cy=/^[0-5]?\d/,dy=/^[0-5]?\d/,uy=/^\d/,my=/^\d{1,2}/,hy=/^\d{1,3}/,py=/^\d{1,4}/,xy=/^-?\d+/,fy=/^-?\d/,gy=/^-?\d{1,2}/,by=/^-?\d{1,3}/,yy=/^-?\d{1,4}/,vy=/^([+-])(\d{2})(\d{2})?|Z/,Ny=/^([+-])(\d{2})(\d{2})|Z/,jy=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,wy=/^([+-])(\d{2}):(\d{2})|Z/,Sy=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Cy(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ky(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Ey(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};return{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}}function Ty(e){return ky(xy,e)}function Ay(e,t){switch(e){case 1:return ky(uy,t);case 2:return ky(my,t);case 3:return ky(hy,t);case 4:return ky(py,t);default:return ky(new RegExp("^\\d{1,"+e+"}"),t)}}function Iy(e,t){switch(e){case 1:return ky(fy,t);case 2:return ky(gy,t);case 3:return ky(by,t);case 4:return ky(yy,t);default:return ky(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Dy(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Py(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const t=r+50;a=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?a:1-a}function Oy(e){return e%400===0||e%4===0&&e%100!==0}function Ly(e,t){var n,r,a,s,o,i;const l=Gb(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(i=l.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==n?n:0,d=Xb(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),m=(u<c?7:0)+u-c;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function Ry(e,t){var n,r,a,s,o,i;const l=Xb(e,null===t||void 0===t?void 0:t.in),c=l.getFullYear(),d=Gb(),u=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==r?r:null===(i=d.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==n?n:1,m=Wb((null===t||void 0===t?void 0:t.in)||e,0);m.setFullYear(c+1,0,u),m.setHours(0,0,0,0);const h=Ly(m,t),p=Wb((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,u),p.setHours(0,0,0,0);const x=Ly(p,t);return+l>=+h?c+1:+l>=+x?c:c-1}function Fy(e,t){return Ly(e,J(J({},t),{},{weekStartsOn:1}))}function _y(e,t){var n,r,a,s,o,i;const l=Gb(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(i=l.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==n?n:1,d=Ry(e,t),u=Wb((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return Ly(u,t)}function My(e,t){const n=Xb(e,null===t||void 0===t?void 0:t.in),r=+Ly(n,t)-+_y(n,t);return Math.round(r/Vb)+1}function By(e,t,n){const r=Xb(e,null===n||void 0===n?void 0:n.in),a=My(r,n)-t;return r.setDate(r.getDate()-7*a),Xb(r,null===n||void 0===n?void 0:n.in)}function Uy(e,t){const n=Xb(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),a=Wb(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=Fy(a),o=Wb(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=Fy(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function Hy(e,t){const n=Uy(e,t),r=Wb((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Fy(r)}function zy(e,t){const n=Xb(e,null===t||void 0===t?void 0:t.in),r=+Fy(n)-+Hy(n);return Math.round(r/Vb)+1}function Vy(e,t,n){const r=Xb(e,null===n||void 0===n?void 0:n.in),a=zy(r,n)-t;return r.setDate(r.getDate()-7*a),r}const qy=[31,28,31,30,31,30,31,31,30,31,30,31],Wy=[31,29,31,30,31,30,31,31,30,31,30,31];function Yy(e,t,n){const r=Xb(e,null===n||void 0===n?void 0:n.in);return isNaN(t)?Wb((null===n||void 0===n?void 0:n.in)||e,NaN):t?(r.setDate(r.getDate()+t),r):r}function Gy(e,t,n){var r,a,s,o,i,l;const c=Gb(),d=null!==(r=null!==(a=null!==(s=null!==(o=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==o?o:null===n||void 0===n||null===(i=n.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:c.weekStartsOn)&&void 0!==a?a:null===(l=c.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,u=Xb(e,null===n||void 0===n?void 0:n.in),m=u.getDay(),h=7-d;return Yy(u,t<0||t>6?t-(m+h)%7:((t%7+7)%7+h)%7-(m+h)%7,n)}function Ky(e,t){const n=Xb(e,null===t||void 0===t?void 0:t.in).getDay();return 0===n?7:n}function Xy(e,t,n){const r=Xb(e,null===n||void 0===n?void 0:n.in);return Yy(r,t-Ky(r,n),n)}function $y(e){const t=Xb(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}const Qy={G:new class extends ey{constructor(){super(...arguments),$(this,"priority",140),$(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},y:new class extends ey{constructor(){super(...arguments),$(this,"priority",130),$(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Cy(Ay(4,e),r);case"yo":return Cy(n.ordinalNumber(e,{unit:"year"}),r);default:return Cy(Ay(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=Py(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const a="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}},Y:new class extends ey{constructor(){super(...arguments),$(this,"priority",130),$(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Cy(Ay(4,e),r);case"Yo":return Cy(n.ordinalNumber(e,{unit:"year"}),r);default:return Cy(Ay(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const a=Ry(e,r);if(n.isTwoDigitYear){const t=Py(n.year,a);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Ly(e,r)}const s="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(s,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Ly(e,r)}},R:new class extends ey{constructor(){super(...arguments),$(this,"priority",130),$(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return Iy("R"===t?4:t.length,e)}set(e,t,n){const r=Wb(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Fy(r)}},u:new class extends ey{constructor(){super(...arguments),$(this,"priority",130),$(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return Iy("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}},Q:new class extends ey{constructor(){super(...arguments),$(this,"priority",120),$(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"Q":case"QQ":return Ay(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},q:new class extends ey{constructor(){super(...arguments),$(this,"priority",120),$(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"q":case"qq":return Ay(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}},M:new class extends ey{constructor(){super(...arguments),$(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),$(this,"priority",110)}parse(e,t,n){const r=e=>e-1;switch(t){case"M":return Cy(ky(ty,e),r);case"MM":return Cy(Ay(2,e),r);case"Mo":return Cy(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends ey{constructor(){super(...arguments),$(this,"priority",110),$(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,n){const r=e=>e-1;switch(t){case"L":return Cy(ky(ty,e),r);case"LL":return Cy(Ay(2,e),r);case"Lo":return Cy(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},w:new class extends ey{constructor(){super(...arguments),$(this,"priority",100),$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,n){switch(t){case"w":return ky(ay,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return Ay(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return Ly(By(e,n,r),r)}},I:new class extends ey{constructor(){super(...arguments),$(this,"priority",100),$(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,n){switch(t){case"I":return ky(ay,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return Ay(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Fy(Vy(e,n))}},d:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"subPriority",1),$(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"d":return ky(ny,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return Ay(t.length,e)}}validate(e,t){const n=Oy(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=Wy[r]:t>=1&&t<=qy[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}},D:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"subpriority",1),$(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,n){switch(t){case"D":case"DD":return ky(ry,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return Ay(t.length,e)}}validate(e,t){return Oy(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}},E:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Gy(e,n,r)).setHours(0,0,0,0),e}},e:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Cy(Ay(t.length,e),a);case"eo":return Cy(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Gy(e,n,r)).setHours(0,0,0,0),e}},c:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Cy(Ay(t.length,e),a);case"co":return Cy(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=Gy(e,n,r)).setHours(0,0,0,0),e}},i:new class extends ey{constructor(){super(...arguments),$(this,"priority",90),$(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return Ay(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Cy(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Cy(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Cy(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return Cy(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=Xy(e,n)).setHours(0,0,0,0),e}},a:new class extends ey{constructor(){super(...arguments),$(this,"priority",80),$(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Dy(n),0,0,0),e}},b:new class extends ey{constructor(){super(...arguments),$(this,"priority",80),$(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Dy(n),0,0,0),e}},B:new class extends ey{constructor(){super(...arguments),$(this,"priority",80),$(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(Dy(n),0,0,0),e}},h:new class extends ey{constructor(){super(...arguments),$(this,"priority",70),$(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,n){switch(t){case"h":return ky(ly,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return Ay(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends ey{constructor(){super(...arguments),$(this,"priority",70),$(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,n){switch(t){case"H":return ky(sy,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return Ay(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}},K:new class extends ey{constructor(){super(...arguments),$(this,"priority",70),$(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,n){switch(t){case"K":return ky(iy,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return Ay(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}},k:new class extends ey{constructor(){super(...arguments),$(this,"priority",70),$(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,n){switch(t){case"k":return ky(oy,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return Ay(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}},m:new class extends ey{constructor(){super(...arguments),$(this,"priority",60),$(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"m":return ky(cy,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return Ay(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}},s:new class extends ey{constructor(){super(...arguments),$(this,"priority",50),$(this,"incompatibleTokens",["t","T"])}parse(e,t,n){switch(t){case"s":return ky(dy,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return Ay(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}},S:new class extends ey{constructor(){super(...arguments),$(this,"priority",30),$(this,"incompatibleTokens",["t","T"])}parse(e,t){return Cy(Ay(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}},X:new class extends ey{constructor(){super(...arguments),$(this,"priority",10),$(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return Ey(vy,e);case"XX":return Ey(Ny,e);case"XXXX":return Ey(jy,e);case"XXXXX":return Ey(Sy,e);default:return Ey(wy,e)}}set(e,t,n){return t.timestampIsSet?e:Wb(e,e.getTime()-$y(e)-n)}},x:new class extends ey{constructor(){super(...arguments),$(this,"priority",10),$(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return Ey(vy,e);case"xx":return Ey(Ny,e);case"xxxx":return Ey(jy,e);case"xxxxx":return Ey(Sy,e);default:return Ey(wy,e)}}set(e,t,n){return t.timestampIsSet?e:Wb(e,e.getTime()-$y(e)-n)}},t:new class extends ey{constructor(){super(...arguments),$(this,"priority",40),$(this,"incompatibleTokens","*")}parse(e){return Ty(e)}set(e,t,n){return[Wb(e,1e3*n),{timestampIsSet:!0}]}},T:new class extends ey{constructor(){super(...arguments),$(this,"priority",20),$(this,"incompatibleTokens","*")}parse(e){return Ty(e)}set(e,t,n){return[Wb(e,n),{timestampIsSet:!0}]}}},Jy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ev=/^'([^]*?)'?$/,tv=/''/g,nv=/\S/,rv=/[a-zA-Z]/;function av(e,t,n,r){var a,s,o,i,l,c,d,u,m,h,p,x,f,g;const b=()=>Wb((null===r||void 0===r?void 0:r.in)||n,NaN),y=Kb(),v=null!==(a=null!==(s=null===r||void 0===r?void 0:r.locale)&&void 0!==s?s:y.locale)&&void 0!==a?a:Ob,N=null!==(o=null!==(i=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(d=r.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:y.firstWeekContainsDate)&&void 0!==i?i:null===(u=y.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==o?o:1,j=null!==(m=null!==(h=null!==(p=null!==(x=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==x?x:null===r||void 0===r||null===(f=r.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==p?p:y.weekStartsOn)&&void 0!==h?h:null===(g=y.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:0;if(!t)return e?b():Xb(n,null===r||void 0===r?void 0:r.in);const w={firstWeekContainsDate:N,weekStartsOn:j,locale:v},S=[new Zb(null===r||void 0===r?void 0:r.in,n)],C=t.match(Zy).map((e=>{const t=e[0];if(t in Fb){return(0,Fb[t])(e,v.formatLong)}return e})).join("").match(Jy),k=[];for(let I of C){null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Hb(I)||zb(I,t,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!Ub(I)||zb(I,t,e);const n=I[0],a=Qy[n];if(a){const{incompatibleTokens:t}=a;if(Array.isArray(t)){const e=k.find((e=>t.includes(e.token)||e.token===n));if(e)throw new RangeError("The format string mustn't contain `".concat(e.fullToken,"` and `").concat(I,"` at the same time"))}else if("*"===a.incompatibleTokens&&k.length>0)throw new RangeError("The format string mustn't contain `".concat(I,"` and any other token at the same time"));k.push({token:n,fullToken:I});const r=a.run(e,I,v.match,w);if(!r)return b();S.push(r.setter),e=r.rest}else{if(n.match(rv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===I?I="'":"'"===n&&(I=I.match(ev)[1].replace(tv,"'")),0!==e.indexOf(I))return b();e=e.slice(I.length)}}if(e.length>0&&nv.test(e))return b();const E=S.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>S.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let T=Xb(n,null===r||void 0===r?void 0:r.in);if(isNaN(+T))return b();const A={};for(const I of E){if(!I.validate(T,w))return b();const e=I.set(T,A,w);Array.isArray(e)?(T=e[0],Object.assign(A,e[1])):T=e}return T}function sv(e,t){var n,r,a,s,o,i;const l=Gb(),c=null!==(n=null!==(r=null!==(a=null!==(s=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==s?s:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(o=o.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(i=l.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==n?n:0,d=Xb(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),m=6+(u<c?-7:0)-(u-c);return d.setDate(d.getDate()+m),d.setHours(23,59,59,999),d}function ov(e,t,n){const r=+Xb(e,null===n||void 0===n?void 0:n.in),[a,s]=[+Xb(t.start,null===n||void 0===n?void 0:n.in),+Xb(t.end,null===n||void 0===n?void 0:n.in)].sort(((e,t)=>e-t));return r>=a&&r<=s}function iv(e,t){return function(){return e.apply(t,arguments)}}const{toString:lv}=Object.prototype,{getPrototypeOf:cv}=Object,{iterator:dv,toStringTag:uv}=Symbol,mv=(hv=Object.create(null),e=>{const t=lv.call(e);return hv[t]||(hv[t]=t.slice(8,-1).toLowerCase())});var hv;const pv=e=>(e=e.toLowerCase(),t=>mv(t)===e),xv=e=>t=>typeof t===e,{isArray:fv}=Array,gv=xv("undefined");const bv=pv("ArrayBuffer");const yv=xv("string"),vv=xv("function"),Nv=xv("number"),jv=e=>null!==e&&"object"===typeof e,wv=e=>{if("object"!==mv(e))return!1;const t=cv(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(uv in e)&&!(dv in e)},Sv=pv("Date"),Cv=pv("File"),kv=pv("Blob"),Ev=pv("FileList"),Tv=pv("URLSearchParams"),[Av,Iv,Dv,Pv]=["ReadableStream","Request","Response","Headers"].map(pv);function Ov(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),fv(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function Lv(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const Rv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Fv=e=>!gv(e)&&e!==Rv;const _v=(Mv="undefined"!==typeof Uint8Array&&cv(Uint8Array),e=>Mv&&e instanceof Mv);var Mv;const Bv=pv("HTMLFormElement"),Uv=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Hv=pv("RegExp"),zv=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ov(n,((n,a)=>{let s;!1!==(s=t(n,a,e))&&(r[a]=s||n)})),Object.defineProperties(e,r)};const Vv=pv("AsyncFunction"),qv=(Wv="function"===typeof setImmediate,Yv=vv(Rv.postMessage),Wv?setImmediate:Yv?((e,t)=>(Rv.addEventListener("message",(n=>{let{source:r,data:a}=n;r===Rv&&a===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),Rv.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var Wv,Yv;const Gv="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Rv):"undefined"!==typeof process&&process.nextTick||qv,Kv={isArray:fv,isArrayBuffer:bv,isBuffer:function(e){return null!==e&&!gv(e)&&null!==e.constructor&&!gv(e.constructor)&&vv(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||vv(e.append)&&("formdata"===(t=mv(e))||"object"===t&&vv(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&bv(e.buffer),t},isString:yv,isNumber:Nv,isBoolean:e=>!0===e||!1===e,isObject:jv,isPlainObject:wv,isReadableStream:Av,isRequest:Iv,isResponse:Dv,isHeaders:Pv,isUndefined:gv,isDate:Sv,isFile:Cv,isBlob:kv,isRegExp:Hv,isFunction:vv,isStream:e=>jv(e)&&vv(e.pipe),isURLSearchParams:Tv,isTypedArray:_v,isFileList:Ev,forEach:Ov,merge:function e(){const{caseless:t}=Fv(this)&&this||{},n={},r=(r,a)=>{const s=t&&Lv(n,a)||a;wv(n[s])&&wv(r)?n[s]=e(n[s],r):wv(r)?n[s]=e({},r):fv(r)?n[s]=r.slice():n[s]=r};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&Ov(arguments[a],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Ov(t,((t,r)=>{n&&vv(t)?e[r]=iv(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,s,o;const i={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)o=a[s],r&&!r(o,e,t)||i[o]||(t[o]=e[o],i[o]=!0);e=!1!==n&&cv(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:mv,kindOfTest:pv,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(fv(e))return e;let t=e.length;if(!Nv(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[dv]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Bv,hasOwnProperty:Uv,hasOwnProp:Uv,reduceDescriptors:zv,freezeMethods:e=>{zv(e,((t,n)=>{if(vv(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];vv(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return fv(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Lv,global:Rv,isContextDefined:Fv,isSpecCompliantForm:function(e){return!!(e&&vv(e.append)&&"FormData"===e[uv]&&e[dv])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(jv(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=fv(e)?[]:{};return Ov(e,((e,t)=>{const s=n(e,r+1);!gv(s)&&(a[t]=s)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:Vv,isThenable:e=>e&&(jv(e)||vv(e))&&vv(e.then)&&vv(e.catch),setImmediate:qv,asap:Gv,isIterable:e=>null!=e&&vv(e[dv])};function Xv(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}Kv.inherits(Xv,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Kv.toJSONObject(this.config),code:this.code,status:this.status}}});const $v=Xv.prototype,Qv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Qv[e]={value:e}})),Object.defineProperties(Xv,Qv),Object.defineProperty($v,"isAxiosError",{value:!0}),Xv.from=(e,t,n,r,a,s)=>{const o=Object.create($v);return Kv.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Xv.call(o,e.message,t,n,r,a),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Jv=Xv;function Zv(e){return Kv.isPlainObject(e)||Kv.isArray(e)}function eN(e){return Kv.endsWith(e,"[]")?e.slice(0,-2):e}function tN(e,t,n){return e?e.concat(t).map((function(e,t){return e=eN(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const nN=Kv.toFlatObject(Kv,{},null,(function(e){return/^is[A-Z]/.test(e)}));const rN=function(e,t,n){if(!Kv.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Kv.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Kv.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,s=n.dots,o=n.indexes,i=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Kv.isSpecCompliantForm(t);if(!Kv.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Kv.isDate(e))return e.toISOString();if(!i&&Kv.isBlob(e))throw new Jv("Blob is not supported. Use a Buffer instead.");return Kv.isArrayBuffer(e)||Kv.isTypedArray(e)?i&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let i=e;if(e&&!a&&"object"===typeof e)if(Kv.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Kv.isArray(e)&&function(e){return Kv.isArray(e)&&!e.some(Zv)}(e)||(Kv.isFileList(e)||Kv.endsWith(n,"[]"))&&(i=Kv.toArray(e)))return n=eN(n),i.forEach((function(e,r){!Kv.isUndefined(e)&&null!==e&&t.append(!0===o?tN([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!Zv(e)||(t.append(tN(a,n,s),l(e)),!1)}const d=[],u=Object.assign(nN,{defaultVisitor:c,convertValue:l,isVisitable:Zv});if(!Kv.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Kv.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),Kv.forEach(n,(function(n,s){!0===(!(Kv.isUndefined(n)||null===n)&&a.call(t,n,Kv.isString(s)?s.trim():s,r,u))&&e(n,r?r.concat(s):[s])})),d.pop()}}(e),t};function aN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function sN(e,t){this._pairs=[],e&&rN(e,this,t)}const oN=sN.prototype;oN.append=function(e,t){this._pairs.push([e,t])},oN.toString=function(e){const t=e?function(t){return e.call(this,t,aN)}:aN;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const iN=sN;function lN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cN(e,t,n){if(!t)return e;const r=n&&n.encode||lN;Kv.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let s;if(s=a?a(t,n):Kv.isURLSearchParams(t)?t.toString():new iN(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const dN=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Kv.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},uN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mN={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:iN,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},hN="undefined"!==typeof window&&"undefined"!==typeof document,pN="object"===typeof navigator&&navigator||void 0,xN=hN&&(!pN||["ReactNative","NativeScript","NS"].indexOf(pN.product)<0),fN="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gN=hN&&window.location.href||"http://localhost",bN=J(J({},e),mN);const yN=function(e){function t(e,n,r,a){let s=e[a++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),i=a>=e.length;if(s=!s&&Kv.isArray(r)?r.length:s,i)return Kv.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&Kv.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],a)&&Kv.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let s;for(r=0;r<a;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(Kv.isFormData(e)&&Kv.isFunction(e.entries)){const n={};return Kv.forEachEntry(e,((e,r)=>{t(function(e){return Kv.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const vN={transitional:uN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=Kv.isObject(e);a&&Kv.isHTMLForm(e)&&(e=new FormData(e));if(Kv.isFormData(e))return r?JSON.stringify(yN(e)):e;if(Kv.isArrayBuffer(e)||Kv.isBuffer(e)||Kv.isStream(e)||Kv.isFile(e)||Kv.isBlob(e)||Kv.isReadableStream(e))return e;if(Kv.isArrayBufferView(e))return e.buffer;if(Kv.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return rN(e,new bN.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return bN.isNode&&Kv.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Kv.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return rN(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(Kv.isString(e))try{return(t||JSON.parse)(e),Kv.trim(e)}catch(dm){if("SyntaxError"!==dm.name)throw dm}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vN.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Kv.isResponse(e)||Kv.isReadableStream(e))return e;if(e&&Kv.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(dm){if(n){if("SyntaxError"===dm.name)throw Jv.from(dm,Jv.ERR_BAD_RESPONSE,this,null,this.response);throw dm}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bN.classes.FormData,Blob:bN.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Kv.forEach(["delete","get","head","post","put","patch"],(e=>{vN.headers[e]={}}));const NN=vN,jN=Kv.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wN=Symbol("internals");function SN(e){return e&&String(e).trim().toLowerCase()}function CN(e){return!1===e||null==e?e:Kv.isArray(e)?e.map(CN):String(e)}function kN(e,t,n,r,a){return Kv.isFunction(r)?r.call(this,t,n):(a&&(t=n),Kv.isString(t)?Kv.isString(r)?-1!==t.indexOf(r):Kv.isRegExp(r)?r.test(t):void 0:void 0)}class EN{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=SN(t);if(!a)throw new Error("header name must be a non-empty string");const s=Kv.findKey(r,a);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=CN(e))}const s=(e,t)=>Kv.forEach(e,((e,n)=>a(e,n,t)));if(Kv.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(Kv.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&jN[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Kv.isObject(e)&&Kv.isIterable(e)){let n,r,a={};for(const t of e){if(!Kv.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?Kv.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=SN(e)){const n=Kv.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Kv.isFunction(t))return t.call(this,e,n);if(Kv.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=SN(e)){const n=Kv.findKey(this,e);return!(!n||void 0===this[n]||t&&!kN(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=SN(e)){const a=Kv.findKey(n,e);!a||t&&!kN(0,n[a],a,t)||(delete n[a],r=!0)}}return Kv.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!kN(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return Kv.forEach(this,((r,a)=>{const s=Kv.findKey(n,a);if(s)return t[s]=CN(r),void delete t[a];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();o!==a&&delete t[a],t[o]=CN(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Kv.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Kv.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[wN]=this[wN]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=SN(e);t[r]||(!function(e,t){const n=Kv.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return Kv.isArray(e)?e.forEach(r):r(e),this}}EN.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Kv.reduceDescriptors(EN.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Kv.freezeMethods(EN);const TN=EN;function AN(e,t){const n=this||NN,r=t||n,a=TN.from(r.headers);let s=r.data;return Kv.forEach(e,(function(e){s=e.call(n,s,a.normalize(),t?t.status:void 0)})),a.normalize(),s}function IN(e){return!(!e||!e.__CANCEL__)}function DN(e,t,n){Jv.call(this,null==e?"canceled":e,Jv.ERR_CANCELED,t,n),this.name="CanceledError"}Kv.inherits(DN,Jv,{__CANCEL__:!0});const PN=DN;function ON(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Jv("Request failed with status code "+n.status,[Jv.ERR_BAD_REQUEST,Jv.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const LN=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,s=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=r[o];a||(a=l),n[s]=i,r[s]=l;let d=o,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-a<t)return;const m=c&&l-c;return m?Math.round(1e3*u/m):void 0}};const RN=function(e,t){let n,r,a=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},FN=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=LN(50,250);return RN((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,i=s-r,l=a(i);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},_N=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},MN=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kv.asap((()=>e(...n)))},BN=bN.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,bN.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(bN.origin),bN.navigator&&/(msie|trident)/i.test(bN.navigator.userAgent)):()=>!0,UN=bN.hasStandardBrowserEnv?{write(e,t,n,r,a,s){const o=[e+"="+encodeURIComponent(t)];Kv.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Kv.isString(r)&&o.push("path="+r),Kv.isString(a)&&o.push("domain="+a),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function HN(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const zN=e=>e instanceof TN?J({},e):e;function VN(e,t){t=t||{};const n={};function r(e,t,n,r){return Kv.isPlainObject(e)&&Kv.isPlainObject(t)?Kv.merge.call({caseless:r},e,t):Kv.isPlainObject(t)?Kv.merge({},t):Kv.isArray(t)?t.slice():t}function a(e,t,n,a){return Kv.isUndefined(t)?Kv.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function s(e,t){if(!Kv.isUndefined(t))return r(void 0,t)}function o(e,t){return Kv.isUndefined(t)?Kv.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function i(n,a,s){return s in t?r(n,a):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,n)=>a(zN(e),zN(t),0,!0)};return Kv.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||a,o=s(e[r],t[r],r);Kv.isUndefined(o)&&s!==i||(n[r]=o)})),n}const qN=e=>{const t=VN({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:l}=t;if(t.headers=i=TN.from(i),t.url=cN(HN(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Kv.isFormData(r))if(bN.hasStandardBrowserEnv||bN.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(n=i.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}if(bN.hasStandardBrowserEnv&&(a&&Kv.isFunction(a)&&(a=a(t)),a||!1!==a&&BN(t.url))){const e=s&&o&&UN.read(o);e&&i.set(s,e)}return t},WN="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=qN(e);let a=r.data;const s=TN.from(r.headers).normalize();let o,i,l,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let x=new XMLHttpRequest;function f(){if(!x)return;const r=TN.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());ON((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x}),x=null}x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(n(new Jv("Request aborted",Jv.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new Jv("Network Error",Jv.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||uN;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Jv(t,a.clarifyTimeoutError?Jv.ETIMEDOUT:Jv.ECONNABORTED,e,x)),x=null},void 0===a&&s.setContentType(null),"setRequestHeader"in x&&Kv.forEach(s.toJSON(),(function(e,t){x.setRequestHeader(t,e)})),Kv.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),u&&"json"!==u&&(x.responseType=r.responseType),h&&([l,d]=FN(h,!0),x.addEventListener("progress",l)),m&&x.upload&&([i,c]=FN(m),x.upload.addEventListener("progress",i),x.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{x&&(n(!t||t.type?new PN(null,e,x):t),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===bN.protocols.indexOf(g)?n(new Jv("Unsupported protocol "+g+":",Jv.ERR_BAD_REQUEST,e)):x.send(a||null)}))},YN=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Jv?t:new PN(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,a(new Jv("timeout ".concat(t," of ms exceeded"),Jv.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:i}=r;return i.unsubscribe=()=>Kv.asap(o),i}};function GN(e,t){this.v=e,this.k=t}function KN(e){return function(){return new XN(e.apply(this,arguments))}}function XN(e){var t,n;function r(t,n){try{var s=e[t](n),o=s.value,i=o instanceof GN;Promise.resolve(i?o.v:o).then((function(n){if(i){var l="return"===t?"return":"next";if(!o.k||n.done)return r(l,n);n=e[l](n).value}a(s.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(s,o){var i={key:e,arg:a,resolve:s,reject:o,next:null};n?n=n.next=i:(t=n=i,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function $N(e){return new GN(e,0)}function QN(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new GN(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function JN(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ZN(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ZN(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ZN=function(e){this.s=e,this.n=e.next},ZN.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ZN(e)}XN.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},XN.prototype.next=function(e){return this._invoke("next",e)},XN.prototype.throw=function(e){return this._invoke("throw",e)},XN.prototype.return=function(e){return this._invoke("return",e)};const ej=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},tj=function(){var e=KN((function*(e,t){var n,r=!1,a=!1;try{for(var s,o=JN(nj(e));r=!(s=yield $N(o.next())).done;r=!1){const e=s.value;yield*QN(JN(ej(e,t)))}}catch(i){a=!0,n=i}finally{try{r&&null!=o.return&&(yield $N(o.return()))}finally{if(a)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),nj=function(){var e=KN((function*(e){if(e[Symbol.asyncIterator])return void(yield*QN(JN(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield $N(t.read());if(e)break;yield n}}finally{yield $N(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),rj=(e,t,n,r)=>{const a=tj(e,t);let s,o=0,i=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return i(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw i(t),t}},cancel:e=>(i(e),a.return())},{highWaterMark:2})},aj="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,sj=aj&&"function"===typeof ReadableStream,oj=aj&&("function"===typeof TextEncoder?(ij=new TextEncoder,e=>ij.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ij;const lj=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(dm){return!1}},cj=sj&&lj((()=>{let e=!1;const t=new Request(bN.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),dj=sj&&lj((()=>Kv.isReadableStream(new Response("").body))),uj={stream:dj&&(e=>e.body)};var mj;aj&&(mj=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!uj[e]&&(uj[e]=Kv.isFunction(mj[e])?t=>t[e]():(t,n)=>{throw new Jv("Response type '".concat(e,"' is not supported"),Jv.ERR_NOT_SUPPORT,n)})})));const hj=async(e,t)=>{const n=Kv.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Kv.isBlob(e))return e.size;if(Kv.isSpecCompliantForm(e)){const t=new Request(bN.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Kv.isArrayBufferView(e)||Kv.isArrayBuffer(e)?e.byteLength:(Kv.isURLSearchParams(e)&&(e+=""),Kv.isString(e)?(await oj(e)).byteLength:void 0)})(t):n},pj=aj&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:s,timeout:o,onDownloadProgress:i,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:m}=qN(e);c=c?(c+"").toLowerCase():"text";let h,p=YN([a,s&&s.toAbortSignal()],o);const x=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let f;try{if(l&&cj&&"get"!==n&&"head"!==n&&0!==(f=await hj(d,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Kv.isFormData(r)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=_N(f,FN(MN(l)));r=rj(n.body,65536,e,t)}}Kv.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;h=new Request(t,J(J({},m),{},{signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:a?u:void 0}));let s=await fetch(h);const o=dj&&("stream"===c||"response"===c);if(dj&&(i||o&&x)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=Kv.toFiniteNumber(s.headers.get("content-length")),[n,r]=i&&_N(t,FN(MN(i),!0))||[];s=new Response(rj(s.body,65536,n,(()=>{r&&r(),x&&x()})),e)}c=c||"text";let g=await uj[Kv.findKey(uj,c)||"text"](s,e);return!o&&x&&x(),await new Promise(((t,n)=>{ON(t,n,{data:g,headers:TN.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:h})}))}catch(g){if(x&&x(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new Jv("Network Error",Jv.ERR_NETWORK,e,h),{cause:g.cause||g});throw Jv.from(g,g&&g.code,e,h)}}),xj={http:null,xhr:WN,fetch:pj};Kv.forEach(xj,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(dm){}Object.defineProperty(e,"adapterName",{value:t})}}));const fj=e=>"- ".concat(e),gj=e=>Kv.isFunction(e)||null===e||!1===e,bj=e=>{e=Kv.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!gj(n)&&(r=xj[(t=String(n)).toLowerCase()],void 0===r))throw new Jv("Unknown adapter '".concat(t,"'"));if(r)break;a[t||"#"+s]=r}if(!r){const e=Object.entries(a).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(fj).join("\n"):" "+fj(e[0]):"as no adapter specified";throw new Jv("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function yj(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new PN(null,e)}function vj(e){yj(e),e.headers=TN.from(e.headers),e.data=AN.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return bj(e.adapter||NN.adapter)(e).then((function(t){return yj(e),t.data=AN.call(e,e.transformResponse,t),t.headers=TN.from(t.headers),t}),(function(t){return IN(t)||(yj(e),t&&t.response&&(t.response.data=AN.call(e,e.transformResponse,t.response),t.response.headers=TN.from(t.response.headers))),Promise.reject(t)}))}const Nj="1.9.0",jj={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{jj[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const wj={};jj.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,s)=>{if(!1===e)throw new Jv(r(a," has been removed"+(t?" in "+t:"")),Jv.ERR_DEPRECATED);return t&&!wj[a]&&(wj[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,s)}},jj.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Sj={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Jv("options must be an object",Jv.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const s=r[a],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Jv("option "+s+" must be "+n,Jv.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Jv("Unknown option "+s,Jv.ERR_BAD_OPTION)}},validators:jj},Cj=Sj.validators;class kj{constructor(e){this.defaults=e||{},this.interceptors={request:new dN,response:new dN}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(dm){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=VN(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Sj.assertOptions(n,{silentJSONParsing:Cj.transitional(Cj.boolean),forcedJSONParsing:Cj.transitional(Cj.boolean),clarifyTimeoutError:Cj.transitional(Cj.boolean)},!1),null!=r&&(Kv.isFunction(r)?t.paramsSerializer={serialize:r}:Sj.assertOptions(r,{encode:Cj.function,serialize:Cj.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Sj.assertOptions(t,{baseUrl:Cj.spelling("baseURL"),withXsrfToken:Cj.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&Kv.merge(a.common,a[t.method]);a&&Kv.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=TN.concat(s,a);const o=[];let i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!i){const e=[vj.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=o.length;let m=t;for(u=0;u<d;){const e=o[u++],t=o[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=vj.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return cN(HN((e=VN(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Kv.forEach(["delete","get","head","options"],(function(e){kj.prototype[e]=function(t,n){return this.request(VN(n||{},{method:e,url:t,data:(n||{}).data}))}})),Kv.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(VN(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}kj.prototype[e]=t(),kj.prototype[e+"Form"]=t(!0)}));const Ej=kj;class Tj{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new PN(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Tj((function(t){e=t}));return{token:t,cancel:e}}}const Aj=Tj;const Ij={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ij).forEach((e=>{let[t,n]=e;Ij[n]=t}));const Dj=Ij;const Pj=function e(t){const n=new Ej(t),r=iv(Ej.prototype.request,n);return Kv.extend(r,Ej.prototype,n,{allOwnKeys:!0}),Kv.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(VN(t,n))},r}(NN);Pj.Axios=Ej,Pj.CanceledError=PN,Pj.CancelToken=Aj,Pj.isCancel=IN,Pj.VERSION=Nj,Pj.toFormData=rN,Pj.AxiosError=Jv,Pj.Cancel=Pj.CanceledError,Pj.all=function(e){return Promise.all(e)},Pj.spread=function(e){return function(t){return e.apply(null,t)}},Pj.isAxiosError=function(e){return Kv.isObject(e)&&!0===e.isAxiosError},Pj.mergeConfig=VN,Pj.AxiosHeaders=TN,Pj.formToJSON=e=>yN(Kv.isHTMLForm(e)?new FormData(e):e),Pj.getAdapter=bj,Pj.HttpStatusCode=Dj,Pj.default=Pj;const Oj=Pj.create({baseURL:"savemax.brokeragelead.ca"===window.location.hostname?"https://savemax.brokeragelead.ca/api":"http://localhost:5001/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),Lj=e=>{let{onReminderAdded:n}=e;const[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)("");return(0,gp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!r||!s.trim())return void alert("Please fill out both fields.");let t="";if(r){{const e=r.split("-");if(3!==e.length)return void alert("Invalid date selected from picker.");t="".concat(e[2],"/").concat(e[1],"/").concat(e[0])}try{await Oj.post("/reminders",{date:t,reminder:s.trim()}),a(""),o(""),n(),alert("Reminder added successfully!")}catch(i){console.error("Error adding reminder:",i),alert("Failed to add reminder.")}}else alert("Please select a date.")},className:"mb-6 flex flex-col gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,gp.jsx)("input",{type:"date",id:"date",name:"date",value:r,onChange:e=>a(e.target.value),className:"border p-2 rounded w-full"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"reminder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder"}),(0,gp.jsx)("input",{type:"text",id:"reminder",name:"reminder",placeholder:"Enter Reminder",value:s,onChange:e=>o(e.target.value),className:"border p-2 rounded w-full"})]}),(0,gp.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-4 py-2 rounded hover:bg-blue-800 self-start",children:"Add Reminder"})]})},Rj=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Finance Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="FinanceAdmin",n="Finance2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isFinanceAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isFinanceAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isFinanceAdmin")):(sessionStorage.setItem("isFinanceAdmin","true"),r(),void m("/finance"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null},Fj=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Financial Reports Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="ReportsAdmin",n="Reports2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isReportsAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isReportsAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isReportsAdmin")):(sessionStorage.setItem("isReportsAdmin","true"),r(),void m("/financial-reports"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900",children:"Login"})]})]})]})}):null},_j=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Trade Info Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="TradeAdmin",n="Trade2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isTradeAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isTradeAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isTradeAdmin")):(sessionStorage.setItem("isTradeAdmin","true"),r(),void m("/trade-info"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},Mj=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Listing Info Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="ListingAdmin",n="Listing2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isListingAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isListingAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isListingAdmin")):(sessionStorage.setItem("isListingAdmin","true"),r(),void m("/listing-info"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},Bj=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Agent Info Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="AgentAdmin",n="Agent2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isAgentAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isAgentAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isAgentAdmin")):(sessionStorage.setItem("isAgentAdmin","true"),r(),void m("/agent-info"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},Uj=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),m=Pu();return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Vendor Info Admin Login"}),l&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:l}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t="VendorAdmin",n="Vendor2025";return a!==t&&o!==n?(c("Invalid login credentials. Please try again."),void sessionStorage.removeItem("isVendorAdmin")):a!==t?(c("Invalid username. Please try again."),void sessionStorage.removeItem("isVendorAdmin")):o!==n?(c("Incorrect password for this username."),void sessionStorage.removeItem("isVendorAdmin")):(sessionStorage.setItem("isVendorAdmin","true"),r(),void m("/vendor-info"))},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,gp.jsx)("input",{type:"text",id:"username",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:d?"text":"password",id:"password",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900 pr-10",required:!0}),(0,gp.jsx)("button",{type:"button",onClick:()=>{u(!d)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?(0,gp.jsx)(Kh,{size:20}):(0,gp.jsx)(Xh,{size:20})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 transition-colors",children:"Login"})]})]})]})}):null},Hj=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(null),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)(!1),[g,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1),w=Pu(),S=async()=>{o(!0),l(null);try{const e=await Oj.get("/reminders");n(e.data)}catch(i){console.error("Error fetching reminders:",i),"ECONNABORTED"===i.code?l("Request timed out. Please check your connection and try again."):i.response?l("Server error: ".concat(i.response.status,". Please try again later.")):i.request?l("Unable to connect to server. Please check if the backend is running."):l("Failed to fetch reminders. Please try again later.")}finally{o(!1)}};(0,t.useEffect)((()=>{S()}),[]);const C=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":[("0"+t.getDate()).slice(-2),("0"+(t.getMonth()+1)).slice(-2),t.getFullYear()].join("/")},k=r?C(r):"",E=(()=>{const e=new Date;return{start:Ly(e,{weekStartsOn:1}),end:sv(e,{weekStartsOn:1})}})(),T=e.filter((e=>{try{return ov(av(e.date,"dd/MM/yyyy",new Date),E)}catch(dm){return console.error("Error parsing reminder date for filtering:",e.date,dm),!1}})),A=r?T.filter((e=>e.date===k)):T;return i?(0,gp.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,gp.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,gp.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,gp.jsxs)("span",{className:"block sm:inline",children:[" ",i]}),(0,gp.jsxs)("div",{className:"mt-3 space-x-2",children:[(0,gp.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:S,children:"Retry"}),(0,gp.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})}):(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row p-6",children:[(0,gp.jsxs)("div",{className:"md:flex-1 bg-white rounded-lg shadow-md p-6 mb-8 md:mb-0",children:[(0,gp.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-center text-gray-700",children:"Calendar"}),(0,gp.jsx)(wb,{onChange:a,value:r,className:"mx-auto border-none",tileClassName:e=>{let{date:t}=e;return C(t)===k?"bg-yellow-300 rounded-lg":""}})]}),(0,gp.jsxs)("div",{className:"md:flex-1 bg-white rounded-lg shadow-md p-6 md:ml-10",children:[(0,gp.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-700",children:"Add Reminder"}),(0,gp.jsx)(Lj,{onReminderAdded:()=>{S()}}),(0,gp.jsxs)("div",{className:"mt-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:r?"Reminders for ".concat(k," (This Week)"):"This Week's Reminders"}),(0,gp.jsx)("button",{onClick:()=>w("/database/reminders"),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 text-sm",children:"View All Reminders"})]}),s&&(0,gp.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Loading reminders..."})]}),!s&&0===A.length&&(0,gp.jsx)("p",{className:"text-gray-500",children:r?"No reminders for ".concat(k," this week."):"No reminders for this week."}),!s&&A.length>0&&(0,gp.jsx)("ul",{className:"space-y-2 mb-4",children:A.map((e=>(0,gp.jsxs)("li",{className:"p-3 bg-gray-100 rounded-md shadow-sm",children:[(0,gp.jsx)("p",{className:"font-semibold text-gray-800",children:e.date}),(0,gp.jsx)("p",{className:"text-gray-600",children:e.reminder})]},e._id)))}),T.length>0&&!s&&(0,gp.jsxs)("div",{className:"space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>{n([])},className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 text-sm",children:"Clear Displayed Weekly Reminders"}),(0,gp.jsx)("button",{onClick:S,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 text-sm",children:"Refresh All Reminders"})]})]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-6 px-6 pb-10",children:[(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{d(!0)},children:[(0,gp.jsx)(Bh,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Company Profile"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{b(!0)},children:[(0,gp.jsx)(np,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Listing Info"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{f(!0)},children:[(0,gp.jsx)(Gh,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Trade Info"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{v(!0)},children:[(0,gp.jsx)(xp,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Agent Info"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{m(!0)},children:[(0,gp.jsx)(Hh,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Finance"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{j(!0)},children:[(0,gp.jsx)(hp,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Vendor Info"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{p(!0)},children:[(0,gp.jsx)($h,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Financial Reports"})]})]}),(0,gp.jsx)(bp,{isOpen:c,onClose:()=>d(!1),source:"companyProfile"}),(0,gp.jsx)(Rj,{isOpen:u,onClose:()=>m(!1)}),(0,gp.jsx)(Fj,{isOpen:h,onClose:()=>p(!1)}),(0,gp.jsx)(_j,{isOpen:x,onClose:()=>f(!1)}),(0,gp.jsx)(Mj,{isOpen:g,onClose:()=>b(!1)}),(0,gp.jsx)(Bj,{isOpen:y,onClose:()=>v(!1)}),(0,gp.jsx)(Uj,{isOpen:N,onClose:()=>j(!1)})]})},zj=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)({}),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),u=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString()},m=async()=>{o(!0),l("");try{const e=await Oj.get("/ledger"),t=[...JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),...e.data];t.sort(((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n})),n(t);const r={};t.forEach((e=>{r[e.accountNumber]||(r[e.accountNumber]={debit:0,credit:0,transactions:[]}),r[e.accountNumber].debit+=e.debit||0,r[e.accountNumber].credit+=e.credit||0,r[e.accountNumber].transactions.push(e)})),Object.keys(r).forEach((e=>{r[e].transactions.sort(((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n}))})),a(r)}catch(r){var e,t;n([]),a({});const s=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to fetch ledger data";l(s),console.error("Error fetching ledger:",r)}o(!1)};return(0,t.useEffect)((()=>{m()}),[]),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Trial Balance"}),(0,gp.jsxs)("div",{className:"flex gap-2",children:[(0,gp.jsx)("button",{onClick:m,disabled:s||c,className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 disabled:opacity-50",children:s?"Loading...":"Refresh"}),(0,gp.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to clear ALL trial balance data? This action cannot be undone.")){d(!0),l("");try{await Oj.get("/ledger");await Oj.delete("/ledger");localStorage.removeItem("trialBalanceTransactions"),localStorage.removeItem("lastARNumber"),n([]),a({}),$p.success("All trial balance data and AR transactions cleared successfully.")}catch(r){var e,t;const n=r.message||(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to clear trial balance data";l(n),$p.error(n),console.error("Error clearing data:",r)}d(!1)}},disabled:c||s,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 disabled:opacity-50",children:c?"Clearing...":"Clear All Data"})]})]}),i&&(0,gp.jsx)("div",{className:"text-red-600 mb-4 text-sm",children:i}),(0,gp.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Account Number"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Account Name"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",style:{minWidth:"80px",width:"80px"},children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Reference #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-left text-xs",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:"Balance"})]})}),(0,gp.jsx)("tbody",{children:lx.map(((e,n)=>{const a=r[e.acct]||{debit:0,credit:0,transactions:[]},s=0+a.debit-a.credit,o=a.transactions.length>0;return(0,gp.jsxs)(t.Fragment,{children:[(0,gp.jsxs)("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",children:e.acct}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",children:e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-xs"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==a.debit?a.debit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==a.credit?a.credit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-2 py-1 text-right text-xs",children:0!==s?s.toFixed(2):"-"})]}),o&&(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1 font-semibold text-xs",children:"Opening Balance"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"})]}),a.transactions.map(((t,n)=>(0,gp.jsxs)("tr",{className:"bg-gray-100 text-xs",children:[(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"},children:"Cash Receipt"===t.type?t.date?u(t.date):"-":t.apNumber&&t.date?u(t.date):t.chequeDate?u(t.chequeDate):t.date?u(t.date):t.createdAt?u(t.createdAt):"-"}),(0,gp.jsx)("td",{className:"px-2 py-1",children:"Cash Receipt"===t.type?t.reference&&"null"!==t.reference?t.reference:"-":t.apNumber?t.apNumber:"Journal Entry"===t.type?t.reference||"-":t.reference&&"Manual Journal Entry"!==t.reference?t.reference:t.eftNumber?"EFT".concat(t.eftNumber):"-"}),(0,gp.jsx)("td",{className:"px-2 py-1",children:t.description}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right",children:t.debit?t.debit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right",children:t.credit?t.credit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"px-2 py-1"})]},"".concat(e.acct,"-").concat(n)))),(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-2 py-1"}),(0,gp.jsx)("td",{className:"px-2 py-1 font-semibold text-xs",children:"Closing Balance"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:"-"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right font-semibold text-xs",children:0!==s?s.toFixed(2):"-"})]})]})]},e.acct)}))})]})}),(0,gp.jsxs)("div",{className:"mt-4 text-xs text-gray-600",children:["Total Entries: ",e.length," | Last Updated:"," ",(new Date).toLocaleTimeString()]})]})},Vj=[{id:"reminders",name:"Reminders Database",icon:(0,gp.jsx)(_h,{size:40,className:"text-blue-900"}),route:"/database/reminders"},{id:"company-profile",name:"Company Profile Database",icon:(0,gp.jsx)(xp,{size:40,className:"text-blue-900"}),route:"/company-profile-db"},{id:"listing-info",name:"Listing Info Database",icon:(0,gp.jsx)(tp,{size:40,className:"text-blue-900"}),route:"/listing-info-db"},{id:"agent-info",name:"Agent Info Database",icon:(0,gp.jsx)(pp,{size:40,className:"text-blue-900"}),route:"/agent-info-db"},{id:"trade-info",name:"Trade Info Database",icon:(0,gp.jsx)(Zh,{size:40,className:"text-blue-900"}),route:"/trade-db"},{id:"finance-db",name:"Finance Database",icon:(0,gp.jsx)(rp,{size:40,className:"text-blue-900"}),route:"/finance-db"},{id:"vendor-info",name:"Vendor Info Database",icon:(0,gp.jsx)(hp,{size:40,className:"text-blue-900"}),route:"/vendor-info-db"},{id:"trial-balance",name:"Trial Balance",icon:(0,gp.jsx)(Fh,{size:40,className:"text-blue-900"}),route:"/trial-balance"},{id:"outside-brokers",name:"Outside Brokers Database",icon:(0,gp.jsx)(Bh,{size:40,className:"text-blue-900"}),route:"/outside-brokers-db"},{id:"lawyers",name:"Lawyers Database",icon:(0,gp.jsx)(Jh,{size:40,className:"text-blue-900"}),route:"/lawyers-db"}],qj=()=>{const e=Pu(),[n,r]=(0,t.useState)(null);(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isAdmin")||e("/")}),[e]);return(0,gp.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"p-8",children:n?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:n.name}),(0,gp.jsx)(zj,{})]}),(0,gp.jsx)("div",{className:"mt-6",children:(0,gp.jsx)("button",{onClick:()=>r(null),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Database"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:Vj.map((t=>{let{id:n,name:a,icon:s,route:o}=t;return(0,gp.jsxs)("div",{onClick:()=>{var t;"trial-balance"===(t={id:n,name:a,icon:s,route:o}).id?r(t):e(t.route)},className:"p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 ease-in-out",children:[s,(0,gp.jsx)("h2",{className:"text-xl font-semibold mb-2",children:a})]},n)}))})]})})]})},Wj=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)(null),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)({_id:null,date:"",reminder:""}),u=Pu(),m=async()=>{a(!0),o(null);try{const e=await Oj.get("/reminders");n(e.data)}catch(s){o("Failed to fetch reminders. Please try again later."),console.error("Error fetching all reminders:",s)}finally{a(!1)}};(0,t.useEffect)((()=>{m()}),[]);const h=e=>{const{name:t,value:n}=e.target;d((e=>J(J({},e),{},{[t]:n})))};return s?(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"p-6",children:(0,gp.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,gp.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,gp.jsxs)("span",{className:"block sm:inline",children:[" ",s]}),(0,gp.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded mt-2",onClick:m,children:"Retry"})]})})]}):(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>u("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"All Reminders"}),r?(0,gp.jsx)("p",{children:"Loading reminders..."}):0===e.length?(0,gp.jsx)("p",{className:"text-gray-500",children:"No reminders found."}):(0,gp.jsx)("div",{className:"overflow-x-auto shadow-md rounded-lg",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{className:"bg-blue-900 text-white",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Date"}),(0,gp.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Reminder"}),(0,gp.jsx)("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"py-4 px-6 whitespace-nowrap",children:e.date}),(0,gp.jsx)("td",{className:"py-4 px-6",children:e.reminder}),(0,gp.jsxs)("td",{className:"py-4 px-6 whitespace-nowrap",children:[(0,gp.jsx)("button",{onClick:()=>(d(J({},e)),void l(!0)),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-xs mr-2",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this reminder?"))try{a(!0),await Oj.delete("/reminders/".concat(e)),alert("Reminder deleted successfully."),m()}catch(r){var t,n;console.error("Error deleting reminder:",r),o((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete reminder.")}finally{a(!1)}})(e._id),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded text-xs",children:"Delete"})]})]},e._id)))})]})})]}),i&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Edit Reminder"}),(0,gp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.date||!c.reminder.trim())return void alert("Date and reminder text cannot be empty.");if(/^\d{2}\/\d{2}\/\d{4}$/.test(c.date))try{a(!0),await Oj.put("/reminders/".concat(c._id),{date:c.date,reminder:c.reminder.trim()}),alert("Reminder updated successfully."),l(!1),m()}catch(r){var t,n;console.error("Error updating reminder:",r),alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to update reminder.")}finally{a(!1)}else alert("Invalid date format. Please use DD/MM/YYYY.")},children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{htmlFor:"edit-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date (DD/MM/YYYY)"}),(0,gp.jsx)("input",{type:"text",id:"edit-date",name:"date",value:c.date,onChange:h,className:"border border-gray-300 p-2 rounded w-full focus:ring-blue-700 focus:border-blue-700",placeholder:"DD/MM/YYYY",required:!0})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("label",{htmlFor:"edit-reminder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Text"}),(0,gp.jsx)("textarea",{id:"edit-reminder",name:"reminder",value:c.reminder,onChange:h,rows:"3",className:"border border-gray-300 p-2 rounded w-full focus:ring-blue-700 focus:border-blue-700",required:!0})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>l(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"bg-blue-800 hover:bg-blue-900 text-white font-semibold py-2 px-4 rounded",disabled:r,children:r?"Saving...":"Save Changes"})]})]})]})})]})},Yj=()=>{const e=Pu(),[n,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0);(0,t.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await Oj.get("/company-profile");r(Array.isArray(e.data)?e.data:[e.data]),s(!1)}catch(e){$p.error("Failed to fetch company profiles"),s(!1)}};return a?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"container mx-auto p-6",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>e("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Company Profiles"}),(0,gp.jsx)("div",{className:"grid gap-6",children:n.map((t=>(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,gp.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>e("/edit-company-profile"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this company profile?"))try{await Oj.delete("/company-profile/".concat(e)),$p.success("Company profile deleted successfully!"),o()}catch(t){$p.error("Failed to delete company profile")}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,gp.jsx)("button",{onClick:()=>(e=>{const t=window.open("","_blank"),n=e.logoUrl?'<img src="'.concat(e.logoUrl,'" alt="Company Logo" style="max-height: 100px; margin-bottom: 20px;"/>'):"";t.document.write("\n      <html>\n        <head>\n          <title>Company Profile - ".concat(e.companyName,'</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }\n            .container { max-width: 800px; margin: 0 auto; }\n            .header { text-align: center; margin-bottom: 30px; }\n            .field { margin-bottom: 10px; }\n            .label { font-weight: bold; }\n          </style>\n        </head>\n        <body>\n          <div class="container">\n            <div class="header">\n              ').concat(n,'\n              <h1>Company Profile</h1>\n            </div>\n            <div class="field"><span class="label">Company Name:</span> ').concat(e.companyName,'</div>\n            <div class="field"><span class="label">Address:</span> ').concat(e.address,'</div>\n            <div class="field"><span class="label">City:</span> ').concat(e.city,'</div>\n            <div class="field"><span class="label">Province:</span> ').concat(e.province,'</div>\n            <div class="field"><span class="label">Postal Code:</span> ').concat(e.postalCode,'</div>\n            <div class="field"><span class="label">Phone:</span> ').concat(e.phone,'</div>\n            <div class="field"><span class="label">Fax:</span> ').concat(e.fax,'</div>\n            <div class="field"><span class="label">Email:</span> ').concat(e.email,'</div>\n            <div class="field"><span class="label">TREB #:</span> ').concat(e.trebNumber,'</div>\n            <div class="field"><span class="label">RECO #:</span> ').concat(e.recoNumber,'</div>\n            <div class="field"><span class="label">Trust Status Company:</span> ').concat(e.trustStatusCompany?"Yes":"No","</div>\n          </div>\n        </body>\n      </html>\n    ")),t.document.close(),t.print()})(t),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),t.logoUrl&&(0,gp.jsx)("div",{className:"mb-4",children:(0,gp.jsx)("img",{src:t.logoUrl,alt:"Company Logo",className:"h-20 object-contain"})}),(0,gp.jsx)("div",{className:"grid grid-cols-1 gap-4 mt-12",children:[{label:"Company Name",value:t.companyName},{label:"Address",value:t.address},{label:"City",value:t.city},{label:"Province",value:t.province},{label:"Postal Code",value:t.postalCode},{label:"Phone",value:t.phone},{label:"Fax",value:t.fax},{label:"Email",value:t.email},{label:"TREB #",value:t.trebNumber},{label:"RECO #",value:t.recoNumber},{label:"Trust Status Company",value:t.trustStatusCompany?"Yes":"No"}].map((e=>(0,gp.jsxs)("div",{className:"border-b border-gray-200 pb-2",children:[(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:e.label}),(0,gp.jsx)("div",{className:"font-medium",children:e.value})]},e.label)))})]},t._id)))})]})]})},Gj=()=>{const e=Pu();return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-100 px-6 py-16",children:[(0,gp.jsxs)("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 mb-8 flex items-center gap-2",onClick:()=>e("/database"),children:[(0,gp.jsx)(Rh,{}),"Back to Database"]}),(0,gp.jsx)("h1",{className:"text-3xl font-bold text-center mb-12 text-gray-800",children:"Company Information"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{title:"General Ledger Account Setup",path:"/ledger-db"},{title:"Miscellaneous Settings",path:"/miscellaneous-db"},{title:"Company Profile",path:"/database/company-info-db"},{title:"MLS Fee Setup",path:"/mls-fee-db"}].map(((t,n)=>(0,gp.jsx)("div",{className:"bg-white shadow-md rounded-xl p-6 relative cursor-pointer hover:scale-105 transition-transform duration-300 hover:bg-yellow-300",onClick:()=>e(t.path),children:(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800 text-center",children:t.title})},n)))})]})]})},Kj=()=>{const e=Pu(),[n,r]=(0,t.useState)({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""}),[a,s]=(0,t.useState)(!0);(0,t.useEffect)((()=>{o()}),[]);const o=async()=>{try{const e=await Oj.get("/company-profile");e.data&&r(e.data),s(!1)}catch(e){$p.error("Failed to fetch company profile"),s(!1)}},i=async e=>{const{name:t,value:n,type:a,checked:s,files:o}=e.target;if("file"===a){if(o[0]){const e=new FileReader;e.onload=e=>{r((t=>J(J({},t),{},{logoUrl:e.target.result})))},e.readAsDataURL(o[0])}}else r((e=>J(J({},e),{},{[t]:"checkbox"===a?s:n})))};return a?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Company Profile"}),(0,gp.jsx)("button",{onClick:()=>e("/database/company-info-db"),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(!0);try{await Oj.put("/company-profile/".concat(n._id),n),$p.success("Company profile updated successfully!"),setTimeout((()=>{e("/database/company-info-db")}),1500)}catch(o){var r,a;$p.error((null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to update company profile")}finally{s(!1)}},className:"space-y-4",children:[[{label:"Company Name",name:"companyName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Postal Code",name:"postalCode"},{label:"Phone",name:"phone",type:"tel"},{label:"Fax",name:"fax",type:"tel"},{label:"Email",name:"email",type:"email"},{label:"TREB #",name:"trebNumber"},{label:"RECO #",name:"recoNumber"}].map((e=>(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,value:n[e.name],onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name))),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-1",children:["Province",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{id:"province",name:"province",value:n.province,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"].map((e=>(0,gp.jsx)("option",{value:e,children:e},e)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,gp.jsx)("input",{type:"file",id:"logo",name:"logo",accept:"image/*",onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700"}),n.logoUrl&&(0,gp.jsx)("div",{className:"mt-2",children:(0,gp.jsx)("img",{src:n.logoUrl,alt:"Company Logo Preview",className:"h-20 object-contain"})})]}),(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",id:"trustStatusCompany",name:"trustStatusCompany",checked:n.trustStatusCompany,onChange:i,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,gp.jsx)("label",{htmlFor:"trustStatusCompany",className:"ml-2 block text-sm text-gray-700",children:"Trust Status Company"})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:a?"Updating...":"Update"})})]})]})]})},Xj=e=>{let{setShowProfileForm:n}=e;const[r,a]=(0,t.useState)({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""}),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),u=async e=>{const{name:t,value:n,type:r,checked:s,files:o}=e.target;if("file"===r){if(o[0]){const e=new FileReader;e.onload=e=>{a((t=>J(J({},t),{},{logoUrl:e.target.result})))},e.readAsDataURL(o[0])}}else a((e=>J(J({},e),{},{[t]:"checkbox"===r?s:n})))};return(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Company Profile"}),(0,gp.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),l(""),d(!1);try{await Oj.post("/company-profile",r),$p.success("Company profile submitted successfully!"),a({companyName:"",address:"",city:"",province:"",postalCode:"",phone:"",fax:"",email:"",trustStatusCompany:!1,trebNumber:"",recoNumber:"",logoUrl:""})}catch(s){var t,n;$p.error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to submit form")}finally{o(!1)}},className:"space-y-4",children:[[{label:"Company Name",name:"companyName"},{label:"Address",name:"address"},{label:"City",name:"city"},{label:"Postal Code",name:"postalCode"},{label:"Phone",name:"phone",type:"tel"},{label:"Fax",name:"fax",type:"tel"},{label:"Email",name:"email",type:"email"},{label:"TREB #",name:"trebNumber"},{label:"RECO #",name:"recoNumber"}].map((e=>(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:e.type||"text",id:e.name,name:e.name,value:r[e.name],onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name))),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-1",children:["Province",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{id:"province",name:"province",value:r.province,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Northwest Territories","Nova Scotia","Nunavut","Ontario","Prince Edward Island","Quebec","Saskatchewan","Yukon"].map((e=>(0,gp.jsx)("option",{value:e,children:e},e)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Logo"}),(0,gp.jsx)("input",{type:"file",id:"logo",name:"logo",accept:"image/*",onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"}),r.logoUrl&&(0,gp.jsx)("div",{className:"mt-2",children:(0,gp.jsx)("img",{src:r.logoUrl,alt:"Company Logo Preview",className:"h-20 object-contain"})})]}),(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",id:"trustStatusCompany",name:"trustStatusCompany",checked:r.trustStatusCompany,onChange:u,className:"h-4 w-4 text-blue-900 focus:ring-blue-900 border-gray-300 rounded"}),(0,gp.jsx)("label",{htmlFor:"trustStatusCompany",className:"ml-2 block text-sm text-gray-700",children:"Trust Status Company"})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900"),children:s?"Submitting...":"Submit"})})]})]})},$j=e=>{let{setSelectedForm:n}=e;const[r,a]=(0,t.useState)({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1}),[s,o]=(0,t.useState)(!1),i=e=>{const{name:t,value:n,type:r,checked:s}=e.target;a((e=>J(J({},e),{},{[t]:"checkbox"===r?s:n})))};return(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"General Ledger Account Setup"}),(0,gp.jsx)("button",{onClick:()=>n(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),console.log("Submitting form data:",r);const t=Object.entries(r).filter((e=>{let[t,n]=e;return"agentDisbursement"!==t&&!n})).map((e=>{let[t]=e;return t}));if(t.length>0)return $p.error("All fields are mandatory"),void o(!1);try{const e=await Oj.post("/general-ledger-setup",r);console.log("Form submission response:",e.data),$p.success("Form submitted successfully"),a({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1})}catch(i){var n,s;console.error("Form submission error:",i),$p.error((null===(n=i.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||"Failed to submit form")}finally{o(!1)}},className:"space-y-4",children:[[{label:"A/R - Commission Earned",name:"ARCommissionEarned"},{label:"A/P - General & Commission Expense",name:"APGeneralCommissionExpense"},{label:"A/P - Other Brokers",name:"AROtherDebit"},{label:"Liability For Trust Funds Held",name:"unpaidFileTrustReceivable"},{label:"Commission Payable",name:"commissionReceivablePayable"},{label:"HST with held From Agents",name:"heldFundsReceivableAgent"},{label:"Held Funds Payable (Agent)",name:"heldFundsPayableAgent"},{label:"Suspense",name:"suspense"},{label:"Labour Expenses - Management",name:"unpaidExpensesManagement"},{label:"Labour Expenses - Hourly",name:"unpaidExpensesNonMgmt"},{label:"Agent Bonus",name:"payrollAgent"}].map((e=>(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"text",id:e.name,name:e.name,value:r[e.name],onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent",required:!0})]},e.name))),(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",id:"agentDisbursement",name:"agentDisbursement",checked:r.agentDisbursement,onChange:i,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,gp.jsx)("label",{htmlFor:"agentDisbursement",className:"ml-2 block text-sm text-gray-700",children:"Agent Disbursement"})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:s?"Submitting...":"Submit"})})]})]})},Qj=e=>{let{setSelectedForm:n}=e;const[r,a]=(0,t.useState)({fee:"",selectionOption:"% of Sell Price",mlsFeeTaxApplicable:"No",postToAP:"No dont post to A/P"}),[s,o]=(0,t.useState)(!1),i=e=>{const{name:t,value:n}=e.target;a((e=>J(J({},e),{},{[t]:n})))};return(0,gp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gp.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"MLS Fee Setup"}),(0,gp.jsx)("button",{onClick:()=>n(null),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{if(isNaN(r.fee)||r.fee<=0)throw new Error("Please enter a valid fee amount");const e=await Oj.post("/mls-fees",r);console.log("MLS Fee created:",e.data),$p.success("MLS Fee created successfully!"),a({fee:"",selectionOption:"% of Sell Price",mlsFeeTaxApplicable:"No",postToAP:"No dont post to A/P"}),setTimeout((()=>{n(null)}),1e3)}catch(t){$p.error(t.message||"Failed to create MLS fee")}finally{o(!1)}},className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Fee",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",step:"0.01",name:"fee",value:r.fee,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Selection Option",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"selectionOption",value:r.selectionOption,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"% of Sell Price",children:"% of Sell Price"}),(0,gp.jsx)("option",{value:"Flat Amount",children:"Flat Amount"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["MLS Fee Tax Applicable",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"mlsFeeTaxApplicable",value:r.mlsFeeTaxApplicable,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Post to A/P",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"postToAP",value:r.postToAP,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Yes Post to A/P",children:"Yes, Post to A/P"}),(0,gp.jsx)("option",{value:"No dont post to A/P",children:"No, dont post to A/P"})]})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:s?"Creating...":"Create MLS Fee"})})]})]})})},Jj=e=>{let{setSelectedForm:n}=e;console.log("MiscSettingsForm rendered");const[r,a]=(0,t.useState)({lastListing:"",lastTrade:"",compassDirection:"Lorem Ipsum 1",cdaAddress:"Lorem Ipsum 1",multipleOffices:"No",mainOfficeNumber:"",hstNumber:"",payrollNumber:"",expStmtAddress:"Lorem Ipsum 1",openingBalanceFormat:"Lorem Ipsum 1"}),[s,o]=(0,t.useState)(!1);(0,t.useEffect)((()=>{console.log("MiscSettingsForm useEffect running");(async()=>{try{o(!0),console.log("Fetching settings from:","/misc-settings");const e=await Oj.get("/misc-settings");console.log("Fetched settings:",e.data);const t=await Oj.get("/listings");console.log("Fetched listings:",t.data);let n=0;t.data&&t.data.length>0&&(n=Math.max(...t.data.map((e=>e.listingNumber||0))));const r=await Oj.get("/trades");console.log("Fetched trades:",r.data);let s=0;if(r.data&&r.data.length>0&&(s=Math.max(...r.data.map((e=>e.tradeNumber||0)))),e.data&&e.data.length>0){const t=e.data[0];a(J(J({},t),{},{lastListing:n.toString(),lastTrade:s.toString(),mainOfficeNumber:t.mainOfficeNumber||"",hstNumber:t.hstNumber||"",payrollNumber:t.payrollNumber||""}))}else a((e=>J(J({},e),{},{lastListing:n.toString(),lastTrade:s.toString()})))}catch(e){console.error("Error fetching settings:",e),$p.error("Failed to load settings. Please try again.")}finally{o(!1)}})()}),[]);const i=e=>{const{name:t,value:n}=e.target;a((e=>J(J({},e),{},{[t]:n})))};return(0,gp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Miscellaneous Settings"}),(0,gp.jsx)("button",{onClick:()=>n(null),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{const e=J(J({},r),{},{lastListing:Number(r.lastListing),lastTrade:Number(r.lastTrade),mainOfficeNumber:Number(r.mainOfficeNumber),hstNumber:Number(r.hstNumber),payrollNumber:Number(r.payrollNumber)});r._id?(await Oj.put("/misc-settings/".concat(r._id),e),$p.success("Settings updated successfully!")):(await Oj.post("/misc-settings",e),$p.success("Settings saved successfully!")),setTimeout((()=>{n(null)}),1500)}catch(s){var t,a;console.error("Error saving settings:",s),$p.error((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to save settings. Please check your input and try again.")}finally{o(!1)}},className:"space-y-8 bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-700 border-b pb-2",children:"TRADES & LISTINGS"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Listing",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"lastListing",value:r.lastListing,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from the database"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Trade",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"lastTrade",value:r.lastTrade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from the database"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Compass Direction",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"compassDirection",value:r.compassDirection,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CDA,Address",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"cdaAddress",value:r.cdaAddress,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-700 border-b pb-2",children:"COMPANY SETTINGS"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Multiple Offices",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"multipleOffices",value:r.multipleOffices,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Main Office #",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"mainOfficeNumber",value:r.mainOfficeNumber,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["HST #",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"hstNumber",value:r.hstNumber,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payroll #",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"payrollNumber",value:r.payrollNumber,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["8.61 - Exp. Stmt. Address",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"expStmtAddress",value:r.expStmtAddress,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Opening Balance Format",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsxs)("select",{name:"openingBalanceFormat",value:r.openingBalanceFormat,onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-800 hover:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:s?"Saving...":"Save Settings"})})]})]})})},Zj=[{name:"General Ledger Account Setup",route:"ledger"},{name:"Miscellaneous Settings",route:"misc"},{name:"MLS Fee Setup",route:"mls"}],ew=()=>{const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!1);return(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(()=>{if(r)return(0,gp.jsx)(Xj,{setShowProfileForm:a});switch(e){case"ledger":return(0,gp.jsx)($j,{setSelectedForm:n});case"mls":return(0,gp.jsx)(Qj,{setSelectedForm:n});case"misc":return(0,gp.jsx)(Jj,{setSelectedForm:n});default:return(0,gp.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Company Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,gp.jsx)("div",{onClick:()=>a(!0),className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",children:(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Company Profile"})}),Zj.map((e=>(0,gp.jsx)("div",{onClick:()=>(e=>{n(e.route),a(!1)})(e),className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",children:(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.name})},e.route)))]})]})}})()]})};function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nw(e,t){if(e){if("string"==typeof e)return tw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tw(e,t):void 0}}function rw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,o,i=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(e,t)||nw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aw=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function sw(){return sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sw.apply(null,arguments)}function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function iw(e,t){return iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iw(e,t)}function lw(e){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lw(e)}function cw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(cw=function(){return!!e})()}function dw(e,t){if(t&&("object"==K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function uw(e){return function(e){if(Array.isArray(e))return tw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mw=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(dm){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),hw=Math.abs,pw=String.fromCharCode,xw=Object.assign;function fw(e){return e.trim()}function gw(e,t,n){return e.replace(t,n)}function bw(e,t){return e.indexOf(t)}function yw(e,t){return 0|e.charCodeAt(t)}function vw(e,t,n){return e.slice(t,n)}function Nw(e){return e.length}function jw(e){return e.length}function ww(e,t){return t.push(e),e}var Sw=1,Cw=1,kw=0,Ew=0,Tw=0,Aw="";function Iw(e,t,n,r,a,s,o){return{value:e,root:t,parent:n,type:r,props:a,children:s,line:Sw,column:Cw,length:o,return:""}}function Dw(e,t){return xw(Iw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Pw(){return Tw=Ew>0?yw(Aw,--Ew):0,Cw--,10===Tw&&(Cw=1,Sw--),Tw}function Ow(){return Tw=Ew<kw?yw(Aw,Ew++):0,Cw++,10===Tw&&(Cw=1,Sw++),Tw}function Lw(){return yw(Aw,Ew)}function Rw(){return Ew}function Fw(e,t){return vw(Aw,e,t)}function _w(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mw(e){return Sw=Cw=1,kw=Nw(Aw=e),Ew=0,[]}function Bw(e){return Aw="",e}function Uw(e){return fw(Fw(Ew-1,Vw(91===e?e+2:40===e?e+1:e)))}function Hw(e){for(;(Tw=Lw())&&Tw<33;)Ow();return _w(e)>2||_w(Tw)>3?"":" "}function zw(e,t){for(;--t&&Ow()&&!(Tw<48||Tw>102||Tw>57&&Tw<65||Tw>70&&Tw<97););return Fw(e,Rw()+(t<6&&32==Lw()&&32==Ow()))}function Vw(e){for(;Ow();)switch(Tw){case e:return Ew;case 34:case 39:34!==e&&39!==e&&Vw(Tw);break;case 40:41===e&&Vw(e);break;case 92:Ow()}return Ew}function qw(e,t){for(;Ow()&&e+Tw!==57&&(e+Tw!==84||47!==Lw()););return"/*"+Fw(t,Ew-1)+"*"+pw(47===e?e:Ow())}function Ww(e){for(;!_w(Lw());)Ow();return Fw(e,Ew)}var Yw="-ms-",Gw="-moz-",Kw="-webkit-",Xw="comm",$w="rule",Qw="decl",Jw="@keyframes";function Zw(e,t){for(var n="",r=jw(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function eS(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Qw:return e.return=e.return||e.value;case Xw:return"";case Jw:return e.return=e.value+"{"+Zw(e.children,r)+"}";case $w:e.value=e.props.join(",")}return Nw(n=Zw(e.children,r))?e.return=e.value+"{"+n+"}":""}function tS(e){return function(t){t.root||(t=t.return)&&e(t)}}function nS(e){return Bw(rS("",null,null,null,[""],e=Mw(e),0,[0],e))}function rS(e,t,n,r,a,s,o,i,l){for(var c=0,d=0,u=o,m=0,h=0,p=0,x=1,f=1,g=1,b=0,y="",v=a,N=s,j=r,w=y;f;)switch(p=b,b=Ow()){case 40:if(108!=p&&58==yw(w,u-1)){-1!=bw(w+=gw(Uw(b),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:w+=Uw(b);break;case 9:case 10:case 13:case 32:w+=Hw(p);break;case 92:w+=zw(Rw()-1,7);continue;case 47:switch(Lw()){case 42:case 47:ww(sS(qw(Ow(),Rw()),t,n),l);break;default:w+="/"}break;case 123*x:i[c++]=Nw(w)*g;case 125*x:case 59:case 0:switch(b){case 0:case 125:f=0;case 59+d:-1==g&&(w=gw(w,/\f/g,"")),h>0&&Nw(w)-u&&ww(h>32?oS(w+";",r,n,u-1):oS(gw(w," ","")+";",r,n,u-2),l);break;case 59:w+=";";default:if(ww(j=aS(w,t,n,c,d,a,i,y,v=[],N=[],u),s),123===b)if(0===d)rS(w,t,j,j,v,s,u,i,N);else switch(99===m&&110===yw(w,3)?100:m){case 100:case 108:case 109:case 115:rS(e,j,j,r&&ww(aS(e,j,j,0,0,a,i,y,a,v=[],u),N),a,N,u,i,r?v:N);break;default:rS(w,j,j,j,[""],N,0,i,N)}}c=d=h=0,x=g=1,y=w="",u=o;break;case 58:u=1+Nw(w),h=p;default:if(x<1)if(123==b)--x;else if(125==b&&0==x++&&125==Pw())continue;switch(w+=pw(b),b*x){case 38:g=d>0?1:(w+="\f",-1);break;case 44:i[c++]=(Nw(w)-1)*g,g=1;break;case 64:45===Lw()&&(w+=Uw(Ow())),m=Lw(),d=u=Nw(y=w+=Ww(Rw())),b++;break;case 45:45===p&&2==Nw(w)&&(x=0)}}return s}function aS(e,t,n,r,a,s,o,i,l,c,d){for(var u=a-1,m=0===a?s:[""],h=jw(m),p=0,x=0,f=0;p<r;++p)for(var g=0,b=vw(e,u+1,u=hw(x=o[p])),y=e;g<h;++g)(y=fw(x>0?m[g]+" "+b:gw(b,/&\f/g,m[g])))&&(l[f++]=y);return Iw(e,t,n,0===a?$w:i,l,c,d)}function sS(e,t,n){return Iw(e,t,n,Xw,pw(Tw),vw(e,2,-2),0)}function oS(e,t,n,r){return Iw(e,t,n,Qw,vw(e,0,r),vw(e,r+1,-1),r)}var iS=function(e,t,n){for(var r=0,a=0;r=a,a=Lw(),38===r&&12===a&&(t[n]=1),!_w(a);)Ow();return Fw(e,Ew)},lS=function(e,t){return Bw(function(e,t){var n=-1,r=44;do{switch(_w(r)){case 0:38===r&&12===Lw()&&(t[n]=1),e[n]+=iS(Ew-1,t,n);break;case 2:e[n]+=Uw(r);break;case 4:if(44===r){e[++n]=58===Lw()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=pw(r)}}while(r=Ow());return e}(Mw(e),t))},cS=new WeakMap,dS=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||cS.get(n))&&!r){cS.set(e,!0);for(var a=[],s=lS(t,a),o=n.props,i=0,l=0;i<s.length;i++)for(var c=0;c<o.length;c++,l++)e.props[l]=a[i]?s[i].replace(/&\f/g,o[c]):o[c]+" "+s[i]}}},uS=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function mS(e,t){switch(function(e,t){return 45^yw(e,0)?(((t<<2^yw(e,0))<<2^yw(e,1))<<2^yw(e,2))<<2^yw(e,3):0}(e,t)){case 5103:return Kw+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kw+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Kw+e+Gw+e+Yw+e+e;case 6828:case 4268:return Kw+e+Yw+e+e;case 6165:return Kw+e+Yw+"flex-"+e+e;case 5187:return Kw+e+gw(e,/(\w+).+(:[^]+)/,Kw+"box-$1$2"+Yw+"flex-$1$2")+e;case 5443:return Kw+e+Yw+"flex-item-"+gw(e,/flex-|-self/,"")+e;case 4675:return Kw+e+Yw+"flex-line-pack"+gw(e,/align-content|flex-|-self/,"")+e;case 5548:return Kw+e+Yw+gw(e,"shrink","negative")+e;case 5292:return Kw+e+Yw+gw(e,"basis","preferred-size")+e;case 6060:return Kw+"box-"+gw(e,"-grow","")+Kw+e+Yw+gw(e,"grow","positive")+e;case 4554:return Kw+gw(e,/([^-])(transform)/g,"$1"+Kw+"$2")+e;case 6187:return gw(gw(gw(e,/(zoom-|grab)/,Kw+"$1"),/(image-set)/,Kw+"$1"),e,"")+e;case 5495:case 3959:return gw(e,/(image-set\([^]*)/,Kw+"$1$`$1");case 4968:return gw(gw(e,/(.+:)(flex-)?(.*)/,Kw+"box-pack:$3"+Yw+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kw+e+e;case 4095:case 3583:case 4068:case 2532:return gw(e,/(.+)-inline(.+)/,Kw+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Nw(e)-1-t>6)switch(yw(e,t+1)){case 109:if(45!==yw(e,t+4))break;case 102:return gw(e,/(.+:)(.+)-([^]+)/,"$1"+Kw+"$2-$3$1"+Gw+(108==yw(e,t+3)?"$3":"$2-$3"))+e;case 115:return~bw(e,"stretch")?mS(gw(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==yw(e,t+1))break;case 6444:switch(yw(e,Nw(e)-3-(~bw(e,"!important")&&10))){case 107:return gw(e,":",":"+Kw)+e;case 101:return gw(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kw+(45===yw(e,14)?"inline-":"")+"box$3$1"+Kw+"$2$3$1"+Yw+"$2box$3")+e}break;case 5936:switch(yw(e,t+11)){case 114:return Kw+e+Yw+gw(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Kw+e+Yw+gw(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Kw+e+Yw+gw(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Kw+e+Yw+e+e}return e}var hS=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Qw:e.return=mS(e.value,e.length);break;case Jw:return Zw([Dw(e,{value:gw(e.value,"@","@"+Kw)})],r);case $w:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zw([Dw(e,{props:[gw(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Zw([Dw(e,{props:[gw(t,/:(plac\w+)/,":"+Kw+"input-$1")]}),Dw(e,{props:[gw(t,/:(plac\w+)/,":-moz-$1")]}),Dw(e,{props:[gw(t,/:(plac\w+)/,Yw+"input-$1")]})],r)}return""}))}}],pS=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,a,s=e.stylisPlugins||hS,o={},i=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;i.push(e)}));var l,c=[dS,uS],d=[eS,tS((function(e){l.insert(e)}))],u=function(e){var t=jw(e);return function(n,r,a,s){for(var o="",i=0;i<t;i++)o+=e[i](n,r,a,s)||"";return o}}(c.concat(s,d));a=function(e,t,n,r){l=n,Zw(nS(e?e+"{"+t.styles+"}":t.styles),u),r&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new mw({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return m.sheet.hydrate(i),m};var xS=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var fS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function gS(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var bS=/[A-Z]|^ms/g,yS=/_EMO_([^_]+?)_([^]*?)_EMO_/g,vS=function(e){return 45===e.charCodeAt(1)},NS=function(e){return null!=e&&"boolean"!==typeof e},jS=gS((function(e){return vS(e)?e:e.replace(bS,"-$&").toLowerCase()})),wS=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(yS,(function(e,t,n){return CS={name:t,styles:n,next:CS},t}))}return 1===fS[e]||vS(e)||"number"!==typeof t||0===t?t:t+"px"};function SS(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var a=n;if(1===a.anim)return CS={name:a.name,styles:a.styles,next:CS},a.name;var s=n;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)CS={name:o.name,styles:o.styles,next:CS},o=o.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=SS(e,t,n[a])+";";else for(var s in n){var o=n[s];if("object"!==typeof o){var i=o;null!=t&&void 0!==t[i]?r+=s+"{"+t[i]+"}":NS(i)&&(r+=jS(s)+":"+wS(s,i)+";")}else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=SS(e,t,o);switch(s){case"animation":case"animationName":r+=jS(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var c=0;c<o.length;c++)NS(o[c])&&(r+=jS(s)+":"+wS(s,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=CS,l=n(e);return CS=i,SS(e,t,l)}}var c=n;if(null==t)return c;var d=t[c];return void 0!==d?d:c}var CS,kS=/label:\s*([^\s;{]+)\s*(;|$)/g;function ES(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";CS=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,a+=SS(n,t,s)):a+=s[0];for(var o=1;o<e.length;o++){if(a+=SS(n,t,e[o]),r)a+=s[o]}kS.lastIndex=0;for(var i,l="";null!==(i=kS.exec(a));)l+="-"+i[1];var c=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(a)+l;return{name:c,styles:a,next:CS}}var TS=!!r.useInsertionEffect&&r.useInsertionEffect,AS=TS||function(e){return e()},IS=(TS||t.useLayoutEffect,t.createContext("undefined"!==typeof HTMLElement?pS({key:"css"}):null)),DS=(IS.Provider,function(e){return(0,t.forwardRef)((function(n,r){var a=(0,t.useContext)(IS);return e(n,a,r)}))}),PS=t.createContext({});var OS={}.hasOwnProperty,LS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",RS=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return xS(t,n,r),AS((function(){return function(e,t,n){xS(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)})),null},FS=DS((function(e,n,r){var a=e.css;"string"===typeof a&&void 0!==n.registered[a]&&(a=n.registered[a]);var s=e[LS],o=[a],i="";"string"===typeof e.className?i=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(n.registered,o,e.className):null!=e.className&&(i=e.className+" ");var l=ES(o,void 0,t.useContext(PS));i+=n.key+"-"+l.name;var c={};for(var d in e)OS.call(e,d)&&"css"!==d&&d!==LS&&(c[d]=e[d]);return c.className=i,r&&(c.ref=r),t.createElement(t.Fragment,null,t.createElement(RS,{cache:n,serialized:l,isStringTag:"string"===typeof s}),t.createElement(s,c))})),_S=FS,MS=(n(219),function(e,n){var r=arguments;if(null==n||!OS.call(n,"css"))return t.createElement.apply(void 0,r);var a=r.length,s=new Array(a);s[0]=_S,s[1]=function(e,t){var n={};for(var r in t)OS.call(t,r)&&(n[r]=t[r]);return n[LS]=e,n}(e,n);for(var o=2;o<a;o++)s[o]=r[o];return t.createElement.apply(null,s)});!function(e){var t;t||(t=e.JSX||(e.JSX={}))}(MS||(MS={}));function BS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ES(t)}const US=Math.min,HS=Math.max,zS=Math.round,VS=Math.floor,qS=e=>({x:e,y:e});function WS(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function YS(){return"undefined"!==typeof window}function GS(e){return $S(e)?(e.nodeName||"").toLowerCase():"#document"}function KS(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function XS(e){var t;return null==(t=($S(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function $S(e){return!!YS()&&(e instanceof Node||e instanceof KS(e).Node)}function QS(e){return!!YS()&&(e instanceof Element||e instanceof KS(e).Element)}function JS(e){return!!YS()&&(e instanceof HTMLElement||e instanceof KS(e).HTMLElement)}function ZS(e){return!(!YS()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof KS(e).ShadowRoot)}function eC(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=rC(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function tC(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function nC(e){return["html","body","#document"].includes(GS(e))}function rC(e){return KS(e).getComputedStyle(e)}function aC(e){if("html"===GS(e))return e;const t=e.assignedSlot||e.parentNode||ZS(e)&&e.host||XS(e);return ZS(t)?t.host:t}function sC(e){const t=aC(e);return nC(t)?e.ownerDocument?e.ownerDocument.body:e.body:JS(t)&&eC(t)?t:sC(t)}function oC(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=sC(e),s=a===(null==(r=e.ownerDocument)?void 0:r.body),o=KS(a);if(s){const e=iC(o);return t.concat(o,o.visualViewport||[],eC(a)?a:[],e&&n?oC(e):[])}return t.concat(a,oC(a,[],n))}function iC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function lC(e){const t=rC(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=JS(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,i=zS(n)!==s||zS(r)!==o;return i&&(n=s,r=o),{width:n,height:r,$:i}}function cC(e){return QS(e)?e:e.contextElement}function dC(e){const t=cC(e);if(!JS(t))return qS(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=lC(t);let o=(s?zS(n.width):n.width)/r,i=(s?zS(n.height):n.height)/a;return o&&Number.isFinite(o)||(o=1),i&&Number.isFinite(i)||(i=1),{x:o,y:i}}const uC=qS(0);function mC(e){const t=KS(e);return tC()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:uC}function hC(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),s=cC(e);let o=qS(1);t&&(r?QS(r)&&(o=dC(r)):o=dC(e));const i=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==KS(e))&&t}(s,n,r)?mC(s):qS(0);let l=(a.left+i.x)/o.x,c=(a.top+i.y)/o.y,d=a.width/o.x,u=a.height/o.y;if(s){const e=KS(s),t=r&&QS(r)?KS(r):r;let n=e,a=iC(n);for(;a&&r&&t!==n;){const e=dC(a),t=a.getBoundingClientRect(),r=rC(a),s=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=s,c+=o,n=KS(a),a=iC(n)}}return WS({width:d,height:u,x:l,y:c})}function pC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xC(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:i="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=cC(e),d=a||s?[...c?oC(c):[],...oC(t)]:[];d.forEach((e=>{a&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const u=c&&i?function(e,t){let n,r=null;const a=XS(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(i,l){void 0===i&&(i=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:h}=c;if(i||t(),!m||!h)return;const p={rootMargin:-VS(u)+"px "+-VS(a.clientWidth-(d+m))+"px "+-VS(a.clientHeight-(u+h))+"px "+-VS(d)+"px",threshold:HS(0,US(1,l))||1};let x=!0;function f(t){const r=t[0].intersectionRatio;if(r!==l){if(!x)return o();r?o(!1,r):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}1!==r||pC(c,e.getBoundingClientRect())||o(),x=!1}try{r=new IntersectionObserver(f,J(J({},p),{},{root:a.ownerDocument}))}catch(g){r=new IntersectionObserver(f,p)}r.observe(e)}(!0),s}(c,n):null;let m,h=-1,p=null;o&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let x=l?hC(e):null;return l&&function t(){const r=hC(e);x&&!pC(x,r)&&n();x=r,m=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{a&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(m)}}var fC=t.useLayoutEffect,gC=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],bC=function(){};function yC(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function vC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var s=[].concat(r);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(yC(e,o)));return s.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var NC=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===K(e)&&null!==e?[e]:[];var t},jC=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,J({},yp(e,gC))},wC=function(e,t,n){var r=e.cx,a=e.getStyles,s=e.getClassNames,o=e.className;return{css:a(t,e),className:r(null!==n&&void 0!==n?n:{},s(t,e),o)}};function SC(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function CC(e){return SC(e)?window.pageYOffset:e.scrollTop}function kC(e,t){SC(e)?window.scrollTo(0,t):e.scrollTop=t}function EC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bC,a=CC(e),s=t-a,o=0;!function t(){var i=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(o+=10,a,s,n);kC(e,i),o<n?window.requestAnimationFrame(t):r(e)}()}function TC(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=t.offsetHeight/3;r.bottom+a>n.bottom?kC(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):r.top-a<n.top&&kC(e,Math.max(t.offsetTop-a,0))}function AC(){try{return document.createEvent("TouchEvent"),!0}catch(dm){return!1}}var IC=!1,DC={get passive(){return IC=!0}},PC="undefined"!==typeof window?window:{};PC.addEventListener&&PC.removeEventListener&&(PC.addEventListener("p",bC,DC),PC.removeEventListener("p",bC,!1));var OC=IC;function LC(e){return null!=e}function RC(e,t,n){return e?t:n}var FC=["children","innerProps"],_C=["children","innerProps"];function MC(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,a=e.placement,s=e.shouldScroll,o=e.isFixedPosition,i=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var a=e;a=a.parentElement;)if(t=getComputedStyle(a),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return a;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var d,u=l.getBoundingClientRect().height,m=n.getBoundingClientRect(),h=m.bottom,p=m.height,x=m.top,f=n.offsetParent.getBoundingClientRect().top,g=o?window.innerHeight:SC(d=l)?window.innerHeight:d.clientHeight,b=CC(l),y=parseInt(getComputedStyle(n).marginBottom,10),v=parseInt(getComputedStyle(n).marginTop,10),N=f-v,j=g-x,w=N+b,S=u-b-x,C=h-g+b+y,k=b+x-v,E=160;switch(a){case"auto":case"bottom":if(j>=p)return{placement:"bottom",maxHeight:t};if(S>=p&&!o)return s&&EC(l,C,E),{placement:"bottom",maxHeight:t};if(!o&&S>=r||o&&j>=r)return s&&EC(l,C,E),{placement:"bottom",maxHeight:o?j-y:S-y};if("auto"===a||o){var T=t,A=o?N:w;return A>=r&&(T=Math.min(A-y-i,t)),{placement:"top",maxHeight:T}}if("bottom"===a)return s&&kC(l,C),{placement:"bottom",maxHeight:t};break;case"top":if(N>=p)return{placement:"top",maxHeight:t};if(w>=p&&!o)return s&&EC(l,k,E),{placement:"top",maxHeight:t};if(!o&&w>=r||o&&N>=r){var I=t;return(!o&&w>=r||o&&N>=r)&&(I=o?N-v:w-v),s&&EC(l,k,E),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return c}var BC,UC=function(e){return"auto"===e?"bottom":e},HC=(0,t.createContext)(null),zC=function(e){var n=e.children,r=e.minMenuHeight,a=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,i=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(HC)||{}).setPortalPlacement,d=(0,t.useRef)(null),u=rw((0,t.useState)(a),2),m=u[0],h=u[1],p=rw((0,t.useState)(null),2),x=p[0],f=p[1],g=l.spacing.controlHeight;return fC((function(){var e=d.current;if(e){var t="fixed"===o,n=MC({maxHeight:a,menuEl:e,minHeight:r,placement:s,shouldScroll:i&&!t,isFixedPosition:t,controlHeight:g});h(n.maxHeight),f(n.placement),null===c||void 0===c||c(n.placement)}}),[a,s,o,i,r,c,g]),n({ref:d,placerProps:J(J({},e),{},{placement:x||UC(s),maxHeight:m})})},VC=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return MS("div",sw({},wC(e,"menu",{menu:!0}),{ref:n},r),t)},qC=function(e,t){var n=e.theme,r=n.spacing.baseUnit,a=n.colors;return J({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},WC=qC,YC=qC,GC=["size"],KC=["innerProps","isRtl","size"];var XC={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},$C=function(e){var t=e.size,n=yp(e,GC);return MS("svg",sw({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:XC},n))},QC=function(e){return MS($C,sw({size:20},e),MS("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},JC=function(e){return MS($C,sw({size:20},e),MS("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ZC=function(e,t){var n=e.isFocused,r=e.theme,a=r.spacing.baseUnit,s=r.colors;return J({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*a,":hover":{color:n?s.neutral80:s.neutral40}})},ek=ZC,tk=ZC,nk=function(){var e=BS.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(BC||(BC=cm(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),rk=function(e){var t=e.delay,n=e.offset;return MS("span",{css:BS({animation:"".concat(nk," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ak=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,a=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return MS("div",sw({ref:a},wC(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":o}),s,{"aria-disabled":n||void 0}),t)},sk=["data"],ok=function(e){var t=e.children,n=e.cx,r=e.getStyles,a=e.getClassNames,s=e.Heading,o=e.headingProps,i=e.innerProps,l=e.label,c=e.theme,d=e.selectProps;return MS("div",sw({},wC(e,"group",{group:!0}),i),MS(s,sw({},o,{selectProps:d,theme:c,getStyles:r,getClassNames:a,cx:n}),l),MS("div",null,t))},ik=["innerRef","isDisabled","isHidden","inputClassName"],lk={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},ck={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":J({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},lk)},dk=function(e){return J({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},lk)},uk=function(e){var t=e.children,n=e.innerProps;return MS("div",n,t)};var mk=function(e){var t=e.children,n=e.components,r=e.data,a=e.innerProps,s=e.isDisabled,o=e.removeProps,i=e.selectProps,l=n.Container,c=n.Label,d=n.Remove;return MS(l,{data:r,innerProps:J(J({},wC(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:i},MS(c,{data:r,innerProps:J({},wC(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:i},t),MS(d,{data:r,innerProps:J(J({},wC(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:i}))},hk={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return MS("div",sw({},wC(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||MS(QC,null))},Control:ak,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return MS("div",sw({},wC(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||MS(JC,null))},DownChevron:JC,CrossIcon:QC,Group:ok,GroupHeading:function(e){var t=jC(e);t.data;var n=yp(t,sk);return MS("div",sw({},wC(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return MS("div",sw({},wC(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return MS("span",sw({},t,wC(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=jC(e),a=r.innerRef,s=r.isDisabled,o=r.isHidden,i=r.inputClassName,l=yp(r,ik);return MS("div",sw({},wC(e,"input",{"input-container":!0}),{"data-value":n||""}),MS("input",sw({className:t({input:!0},i),ref:a,style:dk(o),disabled:s},l)))},LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,a=void 0===r?4:r,s=yp(e,KC);return MS("div",sw({},wC(J(J({},s),{},{innerProps:t,isRtl:n,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),MS(rk,{delay:0,offset:n}),MS(rk,{delay:160,offset:!0}),MS(rk,{delay:320,offset:!n}))},Menu:VC,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,a=e.isMulti;return MS("div",sw({},wC(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,a=e.controlElement,s=e.innerProps,o=e.menuPlacement,i=e.menuPosition,l=(0,t.useRef)(null),c=(0,t.useRef)(null),d=rw((0,t.useState)(UC(o)),2),u=d[0],m=d[1],h=(0,t.useMemo)((function(){return{setPortalPlacement:m}}),[]),p=rw((0,t.useState)(null),2),x=p[0],f=p[1],g=(0,t.useCallback)((function(){if(a){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(a),t="fixed"===i?0:window.pageYOffset,n=e[u]+t;n===(null===x||void 0===x?void 0:x.offset)&&e.left===(null===x||void 0===x?void 0:x.rect.left)&&e.width===(null===x||void 0===x?void 0:x.rect.width)||f({offset:n,rect:e})}}),[a,i,u,null===x||void 0===x?void 0:x.offset,null===x||void 0===x?void 0:x.rect.left,null===x||void 0===x?void 0:x.rect.width]);fC((function(){g()}),[g]);var b=(0,t.useCallback)((function(){"function"===typeof c.current&&(c.current(),c.current=null),a&&l.current&&(c.current=xC(a,l.current,g,{elementResize:"ResizeObserver"in window}))}),[a,g]);fC((function(){b()}),[b]);var y=(0,t.useCallback)((function(e){l.current=e,b()}),[b]);if(!n&&"fixed"!==i||!x)return null;var v=MS("div",sw({ref:y},wC(J(J({},e),{},{offset:x.offset,position:i,rect:x.rect}),"menuPortal",{"menu-portal":!0}),s),r);return MS(HC.Provider,{value:h},n?(0,_d.createPortal)(v,n):v)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,a=yp(e,_C);return MS("div",sw({},wC(J(J({},a),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,a=yp(e,FC);return MS("div",sw({},wC(J(J({},a),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:mk,MultiValueContainer:uk,MultiValueLabel:uk,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return MS("div",sw({role:"button"},n),t||MS(QC,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,a=e.isSelected,s=e.innerRef,o=e.innerProps;return MS("div",sw({},wC(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":a}),{ref:s,"aria-disabled":n},o),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return MS("div",sw({},wC(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,a=e.isRtl;return MS("div",sw({},wC(e,"container",{"--is-disabled":r,"--is-rtl":a}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return MS("div",sw({},wC(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,a=e.hasValue;return MS("div",sw({},wC(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":a}),n),t)}},pk=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function xk(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],a=t[n],!(r===a||pk(r)&&pk(a)))return!1;var r,a;return!0}for(var fk={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},gk=function(e){return MS("span",sw({css:fk},e))},bk={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(r,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,a=e.label,s=void 0===a?"":a,o=e.selectValue,i=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,d=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&o)return"value ".concat(s," focused, ").concat(d(o,n),".");if("menu"===t&&c){var u=i?" disabled":"",m="".concat(l?" selected":"").concat(u);return"".concat(s).concat(m,", ").concat(d(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},yk=function(e){var n=e.ariaSelection,r=e.focusedOption,a=e.focusedValue,s=e.focusableOptions,o=e.isFocused,i=e.selectValue,l=e.selectProps,c=e.id,d=e.isAppleDevice,u=l.ariaLiveMessages,m=l.getOptionLabel,h=l.inputValue,p=l.isMulti,x=l.isOptionDisabled,f=l.isSearchable,g=l.menuIsOpen,b=l.options,y=l.screenReaderStatus,v=l.tabSelectsValue,N=l.isLoading,j=l["aria-label"],w=l["aria-live"],S=(0,t.useMemo)((function(){return J(J({},bk),u||{})}),[u]),C=(0,t.useMemo)((function(){var e,t="";if(n&&S.onChange){var r=n.option,a=n.options,s=n.removedValue,o=n.removedValues,l=n.value,c=s||r||(e=l,Array.isArray(e)?null:e),d=c?m(c):"",u=a||o||void 0,h=u?u.map(m):[],p=J({isDisabled:c&&x(c,i),label:d,labels:h},n);t=S.onChange(p)}return t}),[n,S,x,i,m]),k=(0,t.useMemo)((function(){var e="",t=r||a,n=!!(r&&i&&i.includes(r));if(t&&S.onFocus){var o={focused:t,label:m(t),isDisabled:x(t,i),isSelected:n,options:s,context:t===r?"menu":"value",selectValue:i,isAppleDevice:d};e=S.onFocus(o)}return e}),[r,a,m,x,S,s,i,d]),E=(0,t.useMemo)((function(){var e="";if(g&&b.length&&!N&&S.onFilter){var t=y({count:s.length});e=S.onFilter({inputValue:h,resultsMessage:t})}return e}),[s,h,g,S,b,y,N]),T="initial-input-focus"===(null===n||void 0===n?void 0:n.action),A=(0,t.useMemo)((function(){var e="";if(S.guidance){var t=a?"value":g?"menu":"input";e=S.guidance({"aria-label":j,context:t,isDisabled:r&&x(r,i),isMulti:p,isSearchable:f,tabSelectsValue:v,isInitialFocus:T})}return e}),[j,r,a,p,x,f,g,S,i,v,T]),I=MS(t.Fragment,null,MS("span",{id:"aria-selection"},C),MS("span",{id:"aria-focused"},k),MS("span",{id:"aria-results"},E),MS("span",{id:"aria-guidance"},A));return MS(t.Fragment,null,MS(gk,{id:c},T&&I),MS(gk,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!T&&I))},vk=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],Nk=new RegExp("["+vk.map((function(e){return e.letters})).join("")+"]","g"),jk={},wk=0;wk<vk.length;wk++)for(var Sk=vk[wk],Ck=0;Ck<Sk.letters.length;Ck++)jk[Sk.letters[Ck]]=Sk.base;var kk=function(e){return e.replace(Nk,(function(e){return jk[e]}))},Ek=function(e,t){void 0===t&&(t=xk);var n=null;function r(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var s=e.apply(this,r);return n={lastResult:s,lastArgs:r,lastThis:this},s}return r.clear=function(){n=null},r}(kk),Tk=function(e){return e.replace(/^\s+|\s+$/g,"")},Ak=function(e){return"".concat(e.label," ").concat(e.value)},Ik=["innerRef"];function Dk(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Object.entries(e).filter((function(e){var t=rw(e,1)[0];return!n.includes(t)}));return a.reduce((function(e,t){var n=rw(t,2),r=n[0],a=n[1];return e[r]=a,e}),{})}(yp(e,Ik),"onExited","in","enter","exit","appear");return MS("input",sw({ref:t},n,{css:BS({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Pk=["boxSizing","height","overflow","paddingRight","position"],Ok={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Lk(e){e.cancelable&&e.preventDefault()}function Rk(e){e.stopPropagation()}function Fk(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function _k(){return"ontouchstart"in window||navigator.maxTouchPoints}var Mk=!("undefined"===typeof window||!window.document||!window.document.createElement),Bk=0,Uk={capture:!1,passive:!1};var Hk=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},zk={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Vk(e){var n=e.children,r=e.lockEnabled,a=e.captureEnabled,s=function(e){var n=e.isEnabled,r=e.onBottomArrive,a=e.onBottomLeave,s=e.onTopArrive,o=e.onTopLeave,i=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),d=(0,t.useRef)(null),u=(0,t.useCallback)((function(e,t){if(null!==d.current){var n=d.current,c=n.scrollTop,u=n.scrollHeight,m=n.clientHeight,h=d.current,p=t>0,x=u-m-c,f=!1;x>t&&i.current&&(a&&a(e),i.current=!1),p&&l.current&&(o&&o(e),l.current=!1),p&&t>x?(r&&!i.current&&r(e),h.scrollTop=u,f=!0,i.current=!0):!p&&-t>c&&(s&&!l.current&&s(e),h.scrollTop=0,f=!0,l.current=!0),f&&function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()}(e)}}),[r,a,s,o]),m=(0,t.useCallback)((function(e){u(e,e.deltaY)}),[u]),h=(0,t.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),p=(0,t.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;u(e,t)}),[u]),x=(0,t.useCallback)((function(e){if(e){var t=!!OC&&{passive:!1};e.addEventListener("wheel",m,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",p,t)}}),[p,h,m]),f=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",m,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",p,!1))}),[p,h,m]);return(0,t.useEffect)((function(){if(n){var e=d.current;return x(e),function(){f(e)}}}),[n,x,f]),function(e){d.current=e}}({isEnabled:void 0===a||a,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),o=function(e){var n=e.isEnabled,r=e.accountForScrollbars,a=void 0===r||r,s=(0,t.useRef)({}),o=(0,t.useRef)(null),i=(0,t.useCallback)((function(e){if(Mk){var t=document.body,n=t&&t.style;if(a&&Pk.forEach((function(e){var t=n&&n[e];s.current[e]=t})),a&&Bk<1){var r=parseInt(s.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,i=window.innerWidth-o+r||0;Object.keys(Ok).forEach((function(e){var t=Ok[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(i,"px"))}t&&_k()&&(t.addEventListener("touchmove",Lk,Uk),e&&(e.addEventListener("touchstart",Fk,Uk),e.addEventListener("touchmove",Rk,Uk))),Bk+=1}}),[a]),l=(0,t.useCallback)((function(e){if(Mk){var t=document.body,n=t&&t.style;Bk=Math.max(Bk-1,0),a&&Bk<1&&Pk.forEach((function(e){var t=s.current[e];n&&(n[e]=t)})),t&&_k()&&(t.removeEventListener("touchmove",Lk,Uk),e&&(e.removeEventListener("touchstart",Fk,Uk),e.removeEventListener("touchmove",Rk,Uk)))}}),[a]);return(0,t.useEffect)((function(){if(n){var e=o.current;return i(e),function(){l(e)}}}),[n,i,l]),function(e){o.current=e}}({isEnabled:r});return MS(t.Fragment,null,r&&MS("div",{onClick:Hk,css:zk}),n((function(e){s(e),o(e)})))}var qk={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Wk=function(e){var t=e.name,n=e.onFocus;return MS("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:qk,value:"",onChange:function(){}})};function Yk(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function Gk(){return Yk(/^Mac/i)}function Kk(){return Yk(/^iPhone/i)||Yk(/^iPad/i)||Gk()&&navigator.maxTouchPoints>1}var Xk={clearIndicator:tk,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,a=e.theme,s=a.colors,o=a.borderRadius;return J({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?s.neutral5:s.neutral0,borderColor:n?s.neutral10:r?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:r?s.primary:s.neutral30}})},dropdownIndicator:ek,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,a=n.spacing;return J({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,a=r.spacing.baseUnit,s=r.colors;return J({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var n=e.isDisabled,r=e.value,a=e.theme,s=a.spacing,o=a.colors;return J(J({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},ck),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,a=e.theme,s=a.colors,o=a.spacing.baseUnit;return J({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?s.neutral60:s.neutral20,padding:2*o})},loadingMessage:YC,menu:function(e,t){var n,r=e.placement,a=e.theme,s=a.borderRadius,o=a.spacing,i=a.colors;return J(($(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),$(n,"position","absolute"),$(n,"width","100%"),$(n,"zIndex",1),n),t?{}:{backgroundColor:i.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return J({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,a=n.borderRadius,s=n.colors;return J({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,a=n.colors,s=e.cropWithEllipsis;return J({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,a=n.borderRadius,s=n.colors,o=e.isFocused;return J({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:WC,option:function(e,t){var n=e.isDisabled,r=e.isFocused,a=e.isSelected,s=e.theme,o=s.spacing,i=s.colors;return J({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?i.primary:r?i.primary25:"transparent",color:n?i.neutral20:a?i.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:n?void 0:a?i.primary:i.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,a=n.colors;return J({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,a=r.spacing,s=r.colors;return J({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return J({alignItems:"center",display:r&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var $k,Qk={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Jk={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:AC(),captureMenuScroll:!AC(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=J({ignoreCase:!0,ignoreAccents:!0,stringify:Ak,trim:!0,matchFrom:"any"},$k),r=n.ignoreCase,a=n.ignoreAccents,s=n.stringify,o=n.trim,i=n.matchFrom,l=o?Tk(t):t,c=o?Tk(s(e)):s(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),a&&(l=Ek(l),c=kk(c)),"start"===i?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(dm){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Zk(e,t,n,r){return{type:"option",data:t,isDisabled:iE(e,t,n),isSelected:lE(e,t,n),label:sE(e,t),value:oE(e,t),index:r}}function eE(e,t){return e.options.map((function(n,r){if("options"in n){var a=n.options.map((function(n,r){return Zk(e,n,t,r)})).filter((function(t){return rE(e,t)}));return a.length>0?{type:"group",data:n,options:a,index:r}:void 0}var s=Zk(e,n,t,r);return rE(e,s)?s:void 0})).filter(LC)}function tE(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,uw(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function nE(e,t){return e.reduce((function(e,n){return"group"===n.type?e.push.apply(e,uw(n.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}})))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e}),[])}function rE(e,t){var n=e.inputValue,r=void 0===n?"":n,a=t.data,s=t.isSelected,o=t.label,i=t.value;return(!dE(e)||!s)&&cE(e,{label:o,value:i,data:a},r)}var aE=function(e,t){var n;return(null===(n=e.find((function(e){return e.data===t})))||void 0===n?void 0:n.id)||null},sE=function(e,t){return e.getOptionLabel(t)},oE=function(e,t){return e.getOptionValue(t)};function iE(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function lE(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=oE(e,t);return n.some((function(t){return oE(e,t)===r}))}function cE(e,t,n){return!e.filterOption||e.filterOption(t,n)}var dE=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},uE=1,mE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iw(e,t)}(r,e);var n=function(e){var t=cw();return function(){var n,r=lw(e);if(t){var a=lw(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return dw(this,n)}}(r);function r(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=Gk()||Kk(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,a=r.onChange,s=r.name;n.name=s,t.ariaOnChange(e,n),a(e,n)},t.setValue=function(e,n,r){var a=t.props,s=a.closeMenuOnSelect,o=a.isMulti,i=a.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:i}),s&&(t.setState({inputIsHiddenAfterUpdate:!o}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,a=n.isMulti,s=n.name,o=t.state.selectValue,i=a&&t.isOptionSelected(e,o),l=t.isOptionDisabled(e,o);if(i){var c=t.getOptionValue(e);t.setValue(o.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:s});a?t.setValue([].concat(uw(o),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,a=t.getOptionValue(e),s=r.filter((function(e){return t.getOptionValue(e)!==a})),o=RC(n,s,s[0]||null);t.onChange(o,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(RC(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],a=n.slice(0,n.length-1),s=RC(e,a,a[0]||null);r&&t.onChange(s,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return aE(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return nE(eE(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return vC.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return sE(t.props,e)},t.getOptionValue=function(e){return oE(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,a=Xk[e](n,r);a.boxSizing="border-box";var s=t.props.styles[e];return s?s(a,n):a},t.getClassNames=function(e,n){var r,a;return null===(r=(a=t.props.classNames)[e])||void 0===r?void 0:r.call(a,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,J(J({},hk),e.components);var e},t.buildCategorizedOptions=function(){return eE(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return tE(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:J({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,a=n.menuIsOpen;t.focusInput(),a?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&SC(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var a=Math.abs(r.clientX-t.initialTouchX),s=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=a>5||s>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return dE(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,a=n.backspaceRemovesValue,s=n.escapeClearsValue,o=n.inputValue,i=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,d=n.onKeyDown,u=n.tabSelectsValue,m=n.openMenuOnFocus,h=t.state,p=h.focusedOption,x=h.focusedValue,f=h.selectValue;if(!l&&("function"!==typeof d||(d(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||o)return;t.focusValue("previous");break;case"ArrowRight":if(!r||o)return;t.focusValue("next");break;case"Delete":case"Backspace":if(o)return;if(x)t.removeValue(x);else{if(!a)return;r?t.popValue():i&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!u||!p||m&&t.isOptionSelected(p,f))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(c){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:o}),t.onMenuClose()):i&&s&&t.clearValue();break;case" ":if(o)return;if(!c){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++uE),t.state.selectValue=NC(e.value),e.menuIsOpen&&t.state.selectValue.length){var a=t.getFocusableOptionsWithIds(),s=t.buildFocusableOptions(),o=s.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=a,t.state.focusedOption=s[o],t.state.focusedOptionId=aE(a,s[o])}return t}return function(e,t,n){t&&ow(e.prototype,t),n&&ow(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&TC(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,a=this.state.isFocused;(a&&!n&&e.isDisabled||a&&r&&!e.menuIsOpen)&&this.focusInput(),a&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):a||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(TC(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,a=n.isFocused,s=this.buildFocusableOptions(),o="first"===e?0:s.length-1;if(!this.props.isMulti){var i=s.indexOf(r[0]);i>-1&&(o=i)}this.scrollToFocusedOptionOnUpdate=!(a&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[o],focusedOptionId:this.getFocusedOptionId(s[o])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=n.indexOf(r);r||(a=-1);var s=n.length-1,o=-1;if(n.length){switch(e){case"previous":o=0===a?0:-1===a?s:a-1;break;case"next":a>-1&&a<s&&(o=a+1)}this.setState({inputIsHidden:-1!==o,focusedValue:n[o]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var a=0,s=r.indexOf(n);n||(s=-1),"up"===e?a=s>0?s-1:r.length-1:"down"===e?a=(s+1)%r.length:"pageup"===e?(a=s-t)<0&&(a=0):"pagedown"===e?(a=s+t)>r.length-1&&(a=r.length-1):"last"===e&&(a=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[a],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[a])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(Qk):J(J({},Qk),this.props.theme):Qk}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,a=this.getValue,s=this.selectOption,o=this.setValue,i=this.props,l=i.isMulti,c=i.isRtl,d=i.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:a,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:d,selectOption:s,selectProps:i,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return iE(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return lE(this.props,e,t)}},{key:"filterOption",value:function(e,t){return cE(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,a=e.inputId,s=e.inputValue,o=e.tabIndex,i=e.form,l=e.menuIsOpen,c=e.required,d=this.getComponents().Input,u=this.state,m=u.inputIsHidden,h=u.ariaSelection,p=this.commonProps,x=a||this.getElementId("input"),f=J(J(J({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===h||void 0===h?void 0:h.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(d,sw({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:x,innerRef:this.getInputRef,isDisabled:n,isHidden:m,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:o,form:i,type:"text",value:s},f)):t.createElement(Dk,sw({id:x,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:bC,onFocus:this.onInputFocus,disabled:n,tabIndex:o,inputMode:"none",form:i,value:""},f))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,a=n.MultiValueContainer,s=n.MultiValueLabel,o=n.MultiValueRemove,i=n.SingleValue,l=n.Placeholder,c=this.commonProps,d=this.props,u=d.controlShouldRenderValue,m=d.isDisabled,h=d.isMulti,p=d.inputValue,x=d.placeholder,f=this.state,g=f.selectValue,b=f.focusedValue,y=f.isFocused;if(!this.hasValue()||!u)return p?null:t.createElement(l,sw({},c,{key:"placeholder",isDisabled:m,isFocused:y,innerProps:{id:this.getElementId("placeholder")}}),x);if(h)return g.map((function(n,i){var l=n===b,d="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,sw({},c,{components:{Container:a,Label:s,Remove:o},isFocused:l,isDisabled:m,key:d,index:i,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(p)return null;var v=g[0];return t.createElement(i,sw({},c,{data:v,isDisabled:m}),this.formatOptionLabel(v,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,a=r.isDisabled,s=r.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||a||!this.hasValue()||s)return null;var i={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,sw({},n,{innerProps:i,isFocused:o}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,a=r.isDisabled,s=r.isLoading,o=this.state.isFocused;if(!e||!s)return null;return t.createElement(e,sw({},n,{innerProps:{"aria-hidden":"true"},isDisabled:a,isFocused:o}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var a=this.commonProps,s=this.props.isDisabled,o=this.state.isFocused;return t.createElement(r,sw({},a,{isDisabled:s,isFocused:o}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,a=this.state.isFocused,s={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,sw({},n,{innerProps:s,isDisabled:r,isFocused:a}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,a=n.GroupHeading,s=n.Menu,o=n.MenuList,i=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,d=n.Option,u=this.commonProps,m=this.state.focusedOption,h=this.props,p=h.captureMenuScroll,x=h.inputValue,f=h.isLoading,g=h.loadingMessage,b=h.minMenuHeight,y=h.maxMenuHeight,v=h.menuIsOpen,N=h.menuPlacement,j=h.menuPosition,w=h.menuPortalTarget,S=h.menuShouldBlockScroll,C=h.menuShouldScrollIntoView,k=h.noOptionsMessage,E=h.onMenuScrollToTop,T=h.onMenuScrollToBottom;if(!v)return null;var A,I=function(n,r){var a=n.type,s=n.data,o=n.isDisabled,i=n.isSelected,l=n.label,c=n.value,h=m===s,p=o?void 0:function(){return e.onOptionHover(s)},x=o?void 0:function(){return e.selectOption(s)},f="".concat(e.getElementId("option"),"-").concat(r),g={id:f,onClick:x,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":e.isAppleDevice?void 0:i};return t.createElement(d,sw({},u,{innerProps:g,data:s,isDisabled:o,isSelected:i,key:f,label:l,type:a,value:c,isFocused:h,innerRef:h?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())A=this.getCategorizedOptions().map((function(n){if("group"===n.type){var s=n.data,o=n.options,i=n.index,l="".concat(e.getElementId("group"),"-").concat(i),c="".concat(l,"-heading");return t.createElement(r,sw({},u,{key:l,data:s,options:o,Heading:a,headingProps:{id:c,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return I(e,"".concat(i,"-").concat(e.index))})))}if("option"===n.type)return I(n,"".concat(n.index))}));else if(f){var D=g({inputValue:x});if(null===D)return null;A=t.createElement(l,u,D)}else{var P=k({inputValue:x});if(null===P)return null;A=t.createElement(c,u,P)}var O={minMenuHeight:b,maxMenuHeight:y,menuPlacement:N,menuPosition:j,menuShouldScrollIntoView:C},L=t.createElement(zC,sw({},u,O),(function(n){var r=n.ref,a=n.placerProps,i=a.placement,l=a.maxHeight;return t.createElement(s,sw({},u,O,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:f,placement:i}),t.createElement(Vk,{captureEnabled:p,onTopArrive:E,onBottomArrive:T,lockEnabled:S},(function(n){return t.createElement(o,sw({},u,{innerRef:function(t){e.getMenuListRef(t),n(t)},innerProps:{role:"listbox","aria-multiselectable":u.isMulti,id:e.getElementId("listbox")},isLoading:f,maxHeight:l,focusedOption:m}),A)})))}));return w||"fixed"===j?t.createElement(i,sw({},u,{appendTo:w,controlElement:this.controlRef,menuPlacement:N,menuPosition:j}),L):L}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,a=n.isDisabled,s=n.isMulti,o=n.name,i=n.required,l=this.state.selectValue;if(i&&!this.hasValue()&&!a)return t.createElement(Wk,{name:o,onFocus:this.onValueInputFocus});if(o&&!a){if(s){if(r){var c=l.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:o,type:"hidden",value:c})}var d=l.length>0?l.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:o,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:o,type:"hidden",value:""});return t.createElement("div",null,d)}var u=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:o,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,a=n.focusedOption,s=n.focusedValue,o=n.isFocused,i=n.selectValue,l=this.getFocusableOptions();return t.createElement(yk,sw({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:a,focusedValue:s,isFocused:o,selectValue:i,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,a=e.SelectContainer,s=e.ValueContainer,o=this.props,i=o.className,l=o.id,c=o.isDisabled,d=o.menuIsOpen,u=this.state.isFocused,m=this.commonProps=this.getCommonProps();return t.createElement(a,sw({},m,{className:i,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:u}),this.renderLiveRegion(),t.createElement(n,sw({},m,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:u,menuIsOpen:d}),t.createElement(s,sw({},m,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,sw({},m,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,a=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,o=t.isFocused,i=t.prevWasFocused,l=t.instancePrefix,c=e.options,d=e.value,u=e.menuIsOpen,m=e.inputValue,h=e.isMulti,p=NC(d),x={};if(n&&(d!==n.value||c!==n.options||u!==n.menuIsOpen||m!==n.inputValue)){var f=u?function(e,t){return tE(eE(e,t))}(e,p):[],g=u?nE(eE(e,p),"".concat(l,"-option")):[],b=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,p):null,y=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,f);x={selectValue:p,focusedOption:y,focusedOptionId:aE(g,y),focusableOptionsWithIds:g,focusedValue:b,clearFocusValueOnUpdate:!1}}var v=null!=a&&e!==n?{inputIsHidden:a,inputIsHiddenAfterUpdate:void 0}:{},N=s,j=o&&i;return o&&!j&&(N={value:RC(h,p,p[0]||null),options:p,action:"initial-input-focus"},j=!i),"initial-input-focus"===(null===s||void 0===s?void 0:s.action)&&(N=null),J(J(J({},x),v),{},{prevProps:e,ariaSelection:N,prevWasFocused:j})}}]),r}(t.Component);mE.defaultProps=Jk;var hE=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,a=e.defaultMenuIsOpen,s=void 0!==a&&a,o=e.defaultValue,i=void 0===o?null:o,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,m=e.onMenuClose,h=e.onMenuOpen,p=e.value,x=yp(e,aw),f=rw((0,t.useState)(void 0!==l?l:r),2),g=f[0],b=f[1],y=rw((0,t.useState)(void 0!==c?c:s),2),v=y[0],N=y[1],j=rw((0,t.useState)(void 0!==p?p:i),2),w=j[0],S=j[1],C=(0,t.useCallback)((function(e,t){"function"===typeof d&&d(e,t),S(e)}),[d]),k=(0,t.useCallback)((function(e,t){var n;"function"===typeof u&&(n=u(e,t)),b(void 0!==n?n:e)}),[u]),E=(0,t.useCallback)((function(){"function"===typeof h&&h(),N(!0)}),[h]),T=(0,t.useCallback)((function(){"function"===typeof m&&m(),N(!1)}),[m]),A=void 0!==l?l:g,I=void 0!==c?c:v,D=void 0!==p?p:w;return J(J({},x),{},{inputValue:A,menuIsOpen:I,onChange:C,onInputChange:k,onMenuClose:T,onMenuOpen:E,value:D})}(e);return t.createElement(mE,sw({ref:n},r))})),pE=hE;const xE=e=>{let{sellPrice:n="",closingDate:r="",status:a="Active",ar:s="",onClosingDateChange:o=()=>{},onStatusChange:i=()=>{},onARChange:l=()=>{},listingCommission:c="",sellingCommission:d="",onListingCommissionChange:u=()=>{},onSellingCommissionChange:m=()=>{},goToNextSection:h=()=>{},goToPreviousSection:p=()=>{},tradeNumber:x="",saleClosingRows:f=[],commissionIncomeRows:g=[],outsideBrokersRows:b=[],editingSaleClosingIdx:y=null,editingCommissionIncomeIdx:v=null,editingOutsideBrokerIdx:N=null,brokerAgentName:j="",brokerBrokerage:w="",brokerSellingAmount:S="",onBrokerAgentNameChange:C=()=>{},onBrokerBrokerageChange:k=()=>{},onBrokerSellingAmountChange:E=()=>{},onAddCommissionInfo:T=()=>{},onEditSaleClosing:A=()=>{},onDeleteSaleClosing:I=()=>{},onEditCommissionIncome:D=()=>{},onDeleteCommissionIncome:P=()=>{},onEditOutsideBroker:O=()=>{},onDeleteOutsideBroker:L=()=>{},outsideBrokers:R=[],onCommissionTotalChange:F=()=>{},onUpdateSaleClosing:_=()=>{},onUpdateCommissionIncome:M=()=>{},onUpdateOutsideBroker:B=()=>{},onBrokerTotalChange:U=()=>{}}=e;const H=parseFloat(n)||0,z=parseFloat(c)||0,V=parseFloat(d)||0,q=parseFloat(S)||0,W=(0,t.useMemo)((()=>(H*z/100).toFixed(2)),[H,z]),Y=(0,t.useMemo)((()=>(H*V/100).toFixed(2)),[H,V]),G=(0,t.useMemo)((()=>(.13*W).toFixed(2)),[W]),K=(0,t.useMemo)((()=>(.13*Y).toFixed(2)),[Y]),X=(0,t.useMemo)((()=>(parseFloat(G)+parseFloat(K)).toFixed(2)),[G,K]),$=(0,t.useMemo)((()=>(parseFloat(W)+parseFloat(Y)+parseFloat(G)+parseFloat(K)).toFixed(2)),[W,Y,G,K]),Q=(0,t.useMemo)((()=>(.13*q).toFixed(2)),[q]),J=(0,t.useMemo)((()=>(q+parseFloat(Q)).toFixed(2)),[q,Q]);(0,t.useEffect)((()=>{E({target:{value:Y}})}),[Y,E]),(0,t.useEffect)((()=>{F($)}),[$,F]),(0,t.useEffect)((()=>{"function"===typeof U&&U(J)}),[J,U]);return(0,gp.jsxs)("div",{className:"py-8 px-2",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Commissions"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sale Closing Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sell Price"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:n,readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100",value:x,readOnly:!0})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Closing Date"}),(0,gp.jsx)("input",{type:"date",className:"w-full rounded border-gray-300 bg-gray-50",value:r,onChange:o})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,gp.jsxs)("select",{className:"w-full rounded border-gray-300 bg-gray-50",value:a,onChange:i,children:[(0,gp.jsx)("option",{value:"Active",children:"Active"}),(0,gp.jsx)("option",{value:"Sold",children:"Sold"})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AR"}),(0,gp.jsx)("input",{type:"text",name:"ar",value:s,onChange:l,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:!0})]})]}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Commission Income"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Income"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:"Commission",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Commission (%)"}),(0,gp.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:c,onChange:u,placeholder:"%"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Commission (%)"}),(0,gp.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:d,onChange:m,placeholder:"%"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Amount"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:W,readOnly:!0})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Amount"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:Y,readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Tax"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:G,readOnly:!0})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Tax"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:K,readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:X,readOnly:!0})]})]}),(0,gp.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100 font-semibold",value:$,readOnly:!0})]})})]}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Outside Brokers & Expenses"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Broker"}),(0,gp.jsxs)("select",{className:"w-full rounded border-gray-300 bg-gray-50",onChange:e=>{const t=e.target.value;if(t){const e=R.find((e=>"".concat(e.firstName," ").concat(e.lastName," - ").concat(e.company)===t));e&&(C({target:{value:"".concat(e.firstName," ").concat(e.lastName)}}),k({target:{value:e.company}}),E({target:{value:e.sellingAmount||""}}))}else C({target:{value:""}}),k({target:{value:""}}),E({target:{value:""}})},value:j&&w?"".concat(j," - ").concat(w):"",children:[(0,gp.jsx)("option",{value:"",children:"Select a Broker"}),R.map(((e,t)=>(0,gp.jsxs)("option",{value:"".concat(e.firstName," ").concat(e.lastName," - ").concat(e.company),children:[e.firstName," ",e.lastName," - ",e.company]},t)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agent Name"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:j,onChange:C})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brokerage"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:w,onChange:k})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selling Amount"}),(0,gp.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full rounded border-gray-300 bg-gray-50",value:S,onChange:E})]})]}),(0,gp.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End (Side)"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:(()=>{const e=R.find((e=>"".concat(e.firstName," ").concat(e.lastName)===j));return e&&e.end?e.end:""})(),readOnly:!0})]})}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-50",value:Q,readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,gp.jsx)("input",{type:"text",className:"w-full rounded border-gray-300 bg-gray-100 font-semibold",value:J,readOnly:!0})]})]})]})]}),(0,gp.jsxs)("div",{className:"mt-12 space-y-8",children:[(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold",children:"Sale Closing Information"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{const e={sellPrice:n,closingDate:r,tradeNumber:x,status:a,ar:s};null!==y&&"function"===typeof _?_(e):T({type:"saleClosing",data:e})},children:null!==y?"Update":"Add"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:A,disabled:0===f.length,children:"Edit"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:I,disabled:0===f.length,children:"Delete"})]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Sell Price"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Closing Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Trade Number"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"AR"})]})}),(0,gp.jsx)("tbody",{children:0===f.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No sale closing info added yet."})}):f.map(((e,t)=>(0,gp.jsxs)("tr",{className:"text-center",children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellPrice}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.closingDate}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.tradeNumber}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.status}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.ar})]},t)))})]})})]}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold",children:"Commission Income"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{const e={income:"Commission",listingAmount:W,sellingAmount:Y,listingTax:G,sellingTax:K,tax:(parseFloat(G)+parseFloat(K)).toFixed(2),total:$};null!==v&&"function"===typeof M?M(e):T({type:"commissionIncome",data:e})},children:null!==v?"Update":"Add"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:D,disabled:0===g.length,children:"Edit"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:P,disabled:0===g.length,children:"Delete"})]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Income"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Listing Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Selling Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Tax"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:0===g.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No commission income info added yet."})}):g.map(((e,t)=>(0,gp.jsxs)("tr",{className:"text-center",children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.income}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.listingAmount}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellingAmount}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.tax}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.total})]},t)))})]})})]}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold",children:"Outside Brokers & Expenses"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("button",{className:"px-3 py-1 bg-yellow-600 text-white rounded mr-2",onClick:()=>{if(j||w||S){const e={agentName:j,brokerage:w,sellingAmount:S,tax:Q,total:J};null!==N&&"function"===typeof B?B(e):T({type:"outsideBroker",data:e})}},children:null!==N?"Update":"Add"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-blue-600 text-white rounded mr-2",onClick:O,disabled:0===b.length,children:"Edit"}),(0,gp.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:L,disabled:0===b.length,children:"Delete"})]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Brokerage"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Selling Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Tax"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:0===b.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No outside brokers added yet."})}):b.map(((e,t)=>(0,gp.jsxs)("tr",{className:"text-center",children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.agentName}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.brokerage}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.sellingAmount}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.tax}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.total})]},t)))})]})})]})]}),(0,gp.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,gp.jsx)("button",{onClick:p,className:"bg-gray-500 text-white px-6 py-2 rounded font-semibold hover:bg-gray-600",children:"Previous"}),(0,gp.jsx)("button",{onClick:h,className:"bg-yellow-700 text-white px-6 py-2 rounded font-semibold hover:bg-yellow-800",children:"Next"})]})]})},fE=e=>{let{keyInfoData:n,handleKeyInfoChange:r,goToNextSection:a,lookupSuccess:s,lookupError:o,isLoading:i,isLoadingTradeNumber:l,nextTradeNumber:c,listings:d,setKeyInfoData:u,onListingSelected:m,trades:h=[],currentTradeNumber:p=null}=e;const[x,f]=(0,t.useState)(n.conditions||[]),[g,b]=(0,t.useState)({conditionText:"",dueDate:"",conditionMetDate:""});(0,t.useEffect)((()=>{n.conditions&&f(n.conditions)}),[n.conditions]);const y=(e,t)=>{b((n=>J(J({},n),{},{[e]:t})))};return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold",children:"Trade Record"}),(0,gp.jsx)("h2",{className:"text-xl font-bold",children:"Dates"})]}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a()},children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6",children:[(0,gp.jsxs)("div",{className:"space-y-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",name:"tradeNumber",value:c,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}),l&&(0,gp.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Loading..."})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,gp.jsxs)("select",{name:"status",value:n.status,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"AVAILABLE",children:"Available"}),(0,gp.jsx)("option",{value:"SOLD",children:"Sold"})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Number *"}),(0,gp.jsx)(pE,{options:d.sort(((e,t)=>t.listingNumber-e.listingNumber)).map((e=>{const t=h.some((t=>{var n;return(null===(n=t.keyInfo)||void 0===n?void 0:n.listingNumber)===e.listingNumber.toString()&&t.tradeNumber!==p}));return{value:e.listingNumber.toString(),label:"".concat(e.listingNumber," - ").concat(e.address.streetNumber," ").concat(e.address.streetName).concat(t?" (Already Used)":""),listing:e,isUsed:t,isDisabled:t}})),value:n.listingNumber?{value:n.listingNumber,label:d.find((e=>e.listingNumber.toString()===n.listingNumber))?"".concat(n.listingNumber," - ").concat(d.find((e=>e.listingNumber.toString()===n.listingNumber)).address.streetNumber," ").concat(d.find((e=>e.listingNumber.toString()===n.listingNumber)).address.streetName):n.listingNumber}:null,onChange:e=>{if(e&&e.listing){if(e.isUsed)return void $p.error("Listing ".concat(e.listing.listingNumber," is already used in another trade. Please select a different listing."));const t=e.listing;u((e=>{var n,r,a,s,o,i,l,c,d,u,m,h,p,x,f,g,b,y,v,N,j,w,S,C,k;return J(J({},e),{},{listingNumber:null!==(n=null===(r=t.listingNumber)||void 0===r?void 0:r.toString())&&void 0!==n?n:e.listingNumber,streetNumber:null!==(a=null===(s=t.address)||void 0===s?void 0:s.streetNumber)&&void 0!==a?a:e.streetNumber,streetName:null!==(o=null===(i=t.address)||void 0===i?void 0:i.streetName)&&void 0!==o?o:e.streetName,unit:null!==(l=null===(c=t.address)||void 0===c?void 0:c.unit)&&void 0!==l?l:e.unit,province:null!==(d=null===(u=t.address)||void 0===u?void 0:u.province)&&void 0!==d?d:e.province,postalCode:null!==(m=null===(h=t.address)||void 0===h?void 0:h.postalCode)&&void 0!==m?m:e.postalCode,entryDate:null!==(p=t.dates)&&void 0!==p&&p.entry?new Date(t.dates.entry).toISOString().split("T")[0]:e.entryDate,type:null!==(x=t.propertyType)&&void 0!==x?x:e.type,propertyType:null!==(f=t.propertyType)&&void 0!==f?f:e.propertyType,dealType:null!==(g=t.dealType)&&void 0!==g?g:e.dealType,mlsNumber:null!==(b=t.mlsNumber)&&void 0!==b?b:e.mlsNumber,weManage:void 0!==t.lead?!0===t.lead||"Yes"===t.lead?"Yes":"No":void 0!==t.weManage?t.weManage?"Yes":"No":e.weManage,listCommission:null!==(y=null===(v=t.commission)||void 0===v||null===(N=v.list)||void 0===N?void 0:N.toString())&&void 0!==y?y:e.listCommission,sellCommission:null!==(j=null===(w=t.commission)||void 0===w||null===(S=w.sell)||void 0===S?void 0:S.toString())&&void 0!==j?j:e.sellCommission,city:null!==(C=null===(k=t.address)||void 0===k?void 0:k.city)&&void 0!==C?C:e.city,sellPrice:e.sellPrice})})),"function"===typeof m&&m(t)}else u((e=>J(J({},e),{},{listingNumber:""})))},isClearable:!0,placeholder:"Select a listing...",className:"text-sm"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Number"}),(0,gp.jsx)("input",{type:"text",name:"streetNumber",value:n.streetNumber,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name"}),(0,gp.jsx)("input",{type:"text",name:"streetName",value:n.streetName,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,gp.jsx)("input",{type:"text",name:"unit",value:n.unit,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:n.city,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:n.province,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:n.postalCode,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MLS Number"}),(0,gp.jsx)("input",{type:"text",name:"mlsNumber",value:n.mlsNumber||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,gp.jsxs)("select",{name:"propertyType",value:n.propertyType||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Property Type"}),(0,gp.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,gp.jsx)("option",{value:"Residential",children:"Residential"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deal Type"}),(0,gp.jsxs)("select",{name:"dealType",value:n.dealType||"",onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Deal Type"}),(0,gp.jsx)("option",{value:"Sale",children:"Sale"}),(0,gp.jsx)("option",{value:"Lease",children:"Lease"})]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Manage"}),(0,gp.jsxs)("select",{name:"weManage",value:n.weManage,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classification"}),(0,gp.jsxs)("select",{name:"classification",value:n.classification,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"LISTING SIDE",children:"Listing Side"}),(0,gp.jsx)("option",{value:"CO-OPERATING SIDE",children:"Co-operating Side"})]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Listing Commission"}),(0,gp.jsx)("input",{type:"text",name:"listCommission",value:n.listCommission,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Co-Operating Side commission"}),(0,gp.jsx)("input",{type:"text",name:"sellCommission",value:n.sellCommission,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sell Price"}),(0,gp.jsx)("input",{type:"text",name:"sellPrice",value:n.sellPrice,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{className:"space-y-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Offer Date"}),(0,gp.jsx)("input",{type:"date",name:"offerDate",value:n.offerDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firm Date"}),x.length>0?(0,gp.jsx)("input",{type:"date",name:"firmDate",value:n.firmDate,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}):(0,gp.jsx)("input",{type:"date",name:"firmDate",value:n.firmDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Close Date"}),(0,gp.jsx)("input",{type:"date",name:"closeDate",value:n.closeDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entry Date"}),(0,gp.jsx)("input",{type:"date",name:"entryDate",value:n.entryDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finalized Date"}),(0,gp.jsx)("input",{type:"date",name:"finalizedDate",value:n.finalizedDate,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Manage"}),(0,gp.jsxs)("select",{name:"weManage",value:n.weManage,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Firm"}),(0,gp.jsxs)("select",{name:"firm",value:n.firm,onChange:r,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]})]})]})]}),(0,gp.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Conditions"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition *"}),(0,gp.jsxs)("select",{value:g.conditionText,onChange:e=>y("conditionText",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select Condition"}),(0,gp.jsx)("option",{value:"Finance",children:"Finance"}),(0,gp.jsx)("option",{value:"Inspections",children:"Inspections"}),(0,gp.jsx)("option",{value:"Status Certificate",children:"Status Certificate"}),(0,gp.jsx)("option",{value:"Lawyers Approval",children:"Lawyers Approval"}),(0,gp.jsx)("option",{value:"Due Diligence",children:"Due Diligence"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date *"}),(0,gp.jsx)("input",{type:"date",value:g.dueDate,onChange:e=>y("dueDate",e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition Met Date"}),(0,gp.jsx)("input",{type:"date",value:g.conditionMetDate,onChange:e=>{y("conditionMetDate",e.target.value),x.length>=0&&e.target.value&&u((t=>J(J({},t),{},{firmDate:e.target.value,status:"SOLD"})))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsx)("div",{className:"flex gap-3",children:(0,gp.jsx)("button",{type:"button",onClick:()=>{if(console.log("handleAddCondition called"),console.log("newCondition state:",g),console.log("Condition field:",g.conditionText),console.log("Due Date field:",g.dueDate),console.log("Condition Met Date field:",g.conditionMetDate),g.conditionText&&g.dueDate){const e={conditionText:g.conditionText,dueDate:g.dueDate,conditionMetDate:g.conditionMetDate};console.log("Adding condition:",e);const t=[...x,e];f(t),b({conditionText:"",dueDate:"",conditionMetDate:""}),u((e=>{const n=J(J({},e),{},{conditions:t});return console.log("Updated keyInfoData:",n),n}))}else console.log("Validation failed - missing required fields")},disabled:!g.conditionText||!g.dueDate,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed",children:"Add Condition"})})]}),x.length>0&&(0,gp.jsxs)("div",{className:"space-y-3",children:[(0,gp.jsx)("h4",{className:"text-md font-medium text-gray-700",children:"Added Conditions:"}),x.map(((e,t)=>(0,gp.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,gp.jsxs)("div",{className:"flex justify-between items-start",children:[(0,gp.jsx)("div",{className:"flex-1",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Condition:"}),(0,gp.jsx)("p",{className:"text-sm text-gray-900",children:e.conditionText})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Due Date:"}),(0,gp.jsx)("p",{className:"text-sm text-gray-900",children:e.dueDate})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Met Date:"}),(0,gp.jsx)("input",{type:"date",value:e.conditionMetDate||"",onChange:e=>{const n=x.map(((n,r)=>r===t?J(J({},n),{},{conditionMetDate:e.target.value}):n));f(n),u((t=>J(J({},t),{},{conditions:n,firmDate:e.target.value,status:"SOLD"})))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})}),(0,gp.jsx)("button",{type:"button",onClick:()=>(e=>{const t=x[e];if(window.confirm('Are you sure you want to delete the condition: "'.concat(t.conditionText,'"?'))){const t=x.filter(((t,n)=>n!==e));f(t),u((e=>J(J({},e),{},{conditions:t})))}})(t),className:"ml-4 px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm",children:"Delete"})]})},t)))]})]}),(0,gp.jsx)("div",{className:"mt-6 flex justify-end",children:(0,gp.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:bg-yellow-300",children:"Next"})})]}),(s||o)&&(0,gp.jsxs)("div",{className:"mt-4",children:[s&&(0,gp.jsx)("div",{className:"p-3 bg-green-100 border border-green-300 rounded-md text-green-800",children:s}),o&&(0,gp.jsx)("div",{className:"p-3 bg-red-100 border border-red-300 rounded-md text-red-800",children:o})]})]})},gE=(e,t)=>{const{name:n,value:r}=e.target,a=(e=>{const t=e.replace(/\D/g,"").slice(0,10);return t.length>=6?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6)):t.length>=3?"".concat(t.slice(0,3),"-").concat(t.slice(3)):t})(r);t((e=>J(J({},e),{},{[n]:a})))},bE=e=>{let{people:n,person:r,setPerson:a,selectedPersonType:s,setSelectedPersonType:o,editingPersonIndex:i,setEditingPersonIndex:l,showDeletePersonConfirm:c,handlePersonInputChange:d,handlePersonTypeSelect:u,handlePersonSubmit:m,handlePersonEdit:h,confirmDeletePerson:p,cancelDeletePerson:x,goToNextSection:f,goToPreviousSection:g,listingNumber:b,dealType:y}=e;const[v,N]=(0,t.useState)([]),[j,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)([]),[T,A]=(0,t.useState)(""),[I,D]=(0,t.useState)(!1),[P,O]=(0,t.useState)(!1),L=async e=>{if(e){w(!0);try{const t=await Oj.get("/listings/".concat(e,"/people"));N(t.data)}catch(t){console.error("Error fetching people for listing:",t),N([])}finally{w(!1)}}else N([])};(0,t.useEffect)((()=>{b?L(b):N([])}),[b]),(0,t.useEffect)((()=>{R()}),[]);const R=async()=>{O(!0);try{const e=(await Oj.get("/lawyers")).data.reduce(((e,t)=>(t.companyName&&!e.find((e=>e.name===t.companyName))&&e.push({name:t.companyName,address:t.address||"",email:t.email||"",phone:t.primaryPhone||""}),e)),[]);E(e)}catch(e){console.error("Error fetching companies:",e),$p.error("Failed to fetch companies")}finally{O(!1)}};(0,t.useEffect)((()=>{const e=e=>{I&&!e.target.closest(".company-dropdown-container")&&D(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[I]),(0,t.useEffect)((()=>{if(v.length>0){const e=v[0];console.log("Auto-populate person:",e),("Purchase"===y&&"Seller"===s||"Lease"===y&&"Landlord"===s)&&(a({type:e.type||s,firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",primaryPhone:e.primaryPhone||e.phone||"",cellPhone:e.cellPhone||e.phone||"",address:e.address||"",end:e.end||"Listing End",companyName:e.companyName||""}),C(!0))}}),[v,s,y]),(0,t.useEffect)((()=>{a((e=>J({companyName:""},e)))}),[]);const F=n;return(0,t.useEffect)((()=>{console.log("PeopleForm received new people prop:",n),console.log("peopleToShow:",F),console.log("Number of people:",n.length)}),[n,F]),(0,t.useEffect)((()=>{null!==i&&n[i]&&(o(n[i].type||""),A(n[i].companyName||""))}),[i]),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-6",children:"People Information"}),b&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,gp.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,gp.jsx)("strong",{children:"Selected Listing:"})," ",b]})}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"Select Person Type"}),(0,gp.jsx)("div",{className:"flex flex-wrap gap-3",children:["Tenant","Landlord","Seller","Buyer","Seller Lawyer","Buyer Lawyer"].map((e=>(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",id:"type-".concat(e),name:"personType",checked:s===e,onChange:()=>u(e),className:"mr-2"}),(0,gp.jsx)("label",{htmlFor:"type-".concat(e),className:"text-sm font-medium text-gray-700",children:e})]},e)))})]}),j&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,gp.jsxs)("p",{className:"text-sm text-yellow-800",children:["Loading people from listing ",b,"..."]})}),("Purchase"===y&&"Seller"===s||"Lease"===y&&"Landlord"===s)&&v.length>0&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,gp.jsxs)("p",{className:"text-sm text-green-800",children:["Showing ",v.length," people from listing ",b]})}),S&&("Purchase"===y&&"Seller"===s||"Lease"===y&&"Landlord"===s)&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,gp.jsxs)("p",{className:"text-sm text-blue-800",children:["\u2713 Form auto-populated with first person's details from listing"," ",b]})}),s&&(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("PeopleForm handleFormSubmit called"),console.log("Current person state:",r),console.log("Selected person type:",s);if("Seller Lawyer"===s||"Buyer Lawyer"===s)try{const t={type:s,firstName:r.firstName||"",lastName:r.lastName||"",companyName:r.companyName||"",email:r.email||"",end:r.end||("Seller Lawyer"===s||"Buyer Lawyer"===s?"Selling End":"Listing End"),primaryPhone:r.primaryPhone||"",cellPhone:r.cellPhone||"",address:r.address||""};(await Oj.post("/lawyers",t)).data;if(m){const t=J(J({},e),{},{preventDefault:()=>{},target:J({},e.target)});m(t)}$p.success("Lawyer saved successfully")}catch(t){console.error("Error saving lawyer:",t),$p.error("Failed to save lawyer")}else m&&m(e)},className:"space-y-4 p-4 border rounded-lg",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,gp.jsx)("input",{type:"text",name:"type",value:r.type||s,onChange:d,placeholder:"Enter person type or select from radio buttons above",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"You can type a custom type or select from the radio buttons above"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,gp.jsxs)("select",{name:"end",value:r.end||"Listing End",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,gp.jsx)("option",{value:"Selling End",children:"Selling End"})]})]})]}),("Tenant"===s||"Landlord"===s||"Seller"===s||"Buyer"===s||"Seller Lawyer"===s||"Buyer Lawyer"===s)&&(0,gp.jsxs)("div",{className:"relative company-dropdown-container",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",name:"companyName",value:T||r.companyName||"",onChange:e=>{const t=e.target.value;A(t),a((e=>J(J({},e),{},{companyName:t}))),D(t.length>0)},onFocus:()=>D(!0),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm pr-8",placeholder:"Type to search or enter company name"}),(0,gp.jsx)(Vh,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),I&&("Seller Lawyer"===s||"Buyer Lawyer"===s)&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:P?(0,gp.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading companies..."}):0===k.length?(0,gp.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No companies found"}):k.filter((e=>e.name.toLowerCase().includes(T.toLowerCase()))).map(((e,t)=>(0,gp.jsxs)("div",{onClick:()=>(e=>{a((t=>J(J({},t),{},{companyName:e.name,address:e.address||"",email:e.email||"",primaryPhone:e.phone||""}))),A(e.name),D(!1)})(e),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0",children:[(0,gp.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.address&&(0,gp.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]},t)))})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:r.firstName||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:r.lastName||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"text",name:"email",value:r.email||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone Number"}),(0,gp.jsx)("input",{type:"tel",name:"primaryPhone",value:r.primaryPhone||"",onChange:e=>gE(e,a),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone Number"}),(0,gp.jsx)("input",{type:"tel",name:"cellPhone",value:r.cellPhone||"",onChange:e=>gE(e,a),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:r.address||"",onChange:d,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>{a({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),l(null),o(""),C(!1),A("")},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"}),(0,gp.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-yellow-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==i?"Update Person":"Add Person"})]})]}),console.log("Rendering table with peopleToShow:",F),console.log("peopleToShow.length:",F.length),F.length>0&&(0,gp.jsxs)("div",{className:"mt-6",children:[(0,gp.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:("Purchase"===y&&"Seller"===s||"Lease"===y&&"Landlord"===s)&&v.length>0?"People from Listing ".concat(b):"People List"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"End"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Primary Phone"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Company Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Actions"})]})}),(0,gp.jsx)("tbody",{children:F.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.type||"N/A"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.end||"N/A"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"N/A"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.primaryPhone||e.cellPhone||"N/A"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.companyName||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:(0,gp.jsx)("button",{type:"button",className:"text-blue-600 hover:underline mr-2",onClick:()=>h(t),children:"Edit"})})]},t)))})]})})]}),c&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,gp.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this person?"}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:x,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,gp.jsx)("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),(0,gp.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,gp.jsx)("button",{onClick:g,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Previous"}),(0,gp.jsx)("button",{onClick:f,className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Next"})]})]})},yE=e=>{let{outsideBrokers:n,setOutsideBrokers:r,broker:a,setBroker:s,selectedBrokerType:o,setSelectedBrokerType:i,editingBrokerIndex:l,setEditingBrokerIndex:c,showDeleteBrokerConfirm:d,handleBrokerInputChange:u,handleBrokerEdit:m,handleBrokerDelete:h,confirmDeleteBroker:p,cancelDeleteBroker:x,goToNextSection:f,goToPreviousSection:g}=e;const[b,y]=(0,t.useState)([]),[v,N]=(0,t.useState)(""),[j,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1);(0,t.useEffect)((()=>{console.log("OutsideBrokersForm received new outsideBrokers prop:",n)}),[n]),(0,t.useEffect)((()=>{k()}),[]);const k=async()=>{C(!0);try{const e=(await Oj.get("/outside-brokers")).data.reduce(((e,t)=>(t.company&&!e.find((e=>e.name===t.company))&&e.push({name:t.company,address:t.address||"",email:t.email||"",phone:t.primaryPhone||""}),e)),[]);y(e)}catch(e){console.error("Error fetching companies:",e),$p.error("Failed to fetch companies")}finally{C(!1)}};(0,t.useEffect)((()=>{const e=e=>{j&&!e.target.closest(".company-dropdown-container")&&w(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[j]),(0,t.useEffect)((()=>{if(null!==l&&n[l]){const e=n[l],t=e.type||"";s({type:t,firstName:e.firstName||"",lastName:e.lastName||"",company:e.company||"",email:e.email||"",payBroker:e.payBroker||"No",end:"Listing Broker"===t?"Listing End":"Selling End",primaryPhone:e.primaryPhone||"",chargedHST:e.chargedHST||"Yes",address:e.address||""}),i(t),N(e.company||"")}}),[l,n]);return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Outside Brokers Information"}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-medium text-gray-700 text-lg mb-2",children:"Select Broker Type"}),(0,gp.jsx)("div",{className:"flex flex-wrap gap-3",children:["Listing Broker","Cooperating Broker"].map((e=>(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",id:"broker-type-".concat(e),name:"brokerType",checked:o===e,onChange:()=>(e=>{i(e),s((t=>J(J({},t),{},{type:e,end:"Listing Broker"===e?"Listing End":"Selling End"})))})(e),className:"mr-2"}),(0,gp.jsx)("label",{htmlFor:"broker-type-".concat(e),className:"text-sm font-medium text-gray-700",children:e})]},e)))})]}),o&&(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={type:o,firstName:a.firstName||"",lastName:a.lastName||"",company:a.company||"",email:a.email||"",payBroker:a.payBroker||"No",end:"Listing Broker"===o?"Listing End":"Selling End",primaryPhone:a.primaryPhone||"",chargedHST:a.chargedHST||"Yes",address:a.address||""};console.log("OutsideBrokersForm handleFormSubmit called"),console.log("Current outside brokers:",n),console.log("Form data:",t),console.log("Editing index:",l);try{if(null!==l){const e=n[l];e._id&&await Oj.put("/outside-brokers/".concat(e._id),t);const a=[...n];a[l]=J(J({},t),{},{_id:e._id}),r(a),c(null),$p.success("Broker updated successfully")}else{const e=(await Oj.post("/outside-brokers",t)).data,a=[...n,e];r(a),$p.success("Broker added successfully")}}catch(d){console.error("Error saving broker:",d),$p.error("Failed to save broker")}s({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),i(""),N("")},className:"space-y-4 p-4 border rounded-lg",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,gp.jsx)("input",{type:"text",name:"type",defaultValue:o,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Broker"}),(0,gp.jsxs)("select",{name:"payBroker",value:a.payBroker,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,gp.jsx)("input",{type:"text",name:"end",value:"Listing Broker"===o?"Listing End":"Selling End",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:a.firstName||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:a.lastName||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{className:"relative company-dropdown-container",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",name:"company",value:v||a.company||"",onChange:e=>{const t=e.target.value;N(t),s((e=>J(J({},e),{},{company:t}))),w(t.length>0)},onFocus:()=>w(!0),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm pr-8",placeholder:"Type to search or enter company name"}),(0,gp.jsx)(Vh,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]}),j&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:S?(0,gp.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Loading companies..."}):0===b.length?(0,gp.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No companies found"}):b.filter((e=>e.name.toLowerCase().includes(v.toLowerCase()))).map(((e,t)=>(0,gp.jsxs)("div",{onClick:()=>(e=>{s((t=>J(J({},t),{},{company:e.name,address:e.address||"",email:e.email||"",primaryPhone:e.phone||""}))),N(e.name),w(!1)})(e),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0",children:[(0,gp.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.address&&(0,gp.jsx)("div",{className:"text-xs text-gray-500",children:e.address})]},t)))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"email",name:"email",value:a.email||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone Number"}),(0,gp.jsx)("input",{type:"tel",name:"primaryPhone",value:a.primaryPhone||"",onChange:e=>gE(e,s),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charged HST"}),(0,gp.jsxs)("select",{name:"chargedHST",value:a.chargedHST,onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:a.address||"",onChange:u,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,gp.jsx)("button",{type:"button",onClick:async()=>{if(a.firstName&&a.lastName&&o){const t=J(J({},a),{},{type:o,end:"Listing Broker"===o?"Listing End":"Selling End"});try{const e=(await Oj.post("/outside-brokers",t)).data;r([...n,e]),$p.success("Broker added successfully")}catch(e){console.error("Error saving broker:",e),$p.error("Failed to save broker")}}c(null),i(""),s({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),N("")},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"}),(0,gp.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-yellow-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==l?"Update Broker":"Add Broker"})]})]}),n.length>0&&(0,gp.jsxs)("div",{className:"mt-8",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Added Outside Brokers"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-200",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"First Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Company"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"End"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Actions"})]})}),(0,gp.jsx)("tbody",{children:n.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.type||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.firstName||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.lastName||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.company||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.end||"-"}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:(0,gp.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>m(t),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:(0,gp.jsx)(Yh,{})}),(0,gp.jsx)("button",{onClick:()=>h(t),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,gp.jsx)(up,{})})]})})]},t)))})]})})]}),d&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,gp.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Confirm Delete"}),(0,gp.jsx)("p",{className:"mb-6",children:"Are you sure you want to delete this broker?"}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:x,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"}),(0,gp.jsx)("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})}),(0,gp.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,gp.jsx)("button",{type:"button",onClick:g,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Previous"}),(0,gp.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Next"})]})]})},vE={weHold:"Yes",heldBy:"Bestway Real Estate Ltd., Brokerage",received:"Yes",depositDate:"",receivedFrom:"",amount:"0.00",reference:"",paymentType:"EFT",currency:"CAD",earnInterest:"No"},NE=e=>{let{trustRecords:n,setTrustRecords:r,tradeNumber:a}=e;if("function"!==typeof r)throw new Error("setTrustRecords prop is required and must be a function.");const[s,o]=(0,t.useState)(vE),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),h=e=>{const{name:t,value:n}=e.target;o("weHold"===t?"Yes"===n?e=>J(J({},e),{},{weHold:n,heldBy:"Bestway Real Estate Ltd., Brokerage"}):e=>J(J({},e),{},{weHold:n,heldBy:""}):e=>J(J({},e),{},{[t]:n}))};return(0,gp.jsxs)("div",{className:"max-w-[1300px] w-full mx-auto px-6",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Trust Information"}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Adding a Deposit Entry"}),(0,gp.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:async e=>{e.preventDefault();let t=null;if("Yes"===s.weHold&&parseFloat(s.amount)>0)try{t=(await Oj.post("/real-estate-trust-eft/trust-deposit",{tradeId:a,amount:parseFloat(s.amount),receivedFrom:s.receivedFrom,reference:s.reference,description:"Trust deposit from ".concat(s.receivedFrom)})).data.eftNumber}catch(h){console.error("Error generating EFT number:",h)}const c={weHold:s.weHold,heldBy:s.heldBy,received:s.received,depositDate:s.depositDate,receivedFrom:s.receivedFrom,amount:s.amount,reference:s.reference,eftNumber:t,paymentType:s.paymentType,currency:s.currency,earnInterest:s.earnInterest},d={payee:s.receivedFrom,reference:s.reference,eftNumber:t,paymentType:s.paymentType,depositDate:s.depositDate,amount:s.amount},u="Trade #: ".concat(a||"N/A",", Received from: ").concat(s.receivedFrom).concat(s.reference?", Ref: ".concat(s.reference):""),m=parseFloat(s.amount);if(!isNaN(m)&&m>0)try{"Yes"===s.weHold&&(await Oj.post("/ledger",{accountNumber:"10002",accountName:"CASH - TRUST",debit:m,credit:0,description:u,eftNumber:t,date:s.depositDate}),await Oj.post("/ledger",{accountNumber:"21300",accountName:"LIABILITY FOR TRUST FUNDS",debit:0,credit:m,description:u,eftNumber:t,date:s.depositDate}))}catch(h){console.error("Error posting to ledger:",h)}if(null!==i){const e=[...n];e[i]=J(J({},c),{},{payeeEntry:d}),r(e),l(null)}else r([...n,J(J({},c),{},{payeeEntry:d})]);o(vE)},children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"We Hold"}),(0,gp.jsxs)("select",{name:"weHold",value:s.weHold,onChange:h,className:"w-full rounded border-gray-300",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Held By"}),"Yes"===s.weHold?(0,gp.jsx)("input",{name:"heldBy",value:s.heldBy,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100 cursor-not-allowed"}):(0,gp.jsx)("input",{name:"heldBy",value:s.heldBy,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Enter who holds the deposit"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received"}),(0,gp.jsxs)("select",{name:"received",value:s.received,onChange:h,className:"w-full rounded border-gray-300",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deposit Date"}),(0,gp.jsx)("input",{type:"date",name:"depositDate",value:s.depositDate,onChange:h,className:"w-full rounded border-gray-300"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received From"}),(0,gp.jsx)("input",{name:"receivedFrom",value:s.receivedFrom,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Name of person/entity"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,gp.jsx)("input",{type:"number",name:"amount",value:s.amount,onChange:h,className:"w-full rounded border-gray-300"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference (Optional)"}),(0,gp.jsx)("input",{name:"reference",value:s.reference,onChange:h,className:"w-full rounded border-gray-300",placeholder:"Reference number"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type"}),(0,gp.jsxs)("select",{name:"paymentType",value:s.paymentType,onChange:h,className:"w-full rounded border-gray-300",children:[(0,gp.jsx)("option",{value:"EFT",children:"EFT"}),(0,gp.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,gp.jsx)("option",{value:"Wire",children:"Wire"}),(0,gp.jsx)("option",{value:"Cash",children:"Cash"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,gp.jsx)("input",{name:"currency",value:s.currency,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Earn Interest"}),(0,gp.jsxs)("select",{name:"earnInterest",value:s.earnInterest,onChange:h,className:"w-full rounded border-gray-300",children:[(0,gp.jsx)("option",{value:"No",children:"No"}),(0,gp.jsx)("option",{value:"Yes",children:"Yes"})]})]}),(0,gp.jsxs)("div",{className:"col-span-2 flex gap-2 mt-4",children:[(0,gp.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-6 py-2 rounded font-semibold",children:"Apply"}),(0,gp.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded font-semibold ml-2",onClick:()=>function(){const e=(e=>e.payeeEntry?{receivedFrom:e.payeeEntry.payee||e.receivedFrom||"",heldBy:e.heldBy||"",amount:e.amount||"0.00",currency:e.currency||"CAD",paymentType:e.paymentType||e.payeeEntry&&e.payeeEntry.paymentType||"",depositDate:e.depositDate||e.payeeEntry&&e.payeeEntry.depositDate||"",reference:e.reference||e.payeeEntry&&e.payeeEntry.reference||"",eftNumber:e.eftNumber||e.payeeEntry&&e.payeeEntry.eftNumber||null}:{receivedFrom:e.receivedFrom||"",heldBy:e.heldBy||"",amount:e.amount||"0.00",currency:e.currency||"CAD",paymentType:e.paymentType||"",depositDate:e.depositDate||"",reference:e.reference||"",eftNumber:e.eftNumber||null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:s);if(!e.receivedFrom||!e.amount||!e.depositDate)return void alert("Please fill in the required fields (Received From, Amount, Deposit Date) before printing receipt.");const t=window.open("","_blank","width=800,height=600"),n=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Trust Receipt</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: white; }\n          .receipt-container { max-width: 800px; margin: 0 auto; border: 1px solid #ccc; padding: 30px; background: white; }\n          .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; }\n          .company-info { flex: 1; }\n          .company-info h2 { margin: 0 0 5px 0; font-size: 18px; font-weight: bold; }\n          .company-info p { margin: 2px 0; font-size: 12px; }\n          .logo { width: 120px; height: auto; }\n          .receipt-title { text-align: center; font-size: 24px; font-weight: bold; margin: 20px 0; text-decoration: underline; }\n          .receipt-date { text-align: center; font-size: 14px; margin-bottom: 30px; }\n          .receipt-content { margin-left: 50px; }\n          .receipt-row { margin-bottom: 15px; display: flex; align-items: center; }\n          .receipt-label { font-weight: bold; min-width: 200px; margin-right: 20px; }\n          .receipt-value { flex: 1; min-height: 20px; text-align: right; }\n          .signature-line { display: flex; align-items: center; margin-top: 40px; }\n          .signature-line .receipt-label { margin-right: 20px; }\n          .signature-line .receipt-value { border-bottom: 1px solid #000; min-width: 200px; height: 30px; text-align: center; }\n          @media print { body { margin: 0; } .receipt-container { border: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="receipt-container">\n          <div class="header">\n            <div class="company-info">\n                      <h2>Bestway Real Estate Ltd., Brokerage</h2>\n        <p>500 St.George Street</p>\n        <p>Moncton, NB E1C 1Y3</p>\n        <p>Phone: 506-268-2900</p>\n            </div>\n            <div class="logo">\n              <img src="'.concat(fp,'" alt="Logo" style="width: 100%; height: auto;" />\n            </div>\n          </div>\n          <div class="receipt-title">RECEIPT</div>\n          <div class="receipt-date">Date: ').concat(n,'</div>\n          <div class="receipt-content">\n            <div class="receipt-row">\n              <div class="receipt-label">RECEIVED FROM:</div>\n              <div class="receipt-value">').concat(e.receivedFrom,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">TRUST DEPOSIT ON (Held By):</div>\n              <div class="receipt-value">').concat(e.heldBy,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">FUNDS RECEIVED:</div>\n              <div class="receipt-value">$').concat(e.amount," ").concat(e.currency,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">DEPOSIT RECEIVED IN:</div>\n              <div class="receipt-value">CAD</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">DATE RECEIVED:</div>\n              <div class="receipt-value">').concat(e.depositDate,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">PAYMENT TYPE:</div>\n              <div class="receipt-value">').concat(e.paymentType,'</div>\n            </div>\n            <div class="receipt-row">\n              <div class="receipt-label">REFERENCE #:</div>\n              <div class="receipt-value">').concat(e.eftNumber?"EFT#".concat(e.eftNumber):e.reference||"N/A",'</div>\n            </div>\n            <div class="signature-line">\n              <div class="receipt-label">RECEIVED BY:</div>\n              <div class="receipt-value">Administrator</div>\n            </div>\n          </div>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close(),t.onload=function(){t.print(),t.close()}}(),children:"Print Receipt"}),(0,gp.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded font-semibold ml-2",onClick:()=>o(vE),children:"Cancel"})]})]})]}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Trust Account Entries"}),(0,gp.jsx)("div",{className:"flex gap-2 mb-4",children:(0,gp.jsx)("button",{type:"button",onClick:()=>(e=>{m(e),d(!0)})(0),disabled:0===n.length,className:"bg-red-600 text-white px-4 py-2 rounded font-semibold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-red-700",children:"Delete"})}),(0,gp.jsx)("div",{className:"w-full px-6",children:(0,gp.jsxs)("table",{className:"w-full border border-gray-300 mb-4",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"We Hold"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left whitespace-nowrap",style:{minWidth:"250px"},children:"Held By"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Received"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Interest"})]})}),(0,gp.jsx)("tbody",{children:0===n.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"No trust entries found. Add a deposit entry above."})}):n.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.weHold}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.heldBy}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.depositDate}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.amount}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.received}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.earnInterest})]},t)))})]})}),(0,gp.jsx)("div",{className:"w-full px-6",children:(0,gp.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Payee"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Reference"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Amount"})]})}),(0,gp.jsx)("tbody",{children:0===n.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No trust entries found. Add a deposit entry above."})}):n.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.receivedFrom}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.reference}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.paymentType}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.depositDate}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:e.amount})]},t)))})]})})]}),c&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,gp.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this trust entry?"}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>{d(!1),m(null)},className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{if(null!==u){const t=n[u];if(t){const n=parseFloat(t.amount);if(!isNaN(n)&&n>0){const r="Trade #: ".concat(a||"N/A",", Trust entry deleted, Received from: ").concat(t.receivedFrom).concat(t.reference?", Ref: ".concat(t.reference):"");try{"Yes"===t.weHold&&(await Oj.post("/ledger",{accountNumber:"21300",accountName:"LIABILITY FOR TRUST FUNDS",debit:n,credit:0,description:r,date:t.depositDate}),await Oj.post("/ledger",{accountNumber:"10002",accountName:"CASH - TRUST",debit:0,credit:n,description:r,date:t.depositDate})),$p.success("Ledger updated for trust entry deletion.")}catch(e){$p.error("Failed to update ledger for trust entry deletion.")}}}r(n.filter(((e,t)=>t!==u))),d(!1),m(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},jE=async(e,t)=>{try{return(await Oj.get("/commission-trust-eft/check-existing/".concat(e,"/").concat(t))).data}catch(n){return $p.error("Error checking Commission Trust EFT"),{exists:!1}}},wE=async(e,t)=>{try{return(await Oj.get("/real-estate-trust-eft/check-existing/".concat(e,"/").concat(t))).data}catch(n){return $p.error("Error checking Real Estate Trust EFT"),{exists:!1}}},SE=e=>({AgentCommissionTransfer:"Agent Commission Transfer",RefundOfDeposit:"Refund of Deposit",OutsideBrokerCommission:"Outside Broker Commission",OurBrokerageCommission:"Our Brokerage Commission",CommissionTransfer:"Commission Transfer",BalanceOfDeposit:"Balance of Deposit"}[e]||e),CE=e=>({plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flexible:"Flexible Plan",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e),kE=e=>{if(!e)return"N/A";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString("en-CA")},EE=e=>{if(null===e||void 0===e||""===e)return"$0.00";const t="string"===typeof e?parseFloat(e.replace(/,/g,"")):e;return isNaN(t)?"$0.00":t.toLocaleString("en-US",{style:"currency",currency:"USD"})},TE=e=>{var t;if(!e||!e.people||!Array.isArray(e.people))return{firstParty:"N/A",secondParty:"N/A"};if("Lease"===((null===(t=e.keyInfo)||void 0===t?void 0:t.dealType)||"")){const t=e.people.filter((e=>"Landlord"===e.type)).map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", "),n=e.people.filter((e=>"Tenant"===e.type)).map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", ");return{firstParty:t||"N/A",secondParty:n||"N/A",firstPartyLabel:"Landlord",secondPartyLabel:"Tenant"}}{const t=e.people.filter((e=>"Seller"===e.type)).map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", "),n=e.people.filter((e=>"Buyer"===e.type)).map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", ");return{firstParty:t||"N/A",secondParty:n||"N/A",firstPartyLabel:"Seller",secondPartyLabel:"Buyer"}}},AE=[{label:"Plan 250",value:"plan250"},{label:"Plan 500",value:"plan500"},{label:"Plan 90/10",value:"plan9010"},{label:"Plan 95/5",value:"plan955"},{label:"Plan 85/15",value:"plan8515"},{label:"Plan 50/50",value:"plan5050"},{label:"Plan 80/20",value:"plan8020"},{label:"Plan 150",value:"plan150"},{label:"Flexible Plan",value:"flexible"}],IE={agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",taxOnFees:"",total:"",totalFees:"",netCommission:"",lead:"No"},DE={sellPrice:"",closingDate:"",tradeNumber:"",status:"Active",ar:""},PE=e=>{var n,r,a;let{goToPreviousSection:s,agent:o,setAgent:i,agents:l,setAgents:c,editingIndex:d,setEditingIndex:u,showDeleteModal:m,setShowDeleteModal:h,deletingIndex:p,setDeletingIndex:x,showBuyerRebateModal:f,setShowBuyerRebateModal:g,buyerRebateIncluded:b,setBuyerRebateIncluded:y,buyerRebateAmount:v,setBuyerRebateAmount:N,pendingAgent:j,setPendingAgent:w,validationErrors:S,setValidationErrors:C,onSaveTrade:k,classification:E,commissionData:T,selectedListing:A,isEditingExistingTrade:I=!1,isEditMode:D=!1}=e;const[P,O]=(0,t.useState)([]),[L,R]=(0,t.useState)([]),[F,_]=(0,t.useState)(DE),[M,B]=(0,t.useState)(!1),[U,H]=(0,t.useState)(!1),[z,V]=(0,t.useState)(0);(0,t.useEffect)((()=>{(async()=>{try{const e=await Oj.get("/agents");O(e.data)}catch(e){O([])}})()}),[]),(0,t.useEffect)((()=>{V(0)}),[A]),(0,t.useEffect)((()=>{const e=((parseFloat(o.awardAmount)||0)*(parseFloat(o.percentage)||0)/100).toFixed(2);i((t=>X(J(J({},t),{},{amount:e}))))}),[o.awardAmount,o.percentage,o.feeInfo,o.feesDeducted]),(0,t.useEffect)((()=>{if(("LISTING SIDE"===o.classification||"CO-OPERATING SIDE"===o.classification)&&1===l.length){const e=l[0],t=parseFloat(e.percentage)||0;if(t>0&&100===parseFloat(o.percentage)){const e=100-t;i((t=>J(J({},t),{},{percentage:e.toString()})))}}}),[l,o.classification,o.percentage]),(0,t.useEffect)((()=>{if(E&&T){let e="0.00";if("LISTING SIDE"===E){e=(parseFloat(T.listingAmount)||0).toFixed(2)}else if("SELLING SIDE"===E){e=(parseFloat(T.sellingAmount)||0).toFixed(2)}else if("CO-OPERATING SIDE"===E){e=(parseFloat(T.sellingAmount)||0).toFixed(2)}else e="0.00";if(!o.awardAmount||"0.00"===o.awardAmount||o.awardAmount!==e){const t=J(J({},o),{},{awardAmount:e});i(X(t))}}}),[E,T,o.awardAmount]),(0,t.useEffect)((()=>{E&&(i((e=>J(J({},e),{},{classification:E}))),"CO-OPERATING SIDE"===E&&(i((e=>J(J({},e),{},{agentId:"",agentName:""}))),C((e=>J(J({},e),{},{agentId:"",agentName:""})))))}),[E]),(0,t.useEffect)((()=>{if(console.log("selectedListing in AgentCommissionInfo:",A),console.log("selectedListing type:",typeof A),console.log("selectedListing keys:",A?Object.keys(A):"null"),console.log("isEditingExistingTrade:",I),console.log("classification:",E),I&&o.agentId&&o.agentName)console.log("Editing existing trade with agent data - not auto-populating from selectedListing");else if("LISTING SIDE"===E){if(A){console.log("selectedListing.agent:",A.agent),console.log("selectedListing.agents:",A.agents);let n=null;if(A.agents&&A.agents.length>0){console.log("Found agent in selectedListing.agents:",A.agents);const e=G();if(!(e.length>0))return console.log("No available agents, clearing form"),void i(J(J({},IE),{},{classification:o.classification}));{const t=z<e.length?z:0;n=e[t],console.log("Using available agent at index:",t,n)}}else A.agent&&(console.log("Found agent in selectedListing.agent:",A.agent),n=A.agent);if(n){console.log("listingAgent to use:",n),console.log("listingAgent keys:",Object.keys(n));let r="",a="";var e;if(A.agents&&A.agents.length>0)r=(null===(e=n.agentNo)||void 0===e?void 0:e.toString())||"",a="".concat(n.firstName||""," ").concat(n.lastName||"").trim();else if(A.agent){var t;if(r=(null===(t=n.employeeNo)||void 0===t?void 0:t.toString())||"",A.agents&&A.agents.length>0){const e=A.agents[0];a="".concat(e.firstName||""," ").concat(e.lastName||"").trim()}else a=""}console.log("Calculated agentId:",r),console.log("Calculated agentName:",a),r&&a?(i((e=>J(J({},e),{},{agentId:r,agentName:a}))),C((e=>J(J({},e),{},{agentId:"",agentName:""})))):console.log("Agent ID or name is missing, not setting agent data")}else console.log("No agent found in selectedListing")}}else console.log("Classification is not LISTING SIDE - not auto-populating agent information")}),[A,I,E,z,l]);const q=()=>{const e={};return String(o.agentId||"").trim()||(e.agentId="Agent ID is required"),String(o.agentName||"").trim()||(e.agentName="Agent Name is required"),C(e),Object.keys(e).length>0&&$p.error("Please fix the validation errors."),0===Object.keys(e).length},W=e=>{const{name:t,value:n}=e.target;let r=J(J({},o),{},{[t]:n});i(X(r)),S[t]&&C((e=>J(J({},e),{},{[t]:""})))},Y=e=>{const t=e.target.value,n=P.find((e=>e._id===t));n?(i((e=>J(J({},e),{},{agentId:n.employeeNo,agentName:"".concat(n.firstName," ").concat(n.lastName)}))),C((e=>J(J({},e),{},{agentId:"",agentName:""})))):i((e=>J(J({},e),{},{agentId:"",agentName:""})))},G=()=>{if(!A||!A.agents||A.agents.length<2)return[];const e=l.map((e=>e.agentId));return A.agents.filter((t=>{var n;const r=(null===(n=t.agentNo)||void 0===n?void 0:n.toString())||"";return!e.includes(r)}))},K=()=>{const e=l.filter((e=>"CO-OPERATING SIDE"===e.classification)).map((e=>e.agentId));return P.filter((t=>{var n;const r=(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())||"";return!e.includes(r)}))},X=e=>{const t=(parseFloat(e.awardAmount)||0)*(parseFloat(e.percentage)||0)/100,n=.13*t,r=t+n;let a=0;switch(e.feeInfo){case"plan250":a=250;break;case"plan500":a=500;break;case"plan9010":a=.1*t;break;case"plan8515":a=.13*t;break;case"plan955":a=.05*t;break;case"plan5050":a=.5*t;break;case"plan8020":a=.2*t;break;case"plan150":a=150;break;case"flexible":a=parseFloat(e.feesDeducted)||0;break;default:a=0}const s=.13*a,o=a+s,i=r-o;return J(J({},e),{},{amount:t.toFixed(2),feesDeducted:"flexible"===e.feeInfo?e.feesDeducted:a.toFixed(2),tax:n.toFixed(2),total:r.toFixed(2),taxOnFees:s.toFixed(2),totalFees:o.toFixed(2),netCommission:i.toFixed(2)})};return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Agent Commission Information"}),(0,gp.jsxs)("form",{className:"mb-6",onSubmit:e=>{e.preventDefault(),q()&&(w(o),g(!0))},children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Agent ",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),"CO-OPERATING SIDE"===o.classification&&K().length>0?(0,gp.jsxs)("select",{name:"agentSelect",value:(null===(n=P.find((e=>e.employeeNo===o.agentId)))||void 0===n?void 0:n._id)||"",onChange:Y,className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(S.agentId?"border-red-500":"border-gray-300"),children:[(0,gp.jsx)("option",{value:"",children:"Select an agent"}),K().map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id)))]}):"CO-OPERATING SIDE"===o.classification&&0===K().length?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("input",{name:"agentId",value:"",onChange:W,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 border-gray-300",readOnly:!0}),(0,gp.jsx)("input",{name:"agentName",value:"",onChange:W,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 border-gray-300",readOnly:!0})]}):"CO-OPERATING SIDE"===o.classification?(0,gp.jsxs)("select",{name:"agentSelect",value:(null===(r=P.find((e=>e.employeeNo===o.agentId)))||void 0===r?void 0:r._id)||"",onChange:Y,className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(S.agentId?"border-red-500":"border-gray-300"),children:[(0,gp.jsx)("option",{value:"",children:"Select an agent"}),P.map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id)))]}):"LISTING SIDE"===o.classification&&A&&A.agents&&A.agents.length>=2&&G().length>0?(0,gp.jsxs)("select",{name:"listingAgentSelect",value:z,onChange:e=>{const t=parseInt(e.target.value);V(t);const n=G();if(n[t]){var r;const e=n[t],a=(null===(r=e.agentNo)||void 0===r?void 0:r.toString())||"",s="".concat(e.firstName||""," ").concat(e.lastName||"").trim();i((e=>J(J({},e),{},{agentId:a,agentName:s}))),C((e=>J(J({},e),{},{agentId:"",agentName:""})))}},className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(S.agentId?"border-red-500":"border-gray-300"),children:[(0,gp.jsx)("option",{value:"",children:"Select an agent"}),G().map(((e,t)=>(0,gp.jsxs)("option",{value:t,children:[e.agentNo," - ",e.firstName," ",e.lastName]},t)))]}):"LISTING SIDE"===o.classification&&A&&A.agents&&A.agents.length>=2&&0===G().length?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("input",{name:"agentId",value:"",onChange:W,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 border-gray-300",readOnly:!0}),(0,gp.jsx)("input",{name:"agentName",value:"",onChange:W,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 border-gray-300",readOnly:!0})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("input",{name:"agentId",value:o.agentId,onChange:W,placeholder:"ID",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 mb-1 ".concat(S.agentId?"border-red-500":"border-gray-300"),readOnly:"LISTING SIDE"===o.classification}),(0,gp.jsx)("input",{name:"agentName",value:o.agentName,onChange:W,placeholder:"Agent Name",className:"block w-full rounded-md shadow-sm focus:border-blue-700 focus:ring-blue-700 ".concat(S.agentName?"border-red-500":"border-gray-300"),readOnly:"LISTING SIDE"===o.classification})]}),"LISTING SIDE"===o.classification&&A&&A.agents&&A.agents.length>=2&&G().length>0&&(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select from remaining listing agents"}),"LISTING SIDE"===o.classification&&A&&A.agents&&A.agents.length>=2&&0===G().length&&(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All listing agents have been added"}),"LISTING SIDE"===o.classification&&(!A||!A.agents||A.agents.length<2)&&(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-populated from listing agent information"}),"CO-OPERATING SIDE"===o.classification&&K().length>0&&(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select from remaining co-operating agents"}),"CO-OPERATING SIDE"===o.classification&&0===K().length&&(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"All co-operating agents have been added"}),S.agentId&&(0,gp.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.agentId}),S.agentName&&(0,gp.jsx)("p",{className:"text-red-500 text-xs mt-1",children:S.agentName})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Classification"}),(0,gp.jsx)("input",{name:"classification",value:o.classification,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-700 focus:ring-blue-700"}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically populated from Key Info Form"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lead"}),(0,gp.jsxs)("select",{name:"lead",value:o.lead,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"YTD Commission"}),(0,gp.jsxs)("select",{name:"ytdCommission",value:o.ytdCommission,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Info"}),(0,gp.jsx)("select",{name:"feeInfo",value:o.feeInfo,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:AE.map((e=>(0,gp.jsx)("option",{value:e.value,children:e.label},e.value)))})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Award Amount"}),(0,gp.jsx)("input",{name:"awardAmount",value:o.awardAmount,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100",readOnly:!0}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated from Commission Income selling amount"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Percentage"}),(0,gp.jsx)("input",{name:"percentage",value:o.percentage,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,gp.jsx)("input",{name:"amount",value:o.amount,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),(0,gp.jsx)("input",{name:"tax",value:o.tax,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,gp.jsx)("input",{name:"total",value:o.total,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fees Deducted"}),(0,gp.jsx)("input",{name:"feesDeducted",value:o.feesDeducted,onChange:W,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",readOnly:"flexible"!==o.feeInfo})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Fees"}),(0,gp.jsx)("input",{name:"totalFees",value:o.totalFees,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Net Commission"}),(0,gp.jsx)("input",{name:"netCommission",value:o.netCommission,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 bg-gray-100"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[null!==d&&(0,gp.jsx)("button",{type:"button",onClick:()=>{if(u(null),i(J(J({},IE),{},{classification:o.classification})),V(0),E&&T){let e="0.00";if("LISTING SIDE"===E){const t=parseFloat(T.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}i((t=>J(J({},t),{},{awardAmount:e})))}if(A&&"LISTING SIDE"===E){const t=G();if(t.length>0){var e;const n=t[0],r=(null===(e=n.agentNo)||void 0===e?void 0:e.toString())||"",a="".concat(n.firstName||""," ").concat(n.lastName||"").trim();r&&a&&i((e=>J(J({},e),{},{agentId:r,agentName:a})))}}y("no"),N(""),C({})},className:"px-6 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-6 py-2 rounded font-semibold",children:null!==d?"Update Agent":"Add Agent"})]})]}),f&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buyer Rebate Confirmation"}),(0,gp.jsx)("p",{className:"mb-4",children:"Is buyer rebate included in this commission?"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsxs)("label",{className:"flex items-center mb-2",children:[(0,gp.jsx)("input",{type:"radio",name:"buyerRebateIncluded",value:"yes",checked:"yes"===b,onChange:e=>y(e.target.value),className:"mr-2"}),"Yes"]}),(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",name:"buyerRebateIncluded",value:"no",checked:"no"===b,onChange:e=>y(e.target.value),className:"mr-2"}),"No"]})]}),"yes"===b&&(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buyer Rebate Amount"}),(0,gp.jsx)("input",{type:"number",value:v,onChange:e=>N(e.target.value),placeholder:"Enter amount",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),"yes"===b&&v&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-gray-100 rounded",children:(0,gp.jsxs)("p",{className:"text-sm",children:[(0,gp.jsx)("strong",{children:"Original Net Commission:"})," $",null===j||void 0===j?void 0:j.netCommission,(0,gp.jsx)("br",{}),(0,gp.jsx)("strong",{children:"Buyer Rebate:"})," $",v,(0,gp.jsx)("br",{}),(0,gp.jsx)("strong",{children:"Final Net Commission:"})," $",(parseFloat((null===j||void 0===j?void 0:j.netCommission)||0)-parseFloat(v||0)).toFixed(2)]})}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>{g(!1),y("no"),N(""),w(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"button",onClick:()=>{if(!j)return;let e=parseFloat(j.netCommission)||0;if("yes"===b&&v){e-=parseFloat(v)||0}const t=J(J({},j),{},{netCommission:e.toFixed(2),buyerRebateIncluded:b,buyerRebateAmount:"yes"===b?v:""});if(null!==d){const e=[...l];e[d]=t,c(e),u(null)}else{const e=[...l,t];if(c(e),1===e.length&&("LISTING SIDE"===t.classification||"CO-OPERATING SIDE"===t.classification)){const e=parseFloat(t.percentage)||0;if(e>0){const t=100-e;i((e=>J(J({},e),{},{percentage:t.toString()})))}}}if(i(J(J({},IE),{},{classification:o.classification})),V(0),E&&T){let e="0.00";if("LISTING SIDE"===E){const t=parseFloat(T.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}i((t=>J(J({},t),{},{awardAmount:e})))}g(!1),y("no"),N(""),w(null)},className:"px-4 py-2 bg-blue-900 text-white rounded hover:bg-blue-800",children:"Confirm"})]})]})}),m&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Delete Confirmation"}),(0,gp.jsx)("p",{className:"mb-4",children:"Are you sure you want to delete this agent commission record?"}),(0,gp.jsxs)("p",{className:"mb-6 text-sm text-gray-600",children:["Agent: ",null===(a=l[p])||void 0===a?void 0:a.agentName,(0,gp.jsx)("br",{}),"This action cannot be undone."]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>{h(!1),x(null)},className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"button",onClick:()=>{if(null!==p){const t=l.filter(((e,t)=>t!==p));if(c(t),i(J(J({},IE),{},{classification:o.classification})),V(0),E&&T){let e="0.00";if("LISTING SIDE"===E){const t=parseFloat(T.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}i((t=>J(J({},t),{},{awardAmount:e})))}if(A&&"LISTING SIDE"===E){const t=G();if(t.length>0){var e;const n=t[0],r=(null===(e=n.agentNo)||void 0===e?void 0:e.toString())||"",a="".concat(n.firstName||""," ").concat(n.lastName||"").trim();if(r&&a){let e="0.00";if("LISTING SIDE"===E){const t=parseFloat(T.listingAmount)||0;e=t.toFixed(2)}else if("SELLING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}else if("CO-OPERATING SIDE"===E){const t=parseFloat(T.sellingAmount)||0;e=t.toFixed(2)}i((t=>J(J({},t),{},{agentId:r,agentName:a,awardAmount:e})))}}}}h(!1),x(null)},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}),(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Agents List"}),(0,gp.jsxs)("div",{className:"overflow-x-auto mb-8",children:[(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Agent"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Classification"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Lead"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Tax"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Total"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Fees"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Net"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Buyer Rebate"})]})}),(0,gp.jsx)("tbody",{children:0===l.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:9,className:"text-center py-4 text-gray-500",children:"No agents added yet."})}):l.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.agentName}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.classification}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.lead}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.amount}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.tax}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.total}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.feesDeducted}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:e.netCommission}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:"yes"===e.buyerRebateIncluded?"$".concat(e.buyerRebateAmount):"-"})]},t)))})]}),l.length>0&&(0,gp.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>{u(0),i(l[0])},className:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>{x(0),h(!0)},className:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]}),(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Fees Deduction"}),(0,gp.jsx)("div",{className:"overflow-x-auto mb-8",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Fee Type"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b border-r text-left",children:"Deducted Fee"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-left",children:"Taxed"})]})}),(0,gp.jsx)("tbody",{children:0===l.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:3,className:"text-center py-4 text-gray-500",children:"No fees deduction entries yet."})}):l.map(((e,t)=>(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:CE(e.feeInfo)}),(0,gp.jsxs)("td",{className:"px-4 py-2 border-b border-r",children:["$",e.feesDeducted]}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:"Yes"})]},"".concat(t,"-fee")),"yes"===e.buyerRebateIncluded&&(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b border-r",children:"Buyer Rebate"}),(0,gp.jsxs)("td",{className:"px-4 py-2 border-b border-r",children:["$",e.buyerRebateAmount]}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b",children:"No"})]},"".concat(t,"-rebate"))]})))})]})}),!D&&(0,gp.jsx)("div",{className:"flex justify-end mt-8",children:(0,gp.jsx)("button",{type:"button",className:"px-6 py-2 rounded font-semibold ".concat(M||U?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-900 text-white hover:bg-blue-800"),onClick:async()=>{if(M||U)return;console.log("Attempting to save trade. Current list of added agents:",l);if(""!==o.agentName&&""!==o.agentId&&null===d)return console.log("Unsaved agent form data detected:",o),void alert("You have unsaved agent information in the form. Please click 'Add Agent' to add it to the list before saving the entire trade.");try{B(!0),await k(),H(!0),$p.success("Trade saved successfully!")}catch(e){console.error("Error saving trade:",e),$p.error("Failed to save trade. Please try again.")}finally{B(!1)}},disabled:M||U,children:M?"Saving...":U?"Trade Saved":"Save Trade"})})]})},OE=e=>{var n,r,a,s,o,i,l,c,d,u,m,h,p,x,f,g,b,y,v,N,j,w,S,C,k,E,T,A;let{trade:I,onClose:D,onUpdate:P}=e;const[O,L]=(0,t.useState)("key-info"),[R,F]=(0,t.useState)(!1),[_,M]=(0,t.useState)([]),[B,U]=(0,t.useState)([]),[H,z]=(0,t.useState)(!1),[V,q]=(0,t.useState)((null===I||void 0===I?void 0:I.tradeNumber)||""),[W,Y]=(0,t.useState)({listingNumber:(null===I||void 0===I||null===(n=I.keyInfo)||void 0===n?void 0:n.listingNumber)||"",tradeNumber:(null===I||void 0===I?void 0:I.tradeNumber)||"",status:(null===I||void 0===I||null===(r=I.keyInfo)||void 0===r?void 0:r.status)||"AVAILABLE",streetNumber:(null===I||void 0===I||null===(a=I.keyInfo)||void 0===a?void 0:a.streetNumber)||"",streetName:(null===I||void 0===I||null===(s=I.keyInfo)||void 0===s?void 0:s.streetName)||"",unit:(null===I||void 0===I||null===(o=I.keyInfo)||void 0===o?void 0:o.unit)||"",city:(null===I||void 0===I||null===(i=I.keyInfo)||void 0===i?void 0:i.city)||"",province:(null===I||void 0===I||null===(l=I.keyInfo)||void 0===l?void 0:l.province)||"",postalCode:(null===I||void 0===I||null===(c=I.keyInfo)||void 0===c?void 0:c.postalCode)||"",offerDate:(null===I||void 0===I||null===(d=I.keyInfo)||void 0===d?void 0:d.offerDate)||"",firmDate:(null===I||void 0===I||null===(u=I.keyInfo)||void 0===u?void 0:u.firmDate)||"",closeDate:(null===I||void 0===I||null===(m=I.keyInfo)||void 0===m?void 0:m.closeDate)||"",entryDate:(null===I||void 0===I||null===(h=I.keyInfo)||void 0===h?void 0:h.entryDate)||"",finalizedDate:(null===I||void 0===I||null===(p=I.keyInfo)||void 0===p?void 0:p.finalizedDate)||"",sellPrice:(null===I||void 0===I||null===(x=I.keyInfo)||void 0===x?void 0:x.sellPrice)||"",mlsNumber:(null===I||void 0===I||null===(f=I.keyInfo)||void 0===f?void 0:f.mlsNumber)||"",propertyType:(null===I||void 0===I||null===(g=I.keyInfo)||void 0===g?void 0:g.propertyType)||"",dealType:(null===I||void 0===I||null===(b=I.keyInfo)||void 0===b?void 0:b.dealType)||"",weManage:(null===I||void 0===I||null===(y=I.keyInfo)||void 0===y?void 0:y.weManage)||"",classification:(null===I||void 0===I||null===(v=I.keyInfo)||void 0===v?void 0:v.classification)||"LISTING SIDE",firm:(null===I||void 0===I||null===(N=I.keyInfo)||void 0===N?void 0:N.firm)||"",listCommission:(null===I||void 0===I||null===(j=I.keyInfo)||void 0===j?void 0:j.listCommission)||"",sellCommission:(null===I||void 0===I||null===(w=I.keyInfo)||void 0===w?void 0:w.sellCommission)||"",conditions:(null===I||void 0===I?void 0:I.conditions)||[]}),[G,K]=(0,t.useState)((null===I||void 0===I?void 0:I.people)||[]);(0,t.useEffect)((()=>{console.log("People state changed:",G)}),[G]);const[X,$]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),[Q,Z]=(0,t.useState)((null===I||void 0===I?void 0:I.outsideBrokers)||[]);(0,t.useEffect)((()=>{console.log("Outside brokers state changed:",Q)}),[Q]);const[ee,te]=(0,t.useState)({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"",end:"",primaryPhone:"",chargedHST:"Yes",address:"",sellingAmount:"",tax:"",total:""}),[ne,re]=(0,t.useState)((null===I||void 0===I?void 0:I.trustRecords)||[]),[ae,se]=(0,t.useState)({weHold:"",heldBy:"",received:"",depositDate:"",receivedFrom:"",amount:"",reference:"",paymentType:"",currency:"",earnInterest:""}),[oe,ie]=(0,t.useState)((null===I||void 0===I||null===(S=I.keyInfo)||void 0===S?void 0:S.closeDate)||""),[le,ce]=(0,t.useState)("Active"),[de,ue]=(0,t.useState)(""),[me,he]=(0,t.useState)((null===I||void 0===I||null===(C=I.keyInfo)||void 0===C?void 0:C.listCommission)||""),[pe,xe]=(0,t.useState)((null===I||void 0===I||null===(k=I.keyInfo)||void 0===k?void 0:k.sellCommission)||""),[fe,ge]=(0,t.useState)((null===I||void 0===I||null===(E=I.commission)||void 0===E?void 0:E.saleClosingRows)||[]),[be,ye]=(0,t.useState)((null===I||void 0===I||null===(T=I.commission)||void 0===T?void 0:T.commissionIncomeRows)||[]),[ve,Ne]=(0,t.useState)((null===I||void 0===I||null===(A=I.commission)||void 0===A?void 0:A.outsideBrokersRows)||[]),[je,we]=(0,t.useState)(0),[Se,Ce]=(0,t.useState)({agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",taxOnFees:"",total:"",totalFees:"",netCommission:"",lead:"No"}),[ke,Ee]=(0,t.useState)((null===I||void 0===I?void 0:I.agentCommissionList)||[]),[Te,Ae]=(0,t.useState)(""),[Ie,De]=(0,t.useState)(null),[Pe,Oe]=(0,t.useState)(!1),[Le,Re]=(0,t.useState)(null),[Fe,_e]=(0,t.useState)(""),[Me,Be]=(0,t.useState)(null),[Ue,He]=(0,t.useState)(!1),[ze,Ve]=(0,t.useState)(null),[qe,We]=(0,t.useState)(null),[Ye,Ge]=(0,t.useState)(!1),[Ke,Xe]=(0,t.useState)(null),[$e,Qe]=(0,t.useState)(null),[Je,Ze]=(0,t.useState)(null),[et,tt]=(0,t.useState)(null),[nt,rt]=(0,t.useState)(null),[at,st]=(0,t.useState)(!1),[ot,it]=(0,t.useState)(null),[lt,ct]=(0,t.useState)(!1),[dt,ut]=(0,t.useState)(""),[mt,ht]=(0,t.useState)(""),[pt,xt]=(0,t.useState)(null),[ft,gt]=(0,t.useState)({}),[bt,yt]=(0,t.useState)({listingAmount:"0.00",sellingAmount:"0.00",listingTax:"0.00",sellingTax:"0.00"});(0,t.useEffect)((()=>{var e,t;if((null===I||void 0===I||null===(e=I.commission)||void 0===e||null===(t=e.commissionIncomeRows)||void 0===t?void 0:t.length)>0){const e=I.commission.commissionIncomeRows[0];yt({listingAmount:e.listingAmount||"0.00",sellingAmount:e.sellingAmount||"0.00",listingTax:e.listingTax||"0.00",sellingTax:e.sellingTax||"0.00"})}}),[I]),(0,t.useEffect)((()=>{null!==I&&void 0!==I&&I.keyInfo&&(he(I.keyInfo.listCommission||""),xe(I.keyInfo.sellCommission||""))}),[I]);const[vt,Nt]=(0,t.useState)(""),[jt,wt]=(0,t.useState)(""),[St,Ct]=(0,t.useState)(""),[kt,Et]=(0,t.useState)("");(0,t.useEffect)((()=>{var e,t;if((null===I||void 0===I||null===(e=I.commission)||void 0===e||null===(t=e.outsideBrokersRows)||void 0===t?void 0:t.length)>0){const e=I.commission.outsideBrokersRows[0];Nt(e.agentName||""),wt(e.brokerage||""),Ct(e.sellingAmount||"")}}),[I]),(0,t.useEffect)((()=>{var e;if((null===I||void 0===I||null===(e=I.agentCommissionList)||void 0===e?void 0:e.length)>0){const e=I.agentCommissionList[0];Ce({agentId:e.agentId||"",agentName:e.agentName||"",classification:e.classification||"",ytdCommission:e.ytdCommission||"Yes",awardAmount:e.awardAmount||"",percentage:e.percentage||100,amount:e.amount||"",feeInfo:e.feeInfo||"plan500",feesDeducted:e.feesDeducted||"",tax:e.tax||"",taxOnFees:e.taxOnFees||"",total:e.total||"",totalFees:e.totalFees||"",netCommission:e.netCommission||"",lead:e.lead||"No"})}}),[I]),(0,t.useEffect)((()=>{if(I&&W.listingNumber&&_.length>0){const e=_.find((e=>e.listingNumber.toString()===W.listingNumber));if(e&&(console.log("Found selected listing:",e),console.log("Listing people:",e.people),console.log("Listing agents:",e.agents),0===G.length&&e.people&&Array.isArray(e.people))){const t=e.people.map((e=>J(J({},e),{},{type:"Lease"===W.dealType?"Landlord":"Seller"})));console.log("Setting people:",t),K(t)}}}),[I,W.listingNumber,W.dealType,_,G.length]),(0,t.useEffect)((()=>{(async()=>{try{const e=await Oj.get("/listings");M(e.data)}catch(e){console.error("Error fetching listings:",e)}})()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const e=await Oj.get("/trades");U(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}),[]),(0,t.useEffect)((()=>{const e=be[0]||{};yt({listingAmount:e.listingAmount||"0.00",sellingAmount:e.sellingAmount||"0.00"})}),[be]),(0,t.useEffect)((()=>{if(W.sellPrice&&(me||pe)){const e=parseFloat(W.sellPrice)||0,t=parseFloat(me)||0,n=parseFloat(pe)||0,r=(e*t/100).toFixed(2),a=(e*n/100).toFixed(2),s=(.13*parseFloat(r)).toFixed(2),o=(.13*parseFloat(a)).toFixed(2);yt({listingAmount:r,sellingAmount:a,listingTax:s,sellingTax:o})}}),[W.sellPrice,me,pe]),(0,t.useEffect)((()=>{if(be.length>0&&W.sellPrice){const e=be[0],t=parseFloat(W.sellPrice)||0;if(t>0){const n=parseFloat(e.listingAmount)||0,r=n>0?(n/t*100).toFixed(2):"",a=parseFloat(e.sellingAmount)||0,s=a>0?(a/t*100).toFixed(2):"";he(r),xe(s)}}}),[be,W.sellPrice]),(0,t.useEffect)((()=>{W.closeDate&&ie(W.closeDate)}),[W.closeDate]),(0,t.useEffect)((()=>{he(W.listCommission||""),xe(W.sellCommission||"")}),[W.listCommission,W.sellCommission]);const[Tt,At]=(0,t.useState)({}),It=async()=>{F(!0);try{const e=J(J({},I),{},{keyInfo:W,people:G,outsideBrokers:Q,trustRecords:ne,commission:{saleClosingRows:fe,commissionIncomeRows:be,outsideBrokersRows:ve},agentCommissionList:ke,conditions:W.conditions});await Oj.put("/trades/".concat(I._id),e),$p.success("Trade updated successfully!"),P(e),D()}catch(e){console.error("Error updating trade:",e),$p.error("Failed to update trade. Please try again.")}finally{F(!1)}},Dt=()=>{"key-info"===O?L("people"):"people"===O?L("outside-brokers"):"outside-brokers"===O?L("trust"):"trust"===O?L("commission"):"commission"===O&&L("agent-info")},Pt=()=>{"people"===O?L("key-info"):"outside-brokers"===O?L("people"):"trust"===O?L("outside-brokers"):"commission"===O?L("trust"):"agent-info"===O&&L("commission")};return(0,t.useEffect)((()=>{const e=ne.reduce(((e,t)=>e+(parseFloat(t.amount)||0)),0);if("LISTING SIDE"===W.classification){if(ne.some((e=>"Yes"===e.weHold))){const t=e-parseFloat(je||0);ue(t.toFixed(2))}else ue(je)}else"CO-OPERATING SIDE"===W.classification&&ue(je)}),[W.classification,je,kt,ne]),(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-7xl h-[90vh] flex flex-col",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,gp.jsxs)("h2",{className:"text-2xl font-bold",children:["Edit Trade #",null===I||void 0===I?void 0:I.tradeNumber]}),(0,gp.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,gp.jsx)("div",{className:"border-b",children:(0,gp.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("key-info"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("key-info"),children:"Key Info"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("people"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("people"),children:"People"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("outside-brokers"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("outside-brokers"),children:"Outside Brokers"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("trust"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("trust"),children:"Trust"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("commission"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("commission"),children:"Commission"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("agent-info"===O?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>L("agent-info"),children:"Agent Info"})]})}),(0,gp.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["key-info"===O&&(0,gp.jsx)(fE,{keyInfoData:W,handleKeyInfoChange:e=>{const{name:t,value:n}=e.target;Y((e=>J(J({},e),{},{[t]:n})))},goToNextSection:Dt,listings:_,setKeyInfoData:Y,isLoadingTradeNumber:H,nextTradeNumber:V,onListingSelected:e=>{e&&e.people&&Array.isArray(e.people)&&K(e.people.map((e=>J(J({},e),{},{type:"Lease"===W.dealType?"Landlord":"Seller"}))))},trades:B,currentTradeNumber:null===I||void 0===I?void 0:I.tradeNumber}),"people"===O&&(0,gp.jsx)(bE,{people:G,person:X,setPerson:$,setPeople:K,selectedPersonType:Te,setSelectedPersonType:Ae,editingPersonIndex:Ie,setEditingPersonIndex:De,showDeletePersonConfirm:Pe,setShowDeletePersonConfirm:Oe,personToDelete:Le,setPersonToDelete:Re,handlePersonInputChange:e=>{const{name:t,value:n}=e.target;$((e=>J(J({},e),{},{[t]:n})))},handlePersonTypeSelect:e=>{Ae(e),$((t=>J(J({},t),{},{type:e})))},handlePersonSubmit:e=>{e.preventDefault(),console.log("handlePersonSubmit called"),console.log("Current person:",X),console.log("Selected person type:",Te),console.log("Current people array:",G);const t=J(J({},X),{},{type:Te});if(console.log("Person to add:",t),null!==Ie){const e=[...G];e[Ie]=t,K(e),De(null),console.log("Updated person at index:",Ie)}else K([...G,t]),console.log("Added new person to array");$({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),Ae("")},handlePersonEdit:e=>{$(G[e]),De(e),Ae(G[e].type)},handlePersonDelete:e=>{Re(e),Oe(!0)},confirmDeletePerson:()=>{const e=G.filter(((e,t)=>t!==Le));K(e),Oe(!1),Re(null)},cancelDeletePerson:()=>{Oe(!1),Re(null)},goToNextSection:Dt,goToPreviousSection:Pt,listingNumber:W.listingNumber,dealType:W.dealType,weManage:W.weManage}),"outside-brokers"===O&&(0,gp.jsx)(yE,{outsideBrokers:Q,setOutsideBrokers:Z,broker:ee,setBroker:te,selectedBrokerType:Fe,setSelectedBrokerType:_e,editingBrokerIndex:Me,setEditingBrokerIndex:Be,showDeleteBrokerConfirm:Ue,setShowDeleteBrokerConfirm:He,brokerToDelete:ze,setBrokerToDelete:Ve,handleBrokerInputChange:e=>{const{name:t,value:n}=e.target;te((e=>J(J({},e),{},{[t]:n})))},handleBrokerTypeSelect:e=>{_e(e),te((t=>J(J({},t),{},{type:e})))},handleBrokerEdit:e=>{te(Q[e]),Be(e),_e(Q[e].type)},handleBrokerDelete:e=>{Ve(e),He(!0)},confirmDeleteBroker:()=>{const e=Q.filter(((e,t)=>t!==ze));Z(e),He(!1),Ve(null)},cancelDeleteBroker:()=>{He(!1),Ve(null)},goToNextSection:Dt,goToPreviousSection:Pt,listingNumber:W.listingNumber,weManage:W.weManage,dealType:W.dealType}),"trust"===O&&(0,gp.jsx)(NE,{trustRecords:ne,setTrustRecords:re,trust:ae,setTrust:se,editingTrustIndex:qe,setEditingTrustIndex:We,showDeleteTrustConfirm:Ye,setShowDeleteTrustConfirm:Ge,trustToDelete:Ke,setTrustToDelete:Xe,handleTrustInputChange:e=>{const{name:t,value:n}=e.target;se((e=>J(J({},e),{},{[t]:n})))},handleTrustSubmit:e=>{if(e.preventDefault(),null!==qe){const e=[...ne];e[qe]=ae,re(e),We(null)}else re([...ne,ae]);se({weHold:"",heldBy:"",received:"",depositDate:"",receivedFrom:"",amount:"",reference:"",paymentType:"",currency:"",earnInterest:""})},handleTrustEdit:e=>{se(ne[e]),We(e)},handleTrustDelete:e=>{Xe(e),Ge(!0)},confirmDeleteTrust:()=>{const e=ne.filter(((e,t)=>t!==Ke));re(e),Ge(!1),Xe(null)},cancelDeleteTrust:()=>{Ge(!1),Xe(null)},goToNextSection:Dt,goToPreviousSection:Pt,tradeNumber:W.tradeNumber||V,userName:"Admin"}),"commission"===O&&(0,gp.jsx)(xE,{sellPrice:W.sellPrice,closingDate:oe,status:le,ar:de,onClosingDateChange:e=>ie(e.target.value),onStatusChange:e=>ce(e.target.value),onARChange:e=>ue(e.target.value),listingCommission:me,sellingCommission:pe,onListingCommissionChange:e=>{const t=e.target.value;he(t),Y((e=>J(J({},e),{},{listCommission:t})))},onSellingCommissionChange:e=>{const t=e.target.value;xe(t),Y((e=>J(J({},e),{},{sellCommission:t})))},goToNextSection:Dt,goToPreviousSection:Pt,tradeNumber:V,saleClosingRows:fe,commissionIncomeRows:be,outsideBrokersRows:ve,editingSaleClosingIdx:$e,editingCommissionIncomeIdx:Je,editingOutsideBrokerIdx:et,commissionFormFields:Tt,onUpdateSaleClosing:e=>{const t=[...fe];t[$e]=e,ge(t),Qe(null),At({})},onUpdateCommissionIncome:e=>{const t=[...be];t[Je]=e,ye(t),Ze(null),At({})},onUpdateOutsideBroker:e=>{const t=[...ve];t[et]=e,Ne(t),tt(null),At({})},onEditSaleClosing:()=>{fe.length>0&&(Qe(0),At(J({},fe[0])))},onEditCommissionIncome:()=>{be.length>0&&(Ze(0),At(J({},be[0])))},onEditOutsideBroker:()=>{ve.length>0&&(tt(0),At(J({},ve[0])))},onAddCommissionInfo:e=>{let{type:t,data:n}=e;switch(t){case"saleClosing":ge([...fe,n]);break;case"commissionIncome":ye([...be,n]);break;case"outsideBroker":Ne([...ve,n])}},onDeleteSaleClosing:()=>{fe.length>0&&(ge([]),Qe(null),At({}))},onDeleteCommissionIncome:()=>{be.length>0&&(ye([]),Ze(null),At({}))},onDeleteOutsideBroker:()=>{ve.length>0&&(Ne([]),tt(null),At({}))},outsideBrokers:Q,onCommissionTotalChange:we,onBrokerTotalChange:Et,brokerAgentName:vt,brokerBrokerage:jt,brokerSellingAmount:St,onBrokerAgentNameChange:e=>Nt(e.target.value),onBrokerBrokerageChange:e=>wt(e.target.value),onBrokerSellingAmountChange:e=>Ct(e.target.value)}),"agent-info"===O&&(0,gp.jsx)(PE,{goToNextSection:It,goToPreviousSection:Pt,agent:Se,setAgent:Ce,agents:ke,setAgents:Ee,editingIndex:nt,setEditingIndex:rt,showDeleteModal:at,setShowDeleteModal:st,deletingIndex:ot,setDeletingIndex:it,showBuyerRebateModal:lt,setShowBuyerRebateModal:ct,buyerRebateIncluded:dt,setBuyerRebateIncluded:ut,buyerRebateAmount:mt,setBuyerRebateAmount:ht,pendingAgent:pt,setPendingAgent:xt,validationErrors:ft,setValidationErrors:gt,onSaveTrade:It,commissionTotal:je,classification:W.classification,commissionData:bt,isEditMode:!0,isEditingExistingTrade:!0,selectedListing:_.find((e=>e.listingNumber.toString()===W.listingNumber))})]}),(0,gp.jsxs)("div",{className:"border-t p-6 flex justify-between",children:[(0,gp.jsx)("button",{onClick:Pt,disabled:"key-info"===O,className:"px-6 py-2 rounded-md font-medium ".concat("key-info"===O?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"),children:"Previous"}),(0,gp.jsxs)("div",{className:"flex space-x-4",children:[(0,gp.jsx)("button",{onClick:D,className:"px-6 py-2 bg-gray-600 text-white rounded-md font-medium hover:bg-gray-700",children:"Cancel"}),"agent-info"===O?(0,gp.jsx)("button",{onClick:It,disabled:R,className:"px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 disabled:bg-blue-400",children:R?"Saving...":"Save Trade"}):(0,gp.jsx)("button",{onClick:Dt,className:"px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:"Next"})]})]})]})})},LE=e=>{let{trade:n,onClose:r,onUpdate:a}=e;const[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1);if(!n)return null;const u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";return t.split(".").reduce(((e,t)=>e&&void 0!==e[t]?e[t]:n),e)},m=e=>{if(!e||!e.length)return(0,gp.jsx)("div",{className:"text-gray-500",children:"No data."});const t=Object.keys(e[0]),n=t.map((e=>e.charAt(0).toUpperCase()+e.slice(1)));return(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsx)("tr",{children:t.map(((e,t)=>(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:n[t]},e)))})}),(0,gp.jsx)("tbody",{children:e.map(((e,n)=>(0,gp.jsx)("tr",{children:t.map((t=>(0,gp.jsx)("td",{className:"border px-2 py-1",children:e[t]},t)))},n)))})]})},h=e=>{let{trade:n}=e;const[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)("");return(0,t.useEffect)((()=>{n&&n._id&&(d(!0),m(""),Oj.get("/real-estate-trust-eft/trade/".concat(n._id)).then((e=>a(e.data))).catch((()=>a([]))),Oj.get("/commission-trust-eft/trade/".concat(n._id)).then((e=>o(e.data))).catch((()=>o([]))),d(!1))}),[n]),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Real Estate Trust Payments"}),r.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"EFT #"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Recipient"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Description"})]})}),(0,gp.jsx)("tbody",{children:r.map((e=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.eftNumber}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.amount)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.recipient}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:SE(e.type)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.description})]},e._id)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No Real Estate Trust Payments found for this trade."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission Trust Payments"}),s.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"EFT #"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Recipient"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Description"})]})}),(0,gp.jsx)("tbody",{children:s.map((e=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.eftNumber}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.amount)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.recipient}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:SE(e.type)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.description})]},e._id)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No Commission Trust Payments found for this trade."})]})]})};return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,gp.jsxs)("div",{className:"flex gap-3 absolute top-4 right-6 z-10",children:[(0,gp.jsx)("button",{onClick:async()=>{if(!c){d(!0);try{var e,t,r,a,s,o,i,l,m,h,p;let c=window.open("","_blank"),d=!1;c||(d=!0,c=window);const y=(new Date).toLocaleDateString();let v=[],N=[];if(n&&n._id)try{const[e,t]=await Promise.all([Oj.get("/real-estate-trust-eft/trade/".concat(n._id)),Oj.get("/commission-trust-eft/trade/".concat(n._id))]);v=e.data||[],N=t.data||[]}catch(b){}const j=(null===(e=n.commission)||void 0===e||null===(t=e.commissionIncomeRows)||void 0===t?void 0:t[0])||{},w="CO-OPERATING SIDE"===((null===(r=n.keyInfo)||void 0===r?void 0:r.classification)||""),S=j.listingAmount&&""!==j.listingAmount?parseFloat(j.listingAmount):0,C=j.sellingAmount&&""!==j.sellingAmount?parseFloat(j.sellingAmount):0,k=(S+C).toFixed(2),E=(.13*S).toFixed(2),T=(.13*C).toFixed(2),A=(parseFloat(E)+parseFloat(T)).toFixed(2),I=(parseFloat(k)+parseFloat(A)).toFixed(2);let D=null;(null===(a=n.commission)||void 0===a||null===(s=a.outsideBrokersRows)||void 0===s?void 0:s.length)>0?D=n.commission.outsideBrokersRows[0]:(null===(o=n.outsideBrokers)||void 0===o?void 0:o.length)>0&&(D=n.outsideBrokers[0]);let P,O,L,R,F,_="0.00",M="0.00",B="0.00",U="0.00",H="0.00",z="";if(D){var x;const e="".concat(D.agentName||D.firstName||""," ").concat(D.lastName||"").trim(),t=D.company||D.brokerage||"";z=e&&t?"".concat(e," - ").concat(t):e||t||"Outside Broker";const r=D.sellingAmount||"0.00",a=null===(x=n.outsideBrokers)||void 0===x?void 0:x.find((e=>"".concat(e.firstName," ").concat(e.lastName).trim()===(D.agentName||D.firstName)||e.company===D.company));let s="";if(a){var f,g;s=null!==(f=a.end)&&void 0!==f&&f.toLowerCase().includes("listing")||null!==(g=a.type)&&void 0!==g&&g.toLowerCase().includes("listing")?"listing":"selling"}else{s=(D.end||D.type||"").toLowerCase().includes("listing")?"listing":"selling"}"listing"===s?(_=r,M="0.00"):(_="0.00",M=r),B=r,U=D.tax||"0.00",H=D.total||"0.00"}w?(P=S,O=C,L=k,R=A,F=I):(P=(parseFloat(S)-parseFloat(_)).toFixed(2),O=(parseFloat(C)-parseFloat(M)).toFixed(2),L=(parseFloat(k)-parseFloat(B)).toFixed(2),R=(parseFloat(A)-parseFloat(U)).toFixed(2),F=(parseFloat(I)-parseFloat(H)).toFixed(2));const V=(n.agentCommissionList||[]).map((e=>{var t;const n=e.amount&&""!==e.amount?parseFloat(e.amount):0,r=e.feesDeducted&&""!==e.feesDeducted?parseFloat(e.feesDeducted):0,a=(null===(t=e.classification)||void 0===t||t.toLowerCase(),n-r);let s="0.00",o="0.00";w?(s="0.00",o=a.toFixed(2)):(s=a.toFixed(2),o="0.00");let i=(parseFloat(s)+parseFloat(o)).toFixed(2);const l=(.13*parseFloat(i)).toFixed(2),c=(parseFloat(i)+parseFloat(l)).toFixed(2);return J(J({},e),{},{agentListing:s,agentSelling:o,agentSubTotal:i,agentHST:l,agentTotal:c})})),q=(n.agentCommissionList||[]).reduce(((e,t)=>"yes"===t.buyerRebateIncluded&&t.buyerRebateAmount?e+parseFloat(t.buyerRebateAmount||0):e),0);let W,Y,G,K,X,$,Q,Z,ee,te,ne="0.00",re="0.00";if(w?re=q.toFixed(2):ne=q.toFixed(2),w||2!==V.length)$=V.reduce(((e,t)=>e+parseFloat(t.agentListing)),0),Q=V.reduce(((e,t)=>e+parseFloat(t.agentSelling)),0),Z=V.reduce(((e,t)=>e+parseFloat(t.agentSubTotal)),0),ee=V.reduce(((e,t)=>e+parseFloat(t.agentHST)),0),te=V.reduce(((e,t)=>e+parseFloat(t.agentTotal)),0);else{const e=V[0],t=V[1];$=parseFloat(e.agentListing)-parseFloat(t.agentListing),Q=parseFloat(e.agentSelling)-parseFloat(t.agentSelling),Z=parseFloat(e.agentSubTotal)-parseFloat(t.agentSubTotal),ee=parseFloat(e.agentHST)-parseFloat(t.agentHST),te=parseFloat(e.agentTotal)-parseFloat(t.agentTotal)}W=(parseFloat(P)-$-parseFloat(ne)).toFixed(2),Y=(parseFloat(O)-Q-parseFloat(re)).toFixed(2),G=(parseFloat(L)-Z-(parseFloat(ne)+parseFloat(re))).toFixed(2),K=(parseFloat(R)-ee).toFixed(2),X=(parseFloat(F)-te-(parseFloat(ne)+parseFloat(re))).toFixed(2);const ae=(null===(i=n.commission)||void 0===i||null===(l=i.outsideBrokersRows)||void 0===l?void 0:l.map((e=>({agentName:e.agentName||"-",brokerage:e.brokerage||"-",end:(e=>{var t,r,a;const s=null===(t=n.outsideBrokers)||void 0===t?void 0:t.find((t=>"".concat(t.firstName," ").concat(t.lastName).trim()===e.agentName||t.company===e.brokerage));var o,i;if(s&&(null!==(o=s.end)&&void 0!==o&&o.toLowerCase().includes("listing")||null!==(i=s.type)&&void 0!==i&&i.toLowerCase().includes("listing")))return"Listing";return null!==(r=e.end)&&void 0!==r&&r.toLowerCase().includes("listing")||null!==(a=e.type)&&void 0!==a&&a.toLowerCase().includes("listing")?"Listing":"Selling"})(e),sellingAmount:e.sellingAmount||"0.00",tax:e.tax||"0.00",total:e.total||"0.00"}))))||[],se=u(n,"keyInfo.streetNumber")||"",oe=u(n,"keyInfo.streetName")||"",ie=u(n,"keyInfo.unit")||"",le=u(n,"keyInfo.city")||"",ce=u(n,"keyInfo.province")||"",de=u(n,"keyInfo.postalCode")||"",ue=se&&oe?"".concat(se," ").concat(oe):"",me=ie||"",he=le&&ce?"".concat(le,", ").concat(ce):"",pe=de||"",xe="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Trade Record Sheet - ".concat(n.tradeNumber,'</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 15px; font-size: 11px; }\n          .header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }\n          .logo { width: 80px; height: auto; }\n          .title { font-size: 18px; font-weight: bold; text-align: center; flex-grow: 1; }\n          .date-address { text-align: right; font-size: 10px; }\n          .date { font-weight: bold; margin-bottom: 5px; }\n          .address { line-height: 1.2; }\n          .section { margin-bottom: 15px; }\n          .section-title { font-size: 14px; font-weight: bold; margin-bottom: 8px; border-bottom: 1px solid #333; padding-bottom: 3px; }\n          .property-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; }\n          .property-item { display: flex; justify-content: space-between; font-size: 10px; }\n          .property-label { font-weight: bold; }\n          table { width: 100%; border-collapse: collapse; margin-bottom: 10px; font-size: 9px; }\n          th, td { border: 1px solid #ddd; padding: 4px; text-align: left; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .financial-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }\n          .financial-item { text-align: center; }\n          .financial-label { font-weight: bold; margin-bottom: 3px; font-size: 10px; }\n          .financial-value { font-size: 14px; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n            button { display: none !important; }\n            .no-print button { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div style="display: flex; flex-direction: column; align-items: flex-start;">\n            <img src="').concat(window.location.origin,'/logo1.jpg" alt="Logo" class="logo">\n            <div style="font-size: 9px; line-height: 1.2; margin-top: 5px;">\n                      Bestway Real Estate Ltd., Brokerage<br>\n      500 St.George Street, Moncton, NB E1C 1Y3<br>\n        Phone: 506-268-2900\n            </div>\n          </div>\n          <div class="title">Trade Record Sheet</div>\n          <div class="date-address">\n            <div class="date">').concat(y,'</div>\n            <div class="address">\n              ').concat(ue,"<br>\n              ").concat(me,"<br>\n              ").concat(he,"<br>\n              ").concat(pe,'\n            </div>\n            <div style="font-size: 10px; font-weight: bold; margin-top: 5px;">\n              Trade Number - ').concat(u(n,"keyInfo.tradeNumber")||n.tradeNumber||"-",'\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Property</div>\n          <div class="property-grid">\n            <div class="property-item">\n              <span class="property-label">Type:</span>\n              <span>').concat(u(n,"keyInfo.propertyType"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Classification:</span>\n              <span>').concat(u(n,"keyInfo.classification"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Status:</span>\n              <span>').concat(u(n,"keyInfo.status"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">MLS Number:</span>\n              <span>').concat(u(n,"keyInfo.mlsNumber"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Offer Date:</span>\n              <span>').concat(u(n,"keyInfo.offerDate"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Entry Date:</span>\n              <span>').concat(u(n,"keyInfo.entryDate"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Firm Date:</span>\n              <span>').concat(u(n,"keyInfo.firmDate"),'</span>\n            </div>\n            <div class="property-item">\n              <span class="property-label">Close Date:</span>\n              <span>').concat(u(n,"keyInfo.closeDate"),'</span>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Conditions</div>\n          ').concat(n.conditions&&n.conditions.length>0?"\n          <table>\n            <thead>\n              <tr>\n                <th>Condition</th>\n                <th>Due Date</th>\n                <th>Condition Met Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(n.conditions.map((e=>"\n                <tr>\n                  <td>".concat(e.conditionText||"-","</td>\n                  <td>").concat(e.dueDate||"-","</td>\n                  <td>").concat(e.conditionMetDate||"Not met","</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No conditions available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Contacts</div>\n          ').concat(n.people&&n.people.length>0?"\n          <table>\n            <thead>\n              <tr>\n                <th>Type</th>\n                <th>First Name</th>\n                <th>Last Name</th>\n                <th>Primary Phone</th>\n                <th>Secondary Phone</th>\n                <th>Email</th>\n                <th>Company Name</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(n.people.map((e=>"\n                <tr>\n                  <td>".concat(e.type||"-","</td>\n                  <td>").concat(e.firstName||"-","</td>\n                  <td>").concat(e.lastName||"-","</td>\n                  <td>").concat(e.primaryPhone||"-","</td>\n                  <td>").concat(e.secondaryPhone||"-","</td>\n                  <td>").concat(e.email||"-","</td>\n                  <td>").concat(e.companyName||"-","</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No contacts available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Outside Brokers</div>\n          ').concat(n.outsideBrokers&&n.outsideBrokers.length>0?"\n          <table>\n            <thead>\n              <tr>\n                <th>Type</th>\n                <th>End</th>\n                <th>First Name</th>\n                <th>Last Name</th>\n                <th>Company</th>\n                <th>Phone Number</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(n.outsideBrokers.map((e=>"\n                <tr>\n                  <td>".concat(e.type||"-","</td>\n                  <td>").concat(e.end||"-","</td>\n                  <td>").concat(e.firstName||"-","</td>\n                  <td>").concat(e.lastName||"-","</td>\n                  <td>").concat(e.company||"-","</td>\n                  <td>").concat(e.primaryPhone||"-","</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No outside brokers available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Outside Brokers Commission Details</div>\n          ').concat(ae.length>0?"\n          <table>\n            <thead>\n              <tr>\n                <th>Agent Name</th>\n                <th>Brokerage</th>\n                <th>End</th>\n                <th>Selling Amount</th>\n                <th>Tax</th>\n                <th>Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(ae.map((e=>"\n                <tr>\n                  <td>".concat(e.agentName,"</td>\n                  <td>").concat(e.brokerage,"</td>\n                  <td>").concat(e.end,"</td>\n                  <td>").concat(EE(e.sellingAmount),"</td>\n                  <td>").concat(EE(e.tax),"</td>\n                  <td>").concat(EE(e.total),"</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No outside brokers commission details available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Deposit</div>\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"\n          <table>\n            <thead>\n              <tr>\n                <th>We Hold</th>\n                <th>Received</th>\n                <th>Received From</th>\n                <th>Held By</th>\n                <th>Deposit Date</th>\n                <th>Reference</th>\n                <th>Amount</th>\n                <th>Payment Type</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(n.trustRecords.map((e=>"\n                <tr>\n                  <td>".concat(e.weHold||"-","</td>\n                  <td>").concat(e.received||"-","</td>\n                  <td>").concat(e.receivedFrom||"-","</td>\n                  <td>").concat(e.heldBy||"-","</td>\n                  <td>").concat(e.depositDate||e.date||"-","</td>\n                  <td>").concat(e.reference||"-","</td>\n                  <td>").concat(EE(e.amount||0),"</td>\n                  <td>").concat(e.paymentType||"-","</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No deposit records available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Financial</div>\n          <div style="font-weight:bold; font-size:12px; margin-bottom:4px;">Financial:</div>\n          <div style="margin-bottom:4px; font-size:10px;">\n            <div>Selling Price: <span style="font-weight:bold;">').concat(EE(j.sellPrice||(null===(m=n.keyInfo)||void 0===m?void 0:m.sellPrice)||0),'</span></div>\n          </div>\n          <div style="margin-bottom:4px; font-size:10px;">\n            <div>Listing Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(h=n.keyInfo)||void 0===h?void 0:h.listCommission)||0),'%</span></div>\n          </div>\n          <div style="margin-bottom:4px; font-size:10px;">\n            <div>Selling Commission: <span style="font-weight:bold;">').concat(parseFloat((null===(p=n.keyInfo)||void 0===p?void 0:p.sellCommission)||0),'%</span></div>\n          </div>\n          <div style="display:flex; font-weight:bold; border-bottom:1px solid #ccc; padding:3px 0; border-top:1px solid #ccc; font-size:9px;">\n            <div style="width:25%"></div>\n            <div style="width:12%; text-align:center;">Listing</div>\n            <div style="width:12%; text-align:center;">Selling</div>\n            <div style="width:12%; text-align:center;">Sub-Total</div>\n            <div style="width:12%; text-align:center;">HST</div>\n            <div style="width:12%; text-align:center;">Total</div>\n          </div>\n          <div style="font-weight:bold; margin-top:6px; margin-bottom:0; font-size:10px;">Income</div>\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n            <div style="width:25%">Commission</div>\n            <div style="width:12%; text-align:center;">').concat(EE(S),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(C),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(k),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(A),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(I),"</div>\n          </div>\n          ").concat(w?'\n          <div style="display:flex; padding:3px 0; font-size:9px;">\n            <div style="width:25%">Base Office Commission</div>\n            <div style="width:12%; text-align:center;">'.concat(EE(P),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(O),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(L),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(R),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(F),"</div>\n          </div>\n          "):'\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Expenses</div>\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n            <div style="width:25%">'.concat(z,'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(_),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(M),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(B),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(U),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(H),'</div>\n          </div>\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n            <div style="width:25%">Base Office Commission</div>\n            <div style="width:12%; text-align:center;">').concat(EE(P),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(O),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(L),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(R),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(F),"</div>\n          </div>\n          "),'\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Agents</div>\n          ').concat(V.map((e=>'\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n            <div style="width:25%">('.concat(e.agentId,") ").concat(e.agentName,'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(e.agentListing),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(e.agentSelling),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(e.agentSubTotal),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(e.agentHST),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(e.agentTotal),"</div>\n          </div>\n          "))).join(""),"\n          \n          \x3c!-- Liabilities Section --\x3e\n          ").concat(q>0?'\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Liabilities</div>\n          <div style="display:flex; border-bottom:1px solid #ccc; padding:3px 0; font-size:9px;">\n            <div style="width:25%">Buyer Rebate</div>\n            <div style="width:12%; text-align:center;">'.concat(EE(ne),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(re),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE((parseFloat(ne)+parseFloat(re)).toFixed(2)),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE("0.00"),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE((parseFloat(ne)+parseFloat(re)).toFixed(2)),"</div>\n          </div>\n          "):"",'\n          <div style="font-weight:bold; margin-top:6px; font-size:10px;">Net to Office</div>\n          <div style="display:flex; border-bottom:3px double #000; padding:3px 0; font-size:9px;">\n            <div style="width:25%"></div>\n            <div style="width:12%; text-align:center;">').concat(EE(W),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(Y),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(G),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(K),'</div>\n            <div style="width:12%; text-align:center;">').concat(EE(X),'</div>\n          </div>\n        </div>\n\n        <div class="section">\n          <div class="section-title">Agent Details</div>\n          ').concat(n.agentCommissionList&&n.agentCommissionList.length>0?'\n          <table style="width:100%; border-collapse:collapse; margin-bottom:10px;">\n            <thead>\n              <tr style="background-color:#f2f2f2;">\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Name</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Number</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Payment Plan</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Agent Base</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Plan Amount</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Buyer Rebate</th>\n                <th style="border:1px solid #ddd; padding:4px; text-align:left;">Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              '.concat(n.agentCommissionList.map((e=>'\n                <tr>\n                  <td style="border:1px solid #ddd; padding:4px;">'.concat(e.agentName||"-",'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(e.agentId||"-",'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(CE(e.feeInfo)||"-",'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(EE(e.amount||0),'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(EE(e.feesDeducted||0),'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?EE(e.buyerRebateAmount):"-",'</td>\n                  <td style="border:1px solid #ddd; padding:4px;">').concat(EE(parseFloat(e.amount||0)-parseFloat(e.feesDeducted||0)-("yes"===e.buyerRebateIncluded&&e.buyerRebateAmount?parseFloat(e.buyerRebateAmount||0):0)),"</td>\n                </tr>\n              "))).join(""),"\n            </tbody>\n          </table>\n          "):"<p>No agent payment details available.</p>",'\n        </div>\n\n        <div class="section">\n          <div class="section-title">Trust Activity</div>\n          ').concat(n.trustRecords&&n.trustRecords.length>0?"<table><thead><tr>\n                  <th>Received From</th><th>Deposit Date</th><th>Reference</th><th>Amount</th>\n                </tr></thead><tbody>\n                ".concat(n.trustRecords.map((e=>"<tr>\n                      <td>".concat(e.receivedFrom||"-","</td>\n                      <td>").concat(e.depositDate||e.date||"-","</td>\n                      <td>").concat(e.reference||"-","</td>\n                      <td>").concat(EE(e.amount||0),"</td>\n                    </tr>"))).join(""),"\n                </tbody></table>"):'<div class="text-gray-500">No trust records available.</div>','\n        </div>\n\n        <div class="section">\n          <div class="section-title">Real Estate Trust Payments</div>\n          ').concat(v.length>0?"<table><thead><tr>\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n                </tr></thead><tbody>\n                ".concat(v.map((e=>"<tr>\n                      <td>".concat(e.eftNumber||"","</td>\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n                      <td>").concat(EE(e.amount||""),"</td>\n                      <td>").concat(e.recipient||"","</td>\n                      <td>").concat(SE(e.type)||"","</td>\n                      <td>").concat(e.description||"","</td>\n                    </tr>"))).join(""),"\n                </tbody></table>"):'<div class="text-gray-500">No Real Estate Trust Payments found for this trade.</div>','\n        </div>\n\n        <div class="section">\n          <div class="section-title">Commission Trust Payments</div>\n          ').concat(N.length>0?"<table><thead><tr>\n                  <th>EFT #</th><th>Date</th><th>Amount</th><th>Recipient</th><th>Type</th><th>Description</th>\n                </tr></thead><tbody>\n                ".concat(N.map((e=>"<tr>\n                      <td>".concat(e.eftNumber||"","</td>\n                      <td>").concat(e.chequeDate||e.date?new Date(e.chequeDate||e.date).toLocaleDateString():"-","</td>\n                      <td>").concat(EE(e.amount||""),"</td>\n                      <td>").concat(e.recipient||"","</td>\n                      <td>").concat(SE(e.type)||"","</td>\n                      <td>").concat(e.description||"","</td>\n                    </tr>"))).join(""),"\n                </tbody></table>"):'<div class="text-gray-500">No Commission Trust Payments found for this trade.</div>','\n        </div>\n\n        <div class="section">\n          <div class="section-title">Commission Trust Agreement</div>\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n            It is understood between all parties that this agreement shall constitute a Commission Trust Agreement as set out in the contract.\n          </div>\n          <div style="margin-bottom: 15px; font-size: 10px; line-height: 1.4;">\n            To the best of my knowledge the above information is correct. Dated at Moncton on ').concat(y,'\n          </div>\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">\n            <div style="font-size: 10px;">\n              ').concat(V.length>0?"".concat(V[0].agentName||"Agent Name",", ").concat(V[0].agentId||"Agent Number"):"Agent Name, Agent Number",'\n            </div>\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n          </div>\n          <div style="display: flex; justify-content: space-between; align-items: center;">\n            <div style="font-size: 10px;">\n              Broker of Record: Bestway Real Estate Ltd., Brokerage\n            </div>\n            <div style="border-bottom: 1px solid #000; width: 200px; height: 20px;"></div>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          ').concat(d?"":'<button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>',"\n        </div>\n      </body>\n      </html>\n    ");c.document.write(xe),c.document.close(),setTimeout((()=>{try{c.print(),d||setTimeout((()=>{c.close()}),1e3),d||setTimeout((()=>{alert("Print dialog opened successfully!")}),100)}catch(e){console.error("Print error:",e),d||c.focus(),alert("Print dialog failed to open. The report is ready for manual printing.")}}),500)}catch(y){console.error("Error generating print report:",y),alert("Error generating print report. Please try again.")}finally{d(!1)}}},disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Print"}),(0,gp.jsx)("button",{onClick:()=>l(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors",children:"Edit"}),(0,gp.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2",onClick:r,style:{lineHeight:1},children:"\xd7"})]}),i?(0,gp.jsx)(OE,{trade:n,onClose:()=>l(!1),onUpdate:a}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-yellow-700 mt-8",children:["Trade Details: #",n.tradeNumber]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Address"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Street #"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.streetNumber")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Street Name"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.streetName")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Unit"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.unit")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"City"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.city")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Province"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.province")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Postal Code"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.postalCode")]})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Offer Date"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.offerDate")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Firm Date"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.firmDate")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Close Date"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.closeDate")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Entry Date"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.entryDate")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Finalized Date"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.finalizedDate")]})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Key Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Listing Number"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.listingNumber")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Sell Price"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.sellPrice")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Classification"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.classification")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Firm"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.firm")]})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-2",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"List %"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.listCommission")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Sell %"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.sellCommission")]})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Property Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Property Type"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.propertyType")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"Status"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.status")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"MLS #"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.mlsNumber")]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-500 font-normal",children:"We Manage"}),(0,gp.jsx)("br",{}),u(n,"keyInfo.weManage")]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"People Information"}),n.people&&n.people.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"First Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Primary Phone"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Secondary Phone"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Email"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Company Name"})]})}),(0,gp.jsx)("tbody",{children:n.people.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.type}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.primaryPhone||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.secondaryPhone||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.email||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.companyName||"-"})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No people information available."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Outside Brokers"}),n.outsideBrokers&&n.outsideBrokers.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"End"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"First Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Company"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Phone Number"})]})}),(0,gp.jsx)("tbody",{children:n.outsideBrokers.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.type||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.end||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.company||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.primaryPhone||"-"})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No outside brokers information available."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Outside Brokers Commission Details"}),n.commission&&n.commission.outsideBrokersRows&&n.commission.outsideBrokersRows.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Brokerage"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"End"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Selling Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Tax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:n.commission.outsideBrokersRows.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.brokerage||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:(e=>{var t,r,a;const s=null===(t=n.outsideBrokers)||void 0===t?void 0:t.find((t=>"".concat(t.firstName," ").concat(t.lastName).trim()===e.agentName||t.company===e.brokerage));var o,i;if(s&&(null!==(o=s.end)&&void 0!==o&&o.toLowerCase().includes("listing")||null!==(i=s.type)&&void 0!==i&&i.toLowerCase().includes("listing")))return"Listing";return null!==(r=e.end)&&void 0!==r&&r.toLowerCase().includes("listing")||null!==(a=e.type)&&void 0!==a&&a.toLowerCase().includes("listing")?"Listing":"Selling"})(e)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.sellingAmount)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.tax)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.total)})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No outside brokers commission details available."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Trust Records"}),n.trustRecords&&n.trustRecords.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"We Hold"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Received"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Received From"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Held By"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Deposit Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Reference"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Payment Type"})]})}),(0,gp.jsx)("tbody",{children:n.trustRecords.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.weHold||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.received||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.receivedFrom||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.heldBy||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.depositDate||e.date||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.reference||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.amount||"-")}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.paymentType||"-"})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No trust records."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Conditions"}),n.conditions&&n.conditions.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Condition"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Due Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Condition Met Date"})]})}),(0,gp.jsx)("tbody",{children:n.conditions.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.conditionText||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.dueDate||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.conditionMetDate||"Not met"})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No conditions available."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Commission Details"}),n.commission&&(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-1",children:"Sale Closing Rows"}),m(n.commission.saleClosingRows)]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-1",children:"Commission Income Rows"}),m(n.commission.commissionIncomeRows)]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-1",children:"Outside Brokers Rows"}),m(n.commission.outsideBrokersRows)]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Agent Commission Info"}),n.agentCommissionList&&n.agentCommissionList.length>0?(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Classification"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Net Commission"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Lead"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Fee Info"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total Fees"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Tax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left bg-gray-100 border",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:n.agentCommissionList.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.agentName}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.classification}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.amount)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.netCommission)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lead}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:CE(e.feeInfo)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.totalFees)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.tax)}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:EE(e.total)})]},t)))})]}):(0,gp.jsx)("div",{className:"text-gray-500",children:"No agent commission data."})]}),(0,gp.jsx)(h,{trade:n})]})]})})},RE=["EFT","Cheque","Wire","Cash"],FE=e=>{var n,r,a,s,o;let{trade:i,onClose:l}=e;const c=new Date,d="".concat(c.getFullYear(),"-").concat(String(c.getMonth()+1).padStart(2,"0"),"-").concat(String(c.getDate()).padStart(2,"0"));function u(e){if(!e)return"";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)}const[m,h]=(0,t.useState)(d),[p,x]=(0,t.useState)((null===i||void 0===i||null===(n=i.keyInfo)||void 0===n?void 0:n.closeDate)||""),[f,g]=(0,t.useState)(""),[b,y]=(0,t.useState)(!1),[v,N]=(0,t.useState)(!1),[j,w]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[k,E]=(0,t.useState)(RE[0]),[T,A]=(0,t.useState)(""),[I,D]=(0,t.useState)([]),[P,O]=(0,t.useState)([]),[L,R]=(0,t.useState)([]),[F,_]=(0,t.useState)(!1);(0,t.useEffect)((()=>{null!==i&&void 0!==i&&i._id&&(Oj.get("/commission-trust-eft/trade/".concat(i._id)).then((e=>D(e.data))).catch((()=>D([]))),Oj.get("/real-estate-trust-eft/trade/".concat(i._id)).then((e=>O(e.data))).catch((()=>O([]))),Oj.get("/ledger?tradeId=".concat(i._id)).then((e=>R(e.data))).catch((()=>R([]))))}),[null===i||void 0===i?void 0:i._id]),(0,t.useEffect)((()=>{"No"===B()&&g("Selling Side")}),[i]),(0,t.useEffect)((()=>{A("")}),[null===i||void 0===i?void 0:i._id]);const M=()=>null!==i&&void 0!==i&&i.trustRecords&&i.trustRecords.length>0&&i.trustRecords[0].amount||"-",B=()=>null!==i&&void 0!==i&&i.trustRecords&&i.trustRecords.length>0&&i.trustRecords[0].weHold||"-",U=(()=>{var e;const t=(null===i||void 0===i||null===(e=i.commission)||void 0===e?void 0:e.commissionIncomeRows)||[];let n=t.find((e=>"Listing Side"===e.end)),r=t.find((e=>"Selling Side"===e.end));return!n&&t.length>0&&(n=t[0]),!r&&t.length>0&&(r=t[0]),{listing:n,selling:r}})(),H=((null===i||void 0===i?void 0:i.agentCommissionList)||[])[0]||{},z=()=>{let e=0;var t;if("Selling Side"===f)e=parseFloat((null===(t=U.selling)||void 0===t?void 0:t.sellingAmount)||0);else if("Listing Side"===f){var n;e=parseFloat((null===(n=U.listing)||void 0===n?void 0:n.listingAmount)||0)}const r=.13*e,a=e+r;return{commission:e?e.toFixed(2):"-",tax:e?r.toFixed(2):"-",total:e?a.toFixed(2):"-"}},{commission:V,tax:q,total:W}=z(),Y=()=>{var e,t,n,r;const a=parseFloat((null===(e=U.listing)||void 0===e?void 0:e.listingAmount)||0)+parseFloat((null===(t=U.selling)||void 0===t?void 0:t.sellingAmount)||0)+parseFloat((null===(n=U.listing)||void 0===n?void 0:n.listingTax)||0)+parseFloat((null===(r=U.selling)||void 0===r?void 0:r.sellingTax)||0);return a>0?a.toFixed(2):"-"},G=()=>{const e=(i.agentCommissionList||[]).reduce(((e,t)=>"yes"===t.buyerRebateIncluded&&t.buyerRebateAmount?e+parseFloat(t.buyerRebateAmount||0):e),0);return e>0?e.toFixed(2):"-"},K=()=>{const e=(null===i||void 0===i?void 0:i.keyInfo)||{};return"".concat(e.streetNumber||""," ").concat(e.streetName||"").trim()};(0,t.useEffect)((()=>{if(v){const e=B(),t=parseFloat(M())||0,n=parseFloat(Y())||0;if("No"===e){const e=(()=>{if(null!==i&&void 0!==i&&i.outsideBrokers&&i.outsideBrokers.length>0){const e=i.outsideBrokers.find((e=>{var t;return"Listing Broker"===e.type||(null===(t=e.end)||void 0===t?void 0:t.toLowerCase().includes("listing"))}));return(null===e||void 0===e?void 0:e.company)||""}return""})();e&&!j.trim()&&w(e);const t=(()=>{var e,t;return(parseFloat((null===(e=U.selling)||void 0===e?void 0:e.sellingAmount)||0)+parseFloat((null===(t=U.selling)||void 0===t?void 0:t.sellingTax)||0)).toFixed(2)})();"0.00"===t||S.trim()||C(t)}else if("Yes"===e&&n>t){const e=(n-t).toFixed(2);"0.00"===e||S.trim()||C(e)}}}),[v,i,j,S]);const X=e=>L.filter((t=>String(t.eftNumber)===String(e))),$=async()=>{try{const e=await Oj.get("/eft/next-number");return e.data&&e.data.eftNumber?e.data.eftNumber:Q()}catch(e){return console.error("Error getting next EFT number from backend:",e),Q()}},Q=()=>{const e=L.filter((e=>e.eftNumber&&e.eftNumber.startsWith("EFT"))).map((e=>{const t=e.eftNumber.match(/EFT(\d+)/);return t?parseInt(t[1]):0})).sort(((e,t)=>t-e));return e.length>0?Math.max(...e)+1:300},J=()=>{let e;e=i.isFinalized?L.filter((e=>e.description&&e.description.includes("Trade #: ".concat(i.tradeNumber))&&!e.description.includes("Paid to:")&&!e.description.includes("Received from:")&&!(e.description.includes("Commission Trust Payment")&&!e.description.includes("Received From:")&&!e.description.includes("Trade #:")))):(()=>{var e,t,n,r;const a=K(),s="Trade #: ".concat(i.tradeNumber," - ").concat(a),o=m,l=p||d;console.log("=== getTransactionDetails - Date Assignment ==="),console.log("Finalized Date (Blue section):",o),console.log("Closing Date (Red section):",l);const c=parseFloat(M())||0,u=parseFloat(H.netCommission||0),h=(parseFloat(H.amount||0),parseFloat(H.tax||0)),x=parseFloat(H.feesDeducted||0),f=H.totalFees&&H.feesDeducted?parseFloat(H.totalFees)-parseFloat(H.feesDeducted):0,g=parseFloat((null===(e=U.listing)||void 0===e?void 0:e.listingAmount)||0),b=parseFloat((null===(t=U.listing)||void 0===t?void 0:t.listingTax)||0),y=parseFloat((null===(n=U.selling)||void 0===n?void 0:n.sellingAmount)||0),v=parseFloat((null===(r=U.selling)||void 0===r?void 0:r.sellingTax)||0),N=B(),w=parseFloat(S)||0,C="Trade #: ".concat(i.tradeNumber," - Received From: ").concat(j);if("Yes"===N){console.log("=== We Hold = Yes - Creating Transaction Preview ==="),console.log("Blue section (transactions 1-9) will use date:",o),console.log("Red section (transactions 10-12) will use date:",l);const e=[{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:u,description:s,date:o},{accountNumber:"50100",accountName:"Agent's Commission",debit:g,credit:0,description:s,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:h,credit:0,description:s,date:o},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:x,description:s,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:f,description:s,date:o},{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:g+y,description:s,date:o},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:b+v,description:s,date:o},{accountNumber:"21300",accountName:"Deposit Liability",debit:c,credit:0,description:s,date:o},...c>=g+y+b+v?[{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:c-(g+y+b+v),description:s,date:o}]:[{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:g+y+b+v-c,credit:0,description:s,date:o}],{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:y+v,description:s,date:o},{accountNumber:"51100",accountName:"Outside Broker Commission",debit:y,credit:0,description:s,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:v,credit:0,description:s,date:o}],t=parseFloat(Y())||0;if(t>c){const n=t-c,r="Trade #: ".concat(i.tradeNumber," - ").concat(a," - Received From: ").concat(j);e.push({accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:n,credit:0,description:r,date:l}),e.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:n,description:r,date:l})}return e}{const e=z().commission,t=z().tax,n=[{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:parseFloat(e),description:s,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(t),credit:0,description:s,date:o},{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:parseFloat(t),description:s,date:o},{accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(H.amount||0),credit:0,description:s,date:o},{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(H.netCommission||0),description:s,date:o},{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(H.feesDeducted||0),description:s,date:o},{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:parseFloat(H.totalFees&&H.feesDeducted?parseFloat(H.totalFees)-parseFloat(H.feesDeducted):0),description:s,date:o}];return w>0&&(n.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:w,credit:0,description:s,date:o}),n.push({accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:w,credit:0,description:C,date:l}),n.push({accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:w,description:C,date:l})),n}})();let t=0,n=0;e.forEach((e=>{t+=Number(e.debit)||0,n+=Number(e.credit)||0}));const r=(n-t).toFixed(2),a=L.filter((e=>("10002"===e.accountNumber||"21300"===e.accountNumber)&&e.description&&e.description.includes("Trade #: ".concat(i.tradeNumber))&&e.description.includes("Received from"))).map((e=>'\n        <tr>\n          <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(kE(e.date||m||d),'</td>\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountNumber||"",'</td>\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountName||"",'</td>\n          <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.debit?Number(e.debit).toFixed(2):"",'</td>\n          <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.credit?Number(e.credit).toFixed(2):"",'</td>\n          <td style="border: 1px solid #000; padding: 8px;">').concat(e.description||"","</td>\n        </tr>\n      "))).join("");let s=0,o=0;L.filter((e=>("10002"===e.accountNumber||"21300"===e.accountNumber)&&e.description&&e.description.includes("Trade #: ".concat(i.tradeNumber))&&e.description.includes("Received from"))).forEach((e=>{s+=Number(e.debit)||0,o+=Number(e.credit)||0}));const l=(o-s).toFixed(2);let c=0,u=0;const h=I.map((e=>{const t=X(e.eftNumber);return t.length?t.map((t=>{c+=Number(t.debit)||0,u+=Number(t.credit)||0;const n=t.chequeDate||t.date||e.date||m||d;return'\n          <tr>\n            <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(kE(n),'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountNumber||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountName||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.debit?Number(t.debit).toFixed(2):"",'</td>\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.credit?Number(t.credit).toFixed(2):"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.description||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n          </tr>\n        ")})).join(""):""})).join(""),x=(u-c).toFixed(2);let f=0,g=0;const b=P.map((e=>{const t=X(e.eftNumber).filter((e=>e.description&&e.description.includes("Trade #: ".concat(i.tradeNumber)))),n=e.date?e.date:m||d;return"CommissionTransfer"===e.type?(e.amount&&(f+=Number(e.amount)||0,g+=Number(e.amount)||0),['<tr>\n              <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(kE(n),'</td>\n              <td style="border: 1px solid #000; padding: 8px;">10004</td>\n              <td style="border: 1px solid #000; padding: 8px;">CASH - COMMISSION TRUST ACCOUNT</td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.amount?Number(e.amount).toFixed(2):"",'</td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"></td>\n              <td style="border: 1px solid #000; padding: 8px;">Commission Transfer for Trade #: ').concat(i.tradeNumber,'</td>\n              <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n            </tr>"),'<tr>\n              <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(kE(n),'</td>\n              <td style="border: 1px solid #000; padding: 8px;">10002</td>\n              <td style="border: 1px solid #000; padding: 8px;">CASH - TRUST</td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(e.amount?Number(e.amount).toFixed(2):"",'</td>\n              <td style="border: 1px solid #000; padding: 8px;">Commission Transfer for Trade #: ').concat(i.tradeNumber,'</td>\n              <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n            </tr>")].join("")):(t.forEach((e=>{f+=Number(e.debit)||0,g+=Number(e.credit)||0})),t.map((t=>{const r=t.chequeDate||t.date||n;return'\n          <tr>\n            <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(kE(r),'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountNumber||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.accountName||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.debit?Number(t.debit).toFixed(2):"",'</td>\n            <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(t.credit?Number(t.credit).toFixed(2):"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(t.description||"",'</td>\n            <td style="border: 1px solid #000; padding: 8px;">').concat(e.eftNumber||"","</td>\n          </tr>\n        ")})).join(""))})).join(""),y=(g-f).toFixed(2),v=(null===i||void 0===i?void 0:i.keyInfo)||{},N="".concat(v.streetNumber||""," ").concat(v.streetName||"").trim(),w=v.postalCode||"",C=v.city||"",k=v.province||"",E=window.open("","","width=900,height=700"),T='\n      <html>\n      <head>\n        <title>Transaction Details</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 40px; font-size: 13px; }\n          h2 { margin-bottom: 20px; }\n          h3 { margin-top: 30px; margin-bottom: 10px; font-size: 15px; }\n          .header { margin-bottom: 30px; }\n          .header div { margin-bottom: 2px; }\n          table { border-collapse: collapse; width: 100%; margin-bottom: 20px; font-size: 12px; }\n          th, td { border: 1px solid #ccc; padding: 6px 10px; text-align: left; }\n          th { background: #f5f5f5; }\n          @media print { .no-print { display: none !important; } }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div><b>SAVEMAX 365 REALTY</b></div>\n          <div>Trade #: '.concat(i.tradeNumber,"</div>\n          <div>").concat(N).concat(N&&(C||k||w)?",":""," ").concat(C).concat(C&&k?",":""," ").concat(k," ").concat(w,"</div>\n        </div>\n        <h2>Transaction Details for Trade #").concat(i.tradeNumber,'</h2>\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(e.map(((e,t)=>'\n                  <tr>\n                    <td style="border: 1px solid #000; padding: 8px; min-width: 120px; width: 120px;">'.concat(e.date||m||d,'</td>\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountNumber,'</td>\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.accountName,'</td>\n                    <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(0!==e.debit?e.debit.toFixed(2):"",'</td>\n                    <td style="border: 1px solid #000; padding: 8px; text-align: right;">').concat(0!==e.credit?e.credit.toFixed(2):"",'</td>\n                    <td style="border: 1px solid #000; padding: 8px;">').concat(e.description,"</td>\n                  </tr>\n                "))).join(""),'\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(t.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(n.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px;"></td>\n            </tr>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(r,"</b></td>\n            </tr>\n          </tfoot>\n        </table>\n        ").concat(a||h||b?'<div style="page-break-inside: avoid;">\n                '.concat(a?'<h3>Trust Deposit Transactions</h3>\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(a,'\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(s.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(o.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px;"></td>\n            </tr>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(l,"</b></td>\n            </tr>\n          </tfoot>\n        </table>"):"","\n                ").concat(h?'<h3>Commission Trust Payments</h3>\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">EFT #</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(h,'\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(c.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(u.toFixed(2),'</b></td>\n              <td colspan="2" style="border: 1px solid #000; padding: 8px;"></td>\n            </tr>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n              <td colspan="4" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(x,"</b></td>\n            </tr>\n          </tfoot>\n        </table>"):"","\n                ").concat(b?'<h3>Real Estate Trust Payments</h3>\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left; min-width: 120px; width: 120px;">Date</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Number</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Account Name</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Debit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: right;">Credit</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">Description</th>\n              <th style="border: 1px solid #000; padding: 8px; text-align: left;">EFT #</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(b,'\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Total</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(f.toFixed(2),'</b></td>\n              <td style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(g.toFixed(2),'</b></td>\n              <td colspan="2" style="border: 1px solid #000; padding: 8px;"></td>\n            </tr>\n            <tr>\n              <td colspan="3" style="border: 1px solid #000; padding: 8px;"><b>Net (Credit - Debit)</b></td>\n              <td colspan="4" style="border: 1px solid #000; padding: 8px; text-align: right;"><b>').concat(y,"</b></td>\n            </tr>\n          </tfoot>\n        </table>"):"","\n              </div>"):"",'\n        <button onclick="window.print()" class="no-print" style="padding:10px 20px;font-size:16px;">Print</button>\n      </body>\n      </html>\n    ');E.document.write(T),E.document.close()};return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl relative",children:[(0,gp.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl",onClick:()=>{A(""),l&&l()},children:"\xd7"}),(0,gp.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Finalize Trade"}),"Yes"===B()?(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:e=>h(e.target.value)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 ".concat(p||"Yes"!==B()?"bg-gray-50":"bg-red-50 border-red-300"),children:u(p)}),!p&&"Yes"===B()&&(0,gp.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Closing date is required when We Hold = Yes"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Deposit Amount"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:M()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"We Hold"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:B()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Agent Commission"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.amount||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Agent Net"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.netCommission||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Agent HST"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.tax||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Listing Amount"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(r=U.listing)||void 0===r?void 0:r.listingAmount)||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Listing Tax"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(a=U.listing)||void 0===a?void 0:a.listingTax)||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Selling Amount"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(s=U.selling)||void 0===s?void 0:s.sellingAmount)||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Selling Tax"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:(null===(o=U.selling)||void 0===o?void 0:o.sellingTax)||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Total Commission"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:Y()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Fees Deducted"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.feesDeducted||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Tax on Fees Deducted"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.totalFees&&H.feesDeducted?(parseFloat(H.totalFees)-parseFloat(H.feesDeducted)).toFixed(2):"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Buyer Rebate"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G()})]})]}):(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:e=>h(e.target.value)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:p,onChange:e=>x(e.target.value)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"End"}),(0,gp.jsxs)("select",{className:"border rounded px-2 py-1 w-full",value:"No"===B()?"Selling Side":f,onChange:e=>g(e.target.value),disabled:"No"===B(),children:[(0,gp.jsx)("option",{value:"",children:"Select"}),(0,gp.jsx)("option",{value:"Listing Side",children:"Listing Side"}),(0,gp.jsx)("option",{value:"Selling Side",children:"Selling Side"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Deposit Amount"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:M()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"We Hold"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:B()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Commission"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:V})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Tax"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:q})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Total"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:W})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Total Commission"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:Y()})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Agent Commission"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.amount||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Agent Net"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.netCommission||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Fees Deducted"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.feesDeducted||"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Tax For Deduction"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:H.totalFees&&H.feesDeducted?(parseFloat(H.totalFees)-parseFloat(H.feesDeducted)).toFixed(2):"-"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Buyer Rebate"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 bg-gray-50",children:G()})]})]}),(0,gp.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",id:"fallenThru",checked:F,onChange:e=>_(e.target.checked),className:"mr-2"}),(0,gp.jsx)("label",{htmlFor:"fallenThru",className:"font-medium",children:"Fallen Thru"})]}),(0,gp.jsxs)("div",{className:"flex gap-2",children:[(0,gp.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:J,disabled:b,children:"Print Details"}),(0,gp.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:async()=>{if(i.isFinalized)return void $p.error("This trade is already finalized.");if(!m)return void $p.error("Please enter the finalized date.");const e=B();if("Yes"===e&&!p)return void $p.error("Please ensure the closing date is set when 'We Hold = Yes'.");if(F){try{const e=await Oj.post("/trades/finalize/".concat(i.tradeNumber),{fallenThru:!0,finalizedDate:m});e.data&&e.data.success?($p.success("Trade marked as Fallen Thru. No transactions processed."),A(""),l&&l()):$p.error(e.data.message||"Failed to mark trade as Fallen Thru.")}catch(c){c.response&&c.response.data&&c.response.data.message?$p.error(c.response.data.message):$p.error("An error occurred while marking trade as Fallen Thru.")}return}const t=parseFloat(M())||0,n=parseFloat(Y())||0;if("No"===e||n>t)$().then((e=>{A(e),N(!0)}));else try{var r,a,s,o;const e=K(),t="Trade #: ".concat(i.tradeNumber," - ").concat(e),n=m,u=p||d,h=parseFloat(M())||0,x=parseFloat(H.netCommission||0),f=(parseFloat(H.amount||0),parseFloat(H.tax||0),parseFloat(H.feesDeducted||0)),g=H.totalFees&&H.feesDeducted?parseFloat(H.totalFees)-parseFloat(H.feesDeducted):0,b=parseFloat((null===(r=U.listing)||void 0===r?void 0:r.listingAmount)||0),y=parseFloat((null===(a=U.listing)||void 0===a?void 0:a.listingTax)||0),v=parseFloat((null===(s=U.selling)||void 0===s?void 0:s.sellingAmount)||0),N=parseFloat((null===(o=U.selling)||void 0===o?void 0:o.sellingTax)||0);console.log("=== WE HOLD = YES - Starting ledger transactions ==="),console.log("Commission Description:",t),console.log("Commission Date (Blue section):",n),console.log("Closing Date (Red section):",u),console.log("Trade Number:",i.tradeNumber),console.log("Address:",e);try{console.log("=== POSTING BLUE SECTION (Transactions 1-9) ==="),console.log("Using finalized date for all blue section transactions:",n),console.log("Posting transaction 1: 21500 - Commission Payable (credit) with date:",n);const r={accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:x,description:t,date:n};console.log("Transaction 1 data being sent:",r),await Oj.post("/ledger",r),console.log("Transaction 1 posted successfully"),console.log("Posting transaction 2: 50100 - Agent's Commission (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:b,credit:0,description:t,date:n}),console.log("Posting transaction 3: 23001 - HST Input Tax Credit (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:y,credit:0,description:t,date:n}),console.log("Posting transaction 4: 44100 - Fee Deducted Income (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:f,description:t,date:n}),console.log("Posting transaction 5: 23001 - HST Input Tax Credit (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:g,description:t,date:n}),console.log("Posting transaction 6: 40100 - Commission Income (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:b+v,description:t,date:n}),console.log("Posting transaction 7: 23000 - HST Collected (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:y+N,description:t,date:n}),console.log("Posting transaction 8: 21300 - Deposit Liability (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:h,credit:0,description:t,date:n});const a=b+v+y+N;if(h>=a?(console.log("Posting transaction 9: 21300 - Deposit Liability (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:h-a,description:t,date:n})):(console.log("Posting transaction 9: 12200 - A/R - Commission From Deals (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:a-h,credit:0,description:t,date:n})),h<a){const t=a-h,n="Trade #: ".concat(i.tradeNumber," - ").concat(e," - Received From: ").concat(j);console.log("Posting final transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",u),await Oj.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:t,credit:0,description:n,date:u,eftNumber:T}),console.log("Posting final transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",u),await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:t,description:n,date:u,eftNumber:T})}console.log("=== POSTING RED SECTION (Transactions 10-12) ==="),console.log("Using finalized date for all red section transactions:",n),console.log("Posting transaction 10: 21100 - Outside Broker Payable (credit) with date:",n),await Oj.post("/ledger",{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:v+N,description:t,date:n}),console.log("Posting transaction 11: 51100 - Outside Broker Commission (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"51100",accountName:"Outside Broker Commission",debit:v,credit:0,description:t,date:n}),console.log("Posting transaction 12: 23001 - HST Input Tax Credit (debit) with date:",n),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:N,credit:0,description:t,date:n}),console.log("=== ALL WE HOLD = YES TRANSACTIONS POSTED SUCCESSFULLY ==="),console.log("Blue section (1-9) posted with finalized date:",n),console.log("Red section (10-12) posted with closing date:",u)}catch(c){throw console.error("Error posting We Hold = Yes transactions:",c),c}const w=await Oj.post("/trades/finalize/".concat(i.tradeNumber),{finalizedDate:m});w.data&&w.data.success?($p.success("Trade finalized and posted to ledger successfully!"),A(""),l&&l(),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"))):$p.error(w.data.message||"Failed to finalize trade.")}catch(c){c.response&&c.response.data&&c.response.data.message?$p.error(c.response.data.message):$p.error("An error occurred while finalizing the trade.")}},disabled:b,children:b?"Finalizing...":"Finalize Trade"})]})]}),v&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",onClick:()=>{N(!1),A("")},children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",onClick:e=>e.stopPropagation(),children:[(0,gp.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl",onClick:()=>N(!1),children:"\xd7"}),(0,gp.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirm Payment"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Finalized Date"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:m,onChange:e=>h(e.target.value)})]}),"Yes"===B()&&(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Closing Date"}),(0,gp.jsx)("div",{className:"border rounded px-2 py-1 ".concat(p?"bg-gray-50":"bg-red-50 border-red-300"),children:u(p)}),!p&&(0,gp.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Closing date is required when We Hold = Yes"})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Received From"}),(0,gp.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full",value:j,onChange:e=>w(e.target.value)})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Amount"}),(0,gp.jsx)("input",{type:"number",className:"border rounded px-2 py-1 w-full",value:S,onChange:e=>C(e.target.value),step:"0.01"})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"Payment Type"}),(0,gp.jsx)("select",{className:"border rounded px-2 py-1 w-full",value:k,onChange:e=>E(e.target.value),children:RE.map((e=>(0,gp.jsx)("option",{value:e,children:e},e)))})]}),(()=>{const e=parseFloat(M())||0;return(parseFloat(Y())||0)>e?(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block font-medium mb-1",children:"EFT#"}),(0,gp.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full bg-gray-50",value:T,readOnly:!0})]}):null})(),(0,gp.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,gp.jsx)("button",{className:"px-6 py-2 bg-gray-500 text-white font-semibold rounded hover:bg-gray-600 disabled:opacity-60",onClick:()=>N(!1),disabled:b,children:"Cancel"}),(0,gp.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:J,disabled:b,children:"Print Details"}),(0,gp.jsx)("button",{className:"px-6 py-2 bg-blue-900 text-white font-semibold rounded hover:bg-blue-800 disabled:opacity-60",onClick:async()=>{if(i.isFinalized)return void $p.error("This trade is already finalized.");if(!m)return void $p.error("Please enter the finalized date.");if("Yes"===B()&&!p)return void $p.error("Please ensure the closing date is set when 'We Hold = Yes'.");if(!j.trim())return void $p.error("Please enter who the payment was received from.");if(!S||parseFloat(S)<=0)return void $p.error("Please enter a valid payment amount.");const e=parseFloat(M())||0;if((parseFloat(Y())||0)>e&&!T)$p.error("EFT number is required when deposit amount is less than total commission.");else{y(!0);try{var t,n,r,a;const e=K(),o="Trade #: ".concat(i.tradeNumber," - ").concat(e),c=m,u=p||d,h=parseFloat(M())||0,x=parseFloat(H.netCommission||0),f=(parseFloat(H.amount||0),parseFloat(H.tax||0),parseFloat(H.feesDeducted||0)),g=H.totalFees&&H.feesDeducted?parseFloat(H.totalFees)-parseFloat(H.feesDeducted):0,b=parseFloat((null===(t=U.listing)||void 0===t?void 0:t.listingAmount)||0),y=parseFloat((null===(n=U.listing)||void 0===n?void 0:n.listingTax)||0),v=parseFloat((null===(r=U.selling)||void 0===r?void 0:r.sellingAmount)||0),w=parseFloat((null===(a=U.selling)||void 0===a?void 0:a.sellingTax)||0);if("Yes"===B()){console.log("=== WE HOLD = YES - Starting ledger transactions ==="),console.log("Commission Description:",o),console.log("Commission Date (Blue section):",c),console.log("Closing Date (Red section):",u),console.log("Trade Number:",i.tradeNumber),console.log("Address:",e);try{console.log("=== POSTING BLUE SECTION (Transactions 1-9) ==="),console.log("Using finalized date for all blue section transactions:",c),console.log("Posting transaction 1: 21500 - Commission Payable (credit) with date:",c);const t={accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:x,description:o,date:c};console.log("Transaction 1 data being sent:",t),await Oj.post("/ledger",t),console.log("Transaction 1 posted successfully"),console.log("Posting transaction 2: 50100 - Agent's Commission (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:b,credit:0,description:o,date:c}),console.log("Posting transaction 3: 23001 - HST Input Tax Credit (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:y,credit:0,description:o,date:c}),console.log("Posting transaction 4: 44100 - Fee Deducted Income (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:f,description:o,date:c}),console.log("Posting transaction 5: 23001 - HST Input Tax Credit (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:g,description:o,date:c}),console.log("Posting transaction 6: 40100 - Commission Income (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:b+v,description:o,date:c}),console.log("Posting transaction 7: 23000 - HST Collected (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:y+w,description:o,date:c}),console.log("Posting transaction 8: 21300 - Deposit Liability (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:h,credit:0,description:o,date:c});const n=b+v+y+w;if(h>=n?(console.log("Posting transaction 9: 21300 - Deposit Liability (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"21300",accountName:"Deposit Liability",debit:0,credit:h-n,description:o,date:c})):(console.log("Posting transaction 9: 12200 - A/R - Commission From Deals (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:n-h,credit:0,description:o,date:c})),h<n){const t=n-h,r="Trade #: ".concat(i.tradeNumber," - ").concat(e," - Received From: ").concat(j);console.log("Posting final transaction 1: 10004 - Cash - Commission Trust Account (debit) with date:",u),await Oj.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:t,credit:0,description:r,date:u,eftNumber:T}),console.log("Posting final transaction 2: 12200 - A/R - Commission From Deals (credit) with date:",u),await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:t,description:r,date:u,eftNumber:T})}console.log("=== POSTING RED SECTION (Transactions 10-12) ==="),console.log("Using finalized date for all red section transactions:",c),console.log("Posting transaction 10: 21100 - Outside Broker Payable (credit) with date:",c),await Oj.post("/ledger",{accountNumber:"21100",accountName:"Outside Broker Payable",debit:0,credit:v+w,description:o,date:c}),console.log("Posting transaction 11: 51100 - Outside Broker Commission (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"51100",accountName:"Outside Broker Commission",debit:v,credit:0,description:o,date:c}),console.log("Posting transaction 12: 23001 - HST Input Tax Credit (debit) with date:",c),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:w,credit:0,description:o,date:c}),console.log("Transaction 12 posted successfully"),console.log("=== ALL WE HOLD = YES TRANSACTIONS POSTED SUCCESSFULLY ==="),console.log("Blue section (1-9) posted with finalized date:",c),console.log("Red section (10-12) posted with closing date:",u)}catch(s){throw console.error("Error posting We Hold = Yes transactions:",s),s}}else{const e=parseFloat(S)||0,t="Trade #: ".concat(i.tradeNumber," - Received From: ").concat(j);await Oj.post("/ledger",{accountNumber:"40100",accountName:"Commission Income",debit:0,credit:parseFloat(V),description:o,date:c}),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(q),credit:0,description:o,date:c}),await Oj.post("/ledger",{accountNumber:"23000",accountName:"HST Collected",debit:0,credit:parseFloat(q),description:o,date:c}),await Oj.post("/ledger",{accountNumber:"50100",accountName:"Agent's Commission",debit:parseFloat(H.amount||0),credit:0,description:o,date:c}),await Oj.post("/ledger",{accountNumber:"21500",accountName:"Commission Payable",debit:0,credit:parseFloat(H.netCommission||0),description:o,date:c}),await Oj.post("/ledger",{accountNumber:"44100",accountName:"Fee Deducted Income",debit:0,credit:parseFloat(H.feesDeducted||0),description:o,date:c}),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:0,credit:parseFloat(H.totalFees&&H.feesDeducted?parseFloat(H.totalFees)-parseFloat(H.feesDeducted):0),description:o,date:c}),e>0&&await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:e,credit:0,description:o,date:c,eftNumber:T}),e>0&&await Oj.post("/ledger",{accountNumber:"10004",accountName:"Cash - Commission Trust Account",debit:e,credit:0,description:t,date:u,eftNumber:T}),e>0&&await Oj.post("/ledger",{accountNumber:"12200",accountName:"A/R - Commission From Deals",debit:0,credit:e,description:t,date:u,eftNumber:T});const n=parseFloat(G())||0;n>0&&await Oj.post("/ledger",{accountNumber:"52100",accountName:"Referral Fees",debit:0,credit:n,description:"Trade #: ".concat(i.tradeNumber," - Buyer Rebate"),date:c})}const C=await Oj.post("/trades/finalize/".concat(i.tradeNumber),{finalizedDate:m});C.data&&C.data.success?($p.success("Trade finalized and posted to ledger successfully!"),N(!1),A(""),l&&l(),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"))):$p.error(C.data.message||"Failed to finalize trade.")}catch(o){$p.error("Error finalizing trade. Please try again.")}finally{y(!1)}}},disabled:b,children:b?"Processing...":"Confirm Payment"})]})]})})]})})},_E=e=>{let{trades:n,onTradeFinalized:r}=e;const[a,s]=(0,t.useState)(null),[o,i]=(0,t.useState)(!1),l=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString()};return(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Finalize Trade"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,gp.jsx)("tbody",{children:n.map((e=>{var t,n,r,a,o,c,d,u,m,h,p;return(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{s(e),i(!0)})(e),children:[(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(a=e.keyInfo)||void 0===a?void 0:a.mlsNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(o=e.keyInfo)&&void 0!==o&&o.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(c=e.keyInfo)||void 0===c?void 0:c.propertyType)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(d=e.keyInfo)||void 0===d?void 0:d.status)?"bg-green-100 text-green-800":"PENDING"===(null===(u=e.keyInfo)||void 0===u?void 0:u.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(m=e.keyInfo)||void 0===m?void 0:m.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(h=e.keyInfo)||void 0===h?void 0:h.status)||"Available"})}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(p=e.keyInfo)&&void 0!==p&&p.finalizedDate?l(e.keyInfo.finalizedDate):"-"})]},e._id)}))})]})}),o&&(0,gp.jsx)(FE,{trade:a,onClose:()=>{i(!1),r&&r()}})]})},ME=e=>{var r,a;let{user:s}=e;const[o,i]=(0,t.useState)("list"),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0),[m,h]=(0,t.useState)([]),[p,x]=(0,t.useState)(null),[f,g]=(0,t.useState)(""),[b,y]=(0,t.useState)(!1),[v,N]=(0,t.useState)(null),[j,w]=(0,t.useState)(""),[S,C]=(0,t.useState)("lease"),[k,E]=(0,t.useState)("all"),[T,A]=(0,t.useState)([]),I=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString()},D=l.filter((e=>{var t,n;const r=null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(j),a=Boolean(null===(n=e.keyInfo)||void 0===n?void 0:n.finalizedDate);return"open"===k?r&&!a:"closed"===k?r&&a:r}));(0,t.useEffect)((()=>{(async()=>{try{const e=await Oj.get("/listings");h(e.data)}catch(e){console.error("Error fetching listings:",e)}})()}),[]),(0,t.useEffect)((()=>{(async()=>{u(!0);try{const e=await Oj.get("/trades");console.log("Fetched trades:",e.data),c(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{u(!1)}})()}),[]);const P=()=>(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Trades"}),(0,gp.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:j,onChange:e=>w(e.target.value),className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"}),(0,gp.jsx)(cp,{className:"absolute left-3 top-3 text-gray-400"})]}),(0,gp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gp.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,gp.jsx)("input",{type:"checkbox",checked:"open"===k,onChange:()=>E("open"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Open Deals"})]}),(0,gp.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,gp.jsx)("input",{type:"checkbox",checked:"closed"===k,onChange:()=>E("closed"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Closed Deals"})]})]})]}),d?(0,gp.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===D.length?(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:j?"No trades found matching your search.":"No trades found. Create a new trade using the Key Info form."}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),"closed"===k&&(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,gp.jsx)("tbody",{children:D.map((e=>{var t,n,r,a,s,o,i,l,c,d,u;const m=(e.agentCommissionList||[]).find((e=>e.agentName)),h=m?m.agentName:"-";return(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{N(e),y(!0)})(e),children:[(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(a=e.keyInfo)||void 0===a?void 0:a.mlsNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:h}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(s=e.keyInfo)&&void 0!==s&&s.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(o=e.keyInfo)||void 0===o?void 0:o.propertyType)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(i=e.keyInfo)||void 0===i?void 0:i.status)?"bg-green-100 text-green-800":"PENDING"===(null===(l=e.keyInfo)||void 0===l?void 0:l.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(d=e.keyInfo)||void 0===d?void 0:d.status)||"Available"})}),"closed"===k&&(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(u=e.keyInfo)&&void 0!==u&&u.finalizedDate?I(e.keyInfo.finalizedDate):"-"})]},e._id)}))})]})})]}),[O,L]=(0,t.useState)([]),[R,F]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),[_,M]=(0,t.useState)(""),[B,U]=(0,t.useState)(null),[H,z]=(0,t.useState)(!1),[V,q]=(0,t.useState)(null),[W,Y]=(0,t.useState)([]),[G,K]=(0,t.useState)({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),[X,$]=(0,t.useState)(""),[Q,Z]=(0,t.useState)(null),[ee,te]=(0,t.useState)(!1),[ne,re]=(0,t.useState)(null),[ae,se]=(0,t.useState)(!1),[oe,ie]=(0,t.useState)(""),[le,ce]=(0,t.useState)(""),[de,ue]=(0,t.useState)(0),[me,he]=(0,t.useState)(!1),[pe,xe]=(0,t.useState)(!1),[fe,ge]=(0,t.useState)({}),[be,ye]=(0,t.useState)({}),[ve,Ne]=(0,t.useState)([]),[je,we]=((0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useState)("")),[Se,Ce]=(0,t.useState)(!1),ke=async()=>{Ce(!0);try{const e=await Oj.get("/trades/next-number");e.data&&e.data.nextNumber?we(e.data.nextNumber.toString()):we("200")}catch(e){console.error("Error fetching next trade number:",e),we("200")}finally{Ce(!1)}};(0,t.useEffect)((()=>{ke()}),[]);const[Ee,Te]=(0,t.useState)({tradeNumber:"",listingNumber:"",status:"AVAILABLE",streetNumber:"",streetName:"",unit:"",city:"",province:"",postalCode:"",offerDate:"",firmDate:"",closeDate:"",entryDate:"",finalizedDate:"",sellPrice:"",mlsNumber:"",type:"",weManage:"Yes",classification:"LISTING SIDE",firm:"Yes",listCommission:"",sellCommission:"",conditions:[]});(0,t.useEffect)((()=>{Ee.closeDate&&Pe(Ee.closeDate)}),[Ee.closeDate]),(0,t.useEffect)((()=>{void 0!==Ee.listCommission&&Me(Ee.listCommission),void 0!==Ee.sellCommission&&Ue(Ee.sellCommission)}),[Ee.listCommission,Ee.sellCommission]);const Ae=()=>{"key-info"===o?i("people"):"people"===o?i("outside-brokers"):"outside-brokers"===o?i("trust"):"trust"===o?i("commission"):"commission"===o&&i("agent-info")},Ie=()=>{"people"===o?i("key-info"):"outside-brokers"===o?i("people"):"trust"===o?i("outside-brokers"):"commission"===o?i("trust"):"agent-info"===o&&i("commission")},[De,Pe]=(0,t.useState)(""),[Oe,Le]=(0,t.useState)("Active"),[Re,Fe]=(0,t.useState)(""),[_e,Me]=(0,t.useState)(""),[Be,Ue]=(0,t.useState)(""),[He,ze]=(0,t.useState)([]),[Ve,qe]=(0,t.useState)([]),[We,Ye]=(0,t.useState)([]),[Ge,Ke]=(0,t.useState)(null),[Xe,$e]=(0,t.useState)(null),[Qe,Je]=(0,t.useState)(null),[Ze,et]=(0,t.useState)(""),[tt,nt]=(0,t.useState)(""),[rt,at]=(0,t.useState)(""),[st,ot]=(0,t.useState)(""),[it,lt]=(0,t.useState)(""),[ct,dt]=(0,t.useState)({listingAmount:"0.00",sellingAmount:"0.00",listingTax:"0.00",sellingTax:"0.00"});(0,t.useEffect)((()=>{(()=>{const e=parseFloat(Ee.sellPrice)||0,t=parseFloat(_e)||0,n=parseFloat(Be)||0,r=(e*t/100).toFixed(2),a=(e*n/100).toFixed(2),s=(.13*parseFloat(r)).toFixed(2),o=(.13*parseFloat(a)).toFixed(2);dt({listingAmount:r,sellingAmount:a,listingTax:s,sellingTax:o})})()}),[Ee.sellPrice,_e,Be]);const[ut,mt]=(0,t.useState)({agentId:"",agentName:"",classification:"",ytdCommission:"Yes",awardAmount:"",percentage:100,amount:"",feeInfo:"plan500",feesDeducted:"",tax:"",total:"",totalFees:"",netCommission:"",lead:""}),[ht,pt]=(0,t.useState)([]),[xt,ft]=(0,t.useState)(null),[gt,bt]=(0,t.useState)(!1),[yt,vt]=(0,t.useState)(null),[Nt,jt]=(0,t.useState)(!1),[wt,St]=(0,t.useState)("no"),[Ct,kt]=(0,t.useState)(""),[Et,Tt]=(0,t.useState)(null),[At,It]=(0,t.useState)({}),[Dt,Pt]=(0,t.useState)([]),[Ot,Lt]=(0,t.useState)({date:"",amount:"",payer:"",payee:"",notes:""}),[Rt,Ft]=(0,t.useState)(null),[_t,Mt]=(0,t.useState)(!1),[Bt,Ut]=(0,t.useState)(null),[Ht,zt]=(0,t.useState)("lawyer"),[Vt,qt]=(0,t.useState)(""),[Wt,Yt]=(0,t.useState)(null),[Gt,Kt]=(0,t.useState)(3e4),[Xt,$t]=(0,t.useState)({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"LEASE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:""}),[Qt,Jt]=(0,t.useState)({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"PURCHASE AND SALE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:"",totalCommission:"",tradeClassification:""}),[Zt,en]=(0,t.useState)(4e3),[tn,nn]=(0,t.useState)([]),[rn,an]=(0,t.useState)([]),sn=l.map((e=>{var t,n;return{value:e.tradeNumber,label:"#".concat(e.tradeNumber," - ").concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").trim(),trade:e}})),[on,ln]=(0,t.useState)(3e4);(0,t.useEffect)((()=>{const e=localStorage.getItem("nextBrokerageReferenceNumber");e&&ln(parseInt(e,10))}),[]);const cn=v||l.find((e=>e.tradeNumber===Ee.tradeNumber))||{},dn=cn.keyInfo||{},un=cn.outsideBrokers||[],mn=un.length>0?un[0]:{},hn=(cn.commission||{}).outsideBrokersRows||[],pn=hn.length>0?hn[0]:{};(new Date).toLocaleDateString();(0,t.useEffect)((()=>{"brokerage"===Ht&&$t((e=>J(J({},e),{},{re:"lease"===S?"AGREEMENT TO LEASE":"AGREEMENT TO RENT"})))}),[S,Ht]);const xn=e=>{const{name:t,value:n}=e.target;Jt((e=>J(J({},e),{},{[t]:n})))},fn=e=>{qt(e);const t=Zt+1;en(t),Jt({date:(new Date).toISOString().split("T")[0],trade:"",propertyType:"PURCHASE AND SALE",lawyerName:"",address:"",re:"",propertyAddress:"",end:"",commissionPercentage:"",commissionAmount:"",sellPrice:"",leasePrice:"",deposit:"",hstAmount:"",balanceToVendor:"",closingDate:"",referenceNumber:t.toString(),totalCommission:"",tradeClassification:""})};(0,t.useEffect)((()=>{const e=localStorage.getItem("nextReferenceNumber");e&&en(parseInt(e,10))}),[]);const gn=()=>{const e=parseFloat(Qt.deposit)||0;return((parseFloat(Qt.totalCommission)||0)-e).toFixed(2)},bn=()=>parseFloat(gn())>0?"Balance to Brokerage":"Balance to Vendor",[yn,vn]=(0,t.useState)("");(0,t.useEffect)((()=>{const e=Dt.reduce(((e,t)=>e+(parseFloat(t.amount)||0)),0);if("LISTING SIDE"===Ee.classification){if(Dt.some((e=>"Yes"===e.weHold))){const t=e-parseFloat(it||0);Fe(t.toFixed(2))}else Fe(it)}else"CO-OPERATING SIDE"===Ee.classification&&Fe(it)}),[Ee.classification,it,yn,Dt]);const Nn="LEASE"===(dn.dealType||"").toUpperCase()?"LEASE":"SALE",jn=dn.classification||"";let wn="";return"SALE"===Nn&&("LISTING SIDE"===jn?wn=dn.listingCommission||"":"SELLING SIDE"===jn&&(wn=dn.sellingCommission||"")),(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b",children:(0,gp.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("list"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("list"),children:"List"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("key-info"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("key-info"),children:"Key Info"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("people"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("people"),children:"People"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("outside-brokers"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("outside-brokers"),children:"Outside Brokers"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("trust"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("trust"),children:"Trust"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("commission"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("commission"),children:"Commission"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("agent-info"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("agent-info"),children:"Agent Info"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("invoice"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("invoice"),children:"Invoice"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat("finalize-trade"===o?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>i("finalize-trade"),children:"Finalize Trade"})]})})}),(0,gp.jsxs)("div",{className:"max-w-screen-2xl mx-auto py-6 px-4",children:["list"===o&&(0,gp.jsx)(P,{}),"key-info"===o&&(0,gp.jsx)(fE,{keyInfoData:Ee,handleKeyInfoChange:e=>{const{name:t,value:n}=e.target;console.log("handleKeyInfoChange called with:",{name:t,value:n}),console.log("Current keyInfoData before update:",Ee),Te((e=>{const r=J(J({},e),{},{[t]:n});return console.log("Updated keyInfoData:",r),r}))},goToNextSection:Ae,lookupSuccess:le,lookupError:oe,isLoading:ae,isLoadingTradeNumber:Se,nextTradeNumber:je,listings:m,setKeyInfoData:Te,onListingSelected:e=>{e&&(console.log("handleListingSelected called with:",e),console.log("selectedListing.agent:",e.agent),console.log("selectedListing.agents:",e.agents),console.log("selectedListing keys:",Object.keys(e)),x(e),e.people&&Array.isArray(e.people)&&L(e.people.map((e=>J(J({},e),{},{type:"Lease"===Ee.dealType?"Landlord":"Seller"})))))},trades:l,currentTradeNumber:je}),"people"===o&&(0,gp.jsx)(bE,{people:O,person:R,setPerson:F,setPeople:L,selectedPersonType:_,setSelectedPersonType:M,editingPersonIndex:B,setEditingPersonIndex:U,showDeletePersonConfirm:H,setShowDeletePersonConfirm:z,personToDelete:V,setPersonToDelete:q,handlePersonInputChange:e=>{const{name:t,value:n}=e.target;F((e=>J(J({},e),{},{[t]:n}))),console.log("Field ".concat(t," updated to: ").concat(n))},handlePersonTypeSelect:e=>{M(e),F((t=>J(J({},t),{},{type:e})))},handlePersonSubmit:e=>{if(e.preventDefault(),null!==B){const e=[...O];e[B]=J(J({},R),{},{companyName:R.companyName||""}),L(e),U(null)}else L([...O,J(J({},R),{},{companyName:R.companyName||""})]);F({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"Listing End",companyName:""}),M("")},handlePersonEdit:e=>{const t=O[e];F(t),M(t.type),U(e)},handlePersonDelete:e=>{q(e),z(!0)},confirmDeletePerson:()=>{null!==V&&(L(O.filter(((e,t)=>t!==V))),z(!1),q(null))},cancelDeletePerson:()=>{z(!1),q(null)},goToNextSection:Ae,goToPreviousSection:Ie,listingNumber:Ee.listingNumber,dealType:Ee.dealType,weManage:Ee.weManage}),"outside-brokers"===o&&(0,gp.jsx)(yE,{outsideBrokers:W,setOutsideBrokers:Y,broker:G,setBroker:K,selectedBrokerType:X,setSelectedBrokerType:$,editingBrokerIndex:Q,setEditingBrokerIndex:Z,showDeleteBrokerConfirm:ee,setShowDeleteBrokerConfirm:te,brokerToDelete:ne,setBrokerToDelete:re,handleBrokerInputChange:e=>{const{name:t,value:n}=e.target;K((e=>J(J({},e),{},{[t]:n})))},handleBrokerTypeSelect:e=>{$(e),K((t=>J(J({},t),{},{type:e})))},handleBrokerSubmit:e=>{e.preventDefault();const t=parseFloat(G.sellingAmount)||0,n=(.13*t).toFixed(2),r=(t+parseFloat(n)).toFixed(2),a=J(J({},G),{},{tax:n,total:r});if(null!==Q){const e=[...W];e[Q]=a,Y(e),Z(null)}else Y([...W,a]);K({type:"",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:"",sellingAmount:""}),$("")},handleBrokerEdit:e=>{const t=W[e];K(t),$(t.type),Z(e)},handleBrokerDelete:e=>{re(e),te(!0)},confirmDeleteBroker:async()=>{if(null!==ne){const t=W[ne];try{t._id&&await Oj.delete("/outside-brokers/".concat(t._id)),Y(W.filter(((e,t)=>t!==ne))),te(!1),re(null),$p.success("Broker deleted successfully")}catch(e){console.error("Error deleting broker:",e),$p.error("Failed to delete broker")}}},cancelDeleteBroker:()=>{te(!1),re(null)},goToNextSection:Ae,goToPreviousSection:Ie,listingNumber:Ee.listingNumber,weManage:Ee.weManage,dealType:Ee.dealType}),"trust"===o&&(0,gp.jsx)(NE,{trustRecords:Dt,setTrustRecords:Pt,trust:Ot,setTrust:Lt,editingTrustIndex:Rt,setEditingTrustIndex:Ft,showDeleteTrustConfirm:_t,setShowDeleteTrustConfirm:Mt,trustToDelete:Bt,setTrustToDelete:Ut,handleTrustInputChange:e=>{const{name:t,value:n}=e.target;Lt((e=>J(J({},e),{},{[t]:n})))},handleTrustSubmit:e=>{if(e.preventDefault(),null!==Rt){const e=[...Dt];e[Rt]=Ot,Pt(e),Ft(null)}else Pt([...Dt,Ot]);Lt({date:"",amount:"",payer:"",payee:"",notes:""})},handleTrustEdit:e=>{Lt(Dt[e]),Ft(e)},handleTrustDelete:e=>{Ut(e),Mt(!0)},confirmDeleteTrust:()=>{if(null!==Bt){const e=Dt.filter(((e,t)=>t!==Bt));Pt(e),Mt(!1),Ut(null)}},cancelDeleteTrust:()=>{Mt(!1),Ut(null)},goToNextSection:Ae,goToPreviousSection:Ie,tradeNumber:Ee.tradeNumber||je,userName:(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.email)||""}),"commission"===o&&(0,gp.jsx)(xE,{sellPrice:Ee.sellPrice,closingDate:De,status:Oe,ar:Re,onClosingDateChange:e=>Pe(e.target.value),onStatusChange:e=>Le(e.target.value),onARChange:e=>Fe(e.target.value),listingCommission:_e,sellingCommission:Be,onListingCommissionChange:e=>Me(e.target.value),onSellingCommissionChange:e=>Ue(e.target.value),goToNextSection:Ae,goToPreviousSection:Ie,tradeNumber:je,saleClosingRows:He,commissionIncomeRows:Ve,outsideBrokersRows:We,editingSaleClosingIdx:Ge,editingCommissionIncomeIdx:Xe,editingOutsideBrokerIdx:Qe,brokerAgentName:Ze,brokerBrokerage:tt,brokerSellingAmount:rt,brokerEnd:st,onBrokerAgentNameChange:e=>et(e.target.value),onBrokerBrokerageChange:e=>nt(e.target.value),onBrokerSellingAmountChange:e=>at(e.target.value),onBrokerEndChange:e=>ot(e.target.value),onAddCommissionInfo:e=>{let{type:t,data:n}=e;switch(t){case"saleClosing":if(null!==Ge){const e=[...He];e[Ge]=n,ze(e),Ke(null)}else ze([...He,n]);break;case"commissionIncome":if(null!==Xe){const e=[...Ve];e[Xe]=n,qe(e),$e(null)}else qe([...Ve,n]);break;case"outsideBroker":if(null!==Qe){const e=[...We];e[Qe]=n,Ye(e),Je(null)}else Ye([...We,n]);et(""),nt(""),at(""),ot("")}},onEditSaleClosing:()=>{if(He.length>0){const e=He[0];Ke(0),Te((t=>J(J({},t),{},{sellPrice:e.sellPrice}))),Pe(e.closingDate),Le(e.status),Fe(e.ar)}},onDeleteSaleClosing:()=>{ze([]),Ke(null)},onEditCommissionIncome:()=>{if(Ve.length>0){const e=Ve[0];$e(0);const t=(100*parseFloat(e.listingAmount)/parseFloat(Ee.sellPrice)).toFixed(2),n=(100*parseFloat(e.sellingAmount)/parseFloat(Ee.sellPrice)).toFixed(2);Me(t),Ue(n)}},onDeleteCommissionIncome:()=>{qe([]),$e(null)},onEditOutsideBroker:()=>{if(We.length>0){const e=We[0];Je(0),et(e.agentName),nt(e.brokerage),at(e.sellingAmount),ot(e.end||"")}},onDeleteOutsideBroker:()=>{Ye([]),Je(null),et(""),nt(""),at(""),ot("")},outsideBrokers:W,onCommissionTotalChange:lt,onBrokerTotalChange:vn}),"agent-info"===o&&(0,gp.jsx)(PE,{goToNextSection:Ae,goToPreviousSection:Ie,agent:ut,setAgent:mt,agents:ht,setAgents:pt,editingIndex:xt,setEditingIndex:ft,showDeleteModal:gt,setShowDeleteModal:bt,deletingIndex:yt,setDeletingIndex:vt,showBuyerRebateModal:Nt,setShowBuyerRebateModal:jt,buyerRebateIncluded:wt,setBuyerRebateIncluded:St,buyerRebateAmount:Ct,setBuyerRebateAmount:kt,pendingAgent:Et,setPendingAgent:Tt,validationErrors:At,setValidationErrors:It,onSaveTrade:async()=>{if(!me&&!pe)try{he(!0);const e={tradeNumber:je.toString(),keyInfo:J(J({},Ee),{},{tradeNumber:je.toString()}),people:O,outsideBrokers:W,trustRecords:Dt,commission:{saleClosingRows:He,commissionIncomeRows:Ve,outsideBrokersRows:We},agentCommissionList:ht,conditions:Ee.conditions||[]};console.log("Frontend - Trade data to send:",JSON.stringify(e,null,2)),console.log("Frontend - Conditions data:",Ee.conditions);await Oj.post("/trades/full",e);$p.success("Trade saved successfully!"),xe(!0),await ke()}catch(n){var e,t;$p.error("Error saving trade: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{he(!1)}},commissionTotal:it,classification:Ee.classification,commissionData:ct,selectedListing:p,isEditingExistingTrade:!1}),"invoice"===o&&(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-3xl mx-auto mt-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Invoice"}),(0,gp.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-md font-medium mb-2",children:"Select Invoice Type:"}),(0,gp.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,gp.jsxs)("label",{className:"inline-flex items-center",children:[(0,gp.jsx)("input",{type:"radio",name:"invoiceType",value:"lawyer",checked:"lawyer"===Ht,onChange:e=>zt("lawyer"),className:"form-radio text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Invoice Lawyer"})]}),(0,gp.jsxs)("label",{className:"inline-flex items-center",children:[(0,gp.jsx)("input",{type:"radio",name:"invoiceType",value:"brokerage",checked:"brokerage"===Ht,onChange:e=>zt("brokerage"),className:"form-radio text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Listing Brokerage"})]})]})]}),"brokerage"===Ht&&(0,gp.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Select Trade"}),(0,gp.jsx)(pE,{options:sn,onChange:e=>{if(!e)return N(null),$t((e=>J(J({},e),{},{re:"",commissionType:"half month",commissionPercentage:"",referenceNumber:on.toString()}))),void ln((e=>{const t=e+1;return localStorage.setItem("nextBrokerageReferenceNumber",t),t}));N(e.trade),$t((e=>J(J({},e),{},{re:"",commissionType:"half month",commissionPercentage:"",referenceNumber:on.toString()}))),ln((e=>{const t=e+1;return localStorage.setItem("nextBrokerageReferenceNumber",t),t}))},value:cn?sn.find((e=>e.value===cn.tradeNumber)):null,placeholder:"Type or select trade number/address...",isClearable:!0,className:"w-full"})]}),(0,gp.jsx)("div",{className:"mb-4",children:(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"})}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,gp.jsx)("input",{type:"date",name:"date",value:Xt.date,onChange:e=>{const{name:t,value:n}=e.target;$t((e=>J(J({},e),{},{[t]:n})))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Trade #"}),(0,gp.jsx)("input",{type:"text",value:cn.tradeNumber||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Brokerage Name"}),(0,gp.jsx)("input",{type:"text",value:mn.company||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,gp.jsx)("input",{type:"text",value:mn.address||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Re"}),(0,gp.jsx)("input",{type:"text",value:"SALE"===Nn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Property Address"}),(0,gp.jsx)("input",{type:"text",value:"".concat(dn.streetNumber||""," ").concat(dn.streetName||"").trim(),readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To our commission"}),(0,gp.jsx)("input",{type:"text",value:"SALE"===Nn?"Commission Percentage":"Half Month",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Co-operating Commission"}),(0,gp.jsx)("input",{type:"text",value:"SALE"===Nn&&dn.sellCommission||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),"LEASE"===Nn&&(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Lease Amount"}),(0,gp.jsx)("input",{type:"text",value:dn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),"RENT"===Nn&&(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Sell Price"}),(0,gp.jsx)("input",{type:"text",value:dn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"MLS Fees"}),(0,gp.jsx)("input",{type:"text",value:pn.sellingAmount||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Total"}),(0,gp.jsx)("input",{type:"text",value:pn.total||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Closing Date"}),(0,gp.jsx)("input",{type:"text",value:dn.closeDate||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Reference Number"}),(0,gp.jsx)("input",{type:"text",value:Xt.referenceNumber,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Sale Price"}),(0,gp.jsx)("input",{type:"text",value:dn.sellPrice||"",readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Property Type"}),(0,gp.jsx)("input",{type:"text",value:Nn,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Classification"}),(0,gp.jsx)("input",{type:"text",value:jn,readOnly:!0,className:"w-full rounded border-gray-300 bg-gray-100"})]})]}),(0,gp.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,gp.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e={date:Xt.date,brokerageName:mn.company||"",brokerageAddress:mn.address||"",re:"SALE"===Nn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",tradeNumber:cn.tradeNumber||"",propertyAddress:"".concat(dn.streetNumber||""," ").concat(dn.streetName||"").trim(),commissionType:"SALE"===Nn?"commission percentage":"half month",commissionPercentage:Xt.commissionPercentage,leaseAmount:dn.sellPrice||"",sellPrice:dn.sellPrice||"",mlsFees:pn.sellingAmount||"",hst:pn.tax||"",total:pn.total||"",closingDate:dn.closeDate||"",referenceNumber:cn.tradeNumber||""};let t="";"half month"===e.commissionType?t="half month":"commission percentage"===e.commissionType&&(t="".concat(dn.sellCommission||"","%"));let r="";"SALE"===Nn?r="AT A SALE PRICE OF $".concat(Number(dn.sellPrice||0).toLocaleString()):"LEASE"===Nn&&(r="AT A RENT AMOUNT OF $".concat(Number(dn.sellPrice||0).toLocaleString()));const a=window.open("","_blank","width=800,height=900");a.document.write('\n      <html><head><title>Invoice</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        .header { text-align: center; }\n        .header img { width: 120px; margin-bottom: 10px; }\n        .bank-details { margin-top: 24px; }\n        .bank-details b { display: inline-block; min-width: 120px; }\n        .amount-table { margin-top: 24px; margin-bottom: 24px; }\n        .amount-table td { padding: 2px 8px; }\n        .amount-table .desc { min-width: 220px; }\n        .amount-table .right { text-align: right; min-width: 100px; }\n        .amount-table .bold { font-weight: bold; }\n        .amount-table .balance { font-weight: bold; }\n        .footer { margin-top: 32px; }\n      </style>\n      </head><body>\n        <div class="header">\n          <img src="'.concat(window.location.origin+n(296),'" alt="Bestway Real Estate Ltd. Logo" />\n                  <div style="font-size: 20px; font-weight: bold; margin-top: 8px;">Bestway Real Estate Ltd., Brokerage</div>\n        <div>500 St.George Street<br/>Moncton, NB  E1C 1Y3</div>\n        <div>Phone: 506-268-2900 &nbsp; Fax: 506-268-2910</div>\n        </div>\n        <br/>\n        <div>').concat(e.date,'</div>\n        <br/>\n        <div style="font-weight: bold;">').concat(e.brokerageName,"</div>\n        <div>").concat(e.brokerageAddress,"</div>\n        <br/>\n        <div><b>Re:</b> ").concat(e.re,"</div>\n        <div>").concat(e.tradeNumber?"Trade #".concat(e.tradeNumber,", "):"").concat(e.propertyAddress,"</div>\n        <br/>\n        <div>To our commission of <b>").concat(t,"</b></div>\n        <div>").concat(r,'</div>\n        <br/>\n        <table class="amount-table">\n          <tr>\n            <td class="desc">Less share of MLS fees</td>\n            <td class="right">$').concat(Number(e.mlsFees).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n          </tr>\n                      <tr>\n              <td class="desc">HST # 804667350RT</td>\n              <td class="right">$').concat(Number(e.hst).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n          <tr class="balance">\n            <td class="desc">Balance Due on Closing</td>\n            <td class="right">$').concat(Number(e.total).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n          </tr>\n        </table>\n        <div>Closing Scheduled for ").concat(e.closingDate,".</div>\n        <div>Our reference number is ").concat(e.referenceNumber,'.</div>\n        <br/>\n        <div style="font-weight: bold;">Please make cheque payable to Bestway Real Estate Ltd., Brokerage or adding by EFT using the Bank Details below:</div>\n        <div class="bank-details">\n          <b>Bank:</b> TD Canada Trust<br/>\n          <b>Institution:</b> 004<br/>\n          <b>Transit:</b> 12892<br/>\n          <b>Account:</b> 521-9966<br/>\n        </div>\n        <div class="footer">\n          Please feel free to contact our Deals department should you require more information/clarification. 506-268-2900. Or E-mail adminnb@bestwayrealtyinc.com.<br/><br/>\n          Sincerely,<br/>\n          Daphney Roy<br/>\n          Administrator\n        </div>\n      </body></html>\n    ')),a.document.close(),a.print(),Kt((e=>e+1))})()},className:"bg-blue-900 text-white px-6 py-2 rounded font-semibold hover:bg-blue-800 transition-colors",children:"Print Invoice"}),(0,gp.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(async()=>{const e=mn.email;if(e)try{const t={date:Xt.date,brokerageName:mn.company||"",brokerageAddress:mn.address||"",re:"SALE"===Nn?"AGREEMENT OF PURCHASE AND SALE":"AGREEMENT OF LEASE",tradeNumber:cn.tradeNumber||"",propertyAddress:"".concat(dn.streetNumber||""," ").concat(dn.streetName||"").trim(),commissionDesc:"SALE"===Nn?"".concat(dn.sellCommission||"","%"):"half month",atAmountDesc:"SALE"===Nn?"AT A SALE PRICE OF $".concat(Number(dn.sellPrice||0).toLocaleString()):"AT A RENT AMOUNT OF $".concat(Number(dn.sellPrice||0).toLocaleString()),mlsFees:pn.sellingAmount||"",hst:pn.tax||"",total:pn.total||"",closingDate:dn.closeDate||"",referenceNumber:cn.tradeNumber||""};$p.info("Generating and sending PDF invoice..."),await Oj.post("/email/send-invoice-pdf",{recipientEmail:e,invoiceData:t,invoiceType:"brokerage"}),$p.success("Invoice PDF sent successfully to ".concat(e)),Kt((e=>e+1))}catch(r){var t,n;console.error("Error sending invoice PDF:",r),$p.error("Failed to send invoice PDF: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||r.message))}else $p.error("No email address found for this broker")})()},className:"bg-green-600 text-white px-6 py-2 rounded font-semibold hover:bg-green-700 transition-colors flex items-center gap-2",disabled:!mn.email,children:[(0,gp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,gp.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,gp.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Email PDF"]})]})]}),"lawyer"===Ht&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Lawyer Type:"}),(0,gp.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",name:"lawyerType",value:"seller",checked:"seller"===Vt,onChange:e=>fn(e.target.value),className:"mr-2"}),"Seller Lawyer"]}),(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",name:"lawyerType",value:"buyer",checked:"buyer"===Vt,onChange:e=>fn(e.target.value),className:"mr-2"}),"Buyer Lawyer"]})]}),Vt&&(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,gp.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Lawyer Invoice Form"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)(pE,{value:Wt?{value:Wt.tradeNumber,label:"".concat(Wt.tradeNumber," - ").concat((null===(r=Wt.keyInfo)||void 0===r?void 0:r.streetNumber)||""," ").concat((null===(a=Wt.keyInfo)||void 0===a?void 0:a.streetName)||"").trim()||"No Address"}:null,onChange:e=>{if(!e)return Yt(null),Jt((e=>J(J({},e),{},{trade:"",propertyAddress:"",sellPrice:"",leasePrice:"",deposit:"",closingDate:"",listingCommissionPercent:"",sellingCommissionPercent:"",listingCommissionAmount:"",sellingCommissionAmount:"",listingHSTAmount:"",sellingHSTAmount:"",balanceToVendor:"",totalCommission:it,referenceNumber:Zt.toString(),tradeClassification:"",lawyerName:"",address:"",propertyType:"PURCHASE AND SALE"}))),void en((e=>{const t=e+1;return localStorage.setItem("nextReferenceNumber",t),t}));const t=l.find((t=>t.tradeNumber===e.value));if(Yt(t),t){var n,r;const e=t.keyInfo||{},a=t.trustRecords||[],s=(t.commission||{}).commissionIncomeRows||[],o=s.reduce(((e,t)=>e+(parseFloat(t.total)||0)),0).toFixed(2),i=t.people||[],l=a.length>0?a[0].amount:"";let c="",d="";if("seller"===Vt){const e=i.find((e=>"Seller Lawyer"===e.type));c=e?"".concat(e.firstName," ").concat(e.lastName):"",d=(null===e||void 0===e?void 0:e.address)||""}else if("buyer"===Vt){const e=i.find((e=>"Buyer Lawyer"===e.type));c=e?"".concat(e.firstName," ").concat(e.lastName):"",d=(null===e||void 0===e?void 0:e.address)||""}const u=e.classification||"";let m=s.find((e=>"Listing Side"===e.end)),h=s.find((e=>"Selling Side"===e.end));!m&&s.length>0&&(m=s[0]),!h&&s.length>0&&(h=s[0]);const p=parseFloat(e.leasePrice||e.sellPrice||0),x=parseFloat((null===(n=m)||void 0===n?void 0:n.listingAmount)||0),f=parseFloat((null===(r=h)||void 0===r?void 0:r.sellingAmount)||0),g=p?(x/p*100).toFixed(2):"",b=p?(f/p*100).toFixed(2):"";Jt((n=>{var r,a,s,i;return J(J({},n),{},{trade:t.tradeNumber,propertyAddress:"".concat(e.streetNumber||""," ").concat(e.streetName||"").trim(),sellPrice:e.sellPrice||e.leasePrice||"",leasePrice:e.leasePrice||e.sellPrice||"",deposit:l,closingDate:e.closeDate||"",lawyerName:c,address:d,re:"AGREEMENT OF PURCHASE AND SALE",listingCommissionPercent:g,sellingCommissionPercent:b,listingCommissionAmount:(null===(r=m)||void 0===r?void 0:r.listingAmount)||"",sellingCommissionAmount:(null===(a=h)||void 0===a?void 0:a.sellingAmount)||"",listingHSTAmount:(null===(s=m)||void 0===s?void 0:s.listingTax)||"",sellingHSTAmount:(null===(i=h)||void 0===i?void 0:i.sellingTax)||"",totalCommission:o,referenceNumber:Zt.toString(),tradeClassification:u,propertyType:"PURCHASE AND SALE"})})),en((e=>{const t=e+1;return localStorage.setItem("nextReferenceNumber",t),t}))}},options:l.map((e=>{var t,n;return{value:e.tradeNumber,label:"".concat(e.tradeNumber," - ").concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").trim()||"No Address"}})),isClearable:!0,placeholder:"Search and select trade...",className:"w-full"})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,gp.jsx)("input",{type:"text",name:"propertyType",value:"PURCHASE AND SALE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,gp.jsx)("input",{type:"date",name:"date",value:Qt.date,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade"}),(0,gp.jsx)("input",{type:"text",value:Qt.trade,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),(0,gp.jsx)("input",{type:"text",name:"referenceNumber",value:Qt.referenceNumber,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lawyer Name"}),(0,gp.jsx)("input",{type:"text",name:"lawyerName",value:Qt.lawyerName,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:Qt.address,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Re"}),(0,gp.jsx)("input",{type:"text",value:"LEASE"===Qt.propertyType?"AGREEMENT OF LEASE":"AGREEMENT OF PURCHASE AND SALE",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Address"}),(0,gp.jsx)("input",{type:"text",name:"propertyAddress",value:Qt.propertyAddress,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LEASE"===Qt.propertyType?"Lease Price":"Sell Price"}),(0,gp.jsx)("input",{type:"text",name:"LEASE"===Qt.propertyType?"leasePrice":"sellPrice",value:"LEASE"===Qt.propertyType?Qt.leasePrice:Qt.sellPrice,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit"}),(0,gp.jsx)("input",{type:"text",name:"deposit",value:Qt.deposit,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(()=>{const e=parseFloat(Qt.deposit)||0,t=Qt.tradeClassification||"";let n=0,r=0;return"LISTING SIDE"===t?(n=parseFloat(Qt.listingCommissionAmount)||0,r=parseFloat(Qt.listingHSTAmount)||0):"SELLING SIDE"===t?(n=parseFloat(Qt.sellingCommissionAmount)||0,r=parseFloat(Qt.sellingHSTAmount)||0):(n=parseFloat(Qt.totalCommission)||0,r=(parseFloat(Qt.listingHSTAmount)||0)+(parseFloat(Qt.sellingHSTAmount)||0)),n+r>e?"Balance to Brokerage":"Balance to Vendor"})()}),(0,gp.jsx)("input",{type:"text",name:"balanceToVendor",value:gn(),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Closing Date"}),(0,gp.jsx)("input",{type:"text",name:"closingDate",value:Qt.closingDate,onChange:xn,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Commission"}),(0,gp.jsx)("input",{type:"text",name:"totalCommission",value:Qt.totalCommission,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side Commission (%)"}),(0,gp.jsx)("input",{type:"text",name:"listingCommissionPercent",value:Qt.listingCommissionPercent||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side Commission (%)"}),(0,gp.jsx)("input",{type:"text",name:"sellingCommissionPercent",value:Qt.sellingCommissionPercent||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side Commission Amount"}),(0,gp.jsx)("input",{type:"text",name:"listingCommissionAmount",value:Qt.listingCommissionAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side Commission Amount"}),(0,gp.jsx)("input",{type:"text",name:"sellingCommissionAmount",value:Qt.sellingCommissionAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Listing Side HST Amount"}),(0,gp.jsx)("input",{type:"text",name:"listingHSTAmount",value:Qt.listingHSTAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Side HST Amount"}),(0,gp.jsx)("input",{type:"text",name:"sellingHSTAmount",value:Qt.sellingHSTAmount||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Classification"}),(0,gp.jsx)("input",{type:"text",name:"tradeClassification",value:Qt.tradeClassification||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),(0,gp.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,gp.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{const e=window.open("","_blank"),t=gn(),r=bn(),a="LEASE"===Qt.propertyType,s=a?Qt.leasePrice:Qt.sellPrice,o=((parseFloat(Qt.listingCommissionPercent)||0)+(parseFloat(Qt.sellingCommissionPercent)||0)).toFixed(2),i=((parseFloat(Qt.listingCommissionAmount)||0)+(parseFloat(Qt.sellingCommissionAmount)||0)).toFixed(2),l=((parseFloat(Qt.listingHSTAmount)||0)+(parseFloat(Qt.sellingHSTAmount)||0)).toFixed(2),c=Qt.deposit,d=Qt.closingDate,u=Qt.trade,m=Qt.propertyAddress,h=Qt.re,p=Qt.lawyerName,x=Qt.address,f=Qt.date,g="To our commission of ".concat(o,"% + HST");e.document.write('\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Lawyer Invoice</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 40px; }\n          .header { text-align: center; margin-bottom: 30px; }\n          .header img { width: 120px; margin-bottom: 10px; }\n          .company-title { font-size: 20px; font-weight: bold; margin-top: 8px; }\n          .company-address { margin-bottom: 8px; }\n          .section { margin-bottom: 24px; }\n          .label { font-weight: bold; display: inline-block; min-width: 120px; }\n          .value { display: inline-block; }\n          .amount-table { margin-top: 24px; margin-bottom: 24px; }\n          .amount-table td { padding: 2px 8px; }\n          .amount-table .desc { min-width: 220px; }\n          .amount-table .right { text-align: right; min-width: 100px; }\n          .amount-table .bold { font-weight: bold; }\n          .amount-table .balance { font-weight: bold; }\n          .footer { margin-top: 32px; }\n          .bank-details { margin-top: 16px; font-size: 15px; font-weight: 500; }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <img src="'.concat(window.location.origin+n(296),'" alt="Bestway Real Estate Ltd. Logo" />\n                  <div class="company-title">Bestway Real Estate Ltd., Brokerage</div>\n        <div class="company-address">500 St.George Street, Moncton, NB  E1C 1Y3</div>\n          <div>Office: 506-268-2900 | Fax: 506-268-2910</div>\n        </div>\n        <div class="section">\n          <div>').concat(f,"</div>\n          <br/>\n          <div>").concat(p,"</div>\n          <div>").concat(x,"</div>\n          <br/>\n          <div>Re: ").concat(h,"</div>\n          <div>").concat(m,'</div>\n        </div>\n        <div class="section">\n          <div><b>').concat(g,"</b></div>\n          <div>At a ").concat(a?"lease":"sale"," price of <b>$").concat(Number(s).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</b></div>\n          <table class="amount-table">\n            <tr>\n              <td class="desc">Commission payable</td>\n              <td class="right">$').concat(Number(i).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr>\n              <td class="desc">HST # 804667350RT</td>\n              <td class="right">$').concat(Number(l).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr>\n              <td class="desc">Less: Deposit</td>\n              <td class="right">$').concat(Number(c).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),'</td>\n            </tr>\n            <tr class="balance">\n              <td class="desc">').concat(r,'</td>\n              <td class="right">$').concat(Number(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n            </tr>\n          </table>\n          <div>Closing Date: <b>").concat(d,"</b></div>\n          <div>Reference Number: <b>").concat(u,"</b></div>\n          ").concat("Balance to Brokerage"===r?'\n          <div class="bank-details">\n            <br/>\n            <b>Please make cheque payable to Bestway Real Estate Ltd., Brokerage or adding by EFT using the Bank Details below:</b><br/>\n            Bank: TD Canada Trust<br/>\n            Institution: 004<br/>\n            Transit: 12892<br/>\n            Account: 521-9966\n          </div>\n          ':"",'\n        </div>\n        <div class="footer">\n          Please feel free to contact our deals department should you require more information/clarification. 506-268-2900. Or E-mail adminnb@bestwayrealtyinc.com.<br/><br/>\n          Sincerely,<br/>\n          Administrator<br/>\n                  Bestway Real Estate Ltd., Brokerage<br/>\n       500 St.George Street<br/>\n        Moncton, NB E1C 1Y3<br/>\n                  Office:506-268-2900<br/>\n        Fax: 506-268-2910<br/>\n          adminnb@bestwayrealtyinc.com\n        </div>\n      </body>\n      </html>\n    ')),e.document.close(),e.print()})()},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Print Invoice"}),(0,gp.jsxs)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(async()=>{if(console.log("Email PDF button clicked"),!Wt)return void $p.error("Please select a trade first");if(!Vt)return void $p.error("Please select lawyer type (Seller or Buyer)");let e="",t=null;var n,r;if("seller"===Vt)t=null===(n=Wt.people)||void 0===n?void 0:n.find((e=>"Seller Lawyer"===e.type)),e=(null===(r=t)||void 0===r?void 0:r.email)||"";else if("buyer"===Vt){var a,s;t=null===(a=Wt.people)||void 0===a?void 0:a.find((e=>"Buyer Lawyer"===e.type)),e=(null===(s=t)||void 0===s?void 0:s.email)||""}if(console.log("Lawyer type:",Vt),console.log("Lawyer info:",t),console.log("Lawyer email:",e),e)try{"LEASE"===Qt.propertyType?Qt.leasePrice:Qt.sellPrice;const t=((parseFloat(Qt.listingCommissionPercent)||0)+(parseFloat(Qt.sellingCommissionPercent)||0)).toFixed(2),n=((parseFloat(Qt.listingCommissionAmount)||0)+(parseFloat(Qt.sellingCommissionAmount)||0)).toFixed(2),r=((parseFloat(Qt.listingHSTAmount)||0)+(parseFloat(Qt.sellingHSTAmount)||0)).toFixed(2),a=gn(),s=bn(),o={date:Qt.date,lawyerName:Qt.lawyerName,address:Qt.address,re:Qt.re,propertyAddress:Qt.propertyAddress,propertyType:Qt.propertyType,sellPrice:Qt.sellPrice,leasePrice:Qt.leasePrice,commissionDescription:"To our commission of ".concat(t,"% + HST"),totalCommissionAmount:n,hstAmount:r,deposit:Qt.deposit,balanceToVendor:a,balanceLabel:s,closingDate:Qt.closingDate,referenceNumber:Qt.trade,tradeNumber:Wt.tradeNumber||""};console.log("Sending lawyer invoice data:",o),$p.info("Generating and sending lawyer invoice PDF...");const i=await Oj.post("/email/send-invoice-pdf",{recipientEmail:e,invoiceData:o,invoiceType:"lawyer"});console.log("Email response:",i.data),$p.success("Lawyer invoice PDF sent successfully to ".concat(e))}catch(c){var o,i,l;console.error("Error sending lawyer invoice PDF:",c),console.error("Error details:",null===(o=c.response)||void 0===o?void 0:o.data);let e="Failed to send lawyer invoice PDF";null!==(i=c.response)&&void 0!==i&&null!==(l=i.data)&&void 0!==l&&l.message?e+=": "+c.response.data.message:c.message&&(e+=": "+c.message),$p.error(e)}else $p.error("No email address found for ".concat(Vt," lawyer. Please add an email address in the trade's people section."))})()},className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center gap-2",disabled:!Wt||!Vt,children:[(0,gp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,gp.jsx)("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),(0,gp.jsx)("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Email PDF"]})]})]})]})]})]}),"finalize-trade"===o&&(0,gp.jsx)(_E,{trades:l,onTradeFinalized:()=>{(async()=>{try{const e=await Oj.get("/trades");c(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]}),b&&v&&(0,gp.jsx)(LE,{trade:v,onClose:()=>y(!1),onUpdate:e=>{N(e);(async()=>{try{const e=await Oj.get("/trades");c(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]})},BE=e=>{let{onSubmitSuccess:n,listingToEdit:r,onCancel:a}=e;const[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),u=e=>e?new Date(e).toISOString().split("T")[0]:"",m=e=>{if(!e)return null;const[t,n,r]=e.split("-");return new Date(parseInt(t),parseInt(n)-1,parseInt(r))},h={streetNumber:"",streetName:"",unit:"",city:"",province:"",postalCode:"",sellerFirstName:"",sellerLastName:"",sellerPhone:"",listCommission:"",sellCommission:"",propertyType:"",dealType:"",status:"",agentNo:"",agentOffice:"",agentLead:"",listingDate:"",entryDate:"",expiryDate:"",soldDate:"",lastEdit:(new Date).toISOString().split("T")[0],listedPrice:"",soldPrice:"",mlsNumber:"",weManage:"",listingNumber:""},[p,x]=(0,t.useState)(h);(0,t.useEffect)((()=>{var e,t,n,a,s,o,i,c,d,m,p,f,g,y,v,N,j,w,C,k,E,T,A,I,D,P,O;r?(l(!0),x({streetNumber:((null===(e=r.address)||void 0===e?void 0:e.streetNumber)||"").trim(),streetName:((null===(t=r.address)||void 0===t?void 0:t.streetName)||"").trim(),unit:((null===(n=r.address)||void 0===n?void 0:n.unit)||"").trim(),city:((null===(a=r.address)||void 0===a?void 0:a.city)||"").trim(),province:(null===(s=r.address)||void 0===s?void 0:s.province)||"",postalCode:((null===(o=r.address)||void 0===o?void 0:o.postalCode)||"").trim(),sellerFirstName:(null===(i=r.seller)||void 0===i||null===(c=i.name)||void 0===c?void 0:c.split(" ")[0])||"",sellerLastName:(null===(d=r.seller)||void 0===d||null===(m=d.name)||void 0===m?void 0:m.split(" ").slice(1).join(" "))||"",sellerPhone:((null===(p=r.seller)||void 0===p?void 0:p.phoneNumber)||"").trim(),listCommission:(null===(f=r.commission)||void 0===f||null===(g=f.list)||void 0===g?void 0:g.toString())||"",sellCommission:(null===(y=r.commission)||void 0===y||null===(v=y.sell)||void 0===v?void 0:v.toString())||"",propertyType:r.propertyType||"",status:r.status||"",agentNo:((null===(N=r.agent)||void 0===N?void 0:N.employeeNo)||"").trim(),agentOffice:((null===(j=r.agent)||void 0===j?void 0:j.officeNumber)||"").trim(),agentLead:null!==(w=r.agent)&&void 0!==w&&w.isLead?"Yes":"No",listingDate:u(null===(C=r.dates)||void 0===C?void 0:C.listing),entryDate:u(null===(k=r.dates)||void 0===k?void 0:k.entry),expiryDate:u(null===(E=r.dates)||void 0===E?void 0:E.expiry),soldDate:u(null===(T=r.dates)||void 0===T?void 0:T.sold),lastEdit:u(null===(A=r.dates)||void 0===A?void 0:A.lastEdit),listedPrice:(null===(I=r.prices)||void 0===I||null===(D=I.listed)||void 0===D?void 0:D.toString())||"",soldPrice:(null===(P=r.prices)||void 0===P||null===(O=P.sold)||void 0===O?void 0:O.toString())||"",mlsNumber:(r.mlsNumber||"").trim(),weManage:r.weManage?"Yes":"No",listingNumber:r.listingNumber||"",dealType:r.dealType||""}),r.people&&r.people.length>0&&b(r.people),r.agents&&r.agents.length>0&&S(r.agents)):(l(!1),x(h),b([]),S([]))}),[r]);const f=e=>{const{name:t,value:n,type:r,checked:a}=e.target;let s="checkbox"===r?a:n;"string"===typeof s&&"weManage"!==t&&"agentLead"!==t&&"propertyType"!==t&&"status"!==t&&"province"!==t&&"sellerFirstName"!==t&&"streetName"!==t&&(s=s.trim()),x((e=>{const n=J(J({},e),{},{[t]:s,lastEdit:(new Date).toISOString().split("T")[0]});if("sellerFirstName"===t||"sellerLastName"===t||"sellerPhone"===t){const n="sellerFirstName"===t?s:e.sellerFirstName,r="sellerLastName"===t?s:e.sellerLastName,a="sellerPhone"===t?s:e.sellerPhone,o=g.filter((e=>"Seller"!==e.type));if(b(o),n&&n.trim()&&r&&r.trim()){const e={type:"Seller",firstName:n.trim(),lastName:r.trim(),phone:a||"",address:"",end:"Listing End",email:"",primaryPhone:"",cellPhone:a||"",companyName:""};b((t=>[...t,e]))}}return n})),"status"===t&&"Available"===n&&x((e=>J(J({},e),{},{soldDate:"",soldPrice:"",[t]:n})))},[g,b]=(0,t.useState)([]),[y,v]=(0,t.useState)({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:""}),[N,j]=(0,t.useState)(null),[w,S]=(0,t.useState)([]),[C,k]=(0,t.useState)([]),[E,T]=(0,t.useState)({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),[A,I]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{const e=await Oj.get("/agents");console.log("Fetched agents:",e.data),k(e.data)}catch(e){console.error("Error fetching agents:",e)}})()}),[]);const D=e=>{const{name:t,value:n}=e.target;v(J(J({},y),{},{[t]:n}))},P=e=>{const{name:t,value:n}=e.target;T(J(J({},E),{},{[t]:n}))},O=e=>{const t=e.target.value;if(d(t),!t)return void T((e=>J(J({},e),{},{agentNo:"",firstName:"",lastName:"",officeNo:""})));const n=C.find((e=>e._id===t));n&&T((e=>{var t;return J(J({},e),{},{agentNo:(null===(t=n.employeeNo)||void 0===t?void 0:t.toString())||"",firstName:n.firstName||"",lastName:n.lastName||"",officeNo:n.officeNo||""})}))};return(0,t.useEffect)((()=>{(async()=>{try{console.log("Checking server health...");const e=await Oj.get("/health");return console.log("Server health:",e.data),"connected"!==e.data.mongo.status&&(console.error("MongoDB is not connected! Status:",e.data.mongo.status),$p("Warning: MongoDB is not connected. Status: ".concat(e.data.mongo.status))),e.data}catch(e){return console.error("Server health check failed:",e),$p("Server health check failed. The server might be down."),null}})(),(async()=>{try{console.log("Testing API endpoint...");const e=await Oj.get("/complete-listings/test");return console.log("API test endpoint response:",e.data),!0}catch(e){return console.error("API test endpoint failed:",e),!1}})()}),[]),(0,t.useEffect)((()=>{r&&0===g.length&&p.sellerFirstName&&p.sellerLastName&&b([{firstName:p.sellerFirstName,lastName:p.sellerLastName,address:p.city?"".concat(p.city,", ").concat(p.province):"",phone:p.sellerPhone||""}])}),[r,g.length,p.sellerFirstName,p.sellerLastName,p.city,p.province,p.sellerPhone]),(0,t.useEffect)((()=>{if(r&&0===w.length&&p.agentNo&&p.agentNo.trim()&&""!==p.agentNo&&void 0!==p.agentNo&&null!==p.agentNo&&"Auto-generated after save"!==p.agentNo){let e="",t="";if(c){const n=C.find((e=>e._id===c));n&&(e=n.firstName||"",t=n.lastName||"")}S([{agentNo:p.agentNo,firstName:e,lastName:t,officeNo:p.agentOffice||"",lead:p.agentLead||"",sendPage:"",expense:"",amount:"",cooperation:E.cooperation||p.cooperation||""}])}}),[r,w.length,p.agentNo,p.agentOffice,p.agentLead,E.cooperation,p.cooperation,c,C]),(0,gp.jsxs)("div",{className:"space-y-8",children:[(0,gp.jsxs)("form",{id:"listingForm",onSubmit:async e=>{if(e.preventDefault(),p.streetNumber&&p.streetName?p.city?p.sellerFirstName&&p.sellerLastName?p.status?p.propertyType?p.listedPrice?"Sold"!==p.status||p.soldDate&&p.soldPrice?p.dealType||($p.error("Deal type is required"),0):($p.error("Sold date and sold price are required when status is Sold"),0):($p.error("Listed price is required"),0):($p.error("Property type is required"),0):($p.error("Status is required"),0):($p.error("Seller first name and last name are required"),0):($p.error("City is required"),0):($p.error("Street number and street name are required"),0))try{console.log("Submitting form...");const e={address:{streetNumber:p.streetNumber||"",streetName:p.streetName||"",unit:p.unit||"",city:p.city||"",province:p.province||"",postalCode:p.postalCode||""},seller:{name:"".concat(p.sellerFirstName||""," ").concat(p.sellerLastName||"").trim(),phoneNumber:p.sellerPhone||""},commission:{list:parseFloat(p.listCommission)||0,sell:parseFloat(p.sellCommission)||0},propertyType:p.propertyType||"",dealType:p.dealType||"",status:p.status||"Available",agent:{employeeNo:p.agentNo||"",officeNumber:p.agentOffice||"",isLead:"Yes"===p.agentLead},mlsNumber:p.mlsNumber||"",dates:{listing:p.listingDate?m(p.listingDate):null,entry:p.entryDate?m(p.entryDate):null,expiry:p.expiryDate?m(p.expiryDate):null,sold:p.soldDate?m(p.soldDate):null,lastEdit:new Date},weManage:"Yes"===p.weManage,prices:{listed:parseFloat(p.listedPrice)||0,sold:p.soldPrice?parseFloat(p.soldPrice):null},people:g,agents:w};let t;console.log("Data being sent:",e),t=i&&null!==r&&void 0!==r&&r._id?await Oj.put("/listings/".concat(r._id),e):await Oj.post("/listings",e),console.log("Response:",t.data),$p.success("Listing ".concat(i?"updated":"created"," successfully!")),n&&n()}catch(s){var t,a;console.error("Error ".concat(i?"updating":"creating"," listing:"),s);let e="Error ".concat(i?"updating":"creating"," listing. ");null!==(t=s.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.message?e+=s.response.data.message:s.message?e+=s.message:e+="Please try again.",$p.error(e)}},className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 bg-white rounded-lg shadow",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[" ",(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Address"})," ",(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[" ",(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Street #"]}),(0,gp.jsx)("input",{type:"text",name:"streetNumber",value:p.streetNumber,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Street Name"]}),(0,gp.jsx)("input",{type:"text",name:"streetName",value:p.streetName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Unit"]}),(0,gp.jsx)("input",{type:"text",name:"unit",value:p.unit,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:p.city,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,gp.jsxs)("select",{name:"province",value:p.province,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select Province"}),["Alberta","British Columbia","Manitoba","New Brunswick","Newfoundland and Labrador","Nova Scotia","Ontario","Prince Edward Island","Quebec","Saskatchewan","Northwest Territories","Nunavut","Yukon"].map((e=>(0,gp.jsx)("option",{value:e,children:e},e)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:p.postalCode,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seller Detail"})," ",(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[" "," ",(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"sellerFirstName",value:p.sellerFirstName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"sellerLastName",value:p.sellerLastName,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Cellular Phone #"]}),(0,gp.jsx)("input",{type:"tel",name:"sellerPhone",value:p.sellerPhone,onChange:e=>gE(e,x),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Commission"})," ",(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[" ",(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","List %"]}),(0,gp.jsx)("input",{type:"number",step:"0.01",name:"listCommission",value:p.listCommission,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sell %"]}),(0,gp.jsx)("input",{type:"number",step:"0.01",name:"sellCommission",value:p.sellCommission,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Property Type"]}),(0,gp.jsxs)("select",{name:"propertyType",value:p.propertyType,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select Type"}),(0,gp.jsx)("option",{value:"Commercial",children:"Commercial"}),(0,gp.jsx)("option",{value:"Residential",children:"Residential"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Status"]}),(0,gp.jsxs)("select",{name:"status",value:p.status,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select Status"}),(0,gp.jsx)("option",{value:"Sold",children:"Sold"}),(0,gp.jsx)("option",{value:"Available",children:"Available"}),(0,gp.jsx)("option",{value:"Terminated",children:"Terminated"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deal Type"}),(0,gp.jsxs)("select",{name:"dealType",value:p.dealType||"",onChange:f,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Deal Type"}),(0,gp.jsx)("option",{value:"Sale",children:"Sale"}),(0,gp.jsx)("option",{value:"Lease",children:"Lease"})]})]}),(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Agent Detail"})," ",(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[" ",(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Number"}),(0,gp.jsx)("input",{type:"text",name:"agentNo",value:p.agentNo,onChange:f,readOnly:!0,className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,gp.jsxs)("select",{name:"selectedAgent",value:c,onChange:O,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select Agent"}),C.map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},e._id)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Office #"}),(0,gp.jsx)("input",{type:"tel",name:"agentOffice",value:p.agentOffice,onChange:e=>gE(e,x),className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lead"}),(0,gp.jsxs)("select",{name:"agentLead",value:p.agentLead,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select"}),(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Listing Number"}),(0,gp.jsx)("input",{type:"text",name:"listingNumber",value:p.listingNumber,readOnly:!0,placeholder:i?p.listingNumber?"":"Not available":"Auto-generated after save",className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","MLS Number"]}),(0,gp.jsx)("input",{type:"text",name:"mlsNumber",value:p.mlsNumber,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Listing Date"]}),(0,gp.jsx)("input",{type:"date",name:"listingDate",value:p.listingDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Entry Date"]}),(0,gp.jsx)("input",{type:"date",name:"entryDate",value:p.entryDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Expiry Date"]}),(0,gp.jsx)("input",{type:"date",name:"expiryDate",value:p.expiryDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),"Sold"===p.status&&(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sold Date"]}),(0,gp.jsx)("input",{type:"date",name:"soldDate",value:p.soldDate,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Sold Price"]}),(0,gp.jsx)("input",{type:"number",step:"0.01",name:"soldPrice",value:p.soldPrice,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Last Edit"]}),(0,gp.jsx)("input",{type:"date",name:"lastEdit",value:p.lastEdit,readOnly:!0,className:"mt-2 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","We Manage"]}),(0,gp.jsxs)("select",{name:"weManage",value:p.weManage,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700",children:[(0,gp.jsx)("option",{value:"",children:"Select"}),(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[" ","Listed Price"]}),(0,gp.jsx)("input",{type:"number",step:"0.01",name:"listedPrice",value:p.listedPrice,onChange:f,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700"})]})]}),(0,gp.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[" ",a&&(0,gp.jsx)("button",{type:"button",onClick:a,disabled:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700",children:"Cancel"})]})]}),(0,gp.jsxs)("div",{className:"mt-12",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Additional Information"}),(0,gp.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,gp.jsxs)("div",{className:"w-full flex flex-col",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-4",children:"People Details"}),(0,gp.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log("Submitting person:",y),console.log("Current editing index:",N),null!==N){const e=[...g];e[N]=J({},y),console.log("Updating person at index:",N),console.log("Updated people array:",e),b(e),j(null),$p.success("Person updated successfully!")}else console.log("Adding new person"),b([...g,J({},y)]),$p.success("Person added successfully!");v({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:"",phone:""})},className:"space-y-4 p-4 border rounded-lg",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",id:"firstName",value:y.firstName,onChange:D,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",id:"lastName",value:y.lastName,onChange:D,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",required:!0})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",id:"address",value:y.address,onChange:D,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Cellular Phone #"}),(0,gp.jsx)("input",{type:"tel",name:"phone",id:"phone",value:y.phone,onChange:e=>gE(e,v),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"end",className:"block text-sm font-medium text-gray-700",children:"End"}),(0,gp.jsxs)("select",{name:"end",id:"end",value:y.end,onChange:D,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"",children:"Select the end"}),(0,gp.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,gp.jsx)("option",{value:"Selling End",children:"Selling End"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,gp.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-900 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==N?"Update Person":"Add Person"}),(0,gp.jsx)("button",{type:"button",onClick:()=>{v({type:"",firstName:"",lastName:"",email:"",primaryPhone:"",cellPhone:"",address:"",end:"",companyName:"",phone:""}),j(null)},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Add New"})]})]}),(0,gp.jsxs)("div",{className:"mt-8",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"People List"}),(0,gp.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,gp.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-blue-900",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"End"}),(0,gp.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"First Name"}),(0,gp.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Last Name"}),(0,gp.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Cell Phone #"}),(0,gp.jsx)("th",{className:"w-1/5 px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Address"}),(0,gp.jsx)("th",{className:"relative px-6 py-3",children:(0,gp.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.end}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firstName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.lastName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.address}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,gp.jsx)("button",{onClick:()=>(e=>{v(g[e]),j(e)})(t),className:"text-blue-900 hover:text-blue-700",children:"Edit"})})]},t)))})]})})]})]}),(0,gp.jsxs)("div",{className:"w-full flex flex-col mt-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Agent Details"}),(0,gp.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log("Submitting agent:",E),console.log("Current editing agent index:",A),console.log("Current agents array:",w),E.agentNo&&E.firstName&&E.lastName){if(null!==A){const e=[...w];e[A]=J({},E),console.log("Updating agent at index:",A),console.log("Updated agents array:",e),S(e),I(null),$p.success("Agent updated successfully!")}else{console.log("Adding new agent");const e=[...w,J({},E)];console.log("New agents array:",e),S(e),$p.success("Agent added successfully!")}T({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),d("")}else $p.error("Please select an agent and fill in required fields")},className:"space-y-4 p-4 border rounded-lg",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"agentNo",className:"block text-sm font-medium text-gray-700",children:"Agent #"}),(0,gp.jsx)("input",{type:"text",name:"agentNo",id:"agentNo",value:E.agentNo||"",onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"agentFullName",className:"block text-sm font-medium text-gray-700",children:"Agent Full Name"}),(0,gp.jsxs)("select",{name:"agentFullName",id:"agentFullName",onChange:O,value:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"",children:"Select an agent"}),C.map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName]},e._id)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"officeNo",className:"block text-sm font-medium text-gray-700",children:"Office #"}),(0,gp.jsx)("input",{type:"tel",name:"officeNo",id:"officeNo",value:E.officeNo,onChange:e=>gE(e,T),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"sendPage",className:"block text-sm font-medium text-gray-700",children:"Send Page"}),(0,gp.jsxs)("select",{name:"sendPage",id:"sendPage",value:E.sendPage,onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"lead",className:"block text-sm font-medium text-gray-700",children:"Lead"}),(0,gp.jsxs)("select",{name:"lead",id:"lead",value:E.lead,onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"cooperation",className:"block text-sm font-medium text-gray-700",children:"Co-Operation"}),(0,gp.jsxs)("select",{name:"cooperation",id:"cooperation",value:E.cooperation,onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"expense",className:"block text-sm font-medium text-gray-700",children:"Expense %"}),(0,gp.jsx)("input",{type:"text",name:"expense",id:"expense",value:E.expense,onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,gp.jsx)("input",{type:"text",name:"amount",id:"amount",value:E.amount,onChange:P,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-700 focus:ring-blue-700 sm:text-sm"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,gp.jsx)("button",{type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-900 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:null!==A?"Update Agent":"Add Agent"}),(0,gp.jsx)("button",{type:"button",onClick:()=>{T({agentNo:"",firstName:"",lastName:"",officeNo:"",sendPage:"No",lead:"No",expense:"",amount:"",cooperation:"No"}),d(""),I(null)},className:"inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2",children:"Clear"})]})]}),(0,gp.jsxs)("div",{className:"mt-8",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Agent List"}),(0,gp.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,gp.jsxs)("table",{className:"w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-blue-900",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Agent No"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Office No"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Lead"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Co-Op"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Expense"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"relative px-4 py-2",children:(0,gp.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.agentNo}),(0,gp.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:[e.firstName," ",e.lastName]}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.officeNo}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lead}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.cooperation}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.expense}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.amount}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:(0,gp.jsxs)("div",{className:"flex space-x-2 justify-end",children:[(0,gp.jsx)("button",{onClick:()=>(e=>{console.log("Editing agent at index:",e),console.log("Agent data:",w[e]);const t=w[e];if(T(t),I(e),t.firstName&&t.lastName){const e=C.find((e=>e.firstName===t.firstName&&e.lastName===t.lastName));e&&d(e._id)}})(t),className:"text-blue-900 hover:text-blue-700",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this agent?")){const t=w.filter(((t,n)=>n!==e));S(t),$p.success("Agent deleted successfully!")}})(t),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},t)))})]})})]})]})]})]}),(0,gp.jsx)("div",{className:"mt-8 flex justify-center",children:(0,gp.jsx)("button",{type:"submit",form:"listingForm",disabled:s,className:"px-8 py-4 text-lg font-medium text-white bg-blue-900 hover:bg-blue-800 border border-transparent rounded-md shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700",children:s?i?"Updating...":"Saving...":i?"Update Listing":"Save Listing"})})]})},UE=e=>{let{label:t,value:n}=e;return(0,gp.jsxs)("div",{className:"mb-3",children:[(0,gp.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,gp.jsx)("p",{className:"text-base text-gray-900",children:n||"-"})]})},HE=e=>{var n,r,a,s,o,i,l,c,d,u,m,h,p,x,f,g;let{listing:b,onClose:y,onListingUpdated:v,showAdminActions:N=!1}=e;const[j,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),[k,E]=(0,t.useState)(""),[T,A]=(0,t.useState)(""),[I,D]=(0,t.useState)(!1),[P,O]=(0,t.useState)(!1);(0,t.useEffect)((()=>{console.log("Modal listing data:",b),console.log("People data:",null===b||void 0===b?void 0:b.people),console.log("Agents data:",null===b||void 0===b?void 0:b.agents),b&&b._id&&(D(!0),Oj.get("/listings/".concat(b._id,"/note")).then((e=>{E(e.data.note||""),A(e.data.note||"")})).catch((()=>{E(""),A("")})).finally((()=>D(!1))))}),[b]);const L=()=>{w(!1),y()},R=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString("en-US")};return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,gp.jsx)("button",{onClick:L,className:"absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-2xl","aria-label":"Close modal",children:(0,gp.jsx)(dp,{})}),(0,gp.jsx)("button",{onClick:()=>C((e=>!e)),className:"absolute top-4 right-16 bg-blue-800 hover:bg-blue-900 text-white font-semibold px-4 py-1 rounded shadow","aria-label":"Show Note",children:"Note"}),S&&(0,gp.jsxs)("div",{className:"absolute top-16 right-4 bg-yellow-50 border border-yellow-300 rounded-lg p-4 w-80 shadow-lg z-50",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,gp.jsx)("span",{className:"font-semibold text-yellow-700",children:"Note"}),!P&&(0,gp.jsx)("button",{onClick:()=>O(!0),className:"text-xs text-blue-600 hover:underline ml-2",children:k?"Edit":"Add"}),P&&(0,gp.jsx)("button",{onClick:()=>{O(!1),A(k)},className:"text-xs text-gray-500 hover:underline ml-2",children:"Cancel"})]}),I?(0,gp.jsx)("div",{className:"text-sm text-gray-500",children:"Loading..."}):P?(0,gp.jsxs)("div",{children:[(0,gp.jsx)("textarea",{className:"w-full border rounded p-1 text-sm",rows:4,value:T,onChange:e=>A(e.target.value),disabled:I}),(0,gp.jsx)("button",{onClick:()=>{D(!0),Oj.put("/listings/".concat(b._id,"/note"),{note:T}).then((e=>{E(e.data.note),O(!1),$p.success("Note saved successfully!")})).catch((()=>{$p.error("Failed to save note.")})).finally((()=>D(!1)))},className:"mt-2 px-3 py-1 bg-blue-900 text-white rounded text-sm hover:bg-blue-800",disabled:I,children:"Save"})]}):(0,gp.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap min-h-[2rem]",children:k||(0,gp.jsx)("span",{className:"text-gray-400",children:"No note yet."})})]}),(0,gp.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-900 border-b pb-3",children:[j?"Edit Listing":"Listing Details",": #",b.listingNumber]}),j?(0,gp.jsx)(BE,{listingToEdit:b,onSubmitSuccess:()=>{w(!1),v&&v()},onCancel:()=>w(!1)}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:[(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Address"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6",children:[(0,gp.jsx)(UE,{label:"Street #",value:null===(n=b.address)||void 0===n?void 0:n.streetNumber}),(0,gp.jsx)(UE,{label:"Street Name",value:null===(r=b.address)||void 0===r?void 0:r.streetName}),(0,gp.jsx)(UE,{label:"Unit",value:null===(a=b.address)||void 0===a?void 0:a.unit}),(0,gp.jsx)(UE,{label:"City",value:null===(s=b.address)||void 0===s?void 0:s.city}),(0,gp.jsx)(UE,{label:"Province",value:null===(o=b.address)||void 0===o?void 0:o.province}),(0,gp.jsx)(UE,{label:"Postal Code",value:null===(i=b.address)||void 0===i?void 0:i.postalCode})]})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Seller Details"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-6",children:((e,t)=>{const n=((null===(e=b.seller)||void 0===e?void 0:e.name)||"").trim().split(" "),r=n.pop()||"",a=n.join(" ")||"";return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(UE,{label:"First Name",value:a}),(0,gp.jsx)(UE,{label:"Last Name",value:r}),(0,gp.jsx)(UE,{label:"Home Phone #",value:null===(t=b.seller)||void 0===t?void 0:t.phoneNumber})]})})()})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Commission"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6",children:[(0,gp.jsx)(UE,{label:"List %",value:null===(l=b.commission)||void 0===l?void 0:l.list}),(0,gp.jsx)(UE,{label:"Sell %",value:null===(c=b.commission)||void 0===c?void 0:c.sell})]})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Property Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6",children:[(0,gp.jsx)(UE,{label:"Property Type",value:b.propertyType}),(0,gp.jsx)(UE,{label:"Status",value:b.status}),(0,gp.jsx)(UE,{label:"MLS #",value:b.mlsNumber}),(0,gp.jsx)(UE,{label:"We Manage",value:b.weManage?"Yes":"No"})]})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Agent Details"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-x-6",children:(()=>{if(b.agents&&b.agents.length>0){const e=b.agents[0];return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(UE,{label:"First Name",value:e.firstName||""}),(0,gp.jsx)(UE,{label:"Last Name",value:e.lastName||""}),(0,gp.jsx)(UE,{label:"Office #",value:e.officeNo||""}),(0,gp.jsx)(UE,{label:"Lead",value:e.lead||"No"})]})}if(b.agent&&b.agent.name){const e=b.agent.name.trim().split(" "),t=e.pop()||"",n=e.join(" ")||"";return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(UE,{label:"First Name",value:n}),(0,gp.jsx)(UE,{label:"Last Name",value:t}),(0,gp.jsx)(UE,{label:"Office #",value:b.agent.officeNumber||""}),(0,gp.jsx)(UE,{label:"Lead",value:b.agent.isLead?"Yes":"No"})]})}return(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(UE,{label:"First Name",value:"-"}),(0,gp.jsx)(UE,{label:"Last Name",value:"-"}),(0,gp.jsx)(UE,{label:"Office #",value:"-"}),(0,gp.jsx)(UE,{label:"Lead",value:"-"})]})})()})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-x-6",children:[(0,gp.jsx)(UE,{label:"Listing Date",value:R(null===(d=b.dates)||void 0===d?void 0:d.listing)}),(0,gp.jsx)(UE,{label:"Entry Date",value:R(null===(u=b.dates)||void 0===u?void 0:u.entry)}),(0,gp.jsx)(UE,{label:"Expiry Date",value:R(null===(m=b.dates)||void 0===m?void 0:m.expiry)}),(0,gp.jsx)(UE,{label:"Sold Date",value:R(null===(h=b.dates)||void 0===h?void 0:h.sold)}),(null===(p=b.dates)||void 0===p?void 0:p.lastEdit)&&(0,gp.jsx)(UE,{label:"Last Edited",value:R(null===(x=b.dates)||void 0===x?void 0:x.lastEdit)})]})]}),(0,gp.jsxs)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"Pricing"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6",children:[(0,gp.jsx)(UE,{label:"Listed Price",value:null!==(f=b.prices)&&void 0!==f&&f.listed?"$".concat(b.prices.listed.toLocaleString()):"N/A"}),"Sold"===b.status&&(0,gp.jsx)(UE,{label:"Sold Price",value:null!==(g=b.prices)&&void 0!==g&&g.sold?"$".concat(b.prices.sold.toLocaleString()):"N/A"})]})]})]}),b.people&&b.people.length>0&&(0,gp.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"People Details"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"First Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.people.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.firstName}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lastName}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.address}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.phone}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.end||"-"})]},t)))})]})})]}),b.agents&&b.agents.length>0&&(0,gp.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Agent Details"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent No"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office #"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Send Page"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expense"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.agents.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.agentNo}),(0,gp.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:[e.firstName," ",e.lastName]}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.officeNo}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.lead}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.sendPage}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.expense}),(0,gp.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:e.amount})]},t)))})]})})]}),(0,gp.jsxs)("div",{className:"mt-8 pt-4 border-t flex justify-between items-center",children:[(0,gp.jsx)("div",{children:(0,gp.jsxs)("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center mr-3",children:[(0,gp.jsx)(Yh,{className:"mr-2"})," Edit"]})}),(0,gp.jsxs)("div",{className:"flex items-center",children:[N&&(0,gp.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this listing?"))try{await Oj.delete("/listings/".concat(b._id)),$p.success("Listing deleted successfully!"),v&&v(),L()}catch(n){var e,t;console.error("Error deleting listing:",n),$p.error("Failed to delete listing: ".concat((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}},className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 flex items-center mr-3",children:[(0,gp.jsx)(up,{className:"mr-2"})," Delete"]}),(0,gp.jsx)("button",{onClick:L,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Close"})]})]})]})]})})},zE=e=>{let{showAdminActions:n=!1}=e;const[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)("all"),g=async()=>{l(!0);try{const e=(await Oj.get("/listings")).data.sort(((e,t)=>t.listingNumber-e.listingNumber));a(e);const t=e.filter((e=>{const t=!c||e.listingNumber.toString().includes(c.trim()),n="all"===x||e.status.toLowerCase()===x;return t&&n}));return o(t),e}catch(e){return console.error("Error fetching listings:",e),$p.error("Failed to fetch listings"),[]}finally{l(!1)}};(0,t.useEffect)((()=>{g()}),[]);const b=e=>{f(e);const t=r.filter((t=>{const n=!c.trim()||t.listingNumber.toString().includes(c.trim()),r="all"===e||t.status.toLowerCase()===e;return n&&r}));o(t)};return i?(0,gp.jsx)("div",{className:"flex justify-center items-center h-[100vh]",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):(0,gp.jsxs)("div",{className:"min-h-[100vh] w-full p-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Listings"}),(0,gp.jsxs)("div",{className:"mb-6 flex items-center gap-6",children:[(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-2.5 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Enter Listing #",value:c,onChange:e=>{const t=e.target.value;d(t);const n=r.filter((e=>{const n=!t.trim()||e.listingNumber.toString().includes(t.trim()),r="all"===x||e.status.toLowerCase()===x;return n&&r}));o(n)},className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,gp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gp.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,gp.jsx)("input",{type:"checkbox",checked:"available"===x,onChange:()=>b("available"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Available"})]}),(0,gp.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,gp.jsx)("input",{type:"checkbox",checked:"sold"===x,onChange:()=>b("sold"),className:"form-checkbox h-4 w-4 text-blue-900"}),(0,gp.jsx)("span",{className:"ml-2",children:"Sold"})]})]})]}),(0,gp.jsx)("div",{children:(0,gp.jsxs)("table",{className:"w-full bg-white shadow-md rounded-lg table-fixed",children:[(0,gp.jsx)("thead",{className:"bg-blue-900",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Listing #"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Street #"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[26%]",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[6%]",children:"Unit"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[11%]",children:"City"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[11%]",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[18%]",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[12%]",children:"Price"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[10%]",children:"Type"}),(0,gp.jsx)("th",{className:"px-3 py-3 text-left text-base font-semibold text-white w-[10%]",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"divide-y divide-gray-200",children:s.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{m(e),p(!0)})(e),children:[(0,gp.jsxs)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:["#",e.listingNumber]}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.streetNumber}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis",children:e.address.streetName}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.unit||"-"}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.address.city||"-"}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.mlsNumber||"-"}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap overflow-hidden text-ellipsis",children:e.agents&&e.agents.length>0?e.agents.map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", "):e.agent&&e.agent.name?e.agent.name:"-"}),(0,gp.jsxs)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:["$",e.prices.listed.toLocaleString()]}),(0,gp.jsx)("td",{className:"px-3 py-3 text-base text-gray-900 whitespace-nowrap",children:e.propertyType}),(0,gp.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("Sold"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e._id)))})]})}),h&&u&&(0,gp.jsx)(HE,{listing:u,onClose:()=>{p(!1),m(null)},onListingUpdated:async()=>{const e=await g();if(u&&e.length>0){const t=e.find((e=>e._id===u._id));t&&m(t)}},showAdminActions:n})]})},VE=()=>{const[e,n]=(0,t.useState)("list");return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b",children:(0,gp.jsx)("div",{className:"max-w-screen-2xl mx-auto px-4",children:(0,gp.jsx)("nav",{className:"flex space-x-8",children:["List","Info","Details"].map((t=>(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-900 transition-colors ".concat(e===t.toLowerCase()?"text-blue-900 border-b-2 border-blue-900":"text-gray-500"),onClick:()=>n(t.toLowerCase()),children:t},t.toLowerCase())))})})}),(0,gp.jsxs)("div",{className:"max-w-screen-2xl mx-auto py-6",children:["list"===e&&(0,gp.jsx)(zE,{}),"info"===e&&(0,gp.jsx)(BE,{onSubmitSuccess:()=>n("list")}),"details"===e&&(0,gp.jsx)("div",{children:"Details Content"})]})]})},qE="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCABnANMDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KKKACiiigAooooAKKKKACiiigAooooAYzYoVs1l69qQ03T5pc4kI2xj1Ncx8KvGZ8WaHIk0u7ULKV4ZgWJLAHhvxryZZnh442OAb99q/8AwPXqdMcPUlRddL3U7HfUUUV6xzBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUxmxSvbcB9FZuoamljZyTGRXA6bTXL/DfxyfFen3aXUgF7aXDwyYO0EBuCK8uWZ4aGKjg5S9+Sb+7+vwOiOHqSpyqpaK34ndUzNQySSLGXjUynGdikdfTNcL/wtzTV1SXTLqRdN1BDta3usqR7g9CKWOzTC5dGMsTKye2jf5XClQqVr8ivY2b7xlbaf4s0/RpX2vdq+1yePMHRa6dWzXzv8Rre/vfEOgSWtyPP85pheKPkjx/FnP6V1/8AwvXTY9Qi0tQNR1SY7I7PT2Lyk/yA96+MyniylXq1aeKury9zRvTotL7HrYjLJKnCdHXTXyPTr6+j0+1eeZ2WGMfMygk/lWZb+LtPvoRNaT/bEPIMDBhn045rUt98tvG00HlSSDLxFt2D6ZrxP4o/Cu90u4k8QeGHeBl5ntLckc/3lHp7V7ue4jMcLQ+sYBJpbq2tu6/U48HRoV5+zqy5W9n0+Z23irUJL64hCjMK8g+9ePfCTVL3RvHeoywRF7MPKtyB0Pz/AC49xV7TfFXivRdGe/1xbcaTCCzS3oCPx0AA7muH8R+KfE3hNzZ6Ra2lp5w+1eeBukm3Hdu56Y9K/DZ5jia+Njjue1S97vTbQ+yw+EcKU8LZNPTRn1AvxC0+GHzrt2s19ZiAv51taHr1n4gsVvLCb7TbMcLKoIVvcZr5d+D/AMJdX+J06a94vubq60dJP3VrMxHnsOuR/wA86+q47SK2tEjhiSJIxhFRQAo9AO1fuGRVszxNH2+Oa5XtZWb8/T5HyOYUcPh5+ypO8lv2RZ3iuY1jxlbaN4g03S532tesVEmeFY/dU1hTfF/TbXVn0u9H9k38f3o7wHBHqD0Nee/FCO81a+0qe2uFMrXQkWcFdsahdwcn29K8XOuKqWHUYYJuUlJc2jWieq1tvsbYPLZVanLXXKmnb7j6FzT68gf49aXY38GmNKup6lIfLjttPzJLI/pjoB716lZ3Mk1lFNNC9tI4y0TtkqfQmvsMBm2FzKLlQb03umvzPNrYarh2lUVrlveKdXO+KNZbS9IuZY3Ec4jbZ3w23r9KqeA/GMXizwvY6j5oEjrslDHHzjg4HpmtFmWHeLeD5vfS5vx/Mn6vU9l7a2l7HW0VGsgkG5DuFSV6d77HOFFFFMAooooAxvEfinS/B+lS6nrV/Dpmnxna9xcSBVUk4GM9STwBXKf8NCfDn/ocdL/7+n/CuI/bMVX+E9huUN/xUmkjkf8AT5H/AIn869w/s+1/59of+/Y/woA4b/hoT4c/9Djpf/f0/wCFbfhn4geGvHAuo9A1q11Rof8AXGCTd5eemeRj8KuC+0MqwFxYNt+8S0fy/XmrFnd6Z5Mk1rLamEf6yaFlCj/gQoFzLa55P4zsda8B3c+oRa7DJ4cwZpbfUV3mMD7yhhyfavPNNtfEmqeJdN0fT9Qg0Ox1hPtn2qGLfNIrDdgE9GFe2+LvDfh3xpc2j6xqsNxptv8AvPsInURuw6FjnJHsa1JfCOlagdLu7NUjSzkVraS3IYBQMED0GOOK/JsRwrWnjXiaaXs+dPlb15evp6H0tDNaUaPI9ZNau33erNrQ9Hh0bS4rSGSWWOL+OVizt9Setcd8UvBui+ILOO61OEK1ueZlIX5NvOT6CvQ0A9K5jxl4Lg8aWaWN1cTQ2BbM0MLFWmGPuk56e1fdZxgPrmXzwtKCbask+mu/yPHwtZ0a6q8zXmfNWiWlj8UF8SWOlQta6ZYxwiwCu2JHO7Lk+j8cdq9C/Zm8FaRo+l6peJZbNWhujau7gbkUKMKvoK9f0nwlpOh2H2Gw023s7bnMaKB1681Ho/hSy0XUtQvbTMb3ZUyrjHKjr+NfIZXwziMrx9KvzKULO67O2jXfU9jE5rGvQnRjdXtb5br5nQKqgcKB+FZXiCb7PpN02ecda1Kw/FOgv4j0l7CO9msY5Rh5rcfvAvseoNffZhTq1cLUp0V70k0vmj5+m0ppy2Pk74qeJ9R+I3iEeGtAinv7e3lCNHGpPny9yT02ivUvGXgWXWvDttbzwtHf28CGNsdSE5U+3tXrPhHwTong3TlttG0+GyTq7IMux9z1NblxaRXS4eNX/wB5Qa/N3wQ5YbldX3/wPopZwoyj7GNox+882+Al49x4FS3YGOW0neN0f7wOc8/nXqOB0xxXPaH4XtNA1HUZ7UFI75lkdO24cH8TV3+39O3so1G2JH3v36fL9ea/QMnoVcLgaVCv8UVb7tF+B4eMrQq151Y6KTv95y/xQ8GaP4o0eOTUo9q253JIjbCo9M+leBaPa6Z8RNS1/RtJjNvpVtbr9kmZ2CyTZxvJ7jHGPSvozxNoll8QNKNkmp4s/M23K2bhi4/ubhyv4Vc0Pwbovh3S106w063tLYjBjVRk/j3r47NuGamaY6deLUI2Vn3ffSx6mEzJYegoXbfTsjx79mvwTpWlnWLqSzVdZtrhYd8hz5S7eAgPTPqK901CxS/s5oJGZYpO8ZIb8xWXpfhK00rXbvUrbcj3UYSZT0OOhroG46cV9PkmBng8vhhcQlzK6duuu/3WOHHYn6ziHXi97fLQ8A8XTa34Da8/tLWYNR0aVliiE6ZuJC42hARzx3NYHgvQPEviDxofDk+qxaNo2ngzG309Nssy7uBvPr617RrXwz0rxB4ii1jWN+o/Zzm3tpP9RF3yR3PvWrF4PsrfxBDq8K+TPHG0RWMYyh6Lx2HYV8PT4Uqxx8cQ4p0+d+63dqN9D1lmcFRcF8TW9uv66dSHXvGnhv4d2tsNb1e30m3l+SBryb/WEdcMSSfxrF/4aE+HP/Q46X/39P8AhXey20M+PMiSTacjcoOKj+w2n/PrD/37H+FfrKXKrI+ZOG/4aE+HP/Q46X/39P8AhXWeHvEmmeK9Mi1HStQhv7KQttuLeTeh2nDc9iCCMVf/ALNtP+fWH/v2P8K4D4GxqvhbVFVQFGv6mAAOBi6kxTA9IooooA8G/bK/5JPp/wD2Mmk/+lkVe7V4V+2R/wAkm07/ALGTSf8A0sSvdaAPzI/4KH6VZeHvjJYpYRCwW70tZJFtVEYdvMYbjtxk8dTX6A/C/wANaTpfw10Kzs7C3it59PgeWPylCyMY1JLDGCSfWvgv/gpR83xo0TPONFUj/v69fW3g0fGdvCOjm2bwV9m+xQiHzjdBtuweg64xQfP4aSji62l9j4c+IGg2Fr+2xLocNlHFo3/CTWsX2GMMsew+XlcDjByePev0c+Ivj7w78EfAd3repRrZ6bYqfKtbVFUyMfuxoMdT7V+cPipNU/4bWhGsmz/tT/hJbQzmxD+UX/dfc38kfWvb/wDgp1rF0tr4E0lQwspXubl+TtZ1MQUEd8BmI9KDmw9Z0KVepFa30PW/gP8AEP4gftDWN34pnu18HeFhK0FjY2ESS3U5XBLvJKCAMkDhexrn/jN8cvH/AOzF4t0qfW2i8a+BdWOwXC2ywX1u4wWUFMIx2kkZ9K9Q/ZLsINP/AGd/A0cIXyzpquWA/iYkt+teef8ABQ7T7e4/Z5aaZE8211S3ePIBy2GX/wBBoPRqKcMJ7VSfMle57P8A8JVJ8QPh5Br/AIN1qG2iurc3VteNbecGULkqVbbg54/Cvi34a/t5eOL34m6JpXipdNj0K7u1tLme3tWjIBbyxIpZum4g/TNesf8ABPzUry6/Z31aKdWMNpeXCWxY5+UxqxA9gxNfK3xw+GZsfgt8MPH9hCVhuLebTb141xtlWaV4nJHcjK5/2Peg48ViKrpU69NtaXa+4/U7U9YttF0m61K8mWO0t4WmklJ+VVUZJ/KvgTwX+298S/iT8WtN8N6a2kWGmapqi21tM1kZJIoS2AWG7k45rvoPjFcfGz9nnwB4UsblpPEniu7XRtRMTnfHBDn7RKwzkZRV57l6+fPD+m2uk/t3adYWyJHa2nioW0CxqFAVGwOBQVi8VKUqbpStFtXt5/5H3L+0N4p8a/DL4R3/AIp0PWrWS+0aBGuY7yxVluyZFUnAb5Pvdq86/ZR+MvxH/aE0XX9R1HXdO0mGxuFto1s9N8xizLuyct0xXov7Zij/AIZp8bcD/j2Xt/01SvmD9hfxlrfhH4X/ABAudC8MXfie6iuUdY7eSOPDCLhfmbmg2rVHTxkYNvls3Y+mfCfiL4k6b8dJvCfiu803UfDs+lPf2F3Z2RikkZZFRlf5sKQGB4r5A/4KKaRY6H8X9HbT4F09bjS1kmW1URiVvMYbm24ycY5NfcXwDvH8UfCTwVr+pr9s1iTTwz3UwzKrSYMi5PPUAH6Cvir/AIKV/wDJWPD3/YI/9qtQZZgn9Tcr7tP7z7l+CfhvTPD/AMLvDUWm2UNj52l2skvlxgF2MSks2OpJPU+tdF4qt9TutBuF0a+TT9RX54rh4hKvHUEVS+Fv/JMvCZ7/ANk2n/ola27uWOS3uUVlcxxncC2TyvGR2zQe5C3s0vI+JP2f/wBqb4o/Gb4uL4OudQ0fT4Y0nknuotPLPiP+6C2Oa9U/a9+LXjr4F+HNN8SeHtRs7izuLpbKSxvbQNhjGzbw4bP8PSvlv9hvn9q66U8jytQGPb0r3/8A4KUAH4M6Dkf8xuP/ANFS0Hz9KtUlgalRyd03rc7L9nfxn8QfjN8K7bxVeeJdPsbq6klSK3tNKDxBUbA5LZ5rR+GWv/E/xBq3xC8OeJtV0uy1XR5rVdP1DT7DKPFJGzh2Rnyc8DHYg14N8J/iN4q8C/sWLLoHh2+mkDTx/wBrRyxhLZGlw8wQNuwo5HpX2xpGnWyWq36xot1dW0fnzhRvlwpxubq2MnGfU0HoYZurGN27pXfnc+K/gf8AtTfFP4rfGb/hBbnUdIso4pLlZLqPT9zlYW6gFsc17f8AFPWvir8Pbzw3f6frmm6xoNxqltYakLjTfLmiSWZULqQ23A3elfGX7Kl/d6X+1fdz2mnS6rciTVFFvHKqSAbm5+avtj4L+LtY+J3ij4iReKdFl00adqNvFa6RqDCTyY1iDo4HTJb5sjuoPamcODqyrU7Sk+Zt2+Wp7lmvPPgf/wAixqv/AGMGqf8ApVLXoaV558D/APkWNV/7GDVP/SqWkfRno1FFFAHhH7ZX/JJ9O/7GPSP/AEsjr3SvCf2yj/xafT/+xk0n/wBLIq92SgD8xv8AgoZrFr4i+NVgNKnj1D7LpKRTPbuHSNjI7EMR3x6V+gXwv8TaVq3w50K8s9StbixSwhDzJIuIyIl3BiDgGuoHhvSFJI0qyBzn/j3Tr69Klh0uyt7eSCKzgigk+/EkShW4xyAMHig86jhZUa06t78x+V/xC16wuv20JteguIpdI/4SW1la+Vv3RjXZuYN6fLX2V+2B8E5vj78M7S78NPHf65pspurEpKGS4jPEkSn7uTxjPpXvzeG9IVdq6VZBem0W6Y/lWFb+OvCWmrrlpDqllB/wjaLJqcMZ2iyQqxXzAB8o2qW57UGdPAqKqQm7qZ4F+xH8Vrdfh/H8P/ELNofibQWaIWOpZhd4G5Rl3dcEkYz2rmv22vEmofF6bRPhZ4ItW1/V3vBd6gbP54bYBCIxJIOF5bnNfSurat4C8QyeGjqJ0XUJdd/5A73UaSNdYG8+USvPy5bjHFVLj4gfDf4c3FzpbajpWiSW8ipcRWsIRYZH+6JCi4BPo340Fyws5UPq7lptfrYwPhn4H0r9m/4Ex6TqOowWwtbaSa8u5cKslw65cqM9M8Ae1eRfDPS/D3x0/Y2Hge3vbWbWobWdorQv+/huEmeSNghIbrgZ96+nrjxN4c1LxA3h2W+tLrVorZdQ/s+UBnEJOFkwRjbnjPWuf/4WV8O9N8O2ni5dY0m10i8l+x2+qRhVSaQtt8sOBzlgQB60GssOpWj9lJq3qfJP/BPX4bnRbnxF488QEWVvp7SadbPct5ccTkjz3yzY7Bc46ACvHtO8RaZH+2xH4ge7RNF/4SrzvtgGIdm772fSv0X1b4lfDvw/othNe6zpdppGtb5bZZIwsVzt+Z2A24JGCxyO3NdVZWHh/VNNgurW10+5sJ4xNFNHGjRvGRkMpxjBHNBwvLv3cKcZfC7njH7ZXizRv+Gb/E1uNWtZJdStkWySOVXe4PmpygB+b8K8W/4Jy+KNL8M+FfGdnqmp2umTNeQzIt3MIsqE2sRuPNfUn/CyPhtdabLef2jpMlnp2yJpBGHSIMSVC4XlSV/h44pvh3x58N/GVnc3ei3+japb2Nt9omuERNsUIYhmLFcBRhskelB1Tw05V4109lY89sfjJ4bufjp4J+Hngy8STTbSG+nvTZMWt9wj+SHOcHksfqBXyx/wUT1q08QfFzSF0q4j1I2+meXL9ncOA29m25Hev0LkvvC+j2Om6o02n21veSRxWd0ERBI8oCoI2HGXJGPXNQyXXhGHXr3TGTTf7Xt7X+0biHy08xICzKJmOOnB560E18JOvSdOUt32/A5TwJ8WPB+g/CPw1fXfiXTIbaDSrYSbrtWYERKCu3rwa85/Z9+OFh8Qp/iv4u1K5j0vSV1CKC1/tD91sgWLClsnOSeeK9T8O/ED4ZeMdUtLTRtU0LUby8i8+1ihSPfPHgfPHlfmGMHjPArq4o/DzapcaBFHppvFiS6msQiF/LJKpIyY5G5SAT6UHR7Oo3HXRf5H5r/sX6/Y6P8AtPNfahcxadbTw3oSW4PlozN93luma9//AOCkGuWVx8NdB0m3uYbjUxq6TtaxsHkVPKkG4oDnGSv519D6f43+H+veJpvDttqOjXOtQzNDJp4RRL5iDc67SPvAfwjtzVbVvil8Mo9curTUdd0WPUrW5+wzm4VQ0MuFbymdlwDgqdpPQ0HHDAyhh5Yfm36njv7D+reHfEH7Pdn4UvrqzuLzzLqC50q4YCSRGfJBQkEgjvX0rqWqaf4d0t5Lq5gsrGCLmaZwqKoGB8x4NYmteJPB3g/WdPg1CfTLHUbsolsDABIVdtgwQCQC3GTxXW3ljb6hAYLq3iuYT1jmQOp/A0HfRpulTUL7Kx+Xf7I2t6dpP7VDalqF3FaWM8moCO7mby0bez7cluma+u/2gfjl4O8AeGNTl0HVrO48W695NpH/AGdL5znDbfMcpuxsUtyeuK+gf+Eb0nbt/suy25zj7OmP5Uf8I3pPJ/suyyQB/wAe6dunbtk0HFQwdTD0pU4y3d722LFmxaCMkkkxqTmuC+B//Isar/2MGqf+lUteiKqqAFAAAwMCvO/gf/yLGq/9jBqn/pVLQeoj0aiiigZwnxa+GNp8XPCq6Fd3t1pyrdW96lxa7S8ckMgkjyrAgjIGfpTf+EL8Zf8ARQ7n/wAFFr/8TXeUtAHB/wDCF+Mv+iiXP/gotf8A4mk/4Qvxl/0UO5/8FFr/APE13tFAGPoWn6hYaf5Oo6o+rXWWzcPGkR56fKgAr5M8WeF9R1zxr+0zcRXev6YLjSrdbWDTwgS+ZLKSIjB5b5io5I619lEBuCMimGPIwRkdKAPk2OO6F1+ynINOusabv+2/uD/oudOeAb/T5yF/AGuebxJ4q+A/gjxb4A/sqe58eatr19f6Jqn2Jb221hLm6aVfNOfldEcxESZAEQxxivtbaPQflUbQhuoB4xyKAPmbVvD+o6l+1tcXEuoaxoUEPguGJr7SlRYpJRcM7R5YNnC84ryqTTdQsP2K/hlYNbaxFfaR4rtLi78iANdRRRam8skg4xnZ8wNfd/l9+9IYFYAFQQOgx7Y/lQB8jfF6LWviPN8FZPDN5f2l5cS6p5WsapZRy7Flspo0knjBwodiozjIzXrfwC1W3j+DttoY8MTeG5/DNqNIn0NpN6RtDHt2wyniRG/hbv3r17yRwcDI5HFO2nr3oA+ZP2U2ubXRvFdtp7ajc/DqyZR4d/tiEx3tkwVzNZDPLxxHGxj/AHyB0rkfh9b6jdfsw/D/AOHqWUlnqniC+udP1D7ZaFkt7QXE003mKGyVdAsYAOD5pr7H8keg/KlWLaoAGABgAUAfFcPh+fUPgzpfwf8AGml3WpW/hzxbaaHJNFG6rPpyuxtrhGDbk8tPL5J4Mdd78OfCfjnwZ428ZW3jSddftNL8NLZaT4kUk3OpW++VwLhDnE6k7SRw/UY6V9M+Wuc7Rn1xQyq3VQfqKAPhb4W2MvxS+DPwZ8E6bo95p3ijwTe6dqOoale2/lNpiwE+csb5zK8g/d4Xhg/PANb8P/CSaT8XtA+OJgebTte1iXw5e6als0d3b6YxEdqzZb59kiGYqEyBM/NfY/kjrgZxjpR5QPYUAfDmj6Rrvh/4veJ/HVzoU2s+F9D8f3l6+niELcW4uLGO2GoW5zmUDDq0LbcK5YcqK1D4istR1z4+eCrrwpfa1eeMtUc6VZ3FoPs92rafDFveQnYiiWN+W5+X3r7PMIZskAn1x/n0H5VJtB6gH8KAPjjxR4Z1rwL4w+D2m6Hd6hc/Eyw0zT9KvL2WLzNN1vThIou4rg7sK0YDSo55yeNxr6z1uzvtS0maHTtQbS7t/wDV3SwLIY/+APwa0/LTgbVx9KXA44oA4T/hC/GX/RRLn/wUWv8A8TR/whfjL/oolz/4KLX/AOJrvKKAOD/4Qvxl/wBFEuf/AAUWv/xNcl8LNP8AHng/xjqfhy/0y1ufCCST3aa/JMI7ieeWQv8A6peACXI9sV7TSBQvQAfh69aAFooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z",WE=["_id","__v","createdAt","updatedAt"],YE=()=>{console.log("LedgerDB component mounted");const e=Pu(),n=Iu(),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(null),[i,l]=(0,t.useState)(!0),c=["ARCommissionEarned","APGeneralCommissionExpense","AROtherDebit","unpaidFileTrustReceivable","commissionReceivablePayable","heldFundsReceivableAgent","heldFundsPayableAgent","suspense","unpaidExpensesManagement","unpaidExpensesNonMgmt","payrollAgent"],d=["_id","__v","createdAt","updatedAt","agentDisbursement"],u=e=>e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()));(0,t.useEffect)((()=>{console.log("Fetching ledger data..."),m()}),[n]);const m=async()=>{try{const e=await Oj.get("/general-ledger-setup");console.log("Received ledger data:",e.data),a(e.data)}catch(e){console.error("Error fetching ledger data:",e),o(e.message)}finally{l(!1)}},h=e=>{console.log("\n=== Rendering Fields for Entry ==="),console.log("Entry ID:",e._id),console.log("All entry fields:",Object.keys(e));const t=[];c.forEach((n=>{console.log("Adding default field:",n),void 0!==e[n]&&t.push({key:n,value:e[n],isCustom:!1})}));const n=Object.keys(e).filter((e=>!c.includes(e)&&!d.includes(e)));return console.log("Found custom field keys:",n),n.forEach((n=>{console.log("Adding custom field:",n),t.push({key:n,value:e[n],isCustom:!0})})),"agentDisbursement"in e&&t.push({key:"agentDisbursement",value:e.agentDisbursement,isCustom:!1}),console.log("Final fields to render:",t),t};return s?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load ledger data: ",s]})]}):i?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"container mx-auto my-6 px-4",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Ledger Entries"}),(0,gp.jsx)("div",{className:"space-y-6",children:r.map((t=>(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,gp.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>e("/edit-ledger/".concat(t._id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{await Oj.delete("/general-ledger-setup/".concat(e)),a(r.filter((t=>t._id!==e)))}catch(t){alert("Error deleting entry: "+t.message)}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Oj.get("/general-ledger-setup/".concat(e))).data,{_id:n,__v:r,createdAt:a,updatedAt:s}=t,o=yp(t,WE),i=window.open("","_blank");if(!i)return;const l=Object.entries(o).map((e=>{let[t,n]=e;const r=u(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")})).join("");i.document.write('\n        <html>\n          <head>\n            <title>Ledger Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(qE,'" alt="Company Logo" />\n            <h2 class="title">Ledger Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),i.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),(0,gp.jsx)("div",{className:"mt-12 space-y-4",children:h(t).map((e=>(0,gp.jsxs)("div",{className:"flex border-b border-gray-200 pb-3",children:[(0,gp.jsx)("div",{className:"w-1/3 text-sm font-medium text-gray-600",children:u(e.key)}),(0,gp.jsx)("div",{className:"w-2/3 font-medium",children:"boolean"===typeof e.value?e.value?"Yes":"No":e.value})]},e.key)))})]},t._id)))})]})]})},GE=["_id","__v","createdAt","updatedAt"],KE=()=>{const e=Pu(),n=Iu(),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(null),[i,l]=(0,t.useState)(!0),c=["lastListing","lastTrade","compassDirection","cdaAddress","multipleOffices","mainOfficeNumber","hstNumber","payrollNumber","expStmtAddress","openingBalanceFormat"],d=["_id","__v","createdAt","updatedAt"],u=e=>e.toLowerCase().includes("hst")?e.replace(/hst/i,"HST"):e.toLowerCase().includes("cda")?e.replace(/cda/i,"CDA"):e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()));(0,t.useEffect)((()=>{m()}),[n]);const m=async()=>{try{const e=await Oj.get("/misc-settings");a(e.data)}catch(e){console.error("Error fetching miscellaneous settings:",e),o(e.message)}finally{l(!1)}},h=e=>{const t=[];c.forEach((n=>{void 0!==e[n]&&t.push({key:n,value:e[n],isCustom:!1})}));return Object.keys(e).filter((e=>!c.includes(e)&&!d.includes(e))).forEach((n=>{t.push({key:n,value:e[n],isCustom:!0})})),t};return s?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load miscellaneous settings: ",s]})]}):i?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"container mx-auto my-6 px-4",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Miscellaneous Settings Entries"}),(0,gp.jsx)("div",{className:"space-y-6",children:r.map((t=>(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 relative",children:[(0,gp.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>e("/edit-misc/".concat(t._id)),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{await Oj.delete("/misc-settings/".concat(e)),a(r.filter((t=>t._id!==e)))}catch(t){alert("Error deleting entry: "+t.message)}})(t._id),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Delete"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Oj.get("/misc-settings/".concat(e))).data,{_id:n,__v:r,createdAt:a,updatedAt:s}=t,o=yp(t,GE),i=window.open("","_blank");if(!i)return;const l=Object.entries(o).map((e=>{let[t,n]=e;const r=u(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")})).join("");i.document.write('\n        <html>\n          <head>\n            <title>Miscellaneous Settings Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(qE,'" alt="Company Logo" />\n            <h2 class="title">Miscellaneous Settings Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),i.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Print"})]}),(0,gp.jsx)("div",{className:"mt-12 space-y-4",children:h(t).map((e=>(0,gp.jsxs)("div",{className:"flex border-b border-gray-200 pb-3",children:[(0,gp.jsx)("div",{className:"w-1/3 text-sm font-medium text-gray-600",children:u(e.key)}),(0,gp.jsx)("div",{className:"w-2/3 font-medium",children:"boolean"===typeof e.value?e.value?"Yes":"No":e.value})]},e.key)))})]},t._id)))})]})]})},XE=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),u=Pu(),m=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString()},h=e.filter((e=>{var t;return null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(s)}));(0,t.useEffect)((()=>{(async()=>{a(!0);try{const e=await Oj.get("/trades");console.log("Fetched trades:",e.data),n(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{a(!1)}})()}),[]);return(0,gp.jsxs)("div",{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>u("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Trade Database"}),(0,gp.jsx)("div",{className:"mb-6 relative",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:s,onChange:e=>o(e.target.value),className:"w-64 pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-900"}),(0,gp.jsx)(cp,{className:"absolute left-3 top-3 text-gray-400"})]})}),r?(0,gp.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===h.length?(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:s?"No trades found matching your search.":"No trades found in the database."}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Finalized Date"})]})}),(0,gp.jsx)("tbody",{children:h.map((e=>{var t,n,r,a,s,o,i,c,u,h,p;const x=(e.agentCommissionList||[]).find((e=>e.agentName)),f=x?x.agentName:"-";return(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{d(e),l(!0)})(e),children:[(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(a=e.keyInfo)||void 0===a?void 0:a.mlsNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:f}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(s=e.keyInfo)&&void 0!==s&&s.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(o=e.keyInfo)||void 0===o?void 0:o.propertyType)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(i=e.keyInfo)||void 0===i?void 0:i.status)?"bg-green-100 text-green-800":"PENDING"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(u=e.keyInfo)||void 0===u?void 0:u.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(h=e.keyInfo)||void 0===h?void 0:h.status)||"Available"})}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(p=e.keyInfo)&&void 0!==p&&p.finalizedDate?m(e.keyInfo.finalizedDate):"-"})]},e._id)}))})]})}),i&&(0,gp.jsx)(LE,{trade:c,onClose:()=>{l(!1),d(null)},onUpdate:e=>{d(e);(async()=>{try{const e=await Oj.get("/trades");n(e.data)}catch(e){console.error("Error fetching trades:",e)}})()}})]})]})},$E=()=>(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Miscellaneous Entries Database"}),(0,gp.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,gp.jsx)("p",{className:"text-gray-600",children:"This feature is currently under development. Please check back later."})})]})})]}),QE=["_id","__v","createdAt","updatedAt"],JE=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)({fee:"",selectionOption:"",mlsFeeTaxApplicable:"",postToAP:""}),u=async()=>{try{const e=await Oj.get("/mls-fees");n(e.data),a(!1)}catch(e){o("Failed to fetch MLS fees"),a(!1)}};(0,t.useEffect)((()=>{u()}),[]);const m=e=>{const{name:t,value:n}=e.target;d((e=>J(J({},e),{},{[t]:n})))};return r?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):s?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"text-red-600 p-4",children:["Failed to load MLS fees: ",s]})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,gp.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"MLS Fee Database"})}),(0,gp.jsx)("div",{className:"space-y-6",children:e.map((t=>(0,gp.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,gp.jsx)("div",{className:"flex justify-between items-center",children:(0,gp.jsxs)("div",{className:"space-y-4 w-full",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,gp.jsx)("span",{className:"font-semibold text-gray-700",children:"Fee:"}),(0,gp.jsx)("span",{children:i===t._id?(0,gp.jsx)("input",{type:"number",name:"fee",value:c.fee,onChange:m,className:"border rounded px-2 py-1"}):t.fee})]}),(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,gp.jsx)("span",{className:"font-semibold text-gray-700",children:"Selection Option:"}),(0,gp.jsx)("span",{children:i===t._id?(0,gp.jsxs)("select",{name:"selectionOption",value:c.selectionOption,onChange:m,className:"border rounded px-2 py-1",children:[(0,gp.jsx)("option",{value:"% of Sell Price",children:"% of Sell Price"}),(0,gp.jsx)("option",{value:"Flat Amount",children:"Flat Amount"})]}):t.selectionOption})]}),(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,gp.jsx)("span",{className:"font-semibold text-gray-700",children:"Tax Applicable:"}),(0,gp.jsx)("span",{children:i===t._id?(0,gp.jsxs)("select",{name:"mlsFeeTaxApplicable",value:c.mlsFeeTaxApplicable,onChange:m,className:"border rounded px-2 py-1",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]}):t.mlsFeeTaxApplicable})]}),(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b pb-2",children:[(0,gp.jsx)("span",{className:"font-semibold text-gray-700",children:"Post to A/P:"}),(0,gp.jsx)("span",{children:i===t._id?(0,gp.jsxs)("select",{name:"postToAP",value:c.postToAP,onChange:m,className:"border rounded px-2 py-1",children:[(0,gp.jsx)("option",{value:"Yes Post to A/P",children:"Yes, Post to A/P"}),(0,gp.jsx)("option",{value:"No dont post to A/P",children:"No, dont post to A/P"})]}):t.postToAP})]})]})}),(0,gp.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:i===t._id?(0,gp.jsx)("button",{onClick:()=>(async e=>{try{await Oj.put("/mls-fees/".concat(e),c),l(null),u()}catch(t){alert("Failed to update MLS fee: "+t.message)}})(t._id),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Save"}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Oj.get("/mls-fees/".concat(e))).data,{_id:n,__v:r,createdAt:a,updatedAt:s}=t,o=yp(t,QE),i=window.open("","_blank");if(!i)return;const l=Object.entries(o).map((e=>{let[t,n]=e;const r=(e=>e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())))(t);return"<p><strong>".concat(r,":</strong> ").concat(n,"</p>")})).join("");i.document.write('\n        <html>\n          <head>\n            <title>MLS Fee Print</title>\n            <style>\n              body { font-family: Arial, sans-serif; padding: 30px; }\n              img { width: 120px; height: auto; }\n              .logo { position: absolute; top: 30px; left: 30px; }\n              .title { margin-top: 100px; }\n              p { margin: 8px 0; }\n            </style>\n          </head>\n          <body>\n            <img class="logo" src="'.concat(qE,'" alt="Company Logo" />\n            <h2 class="title">MLS Fee Entry</h2>\n            <div>').concat(l,"</div>\n            <script>\n              window.onload = function() {\n                window.print();\n              };\n            <\/script>\n          </body>\n        </html>\n      ")),i.document.close()}catch(t){alert("Failed to print: "+t.message)}})(t._id),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded",children:"Print"}),(0,gp.jsx)("button",{onClick:()=>(e=>{l(e._id),d({fee:e.fee,selectionOption:e.selectionOption,mlsFeeTaxApplicable:e.mlsFeeTaxApplicable,postToAP:e.postToAP})})(t),className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-3 rounded",children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this MLS fee?"))try{await Oj.delete("/mls-fees/".concat(t)),n(e.filter((e=>e._id!==t)))}catch(r){alert("Error deleting entry: "+r.message)}})(t._id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Delete"})]})})]})},t._id)))})]})]})},ZE=["_id","__v","createdAt","updatedAt"],eT=()=>{const e=Pu(),{id:n}=Ou(),[r,a]=(0,t.useState)({ARCommissionEarned:"",APGeneralCommissionExpense:"",AROtherDebit:"",unpaidFileTrustReceivable:"",commissionReceivablePayable:"",heldFundsReceivableAgent:"",heldFundsPayableAgent:"",suspense:"",unpaidExpensesManagement:"",unpaidExpensesNonMgmt:"",payrollAgent:"",agentDisbursement:!1}),[s,o]=(0,t.useState)(!0);(0,t.useEffect)((()=>{i()}),[n]);const i=async()=>{try{const e=await Oj.get("/ledger/".concat(n));if(e.data){const t=e.data,{_id:n,__v:r,createdAt:s,updatedAt:o}=t,i=yp(t,ZE);a(i)}o(!1)}catch(e){$p.error("Failed to fetch ledger entry"),o(!1)}},l=e=>{const{name:t,value:n,type:r,checked:s}=e.target;a((e=>J(J({},e),{},{[t]:"checkbox"===r?s:n})))};return s?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"text-center py-4",children:"Loading..."})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit General Ledger Account"}),(0,gp.jsx)("button",{onClick:()=>e("/ledger-db"),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 focus:outline-none",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o(!0);try{console.log("Submitting form data:",r);const t=await Oj.put("/ledger/".concat(n),r);console.log("Server response:",t.data),$p.success("Ledger entry updated successfully!"),await new Promise((e=>setTimeout(e,1e3))),e("/ledger-db")}catch(a){console.error("Submission error:",a),$p.error(a.message||"Failed to update ledger entry")}finally{o(!1)}},className:"space-y-4",children:[[{label:"A/R - Commission Earned",name:"ARCommissionEarned"},{label:"A/P - General & Commission Expense",name:"APGeneralCommissionExpense"},{label:"A/R - Other Debit",name:"AROtherDebit"},{label:"Unpaid File Trust Receivable",name:"unpaidFileTrustReceivable"},{label:"Commission Receivable Payable",name:"commissionReceivablePayable"},{label:"Held Funds Receivable (Agent)",name:"heldFundsReceivableAgent"},{label:"Held Funds Payable (Agent)",name:"heldFundsPayableAgent"},{label:"Suspense",name:"suspense"},{label:"Unpaid Expenses - Management",name:"unpaidExpensesManagement"},{label:"Unpaid Expenses - Non Mgmt",name:"unpaidExpensesNonMgmt"},{label:"Payroll - Agent",name:"payrollAgent"}].map((e=>(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label,(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"text",id:e.name,name:e.name,value:r[e.name],onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700",required:!0})]},e.name))),(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",id:"agentDisbursement",name:"agentDisbursement",checked:r.agentDisbursement,onChange:l,className:"h-4 w-4 text-blue-900 focus:ring-blue-700 border-gray-300 rounded"}),(0,gp.jsx)("label",{htmlFor:"agentDisbursement",className:"ml-2 block text-sm text-gray-700",children:"Agent Disbursement"})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white font-medium ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-900 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-700"),children:s?"Updating...":"Update"})})]})]})]})},tT=()=>{const{id:e}=Ou(),n=Pu(),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)({lastListing:"",lastTrade:"",compassDirection:"",cdaAddress:"",multipleOffices:"No",mainOfficeNumber:"",hstNumber:"",payrollNumber:"",expStmtAddress:"",openingBalanceFormat:""});(0,t.useEffect)((()=>{(async()=>{try{const t=await Oj.get("/misc-settings/".concat(e)),n=await Oj.get("/trades");let r=0;n.data&&n.data.length>0&&(r=Math.max(...n.data.map((e=>e.tradeNumber||0))));const a=t.data.lastTrade||0,s=Math.max(a,r);o(J(J({},t.data),{},{lastTrade:s.toString()}))}catch(t){$p.error("Failed to fetch miscellaneous settings"),console.error(t)}finally{a(!1)}})()}),[e]);const i=e=>{const{name:t,value:n}=e.target;o((e=>J(J({},e),{},{[t]:n})))};return r?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})]}):(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Miscellaneous Settings"}),(0,gp.jsx)("button",{onClick:()=>n("/miscellaneous-db"),className:"text-gray-600 hover:text-gray-800",children:"\u2190 Back"})]}),(0,gp.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await Oj.put("/misc-settings/".concat(e),s),$p.success("Miscellaneous settings updated successfully!"),n("/miscellaneous-db")}catch(r){$p.error("Failed to update miscellaneous settings"),console.error(r)}},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[(0,gp.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Listing"}),(0,gp.jsx)("input",{type:"number",name:"lastListing",value:s.lastListing,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Last Trade"}),(0,gp.jsx)("input",{type:"number",name:"lastTrade",value:s.lastTrade,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}),(0,gp.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Should reflect the current highest trade number from the database"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Compass Direction"}),(0,gp.jsxs)("select",{name:"compassDirection",value:s.compassDirection,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"CDA Address"}),(0,gp.jsxs)("select",{name:"cdaAddress",value:s.cdaAddress,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Multiple Offices"}),(0,gp.jsxs)("select",{name:"multipleOffices",value:s.multipleOffices,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Main Office Number"}),(0,gp.jsx)("input",{type:"number",name:"mainOfficeNumber",value:s.mainOfficeNumber,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"HST Number"}),(0,gp.jsx)("input",{type:"number",name:"hstNumber",value:s.hstNumber,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Payroll Number"}),(0,gp.jsx)("input",{type:"number",name:"payrollNumber",value:s.payrollNumber,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Expense Statement Address"}),(0,gp.jsxs)("select",{name:"expStmtAddress",value:s.expStmtAddress,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Opening Balance Format"}),(0,gp.jsxs)("select",{name:"openingBalanceFormat",value:s.openingBalanceFormat,onChange:i,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",children:[(0,gp.jsx)("option",{value:"Lorem Ipsum 1",children:"Lorem Ipsum 1"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 2",children:"Lorem Ipsum 2"}),(0,gp.jsx)("option",{value:"Lorem Ipsum 3",children:"Lorem Ipsum 3"})]})]})]}),(0,gp.jsx)("div",{className:"flex items-center justify-end",children:(0,gp.jsx)("button",{type:"submit",className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Save Changes"})})]})]})})]})},nT=()=>{const e=Pu();return(0,gp.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,gp.jsx)(ix,{})," ",(0,gp.jsxs)("div",{className:"flex-grow p-4 sm:p-6 md:p-8",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>e("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("header",{className:"mb-6 md:mb-8",children:(0,gp.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Listing Information Database"})}),(0,gp.jsx)("main",{children:(0,gp.jsx)(zE,{showAdminActions:!0})})]})]})},rT=e=>{let{formData:n,setFormData:r,handleSubmit:a,fetchNextEmployeeNo:s,combinedFormData:o,onTabChange:i}=e;const[l,c]=(0,t.useState)({employeeNo:"",firstName:"",middleName:"",lastName:"",legalName:"",nickname:"",spouseName:"",status:"",gender:"",streetNumber:"",streetName:"",unitNumber:"",city:"",province:"",postalCode:"",email:"",website:"",homePhone:"",cellPhone:"",fax:"",birthDate:"",startDate:"",contactAnniversary:"",franchiseAnniversary:"",terminationDate:"",lastPayDate:"",bondExpiryDate:"",incorporatedDate:"",unincorporatedDate:""});(0,t.useEffect)((()=>{if(o.basicInfo&&Object.keys(o.basicInfo).length>0)c(o.basicInfo);else{const e=async()=>{const e=await s();c((t=>J(J({},t),{},{employeeNo:e})))};e()}}),[o.basicInfo]);const d=e=>{const{name:t,value:n}=e.target;c((e=>J(J({},e),{},{[t]:n})))};return(0,t.useEffect)((()=>{const e=setTimeout((()=>{Object.keys(l).length>0&&r(l)}),500);return()=>clearTimeout(e)}),[l]),(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Basic Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee #"}),(0,gp.jsx)("input",{type:"text",name:"employeeNo",value:l.employeeNo||"",className:"w-full p-2 bg-gray-100 border rounded-md",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:l.firstName||"",onChange:d,className:"w-full p-2 border rounded-md",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Name"}),(0,gp.jsx)("input",{type:"text",name:"middleName",value:l.middleName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:l.lastName||"",onChange:d,className:"w-full p-2 border rounded-md",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Name"}),(0,gp.jsx)("input",{type:"text",name:"legalName",value:l.legalName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),(0,gp.jsx)("input",{type:"text",name:"nickname",value:l.nickname||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Name"}),(0,gp.jsx)("input",{type:"text",name:"spouseName",value:l.spouseName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,gp.jsxs)("select",{name:"status",value:l.status||"",onChange:d,className:"w-full p-2 border rounded-md",children:[(0,gp.jsx)("option",{value:"",children:"Select Status"}),(0,gp.jsx)("option",{value:"Active",children:"Active"}),(0,gp.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,gp.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,gp.jsx)("option",{value:"Terminated",children:"Terminated"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,gp.jsxs)("select",{name:"gender",value:l.gender||"",onChange:d,className:"w-full p-2 border rounded-md",children:[(0,gp.jsx)("option",{value:"",children:"Select Gender"}),(0,gp.jsx)("option",{value:"Male",children:"Male"}),(0,gp.jsx)("option",{value:"Female",children:"Female"}),(0,gp.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Contact Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street #"}),(0,gp.jsx)("input",{type:"text",name:"streetNumber",value:l.streetNumber||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name"}),(0,gp.jsx)("input",{type:"text",name:"streetName",value:l.streetName||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit #"}),(0,gp.jsx)("input",{type:"text",name:"unitNumber",value:l.unitNumber||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:l.city||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:l.province||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:l.postalCode||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"email",name:"email",value:l.email||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,gp.jsx)("input",{type:"text",name:"website",value:l.website||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Home Phone"}),(0,gp.jsx)("input",{type:"tel",name:"homePhone",value:l.homePhone||"",onChange:e=>gE(e,c),className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone"}),(0,gp.jsx)("input",{type:"tel",name:"cellPhone",value:l.cellPhone||"",onChange:e=>gE(e,c),className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fax"}),(0,gp.jsx)("input",{type:"tel",name:"fax",value:l.fax||"",onChange:e=>gE(e,c),className:"w-full p-2 border rounded-md"})]})]}),(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Date"}),(0,gp.jsx)("input",{type:"date",name:"birthDate",value:l.birthDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,gp.jsx)("input",{type:"date",name:"startDate",value:l.startDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Anniversary"}),(0,gp.jsx)("input",{type:"date",name:"contactAnniversary",value:l.contactAnniversary||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Franchise Anniversary"}),(0,gp.jsx)("input",{type:"date",name:"franchiseAnniversary",value:l.franchiseAnniversary||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Termination Date"}),(0,gp.jsx)("input",{type:"date",name:"terminationDate",value:l.terminationDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Pay Date"}),(0,gp.jsx)("input",{type:"date",name:"lastPayDate",value:l.lastPayDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bond Expiry Date"}),(0,gp.jsx)("input",{type:"date",name:"bondExpiryDate",value:l.bondExpiryDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incorporated Date"}),(0,gp.jsx)("input",{type:"date",name:"incorporatedDate",value:l.incorporatedDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unincorporated Date"}),(0,gp.jsx)("input",{type:"date",name:"unincorporatedDate",value:l.unincorporatedDate||"",onChange:d,className:"w-full p-2 border rounded-md"})]})]}),(0,gp.jsx)("div",{className:"flex justify-end"})]})},aT=e=>{var n,r;let{licenses:a,setLicenses:s,handleSubmit:o,combinedFormData:i,setCombinedFormData:l,setActiveTab:c}=e;const[d,u]=(0,t.useState)((null===(n=i.basicInfo)||void 0===n?void 0:n.hstNumber)||"");(0,t.useEffect)((()=>{var e;a&&0!==a.length||!s||s([{licenseNumber:"",licenseType:"",issueDate:"",expiryDate:"",status:"Active"}]),i.licenseInfo&&i.licenseInfo.length>0&&s(i.licenseInfo),void 0!==(null===(e=i.basicInfo)||void 0===e?void 0:e.hstNumber)&&u(i.basicInfo.hstNumber)}),[i.licenseInfo,null===(r=i.basicInfo)||void 0===r?void 0:r.hstNumber]);const m=(e,t,n)=>{const r=[...a];r[e][t]=n,s(r)};return(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Additional Information"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST #"}),(0,gp.jsx)("input",{type:"text",value:d,onChange:e=>{u(e.target.value),l((t=>J(J({},t),{},{basicInfo:J(J({},t.basicInfo),{},{hstNumber:e.target.value})})))},className:"w-full p-2 border rounded-md"})]})}),(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"License Information"}),a.map(((e,t)=>(0,gp.jsx)("div",{className:"mb-8 p-4 border rounded-lg",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Number"}),(0,gp.jsx)("input",{type:"text",value:e.licenseNumber,onChange:e=>m(t,"licenseNumber",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"License Type"}),(0,gp.jsxs)("select",{value:e.licenseType,onChange:e=>m(t,"licenseType",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,gp.jsx)("option",{value:"",children:"Select License Type"}),(0,gp.jsx)("option",{value:"Real Estate Agent",children:"Real Estate Agent"}),(0,gp.jsx)("option",{value:"Broker",children:"Broker"}),(0,gp.jsx)("option",{value:"Property Manager",children:"Property Manager"}),(0,gp.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Date"}),(0,gp.jsx)("input",{type:"date",value:e.issueDate,onChange:e=>m(t,"issueDate",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,gp.jsx)("input",{type:"date",value:e.expiryDate,onChange:e=>m(t,"expiryDate",e.target.value),className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,gp.jsxs)("select",{value:e.status,onChange:e=>m(t,"status",e.target.value),className:"w-full p-2 border rounded-md",children:[(0,gp.jsx)("option",{value:"Active",children:"Active"}),(0,gp.jsx)("option",{value:"Expired",children:"Expired"}),(0,gp.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,gp.jsx)("option",{value:"Pending",children:"Pending"})]})]})]})},t))),(0,gp.jsx)("div",{className:"flex justify-between mt-4",children:(0,gp.jsx)("button",{type:"button",onClick:()=>{s([...a,{licenseNumber:"",licenseType:"",issueDate:"",expiryDate:"",status:"Active"}])},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add License"})})]})},sT=e=>{let{employeeNo:n="",payrollData:r={},onSubmit:a=()=>{}}=e;const[s,o]=(0,t.useState)({employeeNo:n,position:"",hourlyRate:"",hoursWorked:"",grossPay:"",deductions:"",netPay:""});(0,t.useEffect)((()=>{o((e=>J(J({},e),{},{employeeNo:n})))}),[n]),(0,t.useEffect)((()=>{r&&Object.keys(r).length>0&&o((e=>J(J({},e),{},{position:r.position||"",hourlyRate:r.hourlyRate?r.hourlyRate.toString():"",hoursWorked:r.hoursWorked?r.hoursWorked.toString():"",grossPay:r.grossPay?r.grossPay.toString():"",deductions:r.deductions?r.deductions.toString():"",netPay:r.netPay?r.netPay.toString():""})))}),[r]);const i=e=>{const{name:t,value:n}=e.target;o((e=>J(J({},e),{},{[t]:n}))),a(J(J({},s),{},{[t]:n}))};return(0,gp.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Payroll Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Employee No"}),(0,gp.jsx)("input",{type:"text",name:"employeeNo",value:s.employeeNo,className:"w-full p-2 bg-gray-100 border rounded-md",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Position"}),(0,gp.jsx)("input",{type:"text",name:"position",value:s.position,onChange:i,className:"w-full p-2 border rounded-md"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Hourly Rate"}),(0,gp.jsx)("input",{type:"number",name:"hourlyRate",value:s.hourlyRate,onChange:i,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Hours Worked"}),(0,gp.jsx)("input",{type:"number",name:"hoursWorked",value:s.hoursWorked,onChange:i,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Gross Pay"}),(0,gp.jsx)("input",{type:"number",name:"grossPay",value:s.grossPay,onChange:i,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Deductions"}),(0,gp.jsx)("input",{type:"number",name:"deductions",value:s.deductions,onChange:i,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-gray-700 text-sm font-medium mb-2",children:"Net Pay"}),(0,gp.jsx)("input",{type:"number",name:"netPay",value:s.netPay,onChange:i,className:"w-full p-2 border rounded-md",step:"0.01",min:"0"})]})]}),(0,gp.jsx)("div",{className:"flex justify-end"})]})},oT=[{value:"flatFee",label:"Flat Fee"},{value:"garnishment",label:"Garnishment"},{value:"plan250",label:"Plan 250"},{value:"plan500",label:"Plan 500"},{value:"plan9010",label:"Plan 90/10"},{value:"plan955",label:"Plan 95/5"},{value:"plan8515",label:"Plan 85/15"},{value:"plan5050",label:"Plan 50/50"},{value:"plan8020",label:"Plan 80/20"},{value:"plan150",label:"Plan 150"},{value:"buyerRebate",label:"Buyer Rebate"},{value:"noFee",label:"No Fee"}],iT=e=>{let{selectedFee:n,setSelectedFee:r,handleSubmit:a,combinedFormData:s,onSave:o,isLoading:i=!1}=e;(0,t.useEffect)((()=>{s.feeInfo&&r(s.feeInfo)}),[s.feeInfo]);const l=e=>{r(e.target.value),a(e.target.value)};return(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-xl font-bold mb-6",children:"Fee Information"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:oT.map((e=>(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"radio",id:e.value,name:"feeOption",value:e.value,checked:n===e.value,onChange:l,className:"h-5 w-5 text-blue-900"}),(0,gp.jsx)("label",{htmlFor:e.value,className:"ml-2 text-gray-700",children:e.label})]},e.value)))}),(0,gp.jsx)("div",{className:"flex justify-end",children:(0,gp.jsx)("button",{onClick:o,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:i?"Saving...":"Save Agent Information"})})]})},lT=e=>{let{agent:n,onClose:r,onUpdate:a}=e;const[s,o]=(0,t.useState)({basicInfo:{},licenseInfo:[],payroll:{},feeInfo:""}),[i,l]=(0,t.useState)("info1"),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)([]),[x,f]=(0,t.useState)("");(0,t.useEffect)((()=>{n&&(o({basicInfo:n.basicInfo||n,licenseInfo:n.licenseInfo||[],payroll:n.payroll||{},feeInfo:n.feeInfo||""}),p(n.licenseInfo||[]),f(n.feeInfo||""))}),[n]);const g=()=>{r()};return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-4xl w-full relative max-h-[95vh] overflow-hidden",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[(0,gp.jsxs)("h2",{className:"text-2xl font-bold text-blue-900",children:["Edit Agent: #",n.employeeNo]}),(0,gp.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700",onClick:g,children:"\xd7"})]}),(0,gp.jsx)("div",{className:"flex space-x-1 mb-6 border-b",children:[{id:"info1",label:"Info 1"},{id:"info2",label:"Info 2"},{id:"payroll",label:"Payroll"},{id:"fee",label:"Fee"}].map((e=>(0,gp.jsx)("button",{onClick:()=>l(e.id),className:"px-4 py-2 rounded-t-lg font-medium transition-colors ".concat(i===e.id?"bg-blue-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.label},e.id)))}),u&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),(0,gp.jsxs)("div",{className:"overflow-y-auto max-h-[60vh] pr-2",children:["info1"===i&&(0,gp.jsx)(rT,{formData:s.basicInfo,setFormData:e=>o((t=>J(J({},t),{},{basicInfo:e}))),handleSubmit:e=>{o((t=>J(J({},t),{},{basicInfo:e})))},combinedFormData:s,fetchNextEmployeeNo:async()=>n.employeeNo}),"info2"===i&&(0,gp.jsx)(aT,{licenses:s.licenseInfo,setLicenses:e=>{o((t=>J(J({},t),{},{licenseInfo:e}))),p(e)},handleSubmit:e=>{o((t=>J(J({},t),{},{licenseInfo:e}))),p(e)},combinedFormData:s,setCombinedFormData:o,setActiveTab:l}),"payroll"===i&&(0,gp.jsx)(sT,{employeeNo:n.employeeNo,payrollData:s.payroll,onSubmit:e=>{o((t=>J(J({},t),{},{payroll:e})))}}),"fee"===i&&(0,gp.jsx)(iT,{selectedFee:s.feeInfo,setSelectedFee:e=>{o((t=>J(J({},t),{},{feeInfo:e}))),f(e)},handleSubmit:e=>{o((t=>J(J({},t),{},{feeInfo:e}))),f(e)},combinedFormData:s})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 mt-6 pt-4 border-t",children:[(0,gp.jsx)("button",{onClick:g,className:"px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",disabled:c,children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{d(!0),m(""),console.log("Current combinedFormData:",JSON.stringify(s,null,2));try{var e,t;const o=s.basicInfo,i=[];if(null!==o&&void 0!==o&&null!==(e=o.firstName)&&void 0!==e&&e.trim()||i.push("First Name"),null!==o&&void 0!==o&&null!==(t=o.lastName)&&void 0!==t&&t.trim()||i.push("Last Name"),null!==o&&void 0!==o&&o.employeeNo||i.push("Employee Number"),i.length>0)return m("Missing required fields: ".concat(i.join(", "),". Please complete the basic information form first.")),void d(!1);const l={employeeNo:Number(o.employeeNo),firstName:o.firstName.trim(),middleName:o.middleName||"",lastName:o.lastName.trim(),legalName:o.legalName||"",nickname:o.nickname||"",spouseName:o.spouseName||"",gender:o.gender||"",email:o.email||"",website:o.website||"",homePhone:o.homePhone||"",cellPhone:o.cellPhone||"",fax:o.fax||"",streetNumber:o.streetNumber||"",streetName:o.streetName||"",unitNumber:o.unitNumber||"",city:o.city||"",province:o.province||"",postalCode:o.postalCode||"",hstNumber:o.hstNumber||"",dateOfBirth:o.birthDate||null,startDate:o.startDate||null,endDate:o.terminationDate||null,contactAnniversary:o.contactAnniversary||null,franchiseAnniversary:o.franchiseAnniversary||null,lastPayDate:o.lastPayDate||null,bondExpiryDate:o.bondExpiryDate||null,incorporatedDate:o.incorporatedDate||null,unincorporatedDate:o.unincorporatedDate||null,status:o.status||"Active",licenses:s.licenseInfo||[],payroll:s.payroll||{},feeInfo:s.feeInfo||""};console.log("Saving agent data:",JSON.stringify(l,null,2));const c=await Oj.put("/agents/".concat(n._id),l);console.log("Response from server:",JSON.stringify(c.data,null,2)),a&&(console.log("Calling onUpdate with:",JSON.stringify(c.data,null,2)),a(c.data)),r()}catch(l){var o,i;console.error("Error updating agent:",l),m((null===(o=l.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||"Error updating agent")}finally{d(!1)}},className:"px-6 py-2 bg-blue-900 text-white rounded hover:bg-blue-800 transition-colors disabled:opacity-50",disabled:c,children:c?"Saving...":"Save Changes"})]})]})}):null},cT=e=>{let{agent:n,onClose:r,onEdit:a,onDelete:s}=e;const[o,i]=(0,t.useState)(!1),[l,c]=(0,t.useState)(n);t.useEffect((()=>{n&&(console.log("Agent data in modal:",JSON.stringify(n,null,2)),c(n))}),[n]);const d=e=>e?new Date(e).toLocaleDateString():"";return l?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto p-6 relative",children:[(0,gp.jsxs)("div",{className:"flex gap-3 absolute top-4 right-4 z-10",children:[(0,gp.jsx)("button",{onClick:()=>i(!0),className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded shadow transition-colors",children:"Edit"}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 text-2xl px-2",style:{lineHeight:1},children:(0,gp.jsx)(dp,{})})]}),(0,gp.jsxs)("h1",{className:"text-2xl font-bold text-blue-900 mb-6 mt-8",children:["Agent Details: #",l.employeeNo]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Basic Information"}),(0,gp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Employee No"}),(0,gp.jsx)("div",{children:l.employeeNo||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"First Name"}),(0,gp.jsx)("div",{children:l.firstName||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Middle Name"}),(0,gp.jsx)("div",{children:l.middleName||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Last Name"}),(0,gp.jsx)("div",{children:l.lastName||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Legal Name"}),(0,gp.jsx)("div",{children:l.legalName||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Nickname"}),(0,gp.jsx)("div",{children:l.nickname||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Spouse Name"}),(0,gp.jsx)("div",{children:l.spouseName||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Gender"}),(0,gp.jsx)("div",{children:l.gender||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Status"}),(0,gp.jsx)("div",{children:l.status||""})]})]})]})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Contact Information"}),(0,gp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Street #"}),(0,gp.jsx)("div",{children:l.streetNumber||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Street Name"}),(0,gp.jsx)("div",{children:l.streetName||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Unit #"}),(0,gp.jsx)("div",{children:l.unitNumber||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"City"}),(0,gp.jsx)("div",{children:l.city||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Province"}),(0,gp.jsx)("div",{children:l.province||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Postal Code"}),(0,gp.jsx)("div",{children:l.postalCode||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Email"}),(0,gp.jsx)("div",{children:l.email||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Website"}),(0,gp.jsx)("div",{children:l.website||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"HST #"}),(0,gp.jsx)("div",{children:l.hstNumber||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Home Phone"}),(0,gp.jsx)("div",{children:l.homePhone||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Cell Phone"}),(0,gp.jsx)("div",{children:l.cellPhone||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Fax"}),(0,gp.jsx)("div",{children:l.fax||""})]})]})]})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Date of Birth"}),(0,gp.jsx)("div",{children:d(l.dateOfBirth)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Start Date"}),(0,gp.jsx)("div",{children:d(l.startDate)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"End Date"}),(0,gp.jsx)("div",{children:d(l.endDate)})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Contact Anniversary"}),(0,gp.jsx)("div",{children:d(l.contactAnniversary)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Franchise Anniversary"}),(0,gp.jsx)("div",{children:d(l.franchiseAnniversary)})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Last Pay Date"}),(0,gp.jsx)("div",{children:d(l.lastPayDate)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Bond Expiry Date"}),(0,gp.jsx)("div",{children:d(l.bondExpiryDate)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Incorporated Date"}),(0,gp.jsx)("div",{children:d(l.incorporatedDate)})]})]}),(0,gp.jsx)("div",{className:"grid grid-cols-1 gap-y-4 mt-4",children:(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Unincorporated Date"}),(0,gp.jsx)("div",{children:d(l.unincorporatedDate)})]})})]})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"License Information"}),(0,gp.jsx)("div",{className:"border-t border-gray-200 pt-4",children:l.licenses&&l.licenses.length>0?l.licenses.map(((e,t)=>(0,gp.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"License Type"}),(0,gp.jsx)("div",{children:e.licenseType||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"License Number"}),(0,gp.jsx)("div",{children:e.licenseNumber||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Status"}),(0,gp.jsx)("div",{children:e.status||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Issue Date"}),(0,gp.jsx)("div",{children:d(e.issueDate)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Expiry Date"}),(0,gp.jsx)("div",{children:d(e.expiryDate)})]})]})]},t))):(0,gp.jsx)("div",{className:"text-gray-500 italic",children:"No license information available"})})]}),l.feeInfo&&(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Fee Information"}),(0,gp.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,gp.jsx)("div",{className:"grid grid-cols-1 gap-y-4",children:(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Fee Plan"}),(0,gp.jsxs)("div",{children:["flatFee"===l.feeInfo&&"Flat Fee","garnishment"===l.feeInfo&&"Garnishment","plan250"===l.feeInfo&&"Plan 250","plan500"===l.feeInfo&&"Plan 500","plan9010"===l.feeInfo&&"Plan 90/10","plan955"===l.feeInfo&&"Plan 95/5","plan8515"===l.feeInfo&&"Plan 85/15","plan5050"===l.feeInfo&&"Plan 50/50","plan8020"===l.feeInfo&&"Plan 80/20","plan150"===l.feeInfo&&"Plan 150","buyerRebate"===l.feeInfo&&"Buyer Rebate","noFee"===l.feeInfo&&"No Fee",""===l.feeInfo&&"No fee plan selected"]})]})})})]}),l.payroll&&(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Payroll Information"}),(0,gp.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Position"}),(0,gp.jsx)("div",{children:l.payroll.position||""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Hourly Rate"}),(0,gp.jsx)("div",{children:l.payroll.hourlyRate?"$".concat(l.payroll.hourlyRate):""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Hours Worked"}),(0,gp.jsx)("div",{children:l.payroll.hoursWorked||""})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-y-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Gross Pay"}),(0,gp.jsx)("div",{children:l.payroll.grossPay?"$".concat(l.payroll.grossPay):""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Deductions"}),(0,gp.jsx)("div",{children:l.payroll.deductions?"$".concat(l.payroll.deductions):""})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"text-gray-600",children:"Net Pay"}),(0,gp.jsx)("div",{children:l.payroll.netPay?"$".concat(l.payroll.netPay):""})]})]})]})]}),(0,gp.jsx)("div",{className:"mt-8 flex justify-end space-x-4",children:(0,gp.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition",children:"Close"})}),o&&(0,gp.jsx)(lT,{agent:l,onClose:()=>i(!1),onUpdate:e=>{i(!1),c(e)}})]})}):null},dT=["_id"],uT=()=>{var e;const[n,r]=(0,t.useState)("list"),[a,s]=(0,t.useState)([]),[o,i]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[m,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),[f,g]=(0,t.useState)({basicInfo:{},licenseInfo:[],payrollInfo:{}}),[b,y]=(0,t.useState)(!1),[v,N]=(0,t.useState)(null),[j,w]=(0,t.useState)(""),S=(0,t.useCallback)((e=>{g((t=>J(J({},t),{},{basicInfo:e})))}),[]);(0,t.useEffect)((()=>{C()}),[]);const C=async()=>{try{i(!0);const e=await Oj.get("/agents");s(e.data),u(e.data),i(!1)}catch(e){console.error("Error fetching agents:",e),i(!1)}},k=()=>{if(!l.trim()){const e=[...a].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));return void u(e)}const e=l.toLowerCase().trim(),t=a.filter((t=>{var n,r;const a=t.employeeNo.toString().includes(e.replace("#","")),s=null===(n=t.firstName)||void 0===n?void 0:n.toLowerCase().includes(e),o=null===(r=t.lastName)||void 0===r?void 0:r.toLowerCase().includes(e),i="".concat(t.firstName||""," ").concat(t.lastName||"").toLowerCase().includes(e),l="".concat(t.lastName||""," ").concat(t.firstName||"").toLowerCase().includes(e);return a||s||o||i||l})).sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));u(t)},E=()=>{y(!1),N(null)};return(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"border-b border-gray-200",children:(0,gp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,gp.jsxs)("div",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("list"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("list"),children:"List"}),(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info1"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info1"),children:"Info 1"}),(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info2"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info2"),children:"Info 2"}),(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("payroll"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("payroll"),children:"Payroll"}),(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("fee"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("fee"),children:"Fee"})]})})}),(0,gp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["list"===n&&(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gp.jsx)("div",{className:"flex-1 max-w-md",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",placeholder:"Search by agent name or employee number...",value:l,onChange:e=>{const t=e.target.value;if(c(t),!t.trim()){const e=[...a].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));return void u(e)}const n=t.toLowerCase().trim(),r=a.filter((e=>{var t,r;const a=e.employeeNo.toString().includes(n.replace("#","")),s=null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(n),o=null===(r=e.lastName)||void 0===r?void 0:r.toLowerCase().includes(n),i="".concat(e.firstName||""," ").concat(e.lastName||"").toLowerCase().includes(n),l="".concat(e.lastName||""," ").concat(e.firstName||"").toLowerCase().includes(n);return a||s||o||i||l})).sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));u(r)},onKeyPress:e=>{"Enter"===e.key&&k()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,gp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,gp.jsx)(cp,{className:"h-4 w-4 text-gray-400"})})]})}),(0,gp.jsx)("button",{onClick:k,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,gp.jsx)("button",{onClick:()=>{c(""),u([...a].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo))))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]}),l&&(0,gp.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Showing ",d.length," of ",a.length," agents"]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Agent #"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"First Name"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Last Name"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.length>0?d.sort(((e,t)=>Number(String(e.employeeNo).replace(/\D/g,""))-Number(String(t.employeeNo).replace(/\D/g,"")))).map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>{N(e),y(!0)},children:[(0,gp.jsxs)("td",{className:"py-3 px-4",children:["#",e.employeeNo]}),(0,gp.jsx)("td",{className:"py-3 px-4",children:e.firstName}),(0,gp.jsx)("td",{className:"py-3 px-4",children:e.lastName}),(0,gp.jsx)("td",{className:"py-3 px-4",children:(0,gp.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.status?"bg-green-100 text-green-800":"Inactive"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})})]},e._id))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-500",children:l?"No agents found matching your search.":"No agents available."})})})]})})]}),"info1"===n&&(0,gp.jsx)(rT,{formData:f.basicInfo,setFormData:S,handleSubmit:e=>{g((t=>J(J({},t),{},{basicInfo:e}))),r("info2")},fetchNextEmployeeNo:async()=>{try{return(await Oj.get("/agents/next-employee-no")).data.nextEmployeeNo}catch(e){return console.error("Error fetching next employee number:",e),100}},combinedFormData:f,setCombinedFormData:g,setActiveTab:r,onTabChange:e=>{}}),"info2"===n&&(0,gp.jsx)(aT,{licenses:f.licenseInfo,setLicenses:e=>g((t=>J(J({},t),{},{licenseInfo:e}))),handleSubmit:e=>{g((t=>J(J({},t),{},{licenseInfo:e}))),r("payroll")},combinedFormData:f,setCombinedFormData:g,setActiveTab:r}),"payroll"===n&&(0,gp.jsx)(sT,{employeeNo:(null===(e=f.basicInfo)||void 0===e?void 0:e.employeeNo)||"",payrollData:f.payrollInfo||{},onSubmit:e=>{g((t=>J(J({},t),{},{payrollInfo:e}))),r("fee")}}),"fee"===n&&(0,gp.jsx)(iT,{selectedFee:f.feeInfo,setSelectedFee:e=>g((t=>J(J({},t),{},{feeInfo:e}))),handleSubmit:e=>{const t=J(J({},f),{},{feeInfo:e});g(t)},combinedFormData:f,onSave:async()=>{var e,t,n,a,s;if(null===(e=f.basicInfo)||void 0===e||null===(t=e.firstName)||void 0===t||!t.trim()||null===(n=f.basicInfo)||void 0===n||null===(a=n.lastName)||void 0===a||!a.trim()||null===(s=f.basicInfo)||void 0===s||!s.employeeNo)return $p.error("Please complete the basic information (Info 1) form before saving. First Name, Last Name, and Employee Number are required."),void r("info1");try{i(!0),await(async e=>{try{var t,n;i(!0),console.log("Data being passed to saveAgentData:",e),console.log("Basic info:",e.basicInfo);const{basicInfo:r,licenseInfo:a,payrollInfo:s,feeInfo:o}=e,l=Array.isArray(a)?a.map((e=>{let{_id:t}=e;return J({},yp(e,dT))})):[],c=s?{position:s.position||"",hourlyRate:s.hourlyRate?Number(s.hourlyRate):0,hoursWorked:s.hoursWorked?Number(s.hoursWorked):0,grossPay:s.grossPay?Number(s.grossPay):0,deductions:s.deductions?Number(s.deductions):0,netPay:s.netPay?Number(s.netPay):0}:null,d=o||"",u=[];if(null!==r&&void 0!==r&&null!==(t=r.firstName)&&void 0!==t&&t.trim()||u.push("First Name"),null!==r&&void 0!==r&&null!==(n=r.lastName)&&void 0!==n&&n.trim()||u.push("Last Name"),null!==r&&void 0!==r&&r.employeeNo||u.push("Employee Number"),u.length>0){const e="Missing required fields: ".concat(u.join(", "),". Please complete the basic information form first.");throw $p.error(e),i(!1),new Error("Missing required fields: ".concat(u.join(", ")))}const h={employeeNo:Number(r.employeeNo),firstName:r.firstName.trim(),middleName:r.middleName||"",lastName:r.lastName.trim(),legalName:r.legalName||"",nickname:r.nickname||"",spouseName:r.spouseName||"",gender:r.gender||"",email:r.email||"",website:r.website||"",homePhone:r.homePhone||"",cellPhone:r.cellPhone||"",fax:r.fax||"",streetNumber:r.streetNumber||"",streetName:r.streetName||"",unitNumber:r.unitNumber||"",city:r.city||"",province:r.province||"",postalCode:r.postalCode||"",hstNumber:r.hstNumber||"",dateOfBirth:r.birthDate||null,startDate:r.startDate||null,endDate:r.terminationDate||null,contactAnniversary:r.contactAnniversary||null,franchiseAnniversary:r.franchiseAnniversary||null,lastPayDate:r.lastPayDate||null,bondExpiryDate:r.bondExpiryDate||null,incorporatedDate:r.incorporatedDate||null,unincorporatedDate:r.unincorporatedDate||null,status:r.status||"Active",licenses:l,payroll:c,feeInfo:d};let x;return console.log("Final agent data being sent to server:",h),x=m&&p?await Oj.put("/agents/".concat(p),h):await Oj.post("/agents",h),i(!1),x.data}catch(r){throw console.error("Error saving agent data:",r),r.message.includes("Missing required fields")?(i(!1),r):($p.error("Failed to save agent information. Please try again."),i(!1),r)}})(f),$p.success("Agent information saved successfully!"),r("list"),C()}catch(o){o.message.includes("Missing required fields")?r("info1"):$p.error("Error saving agent information. Please try again.")}finally{i(!1)}},isLoading:o})]}),b&&(0,gp.jsx)(cT,{agent:v,onClose:E,onEdit:e=>{console.log("onEdit called with updated agent:",JSON.stringify(e,null,2)),console.log("Current agents before update:",a.length),s((t=>{const n=t.map((t=>t._id===e._id?e:t));return console.log("Updated agents array:",n.length),n})),u((t=>{const n=t.map((t=>t._id===e._id?e:t));return console.log("Updated filtered agents array:",n.length),n})),N(e),console.log("Updated selectedAgent"),E()}})]})},mT=["licenses","payroll","feeInfo","_id","__v","createdAt","updatedAt"],hT=()=>{var e,n,r,a,s,o,i,l,c,d,u,m,h,p,x,f,g,b,y,v,N,j,w,S,C,k,E,T,A,I,D,P,O,L,R,F,_,M,B,U,H,z,V,q,W,Y;const[G,K]=(0,t.useState)([]),[X,$]=(0,t.useState)(!0),[Q,Z]=(0,t.useState)(""),[ee,te]=(0,t.useState)([]),[ne,re]=(0,t.useState)(null),[ae,se]=(0,t.useState)(!1),[oe,ie]=(0,t.useState)(!1),[le,ce]=(0,t.useState)({}),de=Pu();(0,t.useEffect)((()=>{ue()}),[]);const ue=async()=>{try{$(!0);const e=[...(await Oj.get("/agents")).data].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));K(e),te(e),$(!1)}catch(e){console.error("Error fetching agents:",e),$(!1)}},me=()=>{if(!Q.trim()){const e=[...G].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));return void te(e)}const e=Q.toLowerCase().trim(),t=G.filter((t=>{var n,r,a;const s=null===(n=t.employeeNo)||void 0===n?void 0:n.toString().includes(e.replace("#","")),o=null===(r=t.firstName)||void 0===r?void 0:r.toLowerCase().includes(e),i=null===(a=t.lastName)||void 0===a?void 0:a.toLowerCase().includes(e),l="".concat(t.firstName||""," ").concat(t.lastName||"").toLowerCase().includes(e),c="".concat(t.lastName||""," ").concat(t.firstName||"").toLowerCase().includes(e);return s||o||i||l||c})).sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));te(t)},he=(e,t)=>{const{name:n,value:r,type:a,checked:s}=e.target,o="checkbox"===a?s:r;ce((e=>J(J({},e),{},{[t]:J(J({},e[t]||{}),{},{[n]:o})})))},pe=(e,t,n)=>{const r=[...le.licenseInfo];r[e]=J(J({},r[e]),{},{[t]:n}),ce((e=>J(J({},e),{},{licenseInfo:r})))},xe=()=>{se(!1),re(null),ie(!1)},fe=e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(dm){return""}};return(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>de("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Agent Information Database"}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gp.jsx)("div",{className:"flex-1 max-w-md",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",placeholder:"Search by agent name or employee number...",value:Q,onChange:e=>{const t=e.target.value;if(Z(t),!t.trim()){const e=[...G].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));return void te(e)}const n=t.toLowerCase().trim(),r=G.filter((e=>{var t,r,a;const s=null===(t=e.employeeNo)||void 0===t?void 0:t.toString().includes(n.replace("#","")),o=null===(r=e.firstName)||void 0===r?void 0:r.toLowerCase().includes(n),i=null===(a=e.lastName)||void 0===a?void 0:a.toLowerCase().includes(n),l="".concat(e.firstName||""," ").concat(e.lastName||"").toLowerCase().includes(n),c="".concat(e.lastName||""," ").concat(e.firstName||"").toLowerCase().includes(n);return s||o||i||l||c})).sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo)));te(r)},onKeyPress:e=>{"Enter"===e.key&&me()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,gp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,gp.jsx)(cp,{className:"h-4 w-4 text-gray-400"})})]})}),(0,gp.jsx)("button",{onClick:me,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,gp.jsx)("button",{onClick:()=>{Z(""),te([...G].sort(((e,t)=>Number(e.employeeNo)-Number(t.employeeNo))))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]}),Q&&(0,gp.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Showing ",ee.length," of ",G.length," agents"]})]}),X?(0,gp.jsx)("p",{className:"text-center py-4",children:"Loading agents..."}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Agent #"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"First Name"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Last Name"}),(0,gp.jsx)("th",{className:"py-3 px-4 text-left font-medium",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"divide-y divide-gray-200",children:ee.length>0?ee.sort(((e,t)=>Number(String(e.employeeNo).replace(/\D/g,""))-Number(String(t.employeeNo).replace(/\D/g,"")))).map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{re(e),se(!0),ie(!1)})(e),children:[(0,gp.jsxs)("td",{className:"py-3 px-4",children:["#",e.employeeNo]}),(0,gp.jsx)("td",{className:"py-3 px-4",children:e.firstName}),(0,gp.jsx)("td",{className:"py-3 px-4",children:e.lastName}),(0,gp.jsx)("td",{className:"py-3 px-4",children:(0,gp.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Active"===e.status?"bg-green-100 text-green-800":"Inactive"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"N/A"})})]},e._id))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-500",children:Q?"No agents found matching your search.":"No agents available."})})})]})})]}),ae&&ne&&!oe&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold",children:"Agent Details"}),(0,gp.jsx)("button",{onClick:xe,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,gp.jsx)(cT,{agent:ne,onClose:xe,onEdit:()=>{ie(!0);const{licenses:e,payroll:t,feeInfo:n,_id:r,__v:a,createdAt:s,updatedAt:o}=ne,i=yp(ne,mT),l={};if(n&&"string"===typeof n){["flatFee","garnishment","plan250","plan500","plan9010","plan955","plan8515","plan5050","plan8020","plan150","buyerRebate","noFee"].forEach((e=>{l[e]=n===e}))}ce({basicInfo:i,licenseInfo:e||[],payrollInfo:t||{},feeInfo:l})},onDelete:async()=>{if(window.confirm("Are you sure you want to delete this agent?"))try{await Oj.delete("/agents/".concat(ne._id)),ue(),se(!1),alert("Agent deleted successfully!")}catch(e){console.error("Error deleting agent:",e),alert("Failed to delete agent")}}})]})}),ae&&oe&&le&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold",children:"Edit Agent"}),(0,gp.jsx)("button",{onClick:xe,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Basic Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent #"}),(0,gp.jsx)("input",{type:"text",name:"employeeNo",value:(null===(e=le.basicInfo)||void 0===e?void 0:e.employeeNo)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,gp.jsxs)("select",{name:"status",value:(null===(n=le.basicInfo)||void 0===n?void 0:n.status)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,gp.jsx)("option",{value:"Active",children:"Active"}),(0,gp.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,gp.jsx)("option",{value:"Pending",children:"Pending"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:(null===(r=le.basicInfo)||void 0===r?void 0:r.firstName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Middle Name"}),(0,gp.jsx)("input",{type:"text",name:"middleName",value:(null===(a=le.basicInfo)||void 0===a?void 0:a.middleName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:(null===(s=le.basicInfo)||void 0===s?void 0:s.lastName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,gp.jsx)("input",{type:"email",name:"email",value:(null===(o=le.basicInfo)||void 0===o?void 0:o.email)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:(null===(i=le.basicInfo)||void 0===i?void 0:i.address)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:(null===(l=le.basicInfo)||void 0===l?void 0:l.city)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:(null===(c=le.basicInfo)||void 0===c?void 0:c.province)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:(null===(d=le.basicInfo)||void 0===d?void 0:d.postalCode)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Legal Name"}),(0,gp.jsx)("input",{type:"text",name:"legalName",value:(null===(u=le.basicInfo)||void 0===u?void 0:u.legalName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nickname"}),(0,gp.jsx)("input",{type:"text",name:"nickname",value:(null===(m=le.basicInfo)||void 0===m?void 0:m.nickname)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Spouse Name"}),(0,gp.jsx)("input",{type:"text",name:"spouseName",value:(null===(h=le.basicInfo)||void 0===h?void 0:h.spouseName)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),(0,gp.jsxs)("select",{name:"gender",value:(null===(p=le.basicInfo)||void 0===p?void 0:p.gender)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,gp.jsx)("option",{value:"",children:"Select Gender"}),(0,gp.jsx)("option",{value:"Male",children:"Male"}),(0,gp.jsx)("option",{value:"Female",children:"Female"}),(0,gp.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,gp.jsx)("input",{type:"text",name:"website",value:(null===(x=le.basicInfo)||void 0===x?void 0:x.website)||"",onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Home Phone"}),(0,gp.jsx)("input",{type:"tel",name:"homePhone",value:(null===(f=le.basicInfo)||void 0===f?void 0:f.homePhone)||"",onChange:e=>gE(e,(e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce((e=>J(J({},e),{},{basicInfo:J(J({},e.basicInfo),t)})))})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cell Phone"}),(0,gp.jsx)("input",{type:"tel",name:"cellPhone",value:(null===(g=le.basicInfo)||void 0===g?void 0:g.cellPhone)||"",onChange:e=>gE(e,(e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce((e=>J(J({},e),{},{basicInfo:J(J({},e.basicInfo),t)})))})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fax"}),(0,gp.jsx)("input",{type:"tel",name:"fax",value:(null===(b=le.basicInfo)||void 0===b?void 0:b.fax)||"",onChange:e=>gE(e,(e=>{const t="function"===typeof e?e(le.basicInfo||{}):e;ce((e=>J(J({},e),{},{basicInfo:J(J({},e.basicInfo),t)})))})),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Birth Date"}),(0,gp.jsx)("input",{type:"date",name:"dateOfBirth",value:fe(null===(y=le.basicInfo)||void 0===y?void 0:y.dateOfBirth),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,gp.jsx)("input",{type:"date",name:"startDate",value:fe(null===(v=le.basicInfo)||void 0===v?void 0:v.startDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Termination Date"}),(0,gp.jsx)("input",{type:"date",name:"endDate",value:fe(null===(N=le.basicInfo)||void 0===N?void 0:N.endDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Anniversary"}),(0,gp.jsx)("input",{type:"date",name:"contactAnniversary",value:fe(null===(j=le.basicInfo)||void 0===j?void 0:j.contactAnniversary),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Franchise Anniversary"}),(0,gp.jsx)("input",{type:"date",name:"franchiseAnniversary",value:fe(null===(w=le.basicInfo)||void 0===w?void 0:w.franchiseAnniversary),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Pay Date"}),(0,gp.jsx)("input",{type:"date",name:"lastPayDate",value:fe(null===(S=le.basicInfo)||void 0===S?void 0:S.lastPayDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bond Expiry Date"}),(0,gp.jsx)("input",{type:"date",name:"bondExpiryDate",value:fe(null===(C=le.basicInfo)||void 0===C?void 0:C.bondExpiryDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Incorporated Date"}),(0,gp.jsx)("input",{type:"date",name:"incorporatedDate",value:fe(null===(k=le.basicInfo)||void 0===k?void 0:k.incorporatedDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unincorporated Date"}),(0,gp.jsx)("input",{type:"date",name:"unincorporatedDate",value:fe(null===(E=le.basicInfo)||void 0===E?void 0:E.unincorporatedDate),onChange:e=>he(e,"basicInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"License Information"}),(0,gp.jsxs)("div",{className:"space-y-4",children:[null===(T=le.licenseInfo)||void 0===T?void 0:T.map(((e,t)=>(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"License Type"}),(0,gp.jsx)("input",{type:"text",name:"licenseType",value:e.licenseType||"",onChange:e=>pe(t,"licenseType",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"License Number"}),(0,gp.jsx)("input",{type:"text",name:"licenseNumber",value:e.licenseNumber||"",onChange:e=>pe(t,"licenseNumber",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Expiry Date"}),(0,gp.jsx)("input",{type:"date",name:"expiryDate",value:fe(e.expiryDate),onChange:e=>pe(t,"expiryDate",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Date"}),(0,gp.jsx)("input",{type:"date",name:"issueDate",value:fe(e.issueDate),onChange:e=>pe(t,"issueDate",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,gp.jsxs)("select",{name:"status",value:e.status||"Active",onChange:e=>pe(t,"status",e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[(0,gp.jsx)("option",{value:"Active",children:"Active"}),(0,gp.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,gp.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),(0,gp.jsx)("div",{className:"col-span-3",children:(0,gp.jsx)("button",{onClick:()=>(e=>{const t=[...le.licenseInfo];t.splice(e,1),ce((e=>J(J({},e),{},{licenseInfo:t})))})(t),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Remove License"})})]},t))),(0,gp.jsx)("div",{className:"col-span-3",children:(0,gp.jsx)("button",{onClick:()=>{ce((e=>J(J({},e),{},{licenseInfo:[...e.licenseInfo,{licenseType:"",licenseNumber:"",issueDate:"",expiryDate:"",status:"Active"}]})))},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Add License"})})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Payroll Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,gp.jsx)("input",{type:"text",name:"position",value:(null===(A=le.payrollInfo)||void 0===A?void 0:A.position)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hourly Rate"}),(0,gp.jsx)("input",{type:"number",name:"hourlyRate",value:(null===(I=le.payrollInfo)||void 0===I?void 0:I.hourlyRate)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Hours Worked"}),(0,gp.jsx)("input",{type:"number",name:"hoursWorked",value:(null===(D=le.payrollInfo)||void 0===D?void 0:D.hoursWorked)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Gross Pay"}),(0,gp.jsx)("input",{type:"number",name:"grossPay",value:(null===(P=le.payrollInfo)||void 0===P?void 0:P.grossPay)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Deductions"}),(0,gp.jsx)("input",{type:"number",name:"deductions",value:(null===(O=le.payrollInfo)||void 0===O?void 0:O.deductions)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Pay"}),(0,gp.jsx)("input",{type:"number",name:"netPay",value:(null===(L=le.payrollInfo)||void 0===L?void 0:L.netPay)||"",onChange:e=>he(e,"payrollInfo"),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-3 border-b pb-2",children:"Fee Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Flat Fee"}),(0,gp.jsx)("input",{type:"checkbox",name:"flatFee",checked:(null===(R=le.feeInfo)||void 0===R?void 0:R.flatFee)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Garnishment"}),(0,gp.jsx)("input",{type:"checkbox",name:"garnishment",checked:(null===(F=le.feeInfo)||void 0===F?void 0:F.garnishment)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 250"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan250",checked:(null===(_=le.feeInfo)||void 0===_?void 0:_.plan250)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 500"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan500",checked:(null===(M=le.feeInfo)||void 0===M?void 0:M.plan500)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 9010"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan9010",checked:(null===(B=le.feeInfo)||void 0===B?void 0:B.plan9010)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 955"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan955",checked:(null===(U=le.feeInfo)||void 0===U?void 0:U.plan955)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 8515"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan8515",checked:(null===(H=le.feeInfo)||void 0===H?void 0:H.plan8515)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 50/50"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan5050",checked:(null===(z=le.feeInfo)||void 0===z?void 0:z.plan5050)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 80/20"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan8020",checked:(null===(V=le.feeInfo)||void 0===V?void 0:V.plan8020)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Plan 150"}),(0,gp.jsx)("input",{type:"checkbox",name:"plan150",checked:(null===(q=le.feeInfo)||void 0===q?void 0:q.plan150)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer Rebate"}),(0,gp.jsx)("input",{type:"checkbox",name:"buyerRebate",checked:(null===(W=le.feeInfo)||void 0===W?void 0:W.buyerRebate)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"No Fee"}),(0,gp.jsx)("input",{type:"checkbox",name:"noFee",checked:(null===(Y=le.feeInfo)||void 0===Y?void 0:Y.noFee)||!1,onChange:e=>he(e,"feeInfo"),className:"mt-1"})]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,gp.jsx)("button",{onClick:async()=>{try{const{basicInfo:e,licenseInfo:t,payrollInfo:n,feeInfo:r}=le;let a="";if(r){const e=["flatFee","garnishment","plan250","plan500","plan9010","plan955","plan8515","plan5050","plan8020","plan150","buyerRebate","noFee"];for(const t of e)if(!0===r[t]){a=t;break}}const s=J(J({},e),{},{licenses:t,payroll:n,feeInfo:a});await Oj.put("/agents/".concat(ne._id),s),ue(),ie(!1),se(!1),alert("Agent updated successfully!")}catch(e){console.error("Error updating agent:",e),alert("Failed to update agent")}},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:"Save Changes"}),(0,gp.jsx)("button",{onClick:()=>ie(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"})]})]})})]})},pT=()=>{const[e,n]=(0,t.useState)("main"),r=Pu();(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isFinanceAdmin")||r("/")}),[r]);const a=[{id:"journal-entry",title:"JOURNAL ENTRY",icon:Mh},{id:"disbursements-journals",title:"DISBURSEMENTS JOURNALS",icon:$h},{id:"trust-journal",title:"TRUST JOURNAL",icon:Mh},{id:"trade-ar-journal",title:"TRADE A/R JOURNAL",icon:Mh},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:rp},{id:"real-estate-trust-ledger",title:"REAL ESTATE TRUST LEDGER",icon:Mh},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:Zh},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:Mh},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:Qh},{id:"reconcile-real-estate-trust",title:"RECONCILING REAL ESTATE TRUST",icon:zh},{id:"reconcile-commission-trust",title:"RECONCILING COMMISSION TRUST",icon:zh},{id:"reconcile-general-account",title:"RECONCILING GENERAL ACCOUNT",icon:zh},{id:"accounts-receivable",title:"ACCOUNTS RECEIVABLE",icon:pp},{id:"agent-payment-info",title:"AGENT PAYMENT INFO",icon:mp},{id:"agent-payment-summary",title:"AGENT PAYMENT SUMMARY",icon:mp}],s=[{id:"chart-accounts",title:"Chart of Accounts Menu",icon:Uh,description:"Manage and view your chart of accounts",color:"bg-blue-500"},{id:"trial-balance",title:"Trial Balance - Detail Balance",icon:Fh,description:"View detailed trial balance reports",color:"bg-green-500"},{id:"finance-statements",title:"Finance Statements",icon:ip,description:"Generate income and balance statements",color:"bg-purple-500"},{id:"hst-report",title:"HST Report",icon:ip,description:"Generate and view HST reports",color:"bg-orange-500"}],o=["chart-accounts","trial-balance","hst-report","trust-payments","commission-trust","commission-trust-ledger","general-account"].includes(e);return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen",children:[o&&(0,gp.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,gp.jsxs)("button",{onClick:()=>n("main"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Finance"]})}),(0,gp.jsx)("nav",{className:"p-4",children:(0,gp.jsx)("ul",{className:"space-y-2",children:a.map((t=>(0,gp.jsx)("li",{children:(0,gp.jsx)("button",{onClick:()=>{var e;"chart-accounts"===(e=t.id)?r("/chart-of-accounts"):"trial-balance"===e?r("/trial-balance"):"finance-statements"===e?r("/finance-statements"):"hst-report"===e?r("/hst-report"):"journal-entry"===e?r("/journal-entry"):"disbursements-journals"===e?r("/disbursements-journals"):"trust-journal"===e?r("/trust-journal"):"trade-ar-journal"===e?r("/trade-ar-journal"):"trust-payments"===e?r("/real-estate-trust-payments"):"real-estate-trust-ledger"===e?r("/real-estate-trust-ledger"):"commission-trust"===e?r("/commission-trust-payments"):"commission-trust-ledger"===e?r("/commission-trust-ledger"):"general-account"===e?r("/general-account-payments"):"reconcile-real-estate-trust"===e?r("/reconcile-real-estate-trust"):"reconcile-commission-trust"===e?r("/reconcile-commission-trust"):"reconcile-general-account"===e?r("/reconcile-general-account"):"accounts-receivable"===e?r("/accounts-receivable"):"agent-payment-info"===e?r("/agent-payment-info"):"agent-payment-summary"===e?r("/agent-payment-summary"):n(e)},className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===t.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)(t.icon,{className:"mr-3"}),(0,gp.jsx)("span",{className:"text-sm font-medium",children:t.title})]})})},t.id)))})})]}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(()=>{switch(e){case"chart-accounts":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Chart of Accounts Menu"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage your chart of accounts, add new accounts, and organize your financial structure."}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Asset Accounts"}),(0,gp.jsxs)("ul",{className:"text-sm text-gray-600",children:[(0,gp.jsx)("li",{children:"\u2022 Cash and Cash Equivalents"}),(0,gp.jsx)("li",{children:"\u2022 Accounts Receivable"}),(0,gp.jsx)("li",{children:"\u2022 Prepaid Expenses"}),(0,gp.jsx)("li",{children:"\u2022 Fixed Assets"})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Liability Accounts"}),(0,gp.jsxs)("ul",{className:"text-sm text-gray-600",children:[(0,gp.jsx)("li",{children:"\u2022 Accounts Payable"}),(0,gp.jsx)("li",{children:"\u2022 Accrued Expenses"}),(0,gp.jsx)("li",{children:"\u2022 Bank Loans"}),(0,gp.jsx)("li",{children:"\u2022 HST Payable"})]})]})]})]});case"trial-balance":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Trial Balance - Detail Balance"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed trial balance reports with account balances and adjustments."}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,gp.jsxs)("tbody",{children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Cash"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$50,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Receivable"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Accounts Payable"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"($15,000)"})]})]})]})})]});case"hst-report":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"HST Report"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate and view HST (Harmonized Sales Tax) reports for tax filing."}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-3 text-blue-600",children:"HST Collected"}),(0,gp.jsxs)("div",{className:"space-y-2",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Total Sales (HST Included):"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$100,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"HST Collected (13%):"}),(0,gp.jsx)("span",{className:"font-semibold text-green-600",children:"$13,000"})]})]})]}),(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-3 text-red-600",children:"HST Paid"}),(0,gp.jsxs)("div",{className:"space-y-2",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"Total Purchases (HST Included):"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$50,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{children:"HST Paid (13%):"}),(0,gp.jsx)("span",{className:"font-semibold text-red-600",children:"$6,500"})]})]})]})]}),(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Net HST Owing"}),(0,gp.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"$6,500 (HST Collected - HST Paid)"})]})]});case"trust-payments":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage real estate trust account payments and transactions."}),(0,gp.jsx)("div",{className:"space-y-4",children:(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Trust Account Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Current Balance:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$150,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Pending Payments:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$25,000"})]})]})]})})]});case"commission-trust":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage commission trust account payments and distributions."}),(0,gp.jsx)("div",{className:"space-y-4",children:(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Commission Trust Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commissions:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$75,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Paid to Agents:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$60,000"})]})]})]})})]});case"commission-trust-ledger":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Ledger"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"View detailed ledger entries for the commission trust account."}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Balance"})]})}),(0,gp.jsxs)("tbody",{children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-10-20"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Commission Payment to Agent A"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$10,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$10,000"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"2023-10-25"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Commission Payment to Agent B"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$15,000"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$25,000"})]})]})]})})]});case"general-account":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-4",children:"Manage accounts payable and general expense payments."}),(0,gp.jsx)("div",{className:"space-y-4",children:(0,gp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-2",children:"Accounts Payable Summary"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Outstanding:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:"$45,000"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Overdue Amount:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2 text-red-600",children:"$12,000"})]})]})]})})]});default:return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Finance Dashboard"}),(0,gp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map((e=>(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>{var t;"chart-accounts"===(t=e.id)?r("/chart-of-accounts"):"trial-balance"===t?r("/trial-balance"):"finance-statements"===t?r("/finance-statements"):"hst-report"===t?r("/hst-report"):n(t)},children:[(0,gp.jsx)(e.icon,{className:"text-4xl text-blue-900 mb-2"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:e.title})]},e.id)))})]})}})()})]})]})},xT=()=>{const e=Pu(),t=Iu(),n=[{id:"chart-accounts",title:"CHART OF ACCOUNTS MENU",icon:Uh,path:"/chart-of-accounts"},{id:"trial-balance",title:"TRIAL BALANCE - DETAIL BALANCE",icon:Fh,path:"/trial-balance"},{id:"finance-statements",title:"FINANCE STATEMENTS",icon:qh,path:"/finance-statements"},{id:"hst-report",title:"HST REPORT",icon:ip,path:"/hst-report"},{id:"journal-entry",title:"JOURNAL ENTRY",icon:Mh,path:"/journal-entry"},{id:"disbursements-journals",title:"DISBURSEMENTS JOURNALS",icon:$h,path:"/disbursements-journals"},{id:"trust-journal",title:"TRUST JOURNAL",icon:Mh,path:"/trust-journal"},{id:"trade-ar-journal",title:"TRADE A/R JOURNAL",icon:Mh,path:"/trade-ar-journal"},{id:"trust-payments",title:"REAL ESTATE TRUST PAYMENTS",icon:rp,path:"/real-estate-trust-payments"},{id:"real-estate-trust-ledger",title:"REAL ESTATE TRUST LEDGER",icon:Mh,path:"/real-estate-trust-ledger"},{id:"commission-trust",title:"COMMISSION TRUST PAYMENTS",icon:Zh,path:"/commission-trust-payments"},{id:"commission-trust-ledger",title:"COMMISSION TRUST LEDGER",icon:Mh,path:"/commission-trust-ledger"},{id:"general-account",title:"GENERAL ACCOUNT PAYMENTS (A/P) EXPENSES",icon:Qh,path:"/general-account-payments"},{id:"reconcile-real-estate-trust",title:"RECONCILING REAL ESTATE TRUST",icon:zh,path:"/reconcile-real-estate-trust"},{id:"reconcile-commission-trust",title:"RECONCILING COMMISSION TRUST",icon:zh,path:"/reconcile-commission-trust"},{id:"reconcile-general-account",title:"RECONCILING GENERAL ACCOUNT",icon:zh,path:"/reconcile-general-account"},{id:"accounts-receivable",title:"ACCOUNTS RECEIVABLE",icon:pp,path:"/accounts-receivable"},{id:"agent-payment-info",title:"AGENT PAYMENT INFO",icon:mp,path:"/agent-payment-info"},{id:"agent-payment-summary",title:"AGENT PAYMENT SUMMARY",icon:mp,path:"/agent-payment-summary"}];return(0,gp.jsxs)("div",{className:"w-64 bg-white shadow-md min-h-screen",children:[(0,gp.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,gp.jsxs)("button",{onClick:()=>e("/finance"),className:"flex items-center text-gray-600 hover:text-gray-800",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Finance"]})}),(0,gp.jsx)("nav",{className:"p-4",children:(0,gp.jsx)("ul",{className:"space-y-2",children:n.map((n=>{return(0,gp.jsx)("li",{children:(0,gp.jsx)("button",{onClick:()=>{return t=n.path,void e(t);var t},className:"w-full text-left p-3 rounded-lg transition-colors ".concat((r=n.path,t.pathname===r?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100")),children:(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)(n.icon,{className:"mr-3"}),(0,gp.jsx)("span",{className:"text-sm font-medium",children:n.title})]})})},n.id);var r}))})})]})};var fT=n(926);const gT=e=>{let{data:t,onClose:n,hideTradeSellerBuyer:r}=e;const a="Bestway Real Estate Ltd., Brokerage",s="500 St.George Street",o="Moncton, NB  E1C 1Y3",i="506-268-2900";if(!t)return(0,gp.jsx)("div",{className:"fixed inset-0 bg-white flex justify-center items-center z-50 p-4",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg max-w-md w-full text-center",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Error"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-6",children:"No receipt data available."}),(0,gp.jsx)("button",{onClick:n,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600",children:"Close"})]})});const{eftNumber:l,paidTo:c,trade:d,notes:u,amount:m,seller:h,buyer:p,firstPartyLabel:x="Seller",secondPartyLabel:f="Buyer",payTo:g,orderOf:b,note:y,chequeDate:v}=t,N=Number(m)||0,j=(e=>{const t=Math.floor(e),n=Math.round(100*(e-t));let r="";return t>0&&(r=(0,fT.toWords)(t).replace(/,/g,"").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")+" Dollars"),n>0&&(r&&(r+=" and "),r+="".concat(n,"/100")),r||(r="Zero Dollars"),r+" Only"})(N),w=(new Date).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"}),S=v?(()=>{let e;if(v.includes("/")){const[t,n,r]=v.split("/");e="".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00")}else e=v+"T00:00:00";return new Date(e).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"})})():w,C=()=>"string"===typeof c?c:c&&"object"===typeof c&&c.name||"N/A";return(0,gp.jsx)("div",{className:"fixed inset-0 bg-white flex justify-center items-center z-50 p-4",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-4xl w-full relative mx-auto",id:"receipt-content",children:[(0,gp.jsxs)("div",{className:"border-2 border-gray-500 p-8 bg-white",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-start",children:[(0,gp.jsx)("img",{src:fp,alt:"SaveMax Realty Logo",className:"h-20 mr-6"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h1",{className:"font-bold text-lg mb-1",children:a}),(0,gp.jsx)("p",{className:"text-sm mb-1",children:s}),(0,gp.jsx)("p",{className:"text-sm mb-1",children:o}),(0,gp.jsxs)("p",{className:"text-sm",children:["Phone: ",i]})]})]}),(0,gp.jsxs)("div",{className:"text-right",children:[(0,gp.jsxs)("p",{className:"font-bold text-base mb-1",children:["EFT # ",l]}),(0,gp.jsxs)("p",{className:"text-sm",children:["Date: ",S]})]})]}),(0,gp.jsxs)("div",{className:"mb-4 flex items-start",children:[(0,gp.jsx)("span",{className:"font-bold pr-2 w-24 flex-shrink-0",children:"Paid To:"}),(0,gp.jsx)("div",{children:(0,gp.jsx)("p",{className:"my-0 font-semibold",children:C()})})]}),!r&&(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("div",{className:"mb-1",children:[(0,gp.jsx)("span",{className:"font-bold w-24 inline-block",children:"Trade:"})," ",d]}),(0,gp.jsxs)("div",{className:"mb-1",children:[(0,gp.jsxs)("span",{className:"font-bold w-24 inline-block",children:[x,":"]})," ",h]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsxs)("span",{className:"font-bold w-24 inline-block",children:[f,":"]})," ",p]})]}),(0,gp.jsxs)("div",{className:"mb-1",children:[(0,gp.jsx)("span",{className:"font-bold w-24 inline-block",children:"Notes:"})," ",u]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("span",{className:"font-bold w-24 inline-block",children:"Amount:"})," $",N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,gp.jsxs)("div",{className:"border-t border-b border-gray-400 py-6",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-start",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-bold inline-block w-20",children:"PAY"}),(0,gp.jsx)("span",{children:j})]}),(0,gp.jsxs)("div",{className:"text-right",children:[(0,gp.jsxs)("p",{children:["Date: ",S]}),(0,gp.jsx)("p",{className:"font-bold mt-1",children:"AMOUNT"}),(0,gp.jsxs)("p",{className:"font-bold",children:["*$",N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"*"]})]})]}),(0,gp.jsxs)("div",{className:"mt-4 flex",children:[(0,gp.jsxs)("div",{className:"font-bold w-20 flex-shrink-0",children:[(0,gp.jsx)("p",{className:"mb-1",children:"TO THE"}),(0,gp.jsx)("p",{className:"mb-1",children:"ORDER"}),(0,gp.jsx)("p",{className:"mb-1",children:"OF"}),(0,gp.jsx)("p",{className:"mb-1",children:"NOTE"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("p",{className:"mb-1",children:g}),(0,gp.jsx)("p",{className:"mb-1",children:null===b||void 0===b?void 0:b.address}),(0,gp.jsx)("p",{className:"mb-1",children:null===b||void 0===b?void 0:b.cityProvincePostal}),(0,gp.jsx)("p",{className:"mb-1",children:y})]})]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 mt-6 no-print",children:[(0,gp.jsx)("button",{onClick:()=>{const e=window.open("","_blank");document.getElementById("receipt-content").innerHTML;e.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>EFT Receipt - ".concat(l,'</title>\n          <style>\n            @media print {\n              @page {\n                margin: 0.5in;\n                size: letter;\n              }\n              body {\n                margin: 0;\n                padding: 0;\n                font-family: Arial, sans-serif;\n                font-size: 12px;\n                line-height: 1.2;\n                background: white;\n              }\n              .receipt-container {\n                width: 100%;\n                max-width: 100%;\n                margin: 0;\n                padding: 0;\n                page-break-after: avoid;\n                page-break-before: avoid;\n                page-break-inside: avoid;\n                background: white;\n              }\n              .receipt-border {\n                border: 2px solid #808080;\n                padding: 0.4in;\n                margin: 0;\n                box-sizing: border-box;\n                background: white;\n                border-radius: 0;\n              }\n              .header-section {\n                margin-bottom: 0.3in;\n              }\n              .logo {\n                height: 0.8in;\n                margin-right: 0.25in;\n                display: inline-block;\n              }\n              .company-info {\n                display: inline-block;\n                vertical-align: top;\n              }\n              .company-name {\n                font-size: 14px;\n                font-weight: bold;\n                margin-bottom: 0.05in;\n                color: black;\n              }\n              .company-address {\n                font-size: 10px;\n                margin-bottom: 0.02in;\n                color: black;\n              }\n              .eft-header {\n                text-align: right;\n                font-size: 12px;\n                color: black;\n              }\n              .eft-number {\n                font-weight: bold;\n                margin-bottom: 0.05in;\n                color: black;\n              }\n              .content-section {\n                margin-bottom: 0.2in;\n                font-size: 11px;\n                color: black;\n              }\n              .label {\n                font-weight: bold;\n                display: inline-block;\n                width: 0.8in;\n                margin-right: 0.1in;\n                color: black;\n              }\n              .main-section {\n                border-top: 1px solid #808080;\n                border-bottom: 1px solid #808080;\n                padding: 0.25in 0;\n                margin: 0.25in 0;\n              }\n              .amount-section {\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                margin-bottom: 0.2in;\n              }\n              .amount-words {\n                flex: 1;\n                color: black;\n              }\n              .amount-right {\n                text-align: right;\n                min-width: 1.5in;\n                color: black;\n              }\n              .order-section {\n                display: flex;\n                margin-top: 0.2in;\n              }\n              .order-labels {\n                font-weight: bold;\n                width: 0.8in;\n                margin-right: 0.1in;\n                color: black;\n              }\n              .order-content {\n                flex: 1;\n                color: black;\n              }\n              .no-print {\n                display: none;\n              }\n              .pay-label {\n                font-weight: bold;\n                display: inline-block;\n                width: 0.5in;\n                margin-right: 0.08in;\n              }\n              .amount-asterisk {\n                font-weight: bold;\n              }\n            }\n            @media screen {\n              .receipt-container {\n                width: 8.5in;\n                margin: 0 auto;\n                padding: 0.5in;\n              }\n              .receipt-border {\n                border: 2px solid #808080;\n                padding: 0.4in;\n                background: white;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="receipt-container">\n            <div class="receipt-border">\n              <div class="header-section">\n                <div style="display: flex; justify-content: space-between; align-items: flex-start;">\n                  <div style="display: flex; align-items: flex-start;">\n                    <img src="').concat(fp,'" alt="SaveMax Realty Logo" class="logo" />\n                    <div class="company-info">\n                      <div class="company-name">').concat(a,'</div>\n                      <div class="company-address">').concat(s,'</div>\n                      <div class="company-address">').concat(o,'</div>\n                      <div class="company-address">Phone: ').concat(i,'</div>\n                    </div>\n                  </div>\n                  <div class="eft-header">\n                    <div class="eft-number">EFT # ').concat(l,"</div>\n                    <div>Date: ").concat(S,'</div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="content-section">\n                <div style="margin-bottom: 0.08in;"><span class="label">Paid To:</span>').concat(C(),"</div>\n                ").concat(r?"":'\n                  <div style="margin-bottom: 0.04in;"><span class="label">Trade:</span>'.concat(d||"N/A",'</div>\n                  <div style="margin-bottom: 0.04in;"><span class="label">').concat(x,":</span>").concat(h||"N/A",'</div>\n                  <div style="margin-bottom: 0.1in;"><span class="label">').concat(f,":</span>").concat(p||"N/A","</div>\n                "),'\n                <div style="margin-bottom: 0.04in;"><span class="label">Notes:</span>').concat(u||"N/A",'</div>\n                <div style="margin-bottom: 0.1in;"><span class="label">Amount:</span>$').concat(N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),'</div>\n              </div>\n\n              <div class="main-section">\n                <div class="amount-section">\n                  <div class="amount-words">\n                    <span class="pay-label">PAY</span>').concat(j,'\n                  </div>\n                  <div class="amount-right">\n                    <div>Date: ').concat(S,'</div>\n                    <div style="font-weight: bold; margin-top: 0.03in;">AMOUNT</div>\n                    <div class="amount-asterisk">*$').concat(N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),'*</div>\n                  </div>\n                </div>\n                <div class="order-section">\n                  <div class="order-labels">\n                    <div style="margin-bottom: 0.04in;">TO THE</div>\n                    <div style="margin-bottom: 0.04in;">ORDER</div>\n                    <div style="margin-bottom: 0.04in;">OF</div>\n                    <div style="margin-bottom: 0.04in;">NOTE</div>\n                  </div>\n                  <div class="order-content">\n                    <div style="margin-bottom: 0.04in;">').concat(g||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat((null===b||void 0===b?void 0:b.address)||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat((null===b||void 0===b?void 0:b.cityProvincePostal)||"N/A",'</div>\n                    <div style="margin-bottom: 0.04in;">').concat(y||"N/A","</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </body>\n      </html>\n    ")),e.document.close(),e.focus(),e.onload=function(){e.print(),e.close()}},className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700",children:"Print"}),(0,gp.jsx)("button",{onClick:n,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600",children:"Close"})]})]})})},bT=()=>{const[e,n]=(0,t.useState)("main"),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)(!1),[g,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[w,S]=(0,t.useState)({commissionTransfer:!1,balanceOfDeposit:!1,refundOfDeposit:!1}),[C,k]=(0,t.useState)({chequeType:"Transfer to General/Commission Trust",tradeNumber:"",selectedTrade:null}),[E,T]=(0,t.useState)({chequeType:"Balance of Deposit",tradeNumber:"",selectedTrade:null}),[A,I]=(0,t.useState)({chequeType:"Refund of Deposit",tradeNumber:"",selectedTrade:null});(0,t.useEffect)((()=>{D()}),[]);const D=async()=>{try{const e=await Oj.get("/trades");a(e.data)}catch(e){console.error("Error fetching trades:",e)}},P=e=>{var n,r,a,s,o,i;let{trade:l,onBack:c}=e;const d=(null===(n=l.commission)||void 0===n||null===(r=n.commissionIncomeRows)||void 0===r?void 0:r.reduce(((e,t)=>e+parseFloat(t.total||0)),0))||0,u=(null===(a=l.trustRecords)||void 0===a?void 0:a.reduce(((e,t)=>e+parseFloat(t.amount||0)),0))||0,m=u<d?u:d,h="".concat((null===(s=l.keyInfo)||void 0===s?void 0:s.streetNumber)||""," ").concat((null===(o=l.keyInfo)||void 0===o?void 0:o.streetName)||"").concat(null!==(i=l.keyInfo)&&void 0!==i&&i.unit?" ".concat(l.keyInfo.unit):""),p=new Date,x=e=>e.toString().padStart(2,"0"),f="".concat(x(p.getMonth()+1),"/").concat(x(p.getDate()),"/").concat(p.getFullYear()),[g,y]=(0,t.useState)({chequeDate:f}),[N,k]=(0,t.useState)(!1),E=[{acct:"10004",name:"CASH - COMMISSION TRUST ACCOUNT",debit:m.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),credit:""},{acct:"10002",name:"CASH - TRUST",debit:"",credit:m.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}];return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Trust Cheques 1-Transfer to General/Commission Trust"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDateCommission",checked:N,onChange:e=>k(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDateCommission",className:"text-sm text-gray-600",children:"Override Date"})]}),N?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:g.chequeDate.includes("/")?(()=>{const[e,t,n]=g.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():g.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());y((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:g.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",value:"Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsx)("div",{className:"bg-gray-200 p-4 rounded-md mb-4",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Trade #:"})," ",l.tradeNumber]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Today's Date:"})," ",f]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Address:"})," ",h]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Trust Amount:"})," ",u.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Total Commission:"})," ",d.toLocaleString("en-US",{style:"currency",currency:"USD"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Cheque Amount:"})," ",m.toLocaleString("en-US",{style:"currency",currency:"USD"})]})]})}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount of Cheque"}),(0,gp.jsx)("input",{type:"text",value:m.toFixed(2),readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Written To"}),(0,gp.jsx)("input",{type:"text",value:"Bestway Real Estate Ltd., Brokerage",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",value:"500 St.George Street",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,gp.jsx)("input",{type:"text",value:"Moncton",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,gp.jsx)("input",{type:"text",value:"New Brunswick",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",value:"L6X 5H5",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",value:"Transfer funds to Commission Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsx)("div",{className:"text-center font-bold text-red-600 my-4",children:"FUNDS MUST BE DEPOSITED IN THE COMMISSION TRUST ACCOUNT"}),(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border mb-4",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Acct #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"General Ledger Account Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Debit (+)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit (-)"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.acct}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.name}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 border-r",children:e.debit}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:e.credit})]},t)))})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{var t,n,r;if(!C.selectedTrade)return void alert("No trade selected.");const a=C.selectedTrade,s=(null===(t=a.commission)||void 0===t||null===(n=t.commissionIncomeRows)||void 0===n?void 0:n.reduce(((e,t)=>e+parseFloat(t.total||0)),0))||0,o=(null===(r=a.trustRecords)||void 0===r?void 0:r.reduce(((e,t)=>e+parseFloat(t.amount||0)),0))||0,i=o<s?o:s;try{const t=await Oj.post("/real-estate-trust-eft/commission-transfer",{tradeId:a._id,amount:i,recipient:"Bestway Real Estate Ltd., Brokerage - Commission Trust",chequeDate:e.chequeDate});if(t.data.eftNumber){var l,c,d;try{const[n,r,s]=e.chequeDate.split("/"),o=new Date("".concat(s,"-").concat(n.padStart(2,"0"),"-").concat(r.padStart(2,"0"),"T00:00:00"));await Oj.post("/transactions",{date:o,reference:"EFT#".concat(t.data.eftNumber),description:"Transfer funds to Commission Trust",debitAccount:"CASH - COMMISSION TRUST ACCOUNT",creditAccount:"CASH - TRUST",amount:i,tradeId:a._id}),await Oj.post("/finance-transactions",{type:"CommissionTransfer",chequeDate:o,amount:i,chequeWrittenTo:"Bestway Real Estate Ltd., Brokerage",tradeId:a._id,description:"Transfer funds to Commission Trust"}),await Oj.post("/ledger/eft-transfer",{eftNumber:t.data.eftNumber,description:"EFT#".concat(t.data.eftNumber," - Bestway Real Estate Ltd., Brokerage"),amount:i,chequeDate:o}),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(u){console.error("Error creating transaction:",u),alert("EFT number generated, but failed to create the transaction record.")}const n=TE(a),r=n.firstParty,s=n.secondParty,o="".concat((null===(l=a.keyInfo)||void 0===l?void 0:l.streetNumber)||""," ").concat((null===(c=a.keyInfo)||void 0===c?void 0:c.streetName)||"").concat(null!==(d=a.keyInfo)&&void 0!==d&&d.unit?" ".concat(a.keyInfo.unit):"").trim(),m={eftNumber:t.data.eftNumber,paidTo:{name:"Bestway Real Estate Ltd., Brokerage - Commission Trust",address:"500 ST. GEORGE STREET"},trade:o,notes:"TRANSFER FUNDS TO COMMISSION TRUST (From: Trust)",amount:i,seller:r,buyer:s,firstPartyLabel:n.firstPartyLabel,secondPartyLabel:n.secondPartyLabel,payTo:"Bestway Real Estate Ltd., Brokerage - Commission Trust",orderOf:{address:"500 ST. GEORGE STREET",cityProvincePostal:"Moncton, NB E13 1YC"},note:"".concat(a.tradeNumber," ").concat(o),chequeDate:e.chequeDate};j(m),v(t.data.eftNumber),b(!0),S((e=>J(J({},e),{},{commissionTransfer:!0})))}else alert("Failed to get EFT number.")}catch(m){console.error("Error creating EFT record:",m),alert("Error creating EFT record. Please check the console for details.")}})(g),disabled:w.commissionTransfer,className:"py-2 px-6 rounded-md transition-colors ".concat(w.commissionTransfer?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:w.commissionTransfer?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:c,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},O=e=>{var n,r,a,s,o,i,l,c,d,u,m;let{trade:h,onBack:p}=e;const x=(null===(n=h.trustRecords)||void 0===n?void 0:n.reduce(((e,t)=>e+parseFloat(t.amount||0)),0))||0,f=(null===(r=h.commission)||void 0===r||null===(a=r.commissionIncomeRows)||void 0===a?void 0:a.reduce(((e,t)=>e+parseFloat(t.total||0)),0))||0,g=x-f,y=TE(h).firstParty,N=y||"N/A",C="".concat((null===(s=h.keyInfo)||void 0===s?void 0:s.streetNumber)||""," ").concat((null===(o=h.keyInfo)||void 0===o?void 0:o.streetName)||"").concat(null!==(i=h.keyInfo)&&void 0!==i&&i.unit?" ".concat(h.keyInfo.unit):""),k=new Date,T=e=>e.toString().padStart(2,"0"),A="".concat(T(k.getMonth()+1),"/").concat(T(k.getDate()),"/").concat(k.getFullYear()),[I,D]=(0,t.useState)({chequeNumber:"",chequeDate:A,address:null!==(l=h.keyInfo)&&void 0!==l&&l.streetName?"".concat(h.keyInfo.streetNumber," ").concat(h.keyInfo.streetName).concat(null!==(c=h.keyInfo)&&void 0!==c&&c.unit?" ".concat(h.keyInfo.unit):""):"",city:(null===(d=h.keyInfo)||void 0===d?void 0:d.city)||"",province:(null===(u=h.keyInfo)||void 0===u?void 0:u.province)||"",postalCode:(null===(m=h.keyInfo)||void 0===m?void 0:m.postalCode)||"",country:"Canada",noteOnStub:"Refund of Balance of Deposit"}),[P,O]=(0,t.useState)(!1),L=e=>{const{name:t,value:n}=e.target;D((e=>J(J({},e),{},{[t]:n})))},R=[{acct:"21300",name:"LIABILITY FOR TRUST FUNDS HELD",debit:g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),credit:""},{acct:"10002",name:"CASH - TRUST",debit:"",credit:g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}];return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Trust Cheques 2-Balance of Deposit"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDate",checked:P,onChange:e=>O(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDate",className:"text-sm text-gray-600",children:"Override Date"})]}),P?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:I.chequeDate.includes("/")?(()=>{const[e,t,n]=I.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():I.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());D((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:A,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",value:"Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque #"}),(0,gp.jsx)("input",{type:"text",name:"chequeNumber",value:I.chequeNumber,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"bg-gray-200 p-4 rounded-md mb-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Trade #:"})," ",h.tradeNumber," ",(0,gp.jsx)("span",{className:"font-semibold ml-4",children:"Status:"})," Closed",(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Address:"})," ",C]})]}),(0,gp.jsxs)("div",{className:"text-right",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Today's Date:"})," ",A]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Balance:"})," ",g.toLocaleString("en-US",{style:"currency",currency:"USD"})]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount of Cheque"}),(0,gp.jsx)("input",{type:"text",value:g.toFixed(2),readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Written To"}),(0,gp.jsx)("input",{type:"text",value:N,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:I.address,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:I.city,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:I.province,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:I.postalCode,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",name:"noteOnStub",value:I.noteOnStub,onChange:L,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border mb-4",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Acct #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"General Ledger Account Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-r",children:"Debit (+)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit (-)"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.acct}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-r",children:e.name}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 border-r",children:e.debit}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:e.credit})]},t)))})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{var t,n,r;if(!E.selectedTrade)return void alert("No trade selected.");const a=E.selectedTrade,s=(null===(t=a.trustRecords)||void 0===t?void 0:t.reduce(((e,t)=>e+parseFloat(t.amount||0)),0))||0,o=(null===(n=a.commission)||void 0===n||null===(r=n.commissionIncomeRows)||void 0===r?void 0:r.reduce(((e,t)=>e+parseFloat(t.total||0)),0))||0,i=s-o,l=TE(a),c=l.firstParty;try{const t=await Oj.post("/real-estate-trust-eft/balance-deposit",{tradeId:a._id,amount:i,recipient:c,description:e.noteOnStub,chequeDate:e.chequeDate});if(t.data.eftNumber){var d,u,m;const n="Trade #: ".concat(a.tradeNumber,", Paid to: ").concat(c),[r,s,o]=e.chequeDate.split("/"),h=new Date("".concat(o,"-").concat(r.padStart(2,"0"),"-").concat(s.padStart(2,"0"),"T00:00:00"));await Oj.post("/transactions",{date:h,reference:"EFT#".concat(t.data.eftNumber),description:n,debitAccount:"LIABILITY FOR TRUST FUNDS HELD",creditAccount:"CASH - TRUST",amount:i,tradeId:a._id}),await Oj.post("/finance-transactions",{type:"BalanceOfDeposit",chequeDate:h,amount:i,chequeWrittenTo:c,tradeId:a._id}),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!"),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"));const p=l.secondParty,x="".concat((null===(d=a.keyInfo)||void 0===d?void 0:d.streetNumber)||""," ").concat((null===(u=a.keyInfo)||void 0===u?void 0:u.streetName)||"").concat(null!==(m=a.keyInfo)&&void 0!==m&&m.unit?" ".concat(a.keyInfo.unit):"").trim(),f={eftNumber:t.data.eftNumber,paidTo:{name:c,address:e.address},trade:x,notes:e.noteOnStub,amount:i,seller:c,buyer:p,firstPartyLabel:l.firstPartyLabel,secondPartyLabel:l.secondPartyLabel,payTo:c,orderOf:{address:e.address,cityProvincePostal:"".concat(e.city,", ").concat(e.province,", ").concat(e.postalCode)},note:"".concat(a.tradeNumber," ").concat(x),chequeDate:e.chequeDate};j(f),v(t.data.eftNumber),b(!0),S((e=>J(J({},e),{},{balanceOfDeposit:!0})))}else alert("Failed to get EFT number.")}catch(h){console.error("Error creating EFT record:",h),alert("Error creating EFT record. Please check the console for details.")}})(J(J({},I),{},{chequeWrittenTo:y})),disabled:w.balanceOfDeposit,className:"py-2 px-6 rounded-md transition-colors ".concat(w.balanceOfDeposit?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:w.balanceOfDeposit?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:p,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},L=e=>{var n,r,a,s,o,i;let{trade:l,onBack:c}=e;const d=TE(l),u=d.secondParty,m=d.firstParty,h="".concat((null===(n=l.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=l.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=l.keyInfo)&&void 0!==a&&a.unit?" ".concat(l.keyInfo.unit):"").trim(),p=new Date,x=e=>e.toString().padStart(2,"0"),f="".concat(x(p.getMonth()+1),"/").concat(x(p.getDate()),"/").concat(p.getFullYear()),[g,y]=(0,t.useState)({chequeDate:f,paidTo:m&&"N/A"!==m?m:"",address:h,city:(null===(s=l.keyInfo)||void 0===s?void 0:s.city)||"",province:(null===(o=l.keyInfo)||void 0===o?void 0:o.province)||"",postalCode:(null===(i=l.keyInfo)||void 0===i?void 0:i.postalCode)||"",noteOnStub:"Transfer Refund",netCheque:"5000",buyer:u||"",seller:m||""}),[N,C]=(0,t.useState)(!1),k=e=>{const{name:t,value:n}=e.target;y((e=>J(J({},e),{},{[t]:n})))};return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg text-center",children:"Refund of Deposit Cheques"}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h4",{className:"font-semibold mb-4 text-md",children:"Refund of Deposit Cheques Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:l.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",value:"Real Estate Trust",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,gp.jsx)("input",{type:"text",value:"5000",readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:g.city,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:g.province,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",name:"noteOnStub",value:g.noteOnStub,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer"}),(0,gp.jsx)("input",{type:"text",name:"buyer",value:g.buyer,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDateRefund",checked:N,onChange:e=>C(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDateRefund",className:"text-sm text-gray-600",children:"Override Date"})]}),N?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:g.chequeDate.includes("/")?(()=>{const[e,t,n]=g.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():g.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());y((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:g.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Paid To ",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"text",name:"paidTo",value:g.paidTo,onChange:k,placeholder:"Enter recipient name",required:!0,className:"mt-1 block w-full rounded-md shadow-sm ".concat(g.paidTo&&""!==g.paidTo.trim()?"border-gray-300 focus:border-blue-500 focus:ring-blue-500":"border-red-300 focus:border-red-500 focus:ring-red-500")}),(!g.paidTo||""===g.paidTo.trim())&&(0,gp.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Recipient name is required"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:g.address,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:g.postalCode,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Net Cheque ",(0,gp.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,gp.jsx)("input",{type:"number",name:"netCheque",value:g.netCheque,onChange:k,placeholder:"Enter amount",min:"0.01",step:"0.01",required:!0,className:"mt-1 block w-full rounded-md shadow-sm ".concat(!g.netCheque||isNaN(parseFloat(g.netCheque))||parseFloat(g.netCheque)<=0?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500")}),(!g.netCheque||isNaN(parseFloat(g.netCheque))||parseFloat(g.netCheque)<=0)&&(0,gp.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"Please enter a valid amount greater than 0"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Seller"}),(0,gp.jsx)("input",{type:"text",name:"seller",value:g.seller,onChange:k,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{if(!A.selectedTrade)return void alert("No trade selected.");const t=A.selectedTrade,n=TE(t),r=n.firstParty,a=n.secondParty,s=e.paidTo||r;if(!s||"N/A"===s||""===s.trim())return void alert("Please enter a valid recipient name. The trade does not have seller information or the recipient field is empty.");const o=parseFloat(e.netCheque)||5e3;if(isNaN(o)||o<=0)alert("Please enter a valid amount greater than 0.");else{console.log("Sending refund deposit request:",{tradeId:t._id,amount:o,recipient:s,description:e.noteOnStub||"Transfer Refund",chequeDate:e.chequeDate});try{const d=await Oj.post("/real-estate-trust-eft/refund-deposit",{tradeId:t._id,amount:o,recipient:s,description:e.noteOnStub||"Transfer Refund",chequeDate:e.chequeDate});if(d.data.eftNumber){var i,l,c;const s="Trade #: ".concat(t.tradeNumber,", Paid to: ").concat(e.paidTo||r),[o,u,m]=e.chequeDate.split("/"),h=new Date("".concat(m,"-").concat(o.padStart(2,"0"),"-").concat(u.padStart(2,"0"),"T00:00:00"));await Oj.post("/transactions",{date:h,reference:"EFT#".concat(d.data.eftNumber),description:s,debitAccount:"LIABILITY FOR TRUST FUNDS HELD",creditAccount:"CASH - TRUST",amount:parseFloat(e.netCheque)||5e3,tradeId:t._id}),await Oj.post("/finance-transactions",{type:"RefundOfDeposit",chequeDate:h,amount:parseFloat(e.netCheque)||5e3,chequeWrittenTo:e.paidTo||r,tradeId:t._id}),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!"),"undefined"!==typeof window&&window.dispatchEvent(new Event("refreshTrialBalance"));const p="".concat((null===(i=t.keyInfo)||void 0===i?void 0:i.streetNumber)||""," ").concat((null===(l=t.keyInfo)||void 0===l?void 0:l.streetName)||"").concat(null!==(c=t.keyInfo)&&void 0!==c&&c.unit?" ".concat(t.keyInfo.unit):"").trim(),x={eftNumber:d.data.eftNumber,paidTo:{name:e.paidTo||r,address:e.address},trade:p,notes:e.noteOnStub||"Transfer Refund",amount:parseFloat(e.netCheque)||5e3,seller:e.seller||r,buyer:e.buyer||a,firstPartyLabel:n.firstPartyLabel,secondPartyLabel:n.secondPartyLabel,payTo:e.paidTo||r,orderOf:{address:e.address,cityProvincePostal:"".concat(e.city,", ").concat(e.province,", ").concat(e.postalCode)},note:"".concat(t.tradeNumber," ").concat(p),chequeDate:e.chequeDate};j(x),v(d.data.eftNumber),b(!0),S((e=>J(J({},e),{},{refundOfDeposit:!0})))}else alert("Failed to get EFT number.")}catch(d){console.error("Error creating EFT record:",d),alert("Error creating EFT record. Please check the console for details.")}}})(g),disabled:w.refundOfDeposit,className:"py-2 px-6 rounded-md transition-colors ".concat(w.refundOfDeposit?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:w.refundOfDeposit?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:c,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Real Estate Trust Payments"}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-transfer"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-transfer"),children:"Commission transfer"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("balance-deposit"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("balance-deposit"),children:"Balance of Deposit"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("refund-deposit"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("refund-deposit"),children:"Refund of Deposit"})]})}),"commission-transfer"===e&&(0,gp.jsx)("div",{className:"space-y-4",children:u?(0,gp.jsx)(P,{trade:C.selectedTrade,onBack:()=>m(!1)}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Commission Transfer Form"}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C.selectedTrade?(console.log("Commission Transfer Form Data:",C),m(!0)):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,gp.jsx)("input",{type:"text",value:C.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:C.tradeNumber,onChange:e=>(e=>{if(k((t=>J(J({},t),{},{tradeNumber:e}))),""===e.trim())return o([]),void l(!1);const t=r.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));o(t),l(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i&&s.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:s.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await wE(e._id,"CommissionTransfer");if(t.exists)return wh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(kE(t.date)," for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{commissionTransfer:!0})));k((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:e}))),l(!1)}catch(s){console.error("Error checking existing EFT:",s),wh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"balance-deposit"===e&&(0,gp.jsx)("div",{className:"space-y-4",children:h?(0,gp.jsx)(O,{trade:E.selectedTrade,onBack:()=>p(!1)}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Balance of Deposit Form"}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),E.selectedTrade?p(!0):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,gp.jsx)("input",{type:"text",value:E.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:E.tradeNumber,onChange:e=>(e=>{if(T((t=>J(J({},t),{},{tradeNumber:e}))),""===e.trim())return o([]),void d(!1);const t=r.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));o(t),d(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),c&&s.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:s.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await wE(e._id,"BalanceOfDeposit");if(t.exists)return wh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(kE(t.date)," for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{balanceOfDeposit:!0})));T((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:e}))),d(!1)}catch(s){console.error("Error checking existing EFT:",s),wh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"refund-deposit"===e&&(0,gp.jsx)("div",{className:"space-y-4",children:x?(0,gp.jsx)(L,{trade:A.selectedTrade,onBack:()=>f(!1)}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Refund of Deposit Cheques"}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:A.tradeNumber,onChange:e=>(e=>{if(I((t=>J(J({},t),{},{tradeNumber:e}))),""===e.trim())return o([]),void l(!1);const t=r.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));o(t),l(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),i&&s.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:s.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await wE(e._id,"RefundOfDeposit");if(t.exists)return wh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(kE(t.date)," for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{refundOfDeposit:!0})));I((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:e}))),l(!1),f(!0)}catch(s){console.error("Error checking existing EFT:",s),wh.error("Could not verify existing payments. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{onClick:()=>{A.selectedTrade?f(!0):alert("Please select a trade first.")},className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"main"===e&&(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,gp.jsx)("p",{children:"Select a tab above to view specific information."})}),g&&N&&(0,gp.jsx)(gT,{data:N,onClose:()=>b(!1)})]})})]})]})},yT=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)({fromDate:"",toDate:""}),i=(e,t)=>{o((n=>J(J({},n),{},{[e]:t})))};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(xT,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 print:hidden",children:"Real Estate Trust Ledger"}),e.length>0&&(0,gp.jsxs)("button",{onClick:()=>{0!==e.length?window.print():$p.error("No data to print. Please search for ledger entries first.")},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,gp.jsx)(op,{}),"Print Report"]})]}),(0,gp.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:hidden",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Select Date Range"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:s.fromDate,onChange:e=>i("fromDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:s.toDate,onChange:e=>i("toDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsx)("div",{className:"flex items-end",children:(0,gp.jsx)("button",{onClick:()=>{s.fromDate&&s.toDate?new Date(s.fromDate)>new Date(s.toDate)?$p.error("From date cannot be after to date"):(async()=>{try{a(!0);const e=await Oj.get("/ledger/account/10002",{params:{fromDate:s.fromDate,toDate:s.toDate}});n(e.data)}catch(e){console.error("Error fetching ledger entries:",e),$p.error("Failed to fetch ledger entries")}finally{a(!1)}})():$p.error("Please select both from and to dates")},disabled:r,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Loading...":"Search"})})]})]}),(0,gp.jsx)("div",{className:"hidden print:block print:mb-6",children:(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b-2 border-gray-300 pb-4 mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16 mr-4"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Real Estate Trust Ledger Report"})]})]}),(0,gp.jsxs)("div",{className:"text-right",children:[(0,gp.jsxs)("p",{className:"text-xs text-gray-600",children:["Report Date: ",(new Date).toLocaleDateString()]}),(0,gp.jsxs)("p",{className:"text-xs text-gray-600",children:["Period: ",s.fromDate," to ",s.toDate]})]})]})}),e.length>0&&(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700 print:hidden",children:"Ledger Entries"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table table-fixed",children:[(0,gp.jsxs)("colgroup",{children:[(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"10%"}})," ",(0,gp.jsx)("col",{style:{width:"38%"}})," ",(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"12%"}})," ",(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"16%"}})," "]}),(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Date"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Reference"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Description"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Type"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Amount"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Trade Number"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b",children:"Payee"})]})}),(0,gp.jsx)("tbody",{children:e.map(((e,t)=>(0,gp.jsxs)("tr",{className:"border-b hover:bg-gray-50 align-top",children:[(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:e.reference||"N/A"}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r whitespace-pre-line break-words",children:e.description}),(0,gp.jsx)("td",{className:"px-3 py-2 text-center border-r",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-gray-100 text-black type-badge",children:e.type})}),(0,gp.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-center border-r tabular-nums",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-center border-r",children:e.tradeNumber||"N/A"}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left break-words",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received from:\s*([^-]+)/);if(t)return t[1].trim()}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/);if(t)return t[1].trim()}return"N/A"})()})]},t)))})]})}),(0,gp.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Total Debits: "}),(0,gp.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+parseFloat(t.amount)),0).toFixed(2)]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Total Credits: "}),(0,gp.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+parseFloat(t.amount)),0).toFixed(2)]})]})]})})]}),0===e.length&&!r&&(0,gp.jsx)("div",{className:"text-center py-8",children:(0,gp.jsx)("p",{className:"text-gray-500 text-lg",children:"No ledger entries found. Please select a date range and search."})})]})})]})]})},vT=()=>{var e,n,r,a;Pu();const[s,o]=(0,t.useState)("outside-brokers"),[i,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[x,f]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[N,j]=(0,t.useState)(!1),[w,S]=(0,t.useState)({agentCommission:!1,outsideBrokersCommission:!1,ourBrokerageCommission:!1}),[C,k]=(0,t.useState)({name:"Agent Commission transfer form",chequeType:"lorem ipsum",tradeNumber:"",selectedTrade:null,selectedAgentId:""}),[E,T]=(0,t.useState)({name:"Outside Brokers Commission Transfer Form",type:"EFT",tradeNumber:"",selectedTrade:null,selectedOutsideBroker:null}),[A,I]=(0,t.useState)(!1),[D,P]=(0,t.useState)({chequeDate:(new Date).toISOString().split("T")[0],bankAccount:"Commission Trust",outsideBrokerName:"",outsideBrokerCompany:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to outside broker"}),[O,L]=(0,t.useState)(!1),[R,F]=(0,t.useState)(null),[_,M]=(0,t.useState)({tradeNumber:"",selectedTrade:null}),[B,U]=(0,t.useState)(!1);(0,t.useEffect)((()=>{H()}),[]);const H=async()=>{try{const e=await Oj.get("/trades");l(e.data)}catch(e){console.error("Error fetching trades:",e)}},z=()=>{const e=new Date,t=e=>e.toString().padStart(2,"0");return"".concat(t(e.getMonth()+1),"/").concat(t(e.getDate()),"/").concat(e.getFullYear())},V=e=>{let{trade:n,selectedAgentId:r,onBack:a}=e;const[s,o]=(0,t.useState)({chequeDate:z(),bankAccount:"Commission Trust",agentNumber:"",agentName:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to agent"}),[i,l]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n&&r){var e,t,a,s;const i=(null===(e=n.agentCommissionList)||void 0===e?void 0:e.find((e=>e.agentId===r)))||{},l=parseFloat(i.netCommission||0),c="".concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(a=n.keyInfo)||void 0===a?void 0:a.streetName)||"").concat(null!==(s=n.keyInfo)&&void 0!==s&&s.unit?" ".concat(n.keyInfo.unit):"").trim();o({chequeDate:z(),bankAccount:"Commission Trust",agentNumber:i.agentId||"",agentName:i.agentName||"",tradeNumber:n.tradeNumber,address:c,netCommission:l.toFixed(2),netCheque:l.toFixed(2),noteOnStub:"Transfer commission to agent"})}}),[n,r]);return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Agent Commission Cheque Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDate",checked:i,onChange:e=>l(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDate",className:"text-sm text-gray-600",children:"Override Date"})]}),i?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:s.chequeDate.includes("/")?(()=>{const[e,t,n]=s.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():s.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());o((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:s.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",name:"bankAccount",value:s.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Number"}),(0,gp.jsx)("input",{type:"text",name:"agentNumber",value:s.agentNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),(0,gp.jsx)("input",{type:"text",name:"agentName",value:s.agentName,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade #"}),(0,gp.jsx)("input",{type:"text",name:"tradeNumber",value:s.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:s.address,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Commission"}),(0,gp.jsx)("input",{type:"text",name:"netCommission",value:s.netCommission,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Cheque"}),(0,gp.jsx)("input",{type:"text",name:"netCheque",value:s.netCheque,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",name:"noteOnStub",value:s.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,gp.jsx)("button",{onClick:()=>(async e=>{var t;if(!C.selectedTrade||!C.selectedAgentId)return void alert("No trade or agent selected.");const n=C.selectedTrade,r=null===(t=n.agentCommissionList)||void 0===t?void 0:t.find((e=>e.agentId===C.selectedAgentId));if(r)try{var a,s,o;console.log("Selected agent:",r),console.log("Agent ID:",r.agentId),console.log("Fetching company profile...");let t=null;try{t=(await Oj.get("/company-profile")).data,console.log("Company info:",t)}catch(u){var i;if(404!==(null===(i=u.response)||void 0===i?void 0:i.status))throw u;console.log("Company profile not found, using default values"),t={companyName:"Bestway Real Estate Ltd., Brokerage",address:"Company Address",city:"City",province:"Province",postalCode:"Postal Code",phone:"Phone",fax:"Fax",email:"email@company.com"}}console.log("Fetching agent details for employee number:",r.agentId);const l=(await Oj.get("/agents/employee/".concat(r.agentId))).data;console.log("Agent details:",l);const c=parseFloat(r.netCommission||0);console.log("Creating EFT for amount:",c);const d=(await Oj.post("/commission-trust-eft/agent-commission",{tradeId:n._id,amount:c,recipient:r.agentName,agentId:r.agentId,agentName:r.agentName,chequeDate:e.chequeDate})).data.eftNumber;console.log("EFT created with number:",d),console.log("Posting transaction..."),await Oj.post("/transactions",{date:(()=>{const[t,n,r]=e.chequeDate.split("/");return new Date("".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00"))})(),reference:"EFT#".concat(d),description:"Agent Commission Payment",debitAccount:"A/P - GENERAL & COMMISSION EXPENSE",creditAccount:"CASH - COMMISSION TRUST ACCOUNT",amount:c,tradeId:n._id}),await Oj.post("/finance-transactions",{type:"AgentCommissionPayment",chequeDate:(()=>{const[t,n,r]=e.chequeDate.split("/");return new Date("".concat(r,"-").concat(t.padStart(2,"0"),"-").concat(n.padStart(2,"0"),"T00:00:00"))})(),amount:c,chequeWrittenTo:r.agentName,tradeId:n._id});const m=TE(n),h=m.firstParty,p=m.secondParty,x="".concat((null===(a=n.keyInfo)||void 0===a?void 0:a.streetNumber)||""," ").concat((null===(s=n.keyInfo)||void 0===s?void 0:s.streetName)||"").concat(null!==(o=n.keyInfo)&&void 0!==o&&o.unit?" ".concat(n.keyInfo.unit):"").trim(),g="".concat(l.streetNumber||""," ").concat(l.streetName||"").trim(),b=l.unit?" Unit ".concat(l.unit):"",y="".concat(l.city||"",", ").concat(l.province||"",", ").concat(l.postalCode||"").trim(),N={companyInfo:t,eftNumber:d,paidTo:{name:r.agentName,address:g},trade:x,notes:"Transfer commission to agent",amount:c,seller:h,buyer:p,firstPartyLabel:m.firstPartyLabel,secondPartyLabel:m.secondPartyLabel,payTo:r.agentName,orderOf:{address:"".concat(g).concat(b),cityProvincePostal:y},note:"".concat(n.tradeNumber," ").concat(x),chequeDate:e.chequeDate};v(N),j(!1),f(!0),S((e=>J(J({},e),{},{agentCommission:!0}))),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(m){var l,c,d;console.error("Error during EFT process:",m),console.error("Error response:",null===(l=m.response)||void 0===l?void 0:l.data),console.error("Error status:",null===(c=m.response)||void 0===c?void 0:c.status),404===(null===(d=m.response)||void 0===d?void 0:d.status)?wh.error("Required data not found. Please ensure all required information is set up."):wh.error("Failed to complete EFT process. Please try again.")}else alert("Selected agent not found.")})(s),disabled:w.agentCommission,className:"py-2 px-6 rounded-md transition-colors ".concat(w.agentCommission?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:w.agentCommission?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:a,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},q=e=>{let{trade:n,selectedOutsideBroker:r,onBack:a,eftCreated:s}=e;const[o,i]=(0,t.useState)({chequeDate:z(),bankAccount:"Commission Trust",outsideBrokerName:"",outsideBrokerCompany:"",outsideBrokerAddress:"",tradeNumber:"",address:"",netCommission:"",netCheque:"",noteOnStub:"Transfer commission to outside broker",seller:"",buyer:""}),[l,c]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n&&r){var e,t,a,s,o;const l=(null===(e=n.commission)||void 0===e||null===(t=e.outsideBrokersRows)||void 0===t?void 0:t.find((e=>e.agentName===r.agentName||"".concat(r.firstName," ").concat(r.lastName)===e.agentName)))||{},c=parseFloat(l.total||0),d="".concat((null===(a=n.keyInfo)||void 0===a?void 0:a.streetNumber)||""," ").concat((null===(s=n.keyInfo)||void 0===s?void 0:s.streetName)||"").concat(null!==(o=n.keyInfo)&&void 0!==o&&o.unit?" ".concat(n.keyInfo.unit):"").trim(),u=TE(n),m=u.firstParty,h=u.secondParty;i({chequeDate:z(),bankAccount:"Commission Trust",outsideBrokerName:r.agentName||"".concat(r.firstName," ").concat(r.lastName),outsideBrokerCompany:r.company||"",outsideBrokerAddress:r.address||"",tradeNumber:n.tradeNumber,address:d,netCommission:c.toFixed(2),netCheque:c.toFixed(2),noteOnStub:"Transfer commission to outside broker",seller:m,buyer:h})}}),[n,r]);return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Outside Brokers Commission Cheque Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDateOutside",checked:l,onChange:e=>c(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDateOutside",className:"text-sm text-gray-600",children:"Override Date"})]}),l?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:o.chequeDate.includes("/")?(()=>{const[e,t,n]=o.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():o.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());i((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:o.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",name:"bankAccount",value:o.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Name"}),(0,gp.jsx)("input",{type:"text",name:"outsideBrokerName",value:o.outsideBrokerName,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Company"}),(0,gp.jsx)("input",{type:"text",name:"outsideBrokerCompany",value:o.outsideBrokerCompany,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Outside Broker Address"}),(0,gp.jsx)("input",{type:"text",name:"outsideBrokerAddress",value:o.outsideBrokerAddress,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",name:"tradeNumber",value:o.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:o.address,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Commission"}),(0,gp.jsx)("input",{type:"text",name:"netCommission",value:o.netCommission,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Net Cheque"}),(0,gp.jsx)("input",{type:"text",name:"netCheque",value:o.netCheque,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Seller"}),(0,gp.jsx)("input",{type:"text",name:"seller",value:o.seller,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer"}),(0,gp.jsx)("input",{type:"text",name:"buyer",value:o.buyer,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",name:"noteOnStub",value:o.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Batch"}),(0,gp.jsx)("button",{onClick:async()=>{var e,t,r;const a="".concat((null===(e=n.keyInfo)||void 0===e?void 0:e.streetNumber)||""," ").concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetName)||"").concat(null!==(r=n.keyInfo)&&void 0!==r&&r.unit?" ".concat(n.keyInfo.unit):"").trim(),s=TE(n),i=s.firstParty,l=s.secondParty;try{console.log("Creating EFT for outside broker commission..."),console.log("Trade ID:",n._id),console.log("Amount:",o.netCommission),console.log("Recipient:",o.outsideBrokerName);let e=null;try{e=(await Oj.get("/company-profile")).data}catch(m){var c;if(404!==(null===(c=m.response)||void 0===c?void 0:c.status))throw m;console.log("Company profile not found, using default values"),e={companyName:"Bestway Real Estate Ltd., Brokerage",address:"Company Address",city:"City",province:"Province",postalCode:"Postal Code",phone:"Phone",fax:"Fax",email:"email@company.com"}}const t=await Oj.post("/commission-trust-eft/outside-broker",{tradeId:n._id,amount:Number(o.netCommission),recipient:o.outsideBrokerCompany?"".concat(o.outsideBrokerName," - ").concat(o.outsideBrokerCompany):o.outsideBrokerName,description:"Transfer commission to outside broker",chequeDate:o.chequeDate});console.log("EFT Response:",t.data);const r=t.data.eftNumber;F({companyInfo:e,eftNumber:r,chequeDate:o.chequeDate,paidTo:o.outsideBrokerCompany,trade:"".concat(n.tradeNumber," ").concat(a),notes:"Transfer commission to outside broker",amount:o.netCommission,seller:i,buyer:l,firstPartyLabel:s.firstPartyLabel,secondPartyLabel:s.secondPartyLabel,payTo:o.outsideBrokerCompany,orderOf:{address:o.outsideBrokerAddress,cityProvincePostal:""},note:"".concat(n.tradeNumber," ").concat(a)}),L(!0),S((e=>J(J({},e),{},{outsideBrokersCommission:!0}))),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(h){var d,u;console.error("Error creating EFT record:",h),console.error("Error response:",null===(d=h.response)||void 0===d?void 0:d.data),console.error("Error status:",null===(u=h.response)||void 0===u?void 0:u.status),console.error("Error message:",h.message),alert("Error creating EFT record. Please try again.")}},disabled:s,className:"py-2 px-6 rounded-md transition-colors ".concat(s?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:s?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:a,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})},W=e=>{let{trade:n,onBack:r,eftCreated:a}=e;const[s,o]=(0,t.useState)({chequeDate:z(),bankAccount:"Commission Trust",tradeNumber:(null===n||void 0===n?void 0:n.tradeNumber)||"",amount:"",noteOnStub:"Transfer Office Share"}),[i,l]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(n){const e=(n.agentCommissionList||[]).reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0),t=e+.13*e,r=(n.agentCommissionList||[]).reduce(((e,t)=>e+parseFloat(t.buyerRebateAmount||0)),0),a=t+r;o((e=>J(J({},e),{},{tradeNumber:n.tradeNumber,amount:a.toFixed(2),noteOnStub:r>0?"Transfer Office Share (includes buyer rebates)":"Transfer Office Share"})))}}),[n]);return(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Our Brokerage Commission Cheque Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomDateOurBrokerage",checked:i,onChange:e=>l(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomDateOurBrokerage",className:"text-sm text-gray-600",children:"Override Date"})]}),i?(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:s.chequeDate.includes("/")?(()=>{const[e,t,n]=s.chequeDate.split("/");return"".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"))})():s.chequeDate,onChange:e=>{const t=new Date(e.target.value+"T00:00:00"),n="".concat((t.getMonth()+1).toString().padStart(2,"0"),"/").concat(t.getDate().toString().padStart(2,"0"),"/").concat(t.getFullYear());o((e=>J(J({},e),{},{chequeDate:n})))},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"}):(0,gp.jsx)("input",{type:"text",name:"chequeDate",value:s.chequeDate,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",name:"bankAccount",value:s.bankAccount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade #"}),(0,gp.jsx)("input",{type:"text",name:"tradeNumber",value:s.tradeNumber,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,gp.jsx)("input",{type:"text",name:"amount",value:s.amount,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]}),(()=>{const e=((null===n||void 0===n?void 0:n.agentCommissionList)||[]).reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0),t=e+.13*e,r=((null===n||void 0===n?void 0:n.agentCommissionList)||[]).reduce(((e,t)=>e+parseFloat(t.buyerRebateAmount||0)),0);return r>0?(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Breakdown"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md text-sm",children:[(0,gp.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,gp.jsx)("span",{children:"Fees + Tax:"}),(0,gp.jsxs)("span",{children:["$",t.toFixed(2)]})]}),(0,gp.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,gp.jsx)("span",{children:"Buyer Rebates:"}),(0,gp.jsxs)("span",{children:["$",r.toFixed(2)]})]}),(0,gp.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-1",children:[(0,gp.jsx)("span",{children:"Total:"}),(0,gp.jsxs)("span",{children:["$",(t+r).toFixed(2)]})]})]})]}):null})(),(0,gp.jsxs)("div",{className:"col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note on Stub"}),(0,gp.jsx)("input",{type:"text",name:"noteOnStub",value:s.noteOnStub,readOnly:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-start space-x-4 mt-6",children:[(0,gp.jsx)("button",{className:"bg-gray-200 text-black py-2 px-6 rounded-md hover:bg-gray-300 transition-colors",children:"Print"}),(0,gp.jsx)("button",{onClick:async()=>{var e,t,r;if(!n)return;const a="".concat((null===(e=n.keyInfo)||void 0===e?void 0:e.streetNumber)||""," ").concat((null===(t=n.keyInfo)||void 0===t?void 0:t.streetName)||"").concat(null!==(r=n.keyInfo)&&void 0!==r&&r.unit?" ".concat(n.keyInfo.unit):"").trim(),o=s.amount;try{const e=(await Oj.post("/commission-trust-eft/our-brokerage",{tradeId:n._id,amount:Number(o),recipient:"Bestway Real Estate Ltd., Brokerage",description:"Transfer Office Share",chequeDate:s.chequeDate})).data.eftNumber;await Oj.post("/transactions",{date:(()=>{const[e,t,n]=s.chequeDate.split("/");return new Date("".concat(n,"-").concat(e.padStart(2,"0"),"-").concat(t.padStart(2,"0"),"T00:00:00"))})(),reference:"EFT#".concat(e),description:"Our Brokerage Commission Transfer",debitAccount:"CASH - CURRENT ACCOUNT",creditAccount:"CASH - COMMISSION TRUST ACCOUNT",amount:Number(o),tradeId:n._id});const t=(n.agentCommissionList||[]).reduce(((e,t)=>e+parseFloat(t.buyerRebateAmount||0)),0),r={eftNumber:e,paidTo:"Bestway Real Estate Ltd.y, Brokerage",trade:"".concat(n.tradeNumber," ").concat(a),notes:t>0?"Transfer Office Share (includes buyer rebates)":"Transfer Office Share",amount:o,payTo:"Bestway Real Estate Ltd., Brokerage",orderOf:{address:"500 St.George Street",cityProvincePostal:"Moncton, NB E1C 1Y3"},note:"".concat(n.tradeNumber," ").concat(a),chequeDate:s.chequeDate};v(r),j(!0),f(!0),S((e=>J(J({},e),{},{ourBrokerageCommission:!0}))),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(i){console.error("Error during EFT process:",i),wh.error("Failed to complete EFT process. Please try again. (Check if backend endpoint exists)")}},disabled:a,className:"py-2 px-6 rounded-md transition-colors ".concat(a?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gray-200 text-black hover:bg-gray-300"),children:a?"EFT Created":"E.F.T."}),(0,gp.jsx)("button",{onClick:r,className:"bg-red-500 text-white py-2 px-6 rounded-md hover:bg-red-600 transition-colors",children:"Exit"})]})]})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Commission Trust Payments"}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("outside-brokers"===s?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>o("outside-brokers"),children:"Outside Brokers Commission Cheques"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("agent-commission"===s?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>o("agent-commission"),children:"Agent Commission Cheques"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("our-brokerage"===s?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>o("our-brokerage"),children:"Our Brokerage Commission"})]})}),"outside-brokers"===s&&(0,gp.jsx)("div",{className:"space-y-4",children:A?(0,gp.jsx)(q,{trade:E.selectedTrade,selectedOutsideBroker:E.selectedOutsideBroker,onBack:()=>I(!1),eftCreated:w.outsideBrokersCommission}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Outside Brokers Commission Transfer Form"}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),E.selectedTrade&&E.selectedOutsideBroker?I(!0):E.selectedTrade?alert("Please select an outside broker to proceed."):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,gp.jsx)("input",{type:"text",value:E.name,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,gp.jsx)("input",{type:"text",value:E.type,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:E.tradeNumber,onChange:e=>(e=>{if(T((t=>J(J({},t),{},{tradeNumber:e,selectedTrade:null,selectedOutsideBroker:null}))),""===e.trim())return d([]),void m(!1);const t=i.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));d(t),m(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),u&&c.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await jE(e._id,"OutsideBrokerCommission");if(t.exists)return wh.error("Payment already completed for Trade #".concat(e.tradeNumber,"! \n          EFT #").concat(t.eftNumber," was created on ").concat(kE(t.date)," \n          for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{outsideBrokersCommission:!0})));const n=(await Oj.get("/trades/".concat(e._id))).data;T((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:n,selectedOutsideBroker:null}))),m(!1)}catch(s){console.error("Error fetching full trade details:",s),wh.error("Could not load trade details. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outside Broker"}),(0,gp.jsxs)("select",{name:"selectedOutsideBroker",value:E.selectedOutsideBroker?"".concat(E.selectedOutsideBroker.firstName," ").concat(E.selectedOutsideBroker.lastName):"",onChange:e=>{const t=e.target.value;if(t){var n,r;const e=null===(n=E.selectedTrade)||void 0===n||null===(r=n.outsideBrokers)||void 0===r?void 0:r.find((e=>"".concat(e.firstName," ").concat(e.lastName)===t));T((t=>J(J({},t),{},{selectedOutsideBroker:e})))}else T((e=>J(J({},e),{},{selectedOutsideBroker:null})))},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",required:!0,disabled:!E.selectedTrade,children:[(0,gp.jsx)("option",{value:"",disabled:!0,children:E.selectedTrade?"Select an outside broker":"Select a trade first"}),null===(e=E.selectedTrade)||void 0===e||null===(n=e.outsideBrokers)||void 0===n?void 0:n.map(((e,t)=>(0,gp.jsxs)("option",{value:"".concat(e.firstName," ").concat(e.lastName),children:[e.firstName," ",e.lastName," -"," ",e.company]},t)))]})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"agent-commission"===s&&(0,gp.jsx)("div",{className:"space-y-4",children:h?(0,gp.jsx)(V,{trade:C.selectedTrade,selectedAgentId:C.selectedAgentId,onBack:()=>p(!1)}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Agent Commission Transfer Form"}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C.selectedTrade&&C.selectedAgentId?p(!0):C.selectedTrade?alert("Please select an agent to proceed."):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),(0,gp.jsx)("input",{type:"text",value:C.name,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Type"}),(0,gp.jsx)("input",{type:"text",value:C.chequeType,readOnly:!0,className:"block w-full rounded-md border-gray-300 bg-gray-100 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:C.tradeNumber,onChange:e=>(e=>{if(k((t=>J(J({},t),{},{tradeNumber:e,selectedTrade:null,selectedAgentId:""}))),""===e.trim())return d([]),void m(!1);const t=i.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));d(t),m(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),u&&c.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await jE(e._id,"AgentCommissionTransfer");if(t.exists&&t.count>=2)return wh.error("Maximum 2 payments allowed for Trade #".concat(e.tradeNumber,"! \n          ").concat(t.count," EFT(s) already created for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{agentCommission:!0})));const n=(await Oj.get("/trades/".concat(e._id))).data;k((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:n,selectedAgentId:""}))),m(!1)}catch(s){console.error("Error fetching full trade details:",s),wh.error("Could not load trade details. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent"}),(0,gp.jsxs)("select",{name:"selectedAgentId",value:C.selectedAgentId,onChange:e=>k((t=>J(J({},t),{},{selectedAgentId:e.target.value}))),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",required:!0,disabled:!C.selectedTrade,children:[(0,gp.jsx)("option",{value:"",disabled:!0,children:C.selectedTrade?"Select an agent":"Select a trade first"}),null===(r=C.selectedTrade)||void 0===r||null===(a=r.agentCommissionList)||void 0===a?void 0:a.map(((e,t)=>(0,gp.jsxs)("option",{value:e.agentId,children:[e.agentName," (",e.agentId,")"]},t)))]})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})}),"our-brokerage"===s&&(0,gp.jsx)("div",{className:"space-y-4",children:B?(0,gp.jsx)(W,{trade:_.selectedTrade,onBack:()=>U(!1),eftCreated:w.ourBrokerageCommission}):(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Our Brokerage Commission Transfer Form"}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_.selectedTrade?U(!0):alert("Please select a trade to proceed.")},className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Number"}),(0,gp.jsx)("input",{type:"text",value:_.tradeNumber,onChange:e=>(e=>{if(M((t=>J(J({},t),{},{tradeNumber:e,selectedTrade:null}))),""===e.trim())return d([]),void m(!1);const t=i.filter((t=>{var n,r,a;return t.tradeNumber.toString().includes(e)||"".concat((null===(n=t.keyInfo)||void 0===n?void 0:n.streetNumber)||""," ").concat((null===(r=t.keyInfo)||void 0===r?void 0:r.streetName)||"").concat(null!==(a=t.keyInfo)&&void 0!==a&&a.unit?" ".concat(t.keyInfo.unit):"").toLowerCase().includes(e.toLowerCase())}));d(t),m(!0)})(e.target.value),placeholder:"Search trade number or address...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),u&&c.length>0&&(0,gp.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:c.map((e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();return(0,gp.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-200",onClick:()=>(async e=>{var t,n,r;const a="".concat((null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||""," ").concat((null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"").concat(null!==(r=e.keyInfo)&&void 0!==r&&r.unit?" ".concat(e.keyInfo.unit):"").trim();try{const t=await jE(e._id,"OurBrokerageCommission");if(t.exists)return wh.error("Payment already completed for Trade #".concat(e.tradeNumber,"!\nEFT #").concat(t.eftNumber," was created on ").concat(kE(t.date)," for ").concat(SE(t.type),"."),{duration:6e3}),void S((e=>J(J({},e),{},{ourBrokerageCommission:!0})));const n=(await Oj.get("/trades/".concat(e._id))).data;M((t=>J(J({},t),{},{tradeNumber:"".concat(e.tradeNumber," - ").concat(a),selectedTrade:n}))),m(!1)}catch(s){console.error("Error fetching full trade details:",s),wh.error("Could not load trade details. Please try again.")}})(e),children:[(0,gp.jsxs)("div",{className:"font-medium",children:["Trade #",e.tradeNumber]}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:a})]},e._id)}))})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Proceed"})})]})]})})]})})]}),x&&y&&(0,gp.jsx)(gT,{data:y,hideTradeSellerBuyer:N,onClose:()=>{f(!1),v(null),b(null),j(!1)}}),O&&R&&(0,gp.jsx)(gT,{data:R,onClose:()=>{L(!1),F(null)}})]})},NT=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)({fromDate:"",toDate:""}),i=(e,t)=>{o((n=>J(J({},n),{},{[e]:t})))};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(xT,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 print:hidden",children:"Commission Trust Ledger"}),e.length>0&&(0,gp.jsxs)("button",{onClick:()=>{0!==e.length?window.print():$p.error("No data to print. Please search for ledger entries first.")},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2 print:hidden",children:[(0,gp.jsx)(op,{}),"Print Report"]})]}),(0,gp.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg print:hidden",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Select Date Range"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:s.fromDate,onChange:e=>i("fromDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:s.toDate,onChange:e=>i("toDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsx)("div",{className:"flex items-end",children:(0,gp.jsx)("button",{onClick:()=>{s.fromDate&&s.toDate?new Date(s.fromDate)>new Date(s.toDate)?$p.error("From date cannot be after to date"):(async()=>{try{a(!0),console.log("Searching for ledger entries with params:",{fromDate:s.fromDate,toDate:s.toDate,accountNumber:"10004"});const e=await Oj.get("/ledger/account/10004",{params:{fromDate:s.fromDate,toDate:s.toDate}});console.log("Response received:",e.data),console.log("Number of entries found:",e.data.length),n(e.data)}catch(t){var e;console.error("Error fetching ledger entries:",t),console.error("Error details:",null===(e=t.response)||void 0===e?void 0:e.data),$p.error("Failed to fetch ledger entries")}finally{a(!1)}})():$p.error("Please select both from and to dates")},disabled:r,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:r?"Loading...":"Search"})})]})]}),(0,gp.jsx)("div",{className:"hidden print:block print:mb-6",children:(0,gp.jsxs)("div",{className:"flex items-center justify-between border-b-2 border-gray-300 pb-4 mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16 mr-4"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Commission Trust Ledger Report"})]})]}),(0,gp.jsxs)("div",{className:"text-right",children:[(0,gp.jsxs)("p",{className:"text-xs text-gray-600",children:["Report Date: ",(new Date).toLocaleDateString()]}),(0,gp.jsxs)("p",{className:"text-xs text-gray-600",children:["Period: ",s.fromDate," to ",s.toDate]})]})]})}),e.length>0&&(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700 print:hidden",children:"Ledger Entries"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table table-fixed",children:[(0,gp.jsxs)("colgroup",{children:[(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"10%"}})," ",(0,gp.jsx)("col",{style:{width:"38%"}})," ",(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"12%"}})," ",(0,gp.jsx)("col",{style:{width:"8%"}})," ",(0,gp.jsx)("col",{style:{width:"16%"}})," "]}),(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Date"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Reference"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Description"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Type"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Amount"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b border-r",children:"Trade Number"}),(0,gp.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-700 border-b",children:"Payee"})]})}),(0,gp.jsx)("tbody",{children:e.map(((e,t)=>(0,gp.jsxs)("tr",{className:"border-b hover:bg-gray-50 align-top",children:[(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:(()=>{const t=e.chequeDate||e.date||e.createdAt;return t?new Date(t).toLocaleDateString():"-"})()}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r",children:e.reference||"N/A"}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left border-r whitespace-pre-line break-words",children:e.description}),(0,gp.jsx)("td",{className:"px-3 py-2 text-center border-r",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-gray-100 text-black type-badge",children:e.type})}),(0,gp.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-center border-r tabular-nums",children:["$",parseFloat(e.amount).toFixed(2)]}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-center border-r",children:e.tradeNumber||"N/A"}),(0,gp.jsx)("td",{className:"px-3 py-2 text-sm text-left break-words",children:(()=>{if(e.payee)return e.payee;if("Debit"===e.type&&e.description){const t=e.description.match(/Received from:\s*([^-]+)/);if(t)return"Received from: ".concat(t[1].trim());{const t=e.description.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);if(t)return"Received from: ".concat(t[1].trim())}}if("Credit"===e.type&&e.description){const t=e.description.match(/Paid to:\s*([^-]+)/);if(t)return"Paid to: ".concat(t[1].trim());{const t=e.description.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);if(t)return"Paid to: ".concat(t[1].trim())}}return"N/A"})()})]},t)))})]})}),(0,gp.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Total Debits: "}),(0,gp.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+parseFloat(t.amount)),0).toFixed(2)]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Total Credits: "}),(0,gp.jsxs)("span",{className:"text-black font-medium",children:["$",e.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+parseFloat(t.amount)),0).toFixed(2)]})]})]})})]}),0===e.length&&!r&&(0,gp.jsx)("div",{className:"text-center py-8",children:(0,gp.jsx)("p",{className:"text-gray-500 text-lg",children:"No ledger entries found. Please select a date range and search."})})]})})]})]})},jT=()=>{const e=localStorage.getItem("lastAPNumber");let t=2e3;if(e){const n=e.match(/AP(\d+)/);n&&(t=parseInt(n[1])+1)}const n="AP".concat(t);return localStorage.setItem("lastAPNumber",n),n},wT=()=>{const[e,n]=(0,t.useState)("ap-expense"),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)({apNumber:"",date:(new Date).toISOString().slice(0,10),eftNumber:"",postDate:(new Date).toISOString().slice(0,10),dueDate:"",amount:"",hst:0,glAccount:"",chequeDate:(new Date).toISOString().slice(0,10)}),[x,f]=(0,t.useState)({vendorId:"",selectedVendor:null,amount:"",expenseCategory:"",description:"",invoiceNumber:"",companyName:""}),[g,b]=(0,t.useState)({recipient:"",amount:"",expenseCategory:"",description:""}),[y,v]=(0,t.useState)([]),[N,j]=(0,t.useState)(null),[w,S]=(0,t.useState)(!1),[C,k]=(0,t.useState)(!1);(0,t.useEffect)((()=>{E()}),[]);const E=async()=>{try{const e=await Oj.get("/vendors");a(e.data)}catch(e){console.error("Error fetching vendors:",e)}};(0,t.useEffect)((()=>{c&&Oj.get("/general-account-eft").then((e=>{const t=e.data.reduce(((e,t)=>t.eftNumber>e?t.eftNumber:e),0);p((e=>J(J({},e),{},{eftNumber:t+1})))}))}),[c]),(0,t.useEffect)((()=>{p((e=>J(J({},e),{},{hst:e.amount?(.13*parseFloat(e.amount)).toFixed(2):0})))}),[h.amount]);const T=e=>{const{name:t,value:n}=e.target;p((e=>J(J({},e),{},{[t]:n})))},[A,I]=(0,t.useState)(!1),[D,P]=(0,t.useState)(null);(0,t.useEffect)((()=>{O()}),[]);const O=async()=>{try{const e=await Oj.get("/general-account-eft/"),t=e.data.filter((e=>"APExpense"===e.type)).sort(((e,t)=>{const n=new Date(e.date);return new Date(t.date)-n}));v(t)}catch(e){console.error("Error fetching AP transactions:",e)}},L=e=>{var n,r,a,s,i,c,d,u;let{transaction:m,onClose:h}=e;const[p,x]=t.useState({vendorNumber:(null===(n=m.vendorId)||void 0===n?void 0:n.vendorNumber)||"",vendorName:m.vendorId?"".concat(m.vendorId.firstName," ").concat(m.vendorId.lastName):m.recipient||"",chequeDate:m.date?new Date(m.date).toISOString().slice(0,10):"",address:null!==(r=m.vendorId)&&void 0!==r&&r.streetNumber&&null!==(a=m.vendorId)&&void 0!==a&&a.streetName?"".concat(m.vendorId.streetNumber,", ").concat(m.vendorId.streetName):(null===(s=m.vendorId)||void 0===s?void 0:s.address)||"",city:(null===(i=m.vendorId)||void 0===i?void 0:i.city)||"",province:(null===(c=m.vendorId)||void 0===c?void 0:c.province)||"",postalCode:(null===(d=m.vendorId)||void 0===d?void 0:d.postalCode)||"",invoiceNumber:m.invoiceNumber||m.eftNumber,bankAccount:"General",hst:m.hst||""}),[f,g]=t.useState(!1),[b,y]=t.useState(m.amount&&m.hst?(parseFloat(m.amount)+parseFloat(p.hst)).toFixed(2):m.amount);t.useEffect((()=>{m.amount&&p.hst?y((parseFloat(m.amount)+parseFloat(p.hst)).toFixed(2)):y(m.amount)}),[p.hst,m.amount]);const v=()=>{var e;return null!==(e=m.vendorId)&&void 0!==e&&e.companyName&&""!==m.vendorId.companyName.trim()?m.vendorId.companyName:m.vendorId?"".concat(m.vendorId.firstName," ").concat(m.vendorId.lastName):m.recipient||""},N=()=>{var e,t,n;return null!==(e=m.vendorId)&&void 0!==e&&e.streetNumber&&null!==(t=m.vendorId)&&void 0!==t&&t.streetName?"".concat(m.vendorId.streetNumber,", ").concat(m.vendorId.streetName):(null===(n=m.vendorId)||void 0===n?void 0:n.address)||p.address||""},j=()=>{var e;return(null===(e=m.vendorId)||void 0===e?void 0:e.city)||p.city||""},w=()=>{var e;return(null===(e=m.vendorId)||void 0===e?void 0:e.province)||p.province||""},S=()=>{var e;return(null===(e=m.vendorId)||void 0===e?void 0:e.postalCode)||p.postalCode||""},C=()=>{var e;return(null===(e=m.vendorId)||void 0===e?void 0:e.vendorNumber)||p.vendorNumber||""},k=e=>{const{name:t,value:n}=e.target;x((e=>J(J({},e),{},{[t]:n})))};return(0,gp.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,gp.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-40",onClick:h}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-3xl w-full p-8 relative z-50",onClick:e=>e.stopPropagation(),children:[(0,gp.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Payment Summary"}),(0,gp.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor #"}),(0,gp.jsx)("input",{type:"text",name:"vendorNumber",value:p.vendorNumber,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Name"}),(0,gp.jsx)("input",{type:"text",name:"vendorName",value:p.vendorName,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice #"}),(0,gp.jsx)("input",{type:"text",name:"invoiceNumber",value:p.invoiceNumber,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque Date"}),(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:p.chequeDate,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account"}),(0,gp.jsx)("input",{type:"text",name:"bankAccount",value:p.bankAccount,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,gp.jsx)("input",{type:"text",name:"address",value:N(),onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,gp.jsx)("input",{type:"text",name:"city",value:p.city,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province"}),(0,gp.jsx)("input",{type:"text",name:"province",value:p.province,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:p.postalCode,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HST"}),(0,gp.jsx)("input",{type:"number",step:"0.01",min:"0",name:"hst",value:p.hst,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),(0,gp.jsx)("input",{type:"text",name:"total",value:b,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,gp.jsx)("input",{type:"text",name:"companyName",value:(null===(u=m.vendorId)||void 0===u?void 0:u.companyName)||m.companyName||"",className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]})]}),(0,gp.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full table-fixed bg-white border border-gray-200",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Invoice"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Cheque Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Due Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"HST"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"})]})}),(0,gp.jsx)("tbody",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:m.invoiceNumber||m.eftNumber}),(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:p.chequeDate?new Date(p.chequeDate+"T00:00:00").toLocaleDateString():""}),(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:m.dueDate?new Date(m.dueDate).toLocaleDateString():""}),(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:p.hst||""}),(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:b}),(0,gp.jsx)("td",{className:"px-4 py-2 text-center",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(m.eftCreated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:m.eftCreated?"Paid":"Pending"})})]})})]})}),(0,gp.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,gp.jsx)("button",{className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",onClick:async()=>{try{m.hst=p.hst,m._id&&p.hst!==m.hst&&await Oj.put("/general-account-eft/".concat(m._id),{hst:p.hst}),m.vendorId&&(m.vendorId.city=p.city,m.vendorId.province=p.province,m.vendorId.postalCode=p.postalCode,m.vendorId.address=p.address),wh.success("Changes saved successfully!"),h()}catch(e){console.error("Error saving changes:",e),wh.error("Failed to save changes. Please try again.")}},children:"Save"}),(0,gp.jsx)("button",{className:"bg-gray-300 text-gray-800 py-2 px-4 rounded hover:bg-gray-400".concat(f||m.eftCreated?" opacity-50 cursor-not-allowed":""),onClick:async()=>{if(m.eftCreated)wh.error("EFT has already been created for this invoice number!");else{g(!0);try{const e=await Oj.get("/general-account-eft");let t=299;for(const o of e.data)o.eftNumber>t&&(t=o.eftNumber);const n=t+1;await Oj.put("/general-account-eft/".concat(m._id),{eftCreated:!0,eftNumber:n,chequeDate:p.chequeDate});const r=v(),a="EFT#".concat(n," - ").concat(r),s=parseFloat(b);await Oj.post("/ledger",{accountNumber:"21000",accountName:"A/P - Suppliers",debit:s,credit:0,description:a,eftNumber:n,chequeDate:new Date(p.chequeDate+"T00:00:00")}),await Oj.post("/ledger",{accountNumber:"10001",accountName:"Cash - Current Account",debit:0,credit:s,description:a,eftNumber:n,chequeDate:new Date(p.chequeDate+"T00:00:00")});const i={eftNumber:n,paidTo:{name:v(),address:N()},notes:"Vendor Payment Transaction",amount:s,payTo:v(),orderOf:{address:N(),cityProvincePostal:"".concat(j(),", ").concat(w(),", ").concat(S())},note:"".concat(v(),", Vendor #").concat(C()),chequeDate:p.chequeDate,trade:void 0,seller:void 0,buyer:void 0};l(i),o(!0),wh.success("EFT transaction and receipt generated!");const c=await Oj.get("/general-account-eft/".concat(m._id));Object.assign(m,c.data),O()}catch(n){var e,t;wh.error("Failed to process EFT: "+((null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message))}finally{g(!1)}}},disabled:f||m.eftCreated,children:m.eftCreated?"EFT Created":"EFT"}),(0,gp.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600",onClick:h,children:"Exit"})]}),(0,gp.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl",onClick:h,children:"\xd7"})]})]})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"General Account Payments (A/P) Expenses"}),(0,gp.jsxs)("div",{className:"flex space-x-4 mb-6 border-b pb-2",children:[(0,gp.jsx)("button",{className:"px-4 py-2 font-medium rounded-t focus:outline-none ".concat("ap-expense"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>{n("ap-expense"),d(!1),I(!1)},children:"A/P Expense"}),(0,gp.jsx)("button",{className:"px-4 py-2 font-medium rounded-t focus:outline-none ".concat("accounts-payable"===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),onClick:()=>{n("accounts-payable"),d(!1),I(!1)},children:"Accounts Payable"})]}),"ap-expense"===e&&(0,gp.jsxs)(gp.Fragment,{children:[!c&&!A&&(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Select Vendor"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor"}),(0,gp.jsxs)("select",{value:x.vendorId||"",onChange:e=>(e=>{const t=r.find((t=>t._id===e));t&&f((e=>J(J({},e),{},{vendorId:t._id,selectedVendor:t,companyName:t.companyName||""})))})(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select a vendor..."}),r.map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," (#",e.vendorNumber,")"]},e._id)))]})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"button",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",onClick:()=>{p((e=>J(J({},e),{},{apNumber:jT()}))),d(!0)},disabled:!x.selectedVendor,children:"Proceed"})}),x.selectedVendor&&(0,gp.jsxs)("div",{className:"mt-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),(0,gp.jsx)("input",{type:"text",value:x.companyName,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]})]}),c&&(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=h.amount&&h.hst?(parseFloat(h.amount)+parseFloat(h.hst)).toFixed(2):h.amount,t=(()=>{var e;return null!==(e=x.selectedVendor)&&void 0!==e&&e.companyName&&""!==x.selectedVendor.companyName.trim()?x.selectedVendor.companyName:x.selectedVendor?"".concat(x.selectedVendor.firstName," ").concat(x.selectedVendor.lastName):""})();await Oj.post("/general-account-eft/ap-expense",{vendorId:x.vendorId,amount:parseFloat(h.amount),recipient:x.selectedVendor?"".concat(x.selectedVendor.firstName," ").concat(x.selectedVendor.lastName):"",expenseCategory:h.glAccount||"",description:"",invoiceNumber:h.eftNumber,apNumber:h.apNumber,date:h.date,postDate:h.postDate,dueDate:h.dueDate,hst:h.hst,total:e,chequeDate:u?h.chequeDate:h.date});O(),await Oj.post("/ledger",{accountNumber:h.glAccount||"70102",accountName:x.expenseCategory||"Payroll Exp. - Salaries",debit:parseFloat(h.amount),credit:0,description:"".concat(t," - G/A Expense"),date:h.postDate,apNumber:h.apNumber}),await Oj.post("/ledger",{accountNumber:"23001",accountName:"HST Input Tax Credit",debit:parseFloat(h.hst),credit:0,description:"".concat(t," - G/A Expense"),date:h.postDate,apNumber:h.apNumber}),await Oj.post("/ledger",{accountNumber:"21000",accountName:"A/P - Suppliers",debit:0,credit:parseFloat(e),description:"".concat(t," - G/A Expense"),date:h.postDate,apNumber:h.apNumber}),P({vendor:x.selectedVendor,companyName:x.companyName,eftNumber:h.eftNumber,chequeDate:h.postDate,dueDate:h.dueDate,amount:h.amount,payment:"Completed"}),d(!1),I(!0),p((e=>J(J({},e),{},{apNumber:""}))),wh.success("Transaction posted to Chart of Accounts and Ledger successfully!")}catch(t){wh.error("Error creating EFT record.")}},className:"p-6 border border-gray-200 rounded-lg space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,gp.jsx)("input",{type:"date",name:"date",value:h.date,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cheque Date Override"}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,gp.jsx)("input",{type:"checkbox",id:"useCustomChequeDate",checked:u,onChange:e=>m(e.target.checked),className:"rounded border-gray-300"}),(0,gp.jsx)("label",{htmlFor:"useCustomChequeDate",className:"text-sm text-gray-600",children:"Override Cheque Date"})]}),u&&(0,gp.jsx)("input",{type:"date",name:"chequeDate",value:h.chequeDate,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"AP Number"}),(0,gp.jsx)("input",{type:"text",name:"apNumber",value:h.apNumber,readOnly:!0,className:"block w-full rounded-md border-gray-300 shadow-sm bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice #"}),(0,gp.jsx)("input",{type:"text",name:"eftNumber",value:h.eftNumber,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0,onBlur:async e=>{const t=e.target.value.trim();if(!t)return;const n=await(async e=>{try{return(await Oj.get("/general-account-eft/check-invoice/".concat(e))).data}catch(t){return $p.error("Error checking invoice number"),{exists:!1}}})(t);n.exists&&(wh.error("Payment already done for Invoice #".concat(t," on ").concat(n.paymentDate?new Date(n.paymentDate).toLocaleDateString():"",". Amount: $").concat(n.amount)),p((e=>J(J({},e),{},{eftNumber:""}))))}})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"G/L Account"}),(0,gp.jsxs)("select",{name:"glAccount",value:h.glAccount||"",onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select G/L Account"}),[{value:"40100",label:"40100 Commission Income"},{value:"43100",label:"43100 Other Income"},{value:"44100",label:"44100 Fee Deducted Income"},{value:"50100",label:"50100 Agent's Commission"},{value:"51100",label:"51100 Outside Broker Commission"},{value:"52100",label:"52100 Referral Fees"},{value:"62101",label:"62101 Rent & Occ. - Rent Expense"},{value:"62102",label:"62102 Rent & Occ. - Common Area"},{value:"62103",label:"62103 Rent & Occ. - Utilities"},{value:"62104",label:"62104 Rent & Occ. - Repairs & Maint"},{value:"62105",label:"62105 Rent & Occ. - Prop./Bus. Taxes"},{value:"63102",label:"63102 Lic. & Ins. - Office Contents"},{value:"63103",label:"63103 Lic. & Ins. - Licenses"},{value:"63199",label:"63199 Lic. & Ins. - Misc."},{value:"69101",label:"69101 Franchise Costs - Realty Executives"},{value:"70101",label:"70101 Payroll Exp. - Mgmt. Salaries"},{value:"70103",label:"70103 Payroll Exp. - Part-Time"},{value:"70104",label:"70104 Payroll Exp. - Payroll"},{value:"70105",label:"70105 Payroll Exp. - Group Insurance"},{value:"70199",label:"70199 Payroll Exp. - Misc."},{value:"71102",label:"71102 Bank Charges - Loan Interest"},{value:"71104",label:"71104 Bank Charges - Service Charges"},{value:"71199",label:"71199 Bank Charges - Misc."},{value:"72101",label:"72101 Commun. Exp. - Telephone Lines"},{value:"72102",label:"72102 Commun. Exp. - Internet Service"},{value:"72103",label:"72103 Commun. Exp. - Pagers"},{value:"72199",label:"72199 Commun. Exp. - Misc."},{value:"75102",label:"75102 Office Exp. - Office Supplies"},{value:"75103",label:"75103 Office Exp. - Printing"},{value:"75104",label:"75104 Office Exp. - Postage"},{value:"75105",label:"75105 Office Exp. - Misc."},{value:"75117",label:"75117 Office Exp. - Computer Supplies"},{value:"75199",label:"75199 Office Exp. - Misc."},{value:"76103",label:"76103 Professional Fees - Legal"},{value:"79101",label:"79101 Travel & Entertainment - Meals"},{value:"90101",label:"90101 Miscellaneous - Other"}].map((e=>(0,gp.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Date"}),(0,gp.jsx)("input",{type:"date",name:"postDate",value:h.postDate,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,gp.jsx)("input",{type:"date",name:"dueDate",value:h.dueDate,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,gp.jsx)("input",{type:"number",name:"amount",value:h.amount,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HST"}),(0,gp.jsx)("input",{type:"text",name:"hst",value:h.hst,onChange:T,className:"block w-full rounded-md border-gray-300 shadow-sm ".concat(h.amount&&h.hst&&Math.abs(parseFloat(h.hst)-.13*parseFloat(h.amount))>.01?"border-blue-500 bg-blue-50":""),placeholder:"0.00"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total"}),(0,gp.jsx)("input",{type:"text",name:"total",value:h.amount&&h.hst?(parseFloat(h.amount)+parseFloat(h.hst)).toFixed(2):h.amount,className:"block w-full rounded-md border-gray-300 shadow-sm",readOnly:!0})]}),(0,gp.jsx)("div",{className:"pt-4",children:(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700 transition-colors",children:"Submit Payment"})})]})]}),"accounts-payable"===e&&(0,gp.jsxs)("div",{className:"p-6 border border-gray-200 rounded-lg",children:[(0,gp.jsx)("h3",{className:"font-semibold mb-4 text-lg",children:"Accounts Payable"}),(0,gp.jsxs)("table",{className:"min-w-full table-fixed bg-white border border-gray-200 mb-6",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Invoice #"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Vendor Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Due Date"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Amount"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"HST"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Total"}),(0,gp.jsx)("th",{className:"px-4 py-2 border-b text-center",children:"Status"})]})}),(0,gp.jsx)("tbody",{children:0===y.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"8",className:"px-4 py-2 text-center text-gray-500",children:"No accounts payable entries."})}):y.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>j(e),children:[(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.invoiceNumber||e.eftNumber}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.vendorId?e.vendorId.companyName&&""!==e.vendorId.companyName.trim()?e.vendorId.companyName:"".concat(e.vendorId.firstName," ").concat(e.vendorId.lastName):e.recipient}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.date?new Date(e.date).toLocaleDateString():""}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.dueDate?new Date(e.dueDate).toLocaleDateString():""}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.amount?parseFloat(e.amount).toFixed(2):""}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.hst?parseFloat(e.hst).toFixed(2):""}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:e.total?parseFloat(e.total).toFixed(2):e.amount&&void 0!==e.hst&&null!==e.hst?(parseFloat(e.amount)+parseFloat(e.hst)).toFixed(2):e.amount?parseFloat(e.amount).toFixed(2):""}),(0,gp.jsx)("td",{className:"px-4 py-2 border-b text-center",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.eftCreated?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.eftCreated?"Paid":"Pending"})})]},e._id||t)))})]}),N&&(0,gp.jsx)(L,{transaction:N,onClose:()=>j(null)})]}),s&&i&&(0,gp.jsx)(gT,{data:i,hideTradeSellerBuyer:!0,onClose:()=>{o(!1),l(null)}})]})})]})]})},ST=()=>{const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)((()=>localStorage.getItem("reconcileRealEstateTrust_statementAmount")||"")),[x,f]=(0,t.useState)(new Set),[g,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),N=async t=>{try{const n=await Oj.get("/reconciliation-settings/10002",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map((e=>e.ledgerId))),r=new Set;t.forEach(((t,n)=>{e.has(t._id)&&r.add(n)})),f(r)}const a=localStorage.getItem("reconcileRealEstateTrust_statementAmount");a?p(a):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&p(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},j=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},w=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),S=(()=>{if(0===s.length)return{book:0,open:0,misc:0};const e=s.filter(((e,t)=>!x.has(t))),t=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),n=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),r=e.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),a=e.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),o=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),i=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0);return{book:o-i,open:r+a,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling Real Estate Trust"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,gp.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"flex space-x-4",children:[(0,gp.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await Oj.get("/ledger/account/10002",{params:{fromDate:e,toDate:r}});o(t.data),d(!0),await N(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:i?"Loading...":"Retrieve Data"}),(0,gp.jsxs)("button",{onClick:()=>{if(!c||0===s.length)return void alert("Please retrieve data first before printing.");const e=s.filter(((e,t)=>!x.has(t))),t=e.reduce(((e,t)=>e+(t.amount||0)),0),n=(parseFloat(h)||0)-t,a=window.open("","","width=900,height=700");a.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage Real Estate Trust Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" class="logo">\n            <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n            <div class="report-title">Real Estate Trust XXXX6067 GL#10002 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?w(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map((e=>{const t=(e.description||e.narration||"").match(/- ([^-]+)$/),n=t?t[1]:"-";let r=e.payee||"-";if("-"===r){const t=(e.description||e.narration||"").match(/Received from: ([^-]+)/);if(t)r=t[1].trim();else{const t=(e.description||e.narration||"").match(/Paid to: ([^-]+)/);r=t?t[1].trim():"-"}}if("-"!==r){"Credit"===e.type?r.toLowerCase().includes("paid to:")||(r="Paid to: ".concat(r)):r.toLowerCase().includes("received from:")||(r="Received from: ".concat(r))}let a=e.tradeNumber||"-";return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(r,"</td>\n                        <td>").concat(j(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(w(e.amount||0),"</td>\n                      </tr>\n                    ")})).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(w(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(w(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Real Estate Trust Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),a.document.close(),a.focus(),a.print(),a.close()},disabled:!c||0===s.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,gp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.book)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.open)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.misc)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,gp.jsx)("button",{onClick:()=>{m(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?w(parseFloat(h)):"Click to enter"})]})]}),(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,gp.jsxs)("span",{children:["Book: ",w(S.book)]}),(0,gp.jsx)("span",{children:"+"}),(0,gp.jsxs)("span",{children:["Open: ",w(S.open)]}),(0,gp.jsx)("span",{children:"-"}),(0,gp.jsxs)("span",{children:["Misc: ",w(S.misc)]}),(0,gp.jsx)("span",{children:"="}),(0,gp.jsxs)("span",{children:["Bank:"," ",w(S.book+S.open-S.misc)]})]}),h&&(0,gp.jsxs)("div",{className:"mt-4 text-center",children:[(0,gp.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,gp.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(S.book+S.open-S.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:w(S.book+S.open-S.misc-parseFloat(h))})]})]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Trust Account Transactions (10002)"}),s.length>0&&(0,gp.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-red-600",children:w(S.chequesCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-green-600",children:w(S.depositsCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:s.length})]})]})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{v(J(J({},e),{},{index:t})),b(!0)})(e,t),children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(e.date||e.transactionDate)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gp.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(Math.abs(e.amount||0))}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.has(t)?(0,gp.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,gp.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),u&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,gp.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{try{await Oj.put("/reconciliation-settings/10002/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileRealEstateTrust_statementAmount",h),m(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&y&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:x.has(y.index)?"Unclear Transaction":"Clear Transaction"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:x.has(y.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,gp.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",w(Math.abs(y.amount||0))]}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",y.description||y.narration||"-"]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:()=>(async t=>{if(y){const a=new Set(x);t?a.add(y.index):a.delete(y.index),f(a);try{await Oj.put("/reconciliation-settings/10002/cleared-transactions",{fromDate:e,toDate:r,ledgerId:y._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?a.delete(y.index):a.add(y.index),f(a),alert("Error saving transaction status. Please try again.")}}b(!1),v(null)})(!x.has(y.index)),className:"px-4 py-2 text-white rounded-md ".concat(x.has(y.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:x.has(y.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},CT=()=>{const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)((()=>localStorage.getItem("reconcileCommissionTrust_statementAmount")||"")),[x,f]=(0,t.useState)(new Set),[g,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),N=async t=>{try{const n=await Oj.get("/reconciliation-settings/10004",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map((e=>e.ledgerId))),r=new Set;t.forEach(((t,n)=>{e.has(t._id)&&r.add(n)})),f(r)}const a=localStorage.getItem("reconcileCommissionTrust_statementAmount");a?p(a):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&p(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},j=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},w=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),S=(()=>{if(0===s.length)return{book:0,open:0,misc:0};const e=s.filter(((e,t)=>!x.has(t))),t=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),n=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),r=e.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),a=e.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),o=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),i=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0);return{book:o-i,open:r+a,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling Commission Trust"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,gp.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"flex space-x-4",children:[(0,gp.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await Oj.get("/ledger/account/10004",{params:{fromDate:e,toDate:r}});o(t.data),d(!0),await N(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:i?"Loading...":"Retrieve Data"}),(0,gp.jsxs)("button",{onClick:()=>{if(!c||0===s.length)return void alert("Please retrieve data first before printing.");const e=s.filter(((e,t)=>!x.has(t))),t=e.reduce(((e,t)=>e+(t.amount||0)),0),n=(parseFloat(h)||0)-t,a=window.open("","","width=900,height=700");a.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage Commission Trust Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" class="logo">\n            <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n            <div class="report-title">Commission Trust XXXX6067 GL#10004 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?w(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map((e=>{const t=(e.description||e.narration||"").match(/- ([^-]+)$/),n=t?t[1]:"-";let r="-";if(e.description){const t="Credit"===e.type;if("Debit"===e.type){const t=e.description.match(/Received from: ([^-]+)/);if(t)r=t[1].trim();else{const t=e.description.match(/Paid to: ([^-]+)/);if(t)r=t[1].trim();else{const t=e.description.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);t&&(r=t[1].trim())}}}else if(t){const t=e.description.match(/Paid to: ([^-]+)/);if(t)r=t[1].trim();else{const t=e.description.match(/Received from: ([^-]+)/);if(t)r=t[1].trim();else{const t=e.description.match(/Trade #:?\s*\d+\s*-\s*([^-]+?)\s*-\s*[^-]+$/);t&&(r=t[1].trim())}}}}if("-"!==r){const t="Credit"===e.type,n="Debit"===e.type;t?r.toLowerCase().includes("paid to:")||(r="Paid to: ".concat(r)):n&&(r.toLowerCase().includes("received from:")||(r="Received from: ".concat(r)))}let a="-";if(e.description){const t=e.description.match(/Trade #:?\s*(\d+)/);t&&(a=t[1])}return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(r,"</td>\n                        <td>").concat(j(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(w(e.amount||0),"</td>\n                      </tr>\n                    ")})).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(w(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(w(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Commission Trust Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),a.document.close(),a.focus(),a.print(),a.close()},disabled:!c||0===s.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,gp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.book)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.open)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.misc)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,gp.jsx)("button",{onClick:()=>{m(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?w(parseFloat(h)):"Click to enter"})]})]}),(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,gp.jsxs)("span",{children:["Book: ",w(S.book)]}),(0,gp.jsx)("span",{children:"+"}),(0,gp.jsxs)("span",{children:["Open: ",w(S.open)]}),(0,gp.jsx)("span",{children:"-"}),(0,gp.jsxs)("span",{children:["Misc: ",w(S.misc)]}),(0,gp.jsx)("span",{children:"="}),(0,gp.jsxs)("span",{children:["Bank:"," ",w(S.book+S.open-S.misc)]})]}),h&&(0,gp.jsxs)("div",{className:"mt-4 text-center",children:[(0,gp.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,gp.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(S.book+S.open-S.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:w(S.book+S.open-S.misc-parseFloat(h))})]})]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Commission Trust Account Transactions (10004)"}),s.length>0&&(0,gp.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-red-600",children:w(S.chequesCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-green-600",children:w(S.depositsCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:s.length})]})]})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{v(J(J({},e),{},{index:t})),b(!0)})(e,t),children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(e.date||e.transactionDate)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gp.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(Math.abs(e.amount||0))}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.has(t)?(0,gp.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,gp.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),u&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,gp.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{try{await Oj.put("/reconciliation-settings/10004/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileCommissionTrust_statementAmount",h),m(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&y&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:x.has(y.index)?"Unclear Transaction":"Clear Transaction"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:x.has(y.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,gp.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",w(Math.abs(y.amount||0))]}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",y.description||y.narration||"-"]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:()=>(async t=>{if(y){const a=new Set(x);t?a.add(y.index):a.delete(y.index),f(a);try{await Oj.put("/reconciliation-settings/10004/cleared-transactions",{fromDate:e,toDate:r,ledgerId:y._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?a.delete(y.index):a.add(y.index),f(a),alert("Error saving transaction status. Please try again.")}}b(!1),v(null)})(!x.has(y.index)),className:"px-4 py-2 text-white rounded-md ".concat(x.has(y.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:x.has(y.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},kT=()=>{const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)((()=>localStorage.getItem("reconcileGeneralAccount_statementAmount")||"")),[x,f]=(0,t.useState)(new Set),[g,b]=(0,t.useState)(!1),[y,v]=(0,t.useState)(null),N=async t=>{try{const n=await Oj.get("/reconciliation-settings/10001",{params:{fromDate:e,toDate:r}});if(n.data.clearedTransactions){const e=new Set(n.data.clearedTransactions.map((e=>e.ledgerId))),r=new Set;t.forEach(((t,n)=>{e.has(t._id)&&r.add(n)})),f(r)}const a=localStorage.getItem("reconcileGeneralAccount_statementAmount");a?p(a):null!==n.data.statementAmount&&void 0!==n.data.statementAmount&&p(n.data.statementAmount.toString())}catch(n){console.error("Error loading cleared transactions:",n)}},j=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},w=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),S=(()=>{if(0===s.length)return{book:0,open:0,misc:0};const e=s.filter(((e,t)=>!x.has(t))),t=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),n=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),r=e.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),a=e.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),o=s.filter((e=>"Debit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0),i=s.filter((e=>"Credit"===e.type)).reduce(((e,t)=>e+Math.abs(t.amount||0)),0);return{book:o-i,open:r+a,misc:0,chequesCleared:t,depositsCleared:n}})();return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Reconciling General Account"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Date Range"}),(0,gp.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"flex space-x-4",children:[(0,gp.jsx)("button",{onClick:async()=>{if(e&&r){l(!0);try{const t=await Oj.get("/ledger/account/10001",{params:{fromDate:e,toDate:r}});o(t.data),d(!0),await N(t.data)}catch(t){console.error("Error fetching ledger entries:",t),alert("Error retrieving data. Please try again.")}finally{l(!1)}}else alert("Please select both From and To dates")},disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-6 rounded-md transition-colors",children:i?"Loading...":"Retrieve Data"}),(0,gp.jsxs)("button",{onClick:()=>{if(!c||0===s.length)return void alert("Please retrieve data first before printing.");const e=s.filter(((e,t)=>!x.has(t))),t=e.reduce(((e,t)=>e+(t.amount||0)),0),n=(parseFloat(h)||0)-t,a=window.open("","","width=900,height=700");a.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Bestway Real Estate Ltd., Brokerage General Account Reconciliation</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.4; font-size: 11px; }\n            .header { text-align: center; margin-bottom: 40px; }\n            .logo { max-width: 200px; margin-bottom: 10px; }\n            .company-name { font-size: 16px; font-weight: bold; color: #333; margin-bottom: 5px; }\n            .report-title { font-size: 14px; color: #666; margin-bottom: 5px; }\n            .date-info { font-size: 12px; color: #666; }\n            .section { margin-bottom: 30px; }\n            .section-title { font-size: 14px; font-weight: bold; color: #333; margin-bottom: 15px; border-bottom: 2px solid #333; padding-bottom: 5px; }\n            .balance-amount { font-size: 16px; font-weight: bold; color: #333; }\n            .transactions-table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n            .transactions-table th, .transactions-table td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 10px; }\n            .transactions-table th { background: #f5f5f5; font-weight: bold; }\n            .transactions-table th:nth-child(4), .transactions-table td:nth-child(4) { width: 120px; min-width: 120px; }\n            .total-row { font-weight: bold; background: #f9f9f9; }\n            .ledger-summary { background: #f9f9f5; padding: 15px; border-radius: 5px; margin-top: 20px; }\n            .ledger-summary h4 { margin-top: 0; color: #333; font-size: 12px; }\n            .ledger-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 10px; }\n            .ledger-item { display: flex; justify-content: space-between; font-size: 10px; }\n            .note { font-style: italic; color: #666; margin-top: 15px; font-size: 10px; }\n            .approval-section { margin-top: 40px; }\n            .approval-line { margin: 20px 0; font-size: 10px; }\n            .approval-label { display: inline-block; width: 120px; font-weight: bold; }\n            .approval-underline { display: inline-block; width: 200px; border-bottom: 1px solid #333; margin-left: 10px; }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" class="logo">\n            <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n            <div class="report-title">Current Account XXXX6067 GL#10001 Account Reconciliation</div>\n            <div class="date-info">As of '.concat((()=>{const[e,t,n]=r.split("-");return new Date(e,t-1,n).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})(),'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Bank Statement</div>\n            <div class="balance-amount">').concat(h?w(parseFloat(h)):"Not entered",'</div>\n          </div>\n\n          <div class="section">\n            <div class="section-title">Outstanding Transactions</div>\n            ').concat(e.length>0?'\n              <table class="transactions-table">\n                <thead>\n                  <tr>\n                    <th>Trade #</th>\n                    <th>Address</th>\n                    <th>Payee</th>\n                    <th>Date</th>\n                    <th>Reference</th>\n                    <th>Amount</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  '.concat(e.map((e=>{const t=(e.description||e.narration||"").match(/- ([^-]+)$/),n=t?t[1]:"-";let r=e.payee||"-";if("-"===r){const t=(e.description||e.narration||"").match(/Received from: ([^-]+)/);if(t)r=t[1].trim();else{const t=(e.description||e.narration||"").match(/Paid to: ([^-]+)/);r=t?t[1].trim():"-"}}"Ayara"===n||e.description&&e.description.includes("Paid to:")?r="Paid to: ".concat(n):"-"!==r&&(r.toLowerCase().includes("received from:")||(r="Received from: ".concat(r)));let a=e.tradeNumber||"-";return"\n                      <tr>\n                        <td>".concat(a,"</td>\n                        <td>").concat(n,"</td>\n                        <td>").concat(r,"</td>\n                        <td>").concat(j(e.date||e.transactionDate),"</td>\n                        <td>").concat(e.reference&&"null"!==e.reference&&null!==e.reference&&""!==e.reference.trim()?e.reference:"-","</td>\n                        <td>").concat(w(e.amount||0),"</td>\n                      </tr>\n                    ")})).join(""),'\n                  <tr class="total-row">\n                    <td colspan="5">Total Outstanding</td>\n                    <td>').concat(w(t),'</td>\n                  </tr>\n                </tbody>\n              </table>\n              <div style="margin-top: 15px; font-weight: bold;">\n                Reconciled Balance: ').concat(w(n),"\n              </div>\n            "):"<p>No outstanding transactions</p>",'\n          </div>\n\n          <div class="section">\n            <div class="section-title">Balance Per Current Account Ledger</div>\n            <div class="ledger-summary">\n              <div class="ledger-grid">\n                <div class="ledger-item">\n                  <span>Cheques Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Deposits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Credits Cleared:</span>\n                  <span>').concat(w(S.chequesCleared),'</span>\n                </div>\n                <div class="ledger-item">\n                  <span>Total Debits Cleared:</span>\n                  <span>').concat(w(S.depositsCleared),'</span>\n                </div>\n              </div>\n              <div class="note">*Remember, your debits are credits to the bank and vice versa.</div>\n            </div>\n          </div>\n\n          <div class="approval-section">\n            <div class="approval-line">\n              <span class="approval-label">Reviewed By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n            <div class="approval-line">\n              <span class="approval-label">Approved By:</span>\n              <span class="approval-underline"></span>\n              <span style="margin-left: 20px;">Date:</span>\n              <span class="approval-underline"></span>\n            </div>\n          </div>\n        </body>\n      </html>\n    ')),a.document.close(),a.focus(),a.print(),a.close()},disabled:!c||0===s.length,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-medium py-2 px-6 rounded-md transition-colors flex items-center",children:[(0,gp.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Report"]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Reconciliation Formula"}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Book"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.book)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Open"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.open)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Misc"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:w(S.misc)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Statement"}),(0,gp.jsx)("button",{onClick:()=>{m(!0)},className:"w-full px-4 py-2 border border-gray-300 rounded-md text-left text-gray-700 hover:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?w(parseFloat(h)):"Click to enter"})]})]}),(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-lg font-medium",children:[(0,gp.jsxs)("span",{children:["Book: ",w(S.book)]}),(0,gp.jsx)("span",{children:"+"}),(0,gp.jsxs)("span",{children:["Open: ",w(S.open)]}),(0,gp.jsx)("span",{children:"-"}),(0,gp.jsxs)("span",{children:["Misc: ",w(S.misc)]}),(0,gp.jsx)("span",{children:"="}),(0,gp.jsxs)("span",{children:["Bank:"," ",w(S.book+S.open-S.misc)]})]}),h&&(0,gp.jsxs)("div",{className:"mt-4 text-center",children:[(0,gp.jsxs)("span",{className:"text-sm text-gray-600",children:["Difference:"," "]}),(0,gp.jsx)("span",{className:"text-sm font-semibold ".concat(Math.abs(S.book+S.open-S.misc-parseFloat(h))<.01?"text-green-600":"text-red-600"),children:w(S.book+S.open-S.misc-parseFloat(h))})]})]})]})]}),c&&(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold p-6 border-b border-gray-200",children:"Cash - Current Account Transactions (10001)"}),s.length>0&&(0,gp.jsx)("div",{className:"bg-gray-50 p-6 border-b border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Cheques Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-red-600",children:w(S.chequesCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Deposits Cleared"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-green-600",children:w(S.depositsCleared)})]}),(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"# Of Entries"}),(0,gp.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:s.length})]})]})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length>0?s.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>((e,t)=>{v(J(J({},e),{},{index:t})),b(!0)})(e,t),children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.description||e.narration||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j(e.date||e.transactionDate)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.reference||e.referenceNumber||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,gp.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Credit"===e.type||e.amount>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.type||(e.amount>0?"Credit":"Debit")})}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w(Math.abs(e.amount||0))}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.has(t)?(0,gp.jsx)("span",{className:"text-green-600 text-xl",children:"\u2713"}):(0,gp.jsx)("span",{className:"text-red-600 text-xl",children:"\u2717"})})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No transactions found for the selected date range"})})})]})})]})]})})]}),u&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enter Statement Amount"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statement Amount"}),(0,gp.jsx)("input",{type:"number",step:"0.01",value:h,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{try{await Oj.put("/reconciliation-settings/10001/statement-amount",{fromDate:e,toDate:r,statementAmount:parseFloat(h)||null}),localStorage.setItem("reconcileGeneralAccount_statementAmount",h),m(!1)}catch(t){console.error("Error saving statement amount:",t),alert("Error saving statement amount. Please try again.")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Save"})]})]})}),g&&y&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:x.has(y.index)?"Unclear Transaction":"Clear Transaction"}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:x.has(y.index)?"Do you want to add this transaction back to the Open calculation?":"Do you want to clear this transaction from the Open calculation?"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,gp.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Amount:"," ",w(Math.abs(y.amount||0))]}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["Description:"," ",y.description||y.narration||"-"]})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:()=>(async t=>{if(y){const a=new Set(x);t?a.add(y.index):a.delete(y.index),f(a);try{await Oj.put("/reconciliation-settings/10001/cleared-transactions",{fromDate:e,toDate:r,ledgerId:y._id,shouldClear:t})}catch(n){console.error("Error saving cleared transaction status:",n),t?a.delete(y.index):a.add(y.index),f(a),alert("Error saving transaction status. Please try again.")}}b(!1),v(null)})(!x.has(y.index)),className:"px-4 py-2 text-white rounded-md ".concat(x.has(y.index)?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"),children:x.has(y.index)?"Yes, Unclear":"Yes, Clear"})]})]})})]})},ET=()=>{const e=localStorage.getItem("lastARNumber");let t=1e3;if(e){const n=e.match(/AR(\d+)/);n&&(t=parseInt(n[1])+1)}const n="AR".concat(t);return localStorage.setItem("lastARNumber",n),n},TT=()=>{Pu();const[e,n]=(0,t.useState)("overview"),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)({arNumber:"",chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]}),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),[x,f]=(0,t.useState)({accountNumber:"",accountName:"",amount:"",description:"",note:""}),g=()=>{const e=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]").filter((e=>"Cash Receipt"===e.type));e.sort(((e,t)=>new Date(t.date)-new Date(e.date))),o(e)};(0,t.useEffect)((()=>{g()}),[]);const b=()=>{l({arNumber:ET(),chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]}),a(!0)},y=["40100","43100","44100","50100","51100","52100","62101","62102","62103","62104","62105","63102","63103","63199","69101","70101","70103","70104","70105","70199","71102","71104","71199","72101","72102","72103","72199","75102","75103","75104","75105","75117","75199","76103","79101","90101"],v=lx.filter((e=>y.includes(e.acct))).map((e=>({accountNumber:e.acct,accountName:e.description})));return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(()=>{switch(e){case"overview":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Accounts Receivable Overview"}),(0,gp.jsx)("div",{className:"mb-6",children:(0,gp.jsx)("button",{onClick:b,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold shadow-md",children:"Cash Receipt"})}),(0,gp.jsxs)("div",{className:"mt-8",children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"AR Transactions"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"AR Number"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Account"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Type"})]})}),(0,gp.jsx)("tbody",{children:s.length>0?s.map(((e,t)=>(0,gp.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(e=>{if(!e)return"-";const[t,n,r]=e.split("-");return t&&n&&r?new Date(parseInt(t),parseInt(n)-1,parseInt(r)).toLocaleDateString():new Date(e).toLocaleDateString()})(e.date)}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.reference||"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,gp.jsxs)("div",{className:"text-sm",children:[(0,gp.jsx)("div",{className:"font-medium",children:e.accountNumber}),(0,gp.jsx)("div",{className:"text-gray-600",children:e.accountName})]})}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.debit>0?"$".concat(e.debit.toFixed(2)):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.credit>0?"$".concat(e.credit.toFixed(2)):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,gp.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:e.type})})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:"No AR transactions found. Create a cash receipt to get started."})})})]})})]})]});case"invoices":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Manage Invoices"}),(0,gp.jsx)("div",{className:"mb-6",children:(0,gp.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create New Invoice"})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Invoice #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Client"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Issue Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Due Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Amount"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Status"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Actions"})]})}),(0,gp.jsx)("tbody",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"INV-001"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"ABC Properties Ltd."}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Dec 15, 2024"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:"Jan 15, 2025"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:"$5,250.00"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:(0,gp.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs",children:"Pending"})}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-4 py-2 text-center",children:[(0,gp.jsx)("button",{className:"text-blue-600 hover:text-blue-800 mr-2",children:"Edit"}),(0,gp.jsx)("button",{className:"text-green-600 hover:text-green-800 mr-2",children:"Send"}),(0,gp.jsx)("button",{className:"text-red-600 hover:text-red-800",children:"Delete"})]})]})})]})})]});case"payments":return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Payment Tracking"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Payment Methods"}),(0,gp.jsxs)("div",{className:"space-y-3",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"Bank Transfer"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$35,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"Credit Card"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$8,500"})]}),(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"Check"}),(0,gp.jsx)("span",{className:"font-semibold",children:"$1,500"})]})]})]}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Payment Schedule"}),(0,gp.jsxs)("div",{className:"space-y-3",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"This Week"}),(0,gp.jsx)("span",{className:"font-semibold text-green-600",children:"$12,000"})]}),(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"Next Week"}),(0,gp.jsx)("span",{className:"font-semibold text-blue-600",children:"$8,500"})]}),(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("span",{children:"This Month"}),(0,gp.jsx)("span",{className:"font-semibold text-purple-600",children:"$45,000"})]})]})]})]})]});default:return(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Accounts Receivable Dashboard"}),(0,gp.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage your accounts receivable, track invoices, and monitor payments."}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("overview"),children:[(0,gp.jsx)("div",{className:"text-4xl text-blue-900 mb-2",children:"\ud83d\udcca"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Overview"}),(0,gp.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"View summary and recent activity"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("invoices"),children:[(0,gp.jsx)("div",{className:"text-4xl text-green-900 mb-2",children:"\ud83d\udcc4"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Manage Invoices"}),(0,gp.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Create and manage invoices"})]}),(0,gp.jsxs)("div",{className:"bg-white shadow-md hover:shadow-lg transition rounded-lg p-6 flex flex-col items-center cursor-pointer",onClick:()=>n("payments"),children:[(0,gp.jsx)("div",{className:"text-4xl text-purple-900 mb-2",children:"\ud83d\udcb0"}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Payment Tracking"}),(0,gp.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Track payments and methods"})]})]})]})}})()})]}),r&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-4/5 max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,gp.jsxs)("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"A/R Account Cheque Posting"}),(0,gp.jsxs)("div",{className:"text-sm text-gray-600",children:["Today's Date: ",(new Date).toLocaleDateString()]})]}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-center mb-4 text-gray-800",children:"Miscellaneous Cash Receipt"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AR Number:"}),(0,gp.jsx)("input",{type:"text",value:i.arNumber,readOnly:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque Received From:"}),(0,gp.jsx)("input",{type:"text",value:i.chequeReceivedFrom,onChange:e=>l((t=>J(J({},t),{},{chequeReceivedFrom:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter who the cheque was from"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cheque #:"}),(0,gp.jsx)("input",{type:"text",value:i.chequeNumber,onChange:e=>l((t=>J(J({},t),{},{chequeNumber:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type:"}),(0,gp.jsxs)("select",{value:i.paymentType,onChange:e=>l((t=>J(J({},t),{},{paymentType:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,gp.jsx)("option",{value:"Cheque",children:"Cheque"}),(0,gp.jsx)("option",{value:"EFT",children:"EFT"}),(0,gp.jsx)("option",{value:"Wire Transfer",children:"Wire Transfer"}),(0,gp.jsx)("option",{value:"Bank Draft",children:"Bank Draft"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount:"}),(0,gp.jsx)("input",{type:"number",step:"0.01",value:i.amount,onChange:e=>(e=>{const t=(parseFloat(e)||0)+(parseFloat(i.taxIncluded)||0);l((n=>J(J({},n),{},{amount:e,accountAllocations:[J(J({},n.accountAllocations[0]),{},{amount:t.toFixed(2)}),J(J({},n.accountAllocations[1]),{},{amount:n.taxIncluded})]})))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Included:"}),(0,gp.jsx)("input",{type:"number",step:"0.01",value:i.taxIncluded,onChange:e=>(e=>{const t=parseFloat(e)||0,n=(parseFloat(i.amount)||0)+t;l((r=>J(J({},r),{},{taxIncluded:e,accountAllocations:[J(J({},r.accountAllocations[0]),{},{amount:n.toFixed(2)}),J(J({},r.accountAllocations[1]),{},{amount:t.toFixed(2)})]})))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Receipt:"}),(0,gp.jsx)("input",{type:"date",value:i.dateOfReceipt,onChange:e=>l((t=>J(J({},t),{},{dateOfReceipt:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Account:"}),(0,gp.jsx)("input",{type:"text",value:"General",readOnly:!0,className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"G/L Note:"}),(0,gp.jsx)("input",{type:"text",value:i.glNote,onChange:e=>l((t=>J(J({},t),{},{glNote:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,gp.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:(0,gp.jsx)("p",{className:"text-red-700 text-sm font-medium",children:"*** Funds Must Be Deposited In The General Bank Account ***"})})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h4",{className:"text-md font-semibold mb-3 text-gray-800",children:"General Ledger Account Allocations"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Acct #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"General Ledger Account Name"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right",children:"Amount"})]})}),(0,gp.jsx)("tbody",{children:i.accountAllocations.map(((e,t)=>(0,gp.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50 ".concat(0===t?"bg-blue-50":""," ").concat(h===t?"bg-yellow-100":""),onClick:()=>(e=>{p(e)})(t),children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.accountNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.accountName}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:(0,gp.jsx)("input",{type:"number",step:"0.01",value:e.amount,readOnly:!0,className:"w-full text-right bg-transparent border-none focus:outline-none"})})]},t)))})]})}),(0,gp.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,gp.jsx)("button",{onClick:()=>{null!==h&&(e=>{if(e<0||e>=i.accountAllocations.length)return void console.error("Invalid account index:",e);m(e);const t=i.accountAllocations[e];f({accountNumber:t.accountNumber,accountName:t.accountName,amount:t.amount,description:t.description||"",note:t.note||""}),d(!0)})(h)},disabled:null===h,className:"px-4 py-2 rounded-md font-medium ".concat(null!==h?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-400 text-gray-200 cursor-not-allowed"),children:"Edit"}),(0,gp.jsx)("button",{onClick:()=>{m(null),f({accountNumber:"",accountName:"",amount:"",description:"",note:""}),d(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 font-medium",children:"Add"})]})]})]}),(0,gp.jsx)("div",{className:"bg-gray-100 px-6 py-4 border-t border-gray-200 flex justify-end",children:(0,gp.jsxs)("div",{className:"flex space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>{try{if(!i.chequeReceivedFrom||!i.amount)return void $m.error("Please fill in all required fields");const e=parseFloat(i.amount)||0;let t=0;if(i.accountAllocations.forEach(((e,n)=>{n>1&&e.amount&&parseFloat(e.amount)>0&&(t+=parseFloat(e.amount))})),Math.abs(t-e)>.01)return void $m.error("Invalid amount: Total of user-added amounts must equal the main amount");const n=[],r=parseFloat(i.amount)||0,s=parseFloat(i.taxIncluded)||0,o=r+s;n.push({accountNumber:"10001",accountName:"Cash - Current Account",debit:o,credit:0,description:"Cash receipt from ".concat(i.chequeReceivedFrom),date:i.dateOfReceipt,reference:i.arNumber,type:"Cash Receipt"}),n.push({accountNumber:"23000",accountName:"HST Collected",debit:0,credit:s,description:"HST collected on cash receipt from ".concat(i.chequeReceivedFrom),date:i.dateOfReceipt,reference:i.arNumber,type:"Cash Receipt"}),i.accountAllocations.forEach(((e,t)=>{t>1&&e.amount&&parseFloat(e.amount)>0&&n.push({accountNumber:e.accountNumber,accountName:e.accountName,debit:0,credit:parseFloat(e.amount),description:e.description||"Allocation from cash receipt",date:i.dateOfReceipt,reference:i.arNumber,type:"Cash Receipt"})}));const c=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),d=[...n,...c];localStorage.setItem("trialBalanceTransactions",JSON.stringify(d)),console.log("Cash Receipt Transactions:",n),$m.success("Cash receipt of $".concat(o.toFixed(2)," successfully processed!")),g(),a(!1),l({arNumber:"",chequeReceivedFrom:"",chequeNumber:"",paymentType:"Cheque",amount:"",taxIncluded:"",dateOfReceipt:(new Date).toISOString().split("T")[0],bankAccount:"General",glNote:"",accountAllocations:[{accountNumber:"10001",accountName:"Cash - Current Account",amount:""},{accountNumber:"23000",accountName:"HST Collected",amount:""}]})}catch(e){console.error("Error processing cash receipt:",e),$m.error("Error processing cash receipt. Please try again.")}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 font-medium",children:"Store"}),(0,gp.jsx)("button",{onClick:()=>a(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium",children:"Exit"})]})})]})}),c&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-gray-100 rounded-lg shadow-xl w-96",children:[(0,gp.jsx)("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:(0,gp.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Adding a Misc. Cash Receipt"})}),(0,gp.jsx)("div",{className:"bg-white p-6",children:(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account:"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsxs)("select",{value:x.accountNumber,onChange:e=>(e=>{const t=v.find((t=>t.accountNumber===e));f((n=>J(J({},n),{},{accountNumber:e,accountName:t?t.accountName:""})))})(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,gp.jsx)("option",{value:"",children:"Select Account"}),v.map((e=>(0,gp.jsxs)("option",{value:e.accountNumber,children:[e.accountNumber," ",e.accountName]},e.accountNumber)))]}),(0,gp.jsx)("div",{className:"absolute right-3 top-2.5",children:(0,gp.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description:"}),(0,gp.jsx)("textarea",{value:x.description,onChange:e=>f((t=>J(J({},t),{},{description:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50",rows:"3",placeholder:"Enter description"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount:"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"number",step:"0.01",value:x.amount,onChange:e=>f((t=>J(J({},t),{},{amount:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"}),(0,gp.jsx)("button",{className:"absolute right-2 top-2 text-gray-500 hover:text-gray-700",children:"+/-"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note:"}),(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("textarea",{value:x.note,onChange:e=>f((t=>J(J({},t),{},{note:e.target.value}))),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Enter note"}),(0,gp.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,gp.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})}),(0,gp.jsxs)("div",{className:"bg-white px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>{if(null!==u){const e=[...i.accountAllocations];if(e[u]=J(J({},x),{},{description:x.description,note:x.note}),0===u){const t=parseFloat(x.amount)||0,n=(.13*t).toFixed(2);l((r=>J(J({},r),{},{amount:t.toFixed(2),taxIncluded:n,accountAllocations:[J(J({},e[0]),{},{amount:t.toFixed(2)}),J(J({},e[1]),{},{amount:n})]})))}else l((t=>J(J({},t),{},{accountAllocations:e})))}else l((e=>J(J({},e),{},{accountAllocations:[...e.accountAllocations,J(J({},x),{},{description:x.description,note:x.note})]})));d(!1),m(null),p(null)},className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium underline",children:"Apply"}),(0,gp.jsx)("button",{onClick:()=>d(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 font-medium underline",children:"Cancel"})]})]})})]})},AT=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)({}),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),h=(0,t.useRef)(),p=Pu(),x=e=>{if(!e)return"-";let t;if(e instanceof Date)t=e;else{const[n,r,a]=e.split("-");t=n&&r&&a?new Date(parseInt(n),parseInt(r)-1,parseInt(a)):new Date(e)}return t.toLocaleDateString()};(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isFinanceAdmin")||p("/")}),[p]);const f=async(e,t)=>{d(!0),m("");try{var r,s;const o=await Oj.get("/ledger",{params:e&&t?{from:e,to:t}:{}});console.log("=== Trial Balance Debug ==="),console.log("Backend response:",o.data),console.log("Sample ledger entry:",o.data[0]),console.log("Sample entry date field:",null===(r=o.data[0])||void 0===r?void 0:r.date),console.log("Sample entry createdAt field:",null===(s=o.data[0])||void 0===s?void 0:s.createdAt);const i=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let l=i;if(e&&t){const n=new Date(e);n.setUTCHours(0,0,0,0);const r=new Date(t);r.setUTCHours(23,59,59,999),l=i.filter((e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=n&&t<=r}))}const c=[...l,...o.data];c.sort(((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n})),n(c);const d={};c.forEach((e=>{d[e.accountNumber]||(d[e.accountNumber]={debit:0,credit:0,transactions:[]}),d[e.accountNumber].debit+=e.debit||0,d[e.accountNumber].credit+=e.credit||0,d[e.accountNumber].transactions.push(e)})),Object.keys(d).forEach((e=>{d[e].transactions.sort(((e,t)=>{const n=e.createdAt?new Date(e.createdAt):new Date(e.date||0);return(t.createdAt?new Date(t.createdAt):new Date(t.date||0))-n}))})),a(d),e&&t&&$p.success("Trial balance loaded for ".concat(c.length," entries"))}catch(l){var o,i;n([]),a({});const e=(null===(o=l.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||"Failed to fetch ledger data";m(e),$p.error(e),console.error("Error fetching ledger:",l)}d(!1)};(0,t.useEffect)((()=>{f()}),[]),(0,t.useEffect)((()=>{const e=()=>{console.log("Received refreshTrialBalance event, refreshing trial balance..."),f()};return window.addEventListener("refreshTrialBalance",e),()=>{window.removeEventListener("refreshTrialBalance",e)}}),[]);return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"print:hidden",children:(0,gp.jsx)(xT,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"hidden print:block print:mb-6",children:[(0,gp.jsx)("img",{src:fp,alt:"Company Logo",className:"mx-auto mb-2",style:{maxWidth:80,maxHeight:80}}),(0,gp.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-1 text-center",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("div",{className:"text-base font-semibold mb-1",children:"Trial Balance - Detail Balance"}),s&&i&&(0,gp.jsxs)("div",{className:"text-gray-700 mb-2 text-sm",children:["From"," ",(0,gp.jsx)("span",{className:"font-semibold",children:new Date(s).toLocaleDateString()})," ","to"," ",(0,gp.jsx)("span",{className:"font-semibold",children:new Date(i).toLocaleDateString()})]})]}),(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4 mb-6 print:hidden",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:s,onChange:e=>o(e.target.value)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:i,onChange:e=>l(e.target.value)})]}),(0,gp.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{s&&i?f(s,i):$p.error("Please select both from and to dates")},disabled:c||!s||!i,children:c?"Loading...":"Check Trial Balance"}),(0,gp.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{window.print()},style:{marginLeft:8},children:"Print Report"})]}),u&&(0,gp.jsx)("div",{className:"text-red-600 mb-4 print:hidden",children:u}),(0,gp.jsx)("div",{className:"overflow-x-auto",ref:h,children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 ledger-table",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",children:"Account Number"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"200px",width:"200px"},children:"Account Name"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"80px",width:"80px"},children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"80px",width:"80px"},children:"Reference #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-xs font-medium text-gray-700",style:{minWidth:"300px",width:"300px"},children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium text-gray-700",children:"Balance"})]})}),(0,gp.jsx)("tbody",{children:lx.map(((e,n)=>{const a=r[e.acct]||{debit:0,credit:0,transactions:[]},s=0+a.debit-a.credit,o=a.transactions.length>0;return(0,gp.jsxs)(t.Fragment,{children:[(0,gp.jsxs)("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",children:e.acct}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"200px",width:"200px"},children:e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-xs",style:{minWidth:"300px",width:"300px"}}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==a.debit?a.debit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==a.credit?a.credit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right text-xs font-medium",children:0!==s?s.toFixed(2):"-"})]}),o&&(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"200px",width:"200px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs font-semibold",children:"Opening Balance"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"})]}),a.transactions.map((e=>(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"},children:(console.log("Transaction for date display:",e),console.log("Transaction date field:",e.date),console.log("Transaction createdAt field:",e.createdAt),console.log("Transaction type:",e.type),"Cash Receipt"===e.type?e.date?x(e.date):"-":e.apNumber&&e.date?(console.log("Using tx.date for AP transaction:",e.date),x(e.date)):e.chequeDate?(console.log("Using tx.chequeDate for display:",e.chequeDate),x(e.chequeDate)):e.date?(console.log("Using tx.date for display:",e.date),x(e.date)):(console.log("Using tx.createdAt as fallback:",e.createdAt),e.createdAt?x(e.createdAt):"-"))}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"},children:"Cash Receipt"===e.type?e.reference&&"null"!==e.reference?e.reference:"-":e.apNumber?e.apNumber:"Journal Entry"===e.type?(console.log("Journal Entry found:",e),e.reference||"-"):e.reference&&"Manual Journal Entry"!==e.reference?e.reference:e.eftNumber?"EFT".concat(e.eftNumber):"-"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"300px",width:"300px"},children:e.description}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs",children:e.debit?e.debit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs",children:e.credit?e.credit.toFixed(2):"-"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"})]},e._id))),(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"80px",width:"80px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs",style:{minWidth:"300px",width:"300px"}}),(0,gp.jsx)("td",{className:"px-4 py-1 text-xs font-semibold",children:"Closing Balance"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:"-"}),(0,gp.jsx)("td",{className:"px-4 py-1 text-right text-xs font-semibold",children:0!==s?s.toFixed(2):"-"})]})]})]},e.acct)}))})]})})]})})]})]})},IT=["23000","23001"],DT=["45100","43100","44100"],PT=()=>{const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),u=(0,t.useRef)(),m=e=>{const t=s.filter((t=>e.includes(t.accountNumber)));return console.log("HST Report - Filtering for accounts ".concat(e.join(", "),":"),{totalEntries:s.length,filteredCount:t.length,sampleEntries:t.slice(0,3)}),t},h=e=>{let t=0,n=0,r=0;return e.forEach((e=>{t+=e.debit||0,n+=e.credit||0,r+=(e.debit||0)-(e.credit||0)})),{debit:t,credit:n,net:r}},p=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(c){return console.error("Error formatting date:",e,c),e||"-"}},x=e=>{const t=e.date||e.createdAt||e.updatedAt||null;return console.log("getEntryDate for entry:",{accountNumber:e.accountNumber,description:e.description,date:e.date,createdAt:e.createdAt,selectedDate:t}),t};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:e,onChange:e=>n(e.target.value)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:r,onChange:e=>a(e.target.value)})]}),(0,gp.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:async()=>{l(!0),d("");try{const t=await Oj.get("/ledger",{params:{from:e,to:r}}),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let a=n;if(e&&r){const t=new Date(e);t.setUTCHours(0,0,0,0);const s=new Date(r);s.setUTCHours(23,59,59,999),a=n.filter((e=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return n>=t&&n<=s}))}const s=[...a,...t.data];console.log("HST Report Debug:"),console.log("Backend data count:",t.data.length),console.log("LocalStorage transactions count:",n.length),console.log("Filtered localStorage transactions count:",a.length),console.log("Total allEntries count:",s.length),console.log("Sample backend entry:",t.data[0]),console.log("Sample localStorage entry:",a[0]),console.log("Date range:",{fromDate:e,toDate:r}),console.log("Sample entries with dates:",s.slice(0,5).map((e=>({accountNumber:e.accountNumber,description:e.description,date:e.date,createdAt:e.createdAt,formattedDate:p(x(e))})))),s.sort(((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n})),o(s)}catch(t){d("Failed to fetch ledger data"),o([]),console.error("Error fetching ledger data:",t)}l(!1)},disabled:i||!e||!r,children:i?"Loading...":"Check HST Report"}),(0,gp.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded mt-4 md:mt-0",onClick:()=>{window.print()},style:{marginLeft:8},children:"Print Report"})]}),c&&(0,gp.jsx)("div",{className:"text-red-600 mb-4",children:c}),(0,gp.jsxs)("div",{ref:u,className:"printable-hst-report",children:[(0,gp.jsxs)("div",{className:"print-header mb-6 text-center",children:[(0,gp.jsx)("img",{src:fp,alt:"Company Logo",className:"mx-auto mb-2",style:{maxWidth:120,maxHeight:120}}),(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("div",{className:"text-lg font-semibold mb-1",children:"HST Report"}),e&&r&&(0,gp.jsxs)("div",{className:"text-gray-700 mb-2",children:["From"," ",(0,gp.jsx)("span",{className:"font-semibold",children:p(e)})," ","to"," ",(0,gp.jsx)("span",{className:"font-semibold",children:p(r)})]})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("div",{className:"font-semibold mb-2",children:"HST Collected & Input Tax Credit"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border px-2 py-1",children:"Description"}),(0,gp.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Net"})]})}),(0,gp.jsxs)("tbody",{children:[m(IT).map(((e,t)=>{var n,r;return(0,gp.jsxs)("tr",{className:"text-sm",children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.description}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:p(x(e))}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(n=e.debit)||void 0===n?void 0:n.toFixed(2))||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(r=e.credit)||void 0===r?void 0:r.toFixed(2))||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:((e.debit||0)-(e.credit||0)).toFixed(2)})]},e._id||t)})),(0,gp.jsxs)("tr",{className:"font-semibold bg-gray-100",children:[(0,gp.jsx)("td",{className:"border px-2 py-1",colSpan:2,children:"Totals"}),(()=>{const e=h(m(IT));return[(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.debit.toFixed(2)},"debit"),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.credit.toFixed(2)},"credit"),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.net.toFixed(2)},"net")]})()]})]})]})})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("div",{className:"font-semibold mb-2",children:"Desk Fee & Other Income"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 mb-2",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border px-2 py-1",children:"Description"}),(0,gp.jsx)("th",{className:"border px-2 py-1",children:"Date"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Debit"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Credit"}),(0,gp.jsx)("th",{className:"border px-2 py-1 text-right",children:"Net"})]})}),(0,gp.jsxs)("tbody",{children:[m(DT).map(((e,t)=>{var n,r;return(0,gp.jsxs)("tr",{className:"text-sm",children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.description}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:p(x(e))}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(n=e.debit)||void 0===n?void 0:n.toFixed(2))||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:(null===(r=e.credit)||void 0===r?void 0:r.toFixed(2))||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:((e.debit||0)-(e.credit||0)).toFixed(2)})]},e._id||t)})),(0,gp.jsxs)("tr",{className:"font-semibold bg-gray-100",children:[(0,gp.jsx)("td",{className:"border px-2 py-1",colSpan:2,children:"Totals"}),(()=>{const e=h(m(DT));return[(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.debit.toFixed(2)},"debit"),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.credit.toFixed(2)},"credit"),(0,gp.jsx)("td",{className:"border px-2 py-1 text-right",children:e.net.toFixed(2)},"net")]})()]})]})]})})]})]}),(0,gp.jsx)("style",{children:"\n              @media print {\n                body * {\n                  visibility: hidden;\n                }\n                .printable-hst-report, .printable-hst-report * {\n                  visibility: visible;\n                }\n                .printable-hst-report {\n                  position: absolute;\n                  left: 0;\n                  top: 0;\n                  width: 100vw;\n                  background: white;\n                  padding: 0;\n                  margin: 0;\n                }\n                nav, .FinanceSidebar, .bg-white.p-6.rounded-lg.shadow-md > div:not(.printable-hst-report) {\n                  display: none !important;\n                }\n                .bg-white.p-6.rounded-lg.shadow-md {\n                  box-shadow: none !important;\n                  padding: 0 !important;\n                }\n                .print-header { display: block !important; }\n              }\n              .print-header { display: none; }\n            "})]})})]})]})},OT=()=>{const[e,n]=(0,t.useState)("real-estate-trust-payments"),[r,a]=(0,t.useState)([]),[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),u=Pu();(0,t.useEffect)((()=>{(async()=>{try{const e=(await Oj.get("/finance-transactions")).data;a(e.filter((e=>"CommissionTransfer"===e.type))),o(e.filter((e=>"BalanceOfDeposit"===e.type)))}catch(e){console.error("Error fetching finance transactions:",e)}})(),(async()=>{try{const e=await Oj.get("/commission-trust-eft");l(e.data)}catch(e){console.error("Error fetching commission trust EFTs:",e)}})(),(async()=>{try{const e=await Oj.get("/general-account-eft");d(e.data)}catch(e){console.error("Error fetching general account EFTs:",e)}})()}),[]);const m=e=>{if(!e)return"";return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>u("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Finance Database"}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("real-estate-trust-payments"),children:"Real Estate Trust Payments"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-trust-payments"),children:"Commission Trust Payments"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust-ledger"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("commission-trust-ledger"),children:"Commission Trust Ledger"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account-payments"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>n("general-account-payments"),children:"General Account Payments (A/P) Expenses"})]})}),(()=>{switch(e){case"real-estate-trust-payments":return(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Real Estate Trust Payments"}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Transfer to General/Commission Trust"}),(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Date"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount of Cheque"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Written To"})]})}),(0,gp.jsx)("tbody",{children:r.map((e=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:m(e.chequeDate)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.amount.toFixed(2)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.chequeWrittenTo})]},e._id)))})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Balance of Deposit"}),(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Date"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount of Cheque"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Cheque Written To"})]})}),(0,gp.jsx)("tbody",{children:s.map((e=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:m(e.chequeDate)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.amount.toFixed(2)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.chequeWrittenTo})]},e._id)))})]})]})]});case"commission-trust-payments":return(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Commission Trust Payments"}),(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Description"})]})}),(0,gp.jsx)("tbody",{children:0===i.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No Commission Trust Payments found."})}):i.map((e=>{var t,n;return(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:m(e.date)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:SE(e.type)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient||e.agentName||"-"}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:(null===(n=e.tradeId)||void 0===n?void 0:n.tradeNumber)||"-"}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"})]},e._id)}))})]})]});case"commission-trust-ledger":return(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Commission Trust Ledger"}),(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Description"})]})}),(0,gp.jsx)("tbody",{children:0===i.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No Commission Trust Ledger found."})}):i.map((e=>{var t,n;return(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:m(e.date)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:SE(e.type)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient||e.agentName||"-"}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:(null===(n=e.tradeId)||void 0===n?void 0:n.tradeNumber)||"-"}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.description||"-"})]},e._id)}))})]})]});case"general-account-payments":return(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"General Account Payments (A/P) Expenses"}),(0,gp.jsxs)("table",{className:"min-w-full bg-white",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"EFT #"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Type"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Amount"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Recipient"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Expense Category"}),(0,gp.jsx)("th",{className:"py-2 px-4 border-b",children:"Invoice #"})]})}),(0,gp.jsx)("tbody",{children:0===c.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:7,className:"text-center py-4",children:"No General Account Payments found."})}):c.map((e=>{var t;return(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.eftNumber}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:m(e.date)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:SE(e.type)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:null===(t=e.amount)||void 0===t?void 0:t.toFixed(2)}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.recipient}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.expenseCategory||"-"}),(0,gp.jsx)("td",{className:"py-2 px-4 border-b",children:e.invoiceNumber||"-"})]},e._id)}))})]})]});default:return null}})()]})]})]})},LT=[{value:"AB",label:"Alberta"},{value:"BC",label:"British Columbia"},{value:"MB",label:"Manitoba"},{value:"NB",label:"New Brunswick"},{value:"NL",label:"Newfoundland and Labrador"},{value:"NS",label:"Nova Scotia"},{value:"NT",label:"Northwest Territories"},{value:"NU",label:"Nunavut"},{value:"ON",label:"Ontario"},{value:"PE",label:"Prince Edward Island"},{value:"QC",label:"Quebec"},{value:"SK",label:"Saskatchewan"},{value:"YT",label:"Yukon"}],RT=e=>{let{onVendorAdded:n,onClose:r,editingVendor:a}=e;const[s,o]=(0,t.useState)({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)("");(0,t.useEffect)((()=>{a?o({vendorNumber:a.vendorNumber,firstName:a.firstName,lastName:a.lastName,streetNumber:a.streetNumber||"",streetName:a.streetName||"",unit:a.unit||"",postalCode:a.postalCode||"",city:a.city||"",province:a.province||"",phoneNumber:a.phoneNumber,companyName:a.companyName||""}):h()}),[a]);const h=async()=>{try{const e=await Oj.get("/vendors/next-vendor-no");o((t=>J(J({},t),{},{vendorNumber:e.data.nextVendorNo})))}catch(c){console.error("Error fetching next vendor number:",c),$p.error("Failed to fetch vendor number")}},p=e=>{const{name:t,value:n}=e.target;o((e=>J(J({},e),{},{[t]:n})))},x=()=>{r&&r()};return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-2xl font-semibold text-gray-800",children:a?"Edit Vendor Info":"Add Vendor Info"}),(0,gp.jsx)("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:(0,gp.jsx)(dp,{size:20})})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0),d(""),m("");try{let e;a?(e=await Oj.put("/vendors/".concat(a._id),s),$p.success("Vendor updated successfully!")):(e=await Oj.post("/vendors",s),$p.success("Vendor added successfully!")),n&&n(e.data),setTimeout((()=>{r&&r()}),2e3)}catch(c){var t,o;console.error("Error saving vendor:",c),$p.error((null===(t=c.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||"Failed to save vendor")}finally{l(!1)}},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Number"}),(0,gp.jsx)("input",{type:"number",name:"vendorNumber",value:s.vendorNumber,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!a})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,gp.jsx)("input",{type:"text",name:"companyName",value:s.companyName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:s.firstName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:s.lastName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street # *"}),(0,gp.jsx)("input",{type:"text",name:"streetNumber",value:s.streetNumber,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name *"}),(0,gp.jsx)("input",{type:"text",name:"streetName",value:s.streetName,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,gp.jsx)("input",{type:"text",name:"unit",value:s.unit,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:s.postalCode,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,gp.jsx)("input",{type:"text",name:"city",value:s.city,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),(0,gp.jsxs)("select",{name:"province",value:s.province,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,gp.jsx)("option",{value:"",children:"Select a province"}),LT.map((e=>(0,gp.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,gp.jsx)("input",{type:"tel",name:"phoneNumber",value:s.phoneNumber,onChange:e=>gE(e,o),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,gp.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?"Saving...":(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(lp,{className:"mr-2"}),a?"Update Vendor":"Save Vendor"]})}),(0,gp.jsx)("button",{type:"button",onClick:x,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})})},FT=e=>{let{onVendorAdded:n,editingVendor:r}=e;const[a,s]=(0,t.useState)({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),[o,i]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r?s({vendorNumber:r.vendorNumber,firstName:r.firstName,lastName:r.lastName,streetNumber:r.streetNumber||"",streetName:r.streetName||"",unit:r.unit||"",postalCode:r.postalCode||"",city:r.city||"",province:r.province||"",phoneNumber:r.phoneNumber,companyName:r.companyName||""}):l()}),[r]);const l=async()=>{try{const e=await Oj.get("/vendors/next-vendor-no");s((t=>J(J({},t),{},{vendorNumber:e.data.nextVendorNo})))}catch(e){console.error("Error fetching next vendor number:",e),$p.error("Failed to fetch vendor number")}},c=e=>{const{name:t,value:n}=e.target;s((e=>J(J({},e),{},{[t]:n})))};return(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{let e;r?(e=await Oj.put("/vendors/".concat(r._id),a),$p.success("Vendor updated successfully!")):(e=await Oj.post("/vendors",a),$p.success("Vendor added successfully!")),n&&n(e.data),r||(s({vendorNumber:"",firstName:"",lastName:"",streetNumber:"",streetName:"",unit:"",postalCode:"",city:"",province:"",phoneNumber:"",companyName:""}),await l())}catch(c){var t,o;console.error("Error saving vendor:",c),$p.error((null===(t=c.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||"Failed to save vendor")}finally{i(!1)}},className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Number"}),(0,gp.jsx)("input",{type:"number",name:"vendorNumber",value:a.vendorNumber,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!r})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,gp.jsx)("input",{type:"text",name:"companyName",value:a.companyName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street # *"}),(0,gp.jsx)("input",{type:"text",name:"streetNumber",value:a.streetNumber,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Name *"}),(0,gp.jsx)("input",{type:"text",name:"streetName",value:a.streetName,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,gp.jsx)("input",{type:"text",name:"unit",value:a.unit,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),(0,gp.jsx)("input",{type:"text",name:"postalCode",value:a.postalCode,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,gp.jsx)("input",{type:"text",name:"city",value:a.city,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Province *"}),(0,gp.jsxs)("select",{name:"province",value:a.province,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,gp.jsx)("option",{value:"",children:"Select a province"}),LT.map((e=>(0,gp.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,gp.jsx)("input",{type:"tel",name:"phoneNumber",value:a.phoneNumber,onChange:e=>gE(e,s),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsx)("div",{})]}),(0,gp.jsx)("div",{className:"flex space-x-3 pt-4",children:(0,gp.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:o?"Saving...":(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsx)(lp,{className:"mr-2"}),r?"Update Vendor":"Save Vendor"]})})})]})},_T=()=>{var e;const[n,r]=(0,t.useState)("list"),[a,s]=(0,t.useState)([]),[o,i]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[m,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(null),[f,g]=(0,t.useState)(null),[b,y]=(0,t.useState)(!1);(0,t.useEffect)((()=>{v()}),[]);const v=async()=>{try{i(!0);const e=(await Oj.get("/vendors")).data.sort(((e,t)=>e.vendorNumber-t.vendorNumber));s(e),u(e),i(!1)}catch(e){console.error("Error fetching vendors:",e),i(!1),$p.error("Failed to fetch vendors")}},N=()=>{if(!l.trim())return void u([...a].sort(((e,t)=>e.vendorNumber-t.vendorNumber)));const e=a.filter((e=>e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.vendorNumber.toString().includes(l)||e.phoneNumber.includes(l)||e.companyName&&e.companyName.toLowerCase().includes(l.toLowerCase())||e.city&&e.city.toLowerCase().includes(l.toLowerCase())||e.streetName&&e.streetName.toLowerCase().includes(l.toLowerCase())));u(e)},j=e=>{if(p)s(a.map((t=>t._id===p._id?e:t))),u(d.map((t=>t._id===p._id?e:t))),x(null);else{const t=[...a,e].sort(((e,t)=>e.vendorNumber-t.vendorNumber));s(t),u(t)}h(!1),$p.success(p?"Vendor updated successfully!":"Vendor added successfully!")};return(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"border-b border-gray-200",children:(0,gp.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,gp.jsxs)("div",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("list"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("list"),children:"List"}),(0,gp.jsx)("button",{className:"py-4 px-1 border-b-2 font-medium text-base ".concat("info"===n?"border-blue-700 text-blue-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>r("info"),children:"Info Form"})]})})}),(0,gp.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["list"===n&&(0,gp.jsxs)("div",{className:"p-6",children:[(0,gp.jsx)("div",{className:"mb-6",children:(0,gp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gp.jsx)("div",{className:"flex-1 max-w-md",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)("input",{type:"text",placeholder:"Search by vendor name, number, or phone...",value:l,onChange:e=>{c(e.target.value)},onKeyPress:e=>{"Enter"===e.key&&N()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-700 focus:border-transparent"}),(0,gp.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,gp.jsx)(cp,{className:"h-4 w-4 text-gray-400"})})]})}),(0,gp.jsx)("button",{onClick:N,className:"px-4 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-offset-2 transition-colors",children:"Search"}),(0,gp.jsx)("button",{onClick:()=>{c(""),u([...a].sort(((e,t)=>e.vendorNumber-t.vendorNumber)))},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Clear"})]})}),(0,gp.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{style:{backgroundColor:"#1e3a8a"},className:"text-white",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Vendor #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Company Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"First Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"City"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",children:"Phone Number"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"Loading vendors..."})}):0===d.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l?"No vendors found matching your search.":"No vendors found."})}):d.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>g(e),children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.vendorNumber}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.companyName||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firstName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.lastName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.city}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phoneNumber})]},e._id)))})]})})})]}),"info"===n&&(0,gp.jsx)("div",{className:"p-6",children:(0,gp.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add New Vendor"}),(0,gp.jsx)("div",{className:"w-full",children:(0,gp.jsx)(FT,{onVendorAdded:j,editingVendor:null})})]})})]}),f&&!m&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 relative",children:[(0,gp.jsx)("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:()=>g(null),children:(0,gp.jsx)(dp,{size:20})}),(0,gp.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Vendor Details"}),(0,gp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Vendor Number:"})," ",f.vendorNumber]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Company Name:"})," ",f.companyName||"N/A"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"First Name:"})," ",f.firstName]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Last Name:"})," ",f.lastName]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Street #:"})," ",f.streetNumber]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Street Name:"})," ",f.streetName]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Unit:"})," ",f.unit||"N/A"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"City:"})," ",f.city]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Province:"})," ",(null===(e=LT.find((e=>e.value===f.province)))||void 0===e?void 0:e.label)||f.province]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Postal Code:"})," ",f.postalCode]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("strong",{children:"Phone Number:"})," ",f.phoneNumber]})]}),(0,gp.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,gp.jsxs)("button",{className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",onClick:()=>(x(f),h(!0),void g(null)),children:[(0,gp.jsx)(Yh,{className:"inline mr-2"})," Edit"]}),(0,gp.jsxs)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>y(!0),children:[(0,gp.jsx)(up,{className:"inline mr-2"})," Delete"]})]}),b&&(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded",children:[(0,gp.jsx)("div",{className:"mb-2 text-red-700 font-semibold",children:"Are you sure you want to delete this vendor?"}),(0,gp.jsxs)("div",{className:"flex space-x-2",children:[(0,gp.jsx)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>(async e=>{try{await Oj.delete("/vendors/".concat(e));const t=a.filter((t=>t._id!==e));s(t),u(t),g(null),y(!1),$p.success("Vendor deleted successfully!")}catch(t){console.error("Error deleting vendor:",t),$p.error("Failed to delete vendor")}})(f._id),children:"Yes, Delete"}),(0,gp.jsx)("button",{className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",onClick:()=>y(!1),children:"Cancel"})]})]})]})}),m&&(0,gp.jsx)(RT,{onVendorAdded:j,onClose:()=>{h(!1),x(null)},editingVendor:p})]})},MT=()=>{var e;const[n,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),[p,x]=(0,t.useState)(null),[f,g]=(0,t.useState)(!1),b=Pu();(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{try{s(!0);const e=await Oj.get("/vendors");r(e.data),i("")}catch(o){console.error("Error fetching vendors:",o),i("Failed to fetch vendors")}finally{s(!1)}},v=n.filter((e=>e.firstName.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.vendorNumber.toString().includes(l)||e.phoneNumber.includes(l)||e.companyName&&e.companyName.toLowerCase().includes(l.toLowerCase())||e.city&&e.city.toLowerCase().includes(l.toLowerCase())||e.streetName&&e.streetName.toLowerCase().includes(l.toLowerCase())));return a?(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,gp.jsx)("div",{className:"text-xl text-gray-600",children:"Loading vendors..."})})]}):(0,gp.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,gp.jsx)("div",{className:"flex justify-end mb-4",children:(0,gp.jsx)("button",{onClick:()=>b("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"\u2190 Back to Database"})}),(0,gp.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:"Vendor Information Database"}),(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Vendors"}),(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,gp.jsxs)("div",{className:"relative w-full md:w-1/3",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Search vendors by name, number, or phone...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[(0,gp.jsx)(ap,{className:"mr-2"}),"Add Vendor"]})]}),o&&(0,gp.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:o}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,gp.jsx)("thead",{style:{backgroundColor:"#1e3a8a"},className:"text-white",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Vendor #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Company Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"First Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Last Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"City"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider border-b",children:"Phone Number"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===v.length?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:l?"No vendors found matching your search.":"No vendors found."})}):v.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>x(e),children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 border-b",children:e.vendorNumber}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.companyName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.firstName}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.lastName}),(0,gp.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 border-b",children:(0,gp.jsx)("div",{className:"max-w-xs truncate",title:e.city,children:e.city})}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 border-b",children:e.phoneNumber})]},e._id)))})]})})]})]}),p&&!d&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 relative",children:[(0,gp.jsx)("button",{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:()=>x(null),children:(0,gp.jsx)(dp,{size:20})}),(0,gp.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Vendor Details"}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Vendor Number:"})," ",p.vendorNumber]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Company Name:"})," ",p.companyName]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"First Name:"})," ",p.firstName]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Last Name:"})," ",p.lastName]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Street #:"})," ",p.streetNumber]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Street Name:"})," ",p.streetName]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Unit:"})," ",p.unit||"N/A"]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"City:"})," ",p.city]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Province:"})," ",(null===(e=LT.find((e=>e.value===p.province)))||void 0===e?void 0:e.label)||p.province]}),(0,gp.jsxs)("div",{className:"mb-2",children:[(0,gp.jsx)("strong",{children:"Postal Code:"})," ",p.postalCode]}),(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("strong",{children:"Phone Number:"})," ",p.phoneNumber]}),(0,gp.jsxs)("div",{className:"flex space-x-4",children:[(0,gp.jsxs)("button",{className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 font-semibold",onClick:()=>(h(p),u(!0),void x(null)),children:[(0,gp.jsx)(Yh,{className:"inline mr-2"})," Edit"]}),(0,gp.jsxs)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>g(!0),children:[(0,gp.jsx)(up,{className:"inline mr-2"})," Delete"]})]}),f&&(0,gp.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded",children:[(0,gp.jsx)("div",{className:"mb-2 text-red-700 font-semibold",children:"Are you sure you want to delete this vendor?"}),(0,gp.jsxs)("div",{className:"flex space-x-2",children:[(0,gp.jsx)("button",{className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 font-semibold",onClick:()=>(async e=>{try{await Oj.delete("/vendors/".concat(e)),r(n.filter((t=>t._id!==e))),x(null),g(!1)}catch(o){console.error("Error deleting vendor:",o),alert("Failed to delete vendor")}})(p._id),children:"Yes, Delete"}),(0,gp.jsx)("button",{className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 font-semibold",onClick:()=>g(!1),children:"Cancel"})]})]})]})}),d&&(0,gp.jsx)(RT,{onVendorAdded:e=>{m?(r(n.map((t=>t._id===m._id?e:t))),h(null)):r([...n,e]),u(!1)},onClose:()=>{u(!1),h(null)},editingVendor:m})]})},BT=[{id:"income",label:"Income Statement"},{id:"balance",label:"Balance Sheet"}];function UT(){const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),u=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(e||0);return(0,gp.jsxs)("div",{children:[!s&&(0,gp.jsxs)("form",{className:"flex items-end space-x-4 mb-6",onSubmit:async t=>{if(t.preventDefault(),e&&r){d(!0);try{const t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),n=new Date(e);n.setUTCHours(0,0,0,0);const a=new Date(r);a.setUTCHours(23,59,59,999);const s=t.filter((e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=n&&t<=a}));console.log("Income Statement Frontend Debug:"),console.log("Total localStorage transactions:",t.length),console.log("Filtered localStorage transactions:",s.length),console.log("Date range:",e,"to",r),console.log("Sample localStorage transaction:",t[0]);const i=await Oj.post("/transactions/income-statement",{localStorageTransactions:s},{params:{from:e,to:r}});console.log("Fetched income statement:",i.data),console.log("Statement items:",i.data.statement),console.log("Subtotal items:",i.data.statement.filter((e=>"subtotal"===e.type))),l(i.data),o(!0)}catch(n){console.error("Error fetching income statement:",n)}finally{d(!1)}}},children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:e=>a(e.target.value),required:!0})]}),(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",disabled:c,children:c?"Loading...":"Proceed"})]}),s&&i&&(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4 no-print",children:[(0,gp.jsx)("button",{onClick:()=>o(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u2190 Back"}),(0,gp.jsx)("button",{onClick:()=>{const t=window.open("","_blank"),n=i.statement.filter((e=>"header"===e.type||("subtotal"===e.type||("line"!==e.type||0!==e.value&&null!==e.value&&void 0!==e.value)))),a='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Income Statement - Savemax 365 Realty, Brokerage</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.6;\n              color: #000000;\n              font-size: 9px;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 50px;\n              height: 50px;\n              margin-bottom: 8px;\n            }\n            .company-name {\n              font-size: 16px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .report-title {\n              font-size: 14px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 8px;\n            }\n            .period-info {\n              font-size: 11px;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n              font-size: 9px;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 6px 8px;\n              text-align: left;\n              line-height: 1.4;\n              word-spacing: 0.1em;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n              font-size: 9px;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .header-row {\n              font-weight: bold;\n              background-color: #f0f0f0;\n              font-size: 10px;\n              padding: 8px;\n            }\n            .subtotal-row {\n              font-weight: bold;\n              border-top: 1px solid #000000;\n              font-size: 10px;\n              padding: 6px 8px;\n            }\n            .subtotal-row td {\n              border-top: 1px solid #000000;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n                font-size: 9px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n              table {\n                font-size: 9px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">SAVEMAX 365 REALTY, BROKERAGE</div>\n            <div class="report-title">Income Statement</div>\n            <div class="period-info">Period: '.concat(e," to ").concat(r,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Acct. #</th>\n                  <th>Description</th>\n                  <th class="amount-column">Amount</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(n.map(((e,t)=>"header"===e.type?'\n                        <tr class="header-row">\n                          <td colspan="3" style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.label,"\n                          </td>\n                        </tr>\n                      "):"line"===e.type?'\n                        <tr>\n                          <td style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.acct,'\n                          </td>\n                          <td style="padding-left: 8px;">').concat(e.label,'</td>\n                          <td class="amount-column">').concat(u(e.value),"</td>\n                        </tr>\n                      "):"subtotal"===e.type?'\n                        <tr class="subtotal-row">\n                          <td colspan="2" style="padding-left: '.concat(16*(e.indent||0)+8,'px;">\n                            ').concat(e.label,'\n                          </td>\n                          <td class="amount-column">').concat(u(e.value),"</td>\n                        </tr>\n                      "):"")).join(""),"\n              </tbody>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(a),t.document.close(),t.focus(),setTimeout((()=>{t.print(),t.close()}),500)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Print Statement"})]}),(0,gp.jsx)("img",{src:fp,alt:"Company Logo",className:"print-logo"}),(0,gp.jsxs)("div",{className:"text-center mb-2",children:[(0,gp.jsx)("div",{className:"text-2xl font-bold",children:"Savemax 365 Realty, Brokerage"}),(0,gp.jsx)("div",{className:"text-lg font-semibold mt-1",children:"Income Statement"}),(0,gp.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e," to ",r]})]}),(0,gp.jsxs)("table",{className:"w-full text-left border-t border-b border-gray-300 mt-6",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-2 w-32",children:"Acct. #"}),(0,gp.jsx)("th",{className:"py-2 px-2",children:"Description"}),(0,gp.jsx)("th",{className:"py-2 px-2 w-32 text-right",children:"Amount"})]})}),(0,gp.jsx)("tbody",{className:"text-sm",children:(()=>{const e=i.statement.filter((e=>"header"===e.type||("subtotal"===e.type||("line"!==e.type||0!==e.value&&null!==e.value&&void 0!==e.value))));return console.log("Filtered items for rendering:",e.length),console.log("Filtered subtotals:",e.filter((e=>"subtotal"===e.type))),e.map(((e,t)=>"header"===e.type?(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:3,style:{paddingLeft:"".concat(16*(e.indent||0),"px"),fontWeight:"bold"},children:e.label})},t):"line"===e.type?(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{style:{paddingLeft:"".concat(16*(e.indent||0),"px")},children:e.acct}),(0,gp.jsx)("td",{children:e.label}),(0,gp.jsx)("td",{className:"text-right",children:u(e.value)})]},t):"subtotal"===e.type?(0,gp.jsxs)("tr",{style:{fontWeight:"bold"},children:[(0,gp.jsx)("td",{colSpan:2,style:{paddingLeft:"".concat(16*(e.indent||0),"px")},children:e.label}),(0,gp.jsx)("td",{className:"text-right",children:u(e.value)})]},t):null))})()})]})]})]})}function HT(){const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)({}),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(""),h=e=>void 0===e||null===e?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),p=e=>{const t=i[e];return t?h(t.balance):"-"},x=e=>e.reduce(((e,t)=>{const n=i[t];return n?e+n.balance:e}),0);return(0,gp.jsxs)("div",{children:[!s&&(0,gp.jsxs)("form",{className:"flex items-end space-x-4 mb-6",onSubmit:async t=>{if(t.preventDefault(),e&&r){d(!0),m("");try{const t=await Oj.get("/ledger",{params:{from:e,to:r}}),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]"),a=new Date(e);a.setUTCHours(0,0,0,0);const s=new Date(r);s.setUTCHours(23,59,59,999);const i=n.filter((e=>{const t=e.date?new Date(e.date):new Date(e.createdAt||0);return t>=a&&t<=s})),c=[...i,...t.data];console.log("Balance Sheet Debug:"),console.log("Backend entries:",t.data.length),console.log("LocalStorage entries:",i.length),console.log("Total entries:",c.length),console.log("Sample entries:",c.slice(0,5));const d={};c.forEach((e=>{const t=e.accountNumber;d[t]||(d[t]={debit:0,credit:0,balance:0}),d[t].debit+=e.debit||0,d[t].credit+=e.credit||0})),Object.keys(d).forEach((e=>{d[e].balance=d[e].debit-d[e].credit})),console.log("Calculated account balances:",d),l(d),o(!0)}catch(n){m("Failed to fetch balance data"),console.error("Error fetching balance data:",n)}finally{d(!1)}}},children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"From"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium mb-1",children:"To"}),(0,gp.jsx)("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:e=>a(e.target.value),required:!0})]}),(0,gp.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:c,children:c?"Loading...":"Proceed"})]}),u&&(0,gp.jsx)("div",{className:"text-red-600 mb-4",children:u}),s&&(0,gp.jsxs)("div",{children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4 no-print",children:[(0,gp.jsx)("button",{onClick:()=>o(!1),className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"\u2190 Back"}),(0,gp.jsx)("button",{onClick:()=>{const t=window.open("","_blank"),n='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Balance Sheet - Savemax 365 Realty, Brokerage</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.6;\n              color: #000000;\n              font-size: 9px;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 50px;\n              height: 50px;\n              margin-bottom: 8px;\n            }\n            .company-name {\n              font-size: 16px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .report-title {\n              font-size: 14px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 8px;\n            }\n            .period-info {\n              font-size: 11px;\n              color: #000000;\n              margin-bottom: 4px;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n              font-size: 9px;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 6px 8px;\n              text-align: left;\n              line-height: 1.4;\n              word-spacing: 0.1em;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n              font-size: 9px;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .header-row {\n              font-weight: bold;\n              background-color: #f0f0f0;\n              font-size: 10px;\n              padding: 8px;\n            }\n            .subtotal-row {\n              font-weight: bold;\n              border-top: 1px solid #000000;\n              font-size: 10px;\n              padding: 6px 8px;\n            }\n            .subtotal-row td {\n              border-top: 1px solid #000000;\n            }\n            .page-break {\n              page-break-before: always;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n                font-size: 9px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n              table {\n                font-size: 9px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">SAVEMAX 365 REALTY, BROKERAGE</div>\n            <div class="report-title">Balance Sheet</div>\n            <div class="period-info">Period: '.concat(e," to ").concat(r,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Acct. #</th>\n                  <th>Description</th>\n                  <th class="amount-column">Amount</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat((()=>{const e=e=>{const t=i[e];return t?h(t.balance):"-"},t=e=>e.reduce(((e,t)=>{const n=i[t];return n?e+n.balance:e}),0);return'\n                    \x3c!-- ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">ASSETS</td>\n                    </tr>\n                    \x3c!-- CURRENT ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">CURRENT ASSETS</td>\n                    </tr>\n                    \x3c!-- CASH --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">CASH</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10001</td>\n                      <td style="padding-left: 8px;">CASH - CURRENT ACCOUNT</td>\n                      <td class="amount-column">'.concat(e("10001"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10004</td>\n                      <td style="padding-left: 8px;">CASH - COMMISSION TRUST ACCOUNT</td>\n                      <td class="amount-column">').concat(e("10004"),'</td>\n                    </tr>\n                    \x3c!-- NOTES RECEIVABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">NOTES RECEIVABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">11000</td>\n                      <td style="padding-left: 8px;">NOTES RECEIVABLES</td>\n                      <td class="amount-column">').concat(e("11000"),'</td>\n                    </tr>\n                    \x3c!-- ACCOUNTS RECEIVABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">ACCOUNTS RECEIVABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12100</td>\n                      <td style="padding-left: 8px;">A/R - AGT\'S RECOVERABLE- GEN EXP</td>\n                      <td class="amount-column">').concat(e("12100"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12500</td>\n                      <td style="padding-left: 8px;">A/R - OTHER</td>\n                      <td class="amount-column">').concat(e("12500"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">12600</td>\n                      <td style="padding-left: 8px;">LOAN - HOMELIFE TOP STAR</td>\n                      <td class="amount-column">').concat(e("12600"),'</td>\n                    </tr>\n                    \x3c!-- PREPAID EXPENSES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">PREPAID EXPENSES</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">15000</td>\n                      <td style="padding-left: 8px;">PREPAID EXPENSES</td>\n                      <td class="amount-column">').concat(e("15000"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL CURRENT ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL CURRENT ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["10001","10004","11000","12100","12500","12600","12300","15000"])),'</td>\n                    </tr>\n                    \x3c!-- FIXED ASSETS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">FIXED ASSETS</td>\n                    </tr>\n                    \x3c!-- OFFICE EQUIPMENT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">OFFICE EQUIPMENT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16030</td>\n                      <td style="padding-left: 8px;">OFFICE FURNITURE</td>\n                      <td class="amount-column">').concat(e("16030"),'</td>\n                    </tr>\n                    \x3c!-- COMPUTER EQUIPMENT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">COMPUTER EQUIPMENT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16060</td>\n                      <td style="padding-left: 8px;">COMPUTER SOFTWARE</td>\n                      <td class="amount-column">').concat(e("16060"),'</td>\n                    </tr>\n                    \x3c!-- LEASEHOLD IMPROVEMENTS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">LEASEHOLD IMPROVEMENTS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16080</td>\n                      <td style="padding-left: 8px;">SIGNS</td>\n                      <td class="amount-column">').concat(e("16080"),'</td>\n                    </tr>\n                    \x3c!-- FRANCHISE COSTS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">FRANCHISE COSTS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">16090</td>\n                      <td style="padding-left: 8px;">FRANCHISE COST</td>\n                      <td class="amount-column">').concat(e("16090"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL FIXED ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL FIXED ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["16060","16080","16090","16030"])),'</td>\n                    </tr>\n                    \x3c!-- ACCUMULATED DEPRECIATION --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">ACCUMULATED DEPRECIATION</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17060</td>\n                      <td style="padding-left: 8px;">ACC. DEPR. - COMP. SOFTWARE</td>\n                      <td class="amount-column">').concat(e("17060"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17080</td>\n                      <td style="padding-left: 8px;">ACC. DEPR. - SIGNS</td>\n                      <td class="amount-column">').concat(e("17080"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">17090</td>\n                      <td style="padding-left: 8px;">ACC. AMOR. - FRANCHISE COSTS</td>\n                      <td class="amount-column">').concat(e("17090"),'</td>\n                    </tr>\n                    \x3c!-- NET FIXED ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">NET FIXED ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["16060","16080","16090","16030"])-t(["17060","17080","17090"])),'</td>\n                    </tr>\n                    \x3c!-- NET TRUST FUNDS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">NET TRUST FUNDS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">10002</td>\n                      <td style="padding-left: 8px;">CASH - TRUST</td>\n                      <td class="amount-column">').concat(e("10002"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21300</td>\n                      <td style="padding-left: 8px;">LIABILITY FOR TRUST FUNDS HELD</td>\n                      <td class="amount-column">').concat(e("21300"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL ASSETS --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL ASSETS</td>\n                      <td class="amount-column">').concat(h(t(["10001","10004","11000","12100","12500","12600","12300","15000"])+t(["16060","16080","16090"])-t(["17060","17080","17090"])+t(["10002","21300"])),'</td>\n                    </tr>\n                    \x3c!-- Page break for liabilities/equity --\x3e\n                    <tr class="page-break">\n                      <td colspan="3"></td>\n                    </tr>\n                    \x3c!-- LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">LIABILITIES</td>\n                    </tr>\n                    \x3c!-- CURRENT LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">CURRENT LIABILITIES</td>\n                    </tr>\n                    \x3c!-- BANK OVERDRAFT --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">BANK OVERDRAFT</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">20000</td>\n                      <td style="padding-left: 8px;">BANK OPERATING LINE</td>\n                      <td class="amount-column">').concat(e("20000"),'</td>\n                    </tr>\n                    \x3c!-- ACCOUNTS PAYABLE & ACCRUALS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">ACCOUNTS PAYABLE & ACCRUALS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21000</td>\n                      <td style="padding-left: 8px;">ACCOUNTS PAYABLE</td>\n                      <td class="amount-column">').concat(e("21000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">22000</td>\n                      <td style="padding-left: 8px;">ACCRUED EXPENSES</td>\n                      <td class="amount-column">').concat(e("22000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23000</td>\n                      <td style="padding-left: 8px;">HST COLLECTED</td>\n                      <td class="amount-column">').concat(e("23000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23001</td>\n                      <td style="padding-left: 8px;">HST INPUT TAX CREDIT</td>\n                      <td class="amount-column">').concat(e("23001"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">23004</td>\n                      <td style="padding-left: 8px;">HST NET PAYABLE</td>\n                      <td class="amount-column">').concat(e("23004"),'</td>\n                    </tr>\n                    \x3c!-- COMMISSIONS PAYABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">COMMISSIONS PAYABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21500</td>\n                      <td style="padding-left: 8px;">COMMISSION PAYABLE</td>\n                      <td class="amount-column">').concat(e("21500"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21600</td>\n                      <td style="padding-left: 8px;">BROKERS COMMISSION</td>\n                      <td class="amount-column">').concat(e("21600"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL CURRENT LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL CURRENT LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])),'</td>\n                    </tr>\n                    \x3c!-- LONG-TERM LIABILITIES --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">LONG-TERM LIABILITIES</td>\n                    </tr>\n                    \x3c!-- SHAREHOLDER LOANS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">SHAREHOLDER LOANS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28000</td>\n                      <td style="padding-left: 8px;">SHAREHOLDER LOAN - SRI</td>\n                      <td class="amount-column">').concat(e("28000"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28010</td>\n                      <td style="padding-left: 8px;">SHAREHOLDER LOAN - #2</td>\n                      <td class="amount-column">').concat(e("28010"),'</td>\n                    </tr>\n                    \x3c!-- LOAN PAYABLE --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 40px;">LOAN PAYABLE</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">21450</td>\n                      <td style="padding-left: 8px;">LOAN PAYABLE - 2199435 ONT INC</td>\n                      <td class="amount-column">').concat(e("21450"),'</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">28050</td>\n                      <td style="padding-left: 8px;">LOAN PAYABLE - Executive Mortgage</td>\n                      <td class="amount-column">').concat(e("28050"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LONG-TERM LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL LONG-TERM LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["28000","28010","21450","28050"])),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LIABILITIES --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL LIABILITIES</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])+t(["28000","28010","21450","28050"])),'</td>\n                    </tr>\n                    \x3c!-- SHAREHOLDER\'S EQUITY --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 8px;">SHAREHOLDER\'S EQUITY</td>\n                    </tr>\n                    \x3c!-- COMMON STOCK --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">COMMON STOCK</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">30010</td>\n                      <td style="padding-left: 8px;">COMMON STOCK</td>\n                      <td class="amount-column">').concat(e("30010"),'</td>\n                    </tr>\n                    \x3c!-- RETAINED EARNINGS --\x3e\n                    <tr class="header-row">\n                      <td colspan="3" style="padding-left: 24px;">RETAINED EARNINGS</td>\n                    </tr>\n                    <tr>\n                      <td style="padding-left: 40px;">39999</td>\n                      <td style="padding-left: 8px;">RETAINED EARNINGS - Y.T.D.</td>\n                      <td class="amount-column">').concat(e("39999"),'</td>\n                    </tr>\n                    \x3c!-- TOTAL EQUITY --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 24px;">TOTAL EQUITY</td>\n                      <td class="amount-column">').concat(h(t(["30010","39999"])),'</td>\n                    </tr>\n                    \x3c!-- TOTAL LIABILITIES & EQUITY --\x3e\n                    <tr class="subtotal-row">\n                      <td colspan="2" style="padding-left: 8px;">TOTAL LIABILITIES & EQUITY</td>\n                      <td class="amount-column">').concat(h(t(["20000","21000","22000","23000","23001","23004","21500","21600"])+t(["28000","28010","21450","28050"])+t(["30010","39999"])),"</td>\n                    </tr>\n                  ")})(),"\n              </tbody>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(n),t.document.close(),t.focus(),setTimeout((()=>{t.print(),t.close()}),500)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Print Statement"})]}),(0,gp.jsx)("img",{src:fp,alt:"Company Logo",className:"print-logo"}),(0,gp.jsxs)("div",{className:"text-center mb-2",children:[(0,gp.jsx)("div",{className:"text-2xl font-bold",children:"Savemax 365 Realty, Brokerage"}),(0,gp.jsx)("div",{className:"text-lg font-semibold mt-1",children:"Balance Sheet"}),(0,gp.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[e," to ",r]})]}),(0,gp.jsxs)("table",{className:"w-full text-left border-t border-b border-gray-300 mt-6",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"py-2 px-2 w-32",children:"Acct. #"}),(0,gp.jsx)("th",{className:"py-2 px-2",children:"Description"}),(0,gp.jsx)("th",{className:"py-2 px-2 w-32 text-right",children:"Amount"})]})}),(0,gp.jsxs)("tbody",{className:"text-sm",children:[(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"ASSETS"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"CURRENT ASSETS"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"CASH"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"10001"}),(0,gp.jsx)("td",{children:"CASH - CURRENT ACCOUNT"}),(0,gp.jsx)("td",{className:"text-right",children:p("10001")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"10004"}),(0,gp.jsx)("td",{children:"CASH - COMMISSION TRUST ACCOUNT"}),(0,gp.jsx)("td",{className:"text-right",children:p("10004")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"NOTES RECEIVABLE"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"11000"}),(0,gp.jsx)("td",{children:"NOTES RECEIVABLES"}),(0,gp.jsx)("td",{className:"text-right",children:p("11000")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"ACCOUNTS RECEIVABLE"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"12100"}),(0,gp.jsx)("td",{children:"A/R - AGT'S RECOVERABLE- GEN EXP"}),(0,gp.jsx)("td",{className:"text-right",children:p("12100")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"12500"}),(0,gp.jsx)("td",{children:"A/R - OTHER"}),(0,gp.jsx)("td",{className:"text-right",children:p("12500")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"12600"}),(0,gp.jsx)("td",{children:"LOAN - HOMELIFE TOP STAR"}),(0,gp.jsx)("td",{className:"text-right",children:p("12600")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"PREPAID EXPENSES"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"15000"}),(0,gp.jsx)("td",{children:"PREPAID EXPENSES"}),(0,gp.jsx)("td",{className:"text-right",children:p("15000")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL CURRENT ASSETS"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["10001","10004","11000","12100","12500","12600","12300","15000"]))})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"FIXED ASSETS"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"OFFICE EQUIPMENT"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"16030"}),(0,gp.jsx)("td",{children:"OFFICE FURNITURE"}),(0,gp.jsx)("td",{className:"text-right",children:p("16030")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"COMPUTER EQUIPMENT"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"16060"}),(0,gp.jsx)("td",{children:"COMPUTER SOFTWARE"}),(0,gp.jsx)("td",{className:"text-right",children:p("16060")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"LEASEHOLD IMPROVEMENTS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"16080"}),(0,gp.jsx)("td",{children:"SIGNS"}),(0,gp.jsx)("td",{className:"text-right",children:p("16080")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"FRANCHISE COSTS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"16090"}),(0,gp.jsx)("td",{children:"FRANCHISE COST"}),(0,gp.jsx)("td",{className:"text-right",children:p("16090")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL FIXED ASSETS"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["16060","16080","16090","16030"]))})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"ACCUMULATED DEPRECIATION"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"17060"}),(0,gp.jsx)("td",{children:"ACC. DEPR. - COMP. SOFTWARE"}),(0,gp.jsx)("td",{className:"text-right",children:p("17060")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"17080"}),(0,gp.jsx)("td",{children:"ACC. DEPR. - SIGNS"}),(0,gp.jsx)("td",{className:"text-right",children:p("17080")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"17090"}),(0,gp.jsx)("td",{children:"ACC. AMOR. - FRANCHISE COSTS"}),(0,gp.jsx)("td",{className:"text-right",children:p("17090")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"NET FIXED ASSETS"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["16060","16080","16090","16030"])-x(["17060","17080","17090"]))})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"NET TRUST FUNDS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"10002"}),(0,gp.jsx)("td",{children:"CASH - TRUST"}),(0,gp.jsx)("td",{className:"text-right",children:p("10002")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"21300"}),(0,gp.jsx)("td",{children:"LIABILITY FOR TRUST FUNDS HELD"}),(0,gp.jsx)("td",{className:"text-right",children:p("21300")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL ASSETS"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["10001","10004","11000","12100","12500","12600","12300","15000"])+x(["16060","16080","16090"])-x(["17060","17080","17090"])+x(["10002","21300"]))})]}),(0,gp.jsx)("tr",{className:"print-break",children:(0,gp.jsx)("td",{colSpan:3})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-8 pb-1",children:"LIABILITIES"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"CURRENT LIABILITIES"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"BANK OVERDRAFT"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"20000"}),(0,gp.jsx)("td",{children:"BANK OPERATING LINE"}),(0,gp.jsx)("td",{className:"text-right",children:p("20000")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"ACCOUNTS PAYABLE & ACCRUALS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"21000"}),(0,gp.jsx)("td",{children:"ACCOUNTS PAYABLE"}),(0,gp.jsx)("td",{className:"text-right",children:p("21000")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"22000"}),(0,gp.jsx)("td",{children:"ACCRUED EXPENSES"}),(0,gp.jsx)("td",{className:"text-right",children:p("22000")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"23000"}),(0,gp.jsx)("td",{children:"HST COLLECTED"}),(0,gp.jsx)("td",{className:"text-right",children:p("23000")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"23001"}),(0,gp.jsx)("td",{children:"HST INPUT TAX CREDIT"}),(0,gp.jsx)("td",{className:"text-right",children:p("23001")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"23004"}),(0,gp.jsx)("td",{children:"HST NET PAYABLE"}),(0,gp.jsx)("td",{className:"text-right",children:p("23004")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"COMMISSIONS PAYABLE"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"21500"}),(0,gp.jsx)("td",{children:"COMMISSION PAYABLE"}),(0,gp.jsx)("td",{className:"text-right",children:p("21500")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"21600"}),(0,gp.jsx)("td",{children:"BROKERS COMMISSION"}),(0,gp.jsx)("td",{className:"text-right",children:p("21600")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL CURRENT LIABILITIES"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["20000","21000","22000","23000","23001","23004","21500","21600"]))})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1",children:"LONG-TERM LIABILITIES"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"SHAREHOLDER LOANS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"28000"}),(0,gp.jsx)("td",{children:"SHAREHOLDER LOAN - SRI"}),(0,gp.jsx)("td",{className:"text-right",children:p("28000")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"28010"}),(0,gp.jsx)("td",{children:"SHAREHOLDER LOAN - #2"}),(0,gp.jsx)("td",{className:"text-right",children:p("28010")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-8",children:"LOAN PAYABLE"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"21450"}),(0,gp.jsx)("td",{children:"LOAN PAYABLE - 2199435 ONT INC"}),(0,gp.jsx)("td",{className:"text-right",children:p("21450")})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"28050"}),(0,gp.jsx)("td",{children:"LOAN PAYABLE - Executive Mortgage"}),(0,gp.jsx)("td",{className:"text-right",children:p("28050")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LONG-TERM LIABILITIES"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["28000","28010","21450","28050"]))})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LIABILITIES"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["20000","21000","22000","23000","23001","23004","21500","21600"])+x(["28000","28010","21450","28050"]))})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-8 pb-1",children:"SHAREHOLDER'S EQUITY"})}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"COMMON STOCK"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"30010"}),(0,gp.jsx)("td",{children:"COMMON STOCK"}),(0,gp.jsx)("td",{className:"text-right",children:p("30010")})]}),(0,gp.jsx)("tr",{className:"font-bold",children:(0,gp.jsx)("td",{colSpan:3,className:"pt-4 pb-1 pl-4",children:"RETAINED EARNINGS"})}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{children:"39999"}),(0,gp.jsx)("td",{children:"RETAINED EARNINGS - Y.T.D."}),(0,gp.jsx)("td",{className:"text-right",children:p("39999")})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL EQUITY"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["30010","39999"]))})]}),(0,gp.jsxs)("tr",{className:"font-bold",children:[(0,gp.jsx)("td",{colSpan:2,className:"pt-4 pb-1",children:"TOTAL LIABILITIES & EQUITY"}),(0,gp.jsx)("td",{className:"text-right font-bold",children:h(x(["20000","21000","22000","23000","23001","23004","21500","21600"])+x(["28000","28010","21450","28050"])+x(["30010","39999"]))})]})]})]})]})]})}const zT=()=>{const[e,n]=(0,t.useState)("income");return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("style",{children:"\n  @media print {\n    .no-print { display: none !important; }\n    .print-logo { display: block !important; margin: 0 auto 12px auto; max-width: 120px; }\n    body { margin: 0; padding: 20px; }\n    .print-break { page-break-before: always; }\n    table, th, td { font-size: 10px !important; }\n    .print-header, .print-logo + div, .print-logo + div .text-2xl, .print-logo + div .text-lg { font-size: 13px !important; }\n  }\n  .print-logo { display: none; }\n"}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(xT,{})}),(0,gp.jsxs)("div",{className:"flex-1 p-6",children:[(0,gp.jsx)("div",{className:"flex space-x-4 mb-6 border-b pb-2 no-print",children:BT.map((t=>(0,gp.jsx)("button",{onClick:()=>n(t.id),className:"px-4 py-2 rounded-t font-medium transition-colors focus:outline-none ".concat(e===t.id?"bg-blue-100 text-blue-700 border-b-2 border-blue-700":"text-gray-600 hover:bg-gray-100"),children:t.label},t.id)))}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md min-h-[300px]",children:["income"===e&&(0,gp.jsx)("div",{children:(0,gp.jsx)(UT,{})}),"balance"===e&&(0,gp.jsx)("div",{children:(0,gp.jsx)(HT,{})})]})]})]})]})},VT=e=>{let{isOpen:n,onClose:r,onPrint:a}=e;const[s,o]=(0,t.useState)([]),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1);(0,t.useEffect)((()=>{n&&x()}),[n]);const x=async()=>{try{const e=(await Oj.get("/agents")).data.sort(((e,t)=>"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName))));o(e)}catch(e){console.error("Error fetching agents:",e)}},f=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",plan5050:"Plan 50/50",plan8020:"Plan 80/20",plan150:"Plan 150",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e};return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Print Agent Report"}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agent Name"}),(0,gp.jsxs)("select",{value:i,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,gp.jsx)("option",{value:"",children:"Select an agent"}),s.map((e=>(0,gp.jsxs)("option",{value:e._id,children:[e.employeeNo," - ",e.firstName," ",e.lastName]},e._id)))]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,gp.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{if(i&&c&&u){p(!0);try{var e;const t=(await Oj.get("/commission-trust-eft")).data.filter((e=>"AgentCommissionTransfer"===e.type)),n=s.find((e=>e._id===i)),o=n?"".concat(n.firstName," ").concat(n.lastName):"",l=null===n||void 0===n||null===(e=n.employeeNo)||void 0===e?void 0:e.toString(),d=t.filter((e=>{const t=new Date(e.date),r=new Date(c),a=new Date(u);return(e.agentId===l||e.agentId===i||e.agentName===o||e.agentName===(null===n||void 0===n?void 0:n.firstName)+" "+(null===n||void 0===n?void 0:n.lastName))&&(t>=r&&t<=a)})),m=(await Oj.get("/agents")).data,h=d.map((e=>{var t,n,r;const a=m.find((t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId})),s=e.tradeId;let o=null;null!==s&&void 0!==s&&s.agentCommissionList&&s.agentCommissionList.length>0&&(o=s.agentCommissionList.find((t=>t.agentId===e.agentId)),o||(o=s.agentCommissionList.find((t=>t.agentName===e.agentName))),!o&&null!==a&&void 0!==a&&a.employeeNo&&(o=s.agentCommissionList.find((e=>e.agentId===a.employeeNo.toString()))),o||1!==s.agentCommissionList.length||(o=s.agentCommissionList[0]));let i="0.00";if((null===(t=o)||void 0===t||!t.totalFees)&&null!==a&&void 0!==a&&a.feeInfo){let t=0;switch(a.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;default:t=0}i=(t+.13*t).toFixed(2)}return{agentId:(null===a||void 0===a?void 0:a.employeeNo)||e.agentId,agentName:e.agentName||(null===a||void 0===a?void 0:a.firstName)+" "+(null===a||void 0===a?void 0:a.lastName),eftNumber:e.eftNumber,tradeNumber:null===s||void 0===s?void 0:s.tradeNumber,planInfo:f((null===a||void 0===a?void 0:a.feeInfo)||(null===(n=o)||void 0===n?void 0:n.feeInfo)),netCommission:e.amount,feesDeducted:(null===(r=o)||void 0===r?void 0:r.totalFees)||i,date:e.date,tradeAddress:null!==s&&void 0!==s&&s.keyInfo?"".concat(s.keyInfo.streetNumber||""," ").concat(s.keyInfo.streetName||"").trim():""}}));h.sort(((e,t)=>new Date(t.date)-new Date(e.date)));a(h,o||"Unknown Agent",c,u),r()}catch(t){console.error("Error generating report:",t),alert("Error generating report. Please try again.")}finally{p(!1)}}else alert("Please select an agent and both date fields")},disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Processing...":"Proceed"})]})]})}):null},qT=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(!1);(0,t.useEffect)((()=>{i()}),[]);const i=async()=>{try{a(!0);const e=(await Oj.get("/commission-trust-eft")).data.filter((e=>"AgentCommissionTransfer"===e.type)),t=(await Oj.get("/agents")).data,r=e.map((e=>{var n,r,a,s;const o=t.find((t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId})),i=e.tradeId;let c=null;null!==i&&void 0!==i&&i.agentCommissionList&&i.agentCommissionList.length>0&&(c=i.agentCommissionList.find((t=>t.agentId===e.agentId)),c||(c=i.agentCommissionList.find((t=>t.agentName===e.agentName))),!c&&null!==o&&void 0!==o&&o.employeeNo&&(c=i.agentCommissionList.find((e=>e.agentId===o.employeeNo.toString()))),c||1!==i.agentCommissionList.length||(c=i.agentCommissionList[0])),console.log("EFT Data:",{eftNumber:e.eftNumber,agentId:e.agentId,agentName:e.agentName,tradeNumber:null===i||void 0===i?void 0:i.tradeNumber,agentCommissionList:null===i||void 0===i?void 0:i.agentCommissionList,agentCommission:c,totalFees:null===(n=c)||void 0===n?void 0:n.totalFees,agentEmployeeNo:null===o||void 0===o?void 0:o.employeeNo});let d="0.00";if((null===(r=c)||void 0===r||!r.totalFees)&&null!==o&&void 0!==o&&o.feeInfo){let t=0;switch(o.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;default:t=0}d=(t+.13*t).toFixed(2)}return{agentId:(null===o||void 0===o?void 0:o.employeeNo)||e.agentId,agentName:e.agentName||(null===o||void 0===o?void 0:o.firstName)+" "+(null===o||void 0===o?void 0:o.lastName),eftNumber:e.eftNumber,tradeNumber:null===i||void 0===i?void 0:i.tradeNumber,planInfo:l((null===o||void 0===o?void 0:o.feeInfo)||(null===(a=c)||void 0===a?void 0:a.feeInfo)),netCommission:e.amount,feesDeducted:(null===(s=c)||void 0===s?void 0:s.totalFees)||d,date:e.chequeDate||e.date,tradeAddress:null!==i&&void 0!==i&&i.keyInfo?"".concat(i.keyInfo.streetNumber||""," ").concat(i.keyInfo.streetName||"").trim():""}}));r.sort(((e,t)=>new Date(t.date)-new Date(e.date))),n(r),a(!1)}catch(e){console.error("Error fetching EFT data:",e),a(!1)}},l=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e},c=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",d=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Agent Payment Information"}),(0,gp.jsxs)("button",{onClick:()=>{o(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors print:hidden",children:[(0,gp.jsx)(op,{}),"Print Report"]})]}),(0,gp.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Complete Agent Commission Information - All Trades"})}),r?(0,gp.jsxs)("div",{className:"p-8 text-center",children:[(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,gp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment data..."})]}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"EFT #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Info"}),(0,gp.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Office Total Fees",(0,gp.jsx)("br",{}),(0,gp.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,gp.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Net Commission",(0,gp.jsx)("br",{}),(0,gp.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.eftNumber?"EFT-".concat(e.eftNumber):"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(e.date)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.planInfo}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c(e.feesDeducted)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:c(e.netCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c((parseFloat(e.netCommission||0)*(.13/1.15)).toFixed(2))})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),e.length>0&&(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Records:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:e.length})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Office Total Fees:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total HST:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commission Paid WITHOUT HST:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0)-e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:c(e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0))})]})]})})]})]})})]}),(0,gp.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "}),(0,gp.jsx)(VT,{isOpen:s,onClose:()=>o(!1),onPrint:(e,t,n,r)=>{const a=window.open("","_blank"),s=(new Date).toLocaleDateString(),o=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",i=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})},l=e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0),c=e.reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0),d=e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0),u="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Report - ".concat(t,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="logo-container">\n            <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" style="max-width: 120px; height: auto; margin-bottom: 10px;">\n          </div>\n          <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n          <div class="report-title">Agent Payment Report</div>\n          <div class="report-subtitle">Complete Agent Commission Information - All Trades</div>\n          <div class="report-info">\n            Agent: ').concat(t," | Period: ").concat(i(n)," to ").concat(i(r)," | Generated: ").concat(s,"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>EFT #</th>\n              <th>Trade #</th>\n              <th>Date Issued</th>\n              <th>Plan Info</th>\n              <th>Office Total Fees<br /><small>*HST Included</small></th>\n              <th>Net Commission<br /><small>*HST Included</small></th>\n              <th>HST</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map(((e,t)=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.eftNumber?"EFT-".concat(e.eftNumber):"N/A","</td>\n                  <td>").concat(e.tradeNumber||"N/A","</td>\n                  <td>").concat(i(e.date),"</td>\n                  <td>").concat(e.planInfo,'</td>\n                  <td class="red-text">').concat(o(e.feesDeducted),'</td>\n                  <td class="green-text">').concat(o(e.netCommission),'</td>\n                  <td class="red-text">').concat(o(parseFloat(e.netCommission||0)*(.13/1.15)),"</td>\n                </tr>\n              "))).join(""):'<tr><td colspan="9" style="text-align: center; padding: 20px;">No data available for the selected period.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Records:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Office Total Fees (HST INCLUDED):</span>\n            <span class="red-text">').concat(o(c),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total HST:</span>\n            <span class="red-text">').concat(o(d),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission Paid WITHOUT HST:</span>\n            <span class="green-text">').concat(o(l-d),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span class="green-text">').concat(o(l),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');a.document.write(u),a.document.close()}})]})},WT=e=>{let{isOpen:n,onClose:r}=e;const[a,s]=(0,t.useState)({fromDate:"",toDate:""}),[o,i]=(0,t.useState)(!1),l=e=>{const{name:t,value:n}=e.target;s((e=>J(J({},e),{},{[t]:n})))},c=e=>{const t=new Date;let n,r;switch(e){case"today":n=r=t.toISOString().split("T")[0];break;case"yesterday":const e=new Date(t);e.setDate(e.getDate()-1),n=r=e.toISOString().split("T")[0];break;case"thisWeek":const a=new Date(t);a.setDate(t.getDate()-t.getDay()),n=a.toISOString().split("T")[0],r=t.toISOString().split("T")[0];break;case"thisMonth":n=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],r=t.toISOString().split("T")[0];break;case"lastMonth":n=new Date(t.getFullYear(),t.getMonth()-1,1).toISOString().split("T")[0],r=new Date(t.getFullYear(),t.getMonth(),0).toISOString().split("T")[0];break;default:return}s({fromDate:n,toDate:r})},d=(e,t,n)=>{const r=window.open("","_blank"),a='\n       <!DOCTYPE html>\n       <html>\n         <head>\n           <title>Journal Entries Report - Bestway Real Estate Ltd., Brokerage</title>\n           <style>\n             body {\n               font-family: Arial, sans-serif;\n               margin: 20px;\n               line-height: 1.6;\n               color: #000000;\n             }\n             .header {\n               text-align: center;\n               margin-bottom: 30px;\n               border-bottom: 2px solid #000000;\n               padding-bottom: 10px;\n             }\n                           .company-info {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                margin-bottom: 20px;\n              }\n                             .company-logo {\n                 width: 120px;\n                 height: 120px;\n                 margin-bottom: 15px;\n                 object-fit: contain;\n               }\n             .company-name {\n               font-size: 24px;\n               font-weight: bold;\n               color: #000000;\n             }\n             .report-title {\n               font-size: 28px;\n               font-weight: bold;\n               color: #000000;\n               margin-top: 10px;\n             }\n             .date-range {\n               text-align: center;\n               margin-bottom: 20px;\n               font-size: 14px;\n               color: #000000;\n             }\n             .journal-entry {\n               margin-bottom: 30px;\n               border: 1px solid #000000;\n               border-radius: 5px;\n               overflow: hidden;\n             }\n             .entry-header {\n               background-color: #f5f5f5;\n               padding: 10px;\n               border-bottom: 1px solid #000000;\n             }\n             .entry-details {\n               display: flex;\n               justify-content: space-between;\n               margin-bottom: 5px;\n               color: #000000;\n             }\n             .entry-table {\n               width: 100%;\n               border-collapse: collapse;\n             }\n             .entry-table th,\n             .entry-table td {\n               border: 1px solid #000000;\n               padding: 8px;\n               text-align: left;\n               color: #000000;\n             }\n             .entry-table th {\n               background-color: #f0f0f0;\n               font-weight: bold;\n               color: #000000;\n             }\n             .totals {\n               background-color: #f5f5f5;\n               padding: 10px;\n               border-top: 1px solid #000000;\n               font-weight: bold;\n               color: #000000;\n             }\n             .debit {\n               color: #000000;\n             }\n             .credit {\n               color: #000000;\n             }\n             .period-summary {\n               background-color: #f8f9fa;\n               padding: 15px;\n               margin-bottom: 20px;\n               border-radius: 5px;\n               border: 1px solid #000000;\n             }\n             .period-summary h3 {\n               margin: 0 0 10px 0;\n               color: #000000;\n             }\n             .period-summary div {\n               display: flex;\n               justify-content: space-between;\n               font-size: 14px;\n               color: #000000;\n             }\n             .footer {\n               margin-top: 30px;\n               text-align: center;\n               font-size: 12px;\n               color: #000000;\n             }\n             @media print {\n               body { margin: 0; }\n               .no-print { display: none; }\n             }\n           </style>\n         </head>\n         <body>\n           <div class="header">\n             <div class="company-info">\n               <img src="/logo1.jpg" alt="Bestway Real Estate Ltd. Logo" class="company-logo" onerror="this.style.display=\'none\'">\n               <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n             </div>\n             <div class="report-title">Journal Entries Report</div>\n           </div>\n          \n          <div class="date-range">\n            <strong>Period:</strong> '.concat(new Date(t.fromDate).toLocaleDateString()," to ").concat(new Date(t.toDate).toLocaleDateString(),'\n          </div>\n\n          <div class="period-summary">\n            <h3>Period Summary</h3>\n            <div>\n              <span><strong>Total Journal Entries:</strong> ').concat(n.entryCount,"</span>\n              <span><strong>Total Debits:</strong> $").concat(n.totalDebits.toFixed(2),"</span>\n              <span><strong>Total Credits:</strong> $").concat(n.totalCredits.toFixed(2),"</span>\n            </div>\n          </div>\n\n          ").concat(Object.entries(e).map((e=>{let[t,n]=e;const r=n.reduce(((e,t)=>e+(t.debit||0)),0),a=n.reduce(((e,t)=>e+(t.credit||0)),0);return'\n                <div class="journal-entry">\n                  <div class="entry-header">\n                    <div class="entry-details">\n                      <strong>Reference:</strong> '.concat(t,'\n                    </div>\n                    <div class="entry-details">\n                      <strong>Date:</strong> ').concat((()=>{const e=n[0],t=e.chequeDate||e.date||e.createdAt;return new Date(t).toLocaleDateString()})(),'\n                    </div>\n                    <div class="entry-details">\n                      <strong>Description:</strong> ').concat(n[0].description||"N/A",'\n                    </div>\n                  </div>\n                  \n                  <table class="entry-table">\n                    <thead>\n                      <tr>\n                        <th>Account Number</th>\n                        <th>Account Name</th>\n                        <th>Debit</th>\n                        <th>Credit</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      ').concat(n.map((e=>"\n                        <tr>\n                          <td>".concat(e.accountNumber,"</td>\n                          <td>").concat(e.accountName,'</td>\n                          <td class="debit">').concat(e.debit>0?"$"+e.debit.toFixed(2):"",'</td>\n                          <td class="credit">').concat(e.credit>0?"$"+e.credit.toFixed(2):"","</td>\n                        </tr>\n                      "))).join(""),'\n                    </tbody>\n                  </table>\n                  \n                  <div class="totals">\n                    <span>Total Debits: $').concat(r.toFixed(2),'</span>\n                    <span style="margin-left: 20px;">Total Credits: $').concat(a.toFixed(2),"</span>\n                  </div>\n                </div>\n              ")})).join(""),'\n\n          <div class="footer">\n            <p>Report generated on ').concat((new Date).toLocaleString(),"</p>\n          </div>\n        </body>\n      </html>\n    ");r.document.write(a),r.document.close(),r.focus(),setTimeout((()=>{r.print(),r.close()}),500)};return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Print Journal Entries Report"}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"\xd7"})]}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Select"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>c("today"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"Today"}),(0,gp.jsx)("button",{type:"button",onClick:()=>c("yesterday"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"Yesterday"}),(0,gp.jsx)("button",{type:"button",onClick:()=>c("thisWeek"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"This Week"}),(0,gp.jsx)("button",{type:"button",onClick:()=>c("thisMonth"),className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"This Month"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",name:"fromDate",value:a.fromDate,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",name:"toDate",value:a.toDate,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,gp.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{if(a.fromDate&&a.toDate)if(new Date(a.fromDate)>new Date(a.toDate))$p.error("Start date cannot be after end date");else{i(!0);try{const e=(await Oj.get("/ledger?from=".concat(a.fromDate,"&to=").concat(a.toDate))).data.filter((e=>"Journal Entry"===e.type));if(0===e.length)return $p.info("No journal entries found for the selected period"),void i(!1);const t={};e.forEach((e=>{t[e.reference]||(t[e.reference]=[]),t[e.reference].push(e)}));const n={totalDebits:0,totalCredits:0,entryCount:Object.keys(t).length};Object.values(t).forEach((e=>{e.forEach((e=>{n.totalDebits+=e.debit||0,n.totalCredits+=e.credit||0}))})),d(t,a,n),r(),$p.success("Report generated successfully!")}catch(e){console.error("Error fetching journal entries:",e),$p.error("Failed to generate report")}finally{i(!1)}}else $p.error("Please select both start and end dates")},disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Generating...":"Generate Report"})]})]})]})}):null},YT=e=>{let{isOpen:n,onClose:r,onRetrieve:a}=e;const[s,o]=(0,t.useState)({fromDate:"",toDate:""});return n?(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Retrieve Journal Entries"}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,gp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.fromDate&&s.toDate?new Date(s.fromDate)>new Date(s.toDate)?alert("From date cannot be after to date"):(a(s),r()):alert("Please select both from and to dates")},className:"space-y-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:s.fromDate,onChange:e=>o((t=>J(J({},t),{},{fromDate:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:s.toDate,onChange:e=>o((t=>J(J({},t),{},{toDate:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,gp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retrieve Data"})]})]})]})}):null},GT=e=>{let{entries:t,dateRange:n,onClose:r}=e;if(!t||0===t.length)return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Journal Entries (",n.fromDate," to ",n.toDate,")"]}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,gp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gp.jsx)("div",{className:"text-center py-8",children:(0,gp.jsx)("p",{className:"text-gray-500 text-lg",children:"No journal entries found for the selected date range."})}),(0,gp.jsx)("div",{className:"flex justify-end",children:(0,gp.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})});const a=t.reduce(((e,t)=>(e[t.reference]||(e[t.reference]=[]),e[t.reference].push(t),e)),{});return(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,gp.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Journal Entries (",n.fromDate," to ",n.toDate,")"]}),(0,gp.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:(0,gp.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,gp.jsx)("div",{className:"space-y-6",children:Object.entries(a).map((e=>{let[t,n]=e;const r=n[0],a=n.reduce(((e,t)=>e+(parseFloat(t.debit)||0)),0),s=n.reduce(((e,t)=>e+(parseFloat(t.credit)||0)),0);return(0,gp.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Date: "}),new Date(r.date).toLocaleDateString()]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Reference: "}),r.reference]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Description: "}),r.description||"N/A"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"font-semibold",children:"Type: "}),r.type||"Journal Entry"]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Number"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Debit"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Credit"})]})}),(0,gp.jsx)("tbody",{children:n.map(((e,t)=>(0,gp.jsxs)("tr",{className:"border-b",children:[(0,gp.jsx)("td",{className:"px-4 py-2 text-sm",children:e.accountNumber}),(0,gp.jsx)("td",{className:"px-4 py-2 text-sm",children:e.accountName}),(0,gp.jsx)("td",{className:"px-4 py-2 text-sm",children:parseFloat(e.debit)>0?"$".concat(parseFloat(e.debit).toFixed(2)):"$0.00"}),(0,gp.jsx)("td",{className:"px-4 py-2 text-sm",children:parseFloat(e.credit)>0?"$".concat(parseFloat(e.credit).toFixed(2)):"$0.00"})]},t)))})]})}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 text-sm font-semibold mt-4 pt-2 border-t",children:[(0,gp.jsxs)("span",{children:["Total Debits: $",a.toFixed(2)]}),(0,gp.jsxs)("span",{children:["Total Credits: $",s.toFixed(2)]})]})]},t)}))}),(0,gp.jsx)("div",{className:"flex justify-end mt-6",children:(0,gp.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})},KT=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)((()=>({date:(new Date).toISOString().split("T")[0],reference:"JE1000",description:"",entries:[{accountNumber:"",accountName:"",debit:"",credit:""},{accountNumber:"",accountName:"",debit:"",credit:""}]}))),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)([]),[x,f]=(0,t.useState)({}),g=async()=>{try{const e=await Oj.get("/ledger");n(e.data)}catch(e){console.error("Error fetching journal entries:",e),$p.error("Failed to fetch journal entries")}},b=async()=>{try{return(await Oj.get("/ledger/next-reference/dummy")).data.nextReference}catch(e){return console.error("Error fetching next JE reference:",e),"JE1000"}};(0,t.useEffect)((()=>{g();(async()=>{const e=await b();a((t=>J(J({},t),{},{reference:e})))})()}),[]);const y=e=>{const{name:t,value:n}=e.target;a((e=>J(J({},e),{},{[t]:n})))},v=(e,t,n)=>{a((r=>J(J({},r),{},{entries:r.entries.map(((r,a)=>a===e?J(J({},r),{},{[t]:n}):r))})))},N=(e,t)=>{const n=(e=>{const t=lx.find((t=>t.acct===e));return t?t.description:""})(t);v(e,"accountNumber",t),v(e,"accountName",n)};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Journal Entry"}),(0,gp.jsxs)("div",{className:"flex space-x-3",children:[(0,gp.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[(0,gp.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),(0,gp.jsx)("span",{children:"Retrieve Data"})]}),(0,gp.jsxs)("button",{type:"button",onClick:()=>l(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center space-x-2",children:[(0,gp.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,gp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),(0,gp.jsx)("span",{children:"Print Report"})]})]})]}),(0,gp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{if(r.entries.length<2)return $p.error("At least 2 entries are required"),!1;if(r.entries.some((e=>!e.accountNumber)))return $p.error("All entries must have account numbers"),!1;const e=r.entries.reduce(((e,t)=>e+(parseFloat(t.debit)||0)),0),t=r.entries.reduce(((e,t)=>e+(parseFloat(t.credit)||0)),0);if(Math.abs(e-t)>.01)return $p.error("Total debits must equal total credits"),!1;const n=r.entries.some((e=>parseFloat(e.debit)>0)),a=r.entries.some((e=>parseFloat(e.credit)>0));return!(!n||!a)||($p.error("At least one debit and one credit entry are required"),!1)})()){o(!0);try{const e=r.entries.map((e=>parseFloat(e.debit)>0||parseFloat(e.credit)>0?Oj.post("/ledger",{accountNumber:e.accountNumber,accountName:e.accountName,debit:parseFloat(e.debit)||0,credit:parseFloat(e.credit)||0,description:r.description,date:r.date,reference:r.reference,type:"Journal Entry"}):Promise.resolve()));await Promise.all(e),$p.success("Journal entry posted successfully!");const t=new Date,n=await b();a({date:t.toISOString().split("T")[0],reference:n,description:"",entries:[{accountNumber:"",accountName:"",debit:"",credit:""},{accountNumber:"",accountName:"",debit:"",credit:""}]}),g()}catch(t){console.error("Error posting journal entry:",t),$p.error("Failed to post journal entry")}finally{o(!1)}}},className:"space-y-6",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,gp.jsx)("input",{type:"date",name:"date",value:r.date,onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference"}),(0,gp.jsx)("input",{type:"text",name:"reference",value:r.reference,readOnly:!0,placeholder:"Auto-generated JE Reference",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,gp.jsx)("input",{type:"text",name:"description",value:r.description,onChange:y,placeholder:"Journal Entry Description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,gp.jsxs)("div",{className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Journal Entries"}),(0,gp.jsx)("button",{type:"button",onClick:()=>{a((e=>J(J({},e),{},{entries:[...e.entries,{accountNumber:"",accountName:"",debit:"",credit:""}]})))},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Add Entry"})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Number"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Account Name"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Debit"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Credit"}),(0,gp.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b",children:"Action"})]})}),(0,gp.jsx)("tbody",{children:r.entries.map(((e,t)=>(0,gp.jsxs)("tr",{className:"border-b",children:[(0,gp.jsx)("td",{className:"px-4 py-2",children:(0,gp.jsxs)("select",{value:e.accountNumber,onChange:e=>N(t,e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,gp.jsx)("option",{value:"",children:"Select Account"}),lx.map((t=>(0,gp.jsx)("option",{value:t.acct,children:e.accountNumber===t.acct?t.acct:"".concat(t.acct," - ").concat(t.description)},t.acct)))]})}),(0,gp.jsx)("td",{className:"px-4 py-2",children:(0,gp.jsx)("input",{type:"text",value:e.accountName,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})}),(0,gp.jsx)("td",{className:"px-4 py-2",children:(0,gp.jsx)("input",{type:"number",step:"0.01",value:e.debit,onChange:e=>v(t,"debit",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,gp.jsx)("td",{className:"px-4 py-2",children:(0,gp.jsx)("input",{type:"number",step:"0.01",value:e.credit,onChange:e=>v(t,"credit",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,gp.jsx)("td",{className:"px-4 py-2",children:r.entries.length>2&&(0,gp.jsx)("button",{type:"button",onClick:()=>(e=>{r.entries.length>2&&a((t=>J(J({},t),{},{entries:t.entries.filter(((t,n)=>n!==e))})))})(t),className:"bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700 text-sm",children:"Remove"})})]},t)))})]})}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-4 text-lg font-semibold",children:[(0,gp.jsxs)("span",{children:["Total Debits: $",r.entries.reduce(((e,t)=>e+(parseFloat(t.debit)||0)),0).toFixed(2)]}),(0,gp.jsxs)("span",{children:["Total Credits: $",r.entries.reduce(((e,t)=>e+(parseFloat(t.credit)||0)),0).toFixed(2)]})]})]}),(0,gp.jsx)("div",{className:"flex justify-end",children:(0,gp.jsx)("button",{type:"submit",disabled:s,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:s?"Posting...":"Post Journal Entry"})})]})]})})]}),(0,gp.jsx)(WT,{isOpen:i,onClose:()=>l(!1)}),(0,gp.jsx)(YT,{isOpen:c,onClose:()=>d(!1),onRetrieve:async e=>{try{o(!0);const t=(await Oj.get("/ledger",{params:{from:e.fromDate,to:e.toDate}})).data.filter((e=>"Journal Entry"===e.type));p(t),f(e),m(!0)}catch(t){console.error("Error retrieving journal entries:",t),$p.error("Failed to retrieve journal entries")}finally{o(!1)}}}),u&&x.fromDate&&x.toDate&&(0,gp.jsx)(GT,{entries:h,dateRange:x,onClose:()=>m(!1)})]})},XT=()=>{Pu();const[e,n]=(0,t.useState)("real-estate-trust"),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),h=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString("en-US")}return new Date(e).toLocaleDateString("en-US")}catch(t){return console.error("Error formatting date:",e,t),e||"-"}},p={"real-estate-trust":{name:"Real Estate Trust Account",accountNumber:"10002",accountName:"Cash - Trust"},"commission-trust":{name:"Commission Trust Account",accountNumber:"10004",accountName:"Cash - Commission Trust Account"},"general-account":{name:"General Account",accountNumber:"10001",accountName:"Cash - Current Account"}},x=()=>c.reduce(((e,t)=>e+t.amount),0);return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"general-account"===e?"AR & Disbursements Journal":"Disbursements Journals"}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b mb-6",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("real-estate-trust"),l(!1),d([])},children:"Real Estate Trust Account"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("commission-trust"),l(!1),d([])},children:"Commission Trust Account"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{n("general-account"),l(!1),d([])},children:"General Account"})]})}),(0,gp.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,gp.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("label",{htmlFor:"fromDate",className:"text-sm font-medium text-gray-700",children:"From Date:"}),(0,gp.jsx)("input",{type:"date",id:"fromDate",value:r,onChange:e=>a(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,gp.jsx)("label",{htmlFor:"toDate",className:"text-sm font-medium text-gray-700",children:"To Date:"}),(0,gp.jsx)("input",{type:"date",id:"toDate",value:s,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsx)("button",{onClick:async()=>{if(r&&s){m(!0);try{const t=await Oj.get("/ledger"),n=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let a=n;if(r&&s){const e=new Date(r);e.setUTCHours(0,0,0,0);const t=new Date(s);t.setUTCHours(23,59,59,999),console.log("Date range filtering:",{fromDate:r,toDate:s,startDate:e,endDate:t}),a=n.filter((n=>{const r=n.chequeDate||n.date||n.transactionDate||n.eftDate||n.paymentDate||n.processedDate||n.createdAt,a=new Date(r),s=a>=e&&a<=t;return s||console.log("Entry filtered out by date:",{entryDate:r,parsedDate:a,startDate:e,endDate:t,description:n.description}),s}))}let o=t.data;if(r&&s){const n=new Date(r);n.setUTCHours(0,0,0,0);const a=new Date(s);a.setUTCHours(23,59,59,999),o=t.data.filter((t=>{const r=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt,s=new Date(r),o=s>=n&&s<=a;return o||t.accountNumber!==p[e].accountNumber||console.log("Backend entry filtered out by date:",{entryDate:r,parsedDate:s,startDate:n,endDate:a,description:t.description,accountNumber:t.accountNumber}),o}))}const i=[...a,...o];console.log("=== Disbursements Journals Debug ==="),console.log("All entries count:",i.length),console.log("Backend response count:",t.data.length),console.log("Filtered backend data count:",o.length),console.log("LocalStorage transactions count:",a.length),console.log("Active section:",e),console.log("Account number:",p[e].accountNumber),console.log("Sample entries:",i.slice(0,3));const c=[...new Set(i.map((e=>e.accountNumber)))];console.log("Unique account numbers in data:",c);const u=i.filter((t=>t.accountNumber===p[e].accountNumber));console.log("Entries for account ".concat(p[e].accountNumber,":"),u.length);const m=u.slice(0,5).map((e=>({description:e.description,date:e.date,createdAt:e.createdAt,chequeDate:e.chequeDate,transactionDate:e.transactionDate,allDateFields:Object.keys(e).filter((e=>e.toLowerCase().includes("date")||e.toLowerCase().includes("time"))),allFields:Object.keys(e),parsedDate:e.date?new Date(e.date):new Date(e.createdAt||0)})));console.log("Sample dates for debugging:",m);const x=u.find((e=>{var t;return(null===(t=e.description)||void 0===t?void 0:t.includes("EFT#1015"))||"1015"===e.eftNumber||"1015"===e.referenceNumber}));x&&console.log("EFT#1015 entry details:",x);const f=u.slice(0,3).map((e=>({description:e.description,tradeNumber:e.tradeNumber,tradeId:e.tradeId,allTradeFields:Object.keys(e).filter((e=>e.toLowerCase().includes("trade")||e.toLowerCase().includes("number"))),allFields:Object.keys(e)})));console.log("Trade fields for debugging:",f);const g=i.filter((t=>{const n=t.accountNumber===p[e].accountNumber;let r;return r="general-account"===e&&t.debit>0||t.credit>0,n||console.log("Entry filtered out by account number:",{entryAccountNumber:t.accountNumber,expectedAccountNumber:p[e].accountNumber,description:t.description}),n&&!r&&console.log("Entry filtered out - no valid amount:",{description:t.description,debit:t.debit,credit:t.credit,activeSection:e}),n&&r}));console.log("Filtered account transactions count:",g.length),console.log("Account transactions:",g);const b=g.map((t=>{var n;let r="N/A";if(t.eftNumber)r="EFT#".concat(t.eftNumber);else if(t.description&&t.description.includes("EFT")){const e=t.description.match(/EFT#?(\d+)/i);e&&(r="EFT#".concat(e[1]))}let a="N/A";if(t.payee)a=t.payee;else if(t.description){const e=[/Paid to:\s*([^,]+)/i,/Received from:\s*([^,]+)/i,/Payee:\s*([^,]+)/i,/To:\s*([^,]+)/i,/From:\s*([^,]+)/i];for(const n of e){const e=t.description.match(n);if(e){a=e[1].trim();break}}"N/A"===a&&(a=t.description,a=a.replace(/^EFT#?\d+[-\s]*/i,"").replace(/^EET#?\d+[-\s]*/i,"").replace(/^Trade #:?\s*\d+,\s*Paid to:\s*/i,"").replace(/^Trade #:?\s*\d+,\s*Received from:\s*/i,"").replace(/\s*\([^)]*\)$/,"").replace(/\s*,\s*Brokerage$/,"").replace(/\s*Brokerage$/,"").trim())}let s,o=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt;if(!o){var i;const e=null===(i=t.description)||void 0===i?void 0:i.match(/(\d{1,2}\/\d{1,2}\/\d{4})/);e&&(o=e[1])}return null!==(n=t.description)&&void 0!==n&&n.includes("EFT#1015")&&console.log("EFT#1015 date extraction debug:",{description:t.description,date:t.date,createdAt:t.createdAt,chequeDate:t.chequeDate,transactionDate:t.transactionDate,eftDate:t.eftDate,paymentDate:t.paymentDate,processedDate:t.processedDate,allFields:Object.keys(t),finalTransactionDate:o}),s="general-account"===e?t.debit||t.credit||0:t.credit||0,{payee:a,date:h(o),referenceNumber:r,amount:s,reversed:""}}));d(b),l(!0)}catch(t){console.error("Error fetching ledger data:",t),alert("Error fetching data. Please try again.")}m(!1)}else alert("Please select both from and to dates")},disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Generating...":"Generate Report"}),i&&(0,gp.jsxs)("button",{onClick:()=>{const t=window.open("","_blank"),n='\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Disbursements Journal - Bestway Real Estate Ltd., Brokerage</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              line-height: 1.4;\n              color: #000000;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #000000;\n              padding-bottom: 15px;\n            }\n            .company-logo {\n              width: 60px;\n              height: 60px;\n              margin-bottom: 10px;\n            }\n            .company-name {\n              font-size: 20px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 5px;\n            }\n            .report-title {\n              font-size: 18px;\n              font-weight: bold;\n              color: #000000;\n              margin-bottom: 10px;\n            }\n            .period-info {\n              font-size: 14px;\n              color: #000000;\n              margin-bottom: 5px;\n            }\n            .account-info {\n              font-size: 14px;\n              color: #000000;\n            }\n            .table-container {\n              width: 100%;\n              margin-top: 20px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              border: 1px solid #000000;\n            }\n            th, td {\n              border: 1px solid #000000;\n              padding: 8px;\n              text-align: left;\n            }\n            th {\n              background-color: #f5f5f5;\n              font-weight: bold;\n            }\n            .amount-column {\n              text-align: right;\n            }\n            .total-row {\n              font-weight: bold;\n              border-top: 2px solid #000000;\n            }\n            .total-row td {\n              border-top: 2px solid #000000;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 15px;\n              }\n              .header {\n                margin-bottom: 20px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <img src="/logo1.jpg" alt="Company Logo" class="company-logo" />\n            <div class="company-name">SAVEMAX 365 REALTY, BROKERAGE</div>\n            <div class="report-title">'.concat("general-account"===e?"AR & Disbursements Journal":"Disbursements Journal",'</div>\n            <div class="period-info">Period: ').concat(h(r)," to ").concat(h(s),'</div>\n            <div class="account-info">Bank Account: ').concat(p[e].accountName,'</div>\n          </div>\n          \n          <div class="table-container">\n            <table>\n              <thead>\n                <tr>\n                  <th>Payee</th>\n                  <th>Date</th>\n                  <th>Reference #</th>\n                  <th class="amount-column">Amount</th>\n                  <th>Reversed</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(c.map((e=>"\n                  <tr>\n                    <td>".concat(e.payee,"</td>\n                    <td>").concat(e.date,"</td>\n                    <td>").concat(e.referenceNumber,'</td>\n                    <td class="amount-column">').concat(e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n                    <td>").concat(e.reversed,"</td>\n                  </tr>\n                "))).join(""),'\n              </tbody>\n              <tfoot>\n                <tr class="total-row">\n                  <td colspan="3" style="text-align: right; font-weight: bold;">Total:</td>\n                  <td class="amount-column">').concat(x().toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"</td>\n                  <td></td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </body>\n      </html>\n    ");t.document.write(n),t.document.close(),t.focus(),setTimeout((()=>{t.print(),t.close()}),500)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-2 print:hidden",children:[(0,gp.jsx)(op,{}),"Print Report"]})]})}),i&&(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"text-center mb-6",children:[(0,gp.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,gp.jsx)("img",{src:"/logo1.jpg",alt:"Company Logo",className:"h-16 w-16 mr-4"}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mt-2",children:"general-account"===e?"AR & Disbursements Journal":"Disbursements Journal"})]})]}),(0,gp.jsxs)("div",{className:"text-sm text-gray-600",children:["Period: ",h(r)," to ",h(s)]}),(0,gp.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Bank Account: ",p[e].accountName]})]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Payee"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Reference #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-right font-semibold",children:"Amount"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Reversed"})]})}),(0,gp.jsx)("tbody",{children:c.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.payee}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.date}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.referenceNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right",children:e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.reversed})]},t)))}),(0,gp.jsx)("tfoot",{children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-4 py-2 text-right font-semibold",children:"Total:"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2 text-right font-semibold border-t-2 border-b-2",children:x().toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,gp.jsx)("td",{className:"border border-gray-300 px-4 py-2"})]})})]})})]})]})})]})]})},$T=()=>{Pu();const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),u=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r)}return new Date(e)}catch(t){return console.error("Error formatting date:",e,t),new Date}},m=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),h=(()=>{const e=i.filter((e=>!e.isOpening&&e.amount>0)),t=i.filter((e=>!e.isOpening&&e.amount<0)),n=i.filter((e=>!e.isOpening&&0===e.amount));return{deposits:e.reduce(((e,t)=>e+t.amount),0),cheques:Math.abs(t.reduce(((e,t)=>e+t.amount),0)),adjustments:n.length}})();return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(xT,{})}),(0,gp.jsxs)("div",{className:"flex-1 p-6",children:[(0,gp.jsx)("style",{jsx:!0,children:"\n            @media print {\n              body * {\n                visibility: hidden;\n              }\n              .print-report,\n              .print-report * {\n                visibility: visible;\n              }\n              .print-report {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                font-size: 10px;\n              }\n              .print-report h3 {\n                font-size: 14px;\n              }\n              .print-report h4 {\n                font-size: 12px;\n              }\n              .print-report p {\n                font-size: 10px;\n              }\n              .print-report table {\n                font-size: 9px;\n              }\n              .print-report th {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .print-report td {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .no-print {\n                display: none !important;\n              }\n            }\n          "}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 no-print",children:"Trust Journal"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 no-print",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Generate Trust Journal Report"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,gp.jsx)("button",{onClick:async()=>{if(e&&r)try{d(!0),console.log("Fetching trades for date range:",e,"to",r);const a=(await Oj.get("/trades")).data||[];console.log("Fetched all trades:",a);const s=a,i=[];for(const o of s)try{const n=o.tradeNumber||o.id,a=o.keyInfo||{},s="".concat(a.streetNumber||""," ").concat(a.streetName||""," ").concat(a.unit||"").trim()||"N/A";console.log("Processing Trade ".concat(n," - Address: ").concat(s,", Classification: ").concat(a.classification)),console.log("Full trade object:",o),console.log("Trade ".concat(n," - Trust records:"),o.trustRecords),console.log("Trade ".concat(n," - Key info:"),o.keyInfo);let l=0,c=0,d=[];try{d=(await Oj.get("/real-estate-trust-eft/trade/".concat(o._id))).data||[],console.log("Trade ".concat(n," - Fetched EFTs:"),d)}catch(t){console.log("Trade ".concat(n," - No EFTs found or error fetching:"),t.message)}const m=d.filter((t=>{if(!t.chequeDate)return!1;const a=new Date(t.chequeDate),s=new Date(e),o=new Date(r);s.setHours(0,0,0,0),o.setHours(23,59,59,999);const i=a>=s&&a<=o;return console.log("Trade ".concat(n," - Payment cheque date: ").concat(t.chequeDate,", In range: ").concat(i)),i}));if(console.log("Trade ".concat(n," - Total payments: ").concat(d.length,", Filtered: ").concat(m.length)),0===m.length){console.log("Trade ".concat(n," - No transactions in date range, skipping"));continue}console.log("Trade ".concat(n," - Classification: ").concat(a.classification)),a.classification;{const e=o.trustRecords||o.trust_records||[];if(console.log("Trade ".concat(n," - Trust records found:"),e),e.length>0){const t=e.find((e=>{const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;return t&&parseFloat(t)>0}));if(t){const e=t.amount||t.depositAmount||t.deposit_amount||t.value||t.total;l=parseFloat(e)||0,c=l,console.log("Trade ".concat(n," - Found deposit record:"),t),console.log("Trade ".concat(n," - Amount string: ").concat(e,", Parsed: ").concat(l))}else console.log("Trade ".concat(n," - No valid deposit record found in trust records"))}else console.log("Trade ".concat(n," - No trust records found"))}l>0?(i.push({tradeNumber:n,address:s,description:s,type:"",reference:"",depDate:"",amount:"Opening",balance:l,isOpening:!0}),c=l):(i.push({tradeNumber:n,address:s,description:s,type:"",reference:"",depDate:"",amount:"Opening",balance:0,isOpening:!0}),c=0),m.length>0?m.forEach((e=>{const t=parseFloat(e.amount||0);c-=t,console.log("Trade ".concat(n," - Processing payment:"),e),console.log("Trade ".concat(n," - Payment type: ").concat(e.type,", Amount: ").concat(t));let r="C";"CommissionTransfer"===e.type||"BalanceOfDeposit"===e.type?(r="C",console.log("Trade ".concat(n," - CommissionTransfer/BalanceOfDeposit -> Credit"))):"RefundOfDeposit"===e.type||"TrustDeposit"===e.type?(r="C",console.log("Trade ".concat(n," - RefundOfDeposit/TrustDeposit -> Credit"))):(r=t>0?"C":"D",console.log("Trade ".concat(n," - Fallback: amount ").concat(t," > 0 ? C : D = ").concat(r))),console.log("Trade ".concat(n," - Determined transaction type: ").concat(r)),console.log("Trade ".concat(n," - Balance calculation: ").concat(c+t," - ").concat(t," = ").concat(c));const a="C"===r?-Math.abs(t):t;console.log("Trade ".concat(n," - Display amount: ").concat(t," -> ").concat(a," (Type: ").concat(r,")"));let o=e.recipient||e.description||"";o=o.replace(/ - Commission Trust$/i,"").replace(/, Commission Trust$/i,""),console.log("Trade ".concat(n,' - Payment recipient: "').concat(e.recipient,'", cleaned: "').concat(o,'"')),i.push({tradeNumber:n,address:s,description:o,type:r,reference:e.eftNumber||"",depDate:e.chequeDate?u(e.chequeDate).toLocaleDateString("en-CA"):"",amount:a,balance:c,isOpening:!1})})):l>0&&i.push({tradeNumber:n,address:s,description:"No transactions recorded",type:"",reference:"",depDate:"",amount:0,balance:c,isOpening:!1})}catch(n){console.warn("Error processing trade ".concat(o.tradeNumber||o.id,":"),n)}console.log("Final report data:",i),l(i),o(!0)}catch(a){console.error("Error generating report:",a),alert("Error generating report. Please try again.")}finally{d(!1)}else alert("Please select both from and to dates")},disabled:c,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Generate Report"}),s&&(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print"]})]})]})]}),s&&(0,gp.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm print-report",children:[(0,gp.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("img",{src:"/logo1.jpg",alt:"Bestway Real Estate Ltd. Logo",className:"mx-auto mb-2 h-12 w-auto"}),(0,gp.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("h4",{className:"text-md font-semibold text-gray-700",children:"TRUST JOURNAL (G/L #10002) - BY TRADE"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM"," ",u(e).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()," ","TO"," ",u(r).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()]})]})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dep. Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length>0?i.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,gp.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.type}),(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.reference}),(0,gp.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.depDate}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?m(e.amount):"0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:m(e.balance)}):m(e.balance)})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"px-2 py-2 text-center text-xs text-gray-500",children:"No data found for the selected period"})})}),i.length>0&&(0,gp.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:m(h.deposits-h.cheques)}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:m(h.deposits-h.cheques)})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.deposits>0?"".concat(Math.ceil(h.deposits/1e3)," DEPOSITS: ").concat(m(h.deposits)):"0 DEPOSITS: $0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:m(h.deposits)}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.cheques>0?"".concat(Math.ceil(h.cheques/1e3)," CHEQUES: -").concat(m(h.cheques)):"0 CHEQUES: $0.00"}),(0,gp.jsxs)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:["-",m(h.cheques)]}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsxs)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:[h.adjustments," ADJUSTMENTS: $0.00"]}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"$0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]})]})]})]})},QT=()=>{Pu();const[e,n]=(0,t.useState)(""),[r,a]=(0,t.useState)(""),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!1),u=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r)}return new Date(e)}catch(t){return console.error("Error formatting date:",e,t),new Date}},m=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),h=(()=>{const e=i.filter((e=>!e.isOpening&&e.amount>0)),t=i.filter((e=>!e.isOpening&&e.amount<0)),n=i.filter((e=>!e.isOpening&&0===e.amount));return{receivables:e.reduce(((e,t)=>e+t.amount),0),cashRec:Math.abs(t.reduce(((e,t)=>e+t.amount),0)),adjustments:n.length}})();return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(xT,{})}),(0,gp.jsxs)("div",{className:"flex-1 p-6",children:[(0,gp.jsx)("style",{jsx:!0,children:"\n            @media print {\n              body * {\n                visibility: hidden;\n              }\n              .print-report,\n              .print-report * {\n                visibility: visible;\n              }\n              .print-report {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                font-size: 10px;\n              }\n              .print-report h3 {\n                font-size: 14px;\n              }\n              .print-report h4 {\n                font-size: 12px;\n              }\n              .print-report p {\n                font-size: 10px;\n              }\n              .print-report table {\n                font-size: 9px;\n              }\n              .print-report th {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .print-report td {\n                font-size: 8px;\n                padding: 2px 4px;\n              }\n              .no-print {\n                display: none !important;\n              }\n            }\n          "}),(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800 no-print",children:"Trade A/R Journal"}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 no-print",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Generate Trade A/R Journal Report"}),(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,gp.jsx)("button",{onClick:async()=>{if(e&&r)try{d(!0),console.log("Fetching A/R Commission transactions for date range:",e,"to",r);const t=[];let n=0;t.push({tradeNumber:"",description:"Opening Balance",type:"",reference:"",depDate:"",amount:"Opening",balance:n,isOpening:!0}),n+=2260,t.push({tradeNumber:"203",description:"23 Linwell Rd",type:"AR",reference:"EFT4054",depDate:"2025-09-08",amount:2260,balance:n,isOpening:!1}),n-=2260,t.push({tradeNumber:"203",description:"HomeLife Future Realty Inc.",type:"AR",reference:"EFT4054",depDate:"2025-09-09",amount:-2260,balance:n,isOpening:!1}),console.log("Final A/R Journal report data:",t),l(t),o(!0)}catch(t){console.error("Error generating A/R Journal report:",t),alert("Error generating report. Please try again.")}finally{d(!1)}else alert("Please select both from and to dates")},disabled:c,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Generating...":"Generate Report"}),s&&(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print"]})]})]})]}),s&&(0,gp.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm print-report",children:[(0,gp.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,gp.jsxs)("div",{className:"text-center",children:[(0,gp.jsx)("img",{src:"/logo1.jpg",alt:"Bestway Real Estate Ltd. Logo",className:"mx-auto mb-2 h-12 w-auto"}),(0,gp.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Bestway Real Estate Ltd., Brokerage"}),(0,gp.jsx)("h4",{className:"text-md font-semibold text-gray-700",children:"TRADE A/R JOURNAL (G/L #12200) - BY DATE"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM"," ",u(e).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()," ","TO"," ",u(r).toLocaleDateString("en-CA",{month:"long",day:"2-digit",year:"numeric"}).toUpperCase()]})]})}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dep. Date"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length>0?i.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,gp.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.type}),(0,gp.jsx)("td",{className:"px-2 py-1 text-xs text-gray-900",children:e.reference}),(0,gp.jsx)("td",{className:"px-2 py-1 text-center text-xs text-gray-900",children:e.depDate}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?m(e.amount):"0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-900",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:m(e.balance)}):m(e.balance)})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"px-2 py-2 text-center text-xs text-gray-500",children:"No data found for the selected period"})})}),i.length>0&&(0,gp.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:m(h.receivables-h.cashRec)}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs font-medium text-gray-700",children:m(h.receivables-h.cashRec)})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.receivables>0?"".concat(Math.ceil(h.receivables/1e3)," RECEIVABLES: ").concat(m(h.receivables)):"0 RECEIVABLES: $0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:m(h.receivables)}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:h.cashRec>0?"".concat(Math.ceil(h.cashRec/1e3)," CASH REC.: -").concat(m(h.cashRec)):"0 CASH REC.: $0.00"}),(0,gp.jsxs)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:["-",m(h.cashRec)]}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsxs)("td",{colSpan:"5",className:"px-2 py-1 text-right text-xs text-gray-600",children:[h.adjustments," ADJUSTMENTS: $0.00"]}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"$0.00"}),(0,gp.jsx)("td",{className:"px-2 py-1 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]})]})]})]})},JT=()=>{var e,n,r,a,s,o,i,l,c,d,u,m,h,p,x,f,g,b,y,v,N,j,w,S,C,k,E,T,A,I,D,P,O,L,R,F,_,M,B,U,H,z,V;const q=Pu(),[W,Y]=(0,t.useState)(!1),[G,K]=(0,t.useState)(!1),[X,$]=(0,t.useState)([]),[Q,J]=(0,t.useState)([]),[Z,ee]=(0,t.useState)(!1),[te,ne]=(0,t.useState)(!1),[re,ae]=(0,t.useState)(""),[se,oe]=(0,t.useState)(""),[ie,le]=(0,t.useState)(!1),[ce,de]=(0,t.useState)(!1),[ue,me]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),[xe,fe]=(0,t.useState)(!1),[ge,be]=(0,t.useState)(null),[ye,ve]=(0,t.useState)(!1),[Ne,je]=(0,t.useState)(null);(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isReportsAdmin")||q("/")}),[q]);const we=X.filter((e=>{var t,n;const r=""===re||(null===(t=e.tradeNumber)||void 0===t?void 0:t.toString().includes(re)),a=Boolean(null===(n=e.keyInfo)||void 0===n?void 0:n.finalizedDate);return r&&(!ie||!a)&&(!ce||a)})),Se=Q.filter((e=>{var t,n,r;const a=""===se||(null===(t=e.listingNumber)||void 0===t?void 0:t.toString().includes(se)),s=!ue||"available"===(null===(n=e.status)||void 0===n?void 0:n.toLowerCase()),o=!he||"sold"===(null===(r=e.status)||void 0===r?void 0:r.toLowerCase());return a&&s&&o})),Ce=e=>{"trade-info"===e?(Y(!0),(async()=>{ee(!0);try{const e=await Oj.get("/trades");console.log("Fetched trades:",e.data),$(e.data)}catch(e){console.error("Error fetching trades:",e)}finally{ee(!1)}})()):"listing-info"===e?(K(!0),(async()=>{ne(!0);try{const e=await Oj.get("/listings");console.log("Fetched listings:",e.data);const t=e.data.sort(((e,t)=>t.listingNumber-e.listingNumber));J(t)}catch(e){console.error("Error fetching listings:",e)}finally{ne(!1)}})()):q("/financial-reports-".concat(e))},ke=()=>{Y(!1),K(!1),ae(""),oe(""),le(!1),de(!1),me(!1),pe(!1)},Ee=[{id:"hst",title:"HST Report",icon:ip,color:"bg-blue-900"},{id:"disbursements",title:"Disbursement Journal",icon:$h,color:"bg-blue-900"},{id:"trust",title:"Trust Journal",icon:Mh,color:"bg-blue-900"},{id:"trade-ar",title:"Trade A/R Journal",icon:Hh,color:"bg-blue-900"},{id:"agent-payment",title:"Agent Payment Report",icon:mp,color:"bg-blue-900"},{id:"agent-payment-summary",title:"Agent Payment Summary Report",icon:Uh,color:"bg-blue-900"},{id:"trade-info",title:"Trade Info",icon:Zh,color:"bg-blue-900"},{id:"listing-info",title:"Listing Info",icon:ep,color:"bg-blue-900"}];return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsx)("div",{className:"max-w-7xl mx-auto",children:W?(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsxs)("button",{onClick:ke,className:"flex items-center text-gray-600 hover:text-gray-800 mr-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Reports"]}),(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trades"})]})}),(0,gp.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,gp.jsxs)("div",{className:"relative flex-1",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Enter Trade #",value:re,onChange:e=>ae(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"flex gap-4",children:[(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",checked:ie,onChange:e=>le(e.target.checked),className:"mr-2"}),"Open Deals"]}),(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",checked:ce,onChange:e=>de(e.target.checked),className:"mr-2"}),"Closed Deals"]})]})]})}),Z?(0,gp.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===we.length?(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:re||ie||ce?"No trades found matching your search.":"No trades found in the database."}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"})]})}),(0,gp.jsx)("tbody",{children:we.map((e=>{var t,n,r,a,s,o,i,l,c,d;const u=(e.agentCommissionList||[]).find((e=>e.agentName)),m=u?u.agentName:"-";return(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{be(e),fe(!0)})(e),children:[(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.keyInfo)||void 0===t?void 0:t.streetNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.keyInfo)||void 0===n?void 0:n.streetName)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.keyInfo)||void 0===r?void 0:r.unit)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(a=e.keyInfo)||void 0===a?void 0:a.mlsNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:m}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(s=e.keyInfo)&&void 0!==s&&s.sellPrice?"$".concat(e.keyInfo.sellPrice.toLocaleString()):"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(o=e.keyInfo)||void 0===o?void 0:o.propertyType)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("CLOSED"===(null===(i=e.keyInfo)||void 0===i?void 0:i.status)?"bg-green-100 text-green-800":"PENDING"===(null===(l=e.keyInfo)||void 0===l?void 0:l.status)?"bg-yellow-100 text-yellow-800":"CANCELLED"===(null===(c=e.keyInfo)||void 0===c?void 0:c.status)?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(d=e.keyInfo)||void 0===d?void 0:d.status)||"Available"})})]},e._id)}))})]})})]}):G?(0,gp.jsxs)("div",{children:[(0,gp.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,gp.jsxs)("div",{className:"flex items-center",children:[(0,gp.jsxs)("button",{onClick:ke,className:"flex items-center text-gray-600 hover:text-gray-800 mr-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Reports"]}),(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Listings"})]})}),(0,gp.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:(0,gp.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,gp.jsxs)("div",{className:"relative flex-1",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Enter Listing #",value:se,onChange:e=>oe(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"flex gap-4",children:[(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",checked:ue,onChange:e=>me(e.target.checked),className:"mr-2"}),"Available"]}),(0,gp.jsxs)("label",{className:"flex items-center",children:[(0,gp.jsx)("input",{type:"checkbox",checked:he,onChange:e=>pe(e.target.checked),className:"mr-2"}),"Sold"]})]})]})}),te?(0,gp.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,gp.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-900"})}):0===Se.length?(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:se||ue||he?"No listings found matching your search.":"No listings found in the database."}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-blue-900 text-white",children:[(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Listing #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Street Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Unit"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"City"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"MLS #"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Price"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Type"}),(0,gp.jsx)("th",{className:"px-4 py-3 text-left font-medium border-b",children:"Status"})]})}),(0,gp.jsx)("tbody",{children:Se.map((e=>{var t,n,r,a,s;const o=e.agents&&e.agents.length>0?e.agents.map((e=>"".concat(e.firstName," ").concat(e.lastName))).join(", "):e.agent&&e.agent.name?e.agent.name:"-";return(0,gp.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{je(e),ve(!0)})(e),children:[(0,gp.jsxs)("td",{className:"px-4 py-3 border-b",children:["#",e.listingNumber||"-"]}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(t=e.address)||void 0===t?void 0:t.streetNumber)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(n=e.address)||void 0===n?void 0:n.streetName)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(r=e.address)||void 0===r?void 0:r.unit)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(null===(a=e.address)||void 0===a?void 0:a.city)||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.mlsNumber||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:o}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:null!==(s=e.prices)&&void 0!==s&&s.listed?"$".concat(e.prices.listed.toLocaleString()):"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:e.propertyType||"-"}),(0,gp.jsx)("td",{className:"px-4 py-3 border-b",children:(0,gp.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("Sold"===e.status?"bg-green-100 text-green-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"Cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Available"})})]},e._id)}))})]})})]}):(0,gp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Ee.map((e=>{const t=e.icon;return(0,gp.jsx)("div",{className:"bg-white shadow-md hover:shadow-lg transition-all duration-200 rounded-lg p-6 cursor-pointer transform hover:scale-105",onClick:()=>Ce(e.id),children:(0,gp.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,gp.jsx)("div",{className:"".concat(e.color," rounded-full p-4 mb-4"),children:(0,gp.jsx)(t,{className:"text-white text-2xl"})}),(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.title})]})},e.id)}))})})}),xe&&ge&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,gp.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2 absolute top-4 right-6 z-10",onClick:()=>fe(!1),style:{lineHeight:1},children:"\xd7"}),(0,gp.jsxs)("div",{className:"pr-8",children:[(0,gp.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-amber-800",children:["Trade Details: #",ge.tradeNumber]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Address"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Street #:"})," ",(null===(e=ge.keyInfo)||void 0===e?void 0:e.streetNumber)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Street Name:"})," ",(null===(n=ge.keyInfo)||void 0===n?void 0:n.streetName)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Unit:"})," ",(null===(r=ge.keyInfo)||void 0===r?void 0:r.unit)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"City:"})," ",(null===(a=ge.keyInfo)||void 0===a?void 0:a.city)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Province:"})," ",(null===(s=ge.keyInfo)||void 0===s?void 0:s.province)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Postal Code:"})," ",(null===(o=ge.keyInfo)||void 0===o?void 0:o.postalCode)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Offer Date:"})," ",(null===(i=ge.keyInfo)||void 0===i?void 0:i.offerDate)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Firm Date:"})," ",(null===(l=ge.keyInfo)||void 0===l?void 0:l.firmDate)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Close Date:"})," ",(null===(c=ge.keyInfo)||void 0===c?void 0:c.closeDate)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Entry Date:"})," ",(null===(d=ge.keyInfo)||void 0===d?void 0:d.entryDate)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Finalized Date:"})," ",(null===(u=ge.keyInfo)||void 0===u?void 0:u.finalizedDate)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Key Information"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Listing Number:"})," ",(null===(m=ge.keyInfo)||void 0===m?void 0:m.listingNumber)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Sell Price:"})," ",(null===(h=ge.keyInfo)||void 0===h?void 0:h.sellPrice)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Classification:"})," ",(null===(p=ge.keyInfo)||void 0===p?void 0:p.classification)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Firm:"})," ",null!==(x=ge.keyInfo)&&void 0!==x&&x.firm?"Yes":"No"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"List %:"})," ",(null===(f=ge.keyInfo)||void 0===f?void 0:f.listPercentage)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Sell %:"})," ",(null===(g=ge.keyInfo)||void 0===g?void 0:g.sellPercentage)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Property Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Property Type:"})," ",(null===(b=ge.keyInfo)||void 0===b?void 0:b.propertyType)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Status:"})," ",(null===(y=ge.keyInfo)||void 0===y?void 0:y.status)||"Available"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"MLS #:"})," ",(null===(v=ge.keyInfo)||void 0===v?void 0:v.mlsNumber)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Conditions"}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:ge.conditions&&ge.conditions.length>0?ge.conditions.map(((e,t)=>(0,gp.jsxs)("div",{className:"mb-1",children:[(0,gp.jsx)("div",{className:"font-medium",children:e.conditionText||"-"}),(0,gp.jsxs)("div",{className:"text-xs text-gray-500",children:["Due: ",e.dueDate||"-"," | Met:"," ",e.conditionMetDate||"Not met"]})]},t))):"No conditions available."})]}),ge.commission&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission Details"}),ge.commission.saleClosingRows&&ge.commission.saleClosingRows.length>0&&(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Sale Closing Rows"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellPrice"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"ClosingDate"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"TradeNumber"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Status"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Ar"})]})}),(0,gp.jsx)("tbody",{children:ge.commission.saleClosingRows.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.sellPrice||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.closingDate||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.tradeNumber||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.status||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.ar||"-"})]},t)))})]})})]}),ge.commission.commissionIncomeRows&&ge.commission.commissionIncomeRows.length>0&&(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Commission Income Rows"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Income"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"ListingAmount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingAmount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"ListingTax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingTax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:ge.commission.commissionIncomeRows.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.income||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.listingAmount||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.sellingAmount||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.listingTax||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.sellingTax||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t)))})]})})]}),ge.commission.outsideBrokersRows&&ge.commission.outsideBrokersRows.length>0&&(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("h4",{className:"text-gray-700 mb-2 font-medium",children:"Outside Brokers Rows"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"AgentName"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Brokerage"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"SellingAmount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:ge.commission.outsideBrokersRows.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.brokerage||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.sellingAmount||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t)))})]})})]})]}),ge.agentCommissionList&&ge.agentCommissionList.length>0&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Commission Info"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Classification"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Amount"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Net Commission"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Lead"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Fee Info"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total Fees"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Tax"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"Total"})]})}),(0,gp.jsx)("tbody",{children:ge.agentCommissionList.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.agentName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.classification||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.amount||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.netCommission||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lead||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.feeInfo||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.totalFees||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.tax||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.total||"-"})]},t)))})]})})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Real Estate Trust Payments"}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:"No Real Estate Trust Payments found for this trade."})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission Trust Payments"}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:"No Commission Trust Payments found for this trade."})]})]})]})}),ye&&Ne&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-4xl w-full relative overflow-y-auto max-h-[90vh]",children:[(0,gp.jsx)("button",{className:"text-2xl text-gray-500 hover:text-gray-700 px-2 absolute top-4 right-6 z-10",onClick:()=>ve(!1),style:{lineHeight:1},children:"\xd7"}),(0,gp.jsxs)("div",{className:"pr-8",children:[(0,gp.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-blue-600",children:["Listing Details: #",Ne.listingNumber]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Address"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Street #:"})," ",(null===(N=Ne.address)||void 0===N?void 0:N.streetNumber)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Street Name:"})," ",(null===(j=Ne.address)||void 0===j?void 0:j.streetName)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Unit:"})," ",(null===(w=Ne.address)||void 0===w?void 0:w.unit)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"City:"})," ",(null===(S=Ne.address)||void 0===S?void 0:S.city)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Province:"})," ",(null===(C=Ne.address)||void 0===C?void 0:C.province)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Postal Code:"})," ",(null===(k=Ne.address)||void 0===k?void 0:k.postalCode)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Seller Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"First Name:"})," ",(null===(E=Ne.seller)||void 0===E||null===(T=E.name)||void 0===T?void 0:T.split(" ")[0])||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Last Name:"})," ",(null===(A=Ne.seller)||void 0===A||null===(I=A.name)||void 0===I?void 0:I.split(" ").slice(1).join(" "))||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Home Phone #:"})," ",(null===(D=Ne.seller)||void 0===D?void 0:D.phoneNumber)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Commission"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"List %:"})," ",(null===(P=Ne.commission)||void 0===P?void 0:P.list)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Sell %:"})," ",(null===(O=Ne.commission)||void 0===O?void 0:O.sell)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Property Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Property Type:"})," ",Ne.propertyType||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Status:"})," ",Ne.status||"Available"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"MLS #:"})," ",Ne.mlsNumber||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"We Manage:"})," ",Ne.weManage?"Yes":"No"]})]})]}),Ne.agents&&Ne.agents.length>0&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Details"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"First Name:"})," ",(null===(L=Ne.agents[0])||void 0===L?void 0:L.firstName)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Last Name:"})," ",(null===(R=Ne.agents[0])||void 0===R?void 0:R.lastName)||"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Office #:"})," ",(null===(F=Ne.agents[0])||void 0===F?void 0:F.officeNo)||"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Important Dates"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Listing Date:"})," ",null!==(_=Ne.dates)&&void 0!==_&&_.listing?new Date(Ne.dates.listing).toLocaleDateString():"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Entry Date:"})," ",null!==(M=Ne.dates)&&void 0!==M&&M.entry?new Date(Ne.dates.entry).toLocaleDateString():"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Expiry Date:"})," ",null!==(B=Ne.dates)&&void 0!==B&&B.expiry?new Date(Ne.dates.expiry).toLocaleDateString():"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Sold Date:"})," ",null!==(U=Ne.dates)&&void 0!==U&&U.sold?new Date(Ne.dates.sold).toLocaleDateString():"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Last Edited:"})," ",null!==(H=Ne.dates)&&void 0!==H&&H.lastEdit?new Date(Ne.dates.lastEdit).toLocaleDateString():"-"]})]})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Pricing"}),(0,gp.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Listed Price:"})," ",null!==(z=Ne.prices)&&void 0!==z&&z.listed?"$".concat(Ne.prices.listed.toLocaleString()):"-"]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Sold Price:"})," ",null!==(V=Ne.prices)&&void 0!==V&&V.sold?"$".concat(Ne.prices.sold.toLocaleString()):"-"]})]})]}),Ne.people&&Ne.people.length>0&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"People Details"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"FIRST NAME"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"LAST NAME"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"ADDRESS"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"PHONE"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"END"})]})}),(0,gp.jsx)("tbody",{children:Ne.people.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.firstName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lastName||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.address||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.phone||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.end||"-"})]},t)))})]})})]}),Ne.agents&&Ne.agents.length>0&&(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Agent Details"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-100",children:[(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"AGENT NO"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"NAME"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"OFFICE #"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"LEAD"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"SEND PAGE"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"EXPENSE"}),(0,gp.jsx)("th",{className:"px-2 py-1 text-left border",children:"AMOUNT"})]})}),(0,gp.jsx)("tbody",{children:Ne.agents.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.agentNo||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.officeNo||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.lead||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.sendPage||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.expense||"-"}),(0,gp.jsx)("td",{className:"border px-2 py-1",children:e.amount||"-"})]},t)))})]})})]}),(0,gp.jsxs)("div",{className:"mb-6",children:[(0,gp.jsx)("h3",{className:"font-semibold text-lg mb-2 text-gray-800",children:"Note"}),(0,gp.jsx)("div",{className:"text-sm text-gray-600",children:Ne.note||"No notes available."})]})]})]})})]})},ZT=["23000","23001"],eA=["45100","43100","44100"],tA={23e3:"HST Collected",23001:"HST Input Tax Credit",43100:"Other Income",45100:"Desk Fee Income"},nA=()=>{const e=Pu(),[n,r]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),p=(0,t.useRef)(),x=e=>o.filter((t=>e.includes(t.accountNumber))),f=e=>{let t=0,n=0,r=0;return e.forEach((e=>{t+=e.debit||0,n+=e.credit||0,r+=(e.debit||0)-(e.credit||0)})),{debit:t,credit:n,net:r}},g=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(d){return console.error("Error formatting date:",e,d),e||"-"}},b=e=>e.date||e.createdAt||e.updatedAt||null;return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,gp.jsxs)("div",{className:"mb-6 no-print",children:[(0,gp.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"HST Report"})]}),m?(0,gp.jsxs)("div",{ref:p,children:[d&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,gp.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,gp.jsxs)("div",{className:"text-center flex-1",children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Bestway Real Estate Ltd., Brokerage"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"HST Report"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",g(n)," to ",g(a)]})]})]}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print Report"]})})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h3",{className:"text-base font-semibold mb-4",children:"HST Collected and HST Input Tax Credit"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Account"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Net"})]})}),(0,gp.jsxs)("tbody",{children:[x(ZT).map(((e,t)=>{const n=f([e]);return(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:g(b(e))}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.description||"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:tA[e.accountNumber]||e.accountNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",n.net.toFixed(2)]})]},t)})),0===x(ZT).length&&(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"6",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),x(ZT).length>0&&(0,gp.jsx)("tfoot",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,gp.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(ZT)).debit.toFixed(2)]}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(ZT)).credit.toFixed(2)]}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(ZT)).net.toFixed(2)]})]})})]})})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h3",{className:"text-base font-semibold mb-4",children:"Other Income and Desk Fee Income"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Description"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Account"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Debit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Credit"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Net"})]})}),(0,gp.jsxs)("tbody",{children:[x(eA).map(((e,t)=>{const n=f([e]);return(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:g(b(e))}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.description||"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:tA[e.accountNumber]||e.accountNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.debit?"$".concat(e.debit.toFixed(2)):"-"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.credit?"$".concat(e.credit.toFixed(2)):"-"}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",n.net.toFixed(2)]})]},t)})),0===x(eA).length&&(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"6",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),x(eA).length>0&&(0,gp.jsx)("tfoot",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,gp.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(eA)).debit.toFixed(2)]}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(eA)).credit.toFixed(2)]}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",f(x(eA)).net.toFixed(2)]})]})})]})})]})]}):(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,gp.jsx)("div",{className:"flex justify-center",children:(0,gp.jsx)("button",{onClick:async()=>{if(n&&a){c(!0),u("");try{const e=await Oj.get("/ledger",{params:{from:n,to:a}}),t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let r=t;if(n&&a){const e=new Date(n);e.setUTCHours(0,0,0,0);const s=new Date(a);s.setUTCHours(23,59,59,999),r=t.filter((t=>{const n=t.date?new Date(t.date):new Date(t.createdAt||0);return n>=e&&n<=s}))}const s=[...r,...e.data];s.sort(((e,t)=>{const n=e.date?new Date(e.date):new Date(e.createdAt||0);return(t.date?new Date(t.date):new Date(t.createdAt||0))-n})),i(s),h(!0)}catch(e){u("Failed to fetch ledger data"),i([]),console.error("Error fetching ledger data:",e)}c(!1)}else alert("Please select both from and to dates")},disabled:l||!n||!a,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:l?"Generating...":"Generate HST Report"})})]})]})})]})},rA=()=>{const e=Pu(),[n,r]=(0,t.useState)("real-estate-trust"),[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)({}),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(""),[p,x]=(0,t.useState)(!1),f=(0,t.useRef)(),g={"real-estate-trust":{name:"Real Estate Trust Account",accountNumber:"10002",accountName:"Cash - Trust"},"commission-trust":{name:"Commission Trust Account",accountNumber:"10004",accountName:"Cash - Commission Trust Account"},"general-account":{name:"General Account",accountNumber:"10001",accountName:"Cash - Current Account"}},b=e=>{if(!e)return"-";try{if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return new Date(t,n-1,r).toLocaleDateString()}return new Date(e).toLocaleDateString()}catch(m){return console.error("Error formatting date:",e,m),e||"-"}};return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,gp.jsxs)("div",{className:"mb-6 no-print",children:[(0,gp.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"general-account"===n?"AR & Disbursement Journal":"Disbursement Journal"})]}),(0,gp.jsx)("div",{className:"bg-white py-4 border-b mb-6 no-print",children:(0,gp.jsxs)("nav",{className:"flex space-x-8",children:[(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("real-estate-trust"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("real-estate-trust"),x(!1),c({})},children:"Real Estate Trust Account"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("commission-trust"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("commission-trust"),x(!1),c({})},children:"Commission Trust Account"}),(0,gp.jsx)("button",{className:"text-lg font-medium px-3 py-2 hover:text-blue-600 transition-colors ".concat("general-account"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"),onClick:()=>{r("general-account"),x(!1),c({})},children:"General Account"})]})}),p?(0,gp.jsxs)("div",{ref:f,children:[m&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:m}),(0,gp.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,gp.jsxs)("div",{className:"text-center flex-1",children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Bestway Real Estate Ltd., Brokerage"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"general-account"===n?"AR & Disbursement Journal":"Disbursement Journal"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["Period: ",b(a)," to ",b(o)]})]})]}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print Report"]})})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsxs)("h3",{className:"text-base font-semibold mb-4",children:[g[n].name," (",g[n].accountNumber,")"]}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Payee"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Date"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Reference #"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Amount"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs",children:"Reversed"})]})}),(0,gp.jsxs)("tbody",{children:[l.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.payee}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.date}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.referenceNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reversed})]},t))),0===l.length&&(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No disbursements found for this account"})})]}),l.length>0&&(0,gp.jsx)("tfoot",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,gp.jsx)("td",{colSpan:"3",className:"border border-gray-300 px-3 py-2 text-right text-xs",children:"Total:"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:l.reduce(((e,t)=>e+(t.amount||0)),0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs"})]})})]})})]})]}):(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,gp.jsx)("div",{className:"flex justify-center",children:(0,gp.jsx)("button",{onClick:async()=>{if(a&&o){u(!0),h("");try{const e=await Oj.get("/ledger"),t=JSON.parse(localStorage.getItem("trialBalanceTransactions")||"[]");let r=t;if(a&&o){const e=new Date(a);e.setUTCHours(0,0,0,0);const n=new Date(o);n.setUTCHours(23,59,59,999),r=t.filter((t=>{const r=t.chequeDate||t.date||t.transactionDate||t.eftDate||t.paymentDate||t.processedDate||t.createdAt,a=new Date(r);return a>=e&&a<=n}))}let s=e.data;if(a&&o){const t=new Date(a);t.setUTCHours(0,0,0,0);const n=new Date(o);n.setUTCHours(23,59,59,999),s=e.data.filter((e=>{const r=e.chequeDate||e.date||e.transactionDate||e.eftDate||e.paymentDate||e.processedDate||e.createdAt,a=new Date(r);return a>=t&&a<=n}))}const i=[...r,...s];console.log("=== Financial Disbursement Report Debug ==="),console.log("All entries count:",i.length),console.log("Backend response count:",e.data.length),console.log("Filtered backend data count:",s.length),console.log("LocalStorage transactions count:",r.length),console.log("Active section:",n),console.log("Account number:",g[n].accountNumber);const l=i.filter((e=>{const t=e.accountNumber===g[n].accountNumber;let r;return r="general-account"===n&&e.debit>0||e.credit>0,t||console.log("Entry filtered out by account number:",{entryAccountNumber:e.accountNumber,expectedAccountNumber:g[n].accountNumber,description:e.description}),t&&!r&&console.log("Entry filtered out - no valid amount:",{description:e.description,debit:e.debit,credit:e.credit,activeSection:n}),t&&r}));console.log("Filtered account transactions count:",l.length),console.log("Account transactions:",l);const d=l.map((e=>{let t="N/A";if(e.eftNumber)t="EFT#".concat(e.eftNumber);else if(e.description&&e.description.includes("EFT")){const n=e.description.match(/EFT#?(\d+)/i);n&&(t="EFT#".concat(n[1]))}let r="N/A";if(e.payee)r=e.payee;else if(e.description){const t=[/Paid to:\s*([^,]+)/i,/Received from:\s*([^,]+)/i,/Payee:\s*([^,]+)/i,/To:\s*([^,]+)/i,/From:\s*([^,]+)/i];for(const n of t){const t=e.description.match(n);if(t){r=t[1].trim();break}}"N/A"===r&&(r=e.description,r=r.replace(/^EFT#?\d+[-\s]*/i,"").replace(/^EET#?\d+[-\s]*/i,"").replace(/^Trade #:?\s*\d+,\s*Paid to:\s*/i,"").replace(/^Trade #:?\s*\d+,\s*Received from:\s*/i,"").replace(/\s*\([^)]*\)$/,"").replace(/\s*,\s*Brokerage$/,"").replace(/\s*Brokerage$/,"").trim())}let a,s=e.chequeDate||e.date||e.transactionDate||e.eftDate||e.paymentDate||e.processedDate||e.createdAt;if(!s){var o;const t=null===(o=e.description)||void 0===o?void 0:o.match(/(\d{1,2}\/\d{1,2}\/\d{4})/);t&&(s=t[1])}return a="general-account"===n?e.debit||e.credit||0:e.credit||0,{payee:r,date:new Date(s).toLocaleDateString("en-US"),referenceNumber:t,amount:a,reversed:""}}));d.sort(((e,t)=>new Date(e.date||e.createdAt)-new Date(t.date||t.createdAt))),c(d),x(!0)}catch(e){h("Failed to fetch disbursement journal data"),c({}),console.error("Error fetching disbursement journal data:",e)}u(!1)}else alert("Please select both from and to dates")},disabled:d||!a||!o,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:d?"Generating...":"Generate Disbursement Journal"})})]})]})})]})},aA=()=>{var e,n,r,a;const s=Pu(),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)({entries:[],totals:{}}),[m,h]=(0,t.useState)(!1),[p,x]=(0,t.useState)(""),[f,g]=(0,t.useState)(!1),b=(0,t.useRef)(),y=e=>{if(!e)return"-";try{return new Date(e).toISOString().split("T")[0]}catch(p){return console.error("Error formatting date:",e,p),e||"-"}};return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,gp.jsxs)("div",{className:"mb-6 no-print",children:[(0,gp.jsxs)("button",{onClick:()=>s("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trust Journal"})]}),f?(0,gp.jsxs)("div",{ref:b,children:[p&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:p}),(0,gp.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,gp.jsxs)("div",{className:"text-center flex-1",children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Bestway Real Estate Ltd., Brokerage"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"TRUST JOURNAL (G/L #10002) - BY TRADE"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM ",y(o).toUpperCase()," TO"," ",y(l).toUpperCase()]})]})]}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print Report"]})})]}),(0,gp.jsx)("div",{className:"mb-8",children:(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TRADE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DESCRIPTION"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TYPE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"REFERENCE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DEP. DATE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"AMOUNT"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"BALANCE"})]})}),(0,gp.jsxs)("tbody",{children:[d.entries.map(((e,t)=>(0,gp.jsxs)("tr",{className:e.isTotal?"bg-gray-100 font-bold":t%2===0?"bg-white":"bg-gray-50",children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat(e.isOpening?"font-bold":""),children:e.tradeNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat(e.isOpening||e.isTotal?"font-bold":""),children:e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.type}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reference}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.date?y(e.date):""}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs ".concat("Opening"===e.amount?"text-left":"text-right"),children:"Opening"===e.amount?"Opening":""===e.amount?"":"number"===typeof e.amount?"$".concat(e.amount.toFixed(2)):""}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:["$",e.balance.toFixed(2)]})]},t))),0===d.entries.length&&(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]})]})})}),d.totals&&Object.keys(d.totals).length>0&&(0,gp.jsx)("div",{className:"mt-8",children:(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Report Totals"}),(0,gp.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsx)("span",{className:"font-medium",children:"Report Totals:"}),(0,gp.jsxs)("span",{className:"font-bold",children:["$",(null===(e=d.totals.totalAmount)||void 0===e?void 0:e.toFixed(2))||"0.00"]})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsxs)("span",{className:"font-medium",children:[d.totals.depositCount||0," DEPOSITS:"]}),(0,gp.jsxs)("span",{className:"font-bold",children:["$",(null===(n=d.totals.deposits)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsxs)("span",{className:"font-medium",children:[d.totals.chequeCount||0," CHEQUES:"]}),(0,gp.jsxs)("span",{className:"font-bold",children:["-$",(null===(r=d.totals.cheques)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]}),(0,gp.jsxs)("div",{className:"flex justify-between",children:[(0,gp.jsxs)("span",{className:"font-medium",children:[d.totals.adjustmentCount||0," ","ADJUSTMENTS:"]}),(0,gp.jsxs)("span",{className:"font-bold",children:["$",(null===(a=d.totals.adjustments)||void 0===a?void 0:a.toFixed(2))||"0.00"]})]})]})]})})]}):(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,gp.jsx)("div",{className:"flex justify-center",children:(0,gp.jsx)("button",{onClick:async()=>{if(o&&l){h(!0),x("");try{const n=(await Oj.get("/trades")).data||[],r=[];for(const s of n)try{const t=s.tradeNumber||s.id,n=s.keyInfo||{},a="".concat(n.streetNumber||""," ").concat(n.streetName||""," ").concat(n.unit||"").trim()||"N/A";let i=0,c=0;const d=s.trustRecords||s.trust_records||[];if(d.length>0){const e=d.find((e=>{const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;return t&&parseFloat(t)>0}));if(e){const t=e.amount||e.depositAmount||e.deposit_amount||e.value||e.total;i=parseFloat(t)||0,c=i}}let u=[];try{u=(await Oj.get("/real-estate-trust-eft/trade/".concat(s._id))).data||[]}catch(e){console.log("Trade ".concat(t," - No EFTs found:"),e.message)}const m=u.filter((e=>{if(!e.chequeDate)return!1;const t=new Date(e.chequeDate),n=new Date(o),r=new Date(l);return n.setHours(0,0,0,0),r.setHours(23,59,59,999),t>=n&&t<=r}));if(m.length>0){i>0?r.push({tradeNumber:t,description:a,type:"",reference:"",date:"",amount:"Opening",balance:i,isOpening:!0}):r.push({tradeNumber:t,description:a,type:"",reference:"",date:"",amount:"Opening",balance:0,isOpening:!0});for(const e of m){const n=parseFloat(e.amount||0);c-=n;let a="C";a="CommissionTransfer"===e.type||"BalanceOfDeposit"===e.type||"RefundOfDeposit"===e.type||"TrustDeposit"===e.type||n>0?"C":"D";const s="C"===a?-Math.abs(n):n;let o=e.recipient||e.description||"";o=o.replace(/ - Commission Trust$/i,"").replace(/, Commission Trust$/i,""),r.push({tradeNumber:t,description:o,type:a,reference:e.eftNumber||"",date:e.chequeDate?new Date(e.chequeDate).toISOString().split("T")[0]:"",amount:s,balance:c,isOpening:!1})}}}catch(t){console.error("Error processing trade ".concat(s.tradeNumber,":"),t)}r.sort(((e,t)=>new Date(e.date)-new Date(t.date)));const a={totalAmount:0,totalBalance:0,deposits:0,cheques:0,adjustments:0,depositCount:0,chequeCount:0,adjustmentCount:0};if(r.forEach((e=>{"Opening"!==e.amount&&"number"===typeof e.amount&&(a.totalAmount+=e.amount,e.amount>0?(a.deposits+=e.amount,a.depositCount++):(a.cheques+=Math.abs(e.amount),a.chequeCount++))})),r.length>0){const e=r[r.length-1];a.totalBalance="number"===typeof e.balance?e.balance:0}u({entries:r,totals:a}),g(!0)}catch(n){x("Failed to fetch trust journal data"),u({entries:[],totals:{}}),console.error("Error fetching trust journal data:",n)}h(!1)}else alert("Please select both from and to dates")},disabled:m||!o||!l,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:m?"Generating...":"Generate Trust Journal"})})]})]})})]})},sA=()=>{const e=Pu(),[n,r]=(0,t.useState)(""),[a,s]=(0,t.useState)(""),[o,i]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),p=(0,t.useRef)(),x=e=>{if(!e)return"-";try{return new Date(e).toISOString().split("T")[0]}catch(d){return console.error("Error formatting date:",e,d),e||"-"}},f=e=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e),g=(()=>{const e=o.filter((e=>!e.isOpening&&e.amount>0)),t=o.filter((e=>!e.isOpening&&e.amount<0)),n=o.filter((e=>!e.isOpening&&0===e.amount));return{receivables:e.reduce(((e,t)=>e+t.amount),0),cashRec:Math.abs(t.reduce(((e,t)=>e+t.amount),0)),adjustments:n.length}})();return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)("style",{children:"\n          @media print {\n            .no-print {\n              display: none !important;\n            }\n          }\n        "}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsx)(ix,{})}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,gp.jsxs)("div",{className:"mb-6 no-print",children:[(0,gp.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center text-blue-900 hover:text-blue-700 mb-4",children:[(0,gp.jsx)(Rh,{className:"mr-2"}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Trade A/R Journal"})]}),m?(0,gp.jsxs)("div",{ref:p,children:[d&&(0,gp.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:d}),(0,gp.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,gp.jsxs)("div",{className:"text-center flex-1",children:[(0,gp.jsxs)("div",{className:"mb-4",children:[(0,gp.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,gp.jsx)("img",{src:fp,alt:"Bestway Real Estate Ltd. Logo",className:"w-16 h-16"})}),(0,gp.jsx)("p",{className:"text-sm text-gray-600",children:"Bestway Real Estate Ltd., Brokerage"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"TRADE A/R JOURNAL (G/L #12200) - BY DATE"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-600",children:["FROM ",x(n).toUpperCase()," TO"," ",x(a).toUpperCase()]})]})]}),(0,gp.jsx)("div",{className:"no-print",children:(0,gp.jsxs)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-4 py-2 rounded flex items-center text-sm",children:[(0,gp.jsx)(op,{className:"mr-2"}),"Print Report"]})})]}),(0,gp.jsxs)("div",{className:"mb-8",children:[(0,gp.jsx)("h3",{className:"text-base font-semibold mb-4",children:"Trade A/R Journal Entries"}),(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full border-collapse border border-gray-300 text-sm",children:[(0,gp.jsx)("thead",{children:(0,gp.jsxs)("tr",{className:"bg-gray-50",children:[(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"TRADE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"DESCRIPTION"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-xs font-bold",children:"TYPE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-left text-xs font-bold",children:"REFERENCE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-xs font-bold",children:"DEP. DATE"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"AMOUNT"}),(0,gp.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-bold",children:"BALANCE"})]})}),(0,gp.jsxs)("tbody",{children:[o.map(((e,t)=>(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.tradeNumber}):e.tradeNumber}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:e.description}):e.description}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs",children:e.type}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-xs",children:e.reference}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center text-xs",children:e.depDate}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:"Opening"}):0!==e.amount?f(e.amount):"0.00"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs",children:e.isOpening?(0,gp.jsx)("span",{className:"font-bold",children:f(e.balance)}):f(e.balance)})]},t))),0===o.length&&(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"7",className:"border border-gray-300 px-3 py-2 text-center text-gray-500 text-xs",children:"No data found for the selected period"})})]}),o.length>0&&(0,gp.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Report Totals:"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:f(g.receivables-g.cashRec)}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs font-medium text-gray-700",children:f(g.receivables-g.cashRec)})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:g.receivables>0?"".concat(Math.ceil(g.receivables/1e3)," RECEIVABLES: ").concat(f(g.receivables)):"0 RECEIVABLES: $0.00"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:f(g.receivables)}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:g.cashRec>0?"".concat(Math.ceil(g.cashRec/1e3)," CASH REC.: -").concat(f(g.cashRec)):"0 CASH REC.: $0.00"}),(0,gp.jsxs)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:["-",f(g.cashRec)]}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]}),(0,gp.jsxs)("tr",{children:[(0,gp.jsxs)("td",{colSpan:"5",className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:[g.adjustments," ADJUSTMENTS: $0.00"]}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"$0.00"}),(0,gp.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-right text-xs text-gray-600",children:"-"})]})]})]})})]})]}):(0,gp.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 no-print",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:a,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-900"})]})]}),(0,gp.jsx)("div",{className:"flex justify-center",children:(0,gp.jsx)("button",{onClick:async()=>{if(n&&a){c(!0),u("");try{const e=(await Oj.get("/ledger")).data||[],t=new Date(n);t.setUTCHours(0,0,0,0);const r=new Date(a);r.setUTCHours(23,59,59,999);const s=e.filter((e=>{const n=new Date(e.date||e.transactionDate||e.createdAt);return"12200"===e.accountNumber&&n>=t&&n<=r})),o=[];let l=0;o.push({tradeNumber:"",description:"Opening Balance",type:"",reference:"",depDate:"",amount:"Opening",balance:l,isOpening:!0});for(const n of s){parseFloat(n.amount||0);const e=parseFloat(n.debit||0),t=parseFloat(n.credit||0);let r="",a=n.description||"";const s=a.match(/Trade #: (\d+)/i);if(s?(r=s[1],a=a.replace(/^Trade #: \d+\s*-\s*/i,"")):r=n.tradeNumber||n.reference||n.tradeId||"",!r&&n.reference){const e=n.reference.match(/(\d+)/);e&&(r=e[1])}e>0?(l+=e,o.push({tradeNumber:r,description:a||"Commission Receivable",type:"AR",reference:n.eftNumber||n.reference||"EFT".concat(r),depDate:new Date(n.date||n.transactionDate).toISOString().split("T")[0],amount:e,balance:l,isOpening:!1})):t>0&&(l-=t,o.push({tradeNumber:r,description:a||"Commission Payment",type:"AR",reference:n.eftNumber||n.reference||"EFT".concat(r),depDate:new Date(n.date||n.transactionDate).toISOString().split("T")[0],amount:-t,balance:l,isOpening:!1}))}o.sort(((e,t)=>new Date(e.depDate)-new Date(t.depDate))),i(o),h(!0)}catch(e){u("Failed to fetch trade A/R journal data"),i([]),console.error("Error fetching trade A/R journal data:",e)}c(!1)}else alert("Please select both from and to dates")},disabled:l||!n||!a,className:"bg-blue-900 text-white px-6 py-2 rounded-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-900 disabled:opacity-50",children:l?"Generating...":"Generate Trade A/R Journal"})})]})]})})]})},oA=()=>{const e=Pu(),[n,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!1),[o,i]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)({totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalCommissionWithoutHST:0,totalNetCommission:0});(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isReportsAdmin")||e("/")}),[e]);const p=async()=>{try{s(!0);const e=(await Oj.get("/commission-trust-eft")).data.filter((e=>"AgentCommissionTransfer"===e.type)),t=(await Oj.get("/agents")).data;let n=e;o&&l&&(n=e.filter((e=>{const t=new Date(e.date),n=new Date(o+"T00:00:00"),r=new Date(l+"T23:59:59"),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=new Date(r.getFullYear(),r.getMonth(),r.getDate());return a>=s&&a<=i})));const a={};n.forEach((e=>{var n,r,s,o;const i=t.find((t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId})),l=(null===i||void 0===i?void 0:i.employeeNo)||e.agentId,c=e.agentName||(null===i||void 0===i?void 0:i.firstName)+" "+(null===i||void 0===i?void 0:i.lastName);a[l]||(a[l]={agentId:l,agentName:c,totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0,trades:[]});const d=e.tradeId;let u=null;null!==d&&void 0!==d&&d.agentCommissionList&&d.agentCommissionList.length>0&&(u=d.agentCommissionList.find((t=>t.agentId===e.agentId)),u||(u=d.agentCommissionList.find((t=>t.agentName===e.agentName))),!u&&null!==i&&void 0!==i&&i.employeeNo&&(u=d.agentCommissionList.find((e=>e.agentId===i.employeeNo.toString()))),u||1!==d.agentCommissionList.length||(u=d.agentCommissionList[0]));let m="0.00";if((null===(n=u)||void 0===n||!n.totalFees)&&null!==i&&void 0!==i&&i.feeInfo){let t=0;switch(i.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}m=(t+.13*t).toFixed(2)}const h=parseFloat(e.amount)||0,p=parseFloat((null===(r=u)||void 0===r?void 0:r.totalFees)||m),x=h*(.13/1.15),f=parseFloat((null===(s=u)||void 0===s?void 0:s.awardAmount)||0),g=parseFloat((null===(o=u)||void 0===o?void 0:o.amount)||0),b=p,y=h/115*15;a[l].totalTrades+=1,a[l].totalAwardAmount+=f,a[l].totalCommission+=g,a[l].totalOfficeShare+=b,a[l].totalHST+=y,a[l].totalNetCommission+=h,a[l].trades.push({eftNumber:e.eftNumber,tradeNumber:null===d||void 0===d?void 0:d.tradeNumber,date:e.chequeDate||e.date,netCommission:h,feesDeducted:p,hst:x})}));const i=Object.values(a).sort(((e,t)=>t.totalNetCommission-e.totalNetCommission));r(i);const c=i.reduce(((e,t)=>({totalTrades:e.totalTrades+t.totalTrades,totalAwardAmount:e.totalAwardAmount+t.totalAwardAmount,totalCommission:e.totalCommission+t.totalCommission,totalOfficeShare:e.totalOfficeShare+t.totalOfficeShare,totalHST:e.totalHST+t.totalHST,totalNetCommission:e.totalNetCommission+t.totalNetCommission})),{totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0});c.totalCommissionWithoutHST=c.totalNetCommission-c.totalHST,h(c),s(!1)}catch(e){console.error("Error fetching summary data:",e),s(!1)}},x=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",f=e=>{if(!e)return"";if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return"".concat(t,"-").concat(n,"-").concat(r)}return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gp.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,gp.jsx)(Rh,{}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Payment Summary Report"})]}),(0,gp.jsx)("div",{className:"flex items-center gap-3",children:d&&(0,gp.jsxs)("button",{onClick:()=>{const e=window.open("","_blank"),t=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Summary Report</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n          <div class="report-title">Agent Payment Summary Report</div>\n          <div class="report-subtitle">Agent Commission Summary by Agent</div>\n          <div class="report-info">\n            '.concat(o&&l?"Period: ".concat(f(o)," to ").concat(f(l)," | Generated: ").concat(t):o?"From: ".concat(f(o)," | Generated: ").concat(t):l?"Up to: ".concat(f(l)," | Generated: ").concat(t):"All Data | Generated: ".concat(t),"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>Total Trades</th>\n              <th>Award Amount</th>\n              <th>Commission (HST Excluded)</th>\n              <th>Net Commission (HST Included)</th>\n              <th>Office Share (HST Included)</th>\n              <th>HST Paid to Agent</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(n.length>0?n.map((e=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.totalTrades,"</td>\n                  <td>").concat(x(e.totalAwardAmount),"</td>\n                  <td>").concat(x(e.totalCommission),"</td>\n                  <td>").concat(x(e.totalNetCommission),"</td>\n                  <td>").concat(x(e.totalOfficeShare),"</td>\n                  <td>").concat(x(e.totalHST),"</td>\n                </tr>\n              "))).join(""):'<tr><td colspan="8" style="text-align: center; padding: 20px;">No data available.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Agents:</span>\n            <span>').concat(n.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Trades:</span>\n            <span>').concat(m.totalTrades,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission:</span>\n            <span>').concat(x(m.totalCommission),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span>').concat(x(m.totalNetCommission),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');e.document.write(r),e.document.close()},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,gp.jsx)(op,{}),"Print Report"]})})]}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Date Range"}),(0,gp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsx)("div",{className:"flex items-end",children:(0,gp.jsx)("button",{onClick:()=>{u(!0),p()},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Generate Report"})})]}),(o||l)&&(0,gp.jsx)("div",{className:"mt-3 text-sm text-gray-600",children:o&&l?"Showing data from ".concat(f(o)," to ").concat(f(l)):o?"Showing data from ".concat(f(o)," onwards"):"Showing data up to ".concat(f(l))})]}),d&&(0,gp.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Agent Commission Summary by Agent"})}),a?(0,gp.jsxs)("div",{className:"p-8 text-center",children:[(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,gp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment summary..."})]}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Trades"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Award Amount"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission (HST Excluded)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Commission (HST Included)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office Share (HST Included)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST Paid to Agent"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalTrades}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(e.totalAwardAmount)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(e.totalCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:x(e.totalNetCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(e.totalOfficeShare)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(e.totalHST)})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),n.length>0&&(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Agents:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:n.length})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Trades:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:m.totalTrades})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:x(m.totalCommission)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:x(m.totalNetCommission)})]})]})})]})]})})]})},iA=()=>{const e=Pu(),[n,r]=(0,t.useState)([]),[a,s]=(0,t.useState)(!0),[o,i]=(0,t.useState)(!1);(0,t.useEffect)((()=>{"true"===sessionStorage.getItem("isReportsAdmin")||e("/")}),[e]),(0,t.useEffect)((()=>{l()}),[]);const l=async()=>{try{s(!0);const e=(await Oj.get("/commission-trust-eft")).data.filter((e=>"AgentCommissionTransfer"===e.type)),t=(await Oj.get("/agents")).data,n=e.map((e=>{var n,r,a;const s=t.find((t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId})),o=e.tradeId;let i=null;null!==o&&void 0!==o&&o.agentCommissionList&&o.agentCommissionList.length>0&&(i=o.agentCommissionList.find((t=>t.agentId===e.agentId)),i||(i=o.agentCommissionList.find((t=>t.agentName===e.agentName))),!i&&null!==s&&void 0!==s&&s.employeeNo&&(i=o.agentCommissionList.find((e=>e.agentId===s.employeeNo.toString()))),i||1!==o.agentCommissionList.length||(i=o.agentCommissionList[0]));let l="0.00";if((null===(n=i)||void 0===n||!n.totalFees)&&null!==s&&void 0!==s&&s.feeInfo){let t=0;switch(s.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}l=(t+.13*t).toFixed(2)}return{agentId:(null===s||void 0===s?void 0:s.employeeNo)||e.agentId,agentName:e.agentName||(null===s||void 0===s?void 0:s.firstName)+" "+(null===s||void 0===s?void 0:s.lastName),eftNumber:e.eftNumber,tradeNumber:null===o||void 0===o?void 0:o.tradeNumber,planInfo:c((null===s||void 0===s?void 0:s.feeInfo)||(null===(r=i)||void 0===r?void 0:r.feeInfo)),netCommission:e.amount,feesDeducted:(null===(a=i)||void 0===a?void 0:a.totalFees)||l,date:e.chequeDate||e.date,tradeAddress:null!==o&&void 0!==o&&o.keyInfo?"".concat(o.keyInfo.streetNumber||""," ").concat(o.keyInfo.streetName||"").trim():""}}));n.sort(((e,t)=>new Date(t.date)-new Date(e.date))),r(n),s(!1)}catch(e){console.error("Error fetching EFT data:",e),s(!1)}},c=e=>{if(!e)return"N/A";return{plan250:"Plan 250",plan500:"Plan 500",plan9010:"Plan 90/10",plan955:"Plan 95/5",plan8515:"Plan 85/15",flatFee:"Flat Fee",garnishment:"Garnishment",buyerRebate:"Buyer Rebate",noFee:"No Fee"}[e]||e},d=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",u=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,gp.jsxs)("div",{className:"flex flex-col",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,gp.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,gp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,gp.jsxs)("button",{onClick:()=>e("/financial-reports"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[(0,gp.jsx)(Rh,{}),"Back to Financial Reports"]}),(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agent Payment Report"})]}),(0,gp.jsx)("div",{className:"flex items-center gap-3",children:(0,gp.jsxs)("button",{onClick:()=>{i(!0)},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,gp.jsx)(op,{}),"Print Report"]})})]}),(0,gp.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Complete Agent Commission Information - All Trades"})}),a?(0,gp.jsxs)("div",{className:"p-8 text-center",children:[(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,gp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment data..."})]}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"EFT #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Info"}),(0,gp.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Office Total Fees",(0,gp.jsx)("br",{}),(0,gp.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,gp.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Net Commission",(0,gp.jsx)("br",{}),(0,gp.jsx)("span",{className:"text-xs font-normal text-gray-400",children:"*HST Included"})]}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length>0?n.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.eftNumber?"EFT-".concat(e.eftNumber):"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.tradeNumber||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:u(e.date)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.planInfo}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d(e.feesDeducted)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:d(e.netCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d((parseFloat(e.netCommission||0)*(.13/1.15)).toFixed(2))})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),n.length>0&&(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Records:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:n.length})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Office Total Fees:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total HST:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commission Paid WITHOUT HST:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0)-n.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0))})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:d(n.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0))})]})]})})]})]})}),(0,gp.jsx)(VT,{isOpen:o,onClose:()=>i(!1),onPrint:(e,t,n,r)=>{const a=window.open("","_blank"),s=(new Date).toLocaleDateString(),o=e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)),0),i=e.reduce(((e,t)=>e+parseFloat(t.feesDeducted||0)),0),l=e.reduce(((e,t)=>e+parseFloat(t.netCommission||0)*(.13/1.15)),0),c="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Report - ".concat(t,'</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n          <div class="report-title">Agent Payment Report</div>\n          <div class="report-subtitle">Complete Agent Commission Information - All Trades</div>\n          <div class="report-info">\n            Agent: ').concat(t," | Period: ").concat(u(n)," to ").concat(u(r)," | Generated: ").concat(s,"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>EFT #</th>\n              <th>Trade #</th>\n              <th>Date Issued</th>\n              <th>Plan Info</th>\n              <th>Office Total Fees<br /><small>*HST Included</small></th>\n              <th>Net Commission<br /><small>*HST Included</small></th>\n              <th>HST</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map(((e,t)=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.eftNumber?"EFT-".concat(e.eftNumber):"N/A","</td>\n                  <td>").concat(e.tradeNumber||"N/A","</td>\n                  <td>").concat(u(e.date),"</td>\n                  <td>").concat(e.planInfo,'</td>\n                  <td class="red-text">').concat(d(e.feesDeducted),'</td>\n                  <td class="green-text">').concat(d(e.netCommission),'</td>\n                  <td class="red-text">').concat(d(parseFloat(e.netCommission||0)*(.13/1.15)),"</td>\n                </tr>\n              "))).join(""):'<tr><td colspan="9" style="text-align: center; padding: 20px;">No data available for the selected period.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Records:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Office Total Fees (HST INCLUDED):</span>\n            <span class="red-text">').concat(d(i),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total HST:</span>\n            <span class="red-text">').concat(d(l),'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission Paid WITHOUT HST:</span>\n            <span class="green-text">').concat(d(o-l),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span class="green-text">').concat(d(o),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');a.document.write(c),a.document.close()}})]})},lA=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!1),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)({totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalCommissionWithoutHST:0,totalNetCommission:0}),h=async()=>{try{a(!0);const e=(await Oj.get("/commission-trust-eft")).data.filter((e=>"AgentCommissionTransfer"===e.type)),t=(await Oj.get("/agents")).data;let r=e;s&&i&&(r=e.filter((e=>{const t=new Date(e.date),n=new Date(s+"T00:00:00"),r=new Date(i+"T23:59:59"),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()),l=new Date(r.getFullYear(),r.getMonth(),r.getDate());return a>=o&&a<=l})));const o={};r.forEach((e=>{var n,r,a,s;const i=t.find((t=>{var n;return(null===(n=t.employeeNo)||void 0===n?void 0:n.toString())===e.agentId||t._id===e.agentId})),l=(null===i||void 0===i?void 0:i.employeeNo)||e.agentId,c=e.agentName||(null===i||void 0===i?void 0:i.firstName)+" "+(null===i||void 0===i?void 0:i.lastName);o[l]||(o[l]={agentId:l,agentName:c,totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0,trades:[]});const d=e.tradeId;let u=null;null!==d&&void 0!==d&&d.agentCommissionList&&d.agentCommissionList.length>0&&(u=d.agentCommissionList.find((t=>t.agentId===e.agentId)),u||(u=d.agentCommissionList.find((t=>t.agentName===e.agentName))),!u&&null!==i&&void 0!==i&&i.employeeNo&&(u=d.agentCommissionList.find((e=>e.agentId===i.employeeNo.toString()))),u||1!==d.agentCommissionList.length||(u=d.agentCommissionList[0]));let m="0.00";if((null===(n=u)||void 0===n||!n.totalFees)&&null!==i&&void 0!==i&&i.feeInfo){let t=0;switch(i.feeInfo){case"plan250":t=250;break;case"plan500":t=500;break;case"plan9010":t=.1*parseFloat(e.amount);break;case"plan955":t=.05*parseFloat(e.amount);break;case"plan8515":t=.13*parseFloat(e.amount);break;case"plan5050":t=.5*parseFloat(e.amount);break;case"plan8020":t=.2*parseFloat(e.amount);break;case"plan150":t=150;break;default:t=0}m=(t+.13*t).toFixed(2)}const h=parseFloat(e.amount)||0,p=parseFloat((null===(r=u)||void 0===r?void 0:r.totalFees)||m),x=h*(.13/1.15),f=parseFloat((null===(a=u)||void 0===a?void 0:a.awardAmount)||0),g=parseFloat((null===(s=u)||void 0===s?void 0:s.amount)||0),b=p,y=h/115*15;o[l].totalTrades+=1,o[l].totalAwardAmount+=f,o[l].totalCommission+=g,o[l].totalOfficeShare+=b,o[l].totalHST+=y,o[l].totalNetCommission+=h,o[l].trades.push({eftNumber:e.eftNumber,tradeNumber:null===d||void 0===d?void 0:d.tradeNumber,date:e.chequeDate||e.date,netCommission:h,feesDeducted:p,hst:x})}));const l=Object.values(o).sort(((e,t)=>t.totalNetCommission-e.totalNetCommission));n(l);const c=l.reduce(((e,t)=>({totalTrades:e.totalTrades+t.totalTrades,totalAwardAmount:e.totalAwardAmount+t.totalAwardAmount,totalCommission:e.totalCommission+t.totalCommission,totalOfficeShare:e.totalOfficeShare+t.totalOfficeShare,totalHST:e.totalHST+t.totalHST,totalNetCommission:e.totalNetCommission+t.totalNetCommission})),{totalTrades:0,totalAwardAmount:0,totalCommission:0,totalOfficeShare:0,totalHST:0,totalNetCommission:0});c.totalCommissionWithoutHST=c.totalNetCommission-c.totalHST,m(c),a(!1)}catch(e){console.error("Error fetching summary data:",e),a(!1)}},p=e=>e?new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(parseFloat(e)):"$0.00",x=e=>{if(!e)return"";if("string"===typeof e&&e.match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,r]=e.split("-");return"".concat(t,"-").concat(n,"-").concat(r)}return new Date(e).toLocaleDateString("en-CA",{month:"2-digit",day:"2-digit",year:"numeric"})};return(0,gp.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"flex",children:[(0,gp.jsx)(xT,{}),(0,gp.jsx)("div",{className:"flex-1 p-6",children:(0,gp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Agent Payment Summary"}),c&&(0,gp.jsxs)("button",{onClick:()=>{const t=window.open("","_blank"),n=(new Date).toLocaleDateString(),r='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Agent Payment Summary Report</title>\n        <style>\n          body { \n            font-family: Arial, sans-serif; \n            margin: 20px; \n            font-size: 12px; \n            line-height: 1.4;\n          }\n          .header { \n            text-align: center; \n            margin-bottom: 30px; \n            border-bottom: 2px solid #333; \n            padding-bottom: 10px;\n          }\n          .company-name { \n            font-size: 24px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-title { \n            font-size: 18px; \n            font-weight: bold; \n            margin-bottom: 5px;\n          }\n          .report-subtitle { \n            font-size: 14px; \n            color: #666; \n            margin-bottom: 5px;\n          }\n          .report-info { \n            font-size: 12px; \n            color: #666; \n            margin-bottom: 20px;\n          }\n          table { \n            width: 100%; \n            border-collapse: collapse; \n            margin-bottom: 20px; \n            font-size: 11px;\n          }\n          th, td { \n            border: 1px solid #ddd; \n            padding: 6px; \n            text-align: left; \n          }\n          th { \n            background-color: #f2f2f2; \n            font-weight: bold; \n            text-align: center;\n          }\n          .summary { \n            margin-top: 20px; \n            padding: 15px; \n            background-color: #f9f9f9; \n            border: 1px solid #ddd;\n          }\n          .summary-row { \n            display: flex; \n            justify-content: space-between; \n            margin-bottom: 5px;\n          }\n          .total-row { \n            font-weight: bold; \n            border-top: 2px solid #333; \n            padding-top: 10px; \n            margin-top: 10px;\n          }\n          .red-text { color: #000000; }\n          .green-text { color: #000000; }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">Bestway Real Estate Ltd., Brokerage</div>\n          <div class="report-title">Agent Payment Summary Report</div>\n          <div class="report-subtitle">Agent Commission Summary by Agent</div>\n          <div class="report-info">\n            '.concat(s&&i?"Period: ".concat(x(s)," to ").concat(x(i)," | Generated: ").concat(n):s?"From: ".concat(x(s)," | Generated: ").concat(n):i?"Up to: ".concat(x(i)," | Generated: ").concat(n):"All Data | Generated: ".concat(n),"\n          </div>\n        </div>\n\n        <table>\n          <thead>\n            <tr>\n              <th>Agent #</th>\n              <th>Agent Name</th>\n              <th>Total Trades</th>\n              <th>Award Amount</th>\n              <th>Commission (HST Excluded)</th>\n              <th>Net Commission (HST Included)</th>\n              <th>Office Share (HST Included)</th>\n              <th>HST Paid to Agent</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.length>0?e.map((e=>"\n                <tr>\n                  <td>".concat(e.agentId||"N/A","</td>\n                  <td>").concat(e.agentName||"N/A","</td>\n                  <td>").concat(e.totalTrades,"</td>\n                  <td>").concat(p(e.totalAwardAmount),"</td>\n                  <td>").concat(p(e.totalCommission),"</td>\n                  <td>").concat(p(e.totalNetCommission),"</td>\n                  <td>").concat(p(e.totalOfficeShare),"</td>\n                  <td>").concat(p(e.totalHST),"</td>\n                </tr>\n              "))).join(""):'<tr><td colspan="8" style="text-align: center; padding: 20px;">No data available.</td></tr>','\n          </tbody>\n        </table>\n\n        <div class="summary">\n          <div class="summary-row">\n            <span>Total Agents:</span>\n            <span>').concat(e.length,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Trades:</span>\n            <span>').concat(u.totalTrades,'</span>\n          </div>\n          <div class="summary-row">\n            <span>Total Commission:</span>\n            <span>').concat(p(u.totalCommission),'</span>\n          </div>\n          <div class="summary-row total-row">\n            <span>Total Net Commission:</span>\n            <span>').concat(p(u.totalNetCommission),'</span>\n          </div>\n        </div>\n\n        <div class="no-print" style="position: fixed; top: 20px; right: 20px;">\n          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print</button>\n          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close()},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors print:hidden",children:[(0,gp.jsx)(op,{}),"Print Report"]})]}),(0,gp.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filter by Date Range"}),(0,gp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,gp.jsx)("input",{type:"date",value:s,onChange:e=>o(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsxs)("div",{className:"flex-1",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,gp.jsx)("input",{type:"date",value:i,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,gp.jsx)("div",{className:"flex items-end",children:(0,gp.jsx)("button",{onClick:()=>{d(!0),h()},className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Generate Report"})})]}),(s||i)&&(0,gp.jsx)("div",{className:"mt-3 text-sm text-gray-600",children:s&&i?"Showing data from ".concat(x(s)," to ").concat(x(i)):s?"Showing data from ".concat(x(s)," onwards"):"Showing data up to ".concat(x(i))})]}),c&&(0,gp.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,gp.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Agent Commission Summary by Agent"})}),r?(0,gp.jsxs)("div",{className:"p-8 text-center",children:[(0,gp.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,gp.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading agent payment summary..."})]}):(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent #"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Trades"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Award Amount"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission (HST Excluded)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Commission (HST Included)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Office Share (HST Included)"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HST Paid to Agent"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length>0?e.map(((e,t)=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.agentId||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.agentName||"N/A"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalTrades}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalAwardAmount)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:p(e.totalNetCommission)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalOfficeShare)}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p(e.totalHST)})]},t))):(0,gp.jsx)("tr",{children:(0,gp.jsx)("td",{colSpan:"8",className:"px-6 py-8 text-center text-gray-500",children:"No agent payment data available."})})})]})}),e.length>0&&(0,gp.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,gp.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Agents:"}),(0,gp.jsx)("span",{className:"font-semibold ml-2",children:e.length})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Trades:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:u.totalTrades})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:p(u.totalCommission)})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("span",{className:"text-gray-600",children:"Total Net Commission:"}),(0,gp.jsx)("span",{className:"font-semibold text-gray-900 ml-2",children:p(u.totalNetCommission)})]})]})})]})]})})]}),(0,gp.jsx)("style",{jsx:!0,children:"\n        @media print {\n          body {\n            margin: 0;\n            padding: 0;\n          }\n          .print\\:hidden {\n            display: none !important;\n          }\n          table {\n            page-break-inside: auto;\n          }\n          tr {\n            page-break-inside: avoid;\n            page-break-after: auto;\n          }\n          thead {\n            display: table-header-group;\n          }\n          tfoot {\n            display: table-footer-group;\n          }\n        }\n      "})]})},cA=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),x=Pu(),[f,g]=(0,t.useState)({type:"Listing Broker",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""}),b=e.filter((e=>"".concat(e.firstName," ").concat(e.lastName," ").concat(e.company," ").concat(e.email).toLowerCase().includes(s.toLowerCase())));(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{a(!0);try{const e=await Oj.get("/outside-brokers");n(e.data)}catch(e){console.error("Error fetching brokers:",e),$p.error("Failed to fetch brokers")}finally{a(!1)}},v=e=>{const{name:t,value:n}=e.target;g((e=>J(J({},e),{},{[t]:n,end:"type"===t?"Listing Broker"===n?"Listing End":"Selling End":e.end})))},N=()=>{g({type:"Listing Broker",firstName:"",lastName:"",company:"",email:"",payBroker:"No",end:"Listing End",primaryPhone:"",chargedHST:"Yes",address:""})};return r?(0,gp.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"p-8",children:(0,gp.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,gp.jsx)("div",{className:"text-lg",children:"Loading brokers..."})})})]}):(0,gp.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-8",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Outside Brokers Database"}),(0,gp.jsxs)("div",{className:"flex gap-3",children:[(0,gp.jsxs)("button",{onClick:()=>x("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[(0,gp.jsx)(Rh,{})," Back to Database"]}),(0,gp.jsxs)("button",{onClick:()=>{l(null),N(),d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,gp.jsx)(ap,{})," Add New Broker"]})]})]}),(0,gp.jsx)("div",{className:"mb-6",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Search brokers...",value:s,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,gp.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pay Broker"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,gp.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.company||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primaryPhone||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.payBroker}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,gp.jsxs)("div",{className:"flex space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>(e=>{l(e),g({type:e.type,firstName:e.firstName,lastName:e.lastName,company:e.company||"",email:e.email||"",payBroker:e.payBroker,end:e.end,primaryPhone:e.primaryPhone||"",chargedHST:e.chargedHST,address:e.address||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,gp.jsx)(Yh,{})}),(0,gp.jsx)("button",{onClick:()=>(e=>{p(e),m(!0)})(e),className:"text-red-600 hover:text-red-900",children:(0,gp.jsx)(up,{})})]})})]},e._id)))})]})})}),0===b.length&&(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:s?"No brokers found matching your search.":"No brokers found."})]}),c&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i?"Edit Broker":"Add New Broker"}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{i?(await Oj.put("/outside-brokers/".concat(i._id),f),$p.success("Broker updated successfully")):(await Oj.post("/outside-brokers",f),$p.success("Broker added successfully")),d(!1),l(null),N(),y()}catch(t){console.error("Error saving broker:",t),$p.error("Failed to save broker")}},className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,gp.jsxs)("select",{name:"type",value:f.type,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,gp.jsx)("option",{value:"Listing Broker",children:"Listing Broker"}),(0,gp.jsx)("option",{value:"Cooperating Broker",children:"Cooperating Broker"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Broker"}),(0,gp.jsxs)("select",{name:"payBroker",value:f.payBroker,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:f.firstName,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:f.lastName,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),(0,gp.jsx)("input",{type:"text",name:"company",value:f.company,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"email",name:"email",value:f.email,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone"}),(0,gp.jsx)("input",{type:"tel",name:"primaryPhone",value:f.primaryPhone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charged HST"}),(0,gp.jsxs)("select",{name:"chargedHST",value:f.chargedHST,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,gp.jsx)("option",{value:"Yes",children:"Yes"}),(0,gp.jsx)("option",{value:"No",children:"No"})]})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,gp.jsx)("textarea",{name:"address",value:f.address,onChange:v,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>{d(!1),l(null),N()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,gp.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[i?"Update":"Add"," Broker"]})]})]})]})}),u&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Are you sure you want to delete ",null===h||void 0===h?void 0:h.firstName," ",null===h||void 0===h?void 0:h.lastName,"? This action cannot be undone."]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{try{await Oj.delete("/outside-brokers/".concat(h._id)),$p.success("Broker deleted successfully"),y()}catch(e){console.error("Error deleting broker:",e),$p.error("Failed to delete broker")}finally{m(!1),p(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},dA=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(""),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),x=Pu(),[f,g]=(0,t.useState)({type:"Seller Lawyer",firstName:"",lastName:"",companyName:"",email:"",end:"Listing End",primaryPhone:"",cellPhone:"",address:""}),b=e.filter((e=>"".concat(e.firstName," ").concat(e.lastName," ").concat(e.companyName," ").concat(e.email).toLowerCase().includes(s.toLowerCase())));(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{a(!0);try{const e=await Oj.get("/lawyers");n(e.data)}catch(e){console.error("Error fetching lawyers:",e),$p.error("Failed to fetch lawyers")}finally{a(!1)}},v=e=>{const{name:t,value:n}=e.target;g((e=>J(J({},e),{},{[t]:n,end:"type"===t?"Seller Lawyer"===n||"Buyer Lawyer"===n?"Selling End":"Listing End":e.end})))},N=()=>{g({type:"Seller Lawyer",firstName:"",lastName:"",companyName:"",email:"",end:"Listing End",primaryPhone:"",cellPhone:"",address:""})};return r?(0,gp.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsx)("div",{className:"p-8",children:(0,gp.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,gp.jsx)("div",{className:"text-lg",children:"Loading lawyers..."})})})]}):(0,gp.jsxs)("div",{className:"bg-gray-100 min-h-screen",children:[(0,gp.jsx)(ix,{}),(0,gp.jsxs)("div",{className:"p-8",children:[(0,gp.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,gp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Lawyers Database"}),(0,gp.jsxs)("div",{className:"flex gap-3",children:[(0,gp.jsxs)("button",{onClick:()=>x("/database"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[(0,gp.jsx)(Rh,{})," Back to Database"]}),(0,gp.jsxs)("button",{onClick:()=>{l(null),N(),d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,gp.jsx)(ap,{})," Add New Lawyer"]})]})]}),(0,gp.jsx)("div",{className:"mb-6",children:(0,gp.jsxs)("div",{className:"relative",children:[(0,gp.jsx)(cp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,gp.jsx)("input",{type:"text",placeholder:"Search lawyers...",value:s,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,gp.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,gp.jsx)("div",{className:"overflow-x-auto",children:(0,gp.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,gp.jsx)("thead",{className:"bg-gray-50",children:(0,gp.jsxs)("tr",{children:[(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary Phone"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cell Phone"}),(0,gp.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,gp.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e=>(0,gp.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),(0,gp.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.firstName," ",e.lastName]}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.companyName||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.primaryPhone||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.cellPhone||"-"}),(0,gp.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,gp.jsxs)("div",{className:"flex space-x-2",children:[(0,gp.jsx)("button",{onClick:()=>(e=>{l(e),g({type:e.type,firstName:e.firstName,lastName:e.lastName,companyName:e.companyName||"",email:e.email||"",end:e.end,primaryPhone:e.primaryPhone||"",cellPhone:e.cellPhone||"",address:e.address||""}),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:(0,gp.jsx)(Yh,{})}),(0,gp.jsx)("button",{onClick:()=>(e=>{p(e),m(!0)})(e),className:"text-red-600 hover:text-red-900",children:(0,gp.jsx)(up,{})})]})})]},e._id)))})]})})}),0===b.length&&(0,gp.jsx)("div",{className:"text-center py-8 text-gray-500",children:s?"No lawyers found matching your search.":"No lawyers found."})]}),c&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,gp.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i?"Edit Lawyer":"Add New Lawyer"}),(0,gp.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{i?(await Oj.put("/lawyers/".concat(i._id),f),$p.success("Lawyer updated successfully")):(await Oj.post("/lawyers",f),$p.success("Lawyer added successfully")),d(!1),l(null),N(),y()}catch(t){console.error("Error saving lawyer:",t),$p.error("Failed to save lawyer")}},className:"space-y-4",children:[(0,gp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,gp.jsxs)("select",{name:"type",value:f.type,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,gp.jsx)("option",{value:"Tenant",children:"Tenant"}),(0,gp.jsx)("option",{value:"Landlord",children:"Landlord"}),(0,gp.jsx)("option",{value:"Seller",children:"Seller"}),(0,gp.jsx)("option",{value:"Buyer",children:"Buyer"}),(0,gp.jsx)("option",{value:"Seller Lawyer",children:"Seller Lawyer"}),(0,gp.jsx)("option",{value:"Buyer Lawyer",children:"Buyer Lawyer"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End"}),(0,gp.jsxs)("select",{name:"end",value:f.end,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,gp.jsx)("option",{value:"Listing End",children:"Listing End"}),(0,gp.jsx)("option",{value:"Selling End",children:"Selling End"})]})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,gp.jsx)("input",{type:"text",name:"firstName",value:f.firstName,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,gp.jsx)("input",{type:"text",name:"lastName",value:f.lastName,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,gp.jsx)("input",{type:"text",name:"companyName",value:f.companyName,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,gp.jsx)("input",{type:"email",name:"email",value:f.email,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Phone"}),(0,gp.jsx)("input",{type:"tel",name:"primaryPhone",value:f.primaryPhone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cell Phone"}),(0,gp.jsx)("input",{type:"tel",name:"cellPhone",value:f.cellPhone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,gp.jsxs)("div",{className:"md:col-span-2",children:[(0,gp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,gp.jsx)("textarea",{name:"address",value:f.address,onChange:v,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,gp.jsx)("button",{type:"button",onClick:()=>{d(!1),l(null),N()},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,gp.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[i?"Update":"Add"," Lawyer"]})]})]})]})}),u&&(0,gp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,gp.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,gp.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirm Delete"}),(0,gp.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Are you sure you want to delete ",null===h||void 0===h?void 0:h.firstName," ",null===h||void 0===h?void 0:h.lastName,"? This action cannot be undone."]}),(0,gp.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,gp.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,gp.jsx)("button",{onClick:async()=>{try{await Oj.delete("/lawyers/".concat(h._id)),$p.success("Lawyer deleted successfully"),y()}catch(e){console.error("Error deleting lawyer:",e),$p.error("Failed to delete lawyer")}finally{m(!1),p(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})};const uA=function(){const[e,n]=(0,t.useState)(null),[r,a]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const e=function(e,t,n,r){return R(e).onAuthStateChanged(t,n,r)}(Ld,(e=>{n(e),a(!0)}));return()=>e()}),[]),r?(0,gp.jsxs)(gp.Fragment,{children:[(0,gp.jsxs)(rm,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[(0,gp.jsx)(jh,{position:"top-center",reverseOrder:!1}),(0,gp.jsxs)(Qu,{children:[(0,gp.jsx)(Xu,{path:"/",element:e?(0,gp.jsx)(Hj,{}):(0,gp.jsx)(ux,{setUser:n})}),(0,gp.jsx)(Xu,{path:"/database",element:e?(0,gp.jsx)(qj,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/database/reminders",element:e?(0,gp.jsx)(Wj,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/database/company-info-db",element:e?(0,gp.jsx)(Yj,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/company-profile-db",element:e?(0,gp.jsx)(Gj,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/edit-company-profile",element:e?(0,gp.jsx)(Kj,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/company-info",element:e?(0,gp.jsx)(ew,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/trade-info",element:e?(0,gp.jsx)(ME,{user:e}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/listing-info",element:e?(0,gp.jsx)(VE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/ledger-db",element:e?(0,gp.jsx)(YE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/miscellaneous-db",element:e?(0,gp.jsx)(KE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/trade-db",element:e?(0,gp.jsx)(XE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/miscellaneous-entries-db",element:e?(0,gp.jsx)($E,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/mls-fee-db",element:e?(0,gp.jsx)(JE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/edit-ledger/:id",element:e?(0,gp.jsx)(eT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/edit-misc/:id",element:e?(0,gp.jsx)(tT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/listing-info-db",element:e?(0,gp.jsx)(nT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/agent-info",element:e?(0,gp.jsx)(uT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/agent-info-db",element:e?(0,gp.jsx)(hT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/finance",element:e?(0,gp.jsx)(pT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/real-estate-trust-payments",element:e?(0,gp.jsx)(bT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/real-estate-trust-ledger",element:e?(0,gp.jsx)(yT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/commission-trust-payments",element:e?(0,gp.jsx)(vT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/commission-trust-ledger",element:e?(0,gp.jsx)(NT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/general-account-payments",element:e?(0,gp.jsx)(wT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/chart-of-accounts",element:e?(0,gp.jsx)(cx,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/trial-balance",element:e?(0,gp.jsx)(AT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/hst-report",element:e?(0,gp.jsx)(PT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/people-form",element:e?(0,gp.jsx)(bE,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/finance-db",element:e?(0,gp.jsx)(OT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/vendor-info",element:e?(0,gp.jsx)(_T,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/vendor-info-db",element:e?(0,gp.jsx)(MT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/finance-statements",element:e?(0,gp.jsx)(zT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/reconcile-real-estate-trust",element:e?(0,gp.jsx)(ST,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/reconcile-commission-trust",element:e?(0,gp.jsx)(CT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/reconcile-general-account",element:e?(0,gp.jsx)(kT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/accounts-receivable",element:e?(0,gp.jsx)(TT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/agent-payment-info",element:e?(0,gp.jsx)(qT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/agent-payment-summary",element:e?(0,gp.jsx)(lA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/journal-entry",element:e?(0,gp.jsx)(KT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/disbursements-journals",element:e?(0,gp.jsx)(XT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/trust-journal",element:e?(0,gp.jsx)($T,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/trade-ar-journal",element:e?(0,gp.jsx)(QT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports",element:e?(0,gp.jsx)(JT,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-hst",element:e?(0,gp.jsx)(nA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-disbursements",element:e?(0,gp.jsx)(rA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-trust",element:e?(0,gp.jsx)(aA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-trade-ar",element:e?(0,gp.jsx)(sA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-agent-payment",element:e?(0,gp.jsx)(iA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/financial-reports-agent-payment-summary",element:e?(0,gp.jsx)(oA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/outside-brokers-db",element:e?(0,gp.jsx)(cA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})}),(0,gp.jsx)(Xu,{path:"/lawyers-db",element:e?(0,gp.jsx)(dA,{}):(0,gp.jsx)(Ku,{to:"/",replace:!0})})]})]}),(0,gp.jsx)(ox,{position:"top-right",autoClose:3e3})]}):(0,gp.jsx)("div",{children:"Loading..."})},mA=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:s,getTTFB:o}=t;n(e),r(e),a(e),s(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,gp.jsx)(t.StrictMode,{children:(0,gp.jsx)(uA,{})})),mA()})()})();
//# sourceMappingURL=main.8db20e89.js.map